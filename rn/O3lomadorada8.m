function [Y,Xf,Af] = O3lomadorada8(X,~,~)
%O3LOMADORADA8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:40.
% 
% [Y] = O3lomadorada8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;17.6991150442478];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.2830628655864409;6.3739094387222757;-1.2958110545856383;-1.2392009833498281;1.268348681112005;7.5739415264606427;-0.016997610449597383;0.67592773562052555;-5.2965070425871001;-0.23136675745157825;-0.43292532644641651;-2.2447689806555187;3.0237489788974972;-4.5220922780566495;-1.858807873646368];
  IW1_1 = [0.43103705356681421 -0.93845476503554881 1.3095239362727058 0.62541839454901449 -1.6996401751692891 -1.4726615847538516 -0.9543229591385769;-0.87338538689688727 -3.1355648202629474 -1.0350972602122512 3.5287085199938724 -1.0586528253605449 1.3825433928317183 2.20381587984695;2.6961790095720906 0.21344927853706683 -1.5604698203439529 0.30331311718987075 -0.91977909798302093 0.11768637068035992 -0.6132729646223074;0.89824235346228942 1.5600324085043746 0.34375468309727636 -0.77694094537924241 -0.3874036361760459 0.067305807728468559 0.057974558776412;-1.2010681548154678 1.5506623577347169 1.0884003837453198 -1.3528747747656842 1.8193800931573989 -0.32225030611106659 1.4120847966882726;-0.15160422200230952 -0.02039715451309157 0.87746532505162789 -1.3088823459836059 -0.58115298654931624 -0.21788706070244504 8.0975211775744018;1.1946463334234487 -0.96287489178550278 0.15845397625310981 1.9332966346790696 -0.26692207675815144 -1.6852165590660213 1.7541823004724084;2.0068636124353332 0.72478153283586855 -1.2857438418324658 0.73767433748702582 0.62914772181459799 1.2767560842028118 -0.78242718722238269;-2.5036633455737958 -7.4764138572107299 -1.1904724709928671 0.91997857194902288 -0.43361308371741136 1.0004325207326303 0.24194714438230808;1.78468572732264 3.8704477175732461 0.75771152033148037 -1.2222541582190125 1.8265484881837137 -0.85657355423548487 2.2125113331423121;-1.9539939191970344 0.52720828449190482 0.23581465861879697 -0.22782416903579927 0.10986649761440399 0.1892407321177913 0.07312744067278007;1.5330858699828906 -2.3393428797625733 0.2007342103332849 -0.0045697114635845429 0.08424959393480419 -0.40481609815129621 0.42641468158846835;2.0477695292616698 -1.1079187908080965 -0.16909487103247045 -0.68124445952944834 2.8102339655795188 0.48863444994047128 -0.4007205283923635;0.89878100172071906 -2.4463401838274943 1.207391417319172 -2.5343036045639735 2.1739451586410929 -1.7194428950625658 -2.47737872514239;-2.0910855878150261 1.155256042010572 -0.052313231922433312 0.73900814579961438 -0.82234572277678952 0.35143527129520896 -0.20360020962108949];
  
  % Layer 2
  b2 = [5.0037625089667843;-2.253164469167098;4.1125084420988829;1.1521045933190319;-1.3620611041200665;0.28092021765302133;0.24750974388189698;-1.1756581983495271;0.96561880988942916;1.8066068045672212;-0.66467582099597278;-1.2844895065070387;-1.7885045152169856;-2.4430190691360907;-0.82477298463410564];
  LW2_1 = [2.615233497853529 0.085973941886048871 -0.070745864774011902 2.3228267823340234 0.1321339871410141 1.5014644549531111 0.9638009068941128 -0.30443162529845125 3.1362722786098369 0.078301812255390998 -3.3766192127769896 2.2164427438119052 0.44793650084997855 2.6156903863491507 2.4093293423862243;-1.1703953772047608 3.0401695280400531 0.721704533251049 0.17275866792174044 -0.59041762696060296 -0.27319948716299608 1.0883099589200698 -0.76887613763512808 0.10719750212262566 -0.17482719690073945 -0.7566057134510511 0.15561221334076647 -2.7798494492418149 0.53153674892927205 -1.045243620464595;1.2751124073488302 0.043998859043158263 -0.027792451893194091 -1.1066487712901427 -0.54922081259429245 -0.93051097930313498 -1.0332920688062319 1.0267487219209388 0.4819805685517482 0.97228811701518114 -1.7591338837759429 2.1134376555438168 0.024958419129997161 1.3000759482273527 1.0128165282634536;0.61391833175225419 -0.5105765575825072 0.16513431589977151 -0.16587906747393322 -0.58988611602480057 -0.33081902322450918 0.060971922611172152 -0.53456966067570555 0.54066927733903014 -0.53316033560627285 1.3670152220923688 -0.3068818953247805 0.17752046954502168 0.61512248147923687 -0.87669357666619463;1.1636618477689757 -0.088477263669079292 -0.04225759619035481 -1.1669175133131753 -0.36802309165729269 0.052723815110812949 1.1486005031309694 -0.076859055273673066 0.36493902728301608 1.1095488526005548 -1.0897375846307849 -0.60789630640869674 -1.685874255242005 0.3764214267252497 0.28391495368148895;0.53264676667209687 0.18686277513098878 -0.05597579064965999 -0.047740815724086116 -0.50177107320179093 -0.11932146867728541 -0.6185888800829793 0.77870578063722828 0.0023645968503897587 0.55636004061502997 -1.1003048303503744 1.1945866068821718 0.11306070970883859 -0.41493006066970173 -0.26114626971294641;1.4490015239197604 -0.43801848925805431 -1.092637872477356 -0.37857649086930767 0.13891787674678124 0.40349272235531891 0.588957109443209 -0.38245844636711446 0.31232293413886231 -0.47379107679540133 -0.88796670525936672 1.1416931019024079 -0.84379019008253286 0.2143655021435526 -1.1152010513518764;-0.45532159929049326 -0.35430526364405757 -3.8084979327503272 1.1705271060477938 1.1066143684754781 3.1124100295783439 -0.29905711505763999 0.15241492780219171 1.2401579076588625 -0.46525548667689703 -3.4680664880717478 1.6646099698773429 1.6821965895432816 -2.0124814964800644 2.5266356334751205;-0.27085542090760162 0.34657158416742428 0.59584025450944245 -1.1627382638250763 0.15292493897842771 0.18432690938296464 0.76456972428813375 1.050984202846176 0.36426502850215936 1.0368063278189281 0.086360411112362659 -0.26958485926833148 0.27532958215519743 -0.16259329207567047 -0.82595751994792188;0.87517995571900808 0.11487295906118822 2.1720458202517854 -2.0024965432258135 -0.59538606417062767 -2.5779205685347777 1.2079710415668692 1.8657979046101296 -0.29571088966405301 0.77188224697967889 0.062954278006787961 -2.3523274333253283 -3.7669468273635047 1.5289325892392012 -1.6203497824849451;-1.3670741611096491 -0.28981139840584169 -0.46820036243338881 -0.52493045329629218 -0.59288112814080163 0.19308459517094248 0.25457165089689743 0.65942154834007749 0.51272416714337854 0.063204282448960591 -1.2127516922788013 -2.4960933255870987 -0.52560346007057579 0.11211645969517003 0.59922263599649095;0.32404276022210399 0.60647460336549475 0.87214102980630404 1.1327206280790421 -0.15618957659676871 -0.38082994979078361 -0.97598331371602554 0.38082564052251244 -0.10323012345057853 0.70715206613242099 1.4058828487922601 -0.16043194711081293 -1.0716215145592747 -0.10264698156940041 -1.6764273064194346;1.0742771390054655 1.0643879642125056 1.3094878351576642 0.98832391660568375 -0.48526508013586345 -0.4448346273468029 1.0732375038055568 -1.2701881840001861 0.17418135679763436 -0.4811873154225752 2.8693674525652031 0.63679381648930955 -0.32383283701423865 0.58247488592141783 -1.4706275176594923;-1.0495932540621549 0.5126729725883592 -1.1353204000533279 0.49431477089518527 0.48115419091455197 0.55778353080738874 0.087867566987193294 0.60628238682408808 -2.005253021901368 0.59274948554336571 -1.9561379734239961 0.33882585382894653 -0.61533796233477667 -0.61635021352075769 0.026508413618067467;-0.82718747593303965 0.091806692608093987 0.49973407345926385 -1.1235204616415917 -0.45361179062913715 -0.0026814223396588108 1.4563236621099946 -0.37911874630263948 0.71106459782866049 1.1807909600552386 -0.56536539635016381 -0.64172691039762608 1.042934141560077 0.53489939001376363 1.153374593785947];
  
  % Layer 3
  b3 = -0.67929716366193671;
  LW3_2 = [-0.27114114174027687 1.5269732118453272 0.65540166039325398 -1.7566671709518651 -1.5955941160681704 -1.5720476931809801 1.2362934381129715 -0.19882542332811354 1.1079393092057688 -0.25791859117088645 0.78393551855484334 0.67427079837107096 -1.4751127528358701 -1.0847979858598835 1.0551147779140759];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 17.6991150442478;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
