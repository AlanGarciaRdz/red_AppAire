function [Y,Xf,Af] = SOXOblatos19(X,~,~)
%SOXOBLATOS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:42.
% 
% [Y] = SOXOblatos19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [4.2718773014880647;1.9290655343320606;-0.48271186349490852;-2.6915714583831805;-0.71957062318691378;-1.2023028590717162;-0.48042233869990775;-1.1738788425329747;2.5460102019372202;-1.6755705799303906;-0.70868890560357278;1.2685036238780953;1.6495159246445297];
IW1_1 = [-0.32730566850929632 0.05706102126970343 0.053389985673473646 0.13009057920823064 2.891119240097753 0.036425160538861828 -0.47566167933871556 0.34180590777480246 0.0096904752975028215 0.11156130205304575 1.8234835447305096;-0.31182014164651617 -0.29790635980991259 -0.665165037265259 -0.39022840250054786 -0.56483193239603835 0.19800364488448463 -1.100279350597579 -0.68212006836944428 0.33542247899223132 0.39874384100047355 -0.16300409384688488;-0.37644710844207574 0.17515126137741072 0.96804815847802095 1.0046849683584871 -0.61146441347063352 1.0679854508790296 -0.77543138706218084 2.5148110541173594 0.92988272809666561 0.22397289913000012 2.6131127317871381;4.805058019129353 0.13515739004353974 1.2983236111984269 -0.41165030148040338 -3.842099246925744 0.8172798078263438 -0.41621244383973727 0.78964326595063272 -0.1254516613303811 -0.21157683622274184 2.710000419141378;-0.71419704056384725 2.6975076540724512 -1.5092679496133061 1.0717274550731484 -2.0706197370721631 1.8546985712020445 0.21490825343457912 3.383549585429062 -0.24852197071297624 1.5279149182571168 1.2283144819990379;-1.3071971294548543 0.060460920731293902 0.88446146787057567 0.12667574072428919 1.5636681751968868 0.36643983228600896 0.51260291539598779 -1.6105146835754218 1.1350720166760702 -1.3658283019905475 0.57841657845246996;0.3531475415349371 -0.2319749380587269 0.73206529078314897 0.93359267296967408 0.2373248633000106 0.099573741932860255 0.043418588789706558 1.5600067580683614 0.25951526625063698 0.024299041284551414 -1.8206898814366348;2.125229861760237 -0.017887011575603372 -1.3160925573641231 0.36822219832073289 -0.29038393795389572 -0.61115233764160226 0.51434336488165944 -0.11435741345880122 -0.14245373079234239 -0.020447762039810108 -0.67218290841720885;2.4360947963164032 -0.092851296451044174 0.25851362340085771 0.97350973107028793 0.4242095864625296 -1.3889293418851067 0.29166430002786631 0.2741541761447423 0.28052562984951934 -0.04650669703732991 -0.84017689393720807;-1.6690683532817607 -0.20357619668827701 -1.2561806840481564 0.10132757847737586 0.51796146019209499 -1.3265928725306122 -0.12982063342726169 -0.20271848196788259 0.27072263042373462 -0.059716805471990438 -0.70989901592425719;2.9632267123035008 1.7978278236978857 -1.7000801241030625 1.9842817793422307 1.028668976634513 1.986036010585041 2.5448112991369101 -1.9182910054583482 -0.28177849746171346 0.15228050006412452 -8.099181509792535;0.68146295722109484 0.095169952558142507 -1.0652576838532752 0.81442239131030547 0.062844409390163086 -2.2495210238496051 -0.21074173323176487 -2.2497621056441335 -0.086826878977525543 0.13832716985489774 0.873526852632452;-1.0643379270911542 -0.5484745967759761 -0.17635190310782381 -0.76891409923297505 0.5344983570819748 0.50411452344571606 -0.50991260073963207 -1.7745686761118109 -0.77428732739896611 -0.044517075400451564 -0.85992952411805412];

% Layer 2
b2 = [2.205168128664865;-1.6130438541549836;-1.4924058936063767;-0.46997226351338173;1.4180570349757491;-0.74897741537587803;0.44784443170513244;-1.204771715357839;-0.72980508112567477;-1.0510672193999593;1.1758605529402724;0.66290291014933889;-1.818775802639665];
LW2_1 = [0.39857719552427789 1.0554180962292643 0.098938339454002044 -0.55423666895476464 -0.55219373968086216 -0.14568671288977761 -1.693577947657813 -0.42996119924338971 -0.034729398408226364 -0.52851839507734999 -0.39239317216792885 0.80246332540362741 -0.11328801091533978;0.050747546415321698 0.51259447139945313 -1.1722012792267678 0.27732566163569877 0.051739625144216678 -0.1804873450933254 1.8050598863163243 -0.3626617746693897 1.1878924563886482 -2.8079075248243091 -0.20748258716397128 0.036014384707723043 -0.65743127038164184;0.12778047962723416 -0.64046855103297384 0.36086339675222345 -0.083246087332361329 0.14894526389978877 0.11618349615722365 0.1324372537670318 -0.31697175804723637 -0.73540365275210007 -0.39704915443333666 0.021023084143228343 -0.055779195368898755 0.60437717346165654;-0.19170375969908851 -0.25649007546135022 0.21764938589413804 -0.18547386057905021 -0.12079571944205612 -0.25219751806123925 -0.42041291488492849 -0.42590989648910255 -0.028231297653257527 0.59046433593249203 -0.022002056395959951 0.51219710112420191 -0.62002356781796475;4.8125911557597965 2.2784698631537168 -2.8400270933766234 -5.6261227282992481 -6.430670505883735 -0.51456167348252468 0.28726920548874718 1.5859095127556115 -1.5033462952071508 3.4197494527249406 7.2762462301421653 -0.82643067299575357 2.9446397706312197;-0.42711724670660139 -0.80206689950613463 0.77278897027328941 1.9834277954250732 -0.029151369534909488 0.336007240734364 1.3406083459735774 1.3179848556001288 -0.34533340140001512 1.606126776721758 0.22483490409023457 1.059465530948174 0.25520193146445003;0.43214203598590561 0.6619126221810735 0.51179723096343821 -0.34382309190874533 0.10204546150054419 -0.93964552863722495 -1.335370611300178 1.7430487293388996 0.058381690616091081 -1.3169193887905546 -0.27396369118172093 -1.1186850013373677 0.094802303076809036;0.036411606743781237 -1.9364444136181456 -1.1622766785523286 1.4267565236605069 0.29089738416335004 1.2874924943684753 1.2316569444781964 0.37096480928614295 -1.9977794680852226 3.8198348169478962 -0.4228397125109476 1.4529359722377462 -1.1487578298256014;-0.24268130720353648 -0.91514793950512918 0.33922427180778086 -0.66181800126574541 -0.20544763447455436 -0.38652817088193786 -0.44680136418565275 -0.65655100666307442 -0.22372537656094327 0.9791438696450866 0.022306848915130788 0.7723841929827262 -0.87710945314216948;-1.0143141435442657 -0.50478299372443525 0.19333945298425828 0.24685234797508265 1.0737048317651769 0.35270763561900947 1.2996183458334818 -0.33256615679514356 -1.0941498653833013 1.2489894391125675 0.19486869117878905 -0.50754732657800328 -1.0280568777132184;0.67631384972730857 0.13588791743714349 -1.4362270058457898 0.61456075849209779 -0.23699392716531489 0.079414977708349377 -0.60022142783316823 -0.5013755816093336 -0.29186964976555368 0.88177247779687729 -0.61734590761169406 -0.13283385841556178 0.49991515373836815;-0.48873943241958451 -0.44410176120739131 -0.65715968432837013 2.1108296535699558 -0.05294056609179941 1.0960668495730042 1.5259688698539231 -1.7552913507443939 0.055818902969696681 1.5325343788836361 0.2846721547304728 1.2021542929350644 0.15462339691434512;-0.40075286003585875 -0.084460776375522628 -0.34137183112372732 0.26236626294997006 0.092418708725645587 0.777020244045458 -0.65082249071278886 0.56114698063587576 -0.63851899188518291 -0.4593408636587934 -0.15234359696113006 -0.76996426764304216 -0.398049575683811];

% Layer 3
b3 = 0.54468701843407197;
LW3_2 = [0.76605092897660898 -0.22359901794807341 -0.98804849264911565 -0.91886408978876921 -0.98373831127892808 -0.61210178009285254 0.72183606427634783 1.9631877835554412 0.69741422853830526 0.7682847335803461 -0.082661762511310591 0.59157869088818149 0.15855888914402907];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
