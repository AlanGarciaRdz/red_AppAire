function [Y,Xf,Af] = COCentro48(X,~,~)
%COCENTRO48 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:35.
% 
% [Y] = COCentro48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.6979303572463538;1.6283880635322372;-0.85626042139466385;1.8393166859388819;1.3688341439817004;-1.0452308805398323;0.92940311388997554;-0.56150866879663319;-0.57040028914672436;1.3091083974639932;3.4117303505709518;0.59831158064804224;1.0451508611913687;-0.32794359076317403;1.1902731389799956];
IW1_1 = [-0.50140259507754004 -0.15990528931155368 -1.382829227771043 -0.52921713781270185 0.86501349597417299 -0.93112298271435656 1.9069222711939766 0.40230963253042651 0.10565166186394148 0.55151169772827902;-0.40372105294666083 0.12464307287489272 -0.84506297544812303 -0.3267997603205347 -0.28828584551002023 -0.96333041551079746 2.0160357254738619 -0.014875899163213559 -0.86420769815897946 0.53965535531776587;0.80591298101312348 0.43008433483440495 0.11886768200561108 -1.1759547968226491 -0.012056691518034027 -0.031489725313109368 -0.16942645390718727 0.80439796117371698 1.75633769110274 0.45952845838767326;0.12457394592703727 4.8608213142574908 -0.13544986670538137 0.17533662274841338 -0.027572863591816873 0.30020804248622196 -0.047716814136787786 -0.049824288353363805 -0.23594109443643241 -0.10684865057849147;-0.76894915333840641 0.24407689626417706 1.3695446759099794 0.30481741683155567 -0.17456010486060808 0.15868753804497188 0.084406410618059355 0.18036491020895262 0.22075383047373037 -0.8138080682017983;-0.088511957586368969 1.8052839636423368 -0.53328582772091027 0.16560067658799829 -0.56318966545613591 0.15926405323992343 -0.19280683239444912 1.0731253946842831 1.6384203656138576 -0.57669069090903013;-1.1888723085906328 -1.4597649071550363 0.037669027562847263 0.68777230921178556 -1.1529870063074545 -1.1316000494863641 0.13667920924371513 0.059924225202395535 1.8501299699177547 1.4298128515098987;-0.51884804106094884 -1.2929645150088069 -0.69323203568545577 -0.18991069633718821 0.57527528423138985 -0.515592707512603 -0.18514578504703952 -0.69207093339741377 -0.50830088703567933 -0.33471925905378513;-0.45176545563354986 -2.5910365887280817 0.40477951241565463 0.071975684935260395 0.15904703831273448 -0.076423951659881834 -0.038675625514088333 0.11292534883803416 0.1473338233897383 -0.71335844869159948;0.2136106843704314 0.71040468241981758 0.74223127806421274 -0.20465435440486529 -0.1350167118690607 0.38325408437771402 0.13494057909495952 0.10167014927479054 -0.0073745864625581886 0.65897884756183556;0.77096074501416645 1.0071220439372783 -0.68874136088327387 -0.11826152539883439 1.6729749810595735 -0.54998045645050908 0.14966438858787875 -0.53414483839807592 2.1950570552077755 -0.25039347512807247;0.14642625150201735 -0.060108952004616217 -0.67662356333672968 0.62825857672212315 0.57788995097715201 -0.7084756355000148 -0.10174541873400766 -0.076621961099620689 1.218202854370023 -1.0510842943510978;1.7841793185689456 -0.62115356122373844 1.0076209882530811 0.13575885258910922 -0.028313754516212458 -0.1931438018653788 0.076380883584466305 0.8312747807576647 -0.07431616999473023 1.0469014290681735;-1.3817093908238158 -0.30836018087245004 -0.38627553216087446 -0.80794976375437411 0.044122590169324183 1.12967446401505 -0.15620624306459061 0.24152297018030838 0.913324945638881 -0.23610371090566121;2.2474115925173024 -1.0873397108752445 -1.1690005695100039 0.03421227392732383 -0.09220924163237923 0.57106188439325178 -0.12250901498470612 0.50681454903020207 -0.49826850287679342 0.20997583741254638];

% Layer 2
b2 = [-1.5584808221431907;2.3339420130267587;1.5598344852562374;0.54308677570176711;0.23946300463417913;0.30005245779057776;-1.6833808254270513;0.067112668269527359;0.51512175556232298;-1.1077781047163096;-1.6288242197822902;0.2131295504278144;-1.1057200968472869;-1.5307543400195449;1.4717171338811466];
LW2_1 = [0.1845712118543141 -0.13196169872974772 0.46464100136806824 -0.28750296691745764 -0.60395986096497078 0.49173034103729918 0.13512541464845898 -0.22289148688958299 0.25703269942276125 0.081739711469573428 1.0277342562358913 -0.0022967516806854486 -0.62496676465612777 0.39638589551440812 0.63773044298496506;-0.81297600258963842 -0.20962488292151299 -0.22629505449411985 -0.78722330827650611 0.10243130626685729 0.77062113778954366 -0.077689681927486834 0.66013501354248538 1.0661782451479773 1.304900218342218 1.2247901715768934 -0.33491330502488587 0.86024182618781486 -1.1290063164444208 0.75757175109008346;-1.2850426101711265 1.0856225224224756 -0.37834849609296245 -0.039893473219263037 -0.96476759067041251 -0.47560309576564352 0.32159898215426097 -0.25917589269563462 0.47215372221593949 0.3643679391628733 -0.45541487105928719 0.15385267401056174 0.35786545486921795 0.59229043301617801 -0.4828053114726682;-0.84655615499229619 -0.94593091664033691 -0.53297352079265514 0.64990440444408781 -0.16048453843206981 0.16933938045450903 -1.5821086911807161 0.68183649732869178 0.0034558317822059939 1.0076762930755774 0.64855312169389345 0.28302396254792694 -0.64857499545272468 -0.83298104036129617 -0.956382133288745;-0.49006215907388734 0.98101580926668364 -0.1957043860043679 -0.5003945551610115 1.1746336454447615 0.77177781990137873 0.18007715948973824 2.0168775154915797 -1.2576538246287412 0.23377701504692111 0.38540943980604792 -0.57181798545992613 1.3127432438929756 -0.78147657355945066 -0.74985793632271491;-0.48265751367454135 1.0495396655899796 0.35607571002235394 -1.5546038307942882 0.97375163761000016 -0.74588744788687766 0.79100140089281212 1.6705734141651269 -1.1293401439575335 1.9296144564120967 1.1218070314374224 -0.051031875597805004 -0.19616571457980975 0.86707026107677021 0.94591381618863735;0.64967316614755455 -0.020391501097409739 0.2452901956771269 1.0139502725721226 0.30733007397973838 -0.36065257047092231 0.047498979009055267 -0.2455734411668421 -0.92016063813004378 -0.28038104172078437 -0.073943917605442139 0.25685485103325673 -0.34670843934654244 0.11019828850518032 -0.37032966056696048;0.38510080675927366 -0.40611913502060976 -0.16317532909089122 -0.17418871180480225 -0.42947406666244009 0.20810077652328063 -0.14756354533932547 -0.92706791593910387 -0.99190170083252027 0.025498744602308131 -0.47837543935537458 0.46096177562603519 -0.76357450861540754 0.21465344299500666 1.1755047367806981;0.21255205560118304 -0.32930386222701297 0.0088167369419265978 -0.042639968365928108 -0.98149151041500426 0.21415019824766973 0.0092469841266917818 -0.8405838395256594 -0.48794490264142143 0.36778814443716612 -0.010348324496750175 0.20548772358490092 -0.8835308634757606 -0.16805418580441692 0.29042183934045579;-0.37746732700361563 -0.73788657560544202 -0.19763417491526519 -1.5925733139111271 0.064468455608978112 1.033373663989013 0.49542241842160817 -0.10968045140692101 -1.9734004627494257 0.19078089661072786 1.1887631340944107 -1.007868914225418 -0.098160804647037359 -0.28376819011236165 1.3014090844300947;-0.18097612035009605 0.5403050060778698 0.65308307208388994 1.7763658058563996 0.21612636344186389 -0.39134526370976913 0.22139794206933289 0.16762341850735873 -0.089469066595710439 -0.22275296912698156 0.67125873885216469 -0.18368158179334795 0.15455080749648203 -0.063455938101584231 -0.46536741537751442;-0.82411108274255762 0.94019836804090484 -0.17244554169785048 -0.26643814826731826 0.24395057872479681 -0.017022934588746458 0.050629318041533096 0.34005432902432187 -0.23161446332848906 0.59984827558629727 -0.00025065628970121802 0.45988746216265347 0.60956367465442951 0.44410021224477331 0.49185797303260931;-0.32262537000503744 -0.7107793707099872 -0.37314067139091833 1.2435708372592869 -0.97249106029932242 1.4768924492500548 -1.3374622335729887 -0.077968937486928777 0.72976470131576154 -0.38844257021398615 -0.56277723622210185 -0.38231202847039603 0.5453165457861564 -1.4012383185764237 -0.71173111497832731;-0.46866622693440985 0.074065654862815203 0.093144595173635589 0.48052596389898794 0.46555137106974454 -0.41828182192202912 0.17949625072259451 0.24826301326576447 -0.97609783695781716 -0.096710984734722782 0.31183287599580395 0.43733541325352715 0.87803348328182451 0.61334792695413998 -0.66958962416623213;0.42172397331175981 0.2766526919635417 0.63382588277985807 -0.7182434680990194 0.90159591909494941 -1.0463668915209761 -0.18067597053525475 0.35484941083535615 -0.20219742027646681 -0.5582148983178894 -0.33349160252347021 0.3604524941672429 1.2193378090573483 0.50798304636717206 0.14012237843310424];

% Layer 3
b3 = -0.13371925149628355;
LW3_2 = [-0.58520283587188826 -0.9686415008245195 -0.78229274170781471 -0.11156309044786784 -0.44987999503666859 -2.2157196931794503 -1.4462054493817045 -1.0165022865980664 1.1109766375765047 -0.29915446826066355 1.3465754890232076 1.740241353813599 -0.99880591255627271 -0.98242322562707374 -0.59788433562265986];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
