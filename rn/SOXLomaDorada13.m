function [Y,Xf,Af] = SOXLomaDorada13(X,~,~)
%SOXLOMADORADA13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:33.
% 
% [Y] = SOXLomaDorada13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.9107666917148793;1.2840455893891072;1.8608077824239864;3.8676139875090336;1.6712919412117757;-0.39899693944309989;-0.93374425240143255;-0.4935095991015615;2.0290776947144846;-0.11019635464173611;-1.1008151594298439;2.4798572589487868;0.71067867752055702;2.0718554874771447;2.1840592002633485];
IW1_1 = [-0.059204505679137258 -0.38167120406710164 -0.093351319372531646 -0.061385925972474831 -0.16025342592852587 0.88562459948542416 0.22611551804756028 0.74974153387082498 -1.0646228668770232 1.2601864347444862 0.47356333484113672;-1.3644832677215706 -0.22468211783748937 -0.82582312913122335 -0.39827821352293435 -0.640809317772845 -0.3850446645174147 0.058782548441251692 -0.75451987325456837 0.16932268941753881 -0.14653069303925026 -0.2648643085693323;-2.7325205861844086 1.0680185916816944 -0.32130789072391264 0.2970976130305612 0.83228171347961744 0.30941238977830238 -0.52192963486624533 0.97904551571180254 -0.43094672653598365 -1.7525157867816084 -0.048147326860561682;-5.1681276729649479 -0.18581893093748328 -0.33701873639582941 -0.4691235283285729 -0.16689418425558036 -2.2281822010098211 1.9531544236168994 -0.10026693591936246 -0.21111056473091719 3.0851381622835845 -0.47949602934950281;-0.65173418160199947 -1.7019372922957465 0.65714742636260504 0.64135796643850396 -0.95241137725888014 0.57481487640339413 0.9272559020118849 -0.87281728443891782 0.67279773462820958 -0.96481602292658875 -1.064963186872506;3.8311676398248369 0.18473489345694116 -0.2623205433718937 -0.18363351696863806 -0.67335376160054994 0.6628194101196182 0.31702194925723293 0.81176460309572507 0.088810219016773426 0.88546567983955404 -0.38330358337567089;2.1809707164118599 -0.28612817860578654 1.3476744791442636 0.62292506722909591 -0.25065685663357401 0.72560779742332937 -1.0979113095166551 -0.3112441026929838 0.10338059211337582 -1.706608923957698 0.55597866787271155;4.3989124158284048 0.12497989010103289 0.89417253167985677 0.22129655488553474 0.41107783697297834 0.38811194198462284 -0.3575252617281226 -0.33294785098020663 0.095174441165221016 -1.1694774902807139 1.1792218136415547;1.6011896971483603 0.39205240369460365 0.29589921006787512 0.94357739067782453 0.32287999443389764 -1.1447798659850985 -0.18895338016258101 -3.3123570911449574 0.2495480016383565 -0.72066653742704068 0.2727022259355561;-0.019957942183532053 0.016063617806871811 -0.25346404373079801 -0.1699211560805157 0.26120004428408106 -0.37156651023781356 1.060729228383767 -0.25182312633608633 0.1071193278189712 0.91501306605014376 0.15149552714015152;0.047769335389702551 -0.54306615176418127 0.27731489139433485 -0.51813665792185981 0.75441294679453719 -1.9262874938192689 2.1991590011961724 3.0342089821408371 -0.25996085660692564 -3.9593570413955654 1.0733596381062984;2.6999806274493587 0.2750634279156573 0.2136797460025433 0.33694321897655205 -0.15188821857275364 0.25839957976800165 0.90739345350596257 -0.90025484277011125 0.14092403169452997 0.2189036458823965 -0.42330533244236945;1.2092421195994072 -0.13370353212589145 0.14063063065422882 -0.20571031682587751 -0.051095672727608947 -1.6878278004820291 -0.51022702524783825 -1.1884506370594845 0.17650974325619298 0.35379301075255953 0.1035623137584912;0.010652988385551451 0.017585631926929662 -0.098106192513425228 0.0028131610818704494 -0.20257718617551496 1.0588078305234319 0.19750176640213155 0.93124445218098229 -0.17119637550878042 -0.10852252924081739 -0.12045209847915747;0.35149518873002922 -0.76211316863103318 0.21226679878655658 -0.37529060143872589 -0.39527892123874903 0.31789552895110046 -0.65140208655573351 0.81944100073546211 0.40885203601745956 -0.061155299115849861 -0.96723561453186202];

% Layer 2
b2 = [1.8663291102724324;-1.4122640740191246;-1.2839897991678548;-1.1184848703895789;-0.89703446886860561;-1.0232091544262665;0.48045410991470183;0.47138558013444454;-0.013479332001031418;0.54804690839161496;-0.92502066381370263;-0.30263987910623807;-0.028928105033634396;1.5948537064381703;-1.6381584504206474];
LW2_1 = [-0.7669947761470981 -0.46894316611342057 -0.3291210301483527 0.71738273649518025 0.20258914482762569 -0.69359126264530779 -0.4337385823251062 0.84549005672243682 -0.53547904055584261 0.83207481182987131 0.066307112088045711 1.3154286363410246 -1.2867146780370007 0.56083553005966502 0.24376428069012476;-0.25059797316674792 0.0063976294597626049 0.43138609342988304 -0.12503943475662133 0.36451347851495902 -0.24641066213922261 0.57348822337150873 0.84071443712795602 1.0719551157825349 0.97861082044536352 -0.30631526206031617 -1.7819414400039864 -0.77952929515895963 -0.30932011427962991 0.11275643331238319;-0.65537169120720495 0.50724440430200479 0.59275976096121497 2.2630974292359656 0.65220254753582263 -0.4819056551333149 0.46287921840741975 1.0325651379546716 0.8171889557442702 -0.011896936888376813 -1.1697494798589605 1.1553519108180401 -0.9437821049151357 -0.56845967930279373 0.13480551952606226;0.36894047856715817 -0.26597304423648827 -1.3549167973296667 0.30427358093137985 -0.21653506198570949 0.020266192155507456 -0.53901184007112801 2.1528116931595789 2.2835149777903556 -0.21965261443079354 0.65705639581195918 0.44315684916947023 -0.40980090483162801 0.20577322663985559 -0.016134938081038289;0.71147028359091402 -0.26346794611796176 -0.47612814685290428 -0.25349887761815831 0.41299237906466135 0.023729352335974004 0.16685828103693914 -0.49374399979343309 -0.45335085545926251 0.5848179852453953 0.29831250046895974 -0.40187972470853495 -0.43825425280688657 -0.64938096753985319 0.16369479496615277;0.78063223327781228 -0.83725436962751965 0.92439460104803506 -2.1088682541033914 -0.61175676136233026 0.31987575559576137 -0.48803832583479489 -4.041245658122385 -0.84072928136296643 -0.047998076745057072 1.1074302428626779 -1.0242860114664532 0.85033805971777987 -0.78309455227698244 -0.89497396294482789;-0.81600955845135359 0.34280515887313323 -0.13881456922987118 0.10544296463120248 0.19010223391951933 -0.93118606560789063 0.73815597708896596 0.63696279884155727 -0.88470818347468727 1.0292841915856585 -0.075895204178532544 1.4097835641514371 -0.41185689592716518 0.22456235622258852 1.1330948161810557;0.45955887011901042 0.86094036679644403 0.50789435817651907 0.40513758636012853 0.0066595010352060204 -0.25791315975120271 0.54939205567422777 1.3906956876776315 -0.12213749468136487 -0.44710095687419482 -0.1709518154009638 0.57349527998227823 0.04458186426274427 -0.50970814651539786 0.29583511545207758;-0.042318960494266485 -0.83115843070225481 -1.0239916092241437 0.49618086691522634 0.24200361920795693 -0.59399102363197709 0.93383898948025013 0.045735784076785274 0.55809925345643485 -0.47422010743552595 -0.42084763250886204 -0.23061218128387845 -0.11326317144419251 -0.087027899524888402 0.49152456368621722;0.35980443538513485 0.88876734612623154 1.5517579152861714 -0.23460392175404041 -0.23669974659821816 0.093339876829564322 -0.96313401446503144 0.56262373194845694 -0.4465355866991777 0.52183366452084046 0.36360988626633284 0.50705100722670626 -0.38787560797482395 0.0067474329552748707 -0.53115942108252034;-0.3471987388718476 -0.90282897930174622 1.4472744121955938 0.13415916130448191 -0.45852931014756765 0.51413041401028126 -0.82426065775913193 0.50685064681336534 -0.79656304493261809 0.30187186388929915 -0.080134114064970466 1.2869629142101415 -0.80914998164273144 0.63794309667386095 0.34930355878129227;-1.1520845749557613 -0.176069594659441 1.4890256442374581 -0.16218001913269064 0.42634525685786673 -0.75963341059505651 0.097428175606422474 -1.9114529205056419 -2.2112011784675931 -0.80273447811925247 -0.66159225239963027 -0.697313943558589 0.072439566681609099 0.89881333064200764 0.0062008686366919127;0.88832435155868028 -0.21501824284374338 -0.49783225256766861 -2.1122161825180843 -0.63623359713687611 0.47882888754829639 -0.22746971528744669 -1.2005149927386045 -0.64628474810939929 0.37266473774013642 1.0636855739488447 2.0206902253020549 1.0571004218632325 -0.45947126554186879 -0.91727304916936336;-0.22083649767926516 0.65881703219329535 1.0084493020305763 1.3099996970054928 0.48722871748731456 -2.8167673508038926 -0.64037738430113622 2.5989688371740352 0.76008687095791971 -1.7227149565009126 -1.2423454801768374 0.11787770588938463 -0.26729568125673719 0.0050867029475866986 -0.32661853706700333;-0.65988010106792405 -0.28992876438643955 0.11556670380850223 0.35973986322993701 0.37131115205055865 -0.95682212818698742 0.44968400215313331 0.40675300847263751 0.7186251666362824 -0.1562328120563371 -0.27617604303681931 -0.50811788777480682 -0.037886930111258474 0.31431140448473971 0.10383469115839861];

% Layer 3
b3 = -0.31210688539350073;
LW3_2 = [1.0717416858027531 1.2316765093915212 2.4327665985164253 -1.3904970333785684 0.19527924013719442 2.6575811694262228 -0.3076255125561802 0.53167007402634026 -0.7313970927955733 -0.73166024241530059 0.1794070368542019 -1.3261338945488876 2.7381734835510172 2.8164607182055303 0.43949480875378288];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
