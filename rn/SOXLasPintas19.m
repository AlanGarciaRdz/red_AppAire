function [Y,Xf,Af] = SOXLasPintas19(X,~,~)
%SOXLASPINTAS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:47.
% 
% [Y] = SOXLasPintas19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.2096468181111217;3.1135161702770402;1.7204294671209515;1.9562981853411525;-1.4582032868694215;1.8681398182649185;-0.40856824297915345;0.082885495384848171;-0.48937733542665884;0.22656224461608115;-2.128595082911239;-0.98881357124586755;1.5558067957789916;1.9287434747215197];
IW1_1 = [-0.32624810618785366 1.0829662224594894 0.76267795666962623 -0.093618999824872068 -0.39386116372364272 0.51603785257962076 -1.6900389676099992 0.18103201772320315 0.09586604712880796 -1.1526895172591813 0.76920547409007611 -0.24514442807240039 -0.84810296102013372;0.13377635199636503 0.89767301810398326 0.34875890373767504 1.0077397046849854 1.1485754885185058 -1.0477151927008195 -0.83780453577614666 -0.080641282587810864 1.0857625592978402 1.3985475399302028 1.4090793142886548 -0.2821695248745697 0.57225563222241416;0.088120604594624688 -0.36410788029032681 0.30734647965862227 -0.022420451700692838 0.29280143616268367 -0.35519496272162965 0.40091513104680815 -0.37768511670903676 -0.091586128242906989 0.020625077146767867 -0.86784949973939429 -0.84021151578719788 -0.94740124622162902;-3.7387057829623984 -0.1210652130000178 1.8286600887436566 -0.58458542791386536 -2.3219375409149183 -3.1754059840227731 -2.1960252401055387 -0.99800009838902992 1.5042739251159416 0.4637117448803737 -0.72620663271029284 -1.8025920979325298 2.0340963990639311;1.2901357797407362 0.025716534779642114 0.17876804819022163 0.27942984952051508 0.62034661614513864 -1.2150932916060289 0.64148126348611845 0.14783343302355106 0.011177065929306829 0.53598362501668428 0.96380823133119287 0.85679338929883941 -2.8066645020464218;-1.4762083986048389 0.060498875594244446 0.2498363971971847 -0.34859062756352793 -0.035627248008159966 -0.37763186172390861 0.27727026046335274 0.21516149849440469 -0.011756898903170603 -0.60959142658339971 2.9160628563537876 0.33834640493608509 -0.79230375585667556;0.50823673618159659 0.34460226648410447 0.73870581557241433 -0.096476760830015801 -0.21927997912659719 -2.0731808772237765 -0.15849602364441512 0.23236148485857794 0.58598323056070722 0.18277904673332568 0.82440890347897933 0.36691114870745717 -0.39423858905452802;-1.4385014140282792 0.30885221326946816 -0.31876071878772877 0.25118630478813447 -0.87466819371613824 1.2883105679164 -1.3537718676588311 0.28179315142030825 -0.13240765174899172 -0.31025685803395081 -1.1854471423307922 0.56517073533610696 -1.1334710870149036;-0.41211814140264202 -0.26244925448872752 -1.6242819931564811 -0.29413518125901111 -1.545123986262853 2.4572820836928302 -1.3639204031581629 0.78417499403106539 1.9140204841341728 0.204417002878195 -1.9415175004650469 1.0593008860386921 -1.2796005580009111;2.5057088641599337 -0.30368329524012933 -0.421875088392199 0.005568751935214028 -1.3754361592948445 1.5937271248949032 -1.8547545312494509 -0.27017858359733971 -0.05047412149649777 0.2661341101147362 0.79152121715997181 -0.11163435860220279 -0.26367867956970953;5.1501565441469204 0.16367711983958708 -0.19860458928516483 -0.24043352390739636 -0.43014514484857747 -0.61184354496598592 -1.2915542191714324 0.81117942679882526 -0.80522245140779702 0.0094922245156159584 -0.92187493024146439 -0.45591927828996714 0.67157840388477352;-0.029078628832247547 -1.4614849514129353 -0.38874085667004266 0.22091368310085585 -1.8820819624621068 0.41392290754065253 -0.65610719403374618 1.8855556389545516 -1.0662989788718984 -0.18551944882705523 0.12395010354547314 1.1965677785561295 -0.59225167181841132;2.531351227482185 0.82179051256625857 -0.78210747865281549 -1.5987556356415347 -0.35823804457406488 0.14279050295751394 0.70845251316983704 -0.49847742899558556 1.1143083965017389 0.8141820840135634 -1.2366166878732696 -1.0669929595087593 0.84363969719485987;0.61202844053287264 -0.22370872600494771 -0.81692487714888751 0.25414892758039148 1.4514006595236431 1.8783044384358012 1.6656598477752891 0.18841362903805423 -0.31056877531022437 0.23700803129351211 0.089477624136738737 -0.49837890587081668 1.997530430922061];

% Layer 2
b2 = [1.8679758134463051;-1.7801856907555529;0.72204805868196664;-1.3069819068310957;-0.62522130132455578;0.18228096771492353;1.8989789350355792;0.14278231389817844;0.49178798360197806;0.60651037363090476;1.3450792661512292;2.4505653510703373;-2.306990692879257;-1.4287291912636599];
LW2_1 = [-0.90334388895260842 0.79030321721724173 0.13316784453216662 0.64616178193240836 0.14437508861093976 -0.066589143387727312 0.2350781670752774 1.3768865830024288 -0.75883432297011255 -0.16647038419226157 0.36531621338468512 0.034002622430185529 -0.084027761740120305 -1.3749518963275391;0.53757064186841363 0.05373439945105634 -0.61922989977462639 1.2753139046452202 0.5517610441153511 1.7323285028889013 -0.77919457321961494 0.15698124955580436 -0.56026719818381998 -1.1996756259500634 0.031643700096027787 0.11441307042529139 0.51534174167202695 1.7134215515479265;2.1491929604317965 2.8053368552782052 2.1390762232214686 5.4303693592409621 -0.23381983145946039 -2.1337795669975619 0.28789491485524199 2.0657368210670701 -3.0791767098622702 0.16429416870879035 5.5079179170779291 2.5520956817183236 4.053219862324335 0.48210591156436472;0.34529574317047529 -0.71460015330524584 0.076199130902683584 -1.1533646776113791 2.5690690687633748 -2.138324801528463 1.0570314041019053 -0.19271384387123841 0.14166319666999169 1.3479787054186203 -0.94397991343102139 -0.46670357841731147 -0.29937009493832445 -0.44194307052423604;0.57862080211247624 0.22299293690009897 0.74721285183462682 0.86729662561964427 -0.25063535193270653 -0.25503952913784039 -0.4577146092715601 0.8315268114640415 -0.3387406191290715 -1.4083528591178927 0.042621993932673047 -0.65340228758574026 0.63799528398326899 -0.55882563615409264;-0.59490491723719985 0.31213257029300545 -0.73400616392683815 -0.93115027509951687 0.96621882838478901 0.58062574572737657 0.76591646434677108 0.51319921855911232 -0.67638256376235273 -0.74796576833097839 -0.84023476462479241 0.43060775677853202 -0.16288554805595054 0.23253322855034933;3.298347917170227 -0.28471978851676566 2.3948799003264458 0.65195156901311946 -1.9694964954871341 1.1402966336218407 -1.9408315381288133 1.7027800127107779 1.4801010002183748 1.6083367155127952 -3.3521174964112519 -0.94348917599965532 1.5631223982158056 2.8221400296920351;0.13670389553181056 0.10972300683006198 0.53362920600734642 0.18257076596378238 0.31174280023955891 0.52684262045783814 -0.095853236915680054 0.33162046483378443 -0.33612047933889949 0.17735658194430676 -0.013115456517295385 0.066886304932108523 0.15850469007233911 1.0467395645682296;0.12897769926018854 0.44359813959971023 0.81013224198647105 0.26285204840439663 -0.6246500974833491 0.55119460412939014 -0.22327683896967335 0.28499370654685058 -0.55813552217705031 -0.15720964008616578 -0.75084363207534099 0.06979005789787493 1.3904048949603709 0.88475729571386852;0.56147424457438933 0.13224236187360189 0.10288970973422681 -0.28220700278685251 0.15036356162480902 1.3435715805443615 0.39567039349097538 -0.78016787827278244 -0.38876668724504437 0.70775341393043623 -0.30919956170490603 0.21019456366256939 0.62151742087373385 0.8229723630238317;1.3038530562479296 0.64872953302099368 0.48692705077378295 2.0634818148901286 -0.47022188612462418 -0.50494949935143496 -0.47214823038367437 -0.42631425282865454 -0.79891885093607118 -0.77378855656233159 2.5365062899779969 0.19069043801289051 0.26122164451146906 -0.32347698236334993;0.52582039217093524 0.23662652253399888 0.69555445011559469 1.3112982947918834 -0.71012042256128516 -1.8105169530286875 0.39708263539464467 -0.3530327011730594 -0.33612117588412121 0.051521359620546076 0.970910591544207 0.20425230917381898 -0.44078430144559327 0.72380022596827853;-1.1046854978623366 -2.0895649616140246 -1.4891576558196948 -1.0943235328821541 -0.065625736746443536 0.75192355143233913 0.061879470895452288 -0.085498955460575371 1.4218528496891329 -0.8606527765953299 0.14170992076650893 -1.6806908092959068 -1.2631437612881653 -0.23866372296136287;-0.29956599469991319 -0.17587453997317543 0.9367838282596076 0.64455502497212214 -0.49943234789720975 1.3780193265685179 -0.78459376676593851 1.0261521252786912 0.3882931093939691 0.8672451945127998 0.32907024204877905 -0.77712136013834399 -0.51811989868931219 1.7043769221922613];

% Layer 3
b3 = 0.26202218476691741;
LW3_2 = [-0.058834960296479569 -0.20932567578736541 -3.2032670535472576 -0.20488969350855368 0.080557433679035145 -0.038502739202539243 -1.1238530098470714 0.63275701702268272 -0.4849966701820298 -0.18817957402117305 1.3983148190234687 -0.72184711974060423 -2.4228887990672208 -0.059173313766729844];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
