function [Y,Xf,Af] = O3oblatos19(X,~,~)
%O3OBLATOS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:46.
% 
% [Y] = O3oblatos19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.8586727718679572;1.6002688889012175;1.3422632965455548;-0.59034340805905283;1.5519353599631951;0.64960059964145989;0.56097275007950231;0.05594459220814095;0.28770469497512663;0.6352077242680515;1.4346428735728736;-1.0225920790493355;-0.68039746531190082;2.1156541748027564];
  IW1_1 = [2.5744796499591072 0.28221875638005317 0.0084771625676510198 -0.21424203968682887 -0.49732014702052108 0.3690265681628962;-0.98335012523316878 0.47073444122456193 -1.6626433985915803 1.4386799743397827 1.4507798610534999 -1.0192064940067898;-1.6793994671344996 -1.1003699336596731 -2.2976357312664413 0.49238852397139976 0.50545512440863338 0.33260602286047997;1.7086227821283626 1.1332332035704891 -1.1360014314027795 -0.28489142409312529 -1.7276321931662442 -0.88091268852326554;-0.23864742232472053 -5.4786081610706914 -1.7727541164742717 -0.076204044284398892 -1.4123419618180442 0.29906623468458315;-1.1392362063296435 -1.109082939330891 0.72561705248481689 0.38073910016833701 -0.076156317161979584 0.62327736070494866;-2.4043548476842598 0.24057306425119454 -1.1828283325178419 1.1075844700463198 1.0315883309385054 -2.0449546993057663;-1.0612187684296857 0.72254359580468175 0.53285886039550756 -0.35210065970107973 0.25889123744843773 0.11764064553192767;0.42237100899988406 -1.6420228765975353 1.2075887742509666 -0.31234439581122797 -1.3970389187382211 0.45703550602303239;0.055383293937698905 2.2172242114838987 -0.5822919453079467 -0.28663717085110085 1.2069265130785178 -0.90750584241791643;1.1394831760825435 2.6203649326151881 1.5596852714570388 -0.15868112137683171 1.0554742301110418 2.203870110786319;-1.7634749377483177 -0.21085841982383927 -0.84931414197429345 -0.10112909897620712 -0.93320799286548017 -1.6383889391487865;-1.5352073464431626 -0.0016167169125025638 -2.047330956592682 -0.45283099267459109 0.73197717758923242 -0.048643123512152012;0.53859928989008532 1.1166936437775634 1.0202685243097696 0.02063133807133298 0.53721036826112167 0.51243189990960047];
  
  % Layer 2
  b2 = [-1.8759388835588622;-1.3112794826284595;1.5737756982590665;-0.95923809764174561;-1.3976223305459328;0.60815807392278198;0.39370609525761607;-0.10553023816246752;-0.33511109178776533;-1.043627288288288;-0.50774841285526984;-0.6542590396272101;1.5468976152382941;1.7875817062475885];
  LW2_1 = [0.96442375992048546 0.86874106397491813 0.70557424504486543 -0.15941537008232451 -0.16306907828528289 -0.34458579190314614 0.60382597183921483 0.55663115960455767 1.0390499753478042 -1.1867565221357517 0.91206673207948574 -1.2593160134727186 0.047859114405050945 0.031661134337202301;1.2469419700874067 0.42136130651324449 0.52890217389074334 -0.049042121969364104 0.08404540027991439 -0.048441995440550195 -0.66669897277857026 1.2675981856281384 -0.34613216239095551 0.11657919551791794 -0.36914858570859266 0.59828343649083748 0.47374469974919425 -0.64846140061244306;0.055993612400511678 0.031321218375718773 -0.12790069831076473 0.3508444325974735 0.06854280585634713 1.5124707788310054 0.53936676650655546 0.34791065209669431 -0.74343143029127357 -0.27355687999880129 -0.27802388703835229 0.64813775343715696 -0.21072581137051674 0.10472887718668937;1.1071174757247308 -0.33583243856973 0.23762468528346598 0.22029701808517554 0.15853185187054605 0.32916927540272806 -0.65566288641023807 0.59899515818029647 -0.98902634433582748 -0.29828735413684943 0.68625400470154174 0.025611776399970271 1.2530763159082896 0.72830693943316094;1.4408031903330305 0.60035771831082119 0.25046540072209211 0.45953746523130218 0.59349580373199073 0.90043688809626521 0.060942326738514019 0.79061089691559561 0.2973348447658255 0.42201402357755147 0.48952582018094554 0.24479493433873986 0.7507099513052885 1.027296211677559;-0.20706100626676266 0.75385923043578607 0.7667096691622366 -0.035404176678800289 -0.17847849654111941 -0.60212121516212103 -0.28912859215363851 -2.2015064516500398 0.1320011435644409 0.15075031921815382 0.38409214678820075 -0.99141913987324282 -0.024098514730139187 0.36698545567222118;-0.20405974122054948 0.78747890397302878 -0.47933696126175185 -0.44727249027282823 -1.2960669832867204 -0.032894434598119665 -0.26723245747851521 -0.0027103216157560381 0.64522862696871575 0.10990421429028166 0.90276953977108654 0.85899903427048008 0.56526966034214088 -0.13275067577427857;-0.47242781972921039 -0.060644860075905235 -0.44657747954567562 0.042840981677938428 -0.58161608811754884 1.0530989168925597 -0.075939398138907308 -0.70469904143310136 0.14680924411900048 -0.52344458144842831 -0.38353220617793271 0.66724827790870356 -0.24755077616207907 0.86592866231398413;-1.0177168542304174 0.51112603560321901 -1.1685824088624834 0.00046001335621526085 1.586931754057914 0.012459297337614837 0.88151138377763616 1.1486507279071989 0.34459957010037712 0.29157367897331227 1.2283104428986094 0.1133815180401843 0.16328734206269832 1.7209263455835919;-0.66309164252301223 -0.30385754413248534 -0.18782423901348153 -0.079260550779999397 0.40696899188500596 0.79749456066795044 0.22574023862089024 -0.22353958897494505 0.65645263885588556 0.664032126227872 0.47079154643319454 0.29826349362607713 0.22981974284490891 0.79747837068260452;-0.96048915083466424 0.47917005716894961 -0.062315029912120345 0.55662779557362285 1.9915827411674354 -0.10335501636015951 -0.71371377975573169 -0.74313198854951246 0.40630230849718141 0.50606064297437936 -1.0338284577369501 -0.015105700828879669 1.1607811904078413 0.29421764062191735;-0.70272436355817725 0.024941028881438933 0.2425555064532017 -0.41073777160596525 0.51011656722977594 0.43634175820221222 0.81934846408388118 -0.68386965402182553 0.94521009213879525 -0.58357897325236274 0.45831466241065194 0.35259047012763622 0.053219969527226886 0.87787105095631623;0.10073614335702764 0.33705592116882555 -0.036467196272100197 0.18892299819807873 -0.33628180191292922 0.54956020591239096 -1.226791489344595 -0.26973630561967771 0.37405703849692773 -0.420507466230991 -0.23031055915315832 0.88808727563537748 -0.56032338785254321 0.12703663881598765;0.59557836649368567 0.36543465804847219 0.35192906107527289 0.05774809009111237 0.71648233882719348 -0.55111616246090123 0.48442614964517877 0.65137871509624112 -0.31552345223239564 0.052712974898196367 0.35142915662545215 -0.17327889456272683 -0.020194784429650229 0.6203573097070797];
  
  % Layer 3
  b3 = 0.22682327332297297;
  LW3_2 = [-0.40494261051229474 1.6421871790402212 -1.534318064758214 -1.017713722265005 1.3839493954640334 1.0479974320725041 0.55208459143527155 0.54535550471717442 0.77067419354850497 -1.6530512338827554 -0.30507840854964352 1.5266524455026071 -0.37196974081039641 -0.37009620575620916];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
