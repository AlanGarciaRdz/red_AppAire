function [Y,Xf,Af] = O3tlaquepaque14(X,~,~)
%O3TLAQUEPAQUE14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:52.
% 
% [Y] = O3tlaquepaque14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.171659085057077;3.03490136570561;14.7058823529412;15.3846153846154;10.752688172043;10.4712041884817;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;14.7058823529412];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [0.33659078152441446;-1.7775696054795727;-0.17235951283307155;0.11601655023912311;4.5818370217479609;0.57543448988296442;-0.77158269077017338;-0.46882501134812293;0.72518458837844091;-0.26602666984198753;-0.61790595103884005;1.5221032355184581;3.2785190813661753;-1.4526344438956289;1.8763353624777992];
  IW1_1 = [-1.4788396403113602 0.71904721670579741 -0.093876805668077212 0.73352542213309924 0.84240025155478526 0.11592906929512584 -0.36495575109666306 0.20818991053031108 0.60535890514948842 -0.04512156923688912 0.72428846529259749 0.28783680548377127 -0.88152846174849764;-0.49732454878575827 0.90718797387948691 1.4574585195236391 0.61293320879033097 0.33180453259787679 0.17403036503861483 -0.99019994563714142 -0.039937634282421849 -0.21645549926246979 0.23571803967870913 1.1272953402776729 0.19822390816942484 -0.23823307398375757;-0.051308632443836627 0.21263539733606665 -0.077701950557559754 -1.7146977919537612 0.36522818932664552 -0.53073576013983104 0.43371237385195704 -0.47156304418103256 -0.63243967602394835 2.8106962366271921 -1.5748340385978885 -0.63873781133243979 -1.7607239862623218;1.5843970256099478 0.55991007233109547 -0.038794370659184216 -0.19475291518252952 -0.066083713223702031 0.16630529357598267 -0.066224122600279073 0.23845230598536629 0.24397149651632469 0.74215760277714282 -0.020479926475670193 -0.050281527008209197 0.052963254384236422;0.38409403628653704 -0.37914010218974187 -0.16489537862390924 5.3105160670747908 0.48393928017208671 -0.39005072482348163 0.25879852188160729 -1.2623121164709119 0.066682037635002522 0.54908561700136749 -0.79094677855240669 -0.42950825440453916 -0.28452651992860611;0.32673262676219261 0.50531123252244281 -0.011888258070739371 -0.073546345466905097 -0.26351104868367492 0.0019430134812539138 0.0093303849378777188 -0.1120096168583521 -0.72577280904951647 -0.92382283972176382 0.037301549978532522 -0.091737135154022612 0.939083276421945;0.82433543011135701 0.097437671335482326 -1.159771887833122 2.5663052893675578 -3.1342512799747673 -0.20300436234502955 0.14782064174767348 0.67981241317569974 -1.0142305118023824 -2.7577305362913509 -0.77472960658532808 -0.016433887223033967 1.1766340369403709;-0.34883825301231924 -1.4328738664987064 -0.20952070845248594 -0.13024511240718065 0.50932065085813483 -0.11080335284301347 0.45660901094563644 -0.095349455942426609 -0.32717678234423525 -0.16840001043233438 -0.78758905992303796 0.12564476492320514 -1.0958978701152844;0.15384633634104131 0.41275144748311493 -0.34263007901610426 0.80877910137078179 -0.73539241246442955 0.94504319333483955 -0.47902738874904671 0.19897744028217951 1.0283657646128541 -0.19291226362987482 1.7602977097556105 0.1963661035447922 0.57958117777326246;-0.56845781172316212 -0.010147130868930224 0.83714462072284979 -0.10881350686029863 -0.2315871586598528 -1.1396507486229281 0.018318832095339327 1.626633715627128 -1.7016353490814999 1.1960186971551852 -0.015703209348847419 -1.0038125609759203 1.164395328837504;-2.3823789403483091 0.037472075657638874 -0.021551951651793438 -0.28642428758362981 -0.14673317569536246 0.10789050508975186 0.022291953864116677 0.0011991175551398434 -0.4917529760465007 -0.69756915395892494 0.40358100381576151 -0.26151008432601786 0.91970744819657313;-0.075852708103485919 2.6557229215281719 -0.52216748620756115 -0.92491808449439028 -0.50467111938105635 -0.25546412222320991 0.021796583978690234 0.6910862078980603 0.715405807069459 1.2404639128628883 -0.8886203057978368 -0.58193828704167583 -0.021317956312697006;1.1896855037094709 2.2482592027038621 1.1869188373139756 -0.37882056098129124 0.064151674095600297 -0.19226483423432239 1.7159017464054189 0.79706680392862794 -1.9982252046801914 -0.51797770570186663 -0.24745531404484225 -0.17857944282485108 -2.1424151910028955;-0.92126564642885644 0.75537912612685354 0.077616399860266139 -0.52856865308634693 0.1048257174929777 -0.3647383309153851 0.025886295630747218 -0.24833285296886071 0.17527562953351022 -0.21086721320533636 -0.23690605706734108 -0.16945628919304512 0.3269159554029834;-0.25674400605915609 -0.65366467784308258 0.73940087958580725 0.64457580355823429 -0.05462856459453741 -0.31359645394010904 -0.41839540110407325 -0.2791282561836384 1.080578156704564 -0.45890044116620332 0.54366735468068561 0.0079857931841931951 0.29652995423645334];
  
  % Layer 2
  b2 = [2.2322080645043827;-2.9724897920457725;-0.90889354578956649;1.5199866805074922;-0.43108728614862168;-1.8517230237042268;0.15064363120151583;0.51219867927599549;-0.042458010270987445;1.735230932894646;0.75014990458879094;1.2949262249947247;0.32666917312725979;2.1492380716155184;-3.3458487121908718];
  LW2_1 = [-0.26535934753837326 0.45743759538763906 -0.39306803233255866 0.79958100780285857 -0.47828027865357592 -0.86480643858208006 -0.37883027130268526 1.0407454827073586 -0.9999632242591473 0.91107064914550895 0.63894159704147868 0.43236419757548566 -0.24818561441427744 0.17559427520899423 0.53811354860171923;0.4044141229067455 -0.59750502805767747 -0.88088804615656391 -0.92665213708701 0.018870330313178935 -4.013847711457287 1.0829274102180553 -0.18756008464742935 -1.1457229734504377 -0.22988803188428891 2.2905464917293501 0.23956325725826982 1.7844235173865417 0.5156415746075993 -0.094133306663743449;-0.35783469876446405 -0.59625825607049276 0.074741495052061707 -0.04091519412624698 -0.56664131616573488 -1.2518022374435456 -0.064274581200605127 0.29872498590574337 -0.11786507517061159 0.43214805233725584 -0.21562779593629466 0.18643749678329261 0.095407528515473114 -0.13510657435584589 -0.053630087699307827;0.12401160365324952 -0.83267483917625262 0.63823513962904577 -0.46715051571630872 0.31051480822300243 0.083320944570255295 -0.44355255274226635 -1.5208750442472554 0.067690526122588274 0.76233460761616334 -0.4277817474232381 -0.67804913505135689 -0.48752300826107897 0.26722172227692503 -0.26849199779881328;1.1875654335519092 -1.0453621601179983 0.051582046135789913 -0.42615827308226883 1.1981497273148334 1.6743910297428863 0.41151173804525554 0.98761591383509417 1.2567598411602079 0.18287753494596198 0.93140752809444127 0.29750516090074192 -0.74188494333394139 2.021880197698676 0.15397618153487189;-0.41971657409522556 0.33624013048574852 0.15565557180714035 -0.7115405354590959 0.071594453242459416 -0.4884708566601057 0.30765905295110635 0.71555631167037392 0.61690471277227144 -0.25313195709423086 0.20659955028896285 -0.49838671519270156 0.63062208909280171 1.4151013882196923 -0.29852381048823629;0.58081485919535603 -0.24433140134610382 -0.36145324681156898 -0.44090772213377666 0.96342618432907445 1.0655136494618214 0.20490503223231865 -1.1483349503081119 -0.14163635556755685 0.24172936686475455 -0.081375559643221712 -0.52210474527171058 -0.20959075620380607 0.01141835672239469 -0.65960565243251368;-0.1459747301349012 0.69889726012676789 1.1812599374170867 -0.43877058210419756 -0.25990025777231418 -0.31436568754090022 -0.63067067807747945 -0.9682066192458143 0.86721200962179112 -1.5292002268198399 -0.52275567638930154 -0.62382268316800005 0.44601548844475086 0.87072253192831062 -0.16829279393840979;-0.095976021318603388 -0.39544377473566983 0.13916050514076778 0.10553975366832533 -0.73474503323211759 -3.4779081527943121 0.057622709415893925 -0.38525530780156536 0.59384196945243783 -0.33548616228438449 0.5773422697068501 -0.17672809042192006 -1.1699919329366264 2.2224667731290895 -1.2333359074981405;-0.47935655213803929 -1.1904776663196146 0.28178055485374548 0.40535233144093286 -0.77746109310619504 1.441272073084001 0.55454787776395087 -1.4754248363771316 0.71673369395118947 -2.358025002053481 -1.6787284620513956 -0.39308215794611451 0.25145589232664289 2.045172632338526 -1.6270686097957676;0.4356318106664443 -0.25086334891379197 0.65601790223591061 -0.26466936311905442 -0.050301106015407722 0.0010125634209253095 0.043253621974944041 -0.34388100621311579 0.48721666292295607 -0.21897377108133914 0.14413931856418355 -0.39788335565871374 0.20112329675181334 0.39052412052211766 -0.33702605116237233;0.47106514425029516 0.64189856497871378 0.17740851749777917 -0.51877854719447869 0.5823844442992816 0.60275030335712487 0.2639866404352943 -1.1132875246719058 0.32914279732350116 0.48590910831050849 -0.32738464745973117 -0.5568744853365426 -0.13682811089236116 -0.17095817421991044 -0.68717962150797496;-0.61385593846810282 -0.51886197160361291 -0.3493332676889595 2.1297641802408469 0.031368815860641469 1.1213269712537153 0.26571188388123962 1.3848148150869219 0.82007430193696407 -0.74160386258250743 -1.2998834896700779 0.063484163883941028 0.70865267368894247 1.9906720985690856 1.1444759926167183;-0.50169213859226613 0.097232481842191298 -0.61641784713172387 -0.080576294201613413 1.0841900357296526 1.0024978212983797 -0.016079216041383987 0.36353356399150449 1.1289639669074001 0.50241538023132837 -0.70166051762854831 0.053854423468351939 0.81051793052523802 1.2951937366994035 -0.72566854419228477;-1.169846612176515 2.1300004236305106 -0.55027227609001217 1.9695805064606069 0.32295994315314341 0.043491571377076682 0.13831238017603775 -0.465804430489762 -0.37627305706903585 1.613057392217875 -2.2889987677314427 -0.50977571509771835 0.48032549094891547 -1.9854434641159164 -0.062064732429913297];
  
  % Layer 3
  b3 = -1.5788779683640422;
  LW3_2 = [-1.0616980977700703 0.4055445707860571 1.5178386810400935 0.76037813932604326 -0.14133528315355773 -1.6372749658982171 0.82472543161137957 -0.79855180469970732 -0.47858104230847032 1.3844032027492981 1.1670602956620155 -2.2432753442671336 -2.2885883809854661 1.5043187799850208 0.78218064931110787];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.7058823529412;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
