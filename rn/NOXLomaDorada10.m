function [Y,Xf,Af] = NOXLomaDorada10(X,~,~)
%NOXLOMADORADA10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:24.
% 
% [Y] = NOXLomaDorada10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.00280033604032484;0.0179856115107914;0.0558659217877095];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.9647258928038314;1.2295159572457757;-2.4563400911714499;1.9228015162689518;0.25136131728106004;4.6636201693078361;0.051366933699134622;-0.18160850731106623;-0.39223645069115232;2.161207650558072;2.667293349373919;-1.7556284691885513;1.1568919692694803;2.2265996341409062;4.6440159376563805];
IW1_1 = [0.74429337898773973 -2.1635936468832213 -0.68388032626081996 -2.1545865166085103 -0.14396901761769512 1.1687935670883667 0.51796065826854187;-0.61089128630240341 -0.65270160261880872 0.64660587199516795 -3.1460533245610205 0.2990670563852062 0.25665465752829769 -0.83962422076817178;2.5971867895939402 1.2036514818685145 0.62102164933270931 2.782019297966698 -0.84811194778840238 -0.35575401735100071 -1.4727488916447351;-0.015520153223326075 0.53426272327486635 -0.043297872478924831 -1.2866362416377171 -0.81361361595873738 -0.2516480308637527 1.2484636941863274;-2.0825176104777556 3.0489628893463787 -0.073163352475664425 0.26877223819630364 0.071017052708183301 0.14566140283505621 2.3313431011048507;-4.8127366873957644 1.5233144789805995 -0.93757827734741261 0.41958181508550035 0.22089663985558139 1.3684651607048717 -1.0921811238085648;0.598332516588715 -1.0365713689761387 0.90556759412851096 0.23464911978813829 0.29646355017309906 -2.4338640826039359 -1.7050749197850308;-1.148622727774496 1.4374636979289357 -0.20548790566753378 1.5368030595537132 -0.88369493915166575 1.9032129619663267 0.012680484319632876;1.1992779623014362 -0.40526442804527379 -0.85414497560168368 -0.45840768940867332 -0.019653659227807825 1.5520863093903055 2.2260788938275784;2.102795375536838 4.6422133419447551 2.5951129625781939 4.481235356503829 -0.52369067677732595 0.53817235628529947 -1.9009206049448781;-0.34867427442635651 -0.5321864293557218 -0.05411253179113891 1.1959577930238527 0.20067031757837844 0.81678253657390099 2.8528399676991465;-1.3217131379688558 -0.89933820030476053 -0.91019181247375591 -0.6823825793863143 -0.32216858735492754 0.23735382542227554 -1.5927593877847879;0.69017248248407259 1.89168049299362 0.16197905441967297 -1.417019754434323 0.015221342965539513 -0.32094039390802764 -0.59062576198962924;0.58888712666242249 0.30956318844887881 -1.3906812118750755 -1.2094921538815402 -0.46376353393712438 0.21572047453640808 -0.062203155491314027;0.89306457191375699 -3.742450449516479 0.31823763124932336 0.63867653673342129 -0.061546335767583962 0.66810633699524291 1.0476727460740189];

% Layer 2
b2 = [-1.1841310358207495;-1.2689389576751555;1.1986599852737101;0.45705081972599032;0.58739443299880512;-0.30894812417277612;-0.29515950054029044;0.30197619714512808;-0.4091779892717573;-2.2989889545119651;-0.78652656841993984;-1.0853284300279917;-0.9566462770685833;1.6810823281281595;-3.3006256094479358];
LW2_1 = [0.94802244846243633 -0.5425072275212246 -1.2422985888914682 -0.70061382614405021 0.35721227112635429 0.33805601190509904 0.50724635786394923 -2.1600206905457133 0.38210803870793714 0.52818367500528685 -1.2751084145292855 -0.84496755767771181 -1.2938476177698277 0.49502180390598094 -0.80306859331567515;0.76497297181232926 0.27908544025155207 0.4205848490255828 0.091882882087979734 1.5217812786637068 -0.12334843432984505 0.8551314545098645 -0.095497765390718553 0.76581291676442542 -0.6617406884055862 -0.54752792547505913 0.55444593345876114 -1.4272747282571507 -0.37162767078857284 0.64837439224979554;-0.94417434726194305 -0.079681453738886368 -0.160192915517789 0.11283557420319407 -1.1136222326039888 -0.56003338076001152 -0.0096428246857083871 -0.93752400572166028 0.25637031892667084 0.82903883597800943 1.9603390064675481 1.7430033638980464 0.81686528926116209 0.14843825239092337 0.55188053805373938;0.28217308302186106 0.54982411600964831 0.12196858432676384 -0.75389579217736846 1.7276292088609568 0.33907798941386547 0.90028009606022841 0.065015027519854024 0.58132633579032333 -1.0276409237491351 -1.9602516096106328 -1.3367938954728655 0.68823162527128678 -0.38823312414947786 -0.19376624418510269;-1.1381596610112499 -0.24567541351688429 -0.53277957432089451 0.24445422616247414 -1.1734817431616036 0.011043339301425759 -0.61713126023481801 1.5334464245380395 0.28494083352960076 -0.16722770368654477 0.5109968190938079 0.16956667493685379 1.5225282237776572 0.11217761421317413 -0.51324249449732517;1.894739901440309 -0.43176179328611597 -0.81376587746358919 -0.083495008402702825 1.1446384761370252 -0.8193382102484581 1.8359344375230784 -0.43343695022134954 1.7397396476787501 -0.57632870773761669 0.6357858750642752 0.19102311130619082 1.0224368569601965 0.27912847065681129 -1.372870181428556;-1.7361233756945469 0.32134683610320958 -0.054299714116371828 0.29161192558227289 -1.0103084232416033 0.88509963855061902 -1.8321413770061163 0.43551782626063817 -1.8845160646970136 0.5319276110424338 -0.61945784496441958 -0.15855143065131166 -1.1148244443164521 -0.65995060524609794 1.521618656878772;1.0504019556930113 0.74518786626606326 -0.061525464757756831 0.20389937881122661 0.74153478759512392 -2.0892821737260991 -0.35070741513564363 -1.6188345205305088 -1.0627060318211297 0.36797325635898132 1.7934511738103627 2.331717664528187 0.30427483303488573 0.49402470718038616 1.2186122909917454;-0.91612437487433529 -0.68716833194300253 0.28985193450849439 -0.27312952601172602 -0.57988983901693447 2.3426517414469012 0.15326818038382092 1.651045769223864 1.1079738929894956 -0.38695170414217495 -1.90278380532049 -2.3396463801610321 -0.4368016377959274 -0.55846843517976352 -1.0284709689326761;1.3510621086263113 1.1372075695368857 0.6721377796945629 -2.2955223739553032 2.9307892682447587 1.6342912261913796 1.1734848466264671 -0.44202246832417946 1.5028808170679182 1.1047284487444022 -1.9527937755772844 -0.26041106182337237 -0.82094277064569843 -1.4491116941194346 2.5143444310218728;-0.97605688274380553 -1.6717153761071548 1.5865899271250146 -0.30485319242461573 -0.55117375315314843 0.036036672172070232 -2.3806325630420555 -2.1087847179517478 -0.062806637234678581 -0.59709804838715785 -1.8846089862000439 0.096120369344349033 0.35758077005626221 0.097636459394848982 -1.3238279898956014;-0.98396574049195906 0.31306596714996593 -0.32658180994749059 0.013705305041471841 0.54538159454725166 -0.061033750034826598 1.260521307589521 -1.2183260001694007 -0.5143997465569794 -1.5528887712150461 -0.26218685995670987 -1.5433089355124119 -2.1844953849708029 0.1660779928982325 -0.016371104372597534;-0.69781991323180248 0.29863752437639707 0.52739745525158366 0.44221650125398976 0.058169677636093306 -0.15925568054162867 -0.31581056146927983 0.072635238869750318 0.29199185879658673 0.25045833182375082 0.21994157187980845 0.41041492612291369 0.66539982107948148 1.0215891776045691 0.88983509538587913;0.95590674640816453 0.07487690650232165 0.3983411850512858 0.72072734695888629 -0.92317962009352483 -1.8610623749060844 0.45718807199753092 -0.36077708647006984 -0.093077114752897427 3.1441803450027201 1.1960444276492659 -2.0986770594734665 -0.2529410899445389 -0.30796484974859428 2.1593027305050554;-1.003899178717383 -1.1104109239691091 1.1328528454557705 -1.2796259620552817 1.5620065289354916 -1.8607093002022055 -0.2979507088873013 0.051110733007522058 -1.0038944574028328 -0.62890810292095256 0.86120317500718579 0.922429861753712 0.7677959814916181 -0.70312630317353964 2.4071273342179822];

% Layer 3
b3 = 0.34223554676566686;
LW3_2 = [-1.0452305304838829 -1.6105349389308075 2.7280261261068244 0.088687827351806331 -1.5861654576192485 -1.4748880159937274 -1.5193982729585103 -2.3580370024034454 -2.2906007022676302 3.3394042821886467 -1.6236579101291211 -0.047552076803692493 -1.773768850447186 -0.090134987180486056 1.5453723996877349];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
