function [Y,Xf,Af] = COAtemajac10(X,~,~)
%COATEMAJAC10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:24.
% 
% [Y] = COAtemajac10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.23709430422240702;3.1043826156454166;2.224527565693915;3.6090432299595183;-0.1304879977436243;-0.49206618365432381;0.09043951437717665;0.060062084920158507;-1.2748480337779804;0.71425288161827349;-0.92140709117818476;-0.26387792969366863;1.2734269216512002;-3.0703341664490118;-3.8927085553320238];
IW1_1 = [-2.0463552229039932 -0.97379933563193033 -1.0980455782386962 -1.6137517096807801 -0.39860811231473148 -0.10063082044247346 1.1413527129328449 2.4889350513981152 0.51207107482069025 -0.65491701602230112;0.25577094948567874 -3.4125905483638483 0.36371273955551819 0.4561042779277012 -0.24151997349819926 0.2204852201001451 -0.06158793583938163 -0.054106165793937011 -0.075766160099106347 -0.42142450734619141;-2.3274916041182379 1.0518478337859984 -2.3071062890373395 -1.0961694592133573 1.3395093416956549 1.292053876455558 0.38419521766558146 0.20735255217483917 0.3319626207977423 0.42402200658268091;-1.2566642331538693 -0.28960002762620213 1.9426295217809546 -0.35797718513562526 1.1294801721032171 -1.2268412818371253 1.1629682985150798 -0.75261824167059077 -0.079879014226501011 1.0872120893392438;-0.24876276470866185 0.075440823284829622 -1.3985170974381766 -0.69614098883312203 0.50850013200288702 0.083210076524164858 0.67400390422738421 -0.23385570146747664 0.035911066176270934 0.19488447188090696;0.18655276212098987 0.48285436038854657 -1.1291777755651238 -0.68994307742720484 0.84259045988695069 -0.64693994209278127 0.80290206814704035 -1.0999429438714892 -0.18098619847056524 -0.041576991142997288;0.049611664644018928 -0.98850045061604652 0.31593545597644712 -0.65207224555066523 -0.073629632498629749 0.54899215423856418 -0.34183630315496866 0.36382095074928933 0.093742008494408058 1.1605273653688235;-1.577268875420524 2.6666428522009422 0.70773462213271487 1.0539919916207074 -0.21042022605523994 -0.38704417105113614 -0.35834180140205357 0.41792902870329207 -0.41525284943307589 -0.82609939083492323;-0.91774675715168685 -3.2966414350285689 0.23612031614943685 -0.91219313749643582 0.24879957733493022 -0.34549711450152626 -0.74549487464641517 -0.93783923240762723 0.11716373909276959 0.083561927047029458;0.16641754533533687 -0.18926696686438271 -0.87792715475028427 -0.24416990648428455 -0.089957249431557168 1.3362783242672067 0.49090946028235272 0.87762914195521569 0.42607425739659049 1.2298529008520489;0.98705780448496772 0.11286991717806047 1.9348956178490506 1.148577215124166 -0.07087208498377727 0.17424917287206323 -0.88394817533505077 1.369689537419813 -0.20048637164404171 1.5465053727568232;-0.028778886528983184 0.38673819660492204 1.423117746237059 0.38945108478099499 -0.063412070804054754 -1.1213312472781942 -0.76923021701608985 -0.46187690704909246 -0.45599356904963684 -0.58003562840374812;-0.20967993242367675 0.77693445164433006 -1.5889693128644478 1.4493464202360598 -0.1935303047065442 -0.51667668037032788 0.55260034698549876 -1.3258102673210519 -0.3227188615353187 1.7345776457561943;-2.8806685746638654 1.6583166426683937 0.17652936913715403 -0.091849074401948921 0.75085311806151334 -0.59849196187728626 -0.63299093666280515 -1.6475699900956244 -0.19464120034831597 -0.0081303672180746567;-1.3474841938982691 -2.4345934280746571 0.1983738270474939 0.79429992667865512 -0.20193489997042227 0.027851440248525948 -0.017331710768707632 1.1904136259551357 0.13950787238717541 -0.16991554145012583];

% Layer 2
b2 = [-2.5011825958012985;1.1510361739203809;-0.45571627679910753;1.3204520334744687;-1.3492107613179654;0.94796059329203952;-0.18808616665021374;0.82374966632182012;0.28892130754276346;1.0949007877605617;-0.47547653519740407;0.95885845572993444;0.78030694360044073;-0.86731127726252377;1.4064142672887237];
LW2_1 = [0.59261774535172917 1.1503020190323194 0.43601239413724657 0.49844534274286928 -0.14893871747674034 0.32898461141843272 -0.27098035496138084 1.0923106443019825 1.002824474211732 1.0622802460247887 0.12605063423539256 0.2214730112901554 1.0544032405910344 -0.31430169541752112 0.72512296553320588;-0.46335151162414651 -0.30509285700586819 -0.56340377162169708 0.95309636307111623 -0.51839335658663122 0.11803819920542435 -0.81424256319667709 -1.0561877239648394 -1.1893992484212721 2.2143857471110846 1.0625178709403702 1.9235036553517664 -0.018822467083809656 -0.5966219122760259 -0.062269848887635294;1.1479167631693212 0.031656627221311566 -0.70338483860767154 -0.14038595387248223 1.1082833677356727 -0.16063531415547125 -0.39046281969390201 -0.33726035624998513 0.66913508046649972 0.96360778546158787 -1.6745248425782211 1.293822657132228 -0.22452559032748159 0.1266722897042292 1.6232947664913022;-0.5059365932774138 0.0025502981940856281 -0.48500197827069863 0.42354753016032404 -0.97443671200796877 0.46586173754387622 -0.028079763289074272 -0.32502736389333914 -0.37486973201413065 0.5832234176936123 -0.29819478947814121 0.25420625762109883 0.18928026311873675 0.5115263588421517 0.17862219920050207;0.70718328041851031 0.61833397956747183 0.007794101385049719 0.2739075992708494 0.5908508737280368 -0.84610492889281619 -0.10481067800961945 -0.84621109001167816 0.47590457966359051 -0.69318127899044213 -0.14455044249019877 0.31944949096384889 0.044840004335498597 0.35212309972329586 -0.15727450291620459;-0.61283500071570318 0.2611174609798968 -0.43906487311944131 0.33722530280921204 -0.83274981327659736 0.49593377791042387 -0.071592516710028212 0.07258431509323407 -0.014219162859072985 0.36721964036110666 -0.89908973819459492 -0.24444993251149916 0.0026775968205938229 0.58074581681423554 0.70158450488390856;-0.88452762960155451 -1.1383919412580141 0.88321692526784901 0.25318842734993052 -0.42874481978336443 -0.62080483006183307 0.55486843670900809 -1.7660303564931406 -2.4063978516862345 -1.6604794241771281 0.12841121113507492 0.54743203691968434 0.90934386958927615 0.041974728025821792 -0.071044583037854145;-0.27304335835262439 0.95853508314639413 0.52099820372738315 -0.086384393019525385 -0.0149643034443919 0.34267274278419418 1.5238581800271767 1.4937767359059577 0.022816869807310819 0.15629265161618403 1.1993047326525919 -0.07045487028393696 -0.11903978327134196 -0.88374541142802909 -0.89753013237184631;-0.94325108788309797 -0.2828742123191999 0.39176823076548645 -0.4534802483134478 -0.85033581013154569 1.2395985063088737 0.34002959260447896 1.2598554644174851 -0.44815856955065214 0.89942061447843802 -0.2346202817565701 -0.5850921699091497 -0.090919494980459051 -0.11116331360578464 -0.29561849905302079;-1.7109683107576052 0.65048461961785309 -0.27023713998349469 -0.47573770562845591 0.55480903805394388 -0.61863749732595874 -1.4004989175885347 0.42622813146897232 0.31739202319911325 0.95745340313891913 -0.38456911858879028 -0.95048963306508583 0.54604190124432961 0.29042041086060022 -0.46266036160106988;-1.3135843596359731 0.71348849233626233 0.98267862013695018 0.61898252908775708 -1.6538219457127281 -0.092562362162977016 -0.36039807662813139 0.15867492460457802 -0.28575720363701723 0.12724932280432716 0.31799584941479531 -0.80067108193297609 -0.0085811010790315875 -0.24837651527814567 0.081602747015394134;-1.2724170331695681 0.66304288123982302 0.77103458782645151 0.23902867900415189 -0.086652564766835041 0.62132173418777126 0.51591503072215894 0.70585103781246805 0.31944528100381003 0.065152420980165049 0.81741468196153411 -0.66991134724904611 0.48357224707755553 0.68719452653987279 0.070395349250867337;0.53216953693267233 -0.34741424434093637 0.11250341855928389 -0.3013320681165339 0.43911130535903181 0.23396368661102107 0.36409633672309688 0.8329842033593059 -0.47035541839028377 0.2710424164778103 0.86552012129676204 -0.45177174971913409 0.37437929810114834 -1.3385050881819938 0.7257578084681936;0.6497029762232891 0.81668119619930279 -1.6815594247874239 0.13840062420783156 0.49956329783467651 0.69373950740064816 -0.93563082486630533 1.4728567524808627 1.4011710714933669 -1.4116365598972265 -0.24357063503556614 -0.19216444094707155 0.25345552476352129 -0.040991305263939765 -0.44849521723740199;1.9298122532058086 0.69166519159445738 -0.14400126481241304 -0.35260565220367457 1.3413252700035778 0.32430765557962382 -2.0316829195983881 0.41963486647769227 -0.024321704770523266 -0.82939075684879981 0.65879799847232545 -1.3409009972056807 -0.62148320789731171 -0.037485333749462724 -0.0405788032802381];

% Layer 3
b3 = 0.63774659812277257;
LW3_2 = [0.28501844227133494 0.28018006475489893 -1.0591342766710485 -1.3514689899834575 2.0922438299516082 1.8786674060266684 0.21293493420191245 -0.65527893360196865 1.2731559711599296 -0.24986186309755715 -0.59557718939783688 -0.56889190168524117 0.47646072038562359 -0.15631204006084179 -0.64074799533095439];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
