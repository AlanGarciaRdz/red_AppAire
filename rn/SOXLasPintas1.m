function [Y,Xf,Af] = SOXLasPintas1(X,~,~)
%SOXLASPINTAS1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:43.
% 
% [Y] = SOXLasPintas1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.7075169274775628;1.4028712426599852;1.0409817942069068;-1.2845454328292314;0.6651881039796933;0.084996664482780315;-0.30521694152160689;0.1938415296899525;-0.62636076931479845;0.84533780867944808;-1.1597132142365787;1.4519745536993971;-2.1183101510462583];
IW1_1 = [1.111246223813847 0.948815121046655 0.25830935528750593 -0.90960510332914202 -0.13176463365212671 0.62152886997489087 -0.43892472714376485 0.064540905393162318 0.319214636403231 0.54152917359700981 -0.93773872686218274 -0.62789607382872015 -0.31438453480994144;-0.13891749296704969 -0.26356332237780039 0.63811730718875137 0.54162602606289179 -0.61815230731808457 -0.18713431322415844 0.08774940238866577 0.077460338719294738 -0.55448804516995065 -0.65472500093203279 -0.72330136052727678 0.10786633971347188 -0.30754529238819672;-1.0321148405531417 0.81208971720929168 0.70815906796935302 -0.06239013035171484 -0.2001673083448825 0.043160154046674414 0.3049860387818662 0.046460203857669712 0.60455916597657089 0.48843182375720817 -0.4330981662219392 -0.34200777807422078 -0.78868685069510291;0.22248585470049037 0.66401396849823024 0.42114770117976125 0.6749444429464424 1.320533511284143 0.2328522453114828 -0.76767061365429512 -0.57049067697733435 -0.67410526774922686 0.47255175363835206 -0.062813968505698772 -0.012497207812536167 -0.35151558744762407;0.090514906754864691 0.5714929722740516 0.10180068617571472 -0.15996844270999352 -0.47453055987080073 -0.67634361466243731 0.44672345621090903 0.37137415793743855 0.024174084831830353 0.48905697936486309 -0.050470593414360998 0.71802819620126768 0.89122782656455191;1.8645380881864011 0.23571895588872566 -0.50278596629677885 0.099366592511482596 0.72188745928345588 0.76324266604267532 -0.065727928866491508 0.32306185111979691 0.52118080187369697 -0.3333191998076262 1.5117027529634754 -0.41068618194790896 -0.85317573157365922;1.1028694884331887 0.46834116756447636 -0.45576300195268071 0.14726441684894087 -0.020633430110031215 -0.11557387020576829 -0.64455760125312 0.59833651677200428 0.36912801987133392 0.13003277047407941 -0.27113042069822951 0.59740598620783958 -0.077066520293152349;-0.17789861640243032 0.086621837409644409 0.71969726507891951 0.38515623249195552 -0.63722996478477745 0.85408309554492612 0.78539322786520516 0.072887256682918317 -0.42375030003495817 0.98324188623544906 0.23532903721000845 -0.78983148271142012 -0.43779572186240134;0.14763565600371675 0.66121031921305384 -0.17203897052602876 -0.42812187080344855 -0.15638228528701048 -1.0699107739432525 0.48698260290467599 0.34299488662448491 0.25011712658742558 0.6471291069414975 0.73792257962721819 0.13434031229882551 -0.061333328488489339;0.3924041392024083 -0.47853670325326614 0.92982531142074154 0.54438535739668337 0.14753588856626226 -1.2306434314455252 -0.70002294255249442 -0.38348621920092751 -0.31329884122618284 0.02794657040397798 0.10587782890870751 1.2249636985155605 -0.66707685007157114;-0.92066271334400074 0.30080457282801781 0.14638478506105979 0.34266120319624521 0.81228840118349577 -1.851687329591267 0.61324466325870541 0.2224511236350962 0.23334822876128072 0.39125109890495297 0.72945405013188369 -0.069093538724133499 -0.8268408887997829;0.54113942117388625 0.098649449200332584 -0.89262927741480669 0.059811851635654285 -0.18263896086688139 -0.43285408507946371 0.76150454542855661 -0.5591598540701912 0.20506105456962573 0.2017932661645607 0.48768953586431996 -0.63583047137493365 0.15432456800784536;-1.5253438629424114 0.070737312108042127 -0.12497889325294174 0.059701270937694624 -0.010964916448684029 -0.090774235459439287 -1.0538974809561654 -0.093081699275376531 0.14332138410658621 -0.48862117542195743 -0.44899266971786722 -0.18095950335790148 -0.58099564236141799];

% Layer 2
b2 = [1.4666502939999293;1.4305731206903476;-1.2606552497504997;1.1479105350572847;0.75742128151843169;-1.0923405705368263;-0.1810145362424426;-0.35740423215837885;-0.35363341279933708;0.88351208450298391;-1.20413676045908;-1.5684406792401184;2.1184784216691548];
LW2_1 = [-0.53495041181547764 0.12100270058628874 -0.43366605846716533 -0.16519840082705761 0.15375511542835379 -0.55106130233569661 -0.32869361509662404 -0.22798129095667932 -0.48948705351569699 0.98852921217057821 0.81959649364138032 0.40088044274184859 -0.24641740351689079;-0.21400713207708261 0.76014981860231845 -0.76380621731408971 -0.31594641125232897 0.39646072265867871 0.37709579645501839 0.37167525674485852 0.108206616329003 0.47395062730510734 -0.16071488472373022 -0.27258794547650522 0.35569613667563016 -0.74632243003136789;0.41507639521575851 -0.89666448750007188 0.4360809888129033 0.80472254855678416 0.11339059960573332 -0.46637118492035484 -0.19208565317811277 -0.55450071789570643 0.52843311143479799 -0.43955179028225166 -0.47504866206767421 -0.53935222066353017 0.12289677052272574;-0.274672610081584 -0.01669627979725323 0.58510068426937545 0.061449951897392524 -0.46383544391570258 -0.23807577731026563 -0.37799014256403224 0.096633059201890192 0.021277287435409332 -0.90905194672361356 0.18142144019617468 -0.69960643453255067 0.54247784084322415;-0.66400787310101994 -0.24073745876913916 0.93912476694496461 -0.19199614740168858 -1.0170699500383595 -0.40367284346405963 -0.40898609973420008 0.48613533073244125 -0.51649923667353914 -0.3878148729871404 0.50442716489250594 -0.10063091693696606 -0.22478302486769949;0.17927670183853936 -0.042281424245229925 -1.5236656436215512 -0.14798232488756796 -0.14771382487421078 -1.0450083582004113 0.30938540865711206 0.9272567718114576 -0.044340348056784565 -0.24015317701835848 0.41080923165179334 -0.21578866017861081 1.6227383475311059;0.26139008083223425 -0.56940753585131909 -0.35104603415697105 -0.45325389039628383 0.012951787191386063 0.47163250649236355 -0.79097177354922021 0.37964313484378059 0.2270408520263881 0.6932660011196472 0.55820661049013309 0.058359280273255168 -0.2382744513846663;0.16328131402467144 -0.57020152529791823 -0.053897080121106423 -0.66331054716852145 -0.1011743425168023 -0.46251944585520777 -0.37764929117922802 0.81815725653772331 0.28359779213336811 0.49976087148146559 0.52786985016228927 0.36781681803007943 1.5868301150142945;-0.22260266860378078 -0.31140876665215345 -0.41176624102140474 -0.22402799774940579 0.4591773126629467 -0.58765111117364033 -0.23048705513373097 0.51315699920600766 -0.28707650862599687 -0.063156123895667299 0.17197153152060929 -0.04686432833157856 1.8182513689122672;-0.0038578392506519246 0.013204842755907949 0.56904050397561823 0.12472565564539087 1.1789618908642243 -0.38787417842174204 -0.96490587277810491 -0.19451192912278031 -0.13210864866712821 -0.23005524256909099 0.97163392587382702 0.055938538715672975 0.15674869099271924;0.23804091369650998 0.38940324719450248 0.53639904586891951 0.49348084928228497 0.53824232302741615 0.31290204419474599 0.83965595052357167 0.65705569312569556 0.60576823461363771 -0.22169212925198339 -0.80233987177480348 0.11466937641997052 0.59366889267087231;-0.57837724808212443 -0.86402236881155858 0.064072600643230671 0.12530359403136931 -0.27722005360496649 0.53168679995895352 0.045019016910732131 0.4498664267421098 0.037155557554514634 0.2498982995181763 -0.56465299898529031 -0.4661322499255291 0.64156500308692999;1.6596471908830333 0.85760723554750695 -1.050966352239932 -1.41119514896961 -0.76499483844433791 -1.7485279797166782 0.70016731421664335 0.75703598037197861 -0.021032097560144666 0.84853524092997756 1.407658921044405 -0.16722551061556457 -0.77297409013682128];

% Layer 3
b3 = 0.47064679035137102;
LW3_2 = [-0.26010725688490982 -0.058071939896770307 -1.1044073243629851 -0.50260599403546469 0.24129718135684436 0.79991225732332571 -0.20868163820863456 0.32712973662424744 -0.40062974538851803 0.271518673245978 -0.17333015483347389 -0.10534591806847009 -2.0141397425122607];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
