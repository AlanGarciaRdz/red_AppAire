function [Y,Xf,Af] = COLasPintas1(X,~,~)
%COLASPINTAS1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:58.
% 
% [Y] = COLasPintas1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.241545893719807;14.7058823529412;0.0179856115107914;0.0558659217877095;0.00576368876080692;0.212765957446809];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.9976154069163892;2.959897697846233;1.4590647939164769;1.9747381017867993;-1.4003472559461789;-0.51039490878116367;-0.40905655989788109;-0.82972122581796848;-0.77015137299092684;-1.9171228577662383;1.5425992359827956;-3.0252543444090247;2.1319970145858886;1.8809970025030567];
IW1_1 = [-0.59338961689354752 0.45802762730531699 0.59183819042314301 1.7414785775963795 0.38541228138150257 1.0736440109781629 -0.48611321711249722 0.80399570272808252;-3.5888579023409295 1.5234583667326456 -0.95551834856823348 -0.78175016539429443 -0.12232018415685132 -0.19189013511105379 0.093367587285045545 -0.021462382412468145;0.54807470481985299 -0.87783077566601253 -0.1538608158002096 0.035072185231499561 0.63576214952225318 -0.1905462156211403 -0.78354569502803106 0.51394456122513887;-0.79054483821417831 0.53199174104853664 -1.1053879167581981 1.3268540280562193 1.0532977682215918 0.57270288535300595 0.19649207430414925 -0.29727338820810428;0.66085850793791612 0.69076697572241774 1.0096123866779505 0.37851481231586948 -1.3321668555256532 -1.1595250106718904 -1.4941693609192181 -0.12980333224693322;-0.27069018444251869 2.1154060562302832 1.4411071647892928 -0.31845492207306286 -0.60219432797004646 -0.70020888650263557 0.28436363321802338 -0.26390235433033365;0.93917450031156613 -2.1148011488972158 0.031613067137256493 0.76489044830473718 1.8108443621157244 -0.13146256088331545 -0.12952549577267086 -1.364149302004787;-1.0478337086829308 -0.70679924687272455 1.8053208440644377 -1.8218925391965286 -0.22678906272554211 -0.10889849371234035 0.048902025749017704 0.014244946872366368;-0.82579671197865534 0.28883326109684576 2.1011159483760009 -1.7742111619755709 0.37641043971953508 -1.3477046408908779 -0.29393474136779157 0.066295518919157373;-0.1304661464677426 0.67891826424618862 -2.3168697684904891 0.038457146341066707 -0.10850094346076292 -0.36334621267837147 0.011430824235274908 0.28221051494556065;0.97634600064085697 -2.6577996828980619 0.68095384095676392 1.0638317544134126 -0.39528845569208904 0.32706594526107868 0.62163925832142786 -0.45191471518855347;-4.2718400536287158 0.41944303618409051 0.80755089664629431 0.86842210110609885 -0.015096798399333922 -0.77667409105276963 -0.23651954679971782 -0.74741791816678105;1.046389665087585 1.5039699991718309 0.79414791512577376 0.7360344892738655 0.43879988131432646 -0.26315474752286244 1.6145207638027936 1.1223296419609357;0.22454245773716386 3.6315469337265402 -1.2954515705615448 0.4040800673068507 -0.14207221381927401 0.52686603219934658 0.32318626468837386 0.3949590481464782];

% Layer 2
b2 = [2.8794063499988378;2.1777921195106456;1.3059777565935;2.1724620691500847;-1.0318085660986314;-0.83861964997286709;0.95790558731539466;0.057420069495408455;-1.1687198704833621;1.1630170503900426;-1.4301457625495064;0.91313571046171516;0.83068769035634926;-2.6802002185341731];
LW2_1 = [0.93991539948262637 -0.80669109965626384 0.85018287114872404 1.2251085484226776 1.3403348622022269 0.91499060630922235 0.67195502317513223 -0.45972821492473825 -0.80298917018418225 -0.6122899433893042 -1.3180803523007185 -0.22316696398635946 -0.31164938208042348 0.49076241161566847;-2.6882378405274103 0.96025380311225605 0.24868034969033787 1.0711872954078434 1.779828893091931 -0.56420190398865799 -0.36698121157864005 0.12038895766015992 0.42333006551945263 0.38178699693788554 0.88363155073137223 -1.690874041294236 -0.11802547495145298 -1.0417113271010892;-1.6004440179515362 0.17365036429289157 0.33707197967462077 -1.7538875645567298 -2.0541864974146575 0.92940190665324274 -1.3594761420835186 -1.6337393500433239 0.15838794845043236 0.26973862913525132 0.57479802801335289 -0.95100026021254969 -0.55328675825048113 -1.8383044117636316;0.66316604962063208 -1.0197645442377257 -0.011199791102284513 0.46850495401220077 1.5800509992869787 -0.27450712882519912 0.73501575714259504 1.9417181311689702 -1.0833721682059334 0.18677382532327938 -0.15522667955758324 0.91934297706578649 0.34098005185043651 0.18998059553208624;-0.17494202426826694 1.6684961577808395 -0.42429670006542436 -0.086469262638631708 0.76343784234715684 0.36156879975597189 0.28449934152964756 0.085170214579563933 -0.18588214234164679 0.5788232211900971 0.44921908547068951 -2.4730007983318871 -0.15611392122465167 -1.1354414017969114;0.29174581048696679 1.5410208324626695 0.38629267593550642 -0.2375281883265416 -1.3419078449812207 -0.49808768342840354 -0.46329294220977213 0.19074743747610179 -0.039873524122134907 -0.10893909108736238 0.82416987039187117 -0.03293178343806627 -0.23122162285305733 -0.79187767421297806;-0.23086172948023315 -0.14889762005683846 -0.75020517733203218 1.8582462198278202 1.8621674670841091 -0.90048637339105264 0.23038519239717034 0.53894883506043745 -1.5669939049136443 1.2623165420657874 -0.068578578298531437 -0.52984536454635955 0.16126304581706435 -3.159330967693406;-0.53152804834044165 0.32660616416402383 -0.8661342302404369 1.3468181220823578 1.6312944771694919 0.35508233479595463 0.71633055866372808 -0.26314032871417309 0.23790094795543615 0.063547934756938512 -0.92002790639420884 0.014213558508724709 -0.022582936004108732 -0.30277407494121084;-0.31817294482899355 1.6564753687561673 0.061681488717642008 -0.14891319540313069 0.58431985489818039 0.60604985831396041 -0.049543694839246075 0.10593012527869164 -0.09323273910277953 0.56818774617093837 0.60184626548608611 -2.4751072331195361 -0.2014629074943281 -0.90291616125486729;1.2747779336106797 -1.0127364749735337 0.88142585492187409 1.349709341318033 1.0036073882754031 0.47302647235622902 0.56882220191425914 0.12744162796145669 -1.1742174528751923 -0.48332232584011453 -0.21837358254537148 -0.13793852421275571 -0.028284521218995384 0.76844840138894677;-0.45684573378924898 0.60959192831723319 0.57610140816602662 -0.30210963749993736 -0.26497670327273182 0.06269214190968897 -0.65762407007066825 -1.453173481419028 1.2055189614927637 -1.1668854217800673 -0.35497706531876877 -0.59541564615302733 -0.40680137233639724 -0.6805953059294283;1.1475660675816521 0.092394646347330925 0.94785159446865253 0.57472128496980268 -0.59499129593477873 0.38116532236274475 -0.52072639365443496 -0.37802220392404029 -0.74437673342138466 -0.62472611190403171 -0.086839493332963022 -0.24174305326960988 -0.73810732892746178 -1.0002847493903257;0.18940650847896004 0.46053303249032357 -0.51931264628065343 -2.148388855148446 -1.0693263421563148 0.0072184568576241365 -0.22544675663212183 -0.12904164102983393 -0.49303611881307485 -0.14880979603678227 1.0215215978245276 0.89387899162802287 0.24956959288131186 1.3677733271878172;1.2749828684325473 -0.010680192681181422 0.826569856849662 0.15178557081596214 0.84376105583728211 0.64286263799868648 0.24307648624413231 -0.060033168616663843 0.051905389510604305 0.34390181739801423 -0.42370474081895293 -0.60291733846899731 0.66228517119517827 0.47937021536661556];

% Layer 3
b3 = 0.58280756965870095;
LW3_2 = [-1.3484842539001758 0.33467489232930586 0.33959314076273761 0.41007961091336109 1.4783717636907807 1.8686258919773939 -0.3734060515695416 1.3692299495938491 -1.6574032191589598 1.4669535833655929 0.52068824953257209 -1.3241240553076365 0.28115257263040044 0.73167512974526694];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
