function [Y,Xf,Af] = PM10Tlaquepaque10(X,~,~)
%PM10TLAQUEPAQUE10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:39.
% 
% [Y] = PM10Tlaquepaque10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.3291184065897761;0.97567023589817037;0.33827624399183764;3.7088236143513931;-1.8446755955097232;-3.5751426696041233;0.45303517848538344;0.59392726375961735;-4.4262842112163243;1.8912958011541217;1.6551235247521239;18.424962132788373;-0.14333308538933698];
IW1_1 = [1.058213797341073 -0.44342808736799494 0.69970500167413052 -1.1187794827855104 -0.20500466802343814 1.3743381251409528 0.14250335191824762 -0.37974489611695372 -0.21356119466776699 -0.66888880881225321 0.21793738495824286;1.9477594420769391 2.9741903749499765 -0.24234997094106436 0.81795278801985505 -2.8149344862565751 1.801077764557391 -0.10234932752904957 0.43740375270046206 -0.57605347640245397 -0.13348359360462006 -0.65511030456736974;-1.743790893821658 0.44891339179572087 0.5128723486562502 -1.1163885075820701 -0.30018361401786842 -2.3952045924468601 -0.79283165454221782 0.62720110619528879 -0.030458922430930735 -1.1741938075747291 -0.60039854002757564;-1.5751225371604161 1.5955627866323738 0.61127669831432585 0.39662378330506054 1.7528630078665757 -0.63136698846701034 0.19214825834130292 0.66806826081290571 -0.70604526316650862 0.34863753964272948 2.3054299818676243;0.023574831140427299 -0.022039619863802741 -0.2241712723425584 0.093560191485753771 -0.089760942470326316 -0.553741958265072 -0.20557619128068597 -0.084202060176547383 0.022685004687940543 -0.51604853834360442 -0.86613132500689893;0.18461401655851831 -1.1412745735625611 0.32331534757470937 1.1369632751586314 -4.2904613740861786 -0.35267965116283956 -0.37076165563438312 1.360963170044456 0.31718964380478998 -0.065703532264032388 -1.2753082146226944;0.04418311803131178 1.2296696739329736 0.032986535146769136 -0.16855365719311219 0.54777078528575651 1.0223336988983196 0.38230114773907575 -0.011617319734896442 0.55689557078502738 -0.12926986524239414 0.13096110716525219;1.9606312428438861 1.042940490768653 -0.97665370909219873 -0.23774155263256408 1.827622336676568 0.14791641861404933 0.29401314258071504 0.81540653038467248 0.50052809980753532 2.0541982887098387 -1.0841003367763657;-0.05130667831851253 -0.36576969096800832 2.7428552796839605 -0.58224808413447748 -1.7647078237912988 0.79063689849708818 1.439928428064476 0.94118218617708183 -1.131644589909653 -3.7084075761257513 -1.8734343245800962;-0.69380676757575044 0.012904277616357519 -0.19869830038299768 2.2468339256556389 1.9521785406921888 0.83738283189267126 0.34425339268256383 -0.32642543321269601 -0.70476794290557876 0.29467963623787896 1.3340255606980482;-0.56286775822759982 -2.3657062759745662 0.26131937126325289 -0.1261382117957931 -1.1925167084290391 -0.18919287806969687 -0.019617468507292003 -0.19031513540333167 -0.01193609357908002 -0.38123895281723913 0.45643558896143116;2.3153494544260531 0.51255021300795356 -1.7613911768191808 0.89520737000983441 8.4781845034855827 -0.58676865606051576 -0.039155727561228149 0.2652544488962314 9.5108589159081447 0.33747312270596314 -0.70180179370845508;-1.325628036622452 0.62336174484797779 0.44259242686126044 -1.3861385779695024 -1.8762589147290081 -2.6291181142098177 0.18709611235047671 0.80240324890536074 1.7749292431683656 -0.056135727218265714 -0.60478954289685105];

% Layer 2
b2 = [-2.3907565179046073;-2.7180158640457379;-2.663380575721805;4.3010769998087959;-1.629769810422262;1.5927461720532734;0.99413381057791217;1.273324157267762;-6.0639966997665233;-7.3210871774246984;-1.3207155501488081;-0.45700660758016548;-5.1098950325882919];
LW2_1 = [-0.80132669110441046 1.1648272605553069 0.059808099445957483 0.52265201958228724 0.7806829751696569 -0.59972393479321329 -0.30057115813296048 2.5795498226564648 0.24252222656668621 -0.49045072488575325 2.1535052903863194 -0.1337263350484276 -0.30695422924265081;2.5418108924011626 -0.45905286735978912 1.2002379400784193 -1.2738354593242478 -2.4838569885160608 0.65896396386052603 -5.5367741825760071 2.4811090153172279 0.0097724839668070738 1.4760226730434272 -3.106933207329122 0.18848790771209525 0.60804675692213839;-0.32177320307855445 -1.6190262138629343 -1.6837315635271826 -1.6366819624110536 -3.7026690980881263 -0.21111751747882307 1.3098110245951804 -0.2886900010732607 0.30800776415923786 0.17439201012920391 -3.1908974193973672 1.2191588169210066 1.9832635558624458;-1.8701210454865769 0.28029327756985101 1.1842006725984948 0.10106794210705922 1.8839290680956322 -1.0864375873564334 -0.51855994278945883 -0.160118972156362 0.9992838154772663 -0.22055462685345589 -3.0670999383073219 -3.4523944282844492 -0.76625762726556235;-0.23926240761058418 -1.0845587272945179 -3.4786512620228813 -0.56515962863752356 -0.083025552549232606 -0.5294087737836598 0.32712090234173358 -0.39756720216644692 0.27307654786597435 0.079620633354783366 -3.0142836713592835 2.7038918533582375 4.1429294334690994;1.6468972611919686 1.7311887784069779 0.43637566704728875 -1.7215316219899877 -1.8152120170894559 -0.43965961897429856 -0.3612939280399789 0.82472266111105685 -0.35041248250725116 1.011569625441977 0.51620415204624381 -2.3809884463059965 1.648547677817654;0.54399066592363599 2.3798988588097472 0.74624162052812859 -1.8906271916917736 -4.4202924558363481 -0.065306677039686928 -2.3478671001478522 -1.2599149002982997 0.10325161031305559 0.44991997911762993 -3.5494193791569311 -2.8085430600535792 0.62050109719825641;-2.2489898234462142 1.5676717876028701 -0.62564370886738296 0.33845554147117463 0.043311974516400238 -0.50334733237276907 -0.40239922888619706 -0.60546830437014088 0.702807437324386 -0.78524492726273021 -1.5257915562348427 -2.0420541315671437 -1.969949143578462;2.2338668335088605 -4.9119340067612285 1.0582916555050699 -1.5932420131181104 -8.1888004298736572 8.2319618326025807 0.25349988715367622 0.70038165279933806 -0.0010666944473337603 -1.1883072240574195 3.0834174203702172 1.448436584631926 0.1958617779139965;0.67229887066399929 -1.3367119381657051 2.5894815732147345 -0.0012135166118355453 -0.90436550760950685 0.24236797793175746 1.760153028240419 1.9327090304874512 0.45650583619853957 -0.048426923776023936 3.3483501905723911 7.8658434453985855 -2.8367141481408771;-1.6609595180358503 -1.9175790762412435 -0.92033484151235589 2.1140099554583078 2.6374237841423609 0.38759670757659087 0.78179264505178181 -0.71802861983457866 0.21053584815405715 -1.1011570949149112 0.44925471155943564 2.0881766220504931 -1.5033837075902423;0.33579654550279869 1.6360817270423651 3.4306835383888088 -1.3718116586892408 0.25320148229368755 -1.3068744956966696 0.25925315248496827 3.8238315607460764 0.31189139142887923 1.7977800859422397 4.6129017154608452 -4.8138328136887347 2.0294739033282925;0.94373140466116112 -0.8226148515419639 0.19576692761200437 0.91215294559373805 5.1291697043516677 1.6482040834418401 4.0544053687579531 3.706585175655174 -2.1837922658118569 -0.30366971938498677 7.8799190611565182 -0.45723357288694144 2.1009933458172845];

% Layer 3
b3 = -1.236367615315014;
LW3_2 = [0.13810808101303801 -0.3342058815284018 -0.31371791445563518 0.10200360431157196 0.22473204316655154 0.50742524273753531 0.17721347442957702 -0.20673543735239089 0.027375020766262727 0.10332766686702571 0.48426455310941113 -0.14979394973751245 -0.10101161230848225];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
