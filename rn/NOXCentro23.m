function [Y,Xf,Af] = NOXCentro23(X,~,~)
%NOXCENTRO23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:22.
% 
% [Y] = NOXCentro23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.3775158718193736;-2.9777132524343748;1.5169201166764668;2.7498187843070658;0.89001548108932449;-1.4864441315806003;-0.59320751578380893;0.59766881929650206;0.1448595862793684;-0.77366880007976557;1.0423586864480843;-1.036624251332805;2.283537068017941;-1.436023001581695;-3.2970810760851395];
IW1_1 = [-0.34612687338778469 3.0333057273915021 -0.57712623829619991 0.099317038411984165 0.60285374074977072 0.91382106528716767 0.2169261766093834 0.28372567114987551;3.9232650240784954 1.2939899016557597 -0.41142037412052013 0.66885241670139717 0.91712430793517319 0.33122640224947614 -0.38517027166615164 0.15102026779868399;-0.43216507850089975 -0.31548663728895721 0.18629816058345727 1.4661024421709119 0.15554980258477152 -1.2222947433278835 -0.33689273352143012 0.26095182446399967;-2.6257890105325052 1.3985082594483904 -0.5018937335584075 0.7713131219879954 0.82650129921808879 -0.70488639539372044 -0.37850748386060429 -0.076387443227301913;-2.4878806617829845 3.1589246020487076 2.0787689925651787 -0.83334739777683076 -0.17509580543040465 -0.57321577086428444 0.2764669134662075 0.72426051407541836;1.292540515181033 -0.082444590474050616 -0.009396042223948145 1.227557207763774 -1.5245560181404245 1.2104793294469876 -0.5340216243258652 -1.1932026309556765;2.2361316249871068 0.35654169826953647 -1.9656590258608042 -0.24714694249144983 -0.59846745967981607 -0.53179998210490487 0.39770259202884611 -0.96358195062605456;1.266083771981904 -0.78634650215888158 -0.91891358711202176 -0.10620316537364892 -0.22937508476763113 0.20998178231585302 0.11934926932937953 -0.11293918140707747;-3.5906606265144441 -0.79365036610896089 -0.2752853522220276 -2.3974572517716268 -0.43127066278362491 0.16171737637209924 0.12484533151119677 0.47696686630051593;-0.36335201197384109 -6.2030075560246445 0.17265070806887367 -0.017209944444645197 0.173063013535731 0.1454770373274894 0.049447568569859671 -0.19656824277144885;1.7929198418343737 0.71955830312036761 -0.24933647287784202 -0.75008564485025353 0.18332615421452311 -0.81020139098720656 0.45965037133969633 -1.008029075125906;-0.72928957383322213 -1.7569447428283398 -0.44758699702529109 -0.31486138798198532 0.42913669516125019 0.98030647926771497 1.1774706007687332 0.85993728857187968;0.49411620490889929 1.0029614277966672 1.3100531809174103 -0.22495058380099495 -0.14247211258351317 -0.6527455865074393 0.057221142444390263 0.4460446366941998;0.41024905029448727 0.26233503910116179 -0.28717945515579157 0.72935943407071091 0.90316960921104894 -3.493213478068482 -0.59424398107089993 -1.3657103865262918;-1.7462327116268546 0.57065082034424164 0.28699442729569175 -0.44212593190433264 0.37038161757381038 1.0232814263466787 0.94697264503956224 -1.1451152276948464];

% Layer 2
b2 = [-0.81486177962308737;-2.069321213927827;-1.8959972882589868;-0.75072839783384504;1.8851231726817974;1.7919126557481659;-3.1662716760563776;-0.72132224288912306;0.818491509958025;1.456633241963218;-0.32735994937313606;-1.4824373996217235;1.8918352444997872;0.42565444283475756;0.90200340148659974];
LW2_1 = [-0.14101383401524903 -0.44322493197791774 -0.79978987849187577 -0.89718779546446192 0.27693244662146327 -0.72616674963706107 0.99004280553214963 -1.1220406871801281 -0.23737680861603255 0.52368692120329519 -0.64034753574066972 -0.5141681277442145 0.42620773263825695 0.28539116622568544 -0.36440121094306416;1.250409102012777 -0.44095761734926858 -0.50063425736692213 -0.88102414127471462 0.92206655196747644 -0.70995618326244736 0.48052858796799081 0.47556728966852513 -0.549142290341743 0.87620400469071935 -0.022303751782892525 -0.77880061291503233 -0.39149166976266225 0.5578909116406463 -0.04740985076483125;0.99671348276541072 -0.53552398651453015 -0.59302831837667758 -1.0961113848327644 0.69752456281521202 -0.90142910877730298 0.58450893903518464 -0.21794797503110663 -0.53315245410486656 0.42438213595753627 -0.2789166091874874 -0.71858136013738394 0.024395900420982185 0.53711139677899911 -0.14183677641906062;0.60837814859484085 -0.51633749485530367 1.054677568962928 0.42056452805517891 0.49463520742076927 -1.0686180151431874 0.72897064970976089 1.4649485735396115 0.26977143586337082 -0.73200048031542586 -0.059905292104250878 0.094364175833010933 0.12187457694942957 -0.84781661839667311 -0.14479657507908292;-0.35080432679250018 -0.73004761832197529 0.21357026316268102 -0.18979155254964231 0.24592181571721669 0.20543648042300136 0.89113564733450512 -1.2385686172339885 0.062729173085936202 -0.95230637437440557 -0.53836668974845392 -0.32162013451412824 -1.2808433247995821 0.57517002017941976 1.1376761345021933;0.013958017815728372 0.72069743670150954 0.3690773337173337 -1.4025686157127453 -0.34363182100952727 -0.66483952218526343 -0.73863596239099372 0.68223032464673805 0.3494140877642995 0.26505606480781474 0.27194016372213575 -0.85410030548270821 0.60445561689542415 1.4385375067488542 1.372801537506702;0.77336325676696627 0.39091006980170084 0.24008657128123542 -0.95292701830132875 0.41627472154733153 -1.4917629157255508 1.26014065855374 0.92586915950351656 -0.2928475512021258 0.62712314136268232 -1.3992114644638622 -0.093249734989089575 -0.69642080340482615 0.69849004657010738 -1.1974988079608704;0.62341525460847846 1.1213743781445298 1.2776898001805315 -1.7461046739237047 0.55890328595150518 -1.4663880891886627 -0.052415561906283575 1.8184412273374362 0.1169446465300497 1.3673962788969771 1.505666755281085 -0.31162647522899678 -1.8081375795828349 0.46553160716985414 0.18696799905130995;-0.48383216803669005 0.61512785055309083 0.12627400102186603 -1.1743015758397564 0.018586824071385337 -0.92957365232042499 -0.10268584680005342 0.25786094630182665 -0.19861119938178226 -0.012371913481924759 -0.15385378070008163 -0.69280681939001809 -0.11517709274462307 1.6074665812859394 -0.67524002759297197;0.090671505001779465 1.4655464246072678 0.17452100397173337 -1.0765654435417542 0.58414975580464457 -0.9202069250169217 -0.19375248176623175 -0.54692945780311863 1.2218688331203187 0.9827910482377874 0.19662324288575711 -0.16450339829464763 -0.86630387199215531 0.22920073989491779 0.50626934974041671;0.81893918687482958 -0.10790017349109146 1.248567736670898 0.20215610373406984 0.48139461215166574 -1.3402017754482773 1.2302427792422628 0.56803918238919637 0.91628787832954328 -0.84834002983967149 -0.24830124536358866 0.19143467252968233 0.15622121189229748 -0.79959122839947139 -0.52613483336720746;1.261415029476356 0.75244959624523067 -1.840143908276767 -0.60002603141247624 0.093308277819867766 1.0084777261305213 -2.3864225098716472 -1.1225351443142795 0.43904064030899564 -0.12805772484576469 0.18644840555734948 -1.4585062703065859 0.83927365753004213 0.79658801416886205 0.53646824635140666;0.309474688740003 -1.0280716410149846 0.72309388211474679 0.67399916911215141 1.3818349820905436 -0.53910208514342084 -0.071245479196254624 0.17169608315680726 -0.57768607153924234 -0.72981361414444479 0.39128199743312436 0.045793178295963161 0.11246429753080069 -0.58795734370310948 -0.10846273473192261;-0.16179116290484202 -0.083949280282609035 -0.45884948254698132 0.60788587135634176 0.21853949864491251 -0.0071011333400583382 -0.10986564755443536 -0.75965041867948524 -0.2980994253909478 -0.21507473062867172 -0.015452636833323319 0.3172373639006138 -0.54268419231125098 -0.14765281299367033 -1.4630091433092522;0.08218025112129923 -0.73865329096012533 0.53298248944877469 0.74727246270912884 -0.4163840019340001 0.48029424209674226 -0.48692681352440942 -0.37076814074130687 -0.60418552484164278 -0.81713830347363625 0.72388490784840376 0.30432982830370992 -0.13430575882990187 -0.35938607765655384 -0.062186022827662488];

% Layer 3
b3 = 1.3736490738162672;
LW3_2 = [1.2068359488034519 1.3317529187414141 -1.8839430993563915 2.8649642956778099 -0.14530896765612195 -0.6773699523643224 2.6303655614203274 -0.32752892348071599 0.62807805668775263 0.60592005113824554 -1.4482536407489828 0.32330113113140563 -2.0286150597268686 -0.65369593183898378 2.5730543549856186];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
