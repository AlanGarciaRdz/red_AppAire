function [Y,Xf,Af] = O3centro9(X,~,~)
%O3CENTRO9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.2638526542318367;-3.8606752343300803;-0.76040175225171713;-1.4962714239043233;-0.33171696136819034;-1.0078294797020879;0.70977262096443072;-2.3173892815367858;0.65258159923602888;0.98538476579967793;-2.2433824362033037;-0.72541669625640948;-1.300098124594665];
  IW1_1 = [0.45405921344519806 -0.29166225840339538 1.0691777692771349 -0.97070593751898071 1.1888887614174211 1.0679698929615404;1.0998177248613226 0.33533394064338579 -0.29038903635350682 -3.6194833649521616 0.76467080200049165 -1.1160743163575766;-0.37289752777873952 -0.1735972159736805 -0.17484786033805377 -1.1640767038638848 -1.5627244225619834 1.3332480456906441;-0.053803452861503322 -1.109830666799682 -0.2425835819342898 -1.8063519513359845 2.3693503588393248 -0.30459057471713979;1.4246528804119172 1.9566882838111683 -0.014270394212780816 0.23800434030446374 0.57540959336343156 0.12777022857878487;-2.9710303508442077 1.240952811092316 2.2594110104854179 -1.9652087800576694 3.0711895274055725 -0.46335540929428298;0.031156318221508338 -0.62576726603406929 1.1210811442789375 -1.019320755586083 1.0999336535053426 0.45611071294546118;-1.8885740000234659 -1.6127749191979461 -2.2713351106381539 0.99364124580893631 -1.3905315812791978 0.32609648966234606;-0.67937067484064462 2.6092574776930313 -0.54960472745500311 0.066580122123842359 -0.40675367629356923 -0.49147147692463705;1.444085386427489 0.6808892876514191 0.57959784762489885 -0.70836051267463895 0.33005967201424991 0.2178230434857252;-2.4371969253018806 0.21115594569444979 0.056075913814282223 -0.74780813072732077 0.13124214710944432 -0.17395041381200596;-1.1869309508846968 0.85074783045168823 0.27651056087483383 -1.6285694867149654 1.1721922474573272 -0.57104628048162753;-0.80131336652798313 -0.60317770218435551 0.0031035643044087721 0.44123965943825377 -0.84696858349512805 1.2073496951374021];
  
  % Layer 2
  b2 = [1.5745019170152788;-2.4856239200121513;-3.1644831587497153;0.093324579282802314;0.41312898630293482;-0.42148979085257754;-0.65608632182298399;0.50951551909333903;-1.1121550108327245;0.99947095934661767;-1.4414076719469877;-1.2450406238010745;1.9079987094960482];
  LW2_1 = [-0.19618528065017685 -0.77424433109780166 -0.0085480414173890081 0.68435019812065789 -1.650634568758518 1.300038831719621 -1.2731687397220472 -0.37791929662803947 -1.8570286562612881 -2.4164375709661452 -2.0496519779672751 1.1524429548457327 0.53085453920496539;1.1554936534192664 -0.88090941921674371 -0.27051909090500181 -0.11527899317817206 0.45723239441522157 -0.57962822989309304 1.0037270899183308 -0.17302465248313326 1.0517467898950823 -1.6717975762778647 -0.062281304282809098 -0.45301252801238495 -1.6517403397393042;1.9259302063218777 -1.2232264356184097 1.3038276394868256 0.1217473728685193 -0.64851672742391886 -1.1318601610371013 1.201695163043031 -0.95399208663810797 1.4026334663702997 -4.7974484418646393 -5.2285750106876723 2.1763994422080639 1.2994531994952274;0.34612146652935466 -0.66646292036912647 0.51650171379355747 -0.23450730558072566 1.2576847902611161 0.16315701599129775 0.49653819444726566 0.070418569432460457 1.585065913169114 -0.5488488438624155 -0.060090964176758979 0.039046738482013774 0.23488899999040588;0.073587744520850082 0.82410936104153676 -0.3366881004401544 0.58852293450985393 -1.1666428686999297 0.30612976209371501 -0.69197455416285247 -0.20283913578699167 -1.9106222142651172 0.073573571995126624 0.10426784758653804 -0.53578366322249638 -0.66546080853444634;0.10729477404934186 1.2422408656371238 -0.17202446560844889 0.047885114854361373 -2.0160759298900794 0.13639397134268669 -1.0573159712625155 0.03196292167876956 0.32036076316245227 -1.8626420384158771 -1.8370886001308697 -0.43540613461029537 0.086657711946372007;0.20209344233151996 -0.88869397811072759 0.94368525814736892 0.30208670416373185 1.3597289618691708 0.11959222328202329 -0.50932992719871639 -0.59026451388581669 1.6290079533266009 -0.93739285746026446 -0.67000214425100002 -0.1434447659160876 0.88878544183463126;0.38821193266407023 0.15784638898347164 0.26202759222283417 -0.27410264095452813 -0.90493668960593476 1.4454226718446068 -0.53705471234748525 0.86915389124147935 0.20136745792605854 0.071373795870481233 -1.3844104406247699 1.1073452872122196 -0.72630076753842565;0.60275942201116472 -0.71706867017910025 -0.65606039180821352 0.7648785959170058 -3.1765784186125927 -0.37779112025443978 -1.2915157376147124 -0.22997332975080828 -1.1101915076571407 -0.095397283351219803 0.67910177586641951 0.456917955857923 -0.51028941792286264;-0.13137295239457333 1.3399826987885937 -0.72107366780817839 -0.4810155847560611 -0.49576472385605064 -0.15230355230451559 0.49617258548755655 0.14436725579781598 -2.1014751498609412 -0.91103267949785249 1.2629760422181207 -0.68828861863531454 -1.5494336136024014;0.13824121450993362 -0.74750740783648406 -0.27518590059782111 -0.79513575700878125 0.94282586394309698 -0.0041669353049174681 0.43866333489988901 0.45316495979521476 -1.5531636850343469 0.38472139551835072 0.078356301589928151 2.6435437114477134 0.47437974353360529;-0.74572486305408792 0.081970981402176554 -0.49635844624013487 -1.2457999284072085 -1.1193242262997392 1.7590181748082321 1.0235838639189856 2.2323353923203819 1.0968586676053442 2.5068925805603381 -1.5491094828926406 1.4731247317635408 -0.92456789001905459;0.3530587222133949 0.46077650780783591 0.27833921395701711 0.54198751429626957 -0.62404793878171994 -0.57390868240359694 -1.3546550179511661 -1.1184410125452595 -1.5374110519716333 0.040010143321764606 -0.047097981903191019 -0.021380805731956769 0.9409067503374744];
  
  % Layer 3
  b3 = 0.64482644455491545;
  LW3_2 = [0.47762680478431202 0.8329647018548334 0.3394525033655828 3.5311698330809058 2.1450383998531488 0.46584092801813121 -1.5289284147875561 -0.50586428593217259 -0.42249563661342066 -0.7973684399206683 1.4280099946886307 0.40464108387914205 1.1414343563748304];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
