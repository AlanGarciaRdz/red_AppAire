function [Y,Xf,Af] = COCentro13(X,~,~)
%COCENTRO13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:32.
% 
% [Y] = COCentro13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.0341628226332493;1.0528598968575975;-1.4823125423112973;-1.1965604051332073;-2.2505407540725422;3.8680083598387092;-0.34804633016111475;-0.35505668452379541;-0.1669327911173617;0.20274090244373924;-1.8367695311369514;-1.220054399221818;-1.7763879520408132;-2.2299815182274654;3.3624340147513587];
IW1_1 = [-0.38955375695519079 2.6576982798588173 0.48242318402598922 0.37789993840611102 0.21298929845520517 -0.19727643595187755 0.41203058086004885 -0.50874959765374539 -1.5144252374267926 0.73514502193991604;-0.81861673671220603 -1.3430679288909264 -0.34708532692669991 -0.46108719044180996 -1.4583175614303991 -0.31591373139867585 -1.619045521477473 -0.70022223360392599 0.6062292080204551 -0.82963236930426698;0.39499119996652687 -1.050031287283119 -0.63399205154911631 1.1408873114814226 0.68475445759108555 0.073613413135340339 -2.036072352100434 0.031999471149887326 0.94723374416048378 -0.194773602037875;0.64808482613283269 -1.3208638653596403 -0.090669657658651343 -0.76055805214543515 0.12058236925673883 -0.14464212735771642 0.47457129540583803 -0.83691663323538379 -0.36482433209013326 0.016180021753993197;0.83484690826679409 1.1273131847284583 -1.6354904876605041 0.63246126632775768 0.28762693951824497 -0.26701131977229303 -0.96497682299456089 0.86930635596398631 0.58030656468578012 0.33485563531773305;0.23536004648531583 -5.7866631849564252 -0.22184484397100945 0.25928979989282896 -0.13853517050305822 0.34089060631416623 -0.065440938643079996 0.19642346418505574 0.020608587106159766 -0.075311883454989292;-0.1828454097389437 -0.4983984949968619 0.073249020236838325 -0.30570352821475255 -0.12687855794469008 -0.19180376218459691 0.40157107243594165 -0.44256965886819455 -0.033142909917712383 0.066844100571435375;0.0023128813738656868 0.8337650908568518 0.26718843042297791 -0.041606000445433493 -0.57257418138061478 0.16945540017305818 0.20897170564611312 -0.2769732556482396 -0.75486912195512346 0.44713663680569948;0.6911193451610762 0.43735332507284613 0.02629898262685175 -0.35230576758122895 -0.29702421757220898 0.77532190366469278 -0.15899973163517092 -0.17535543879361015 -0.38411065235065595 0.82365491399311475;-0.39210279257381014 -0.57232824748390376 0.13472264266292761 0.31987527936086896 -0.042661734656759362 -0.47455617555823665 0.1298281868691831 0.06378037805929207 0.15159451769758617 -0.33172021787643263;-3.2030048461032301 0.40483347378201623 -0.5479581209329768 -1.0333269108168168 -0.6803001817496096 0.78466979000851322 -0.28379279432818055 -0.28442460835607264 0.16109305209471547 0.81326630235955366;0.21824612252194064 -1.0174587096158145 1.0542580867123768 0.48990524709059652 -1.2949827602251325 0.3249185287309046 -0.11792514162931682 0.12384243595333971 -2.8138171967360517 0.35185899699482176;-1.6402186343601066 -1.1400741992220875 -0.52828430532257609 -0.51181902310746685 0.28452625098270967 -0.231826485923502 -0.04888825181883117 0.020652590584856877 0.47201683723019233 -0.42872816554434612;-0.31652960364564009 0.92187829639888597 -0.37554361261781316 0.11856614231814001 0.9179690563183408 -0.3117019156334791 1.0551886915132132 0.72233505080219496 -0.48232495375894319 0.80127007832477515;-0.40097850682966096 0.011172842036206236 -0.21367113357591375 -0.55299533569376758 -0.021151927217402135 0.049625420093983366 0.29167643005177879 -0.63871386108317285 4.1612882661860979 -0.19239463855370045];

% Layer 2
b2 = [2.0217027773922847;1.4111479149338926;0.8417183311330112;1.0517051868976757;1.9806715654025715;1.5356177227291485;0.74764444020668053;-0.97257852999780592;-0.11576207496563549;-0.61716225374659073;0.42979322009022952;-1.2695406066274841;0.98243157966976724;-1.0148500278096029;1.6239582904954808];
LW2_1 = [-0.44292122034299058 -0.5238337224523294 0.73650277331108305 2.044459189881596 -0.78602834489496387 -0.32218974294917047 -0.087600035171611731 -2.1820342004402242 -0.49345437124815245 0.35628496497972134 0.43736690292497543 0.56523596353640038 -2.6456192617084251 0.16342576066028849 -0.14412502385585094;0.86497991566787902 0.96522293371223655 0.43058148632493809 0.21853177102237348 -0.72648465542954099 -0.54529593270656596 -0.069104091944129406 -0.55554046279613611 0.18473853888025268 -0.07113854071069288 -0.10990665067438955 -0.7137664928793388 -0.071094277422121682 0.1601495895691675 -0.23858619090146849;-0.44846358122244678 0.975311713665314 0.41287408482458199 0.92354356168364948 0.73639324408968443 0.2076632595618717 -1.0735835068181407 1.0677434073886751 0.17783155904374184 0.78191643379168108 -0.50654994879306414 0.15533864713520465 -0.10425740573549089 0.57236150681528664 0.24550580083779658;-0.93596637667680826 0.34994592980484096 -0.14994521415618955 0.34740911030014104 0.75334630831918936 0.77379531131263413 -1.1167494502708277 0.43577531129041386 -0.46856563396952949 -0.93686841092992423 0.2667579430689449 0.077951466268629407 0.15008391298573961 0.31099461287873043 -0.12119648054716296;-0.35311349267550368 -0.053055284065224403 -0.97131633846722532 0.52831221245536708 -0.2595507615031119 0.51314119334896235 0.99255941552004845 -2.5159484407514654 0.58586522885588033 0.92162530484319194 0.19805107155412807 0.90591522645814626 0.002509353997982907 -0.89623224124840417 -0.081211421882094376;-0.68554543523372502 -0.38905698955246476 0.52161851821412297 -0.61628320171873663 0.28766491242426911 -0.33332682024000554 1.411697736645235 -0.50089815483065292 -0.39486793217260596 -0.74726952979805628 0.08518861844518566 0.69944365225940452 -0.4714575558338428 -0.67338865422922789 -0.62784302441157802;0.022372290810196059 -0.16523708446171687 -1.1217862946529122 0.41170283872012847 -0.32114472453771387 -0.93098386242823139 -0.91477922089349151 1.2403288580572018 0.35926966987398656 0.59468996053807754 -0.31242151944907326 -0.44676860791676304 0.61306356582743926 0.71467276738055319 0.066111342623002889;0.5944180612349057 -0.47315767610612192 -0.64134701125870186 -1.7430483460075386 1.6067193815707839 0.93485574804841487 0.36333302882847213 1.5433871693617389 0.40702584296535949 -0.32781168238465436 -0.32418016005874362 -0.46067452734569814 1.7907801864475417 -0.097454145264513181 0.33557120481734576;0.65778896205259718 -0.18935214834648895 -0.15072381226267137 -0.34677747679343829 0.19890796811248379 -0.26618123350841422 0.64267542357091223 -0.11019750734118086 0.65344484698921212 0.56277961602256121 -0.33398648715849011 -0.10845314731265944 0.48606665207276711 0.0395479448962196 0.22027274534948196;-0.12162446701110952 0.32268720903030884 -1.0984488899720664 0.86221602492320215 -0.13281969522235992 0.49961544790657669 -1.7489978640575059 1.5212046886617274 -0.27734620647240599 0.23721665039728967 -0.098692880856080606 -0.65704123986881258 0.17569347544848216 1.5985056300338252 0.43188814790051372;-0.023258035628544144 -0.42695496945583111 0.47507778309066256 -0.010895451359409142 -0.41878198022557139 -0.56268310490768148 0.39552324566366581 -0.17686907378408509 0.16737254724910278 0.13475916714953148 -0.32804088519100238 0.23129261085356945 -0.72723388343158257 -0.57293978116453081 0.033627563582770095;-0.072563770972123284 -0.56032500308251387 0.28308086502678936 0.55611476571226082 0.88174725487397421 1.0823749585998934 -0.55663091090927608 1.7991005273308676 -0.60636089320032949 -0.73134484878083272 -0.42731635418153174 0.62422901114374385 0.74334371647987219 0.64304503953752756 0.50154311572189181;-0.39305566431859945 -0.46971316318003342 -0.23151028810115268 -0.58038280529270803 0.31150097086508366 -0.90504833586116529 -0.23031880158020707 1.7005934279379544 0.16967503525317601 1.1102151738334929 0.079338369504036291 -0.047518309262480074 -0.51944045175611508 -0.3928925589994563 1.2062271253780124;0.13988978838449084 0.44430383148452451 -0.56254130510506162 1.1171587280586848 0.046332425067867243 -0.096113587823982494 -2.3974753207311466 0.84949322893063439 0.32042897743842286 1.4018951885742936 0.29968296974501335 -0.63773384753992823 0.67131660287345529 0.025116250462526281 0.40262215557407316;0.25086419343606553 0.10461088473159755 0.12925822356473998 -0.1420021081937996 -0.58594902345679234 -0.24916256687208277 0.68378389681874607 -0.49739348025029206 -0.57652230844858843 -0.18368499303188082 0.64932884641571142 -0.65934976058672612 -0.49166312272721324 -0.25416697526506221 0.64598394717519547];

% Layer 3
b3 = -0.43272263332601124;
LW3_2 = [-0.70593222058105398 -1.4130311410249163 -0.67362030336316026 0.87155632217173284 1.2141322222822248 1.714576595894743 -1.333853374328922 -0.70874028417302481 2.611750439894915 1.7667315658116671 1.4484769039279415 -0.84678083942355042 -0.21720874237634408 1.1734697277257187 -0.46758972616033206];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
