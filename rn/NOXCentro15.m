function [Y,Xf,Af] = NOXCentro15(X,~,~)
%NOXCENTRO15 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:21.
% 
% [Y] = NOXCentro15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1137010472257312;-2.0683667787753222;-1.3861735853373207;2.2194906327104813;-0.53171392164012621;0.026272692743663451;8.8935510060466854;1.9119949056756793;-2.4505594416850793;0.6705606953499158;2.0528603488046793;-3.4076086081711603;-2.3430887359200789;1.343416652508173];
IW1_1 = [-0.86853548574408457 -1.2456407289827833 0.58562281285697559 -1.5976317892456864 -0.73821339076711656 0.72585567052139188 -0.8936662019218462 0.4750419896587017;1.8005056827264956 4.0752417555092189 1.0089686868333947 -1.5799178696136631 -0.27691835120408126 0.24394074954489678 0.2131051365482951 -0.89313698152109433;-1.1351395380093701 -3.0250494670621739 -1.6635642501378516 2.0177621499271607 -1.0025537375539215 1.0628411353979474 0.8597921968900083 -0.14326682751145275;-0.26247885064957699 -3.8407348284686034 -0.14098717431007271 -0.30984004962162642 -0.082218293771791698 0.1636279836251604 -0.18185064525106895 0.21406855831542287;0.99799810339716566 -2.3673257904509515 -0.051998331258676506 -0.21532070246312493 0.076873510209789123 0.1414788918502963 -0.0095657564522416642 0.10095001124287097;0.48859314647477614 -1.4502709486605392 -0.0061659455740121702 1.0463551460359979 -0.26592057773770833 -1.036823769605921 0.017072578331760742 -0.19505333136299038;-10.979065338173955 -1.2011433304702153 -0.82848904706709814 0.51493496030341246 1.4393262146403214 -1.1815526594720183 0.21516182425097277 -0.21292440704262752;0.22558017885460255 -0.095010451869851686 0.33785822449787228 -1.0162634098081949 0.2660562833298471 1.8510067994871402 0.027441029046455151 0.40011451676494098;-0.71925230650202743 -3.7574340065232907 -0.079905120203362046 -1.1129047687659221 0.31497082582721397 0.31255080586494799 0.012045445014921469 0.46042894833350545;2.031499717978257 0.49423041202600176 -0.22855452380374747 2.7772330103050922 0.96483515871353731 -0.073961369479874806 -0.14701902226750341 -0.26056996069201743;3.9395889249401055 1.6548882812644288 -2.53750100680077 0.35165178558700705 1.1835191277166099 1.4268587531167156 -0.35967135584782761 0.42707821143838259;-0.28235099968339467 5.0088837737837331 0.051568613795565987 -0.36896715350346282 0.45298046015978172 -0.22514160248885576 0.20203011524995443 0.12300119285653005;-0.85975160116330329 2.201848634557205 -0.060257514290600445 -0.51588487544047623 0.7821075108385831 -0.18043249012624982 1.2611393943301332 0.71915159572756882;1.6462027263163712 -0.99329887060017974 -0.22544761459824361 -2.872527940576687 -1.0357054289943532 -3.1814408715729141 0.35124477234864598 1.5859300208692235];

% Layer 2
b2 = [-3.6399362941741229;2.9532808101583972;-0.9643685443338057;-1.2505566274542925;2.6329200557114243;1.767641457504636;0.14965561488137324;1.6969651878031504;-1.3388867813393639;0.34617423860582258;1.0609532876469814;0.14851773755687611;-1.2408659724094948;3.4508110226405351];
LW2_1 = [-1.1443276087500147 0.80576915659560178 5.8931619225517631 -1.9509467884266127 -1.9658829988746844 -1.1250666186207121 -1.8464003887240965 1.7022796117221706 -0.2743963230533692 1.0427619265943586 -2.3760872756437807 1.0453585465076805 0.81786082970731067 1.716068662036325;0.34096558781194036 -0.26593984212167565 -0.07134576510846187 -0.0080000885311189707 0.76346873191208819 -0.14160032566754865 0.28779726813768891 1.0438780283226414 0.20904797791681279 0.76197902205093848 -0.91619326565352666 1.4828146484606124 -0.34823447361967924 -0.08473562954653753;0.39810986271761761 -0.34883179241588069 0.091053015997904774 1.8912512772716636 -0.00046193439548444229 0.035572124896255969 -0.63929535082220235 0.3345766930076931 0.77039717788875184 0.63571674269064915 -0.61640530728440479 0.35619456841155944 -0.66505811065895526 0.48440307671189092;0.026627793238422723 0.17560056127092943 -0.16899780758774799 0.25290196191320147 -0.41561311291198466 0.73214636922073129 -0.033078304238175718 -0.17357453261385486 -0.63048212362626843 -0.34437477034119046 -0.28819041194176104 -1.6679287994199266 0.54386151365029833 -0.5686434665011012;-0.17628946758545022 0.44657182307025234 -0.24387776423783511 -1.9923553508707994 0.60812390826029816 -0.2912861547665464 1.0568587931353373 -1.9438668723095465 -1.5312382049160129 -0.61582793778714429 -0.82758582405709591 0.60316366738265703 -0.6185438881502423 -0.76160092976967697;1.1219292931935527 2.8895123388637849 0.32984310296493291 -1.6179599563584719 -1.0635259552055287 -2.0083552750991278 -1.6804003463198758 0.84382825930505967 0.75773954445711822 2.1085679188981827 0.70643975312159335 -1.0942312723912988 -1.6303390512468627 1.8680560015032188;0.29794246193713614 0.40523738349805805 0.25604998088363767 -0.59635528860319353 -0.5230334695037675 0.17600099877102124 0.15128479227511857 0.95000155318314494 0.47956947537780775 -0.31604991229852686 -0.20309244882883443 0.48497715381375373 -0.15970367769573138 0.042408817159996122;-0.76466626624761491 -0.50245889339872296 -0.14596714890424495 0.19167345070095551 -0.39968419059519367 -1.5647465872874085 1.4344907431608545 -1.9159359133641256 -0.073380208087712423 -0.70076146562609543 0.062461968930941678 0.82475246943120128 -0.97724938183702492 -0.01191669059456868;-0.060695205612504771 -0.20799102906653008 -0.015351311120076053 0.24223939650211623 -0.06437154686487663 -0.57163181378483985 0.0076366032516351472 -0.538459509106199 -0.13391537320354263 0.0059577781046809952 0.32169062778088015 -0.95278474959348347 0.1610488065887557 -0.12740238087020991;0.53229238613357377 0.042729915606111488 0.11271739180280642 -0.081842516230737211 -0.53882173232936337 -0.59802682818679354 0.0085494054918075508 -0.16240475633023782 0.21441897484299569 0.12453223499210618 0.31328464335510092 1.6529663223910211 -0.5897963912812848 0.10098960712068777;0.29537727679909553 0.12420710865661085 -0.2018523458217667 -0.081669696662264188 -0.1841048488893256 0.58938857221327656 -0.0081081507818763585 -0.23926024613575189 -0.44065300343661401 0.092495775008459652 0.043322574527104668 1.0650086492544313 -0.033896181001660142 -0.24353793613505428;-0.14407178329315284 0.32331259830615539 0.18485266508159548 0.30081261139128684 0.16866418642006498 0.37940454509754379 0.78827543903177821 2.1043560050826886 -0.57493337953301571 -0.27746103304386804 -0.71692300576461632 1.1778797360951554 -0.83357109307264488 -0.69438246319638341;-0.32913368584156449 0.24093486523285815 -0.080914647773384488 0.48812992937688404 -1.4954233560434045 0.32391751628984167 -0.57227724161471627 -1.4782373306639143 1.0933702083340493 -0.31702729119893897 0.88700254064424955 -0.79597714876455505 0.63306722751577948 0.43453336072684468;0.37788056643324713 1.4403080220534703 1.6829553344360566 -1.6785377221923008 -2.0402598546575299 -0.69976116437737601 0.35367566305048476 2.5703853364244864 2.0285813536878861 -0.41258373901764211 -3.0524115364871696 -0.83115148978784692 -1.7019735662737816 -0.0047015876071958562];

% Layer 3
b3 = -2.4478362244284382;
LW3_2 = [-0.25955092852255424 3.5090738452677099 -1.1220776269851533 1.8887367674108506 -0.45481886035829999 -0.28122948318135443 -2.6872165531859831 -0.31844076292973866 -4.3892332570553947 2.9002320632438643 -3.042426088882741 1.396273322869459 3.1046112402815385 -0.28594377895566253];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
