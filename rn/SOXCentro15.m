function [Y,Xf,Af] = SOXCentro15(X,~,~)
%SOXCENTRO15 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:29.
% 
% [Y] = SOXCentro15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.63368248893180823;2.7096657647231601;3.1133448226099962;-1.0733039442547123;-1.1226514283119977;1.652529771072561;2.28535529061184;0.1307473498358929;2.3152059379386052;2.4004784452920989;-1.3100765909328547;1.4139997954767125;0.12838780254727697;-1.6791252178202489];
IW1_1 = [2.0332114442068616 0.0541103276692039 -0.3046528228404225 -0.44801580545394548 0.84787422546334223 -0.039743721313540453 1.7226257260684663 0.67762368470378365 0.32820408208588331 2.7076817907888082 -2.6013829900848782;-1.6950338933933751 0.27501784488132419 -0.2092642980793466 0.19354906232892644 0.93875312320981275 0.35084516506428332 0.5863258531574228 0.18990327843495866 -0.46626572331412774 1.3571256182081475 -0.54778802305034113;0.5003170602601591 2.8851544715893538 -0.54659442359460741 -0.044554852992132236 1.1278454318266113 -0.33082952685751976 1.7331596990384472 -0.086458251230378688 0.043963047426172443 -3.0633356691573335 2.131157176248522;3.0085198113060514 0.18884805881802122 1.0837708801915245 1.3899797861385446 0.54910997292551733 0.5176002824315008 -0.22597195771445111 -0.40808670423586429 -0.70724016972644554 -0.94075543786580285 -0.27951240163370494;2.5331141933009724 -0.27665847368895558 0.025875843289083419 0.33267025102703524 2.2987420824416929 -0.51329169481373671 -1.2219362955065096 -0.984980524241585 0.19000435830606885 -6.0211908498592788 1.3955244651044016;-2.4046308756210615 -0.27773527752027993 -0.095618943514222829 0.1981762693971543 1.8211074234085849 0.066223204684375703 1.8454205288819585 -0.36963272759863652 0.31775343427227631 0.90619249212857633 -1.9566519842042156;-4.4325561417617401 -0.18330171252147653 -1.1173013922636572 -0.27861259743400607 0.61520134698043472 -0.0082437014601781967 0.70653216860702772 0.21920498502321695 0.35460545822353973 4.0387786228217699 -1.9523223736358131;-0.94819120986598382 0.11771548317223038 0.36447171347229362 -0.49757980035490623 -1.0724661567859808 0.61958742385737653 1.8585636130869554 -0.34936968894873266 -0.83071047758080585 -1.6355538029111076 -0.1876145720774105;0.22404293259162772 0.97771658329991107 0.23576152276754767 -0.030185454277545501 0.11904567415150327 -0.013655939114395997 3.1900913276636036 -0.16319631168884052 0.21107411874927456 -2.5549464666309856 0.24204056647755054;0.2654813746113413 -0.14978492181864331 -0.035945939343497241 0.1000646831724889 0.32952656584966944 0.043937017726148518 0.27032430754504311 0.18059460883052189 0.43273395379905305 1.1756121214237862 0.75804845453451108;-0.85111942714541755 -0.023945614948263756 -2.1224646832509886 -0.66483006771333431 1.2428235060927864 -0.70718169295555922 1.4279326322246291 0.26842287391586206 -0.54447431515498657 0.24940880777847368 0.16923456000927312;1.4409269120816419 -0.21310771090204425 0.17081483381379176 -0.027784285451752141 -1.5905503579514666 0.77703193992884068 0.69342444756357469 -0.088295886349174124 -0.093152262650948142 0.46482742556134921 -1.0410338747035555;1.0566116572695539 0.23829781703525796 -0.64666536392048257 -0.70208830294572777 -0.61968035721713099 0.03417280370488511 -1.0759666075828711 0.62721996067530472 1.5916702290561973 -0.12505995275999995 0.21456165930543819;0.015358632332811761 -0.50737482330989059 0.49609104076580252 0.27875496605826022 0.27919183025932426 -0.95979667113575351 -0.13922371064119166 -0.16368011510795127 -0.45061249571772949 -0.24638062004243619 0.11724694237533695];

% Layer 2
b2 = [-2.6457419476706088;1.6778599882536551;1.8091473845860777;-1.1716567424106676;0.70768682964205809;-1.5940308789778814;0.74032325712530966;0.88317653811707475;0.24477318756337163;-1.7094453655318556;-1.2758211922993015;-0.25352336342249582;-1.2536761274794337;-2.7730783690160923];
LW2_1 = [-0.12737377910764683 0.33903916076591434 -0.10664142012327579 0.51049578885520452 0.27799477948215057 0.11692593359233522 0.72762590994801213 -0.22280218905802271 -0.0087102296647295838 -1.0513904200672806 -0.48820403706532156 0.11517077755161799 0.49547914504901813 0.032768153001529902;-0.7155040118370567 0.26302140862628892 0.7885881541229055 -0.72756484525350928 -0.14598371274199884 0.77740844610353244 -0.22888632585738847 0.17457894567180543 -0.83536074857241727 1.164380811938591 -0.16329011614534505 0.40577288064541051 0.32216223274705946 0.55138871260675981;-0.6207400511944996 1.8180615647516882 -0.47457109806505576 0.10376442744424981 -1.1569394617170483 1.9614495093411082 -2.7159809171100546 -0.74753813941433611 0.80009928250428408 0.40673506608881016 -0.45004790828133034 -0.07008530352755224 1.3115225404199882 -0.3996620663408777;0.24814562459960265 -0.076034607485130329 -0.12582137673280991 -0.16803250041315659 -0.14072681410282498 0.66443928571517086 -1.4114611510444206 -0.80652724186477276 -1.3037599892187111 -0.82506312583793573 -1.2564414791364422 -1.0961336738172007 1.0636997209390939 -0.33625237822357723;0.70651255165763382 0.52985301493934622 -0.75934658231607444 -0.2034725873253006 -0.019605784995013344 1.2299755919693189 -1.0635896456804161 -0.43485463822011811 1.5693747238305051 0.49489155028178522 -0.1604210327250965 0.23938596008849977 0.73149521086786984 -1.0218315869883405;0.39472573217136542 -1.3266898141682384 1.510349937938388 1.2866895860844803 -1.0803460830577309 -1.4985168294581463 -2.5469494553625531 0.65002575117861994 -1.869306823009655 1.3539944666221797 0.052905399934380107 -0.65973775260751499 -0.63237018373995679 1.0653381537773492;1.7047381595024489 -1.5190270901227347 -0.55988028213311547 -0.42843025606285057 -0.72510789435723877 1.5520800802392187 -0.69235506801878965 0.40853944185741137 1.40980209607268 -1.218302320658726 -0.22038055276444457 0.31418804962677976 0.44480279304561793 -0.1518968465865464;-0.51812778453300634 -0.017704225354129785 -0.085728338122742734 -1.5977634673024406 -0.66635826337367887 1.1187037268801894 -2.8820759030781069 0.88751958134390185 0.47037522010849619 1.8405949243141517 1.1007690390230138 0.17345706695712906 -0.87710757942227791 -0.61084851469943746;-1.9058192880777722 2.5744074732655577 -0.2930499811944543 -2.0362038743964979 -1.9168443629939482 2.2679573405505704 -3.6543430309519147 -1.2064312712351573 0.39903000938381483 0.33680426560519416 -0.45496822948011811 -0.21785763001585226 1.4830232564672308 0.097205306248744808;0.25851856072178875 -0.13015227571617272 -0.28655848790628291 -0.10345052586170063 -0.20120153101515861 0.18925165448136702 -1.3487992480563469 -0.8755937619113503 -1.3072186046170979 -0.68511228313554273 -1.12931123698166 -0.84500921638103754 0.39707280493440511 -1.0571944674744937;-0.31787752224907023 -0.54990049991488554 -0.94778155193741853 -0.21015925551936976 0.34203949779219034 -0.85383182041435823 0.91354805140652484 -1.2682204402913602 0.060867697497693336 1.3353603110169339 -0.73508608727515157 -0.81640795753668705 -0.59036273005316742 0.88808888908647876;1.6876957124743626 -2.3616842931435778 0.54987468890207214 1.8585345521908285 0.91451983087455457 -1.9885301519086909 1.8868117173738257 1.0775052887357499 -0.79755369320749236 -0.15996503102887927 0.36398543815883483 -0.29677870517837568 -1.2465418224049949 -0.016284581825361577;-1.5984633807192474 1.3657480500649832 0.34995535658677962 0.41220824052044147 0.57083422811375284 -0.76511482296048605 0.34273676069182818 -0.30470327450528339 -1.3914285305797645 0.5227021649073933 -0.079689069456429951 -0.15338043617895344 -0.085143466619560307 -0.12899270106208463;-0.51083565263846131 0.3863061591739676 -0.082346350935914067 0.20612284320001112 0.20246990450342292 -0.51875600633392704 0.85658731649826247 -0.3678881062216865 0.20578384991541798 0.35445051171473851 0.1113895423612168 0.54752383165079987 0.11519766580596282 -0.04619778548845814];

% Layer 3
b3 = -1.2392349873226569;
LW3_2 = [1.0848041895342448 -0.44844344195096286 2.9317817557568047 1.3970044392229268 -1.3009789589464753 0.2819497605943217 -0.22887583910598333 0.24528658692192218 -2.1565391603102078 -1.2401149272883043 -0.68093493668255434 -2.4327909053669661 -0.27289936150401634 0.75784433289551301];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
