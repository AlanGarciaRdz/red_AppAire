function [Y,Xf,Af] = O3lomadorada14(X,~,~)
%O3LOMADORADA14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:40.
% 
% [Y] = O3lomadorada14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;17.6991150442478];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.2722733056834103;0.8557591608304802;1.0013699244323051;0.44156191814231144;3.1793596362386607;-0.10861250351911342;0.21599108827283958;1.9478228461054963;-0.31420473973882851;3.0201618890004567;-5.6635998143382009;0.62641953124380911];
  IW1_1 = [0.26148432949354711 0.52652752246628998 -0.90384335132528215 0.93550964517962631 -1.1245504079963311 0.6645676099035408 0.56491943240188536;-3.0678896106444631 -3.8165017547879971 -0.92050822072671223 0.99047478299191039 0.0037569360780387237 -1.0788849327276235 1.7342392483033664;0.44661354820050692 0.60569095358735126 0.086666062747728506 1.426804006477522 0.071154690043122526 -0.03951775567708174 -1.1727929540903117;-1.9214731029897469 3.4874061149553515 0.15255146442913797 0.9710754560688617 2.0344876543177794 1.2517533256854303 0.0031247867170648147;-3.7073743552182865 0.016240224092271022 0.21861139383845424 -0.13329510520205107 -0.11192323004404814 0.40204842366543342 -0.25113918713800998;-0.31905245516974112 -0.75425603367032046 0.10514939509312093 0.59147323879144897 -0.15436613670122873 0.509298925743213 -0.84719600299724418;-1.7197501600651031 -2.1807049420315776 -0.4934034280005658 -0.49464435838283805 -0.097426379486997589 0.31756776143984944 0.96715938534539059;0.066500909327204719 -0.62938348836311864 0.12078057696003715 0.4069950089569645 -0.22339358482459315 0.10832223671605382 2.1255498852450554;-4.6643370913755362 0.020581869689071823 0.54620173009175754 -0.81443668052600371 0.84091226434136512 0.58946126138846378 1.513373819056304;0.36543798525097237 3.0301409263393118 0.51359134410482032 -1.5165153446231565 1.1493641820377418 0.030755358336791855 -0.091821569817718954;-0.072159817385799324 -0.46370461435210547 -0.50988723072287279 -3.1101252068730134 0.49944629499731508 0.33924694564894703 -2.3554805623959454;0.25569910440794646 -0.046055583710022913 -0.26209977381725708 1.6165725882421189 0.82266151178461244 0.33621057668406346 -2.4659847738587635];
  
  % Layer 2
  b2 = [1.8059456582570814;1.7520250772839729;1.3049565541428125;0.70309142636464084;-2.8255122457756108;0.059836859936474925;0.47557092510945603;1.3130107619884943;-0.3769522051531623;1.6911617268044645;2.2489696440402018;1.6121414442582545];
  LW2_1 = [-0.71205324012850124 0.10438006355503528 0.60734427615759945 0.19379765114679318 -0.07277293668192901 -1.3878620286426397 1.3133252858620446 -0.30497242495593291 -0.78567951901536226 -0.7342172329433746 -0.43295095206611056 0.32551340085739089;0.82768166762585005 0.35012801955955619 -0.097135071394101255 -0.19590820684125324 0.41994261168039365 -0.18456645231738358 -0.2642414673402364 0.4678509968143294 -0.10227776871277339 -1.6402995471042958 0.72319230213891372 0.42209939735681656;0.4903503634545604 0.34752963566128592 -0.12007466552076042 0.20982791682406896 0.7843980078090137 -2.4445107943808382 0.35747383030549768 2.1189643576622013 -0.47635332619014037 -0.030218553358749164 1.2576775169271577 1.6719142716708559;-1.0869976197848428 -1.1604030603739106 0.73980222962130915 0.17559898766348345 -0.031068196715480924 0.13247401157785837 1.1583888311762345 -0.16350573910523325 -0.62875325573436558 -0.14889474125173049 -0.60141540689425232 -0.50093165691022601;-0.5346732740973108 0.027205548329288062 0.40775428243736961 0.11633546256852821 2.2641475308041734 -0.27998593681735412 0.38288479239893952 0.037711917349954535 -0.52221240566843685 -0.16881141083667134 0.24013723999019851 -0.27998911983020353;-0.71380698153970457 -1.3449148428376705 -1.9236644535788101 0.85184115515965342 0.2144709430239371 0.023757138043716007 -1.3842761787030711 -1.1279332948852836 1.1202184561018547 -0.8536960468612218 -1.3780649021811004 -0.99004250251938886;1.0827432161526609 -0.50257813686655228 1.3105821379365126 0.021639892376623809 0.55198254989129181 -0.16486735356189119 0.096100599022028776 0.10880207530286999 1.0238434112519292 -0.1238723940780535 -0.32921493847824096 0.30163717226208719;1.0474277959689968 0.15999024273601012 -1.0167307686232345 0.90494548397200736 0.87605511992135132 -0.1577801670345462 -1.8644095529409903 -0.4164708068666354 -0.074908506213432369 0.35336012416431639 1.3609144121424928 -0.30278094502924646;-1.008701699185153 1.2513578241051273 0.059002194254221617 1.3798257666651139 1.0073996526593449 0.83325527764399587 0.13535705074137369 0.97134526861929593 0.44764720222617166 0.14269979177454611 0.85337750328110151 0.11958328833459335;0.23127072230418708 -0.91834846170070061 -0.10904338359652894 1.3076274746995482 0.83838434230365622 -1.0058084618829553 0.014525453131257395 0.73097947618540826 -0.37657310776330705 -2.1268152663087436 -0.62367691243501655 1.0346616561166235;0.84709859678411381 0.80368899206834477 -0.54370056423547986 0.13611403564038829 0.56815522703683297 -1.1925196507880409 -0.80570705950586941 -0.84211793898978993 -0.70675701515854483 -0.62360256297191008 0.58133587607455461 -1.0991496516612242;0.95664591516913 -0.73642619961798417 1.0741366787016922 0.39153329894505418 -0.57058676110775219 0.48831442356263333 0.12769647379405352 -0.91161780275567006 1.0867553821137244 1.7298853702044987 1.294991115768396 -1.572422443482689];
  
  % Layer 3
  b3 = 0.01553507391737753;
  LW3_2 = [-1.4720714485395192 -1.6826522272039919 3.1307414335876493 -0.91015752815868334 1.1701531248171142 -0.32860079308125667 -0.38298723989221345 -0.77642054271220207 -0.45670037176050177 0.62406625036702168 -0.60455775291450198 0.67773741202174931];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 17.6991150442478;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
