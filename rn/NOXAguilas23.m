function [Y,Xf,Af] = NOXAguilas23(X,~,~)
%NOXAGUILAS23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:14.
% 
% [Y] = NOXAguilas23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.448430493273543;5.42005420054201;17.8571428571429;0.00666000666000666;0.02;0.0561797752808989;0.00588581518540318;0.125;4.5045045045045;2.48447204968944];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.6277057176986642;1.6077319426696073;-2.4277626266083967;-0.22415683209719561;-1.1030901151831538;-0.39748933268944864;0.17154996368900918;-0.14002663631397014;-0.36873241933207795;0.97175929320946264;-1.9722548406529241;-1.6010892015181006;-1.3670208887131445;2.0248194661355274];
IW1_1 = [0.00025091441962624139 0.2584799828362368 -1.1970537610422478 -0.36914143932964399 0.62478714692195292 0.045240842769284764 0.32574720502524768 -0.11648845314673034 -0.87665933090370229 -0.33240212681616221 -0.44499639553535242 0.54874649366866279;-0.20588580045962571 0.39294081478613829 -0.38339856434503561 -0.089662552113415409 -0.77913587064320755 -0.30994627768411298 0.18911697862330973 -0.32744697799637446 -0.67024133068339664 -0.84138451563684657 -0.3041305106662423 -0.8504195340438705;0.034028214824999209 0.41694333289714142 0.026118071386787588 -1.7123590289660731 -0.30889430240782306 -0.28918638384617967 -0.34026549188183813 0.45148988976765991 0.067602135394696519 0.014321670933190742 -0.14254091134461608 0.42032911244323795;-0.3887811768152627 0.68720348641453333 0.59771760236199656 -0.48211847722392687 0.046145673546079249 0.07361216111267295 0.13723834518888467 1.0688116258699922 0.079223580592337847 0.027919772411283558 -0.60170129273862549 -0.26417847239553111;-0.34600842208891552 0.14132735983054284 -0.88466952933389387 0.84299252552100079 -0.41808266325559673 0.34897746690525261 -0.93377213540719017 -1.2827084599489875 -0.28143820382916707 0.33348374791982233 -0.019683371958369472 0.91459447668591431;0.18805382869907275 0.58326580799345729 0.13406210767963941 1.5356913680592326 0.0048930329496655878 -1.1478209384541924 0.33916546246816243 -0.051722508993953767 -0.14908466324857905 0.39573498946343155 0.35860177993781417 0.55595220055584083;0.062985095008142061 -0.52750961697112753 -0.53412687028791428 0.10992281064788995 -0.73664861603080434 0.75575941979341332 0.61347752979629799 2.1750742804970216 0.094966625259742699 -0.16438568637969483 -0.29052272972938009 0.34387121781598329;-2.0246714643308987 0.097449687284847319 0.44373579329446944 -0.68959350779845463 1.0262124481995327 0.54803771922586808 0.60039714042572301 0.031857668644699647 -0.011768687200650954 -0.10441968829633025 0.048920809547663369 -0.25143699153631738;-0.18805068997974594 -2.4440062651004153 -0.09857289648920603 0.20548566585826042 0.2421964315268986 -0.073360841557458423 -0.049881900484758407 0.17076681917745481 0.026450184632806222 -0.078898679920609699 -0.16987409595334454 -0.034720955558103547;0.80363593130001676 -1.9758632913394887 0.17929399416995231 1.1188918766170644 1.0554291418898323 -0.44691504915363095 0.54323060075048168 1.1815688323257163 -0.31621432604344363 -0.097699878797102874 0.26955627260661996 -1.6421818081382731;-1.0560740465480272 0.11299982483145565 -0.6175596430018232 -0.15350433849813616 -0.70715073112387605 -0.11581761037222302 0.080490355624628543 0.11810105832434742 0.22279688628706956 0.11374816120686755 0.27000430983606039 0.8572667846479004;-0.17315618124837376 -0.24796251901393679 0.85072825146657527 -0.7415052379688778 -0.70719427710446747 -0.91452034752570355 -0.30259208621738248 -0.071142098797160963 0.0055628694732498219 0.16269899754754602 0.011799305773194321 0.56966785462909741;-0.92023740416167288 0.36159156124887565 -0.79487892308804919 0.66887650814349098 0.8056144103881081 -1.0267967885259623 0.099999524986810362 -0.34360912984811964 -0.11305928069836092 0.068884782294351785 0.36615477909453459 0.69990528963214149;0.12069922140341596 0.40287889527034892 -0.79625452190760804 1.0478404374387946 0.46231490420587873 1.0698411793737141 0.072080443439061989 1.016829130475956 0.040688796846344757 -0.16030070063808535 -0.25576681074313307 -0.51195921310857817];

% Layer 2
b2 = [2.0268294806623617;-0.95173867324692596;-1.0970502950754155;-0.71755326395828578;0.39439013752347268;0.31081630443582137;-0.11248887906075525;-0.18449752263334468;-0.58202536014800976;-0.24897348990661955;-0.66425551675417882;0.8424784143026639;1.1622392184364805;-1.2558083409404122];
LW2_1 = [-0.097032955368529655 0.25376592724851654 0.63386337627739953 -1.0518885567068053 0.26294102175217593 1.1885818657101133 0.33861692654499947 0.082443276167133983 -1.0033793186986688 0.033680269071025608 0.07787098050876548 0.94005739481230366 -0.91867982834529394 -1.2332887561577843;0.50666704985588984 0.87033621861615817 0.65719565924124845 0.65184023694513238 0.27969032929162307 -0.2270993005265064 0.43472058850214707 0.068856376716724038 -1.0777697201482141 0.030144846515433948 -0.65669957768103138 -0.22779709234858589 -0.47530451859673367 0.64795635460435796;0.92827497749539323 0.22119338938105249 -0.53688892761429308 1.6430881056279567 0.14587763144406346 -1.181957314814752 0.034944107353970674 -1.0058810667591773 -0.68984678756000983 0.14036610686292234 -0.46329638629255598 0.70973672947754229 -0.75124637908762248 0.2219842624750458;0.54404887603458396 0.7816134536156325 -0.61644715968098018 0.33004119451896208 -0.96204969553124109 0.96246336720643844 -0.24560545594037314 -0.4413757969351037 -0.13936450497458774 -0.14565614420743056 0.22394264575030426 0.8434138552643986 0.85956729610536109 -0.42426010943595616;-0.71970550461301552 0.39646986499246573 0.36815659413203256 0.44879285359208065 0.8701855611453998 0.11165479239111181 -0.4380385953419268 -0.049154544373585657 -0.13869729988986088 -0.5753783322877889 0.074045199390358599 0.1229612170934628 -0.18926228528781164 0.45083722777398594;0.13408132924057409 0.6870001594737225 -0.27401430241884689 -0.077361573066329209 -0.48554486860229273 0.67504118482735731 0.4012648502110876 -0.67368181199504829 -0.29260123970987628 -0.019784318860256979 -0.95589747139803327 0.036431542422953614 -0.16281436578125486 -0.27063706350420569;-0.76778105808156971 0.24581251023763748 0.21241297126511854 -0.65377389586330603 -0.29491174411873733 0.22463433954280493 0.27164744737388202 -0.03629226875686925 -1.5602901948546124 -0.002308687574966533 0.071561193103968856 -0.95479789934566073 0.057173901088697354 -0.8029468372553904;-0.20312922200672054 -0.082028439082877574 0.5462493330353192 -0.59851698962445377 0.76379975443553116 -1.0405089868205029 -0.45496957574362884 -0.51691729541981435 -0.95976487203508831 0.07824835320471317 -0.52921553545043631 -0.72942385821166511 0.3160425272581055 -0.51163693371953345;-0.5734430102077146 0.13616152297354919 -0.098671287600384849 -1.1393537114795307 -0.70851804379329297 -0.4864405796609283 0.66494361664762736 -0.0095750237451885378 1.8927583798989618 -0.28741001194936422 -1.5391984074953324 0.49780842307040263 0.68348916176200003 -0.080184315256893873;0.21953684462120426 0.72907405735480368 0.0057382408296626913 0.77859409895311849 -0.02501812637493207 0.41545355759088715 -0.64617522421344786 0.078725030984514749 -1.8759083641750285 -0.30051543583847373 0.25617631595177937 -0.0389224559495224 0.42468904935392709 0.69590263345456016;-0.26668578924677144 0.98057050121740041 0.54989895782666021 -1.0495348239282856 -0.24667516804075296 0.82617304662670654 0.096198130142577887 0.1246672638964101 -1.4684032849905104 0.16122386357196883 0.35449995377548449 0.10268182405818907 -0.56677675889283619 0.15466710017545726;-0.063353898672904779 0.2521141172672976 0.46768533182480621 -0.38510321325130098 0.85568062040104764 0.15411824102184751 -0.77965070864116137 -0.17381962293490791 -0.92753428102315782 0.035374787955087444 -0.67537829735667532 0.63617490730113346 0.074269580292529752 0.017051370287785812;0.5160067671300117 -0.61562989520799105 0.38323922892458023 0.36805870867026169 0.36374584921283409 1.1075580108406264 -0.16849398074632072 0.73870765014578632 0.76278423951200058 -0.56505565962757098 0.73778145794544236 0.82030979899756673 0.35416359449684942 -0.1653723364791081;-0.49786154510615543 -0.14889168334983849 -0.70033412028385966 0.71219720993473257 0.19483388505968458 -0.078163514258486472 -0.50047753638280179 0.035119298779715341 -1.4890505018402445 0.31126650969206249 -0.88269444070220704 0.18633029948284657 -0.64050083697498428 -0.72481686104731335];

% Layer 3
b3 = 0.29410085436896977;
LW3_2 = [-0.37165380136268428 -0.59778592636184169 0.54741092077644582 0.59362445219359017 0.35802178893699238 -1.2283191701928506 -1.0411883555027563 0.6469786995487512 1.6584453783103277 1.5808743635243139 1.1875123801332859 -0.91041769030037312 -0.54037459366204454 0.34599482060540626];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 5.42005420054201;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
