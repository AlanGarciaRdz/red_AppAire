function [Y,Xf,Af] = O3oblatos8(X,~,~)
%O3OBLATOS8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:45.
% 
% [Y] = O3oblatos8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [0.81401978962210442;-0.65573978907872288;-0.45077361229702279;2.8430684192538931;0.36998192925282819;-1.1104343319026171;0.51693427151067051;1.933858434240179;1.108139460603264;-5.1185661263754554;-5.0083119950531652;-3.9848547599650024;-0.94330173608593959;1.4933308924528212];
  IW1_1 = [0.10834462449963292 2.4290507853517074 -0.20913229909306269 0.81569547470385073 0.95139399322298968 0.45662899645181432;-0.27058445302262268 -0.32585412682076265 0.016720430908997413 -1.3155214710463841 0.0377973736102242 -0.75165258408697577;1.5594754445503971 1.779436478113352 0.10611690259041572 -0.093129582745829248 -0.14667926816331153 0.27920129988325731;-0.15636588827343628 1.8495007886216628 2.4678486773813231 -1.4859763588795893 -0.82257482107223712 1.8500287885693305;1.2411644369092669 0.29521623475290359 0.40270886061637146 -1.6091396898409742 0.3800335465581865 1.0123128176123211;-0.20218010014995938 -4.6465476752070751 1.1538876896163446 -1.6544956622641305 -0.78255833395637253 -0.19855746791079068;-1.5247493669059429 -1.1397987581999574 -0.24990097747282558 0.33403428464793711 0.21819595000902814 -0.6321384690027857;-2.3737193992018164 1.3796324189050122 -0.63365537720043952 2.8954725003648076 0.043371832016305817 -0.52562345917571507;1.0594747452642175 0.33392529718023201 0.2972119714121258 0.81920797558801606 0.85904419764804441 0.64145040973851009;-2.2999336988094852 -2.0361136168977518 -2.7826836718566672 0.47250890570022336 -0.14761338959603518 -0.64090815157032521;-1.2589538558603177 -1.2001170557562619 5.833529510409587 -10.712415638111422 -0.38194383314790459 1.2890821367112719;-1.42976319689693 -3.2086688723014292 -0.28413074018630058 0.53930301189008822 -0.44105976153896609 -1.1250956567585211;1.6601859195831645 1.2715808894546614 0.92879630328964935 -2.4315413737038694 -1.9147648941400328 2.1884516232928228;2.7936905279856004 0.11786076267970787 -0.15089825991058076 0.10784734035554011 -0.30147583605353923 0.14904648753608676];
  
  % Layer 2
  b2 = [0.73921595307932952;0.74979691908634605;-1.6029843897119982;0.47902608414111497;0.028266280607721773;0.63102170635811894;0.17097252062148069;-0.64442343591573237;-0.19987702624298848;0.076198084540918115;-1.9856800442227887;1.9738679912461465;-0.19926665135490434;4.014755427620325];
  LW2_1 = [1.4844974365508232 -3.1363007044901443 4.4266070433349061 0.37935886674467245 -2.5515506694531962 2.4761452278578422 1.302747091426155 -4.0734662546291265 -5.1050802535281434 0.72784448175529515 0.90607426730896701 1.2728472376902478 -1.3255022097227143 0.30302556698587063;-2.614907934001462 1.3295358737949787 -2.6385883698840242 -0.74734856680611927 0.043134223037301994 -1.8008669254072383 -1.974858790204572 0.21787904999502683 2.4891504338701216 -1.6100062899951921 -0.0062634117892990514 1.59100412450471 0.74958516096372385 -0.18224806126373094;-1.5265648843639585 -0.014496648968884474 4.4045409545482928 0.086037466351512826 1.0895603682521005 0.50900048674401011 4.1537555525487875 -0.11087317727396331 0.80507723934858966 -1.466429409854749 2.1134432452611178 0.12684156125815688 -0.39715635945452044 0.43980271486012212;-0.72114707878895712 -0.49531687632260279 1.1983171351239708 -0.56251402802877859 -1.4279740598643187 -0.88943439544064018 1.721455995838264 0.38031962198761193 -0.29928683060726813 0.41401010394855808 -0.0055439608015275359 -2.1845816966458158 0.29211704978989367 0.48084019415941714;-1.2361707218007121 1.2023199096128132 -6.9793698508709792 -1.6770327253778201 -0.070342248041612626 -1.4797900303779501 -3.2985569389187592 1.450387789891594 2.275347737736706 -0.51722198237154671 -0.32248219155992031 -1.9108745362735577 0.96100800300546019 2.1844875031622553;-2.6602088979277108 0.27519792912430374 2.9651551724287999 -0.59917643723782577 0.76583776793124403 -2.3943840175668676 2.8995451739695568 -0.10636509823259996 1.6749702879338488 -1.2002111556134394 -0.45430716059862208 2.1259843523586475 0.013215147330836818 -1.5578535735593908;-0.99702199013918291 -0.59752261348363089 -1.1156557619460488 -0.90507881011777125 0.34445034636595817 -1.5352465441412373 0.62743564175612676 0.08389464441243219 -0.58524723884977103 0.13541374003019668 -0.031544247491429991 -1.0885432862816156 0.048938051913164679 1.4965919369542175;1.8918145161797035 -0.45832003843975427 1.4551662144298894 0.58059356337048984 0.35942690763051155 2.1060800458987701 0.84173480368706399 -0.73053788564572542 -0.36408097822559049 -1.4680159671619224 0.39473567308103369 -0.13373522080923184 0.44611617995189906 -1.0312721976969386;-1.9994760200451962 -0.18245910273500685 0.072427767303938337 -0.79167428768927961 1.4205185570376992 -1.1793956283795259 -1.305142137177663 0.22465694934790431 0.74730944101023944 -1.845397261077824 0.77471236231246787 1.5333110645680297 0.0046798184604110865 0.075660812527100885;0.75118749906910343 -0.08913300484130654 -2.0762870350654867 0.51150167118213097 1.1153636970027094 0.9692131298498271 -3.0079146832917947 -0.73388257912808175 -0.32327562803844023 -0.0053464452620483396 0.27292918510408304 2.4298374770027658 -0.69909756329637218 0.35576713916638558;-1.9481173773841596 1.4637786454487025 -4.756292886175606 -0.86817595680883741 0.022441149679717855 -2.9952791001615315 -3.3923104017600729 0.78856871194123934 1.5896071499941629 1.9127360160519655 -0.17591653353180986 -2.5614206175820264 0.25782542833655536 0.87783788381851025;-0.79318583086317473 0.031169025951369236 -1.544855133751045 0.62103142071416995 1.1173244284258852 -0.99047056604747064 0.64815976037803846 0.36358416685295325 2.1775897933696862 0.5936882201457131 0.15323863153093281 0.99470870918977938 0.59462089746850522 -0.44298252425609363;-3.0579012160961456 0.46296545672108563 -1.1415032417558553 -0.72704794626723834 0.54472394598772478 -1.7820889120634305 -1.7507683034162096 0.037145913679346047 1.9491204380315126 -0.77889061638380508 0.11453173405565879 -0.56959774693159726 0.34271711878594135 -0.62264092959609885;5.0212570943125217 2.5000944213097487 -3.569696509144122 0.94998249607976926 1.6398964269067362 -0.31168866537859286 -2.7722298411913302 0.93795033840070174 2.6038440007295716 0.2779683119073641 -0.82060496996140153 -0.9690053867441627 -0.014715154401150177 -0.42421427699645153];
  
  % Layer 3
  b3 = -2.0216563851613123;
  LW3_2 = [0.36422619407397677 0.87520426279796371 -0.2809196404198418 -2.037890595259007 -0.72872900497788251 -0.47867901030617516 1.2929982519511425 -0.78097811339661816 0.63942621211160178 -1.544645979412764 -0.67532277591540191 0.64314932777435851 -0.9226798025631654 0.80576264931721331];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
