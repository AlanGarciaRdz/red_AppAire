function [Y,Xf,Af] = PM10Centro14(X,~,~)
%PM10CENTRO14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:04.
% 
% [Y] = PM10Centro14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;3.74531835205992;0.00773694390715667;45.4545454545455;0.00462534690101758];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.273638493698745;-4.2079906704817365;-0.39180471626046237;5.9036009161132057;0.64486339484298805;0.85108334141941355;1.56069455900041;0.99580246534158634;0.60004200221057524;0.27977766858625236;5.2362114899933516;-9.8610222853593914;1.6443128523922439];
IW1_1 = [-0.37534735385642404 2.1923004732214268 -0.39783920604558215 0.54202204745286342 0.70197096477172394 0.91217905101603503 -1.178676252995007;-1.3754322848193654 0.023819622890284081 0.18403557567654558 1.6607457026375327 -4.1586249096227519 -0.47369263865553241 0.21521454629618891;-1.1870908063768422 -0.098576381825313752 -0.32461300568574453 0.16214166116347867 -0.73088417849724296 -0.36641670411190924 0.31732005660725016;-2.7524957540630313 2.5266545313824835 0.73063351744928329 -0.10875678698804965 0.31049461598096956 1.1902980451564906 -0.3600654588277632;-0.36256397971103355 0.13019719061328716 0.29020356888325716 -0.0092330159771515652 0.13523991128302423 0.33724549512534985 -0.24875381466796434;1.9909496863208842 0.28877186783724756 0.59897153889956845 -2.500783489637751 -1.4164854769260471 1.9917138175018931 -0.94622093727540568;-1.2979453821397777 -2.8448002105864032 -0.2254539045203017 -0.08658977893305389 -0.44892197498678554 0.28194676415955583 0.28737040047578438;-0.7485822212380463 -1.8502796854524581 0.092051696974328343 -0.69302662828621797 -0.84711051892564482 0.75978262482640435 0.80034535199591128;2.1266725899217427 0.98793406083702318 -0.027983738138382161 0.38816289428212469 0.26589478029601249 0.050005863448367265 -0.022935714007237526;0.62537853927359877 0.82566354152413979 -0.071437605352241876 0.1378263916956233 0.85168572478562254 0.32720458193314467 -0.53037969740956115;-4.0668230041124334 -0.03553730356427677 0.87757999187462365 -0.89425436788746171 -1.1440648582290325 1.6148957751884252 1.4603274895887188;1.2253199778981838 -0.15769947409389107 -0.75258627505066245 -4.5986148674911895 -5.1295238407516628 -0.32640102379609337 0.05734466177958647;1.8421118322097665 -0.32301100884163808 3.5812003797842999 -1.6825427730869413 -0.94374470293215307 -1.972897445399048 -0.006402892426447402];

% Layer 2
b2 = [3.6933881263971884;-5.6001077917037811;-9.3660353269319376;5.206026781294578;5.6808363729311102;-0.73087977202949639;-0.025609786875973133;10.461028474202394;3.0716345744552216;5.6930032341189616;-3.5032809678593479;2.2076217768622723;-4.77368969043326];
LW2_1 = [1.7351706926236989 0.87692326766188733 7.135926152627202 -2.3488312857863898 3.0725197950120009 1.2475394723440032 8.9948995306937647 -13.192850702876614 1.9582075468339555 -0.41177288796019162 -0.1512082233080205 1.6530491446864033 0.7457350148851678;0.71274153632571735 -6.4889665699906391 3.8058308818715485 -0.12283024616826976 -2.7115374047094205 -0.15975521784754257 -1.8846962150242146 2.7387482626450996 -0.64137990775643283 3.0762846468045471 -0.42518760883504769 0.47635047236141004 0.9519415738773952;-4.326801433143161 -1.854281444290911 -0.33461244895621506 5.9825500312071114 -0.83363197479764073 1.0196045486827805 3.4575241211424377 -6.0879716278213039 -6.3259309260207939 2.7354217205737874 -0.92944965193700468 0.27479084041225971 1.8255638009162207;-1.6947676872912185 3.9013416837554646 -3.7117533934283893 -3.5944101352346629 -6.1087683918544817 7.3697765443592056 -2.1661586257389072 1.2985806595542904 -3.0901119160097581 0.9134195986955933 -3.2179022110365323 0.045670930671312615 -1.1824329521381205;2.1238510450661616 1.3473963416190682 0.64830702995466938 -7.8560413395520969 -1.3186714838472338 3.5394089181637769 2.7765393305727448 0.10963030029287504 4.917085477676121 -3.6105145145689939 -1.1381506771610796 0.0027488664928144693 1.3295219142586459;-4.7598709829970263 -1.5303232357497278 -1.6160523050466571 -0.9634671385336846 -4.013746685046268 -1.0626343994007883 -1.2219790700290971 -2.2467642283383369 -2.1462957351173362 4.4286810084251185 -0.27106775886760714 -0.30587128916813217 1.2224163335058571;6.4470307932012334 -5.0398648856639738 3.1221248903343772 3.3357654187298551 -1.4372377895905684 -0.0380924509443002 1.8031257799379621 4.0072545310484546 2.1961029319827343 -2.2438856261436211 -0.763147111691034 -0.20778916851758134 -6.3562346639726881;10.306188275492699 4.8210587968362395 -3.9124741669915832 -1.1273898829451099 -4.4250203496972311 0.38307670789618875 11.672153735894341 -4.4455963027959928 3.2189694444148778 1.1471962922560621 -5.0732759384563462 0.58615652634133597 -6.5998675968846996;2.6613836052448292 1.7995480545696001 -7.3845649129236817 -1.5549708694547364 -2.8601674246819391 1.8528345881703132 -1.3893823678092418 -1.6805422434667148 -3.6251469062750079 -5.5341774667800463 1.2797904319850044 -0.53800862846286468 1.3688761974471999;0.441772240179369 6.776809449747546 -1.387971256417883 -1.1092865210033331 2.5119146029089858 -0.25612745938341414 0.98278341022297377 -1.9073086640170636 1.1690826482019854 -3.0967471128231865 2.2311177621856837 0.15526314181756595 -0.61942486046106215;4.0568161209061362 -3.5422145328824324 2.7036556623704548 3.7273721017203783 11.78166802035417 -2.2598752173360825 -2.4669654851869049 6.5916333247305259 -1.6401110890917672 1.6555444197310818 -10.186474218915908 2.4936991648350393 3.2117720653226542;-0.14908640290876121 -3.2942462427552583 1.279586603796149 1.3506532102572719 -1.5005837729018534 0.58473069751445705 -0.30924086295900832 -2.1420347905491579 -1.3830775260301365 -1.3536705537697933 0.92930501968583723 0.81869985459147088 -7.0813307489120279;-5.4654550777153803 0.3283558034127948 5.0123800159482688 2.8408401568073542 -1.7011005787299081 -1.3245038961689379 -1.5481551709594581 0.92235875026884628 -6.7787539408669071 11.091724037240862 -1.0796502726374868 0.086412410890839134 -1.1383617407161077];

% Layer 3
b3 = -0.71615339448857163;
LW3_2 = [-0.10156270665781596 0.27710636815419742 0.084173513408325393 0.10714018971510948 -0.20121639141694136 0.18793436548260142 0.13724513098190383 0.086772656831703293 -0.12796793804514772 0.22788725678356778 -0.10613959692971282 -0.19536814733398647 -0.12618665818491331];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
