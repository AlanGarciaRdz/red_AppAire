function [Y,Xf,Af] = SOXLasPintas16(X,~,~)
%SOXLASPINTAS16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:46.
% 
% [Y] = SOXLasPintas16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.2162117287505183;-1.7230372808531531;-0.086733035815431653;1.2715383040010193;-0.22791245380815817;-0.63017749097690312;-0.92567870017467302;-0.75441911882123214;-0.22737062433313615;-0.21331905447637103;1.4202098377154599;-1.2692623046805001;1.0410914532823641];
IW1_1 = [-1.3772361575767174 2.7872301478612505 0.75318882399453591 -2.4411827795740035 -0.64984889279701008 -0.73373305281311207 -1.8072591610998019 0.21896376232846285 -0.27108438609170521 -0.070457595004753307 -2.0371668911048291 1.0109266232679861 2.6310640895095641;0.32260816064728148 -0.72527924120869913 0.62453933123916217 0.67447450791712737 0.034517315032261534 -0.11929739684095031 0.48453868044572168 0.49517379252297816 -0.017073610962009898 0.83731431309014337 -0.018568760663496074 0.41509335738313979 0.41429462547245804;2.4508975197145784 0.26133474522309957 -1.1690716465251108 -0.29563658077331573 -0.78024571012088872 0.52908731221386429 -2.0569928941844937 -0.034475373645724727 -0.017110962349987865 0.31341095205595004 0.16693761330377896 0.44497631456610975 0.25936916509508279;-0.25151160419384405 -0.13781001653280994 0.10181478307127059 -0.12529295158164083 0.22407423745228766 -0.68905269668295299 -0.19724603579580019 -0.2016341407119609 0.24024615484947162 0.57877368266777052 -0.34144680709269593 -0.87603473301923485 -1.1031464570571803;1.1395096868879415 -0.21822017056146428 -0.44432595049822193 -0.58680294032314062 -1.1698507504442923 -0.32652438003758061 -0.20990274779074686 -0.026273676589953575 -0.23652439301258671 0.78082657821146761 -0.34595730842872141 1.1087707701941114 -0.72564323645396267;-0.48264391190971845 -0.070041869575581894 -1.0234749605017788 -2.0150665748581962 -0.67567242678039952 3.0620215223161367 0.42621658051371758 -0.36482527901965378 -0.59010934213076216 0.53698475386482891 -2.3873732508678476 0.1562466591904059 1.6553830137284851;-4.6094029491125941 1.3104331078804932 1.1400510762302818 -0.3102462931298125 1.7313661568280736 -1.3516274951272855 -1.3258745762855495 2.48805843117204 -1.8809194849597006 0.59738924364119417 -0.35685270553558401 0.83308561917200885 0.44794859926570818;4.046587874020581 0.16833770131716275 -0.49760680685565983 -0.39793722939370008 -0.825938939816387 1.7975767061764287 -0.66870368170168792 0.037354729768136134 0.13846123337479224 0.13180648399592379 0.17630160448838941 1.5879306294421403 -0.53957839837791843;0.059318913620974766 -0.76382837446460394 0.88250548941650409 0.040495968695536344 -0.85295959635320828 -1.1155849460517409 0.4329783194129343 0.051746950523959126 -0.34388833472624908 -0.08982785219051212 -1.3397488016132688 1.5143064673237039 -1.0416005932960171;-0.50914855859047936 -0.92529009268721341 1.2672728734728567 -0.65098508226313301 -0.55228035127740804 -1.0334086334340964 0.028524362512147072 0.42125000861058637 -0.48609370481699127 -0.10236669056674727 -2.000220204269719 -0.64103749124506582 2.6011084917808547;0.0065937888979070193 -0.20114328548393356 0.51095408477867155 -0.39392789498157688 -0.086464297459669326 -0.64021004908588641 0.55284286924502379 -0.19680149172102734 -0.78458936534761214 0.26638727048023519 -0.60253535975877692 -0.24383711034249494 0.18572120402614062;1.8089788428414084 -0.55395013036332352 -0.03909545625294622 1.3810289246563487 -0.43380859642552805 -0.47135654060830595 -2.2819077344083603 -0.86852261143006215 -0.097117699873846178 1.0569524815206939 0.066427215493469666 -0.40347960157418394 -2.283828975728905;-0.0084965064904014911 -2.0480273164443492 1.0147647270457616 0.10861730853359991 -1.4679025940454589 0.0204842008469849 -0.13733651758372864 3.7079514174908557 -1.9615149602809729 -0.27098545912006983 -1.3069807670255147 0.70933028509230622 0.027284562191363798];

% Layer 2
b2 = [1.5835884026151958;-1.5478572702137843;0.69974975476909651;-1.2334932844372091;-1.5260617946583108;0.42512383978789353;-0.044298013332968809;-0.50318630554853971;1.3765848750976046;1.0728643205134758;1.2538846784773467;-4.2134256502080394;1.934603925410405];
LW2_1 = [-0.31438999760209113 -0.222928549638336 -0.86636499309537995 -0.025606632261237484 0.94372264992532551 0.031647707419035678 0.16663064598736227 0.29358315325779749 -0.88096658801462646 0.1194878113351024 -0.84817985309909816 -0.049254204301397375 0.067830067288197099;0.59045475850517493 0.68669719693108522 0.48984485055273447 -0.75644513617585785 0.19489891003742787 0.15439956674387345 -0.016548797875607608 -0.55909831709850355 0.26133037107483165 -0.48101263221091184 -0.64250296697883669 0.94021330902896594 -0.09654969523584761;-0.13839755202315135 0.73994691739661167 -0.70043554065063895 -0.94005627026225203 1.2934293066129443 -0.49408355601503856 0.33218803388927914 0.20956333842657399 0.24010192864505292 -0.32229397533150916 -0.9375783626794395 0.19252268936356165 0.18534644891667998;0.25895830468726144 -0.25327505549692775 -0.51865717103958364 -0.81788356008101082 0.893209470319554 0.47443931009138723 0.20439705794913554 -0.35324985553134081 0.34554117468247253 -0.71536396364477062 -0.97377445140328156 1.0728301393138171 -0.35204405715079934;0.42981157177681167 1.3585548055686427 1.9702894974580381 -1.5133907629850178 0.80749344938767498 -0.29256069852121908 -0.2348770855609007 -1.0242754656364732 -0.081143016535735732 -0.83452864684072514 -0.37166086878831101 0.12443045717827594 -0.02079240682124537;-0.70767917145820336 -0.77377073637589466 0.042971633677951024 0.5652632035537215 0.026928638166938787 0.15274323150921498 0.1555415092854758 -0.14153552393625263 0.14957323816901474 -0.49071537173741769 0.90289311700654595 0.16513694088831277 0.046316746543506288;0.011276222291180263 0.79210411102880451 -0.21095936555539124 -0.54408186148745519 -0.27219378449965081 0.1841933930036711 0.94012616692515893 -0.093391922188970911 -0.99728155536394425 0.22751369847981484 -0.32855042968584552 -0.57558301930148581 0.068210916573618691;-0.63513543797927252 0.87194183171287765 -0.86612694602015239 0.35632050526884207 0.6754123489215621 0.64243142305238499 -0.15625788665816648 0.022596422816308373 -0.60464539943216478 -0.9254789988798221 -0.13329185896458579 0.073373935565386211 0.63111260967477656;1.4545628232999284 -1.0123409449321774 -1.7766383184502144 1.6759679678407311 0.79823583856245295 0.2408135942534621 0.059368292814595935 1.7476281749265508 0.70690811766202122 -1.7990326469321805 0.95936857857210778 -0.32640871609403088 -0.098493262980130586;-0.11461227910680655 0.27946504461744276 0.31387555183951221 0.45548194119717794 -0.025980567654090007 -0.057129563550704629 0.30714759734069563 -0.70956838633797703 -0.58332578360370246 0.54383864799043191 -0.22166952701861678 -0.64892342787991619 1.2634209230753903;0.021591840235776476 -0.092324196097563538 0.61629453989317884 0.53826249304385965 0.21641884717150237 0.36877953376711792 -0.7341425191038935 -0.63457405270961997 -0.39004531655025898 0.17910139642649708 1.0192349778361109 -0.30062114166372667 -0.088250416343247984;-3.8863518060020112 2.7464640592959251 2.4200930784886743 -3.1570927831243614 -1.7186736713173181 3.5910549594231496 -3.6491886033104408 -2.1711843214847728 -3.3319925974096698 -4.3331097600041675 -2.7644965073150769 -4.1692618458549866 2.9792783481242018;-0.12500966694820334 -0.77072049262559217 -0.3662240069674943 -0.27858912732639812 0.10264320986502268 0.69202718386331896 0.6592288368921877 -0.01385738517466642 -0.63711311052728326 -0.0011717201718720663 0.74941523587223102 -0.29622485462657616 -0.049068268891024093];

% Layer 3
b3 = 0.78609319866585758;
LW3_2 = [-0.19741945608378109 -1.6257650398044357 0.18062174171872611 0.31481120358600051 0.91788689612901719 1.2368034706153184 0.020875017417358296 -0.031180084659158128 -1.5653321701480916 0.030968436172723171 1.2669900225770898 3.4200991528688416 0.61778056909421242];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
