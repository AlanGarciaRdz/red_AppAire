function [Y,Xf,Af] = PM10Tlaquepaque19(X,~,~)
%PM10TLAQUEPAQUE19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:41.
% 
% [Y] = PM10Tlaquepaque19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.6037403221936453;-1.0721458951197913;7.0317920820729212;0.91006182157249604;-2.3256279392147463;0.62758411046262774;-1.7671095824651699;-1.9635350082696446;0.80708088966572311;-0.65968555605185875;6.1030186908857953];
IW1_1 = [-1.9756968855733148 2.8349906836176997 0.13800346487974519 -0.23071509798987139 4.5786733280976506 -1.8556360392122555 0.46703271506704647 -0.49067065451304692 -1.9782853006775447 1.7769662176395609 -1.5161866100555954;2.0678372010636998 0.6077077928618756 1.5129507574000867 -1.1335544534963045 0.91158538201345274 0.29760916423787509 0.81597258338989709 0.48967938278605483 -1.7327186524074856 -0.484834774657594 -0.71410463188914408;2.8455379183739078 0.32841900294727622 -0.28646160458133468 1.1483373935349532 1.4721786438659314 1.0938989643522372 0.15703882098786956 -0.086755991851584641 4.4807597016229952 -0.17152743825680231 -0.6018312048287161;-1.7290727158028134 -1.2034960902599861 -1.6285568787730773 -0.29736208342904619 0.95952583381231971 -1.6526959127467136 -1.787980555201871 -0.99205084918546849 -0.60805534100725445 0.39109198961498431 0.14352525687618037;-0.77472650894874506 0.72058542812005033 -0.23853715681769339 -0.63223692601470538 -3.3492373992884881 -1.1256848896132716 -0.072876751609953688 0.016503308100639338 1.41119938144292 0.13787544960065715 0.86340451266658813;-0.42640910649483216 -1.2438908909798603 0.022231853928713602 -0.12974211728764731 -0.31707597307132401 1.3833382392180091 -0.17794547752433257 0.3310327294162218 -0.42201564214021359 -0.23276562954339516 1.5054977116870325;0.002007798229501851 1.9967749183404477 -0.061709788390778508 -0.28820351934834532 -1.0311491318591155 0.90191071482974539 0.17899519254848414 0.33067655368466647 0.30995682390316442 -0.29098549838375154 0.22537090931692957;-0.43199037386698463 -0.96324815853688994 -0.91229499305911843 0.5350743086527292 -0.2172616283442779 2.1949705752316331 0.018972621149314993 0.68367051014091218 1.5410943278676037 -0.31955588973650878 -0.5630438183790023;0.079359868054213134 1.7858750840865727 -0.044503144828042476 0.52931413556478013 1.4206658872716229 -0.597793749775272 0.047145354375554595 -0.25144252461950939 -0.73418075620636292 -0.015149291619591823 -0.057292623188621397;-1.2194461492406843 -0.017275410773019167 -0.16189071503338667 -0.85060828421606061 0.043190145879902705 -0.39828473775315743 -0.14379044501779778 0.037216854884549344 -0.060251050739948173 -0.079991945865497779 0.55595575846697309;-0.20057272209081825 5.9187922399292905 0.13080139001126811 0.28322649406828904 -0.43364896883544685 1.7458071075024291 0.26407820340346605 0.24395292077289427 2.8273221986478898 -0.17014924686831431 -0.83917017156078921];

% Layer 2
b2 = [1.5598191096393608;-0.53231375248315482;-1.9896582361961479;-0.33013559209919391;-0.59449180445167304;-3.3838846401354608;-4.1931669322454876;0.89103787796750389;-5.9446475768359743;-0.91488137902168598;-0.61308795347329259];
LW2_1 = [-0.078639096111646309 0.42631372912640231 0.32240397416924882 0.15048351280133024 0.11275292989522763 -0.069247957360186518 -0.011620810395949477 -0.69371415384388857 -0.42314451462966057 0.51159400814023992 -0.13039829880101711;-0.92757709103428532 0.16084164791922403 0.40951036369276234 0.052000106692453765 -0.17989036044727588 -0.083298530736945264 0.1377031649122053 1.5465858775369492 0.99637068064753243 -0.28442188582430505 0.29799612110340407;-0.2669272366369721 -0.72022350326592655 7.9622681122111549 -0.7656077569610158 0.27018723939621214 1.1281291360886812 -1.7455229305002182 -0.20680514013497828 1.1707447357682061 5.6188173642358086 -1.2071342125326925;-1.3862370178599595 -1.0887204965601109 0.72214830460823731 -0.48028458508888033 -1.3118764653143236 -1.1504294837867755 1.5276653137762461 0.85025013375602387 1.2017222695916172 1.8290069275459704 1.6141916909197302;-0.62137823366197031 -0.4275398766448803 0.32554661698199161 -0.33840168388743463 -0.72247544249009577 -0.51936476649284546 0.38236413512699119 0.82667498968559727 -0.12938531549307247 0.90570053487154323 0.51061539220526309;-0.79035349265807775 1.7878930028249533 1.2017551596510025 2.0273685522425104 0.11491906347466183 0.6577550963472073 1.5910763132410926 -1.002768536406726 -0.5587689215074757 -1.8102068068916557 1.4598097372185317;0.90678040292127804 -0.064117476954080391 0.97100951545901504 -2.4945401617162686 0.41721194274195655 -0.12445002375273703 4.4700053749195074 0.98057155868675006 -1.3947067253745018 -2.5707310539832804 -7.6755347781144545;1.1525129911358813 -1.1243700016985403 4.1649534936437771 -1.9273177251378821 -2.1642354521430796 -2.793029362111902 -1.5684335902844821 -0.023748160554438742 -2.1473375552004703 8.4931548725214281 0.2587917974195848;1.7121530638222846 3.0928410804838764 -6.0181456056971259 0.55790324957991611 2.8332689099360309 -0.96261079034526542 -8.9279477648148244 3.616348230040316 3.9667514005783517 -3.246448819410598 -3.3497094570603485;-1.6157487663440897 0.011154355652171356 -1.0999296016478137 -0.50278497760444241 -0.032750864780564055 -0.14532284130918888 1.0529523624700157 -0.67461531765089533 -0.98762117859876752 -3.4913695771118718 0.71275304462939371;-0.50902575735805244 -0.21148265539777789 0.22535474117221718 -0.15215794563806576 -0.40083107931966 -0.22231921185602294 0.18666920461447098 0.85842236270803673 0.30835394917421249 0.26895341364061104 0.39005835821201607];

% Layer 3
b3 = 0.46942391127676802;
LW3_2 = [-3.533000432628886 1.1526415708374071 0.14027688534423743 0.14664179394300214 2.1970411015303677 0.15268416401563778 -1.3667378604621001 0.10442876035338489 0.17933068745887937 0.14821688412724443 -4.6339113129357044];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
