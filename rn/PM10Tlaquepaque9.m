function [Y,Xf,Af] = PM10Tlaquepaque9(X,~,~)
%PM10TLAQUEPAQUE9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:39.
% 
% [Y] = PM10Tlaquepaque9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.708101467932184;-3.5915054220839711;3.0899419581764493;-1.6903648096542578;1.1370004588971436;1.6827764518937585;0.85663907265992845;0.44790840534387516;-0.12788860338466687;-0.71341114817141082;0.42512210868016281;2.1523342026825398;-8.2985269981265368;-9.9530370446735965];
IW1_1 = [0.84157505897072804 -0.88962962095722997 -0.25480311867630601 -0.057855305548606045 -0.80871318317926899 -0.84480653583186405 -0.51157585355225965 0.0018756748953023539 -0.34791533670361358 0.26231959667721128 0.48379297445877895;1.846609618062018 1.6271585093522072 0.96998573158371548 0.22327167991277513 0.40877398207782661 1.040549999133551 -0.030184008534767451 0.75990888965603298 0.57323362348252971 -3.1744588880124902 -0.443687724881346;-2.4772494929224549 -0.53875484924411565 0.92086399802407659 0.51722738883179742 0.8342497959872277 0.766108654570548 0.27546200955921279 -0.40848757054091112 -0.71570514643503635 0.88625189443983599 1.6557149062353993;-0.054674013140575711 -1.0574657545210411 0.52436520981384172 -0.0039241537194406369 -1.2489880863685723 0.95039540313750392 -0.24389179476057102 0.056248363565456726 0.038003457305251905 -0.58419660611584567 0.3739059001621749;0.094987995684287022 -0.962887330635393 0.62441728238935179 -0.18814210354915212 1.0454545423541708 -0.1428310247574649 0.29001278535373043 -0.224925900341851 -0.58121248083432908 -0.39316371604629613 0.57354292215564096;1.4078611945167685 -1.4614578600374053 -0.013361530853653648 -0.022664082516124336 1.5077854927935868 -1.3778563467930707 0.3628845312590106 -0.050751503126983226 -0.25721372073160736 0.36498862238808444 0.55394815115284024;0.30293861300625863 1.2720778718445187 0.30467067625389516 0.081781759710907315 -0.71528736231043877 1.2083928732672433 -0.52689488627097325 -0.19711239550150775 0.24063566130278727 1.5181740828654666 0.61390088725597669;0.24013189919010655 0.031152629321019289 0.53063107233451456 -0.71587868158842094 1.6708125588693816 1.329695824779612 0.30697106900583493 0.20762369236810799 -1.0457183098742127 -0.56814762062679358 0.097484710657535681;1.4227018201953974 1.7957801739815151 0.32085435514041244 -1.1937213578164287 1.5505902755337146 -2.7709136184553658 0.7330271630892724 -0.74276163583511667 1.2395001326272346 0.29042454352683383 -0.60404935665029236;0.58884676525640978 0.36811249565766596 -0.0095649984728442047 -1.018561060090454 -0.45901202000078767 -0.022871615052622331 0.40556697595949831 0.41855343720222626 0.72060768552468746 -0.10665719726220646 -0.72405826367656712;-0.92115849989124932 -0.44870954273809027 0.6913280848023664 -0.12005384464256973 0.49531950060627122 0.026122853659629471 0.42379559257284083 0.0064364197381215592 0.10212858990660026 -0.57985304959274797 0.30059894024946471;-0.19997610320930509 0.45404057202520642 -0.27262814705361205 -0.84456318005101128 2.335770007315316 -1.5068225536276574 0.27868232733222487 -0.20684344680896369 -0.48342744122521003 0.4402844108653941 -0.83860987059743552;-1.167151421678827 -2.9469843468929313 1.0532036296468745 1.5314474397326279 -3.2917768155102558 -0.47233598898303975 -0.13677920472688845 -0.51849542981555841 -1.4501444643565202 -0.4761503193187297 -0.53463746355385089;-0.471253728721928 -1.1832767569041875 0.75114851501791546 0.049114864809609748 -1.6387523638482051 0.97656757464056199 0.0038413647513140742 0.15582902214418554 -7.5306373206856456 -0.81813884164989492 0.57035725364374557];

% Layer 2
b2 = [-1.6161291034813154;0.46514199774151505;4.0499518837546988;-0.29217543980731581;0.16865266454291719;-3.1912859161540315;-2.3180653150904118;-0.32433796152518413;1.6223330775218656;1.2903364864744284;-0.78917225554019932;-0.64980244435301882;1.9683471730392341;-4.1433909058213949];
LW2_1 = [5.3065824258413574 -1.1877382081930941 0.68939175745564962 3.7037733559538766 -0.47039719461433721 1.3597261420143252 2.2120382818602078 3.2678558447186985 -1.3981759583056024 1.5347701074496911 1.1607868075444165 2.1416383746781928 1.4476465467623598 -2.1296356339896549;-0.19674861286993048 -0.48021837664305039 -1.1782854255835877 -3.5270790474989941 -1.1682186857817316 -0.73008825726304727 -0.047882792358162882 0.71682831116714463 -2.163942337245409 -0.11557989042440386 2.5046355076452236 -3.7076353042291621 1.6831600573698253 -0.10455709631206918;-3.477808963042571 1.559185276079234 -1.2434395194100087 0.85075929902725345 1.7980165885449515 2.7084874413338826 0.22272428043023812 -1.1864057059791133 1.5717834754777791 -0.073945264319652704 1.0802670056016557 0.34001580520122299 -0.92313080413642279 0.18419579014169402;0.63980717366989615 -1.5145941939043963 -1.3543363297972202 -1.5947683846375658 2.8864192519184648 -2.1547686620919566 1.4296959895797132 -1.9317283421970584 -1.2270566212321672 1.430401240358975 0.79216517439227119 1.2966837643793712 -0.6733954687769631 4.555071404533602;-0.6758007929990768 1.5370842851740611 1.2322230821435265 1.6068623656598464 -2.7880253187149049 1.9947449302213729 -1.3994720937048597 1.8614843199827695 1.2398115209505902 -1.4626652104621447 -0.61499855935470393 -1.2980379392033998 0.73026480313272923 -4.6946186003870318;2.7138583037292623 2.9712474168115359 -1.9168447747886299 2.3176837794593448 2.244515321377162 -0.82650092897942629 -2.4290812949472169 -1.0445071442233358 -0.46574134078787216 0.20956622569197353 5.0414870643171605 1.4047240394337066 0.029941456695167304 -2.6673471043197452;-1.367646419358858 -0.69355919666449217 0.38470268809867314 1.0868198329404015 1.0455787797151292 -0.19248616831849497 0.39001772343398428 -0.16663348872752154 0.086193427086971225 0.95065085350241629 -1.2217085664606999 0.16998872881509305 -1.2737718754498379 0.44944049207301001;-3.1725733110868179 -1.4503827741416311 -0.90752671298149656 3.3503653056505414 -1.6695026340646935 1.4402865051292359 0.050272535642747154 -0.017951204804734652 1.0749592502357708 -0.79838066961650656 -1.0152080909300225 0.3518653419984244 -0.22631972112570953 0.43744656849835095;3.806804341569038 0.81046172559340879 -0.66102460728538359 -0.79884470435692034 -3.5697555980458282 0.99857944073256621 -0.35339372716062489 1.0644978847661501 -0.12789575008145576 -2.1332074613425211 2.0517296260501929 1.0597654754432837 0.67032089202138934 -2.2255714877631654;1.7502287705733928 -1.8664870058618763 0.48944355795062766 1.2082754111852954 0.077087584722536531 -0.11946498829498875 1.2483800094310902 0.11034562339138085 -1.3584576078387551 2.0101508115813735 -1.19407132458433 0.44859646034978873 0.12031300593226826 1.4237594609183604;-2.7539201589756868 -1.7672403146571565 -2.8809736236843504 -1.4389351366080494 -1.47208034249491 -0.31987294185959847 0.20780930424269578 0.64641668284566889 1.5407526498440169 -2.8303928994934155 1.2924856648064897 -1.5748627996664892 1.8160908341480351 -0.72739608941419909;-0.28442867007607781 1.1521000724087622 0.38738523983224449 1.7942836444792583 3.546656121048636 -3.0056028284085876 0.48858317608457508 -2.9245718687067583 0.30779992542650203 3.30655614391799 -0.092067632513332887 0.010721884451337857 0.80034734375856964 -1.9966774996625289;1.3580793403981679 1.6496425947076907 -0.095021079013321977 0.95651885775340739 -2.5846144059289218 1.363558707797202 0.34977839423738966 1.0011191820300012 0.87633090092431354 -2.9184170753545198 3.0844602798300476 1.0704779985009847 0.76311716565852428 -1.8453940396170447;0.37781016779686 -0.27735437003485935 -0.58194093759169618 2.9344448043016276 -3.5730530523703492 1.5853693691759116 -1.2270282412427789 0.16932989536605095 0.44819233918695617 -1.1441362503584998 2.7552208470397743 1.1527759607031707 0.60951580575039044 -3.0620782465539782];

% Layer 3
b3 = -1.1690704230160074;
LW3_2 = [-0.086521333328396788 0.11544668028610507 0.19207027030041515 -1.6638944528092943 -1.6376920681585847 0.15039942539267293 0.35628199982952052 0.14419773921648124 0.19179840079464211 -0.090996301112455338 -0.14048000039401964 0.11044287833503461 0.10351340203670992 -0.34764049327208407];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
