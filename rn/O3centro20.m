function [Y,Xf,Af] = O3centro20(X,~,~)
%O3CENTRO20 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:39.
% 
% [Y] = O3centro20(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.044550377244815;-3.0738112125280419;-1.3019116928476644;1.2349571468546796;-1.1134960473347588;0.66896292631542176;-1.5740687488310223;-3.0696560851208008;-1.1633126192814522;-0.4117686570262149;-0.37777948840861686;0.42011248896850018;-3.0152292788398887;-2.050278353979738];
  IW1_1 = [-0.82277828943349207 -0.55127879336392605 1.5757169051686868 -1.5498194056244292 0.70878003678953805 -0.62180084091160248;1.0025435417762141 -2.1033195580111541 0.098265412894671125 0.69791573457969891 0.21918206296413936 -0.55424719417757284;1.670801717531023 1.1181449285842955 -0.7092082698491935 1.4287565956793447 -0.25304531901943877 0.11956216343082096;-1.5467270712823364 0.035852082712644825 -0.16314061700577104 -1.4747764961689072 0.21047353715336242 -0.44906528882489039;0.88192506974087148 0.35859060667617421 -0.0086844094987697761 -1.5591480520827894 0.23372767103233461 -0.52547747504455988;-0.41963440918352379 -0.83873489383418798 -0.0072682987762138773 -2.1962872904983941 -1.1915935903229509 -1.9625122755708715;-0.62141555059935316 -2.6226253180270818 1.0503546491676408 -2.3232154872620585 -0.29224343169990086 -1.2694802843151847;-1.4459088836257981 0.1137472715214304 -0.39769883590773997 -4.4957119265512944 0.52528064791378859 -0.57252676036070915;0.061477805174116849 -5.6220316014223926 0.29794839813498653 -0.88933943978825747 -0.006909603073693326 -0.016863167311609462;-1.5811810734320231 -0.87678093771953047 0.31851795361796098 -0.13683704947753444 0.044771406565750863 -1.941662386068352;-0.2524998333609268 4.7931116964060392 -1.8567576750172812 0.82225972692045302 -0.52071771373931708 -0.29149639705172997;1.7757783452720628 -0.38769272604526234 0.15824749609169431 -0.6100501187237094 0.00015125942897818365 -0.095359018370377122;1.2409941149358501 -1.7797508179441293 2.7009784110571626 -2.6436037377670418 2.9247311964613179 -3.4909186321459269;-0.061378248114172043 0.87163088419819923 0.48033001950157228 1.8674941791827382 -0.44594482523018508 -0.037030632712137648];
  
  % Layer 2
  b2 = [1.2835979877457531;1.1218162391282991;1.5551082300993946;1.5211013041615093;-1.264916430508602;0.63834823841388333;0.85781398811633414;-1.3622938754424578;-0.041092949130394331;0.67489013596839498;0.18146101861954794;-1.2286968544585797;1.9314114302067154;-2.3583199302737068];
  LW2_1 = [-0.55273210963968777 2.5429071848591667 -0.15947642530476991 -0.0069515705713069365 1.2511933046187349 -1.0752101255401278 -0.063690348084485732 -0.57862766403273103 0.21836523695690052 -0.36797140906605763 -0.22429857614352619 3.1631236078048173 -0.21842315099633328 1.1132553818064697;-0.450401478162058 0.5288688903949833 0.14562156638712639 -1.7433366595192867 1.116863104885768 -0.29006404068312125 -0.7340172372239091 1.8221213157436029 0.93005625484448884 -0.91142596880132509 -0.14756012036242944 1.2960332680729978 1.4007021941092279 0.85856048821038122;-0.51364087767163458 0.75488172931290909 -0.79188344261875543 -0.32417838663905502 -2.7709088963039741 0.94294309792117292 -1.1005560554164704 0.10386171850394368 -0.95622530630460234 0.078429203509772852 -0.87149239603311812 1.9322582719892041 0.52571260460385394 0.36354299880678526;-0.16847202644367351 -0.41950531348785913 -0.81622707209280776 0.62858079177906911 1.1820379852647311 0.70925815993174379 -0.36466181311428453 -0.94066163421700422 -0.41673182705756517 -0.407088348415236 1.7633534574729013 0.33871200149947511 0.1497770556403821 -1.0110806611080883;0.39068099783430632 0.81427443883135708 0.52234361555203757 -0.48225623599572187 1.3507175101356677 -0.12969333604412128 -1.3872662270216378 1.5607195623289605 -0.60290117413180355 -0.23893490022343133 -2.0979687558891302 1.2499350835183489 1.1950455775133093 0.16120209649927547;-0.53222587214769257 -0.65728004595775846 -0.1939463655894981 0.87757607060379128 -1.8827499562049497 0.40486206132577118 -0.38613574242333615 1.0188042005998414 -0.33363991659320125 -0.011862543520242533 -1.8111213078160255 2.6855210896153463 1.9582810753732345 -0.52746061793460786;0.70888139849593268 -0.73735017028764571 0.82202610474403681 -0.76553756414466811 0.27749197093018851 1.3290712273079375 -0.49720980691568373 1.600108946118374 -2.3980616015007654 1.1470942115608826 1.0437263937572834 0.11395277717009369 -0.096621710819036449 -1.1826387961644671;0.064912822026380101 0.15823535556503526 0.43171378176316333 1.9657017822573934 3.1972258680947885 -0.82018883856061486 1.4048885540408005 -0.10304329367697242 0.54569292811717796 -0.36239238262862417 0.40364620719964817 -2.294713025261458 -0.82418135380282753 0.63658641226368762;0.20262277357966046 -0.69597059989477483 0.44791320208671076 1.3250703068419871 -0.839676068088554 0.14981393956754077 0.18759566171826758 -0.033400290259035036 -0.88605650853781137 0.24857253741391691 -0.53006073173932344 -0.91897103940030089 0.0088861524227420614 0.79444172052923978;0.44008819006026256 -1.6667534774790347 1.7487596241132586 0.34088940664275624 -1.0821365485747738 1.5207238581822529 -0.7284454703361013 -0.726803741457129 -2.1257728193434833 -0.08966738534405698 -0.54477227599705835 0.4538647309103761 0.48617228065936141 -0.56981134988639448;-1.2500028355942066 0.53029216122775613 2.9075249226312789 0.1268188223569961 1.8866923671908113 -0.19532276035379237 0.96209381485242307 0.89862890220934577 -1.8658541699290199 1.2345250175881048 -2.4995358520129782 1.1926148334648374 0.61223273653307264 0.46524372513112278;0.064227089778683716 -0.024594800517903366 -0.85689436630599536 -2.2268043877999548 0.76992237053235457 -0.43685353030322238 -0.47637625981693404 0.93232339062824221 1.7963740560466266 0.50739610829038984 0.81798535072440548 0.35470086137555124 -0.20743470000533676 -0.23764720156781596;0.55111501783850814 0.56377841208659885 -0.70576744701202054 0.71358042584923143 0.87055645125512604 0.15566132767596724 -1.1921131927606095 -1.2820469382625079 -0.63765132903477706 -0.01725771295057317 -0.15664998946104244 0.51134886615091613 0.53970656948272078 -0.64799647560392726;-1.8713041858394814 0.34024840604031104 -1.0235984486922596 0.10764110904150492 0.074528248528053759 -0.68860337455690412 -0.025240725410642637 2.4802077897363102 0.19068459146707523 -1.6752016985210807 -0.31403001928901031 1.7647775433838473 0.15659736644918587 -0.10116454274613947];
  
  % Layer 3
  b3 = 0.21402278734223834;
  LW3_2 = [1.2804099371497033 -1.3820454677972791 1.5468714314235756 1.0807732165634376 1.7573895571739246 0.25958811288688366 0.17028078124877188 1.3822986962307844 0.95062779797409547 1.7302545783384833 -0.55910876856009362 2.2970428855980614 -1.1731950915386553 0.44330600627510897];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
