function [Y,Xf,Af] = SOXLomaDorada23(X,~,~)
%SOXLOMADORADA23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:34.
% 
% [Y] = SOXLomaDorada23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [9.3215111496576917;-2.9626348384600609;5.9280792322511804;-5.5911693273312517;5.4130204955203611;2.7761538087501498;0.022167792447503443;2.6535481455381369;1.8053646500769625;-6.8155594445141041;1.620293065767185];
IW1_1 = [-1.7549710566695655 0.47352784385607244 4.2001014686341929 2.2343367922857609 -1.3151182409144204 4.9766998292634259 0.4851035212098575 -2.2446389565841685 0.51183964566773033 4.8001613264789311 -1.3821062666804453;-0.16431694223267493 0.20268589462356737 0.72563215673106529 -0.47920139533542944 -1.4083856261903849 -0.61202096755137436 -0.058514050288881014 0.16118325822244922 0.39128130366044733 1.3520244555288103 0.11561676133055312;-6.2390870653176229 1.3244002112628885 -0.58295483641959012 0.26989008381943208 0.91931646986269722 4.37547234857022 2.0124308331076071 4.0325265025704349 -0.12074911897805524 2.2522504809005586 -0.77322336677351089;3.0250007369063883 -0.60501082710494036 0.85916515826924778 -0.8333692334420213 -3.5261703950666043 0.93626248705901116 -1.6309200473726495 1.7702368256654601 -0.13852868417717756 2.2911555508590298 -1.14612964319563;-0.11234678630456338 -1.6356088322376938 1.8779426142301359 0.1624924387147211 0.7420170750731131 -0.0043696816858795895 -0.46354165874078634 4.4505576032776917 2.6257470303941237 5.2272437726739724 1.1950789604088297;-11.061691325007153 0.27033699123064225 0.71551293224648693 0.94019242415796156 -1.3335715946830851 6.2091133743070435 2.0750848151771955 2.2174400617843646 0.22243447185527124 3.3361515810065598 -4.7356198399694209;1.1165980088502918 0.064745077081289043 -0.16894322220308364 -0.027793395631163155 0.6159708583599669 -1.2231602158609074 0.012309709495439802 -1.0803958143589021 0.21398615204009688 -0.15320898265228225 1.0631278927475438;2.2012822487804518 0.67095158027759161 0.89259297700602303 -1.1139018088011445 -0.84579117508372681 7.1252854957418705 3.8643909121666704 8.6580554269082484 0.96057874313731229 7.6102399477742662 0.63170187916407505;3.6740939263597912 0.074589723640023933 -0.28333618125932908 -0.27901277524051582 -0.37392331575664656 0.029345563113613318 0.99963747514705703 0.22848973755041235 -0.35709551342052526 -0.43549644277872129 -0.04865044232334946;1.1231196479593484 0.11445782159291477 -5.2112952631296166 -1.7729253767257322 -2.2926723941615319 -2.5733711876827248 2.6036759130653921 0.42017473902024643 0.33963758381306053 -0.89817671750154915 1.1085502548433639;-19.682079461894212 -1.0324139058569171 -4.8578880287199881 -2.6517520112380084 1.5878214755394429 -8.2366070821453672 3.793848744983622 3.4290032579912091 -1.080368963476116 4.4770223063017243 -0.47893514068947241];

% Layer 2
b2 = [2.3475781341786135;-0.0033360132393558117;1.0073424191222138;-1.7378896332598579;-0.33122694146936621;0.1862460464091549;2.6199810192246433;-0.83491890976909244;-0.31716413484991468;-5.620421056479266;-2.7433678428307098];
LW2_1 = [0.20944815755729804 2.4267334117480956 -0.17196255073375513 -7.3351374458338832 6.6783536668340497 3.0638923922193118 -2.1681911563878051 -2.2558837450440929 5.963827098908256 2.9047324818329456 2.2536839987289685;-1.8564587430496282 0.9112491046252652 0.57601269280704825 0.23111135380970146 -0.056162667623232659 1.6270180043836353 2.5255966261980181 -0.10410314823073977 -1.8456279250930132 -3.1546289784725197 -1.2920094281785386;-0.21316265898298958 0.93561712448092704 0.17711059187527578 7.26555891569034 -6.6203220577789157 -3.0381233777764431 2.1470594774835452 2.2264337654952517 -2.8936580468632611 -2.8860042027576815 0.79540465817968653;-0.74916788763946918 3.3467533197750723 0.79260523838858576 0.28901461090916952 0.20606677217759134 1.1925521696563328 -1.1163608276626142 -0.52024908296707983 0.79615355794598441 1.0735808403659786 -3.106841259607561;-1.8537117310248024 0.6482477135844753 0.6510206218596376 0.085034252698779123 -0.049066912209613789 0.6982064486583246 2.4583635742238972 0.011741554009111234 -1.6983411284276944 -3.1562016957878583 -0.56975128320453527;1.8623432001984572 -0.75162435797258653 -0.6106971246363404 -0.15225714539384372 0.051968480580166079 -1.2004838817870764 -2.5229965825784149 0.038966482579587271 1.7738527539640694 3.168154816814392 0.9578681932962495;0.97458609911553484 -0.95563478191985207 -0.66295324252775911 -0.30106436035160894 -0.011745244542619417 -1.6492424836176582 -1.0365609683024619 0.29191906547983637 0.041241978207842728 1.1322783918202972 2.0073592112910656;0.53189662578172736 0.56568095602518009 0.24177344423873914 0.87670601155572425 -1.756850707032352 0.94467280161334877 2.3580757740180087 -0.31076203128981095 0.83211668872013766 -1.1517106457215558 -0.041048101079406374;0.46005424920607507 2.0454633692532806 0.29688972822790083 -2.0799610469043373 -0.5099780595834893 3.3751817753015336 -0.68263597856159142 -1.1155525422291852 0.055517677083532613 -1.1393868607155515 -5.1816129854978614;-2.0430353978205322 1.8124533295878003 7.9461098544336997 3.7881773833304435 0.62246501411046973 -1.9132880405822013 1.9414942289489177 -1.8432675719323126 -1.8083643798435147 -0.021787503862460256 -0.45019298314552775;-0.58010279732061143 0.34451094637526142 -3.9972765042256673 0.20018974989766042 0.8210467548540239 -0.39125716909635122 0.53965546665203079 0.28506058915263816 -0.37259117665172287 -1.2560779114368879 0.22875578846792363];

% Layer 3
b3 = 1.0648619052685047;
LW3_2 = [3.3015841033492674 -4.2115952005142034 3.3200114498577196 -0.50828243110604721 -4.3829766729656106 -8.5297327528390756 -1.8176871187286439 -0.030553841419182333 0.042603627280674357 0.80432153880241097 -0.034506705082805338];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
