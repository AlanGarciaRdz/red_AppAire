function [Y,Xf,Af] = COAtemajac6(X,~,~)
%COATEMAJAC6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:23.
% 
% [Y] = COAtemajac6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.85855013123665991;1.7866707974925911;-1.1377760253311207;-0.079397745453718013;0.36403552683233714;0.84799819589079162;0.1832906782253905;1.9867454074950219;0.68953286334078723;1.0047710106638481;-0.38206160366603487;1.3666416828517933;2.2778902354836932;1.3635323328373501];
IW1_1 = [0.33171220916666477 -0.75726813386040537 -0.058008058539157081 -0.036703377152853114 -0.11321996151235025 0.16120826108483921 -0.24558135815992069 0.16903331975688035 0.062192708459380838 -0.072780039759475779;-0.18911601733381936 -1.3741225456629456 0.75774235680158231 0.18872731215040736 -0.20755300576867994 -0.19783930584048678 -0.81489682870905633 0.24492325489744082 -0.22088292206487506 1.0034016982230993;0.55369726220686677 0.92784427487832821 0.11553477902868675 0.34350690612267881 0.34396910683096177 0.29228451174173631 0.68541403825058955 -0.70062404372763765 0.77405156217992288 -0.73922797586858791;1.5572653106688938 0.11615692577712995 0.57949641547961217 -1.2897275364471135 -0.42615030294795386 0.84532174765307311 0.67936229206974252 -0.23696048737086592 0.49899166645949233 0.89833078675437794;-1.1651581697000131 -2.7948288212527763 2.0420474044449421 0.10734583189745711 -1.0529737332698745 -0.49256745512601313 -1.5130075941098855 -1.8244014361155187 -0.36983460429592441 -1.1157833691098205;-1.5573991243546403 -0.3288622706587751 -1.0629106452932426 -0.63594406205864917 0.19104500466817892 1.294054591210736 0.44235789496771583 0.40871312337791488 0.044888568180755775 0.3356518241837077;-1.3972043752816223 -1.7868169633319857 -0.028185681602846152 0.3577593185816767 0.15909639970903536 -0.50550944145269039 -0.26988323700172956 0.54824764470428677 0.30883228069016677 0.52591469556732984;0.95574519848896788 -1.5148861197074235 -0.15625209962344877 0.58929940499086697 -0.26426776486278369 1.5043505689368235 -0.32495830523568342 0.6488057337010612 1.0877605344636989 -0.10573744409056691;0.67065202167617821 -1.7694710800757276 0.68203916989614777 0.24676314313886943 0.057386169197492377 1.0582036578704799 -0.60692331214201667 -1.0393855787089759 0.089725787272618429 -0.36521839513362786;0.91272908019592647 -1.9862853049147899 0.049995375639485543 0.62620558911690283 -0.1521791424484395 -0.037306237513214248 0.53789344986420373 0.025654133890096246 -0.66507692517182893 0.73441258532725806;-0.25164929047089135 -0.57099556014709962 -0.3070862139750753 -0.16283800384745928 0.092253757177253246 -0.93524384835937646 -0.94633925932043594 0.32535766413268108 0.58802077394860508 0.32673952479190965;1.7551962289181045 -0.18350993851449041 0.64897672677450047 -0.16963608006353761 -0.2881809901370852 0.5800869653894436 -0.73886087870845707 -0.40118001510550189 0.19916005981302154 -0.1781731873749095;0.36426917572755169 4.1103801893963006 -0.46233466426348607 0.15416193315692456 0.12235675596027505 -0.58561493882991777 -0.084735263998560517 -0.47275167022092512 0.01178615648997371 0.02648158593699107;-0.031006151923264714 2.8683104731296307 0.85530323773133032 -0.30897520052002364 -0.14768153724014396 1.2667401631969633 0.17069582219646404 -0.1512192816744663 -0.15286327046763107 -0.86093520234615928];

% Layer 2
b2 = [2.4279983798734586;4.5461288487056217;-1.4463999273631656;-0.70874036951851116;-0.41759392982656085;1.1636309573228174;0.67180556376518707;-0.060857822620090249;-0.95162299452557231;1.9867769401793123;1.9503311521661741;1.7098396879355748;2.2448920591442239;-1.3845454408545006];
LW2_1 = [-1.3407295874345775 -0.087125578184926361 -1.3054706734691139 -1.0726546153846481 -1.1428934659718042 2.2279204295636301 -1.6892131586008083 1.1853133192300294 0.59399921319558691 -0.38382993781725872 -1.5731823325897345 0.90988163634382269 -1.1843341410611561 -1.6283451835414122;1.0340260763479214 -1.0674244158746777 -0.99815332313417326 1.0455838620250271 -1.0113039351877677 1.6164006359968885 -0.25206186460164182 0.065947053938442857 0.80131612346393888 1.3126032452795748 0.93067525474844348 1.0257362161693966 -0.75001613825356894 -0.62768511884952671;-0.77093197441628891 -1.3081506519137946 0.16521430633134812 -0.015139828786236969 1.0509088978402232 -0.38199180675118799 -0.62983386850626022 1.1867429727798571 1.098894553257717 1.2149919150714086 0.9338744801376383 -0.72790785756990628 0.11313000215414735 0.6664831995747833;0.74838506016438056 1.230655591752839 1.1535180764171451 -0.31693839003761354 -0.95132656841730812 -0.67112137171217512 0.48625337269179253 -0.11325629858881366 -0.27428878680289626 0.72199514080888327 0.26434302324757042 0.45494247867068893 0.65950068751983659 0.50618807033737767;-0.88524702499877117 0.48612114423256131 -0.98103996638570956 0.47794774367990839 -0.54599100665880196 0.5362475414222263 0.59714594451647462 -0.60099307846233407 -1.1906409078541567 -0.45057853803503944 -0.15175328123499823 1.1131632066898649 -0.0752722082189268 -0.4766112187183123;1.0966415539899861 -0.29000220623577516 -1.5777344917749112 0.66927958377376129 -0.11377698067757946 -0.28504968419400084 -0.75521478056121638 0.10087367183301826 0.6979950369191239 0.844634485740686 0.022325137554237703 0.46149873380885043 1.7757139225154386 0.55951866102182246;-0.26021767243519933 -0.81261151330188963 -0.89775858566325517 0.63648431876471689 -0.3096838499058176 0.99559714299947499 0.086817692585473588 -0.80518016390002789 -0.29832682467064192 -0.19675108367241292 -0.99782349392552117 1.408593715391359 1.1995234625526066 -0.72153575560402061;-2.3887870891715695 -0.92307010645535315 -0.5787284171759125 0.93914312921965393 0.95959291264591184 0.29757936430828874 0.76808296446638658 -1.0201527783279978 -0.97579583488409538 -1.5239386105913295 -0.56619658117583516 0.69262934119400832 -1.3955117714764576 -0.11612872285668477;0.49524820284979393 -1.4780190631462944 0.9091354671713876 -0.77349149730216504 0.94756136696182636 -0.59702151493207523 -1.3270019347813076 2.3462317850616108 0.62586608197954463 -0.27666988010367372 0.41259381225491398 -1.3927665682019854 -2.2103631632542031 -0.58741448520418715;1.1657224937929132 1.6889494142485642 0.23326880455060389 -0.17345665718102965 -1.2566759810841681 0.62156716041718041 0.57630979865641641 -1.2462419555773454 -0.98521274482005672 -1.4164230237057427 -1.1116637803584439 0.55394433936424936 -0.16768394303913634 -0.98307519563338119;0.91856982573009827 0.40158976801614182 -0.10711042988393125 0.24436214166876094 -0.64538408526039259 0.47862377362155312 -0.19626479336740854 -0.75591152389693161 -0.8867340194182094 -0.59401284169755797 -1.0178823243249506 0.75449681789381906 0.79415641997642528 -0.33675284983096487;0.010805540539922741 -1.5060165788288766 0.58236597457172468 -0.11478825296419103 0.83637143568123651 1.4351676266598257 -1.7153882242027276 0.6345222293770405 1.1967650030992156 -0.37127773527705171 0.10229566990602702 -1.2712398014963149 1.6119358977618483 -1.5277869231123637;-0.3383246560218991 -1.3518903905813888 -0.078342283831509346 0.095959145267940707 -0.12900743470400564 0.12600259639540468 -0.66360841899878387 0.56300722832215599 0.24588602772727672 0.74020793042519928 0.62009079961191416 0.11247177375512514 1.0386796455410883 0.68748450996041854;2.0661456181313502 1.1341976618987171 -1.0187897516895581 0.21971682875840309 1.302294518442273 -1.9080931094340694 -0.28847882163482907 -0.36623709512995856 -0.68582504624283402 -1.4417627681548015 -0.96951828757608016 -1.8492710564674686 -0.50895539690989433 0.2586197777740572];

% Layer 3
b3 = -0.32425463279248901;
LW3_2 = [-1.7247332398146036 -2.6069527849697587 -2.9260953223030772 -0.18938244530892601 -0.68322888125548942 -1.0344905809984581 1.124163217162778 -0.13986653395772358 0.56055022189892867 -2.1592989772584565 -1.4353018511710296 -0.1523767948570188 3.008011444251542 -2.6326907671296462];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
