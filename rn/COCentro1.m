function [Y,Xf,Af] = COCentro1(X,~,~)
%COCENTRO1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:29.
% 
% [Y] = COCentro1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1923777086445391;0.65312612861060082;0.38857654661660329;-1.0704506079708573;-2.5261437142091072;2.7564118448531953;0.49614412472174357;-1.9043063612792228;-1.5027945225479515;0.77651815832655269;-0.50269190840486699;-1.9026145653996693;1.6979630778255823];
IW1_1 = [-0.13627443595057931 -0.32347185267581574 0.021121739954383732 0.15248677084771414 -0.06827039379509707 -0.4454225012021884 -2.4608804098059003 -0.67612987925905477 -1.1389051588939203 -0.86058949580995869;0.046438853828713766 2.1852450880594221 0.33620318247323422 -1.265610523991201 0.16669995197463486 -0.11106594610328456 -0.11310794021863455 0.28399472649759772 0.26364317444369567 0.94053554683433194;0.057013438956172099 1.0949948205384568 0.15473728860380406 0.03086369372198032 -0.17449181485171619 -0.013498688526069315 0.020425116955848543 0.21521540782353046 0.57348900822017113 -0.028415250877455649;0.14487150776917362 1.0458542986083819 0.36961309324592034 -0.41852575866502334 -0.42454544797266519 -0.070538607577141019 -0.014874602977367986 0.21061958718789134 -0.79669634188603344 0.75024080189280318;0.81253892798309313 -0.88383898097122415 0.20778325659939759 -1.8212115644885787 0.18635149673761991 -0.18543708042263882 0.12135675488130944 -0.50906452396166091 0.22599027143729103 1.0072539141929333;-1.7371354413776814 0.080647907150969408 1.6174204153501515 -0.53487216618380096 0.20016435102325061 0.19048287320008317 -0.2384337278764197 0.20929216382876753 -0.81814247997109735 -0.88682416301683253;0.068495636643921998 -0.71028401988590273 -0.028596602009363446 0.21442228532654986 -0.12931285443158561 0.040047610580320567 -0.0084969172512357853 -0.18737875847534083 0.39299262769048565 0.32084974673849653;-0.17168838320467017 -2.5217033407258804 0.27470341051460312 -1.615750968806829 -0.031758356185773023 0.02356451785718237 -0.094253687244118298 0.24165035231700208 0.72814788204389735 0.81002070966464712;-1.3335539516762456 0.28961081652143428 0.26220660952883751 0.20370583356504859 -0.058070104648649395 -0.19120636582155387 -0.073232271870861815 -0.2777703191972386 0.45877114702850502 0.48920086699912874;0.34513153187618401 0.0028657663669115971 -0.074952212142787869 0.39560981464964012 -0.38328150042746645 -0.29105863385436437 -0.52260127506865839 -0.4922936751837268 -0.98729201204499573 -0.45294360703850783;0.015551577243438638 -0.26436073051541492 -0.24870640274523625 0.47007370515853408 0.24513141945461195 0.075682448318162537 -0.0077490389997497957 -0.19419819333012042 -0.73814475853455475 -0.3480184498559305;-0.43270749377266282 -0.84556029594362236 0.22075981241175763 -1.9352861779669119 0.59671687242910432 -0.078628312383840659 0.0083191624936888378 0.38897062297564422 0.54579910535904497 -0.039545268281618098;1.396398950348162 -0.098719303774147865 -1.5389004296732713 -0.097361896103614454 -0.67499692381330834 0.27464249602711921 0.36327490395073531 0.52775910239533341 -0.35519805641866348 -0.98138287553529779];

% Layer 2
b2 = [-1.7564734093091028;1.8065639434560903;1.4468578387295317;0.60725944456215586;-0.54760762804285057;0.37296763136624655;0.87124441462042668;-0.42694963677113501;0.48072523020269425;0.95929130042510025;0.00027455211646290265;-1.6841105567659935;-2.058496145960286];
LW2_1 = [0.62309619314303211 3.0131674764174607 1.0424877831307771 -0.89653527254011944 -2.1746820329671332 -1.0394079258543738 0.00029322589020367232 -1.9389566519289259 0.04120910019843288 -0.90125410667579486 0.49821940712968465 -1.5977584641318079 -0.16400030801196802;-0.9478221069949645 -2.7475134487422173 -1.0069685884563835 1.1088464387319992 1.546813917794998 0.714852059903199 -0.31152522061802512 2.5369924062098037 -1.06094412566123 0.29926541424346742 -0.046488605300945764 0.68531894093349233 -0.30237805704298049;-0.1876932296819375 0.27708590161096258 1.8186982649225905 -1.9671919996397373 0.89004625518389491 -0.035330016724468206 0.38796997712498016 -0.48693163683721435 -0.65845032120679448 -0.30145734737918761 -1.5337632470125464 -1.1694301802377407 -0.6291628949811382;-0.68390851188064739 0.1151240674266741 -0.19108805937408729 -1.2185747868166246 -0.66124273716269866 0.31176617832146386 -0.80452371857986926 0.34601703642659498 0.28503529623688151 0.48819606018106021 -0.56234411638134452 0.82735921397595991 -0.46464117294498458;1.2242768954858927 -0.55033648076734498 0.013023610456623813 1.2693891721384645 -0.02778941358550659 -1.1629925780218808 0.65962393190508362 -0.062996624964595779 -0.96476601139201168 -0.12495545816392781 0.018397164663114626 -0.37903951072892705 0.024452053950548967;-0.62884224855183657 0.67985310908866681 0.49234614269780358 0.82854136059097838 0.90142489196328213 -0.9967133856729995 0.49990190863220463 -0.28459261842788436 1.0807978998926664 1.5936454032495637 -0.31544484781433901 -1.4538176205868161 -0.77372706216306164;1.2694662901103755 0.078345753562958143 0.47796838216960924 0.20820596549195361 1.2418310829113024 -0.85857283679685603 0.63648978018514435 -0.38127762347183569 -1.2168434305529947 -1.1030428710218392 0.2461200641511693 -0.59402883064259449 0.065395749763936264;-0.11955358197039524 -0.24463015764043711 0.74887677252188045 1.0152920638080754 1.191796508293901 1.3044518317262073 0.96070199615926588 -0.68693059837614368 0.060467146761785544 -0.51980155978877152 1.1840140261644307 -0.80705156915402154 0.57497813992169844;0.23136892515392163 0.68617123441004613 3.7667154975952082 -0.42404839070583555 0.61803128360632065 -1.9701263249678111 0.96123399926058894 0.26081723712027521 -0.68950844334214034 0.62682081895433905 0.5140283220379479 -2.1464602231973227 0.9752193840410579;0.64899232662029649 0.63248251014351042 -0.81111876231089375 -0.87548892693013358 0.12989355733928667 0.055930158279004445 -0.83711384123766175 -0.97065845077782698 0.3530384737277073 0.43250898214590922 0.52726863461038187 -0.15010826788650969 -0.064521626309906627;0.5678266358929136 0.35644682572792896 0.30962553012015159 0.36082869602993872 0.95510191958731028 -0.031857185684007291 1.2573791869364654 -0.41130545646772243 -0.86123717984194748 -0.72175420590357764 0.82905661215833892 0.21815433425310007 0.43979367263590896;-0.33484841353772404 -0.23689627815712705 0.42816034928471003 -0.97834084018979062 -0.76942134953795638 0.11540123448072549 -1.4547419011921372 0.40361408139540361 1.0707423919761729 0.10038832200643293 -1.2891214791875631 -0.99803280364643321 0.49292162565917497;-0.87922951866904875 -1.4122244437373057 0.16906420136566805 0.64293646176858532 0.17119374734991544 0.82233043498142633 -0.22889483517385134 0.4268074840260826 0.15934273542343302 0.20873536001304333 -0.91052984165730189 0.32588006141279602 0.57539476796484257];

% Layer 3
b3 = -0.59465890549889211;
LW3_2 = [-1.1393563103505135 -1.1204044294089264 0.81164044415411318 2.0139657702429625 1.0670668670729535 0.52562020866153114 -1.9834943940059717 0.51209002698682771 0.32809238727910067 -0.59612472431918839 1.8435745393591398 0.63836142093200454 -0.62656558038990839];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
