function [Y,Xf,Af] = SOXTlaquepaque10(X,~,~)
%SOXTLAQUEPAQUE10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:59.
% 
% [Y] = SOXTlaquepaque10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;3.03490136570561;14.7058823529412;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;35.0877192982456;117.647058823529;27.7777777777778;5.12820512820513];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.9268586388579863;-1.4086860941174562;2.0038089241787813;-0.95228465454207445;-1.4437792224457313;-0.41016127928677548;-0.83762131300506804;-0.33185467131424529;-0.06154849281750472;0.067032033504540317;1.6960219905950336;-0.13348369151283884;2.4342044142937889;2.0747696325505491;-3.4758582993122138];
IW1_1 = [-0.34058355997902945 0.23234151505858727 -0.73252091236313555 -0.079337857193826092 -1.005877616863277 -0.36292671269014187 -0.49015684107455237 0.089508228731933037 0.3523556805675041 -0.19874878487639766 -0.11674224891912167 0.11541615521596885 0.058852776167731963 -0.55402523391298841 -0.44332394060790575;4.0152020479235606 -0.48380072118460765 -2.0206396117004397 1.5616307444766038 0.017286310393617693 0.026246530115466231 0.18532166772347186 0.40082633866384909 0.10580573806400355 0.59493154656383729 -0.028378485529047776 -0.91377777785310366 0.021454520302841583 1.0739557623337173 -0.27916809698685191;-3.4795966671613545 -0.8424018769128061 -0.085720009153226445 0.59835107431308665 -0.22800156228160509 -0.79025887398430017 0.80715890487986364 0.081021732536618582 -0.80948439696161378 -0.27953069661825236 -0.044706088742785574 -0.61918124439030331 0.43576121410050439 1.1650343830384922 -0.39827502941815468;-0.39248137752966206 0.12741925300701598 0.1667459787492851 -0.23566410323833864 -0.20537925972819052 0.49954657075206887 -0.29586147344884794 -0.41301321183145723 0.26086135396145432 -0.23562375701459268 -0.039480981218391005 0.47598460160744333 0.13997114732121974 0.25552593239767979 -0.2607986846038553;0.72644774459536221 0.86459784319062982 -1.7779030383493231 -0.7050107907438905 -0.13191514150103362 -0.41094805388966443 1.0088477208189752 0.55409063171247719 -0.93614387589403025 -0.23789465935109982 -0.1193675312946845 -0.061580818566092238 -0.087178189177627652 -0.31438705312419141 0.5412806848810916;-0.55702137750600511 0.43859404730573481 -0.2249098114053362 0.080420228901949262 -1.4945493317217227 -0.83537942463954562 0.7203993799279973 -0.26975349350966527 0.58876009662623763 -0.50762498668053069 0.44190687070236379 -1.1630501902431405 0.30503505807982639 -0.26551390241985284 0.33670134139501889;-0.7733327889137761 -1.0899075218664114 0.50126795822817416 0.0089682926660535275 -1.0163956742878071 -0.96734287290976906 -0.39168119940071189 -0.016921349356684143 -0.39066352523635522 -0.42947205342768224 0.87552290524239662 0.40986501249998597 0.78878511670582696 -0.400422228902795 0.28550645993581741;-0.051356358670418684 -0.58556900366820019 -1.2953188934395228 1.0093344557559818 -0.15809305074854041 -1.4051139920308475 1.3167122822283326 0.27515963933773957 -0.49203870146850781 0.054152325654499893 -0.097502473781320459 2.4897182167071357 -0.085766716834678444 1.7565481105074376 -0.60399880857726085;2.8880386751852254 -0.35700517298867579 0.12080220555290583 0.31626159324368047 -1.3150554422931107 -1.9323027531906485 -2.1822576523046089 1.5766749453466891 1.8834210182530229 0.23199303809576727 0.35771754479561374 -0.18773998850689957 -0.75658645622581255 1.4975452869961658 -0.2922093398267227;-0.53080396224821225 -1.0644196461340567 -0.30816920949616899 0.478010171591704 0.75354629383326532 0.42469423772558762 -0.24299462901762592 -0.25050506469303341 -0.89096745273472466 -0.13361133125213803 0.23949661210192727 -0.722155288283441 -0.31734606373034302 -1.1601169077966806 -0.94297140110773725;0.51085204167564047 3.3763087415338031 -0.0045474534183643778 -0.456556320250252 1.1620963053444058 0.61722610609373996 -0.1504362049914218 -0.88008231475744159 0.70772922305609565 0.032822365323269986 -0.90372739908050581 -0.19147843235030249 -0.71935108396549474 -0.97790970897842999 0.61385810039025135;-1.0104902607289887 -1.2560953600010705 1.2010342383663526 -1.2067249518480598 1.5023492233223441 -1.6026668348790574 -1.5272188220503009 -1.7143028594300875 -2.1363848854258665 -1.9370488963383887 0.1544665929880451 -1.1203417406644798 0.032818344056721849 -1.8421751736710819 0.64160184796473307;-0.0092019499811046412 -0.27684496625638044 -0.38213040545438731 0.55225819413394772 -0.82146655649887301 -0.82952507264399133 -0.39874180624751937 0.65766482671903448 0.35787085937728169 -0.74144226404219227 0.090547171862778109 1.9853908429201867 -0.42362845009774314 0.1899218223522203 0.18182464426442477;0.031973400601275667 0.26973764168772701 0.27604580500561943 -0.52378541429643222 0.83426834039427145 0.81876870125138701 0.44958103096765434 -0.76286666326173402 -0.34251749672222948 0.78816957933463905 -0.083543597663495298 2.5740840537865535 0.43379748683515595 -0.21104662874993427 -0.12422600001334036;-4.0721387068128276 0.24257924611278139 -0.215729396654674 0.30827423813778532 -0.57774933705095766 0.48322581170928225 -0.47485935137235347 1.0345613394875468 0.17047791765180695 -0.20823221214482043 -0.059799989717531546 -3.9906900653434545 -0.74141422336740903 -0.84787036321161424 -0.52500709639487109];

% Layer 2
b2 = [-1.3507256799165637;1.7544543027360679;1.2330596258810576;-1.4364471832902854;-0.31352135218079413;0.44352819786823838;0.14727289462582044;0.48104996551160423;0.2731604961011036;-0.47775670218346328;0.80413719082414825;-1.5609713821705609;-1.2908120614375964;-1.4896467026872739;2.4832040224587582];
LW2_1 = [0.46943467450772836 1.3485780968633565 0.14408534812465482 -0.20006108023450608 1.2800441946881536 -0.99762770825585301 -0.18726003327486926 1.0747575549301052 1.3177357343852711 -0.50549293017087993 -0.04429295698210859 -1.3133459749929419 0.22748743046183678 -0.49704765690006542 0.44935759254536856;-0.03316714220206092 -1.9078076121741272 -0.30070434006481961 -0.38699550256571524 -0.41572124614374123 0.21731511241427642 -0.51035612663097141 0.50321159420620754 -0.27177338041582644 0.15493651605347597 0.044721506896067145 -0.22011371874096786 2.9801047412123607 2.8199644439527041 -2.0699065422259699;-0.45406346816178611 -1.0609932877607218 0.24704564469693513 0.53406807955733315 0.82645188532964364 -0.43665561006449349 -0.33035290067761947 0.028208974133499938 0.56328458813155247 -0.6143804461114003 -0.29638818746992213 0.54105235458622636 -0.23233710445358458 0.46895455638881944 -1.0332980596230634;-0.29476747569702844 -0.59098546722343659 -0.48852562679026157 0.39848617431130912 0.37665445688406063 -0.30919891976559111 1.1392973633653047 0.76730845647755042 -0.21647197657216938 0.92490220659419664 0.28246362658901419 -0.10023501580459401 0.20028960957372444 0.50191184827585489 0.60165489634017444;1.058465299745317 0.46539996140852252 0.42457537945724594 -1.009136020701048 -0.58472681445815899 0.024854097608577215 0.69138347683175405 -0.63161248689722116 -0.89517675780613737 -0.29869582883989537 1.7843130163377914 0.68469107948299412 0.30202308838588904 -0.17351090128607297 -0.13468849160344198;1.254341855090896 -0.51703094281871853 -0.9915911485977067 -0.0047024288218777376 -0.67622613213748217 1.3528697054282712 -1.1391563604894119 -2.3062631811897356 -1.9146035535514223 1.1490924709665129 -1.5891126210973578 0.30396875880174068 0.89134982508601246 0.29156173369767713 2.3023507660883382;-0.67625359277990826 0.43208740338435619 0.45241370692589761 0.11767619893359241 0.30645471192762408 -0.44285486792295448 -0.22136252747749999 0.82276954441440453 1.445133585837137 -0.25565259012678199 0.43630441317760144 0.52393166873694208 -0.099467222450721926 -0.33654044184819404 -0.80358004329012145;1.2268216224612192 -1.6678210819528594 -0.65181123483999581 -0.69663424176540745 -0.51062308910033349 0.17582419223182894 -0.39319543288035003 0.65367808425103302 -0.376122123268953 -0.22905950195184521 0.075345607552603042 1.2675082269130629 -0.029134904961634029 0.48521820398006449 -2.0135881958100681;0.38669719380252526 -1.2860131235900876 -0.43906486841237941 -0.83205617338228499 -1.1947792702249123 1.0111653191617904 0.43030736214943943 -1.2387173538712035 -1.3484443591994069 0.52723337492036315 -0.089563801533348739 1.1983364108936394 -0.086071936483308686 0.55692296492613114 0.44351587512715351;-0.12211496452117923 0.27179301334301942 -0.48903944169274399 0.58869732793327767 -0.19970403751013149 -0.57617161250724647 0.35130882612504555 0.71338572189606309 -0.33569776634316767 -0.45608300409882735 -0.34138453528864759 -0.63351875838073823 -0.18267992331850708 -0.39421820269400493 0.30547533125221454;0.68697299374788023 -0.0086296862316708467 0.24309230850938407 -0.62528162379008112 0.17206240376331089 -0.2936459541244873 -0.47375575724751751 0.43246606451913561 -0.22481506494684192 0.226792357288533 0.66271145143983767 -0.35970276937510115 -0.60295769747088612 0.065476059953802762 0.32307643667667263;-0.86414939565566384 1.411725458271925 0.42562516111532389 1.4679178683272844 1.1454746818928485 -0.61026776659934634 -1.5014115210398353 0.074673431298669019 1.1902271838086498 0.43641862732081371 -1.5556756703875285 0.30504460817868118 -0.54655412170460815 -0.12795709421883206 1.9726866290519864;-0.27300171185240452 -0.23658037076548794 0.54153134750201282 -0.30807215817324735 0.8904042584176014 -0.25089171256156767 -0.03370172289545556 0.80420335049179081 0.92043394526899802 0.21110448346188038 0.23934183730405995 -2.3756138355304417 -0.36514778278526711 -0.63142672419886903 1.438304340321567;-0.27253990397825378 -0.73888160565397154 0.75016494536415235 -0.52840615341839425 0.73264140449217618 -0.69062645333157024 -0.47768697201982047 -0.070165916985934745 0.16418494814002327 0.35658383935634513 0.0074930244384013266 -0.27239578738155024 -0.0031143561615802617 0.43043738804460485 -0.42655414861315222;1.257518075240295 -0.18333035856707836 -0.83033423870068723 -0.76870951274973831 -0.78329321860923873 0.52012793911497535 1.2359928161446589 -0.20268896635641206 -0.69129642026420091 -0.019983642560319433 0.033455657700438769 0.53469691011275144 -0.31699655359438428 0.43159453769563422 1.7231930765539754];

% Layer 3
b3 = 0.43563255274629553;
LW3_2 = [1.7407799585071773 2.940292764784199 0.061074806660582764 0.26941077546285519 1.8791195930092786 -1.164127318651909 -0.040777321969816253 -2.7150117753551051 2.1041853257903576 -0.061085681642244163 -0.11735150134839432 1.5094090581511819 -0.5120906130053362 -0.058690577362445186 -1.4336234823234419];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
