function [Y,Xf,Af] = SOXSantaFe24(X,~,~)
%SOXSANTAFE24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:53.
% 
% [Y] = SOXSantaFe24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;10.752688172043;0.00341273633199099;27.7777777777778;0.00632111251580278;0.294117647058824;35.0877192982456;166.666666666667;95.2380952380952;62.5;117.647058823529;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.76244214912911734;-1.1036736088165746;-0.81520377037364578;1.5544662395912165;0.41640646743432097;-0.47501985345409853;-0.37437530744427477;-0.43525813558648108;-0.74395212463412852;-0.9516074122606335;1.4818189114759885;1.3391763279349664;1.9159422438278402];
IW1_1 = [-0.26528258883441536 0.092288626762616455 0.34195158345389343 -0.097654778625151401 -0.13588013535981525 0.19141358922414087 -0.85489868376905476 -0.13385617747079509 0.32927459788485092 0.44720956439937309 0.43329808113020629 -0.110794121824319 0.19579242764676424 -0.048403652561606662 -0.18089575373041014;-0.32058956296328139 0.071272113064825032 -0.35300817137464829 -0.19487455684344587 0.11869484191341598 -0.025636648957506808 -0.71065228535178504 -0.19054383494254296 0.30075814596924288 -1.0304900273058171 -0.35489015084997672 1.1367406183112385 0.52218115413573507 -0.036039549888274847 0.76360135880432078;-0.17405332623389794 0.1999741563872974 -0.1539646757853694 0.094044979842345763 -0.79836796341636895 -0.56461534869275587 0.82804331724793034 -0.23679455034365521 0.47422625774112676 1.1854546729631308 -0.18339167258486555 0.27861869011541229 -0.054040121262639948 -0.42903182734437628 -0.37811613910338648;-1.2469377232445149 -0.15592604240349375 -0.1123865965070196 0.02364350457946187 0.48680135102636185 -0.018346533567870756 -0.87136627031381308 0.19860469525512395 -0.60353705145302339 0.88159223452789004 -0.70240856696563636 0.33488826816098616 -0.20526783958382749 0.13674416949221463 0.056902917416802944;2.431855783510819 -0.26158446998738305 0.96528491956958751 0.44097837405736973 -0.14400042571292898 -0.83594316047703776 -1.2477436695472948 0.054314079866095093 -0.11486587156625677 0.24167384241949655 -1.7131888853547637 -4.5183252997624264 0.33380519282175902 1.3156429394409443 2.1222648841834713;-0.117865421744277 -0.25079769105620453 -0.35205803240099182 -0.047745171370461831 0.19403276245763496 0.14107015741746337 0.85976589391668523 0.24854969411864794 -1.4814738099275051 0.48376468991851135 -0.23893009491434758 0.10656930683690094 0.098167643116473677 0.36368285812931889 -0.38724364908483982;3.2926976892380972 -0.085289774616952724 -0.3469896735985189 0.46719617844665834 -0.30567677402551496 0.38133279220923949 1.4563649885238092 -0.061299370541794129 0.15192869378604396 0.28819117146430151 0.65908422072941886 2.7914115469774194 -1.5844893907890134 -0.9415560780344866 -1.1681390422556872;1.1887988838348833 -0.26721311432394029 0.28147968371950438 -0.32276099325876406 0.15102422114120206 0.24065351813344985 0.21530244279489866 0.19313003591081435 -0.20363004156478828 -1.5586077732146917 0.32265214011819482 -0.90905887850964162 -0.26269047513936117 0.18924106737957128 0.59914776993841445;-0.20482467395758316 -0.091119925835511179 0.29139098119247298 0.61558861742704063 0.83728821422262312 0.13511041549460939 0.45370467847950596 -0.054929442811200928 0.048881877707737033 0.8804075159496938 -0.57888686914908549 0.48514301904694729 0.34106393884010727 -0.52672153467081306 0.177013716445407;-0.77906365859795068 0.34210099390545057 0.30820128778031691 -0.7858287934164232 -0.30091430806767022 -0.35579392743015936 0.73183268443420479 -0.15732212583437943 0.46342045461551373 -0.12830459365209412 -0.36119941388040044 2.0489700334112957 0.37249016370361843 -1.4997638162612723 0.28534476692721333;0.51967561560489917 -0.026400886325840794 0.14690160551014347 -0.3692690055854691 0.2937541817050473 0.58049733263989833 -0.12438237141764259 0.2161781349452146 -0.73977016712396138 -0.81205150154321271 1.0552159691648586 0.47720612028392018 -0.33562406809846701 0.11411517463092197 0.27552583216875537;0.64576612990488769 -0.045628606926159936 -0.14303438484370692 0.18678760289247914 0.29649594805213175 -0.20544346408167841 -0.14275370314104041 0.09938906284243651 0.47027973265902157 -0.19322363588345359 -0.43654631602728988 -0.097701677502358031 0.8006358355665536 0.14485855202128339 -0.32115938134580196;1.0433720646337359 -0.2557202293335884 -0.25885437210069873 -0.15945550219078963 0.06784110988540111 0.15698483737283159 1.4914379732362018 0.34066825236781045 -0.98894417575521376 2.271947527407042 0.017359418173674496 -0.80737351507831823 -0.70565844085847218 0.18860429386354979 -0.13600505381875069];

% Layer 2
b2 = [-1.6624926401379496;1.25399086928101;1.0334904274307526;-0.92119171388339272;0.55904224195442864;-0.48479432387236665;0.25202496424928161;0.42607818280666782;-0.33415277950905103;-1.0120406323211197;-1.2661939825953381;-1.5409799542576212;1.9632786151429138];
LW2_1 = [0.87913670222483276 0.22222737032259068 0.53752055817921918 0.63386742506885108 0.015464767475760586 -0.19761676257401853 0.051464610852478873 0.081198757161230525 0.36779745613013254 0.15663640755177757 0.76461866447393223 -0.22801834030634482 -0.69841290954161239;0.30446372150405937 0.43022268047990031 0.52202571031783118 1.2165920315247076 -1.2150384915401806 -0.25372814951579015 -3.2910003984627609 0.074874209426553942 -0.15842838393997527 -0.30537459276049811 1.0466031261866819 -0.11544340780182819 -2.2758216143254946;-0.13015225742931946 0.1841571935606699 -0.19817529074553936 -0.0055437029350317319 0.066194510859713951 0.19960281835353316 0.0046231618766245132 0.97403469795083053 -0.24498775648475909 0.0314184718754313 -0.54131678628129232 0.53151369831657425 -1.2645268655258119;0.67682875743235271 0.6212743732958842 0.259269738262071 0.25271280099861265 -0.089515338268166406 0.16805224554803888 0.0050193782845225597 0.091637089551315776 0.2929060815556106 -0.66795739839307333 0.39607432730570152 0.37078928011520634 0.558652631773075;-0.29984545135169083 -0.15262087226162568 -0.224053776349046 -0.12322074873056131 0.38941705647714997 0.28648649692476785 0.43787628693321839 -0.53804228826004219 -0.1364293467584603 -0.9964472471724567 0.58659468063762221 0.5596591146447395 -0.019559245933876916;0.71411095066275121 0.2933034634730855 0.64614818992151812 -0.4281588291453125 0.10686105950074555 -0.49456528713018233 -0.2035073447186127 -0.53023522213953167 0.23908425041423645 -0.49603393344915514 -0.77418191407350267 -0.64173786991094384 -0.73710275558747496;-0.42254094135983006 0.28526592236638032 -0.45395894035012363 0.83826830887723713 0.99651275414095708 -0.16172082205099603 -0.66373289283039849 0.33328661916355673 -0.56891552149995939 -0.4912789794662864 0.39065144626366061 0.47309976255389186 0.57388127608533401;0.22991201801006345 -0.86619858689062057 0.36968217858519886 -0.81193501146464142 0.043340124537326288 -0.4909063888553693 -0.365612729590995 -1.0147366472420507 -0.77847086577663649 -0.66573486699053175 -0.60419401384721672 0.60623755911131338 -0.42472369093666784;-1.0447501738800746 1.0576803345637598 0.20891525491960078 -0.27635417852120903 0.052724572937406969 -0.9125408282149261 -0.11268563190841233 0.40569897932284438 0.14539180449028641 -0.71868313218390245 0.46330932566447092 0.38011067191614228 -1.1102858996779015;-0.26381255659501113 -0.85855084207949028 1.0171499859878634 -0.6061608465439301 -1.2327903617021341 0.28993899836088788 3.321624064430297 0.70464452799711652 0.68355457585906354 -1.5254882462915036 -0.020590142334821367 0.66448595459883486 1.5100854326049102;0.14912441493488948 -0.89295868236953546 -0.36245021825789686 -0.68948139455368029 -0.17818734700362701 1.0426003254601579 -0.34427769697587568 0.67521789269943611 -0.31973630831414879 -0.42686925625830952 -0.6268964934907113 0.36019406875812948 0.09903861559296348;-0.25908084438916373 0.34584976772965015 0.42278193904293743 -0.29549276254013751 -0.19409770696098672 0.95566381911557119 0.27855924687592815 -0.12564616077048288 0.2023391511580051 0.29406201147824207 -1.0223998623274912 -0.4811655323110387 0.10065896732946;0.35201687278018123 0.48323638421600518 0.41324035738116138 0.7471410109809461 -0.12955294807792134 0.1171462959565399 0.38237440658841582 -0.31234977504436146 0.15919915640963844 0.34916886998727986 0.693470865143204 0.43716330825829719 0.31641814828529052];

% Layer 3
b3 = 0.73684889236344697;
LW3_2 = [-0.67668017186077778 2.8047240570286398 0.66022264069599745 1.0784972376417687 -0.69877794750077116 0.50275002410403447 -0.64598082272482216 0.33431839108815531 -0.32701984369679804 2.8052924907884536 -0.30380162691086832 0.32985460398308519 -0.21722159502547786];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
