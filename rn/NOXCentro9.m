function [Y,Xf,Af] = NOXCentro9(X,~,~)
%NOXCENTRO9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:20.
% 
% [Y] = NOXCentro9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.292995354431083;1.3190807322483353;-1.8206863438310983;0.54323617065451801;-0.013334290744375352;2.8757306551987876;-4.150862350910737;-0.96722033746729619;-0.10998819068257956;0.034382957838210028;0.46817868755618408;0.96197301220948661;-1.7459130148120052;-3.0530205422992767;2.4283989429278066];
IW1_1 = [-0.94150470455336599 0.31022118221373574 1.4451868765266846 0.563220391437253 0.1906847262043071 2.9547843776455425 0.037741516602153968 1.1807972174260224;-0.1008524189602166 1.9454834332033784 -0.099168658718866404 0.95433474849029909 0.54044475781720624 -0.10335249621548614 -0.30951605762810408 0.3573513608159069;1.4069896090871745 1.4443697285704098 -0.94673963678981166 0.97375629197403546 -0.60662959370240632 0.43750622777924059 -0.096638549208504676 -0.047707996823569868;0.71834099262949247 -0.93150864876373374 -0.14117677047799115 -0.43993934486300895 0.13756856871662745 -1.3090656627212516 0.11269257905317995 -0.24018427861949571;0.33200142846171748 -0.46806313192699389 0.20212982331207197 1.0269006817597375 -0.75258182749780389 0.2644935928042082 -0.042146551429760433 -0.37531784171712901;0.39397000075244498 -3.3220337735477345 -0.5060128838679453 -0.46103140197480047 -0.21055265638588858 0.1113691901578463 -0.17778593932973799 0.19733186250591517;-0.032357800841701971 -3.4089090135376416 0.72462698022484862 -0.15991950062233107 -0.085572340393332738 -0.10092869258775489 0.03564499886702939 -0.5025295985877668;-0.94556887956391467 0.13803730549943047 0.27720995912170771 0.12375681998779517 -0.03955617685426057 -0.76967431343547399 0.01696651892283764 -0.54954345903168123;-0.72946931244059454 0.014551714393228747 -0.85962608297463261 0.72655229336627136 0.91249150550267299 -0.3735571697399962 0.27474582806026571 0.65293677838089925;1.1008637809202708 -0.95835045004156938 -0.65705258052521076 -1.1831463823066257 0.91817284240726693 -1.0282671319954244 0.7417327257331856 0.28180898070323418;-0.81650360221079865 0.38244400077069435 -0.089495597783756514 1.0838189457273986 -0.0038679195864378679 -0.31784506777443355 1.4307949012439733 -1.6507697158865886;0.85704521005867806 -1.4300576610678521 0.91005912835579894 -0.68891772986227884 -0.38306254427418668 0.53913159974746705 -0.10665307632744808 -0.2246748325802137;-0.93997275778514877 0.062938423633551122 -0.93321770555089212 -0.71111355741777993 -0.46733771161995374 0.83308295976809799 -0.23799258450933516 0.70948455567543467;-3.6408844968932503 -0.0086514136475475435 0.42394464816523147 -1.4351555779376786 0.94999956533488006 -1.2794443984390427 0.41475332148511262 0.44905306527865851;2.2507936915238127 0.18270541318110378 0.45929120294986558 -0.88290991324084578 -0.14367411686306208 0.085749942351632177 0.024835579064400617 0.53772686141037485];

% Layer 2
b2 = [-1.8905135385214495;0.95850605875564843;-0.36389354968601273;0.51536568152875062;-0.5611206253091523;-0.74238919404852366;-0.53031824267795347;-0.53517896733392634;-0.41503009461753015;1.6048470032838131;1.1884762838615845;-1.5393335111104609;-1.4185938923050199;-1.461863876342459;1.7338683977410663];
LW2_1 = [-0.079689646681018675 0.90752308737351839 0.29754717482923082 -0.45374830392507448 -0.23204367555585667 0.91273913074042479 0.2710660363175621 -0.62340227912996327 -0.29028107449691615 0.21513211377217162 0.10829515250746129 -0.20520965754315237 -0.3535296524805544 -0.42587198568449869 0.54879336756091135;1.0367824178923655 1.1325052667915003 0.22902135236389135 -0.61371977802583588 0.59815693303233031 -0.64209728242622965 1.3069474039945268 -2.436715415537702 0.37430623776357563 0.99052159220433889 -0.031677921513925823 0.80807746831746707 -0.45947343523949491 1.1578725097885243 -1.499501645523051;-0.52602083859630433 -0.40194089435678321 0.060575931304797659 -0.29864261591068442 0.26311665449182958 0.99935985000495764 0.029244259197095585 0.0013058268194790883 -0.19380906554027785 0.031356637161675152 0.029942787171975883 -0.62255990111193227 0.37216605337197028 0.13271904218226915 -0.26214025307650152;-0.4793222067127253 0.76363141320165595 -1.0888890365891477 -0.47644062572185092 1.2774887305129936 -1.5693761493740253 0.18047993188338199 -1.0598753165406123 -0.076745711107012726 0.76408962206528752 -0.29066469081667395 -0.17689202353949579 -0.099671264557711359 -0.50309731696213178 -0.3533644187153912;0.057447522831246205 -0.77120435069592808 -0.33283162775063285 0.043438446747572565 0.97378708134633696 1.3300742796723104 -0.93344748758058838 0.41034545774728071 0.1213616309133148 0.35108175676981818 -0.36082270137101008 0.2702840031783334 0.081374692320452857 0.46308215301480071 -0.74211052366545704;-0.11399952761337015 1.6937652817147599 0.57969364241095633 -1.0928784254136621 0.92143943609861267 0.48574131713374979 2.1197103883678334 0.043550055553367176 0.33136572369591605 0.4090596385100706 -0.5382634564014126 -0.6649909151425587 -0.62867364250211 -0.73336628742606924 1.514614896182761;0.38950745995543712 -0.73413906998373946 0.30560717319767855 -1.0419904574140921 0.033036672590459532 1.9542160236000445 -1.3916957543245072 1.241030967090802 -0.44984563438878228 0.35794608036587272 -0.17179866029735691 -0.59378906219951144 -0.29540689658670527 0.077024220290274198 -0.03981911931943713;0.25103687509888689 -0.092208392124565122 2.1358607563245311 -0.13451642638977696 0.95140701592241417 1.1923679187264853 -2.7187589476247997 -3.3155977233639717 -2.5489761372725055 0.0085140567501252179 -0.30335475110004351 -0.46163832096490204 -2.2505695279862459 1.1564675833864153 -0.45861857961982377;-0.2411159895393829 0.12046038991540102 -0.44927793979072062 -0.17032056593858935 1.3503263395081175 1.0672632113486697 0.045841484729784401 -0.086672114794341712 -0.10589271832145866 0.52909038610713788 -0.24025422279561229 0.32000836036980784 0.19144964962574162 0.22322635367799112 -0.34290010987458969;0.21435424005392609 0.070040630102253656 0.54985416099907636 0.14746391483222882 -0.6822816790788091 -0.75931095726166364 -0.43173064151212437 0.56706156512715633 0.36211049192062078 -0.49663627055077764 -0.2861871097935571 -0.5991798597848329 -0.11789401808557096 0.40152351880357429 -0.26000709596071325;-0.25963846704961036 0.088402415232952641 -0.70632492639253575 -0.24490294407414687 0.86712113213645103 -0.28907100562299198 0.25783864728775646 0.084847269675907694 -0.34625485449754356 0.33178471328299947 -0.18447538946950387 -0.34665315956125486 0.27537728487160484 0.26197642950613892 -0.43923654379860927;-0.81427835326076847 0.59795153731253758 -0.38156418718987489 -0.97907855610203609 1.0297588122731482 1.2030700976451287 0.034698870521740005 -0.18616631778372214 -0.16606833274623473 0.74702816085819967 0.31819245960050085 0.048257431729339419 0.11002968370039472 0.20533391856774338 -1.2748466489205046;0.501335552853864 -1.347066371443691 0.22458343032300992 -0.0028878305330230503 1.0626473726112475 0.58426675220727875 1.2522629292897447 0.42329315954680663 1.080964913541514 0.037470419193065041 -0.13154445878029092 0.38832333602890878 -0.55787385507873311 -0.13930068545719565 -1.2250027340116387;-0.086976834805794268 -0.039044311944448823 -2.0949500726713515 0.10007785318092029 -0.67992391178352163 -0.8651132134968641 0.60822117977285861 2.7039555286800163 2.0330776039718015 0.17486040197071595 0.11099513008138133 0.034468774505751698 1.7767182581129952 -0.84819955682454962 0.044856874026898086;1.0345950255766725 1.3596785739851318 -0.54782918102746958 0.41959544126778836 -0.48595063529577825 0.014661018374865921 1.1342882031796746 1.9281895167286138 -1.0619240496297453 -0.11918328256077307 0.25731025937113877 0.33269041332104776 0.33118762278547625 0.87288475454041559 0.078744321182708091];

% Layer 3
b3 = 0.05170511212596033;
LW3_2 = [1.2977382420048273 0.13678621710570155 -1.1595913187993825 -0.95965842109035948 1.3262849470871478 0.33311832357795196 -1.3410031044152382 -2.1930509028342682 -1.3826739765737379 -0.44510462466788542 2.2390344342324786 1.2722264378513091 -0.79989103011074847 -2.3592247771124715 -0.41136426773725127];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
