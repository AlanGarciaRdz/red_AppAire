function [Y,Xf,Af] = NOXOblatos19(X,~,~)
%NOXOBLATOS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:34.
% 
% [Y] = NOXOblatos19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;-10;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;4.05679513184584;0.195790504160548;0.00618238021638331;117.647058823529;0.141843971631206];
x1_step1_ymin = -1;

% Layer 1
b1 = [4.6452930201362177;-1.5594457793661709;-2.1038659682004974;-1.4629443130030535;-0.35561031178356783;2.1759874651678652;-4.3069328996830345;-0.097666494662549369;-0.97029677658506597;1.4686453278808678;-3.4162339195451112;3.6175421045550538;2.6236245895570041;-2.7951509115007793;-1.1552641512892798];
IW1_1 = [-1.635900173406206 -1.0359971933563601 3.2514935965488867 -1.9710506982762297 -0.17661518286562655 -0.30526717165667155 1.1500972492931154 0.082982428104457079;0.63144930591339532 0.84036517305156788 -2.0727012121268009 0.049149093157227812 0.7672295256276318 2.208365377550416 -0.26187242011763245 -2.3135094436275869;1.346281240331497 0.83430449312413235 0.13571235728884906 0.38393003958058897 -0.7714352442400334 -0.75534808968660816 0.27777229412583998 -1.40503498772518;-0.22056994153872855 -4.0724934306622878 -0.27603758982421706 -0.62061632377703657 1.2319288088461757 0.41057541099743766 -0.16545659159627152 0.14461601423477288;-0.84088399796137969 -0.54842529352498426 -0.71857034004003584 -1.6279916603338966 0.37471298254314839 -0.26661168249083067 0.64873491252318494 -0.93687826124849494;-0.74774707515258165 0.66042859085178862 0.1190877427750241 1.0736921633880665 1.0647633531772227 0.39885999527858723 0.040775264841906432 0.89586359012256855;7.0852213457820428 -0.41948444133239932 -2.0589091821908707 2.2280001541449193 -0.60027797845360431 1.3603751046191181 -0.83106947381348595 1.77259588195569;0.3206232636794456 -1.2996395874121391 0.14054506248883386 1.1764504131378872 -0.187449928011589 1.639693349269566 -0.72055214728203965 -0.0096069687054241223;-3.2503603307449351 0.71052284707786451 0.84611474802511977 -0.20503011630883208 -2.4278987904592202 0.042784426380616393 -1.117429050986938 -0.6898739198790893;1.1532755403636594 1.3750334238047743 0.32006898365784742 -1.7254431040072984 -0.51626458299426814 -0.005395085200444176 -0.058002199702500042 0.022869443679206371;0.2657550151492829 -0.25449685580335446 -1.4531639380252106 0.32629989977228396 -3.1584034142120805 -0.46761819301609769 -4.7123600484083248 0.87946226229433566;3.8707739740765881 0.73089572804030212 -0.72857851900592874 -1.4186035642107526 0.4000890938781515 0.43503749838684835 -0.62521281703510212 2.1792117354634777;2.6986274169787334 -1.3086731336250301 -0.75408503328946375 0.33417987708374375 0.39179465280565451 0.23418182856458658 0.20312447498608946 0.80201146096610954;0.090368742221102666 -1.0317589455684075 -0.50955940331209693 -0.53083838878365097 1.324504269674651 -0.051623114213234622 -0.28246104460814281 0.65947800915682253;0.12363712307505623 5.0666866456990567 1.4961738729076697 -1.5471730306866545 -0.043494405675807979 0.34400986349758222 0.27652168254086146 0.10766436186409856];

% Layer 2
b2 = [1.536795550918129;-0.45332503105402761;-1.3823845511491444;-1.7425368913103254;0.72899653932354536;0.78220300623508354;-0.77004245710728669;0.051653989007341625;0.23108687792825697;0.7539052709041405;1.0933193433810779;0.18656982049336759;-2.3281472840194612;1.4339660835721293;2.9220665130219539];
LW2_1 = [-0.76209853168487807 0.18027510593830043 0.70707179040184076 0.83257560419793986 0.38839259510497354 -0.16212785466232826 0.39082129101484947 -0.34883043457376184 0.063048029337167452 -0.70786832150785794 -0.79045497300060796 0.5683270321277748 0.66534506959566941 0.20608193520031545 -0.27742283906571952;-1.6338057229593423 0.39816176872828085 0.52510578610534964 -1.4772762892822928 -0.39917393919549682 1.7029261483378213 -0.43346969584017442 -1.104580160884131 0.35258194614019661 0.019601127119327461 -0.30325320760579266 0.20741242236031618 0.68857434141676832 0.69725649737621265 1.0524495669632163;1.1180364587317888 0.88481819105760739 1.2681707184949702 0.24429827751325958 -0.65097624721686798 -0.40220343476730164 0.55892345639547203 -0.63650881045749386 -0.076482602023463395 0.23507978744489011 0.020917397010979014 -1.1018673302931314 0.36629836156770523 1.7341284592593766 -1.0731586853616399;-0.14932454509795215 1.5310304530667214 0.29326019016570953 -0.72982519991972172 -1.200628646233147 -0.067222402805426268 -4.0182972341032999 -0.16381975887777339 -0.68882116971904195 -1.3056417359646419 1.2725169925445443 -0.16156604677296621 -0.43790308851896842 1.7609696435982709 -0.82674445868902091;-0.29877065315344103 0.73822089703751714 -0.55116387466812489 -1.1343415066492879 0.11170432006068889 0.44449797574959227 0.14360825006531303 -0.31522551334609439 0.32485246448090754 -1.75957995156153 1.1412108511108447 0.63282317930500909 1.108706665341108 0.44591322306459014 1.2252972758090248;-0.69933370210507906 -0.41371036858760479 -0.29973112871302493 1.4795387681471683 1.0841438133310999 -1.2224316156670572 0.5495898036285376 -0.21611863987279561 -0.037530045934433182 0.52966120111582338 -0.14622117124325437 -0.57311284868869272 -0.46112446130552165 -0.63181724058729316 -0.75273114181952072;0.89849518766783709 -0.36600687848690933 -0.24199109723634801 1.8605616184766784 -0.58055758109445843 1.2861096187751795 -0.88420217655644862 -0.55701291674399744 -0.97999561781152034 1.831382948170261 0.58208164549543973 -0.17810033376346693 -2.0389871066184364 -1.7892922124622759 1.1830917548637263;1.1118438097516785 -0.72563941461416304 -1.214104393507609 -0.60112230950949608 -0.37111828182023937 -2.9603261757098647 3.172682764942695 -2.3191191516019996 0.90016524996925695 1.7187812686973245 0.36230387829840111 0.73615861541353178 -0.14615985332770826 -1.492453456143815 2.1505921292686154;0.48623205069329317 -0.87016028181478688 -0.51055171386227471 1.6208004961498561 -0.87451017347770588 -0.40740380946043225 -0.98882560859104229 -0.45757381568139521 -0.71872125102620488 1.5818182993248422 -0.46879030600567212 -1.0072238480311837 -1.395154152175329 -1.2554164500234997 1.596955514077659;0.41365880253856729 0.41712425128624758 -0.10961662837566921 -0.17606706374090739 0.81415348639130847 -0.23081444486904426 0.43166195083563913 -0.58236258164144539 0.55876134179431558 0.35342107605007334 -0.39363683208140904 0.41231199142057973 0.69972192370667352 -0.448624103394824 0.21305239938687148;0.5776003420038639 0.91337699183360233 0.25637462095718649 0.59537475759065406 -1.0264786457462507 -0.15832937959189675 -0.68502300448670905 -0.84624218207341639 -0.76006308256076816 -0.079093699624917066 -0.1489296649164305 1.2345792685967161 1.4797007420428709 -0.54881250642320711 1.181200143413405;0.91478636465253071 -0.83327901060553633 -0.69063985277171547 -0.88214988540787542 -1.5241800562311367 -1.1556231093220775 -1.1645632197118569 0.0085215564225784995 0.90357691683339392 1.0465116327761066 -0.13290672979966398 -0.97967167858360038 0.072189230206270896 -0.78995578855401849 1.5491238219773162;-2.4971008057922566 -0.13071840315932665 -0.17505882990582258 -0.23797887564405407 -0.78745400254217013 2.8488646233938146 -1.0873613738077186 0.28383641374751134 0.89279269980527309 -1.2197083552488035 -1.2232458549692804 -0.070588913878828485 0.37052567511971696 0.42560867382436585 0.12332136880443867;0.018323082402685438 0.28691345752850123 0.10496963114626413 0.0044492889918594028 -0.2652293907055418 0.87778345765684507 0.1778660743564707 -1.0064024948940564 0.82703092548130208 0.58912989382748648 -0.011862855828128904 -0.26612587388375875 1.1320416552916799 1.0206507260616438 0.89384445092082232;0.53153702404624392 -0.506137295914736 0.51387813186607745 2.097809002766216 1.3995055315209037 -1.7746713293954095 0.43569021870462565 -1.6535404390043564 1.2515761913585557 -0.65379122202768392 -0.52172283469956449 0.28198045923254239 0.20163109488245895 0.2879266792493641 2.534835120335627];

% Layer 3
b3 = -0.7621649424336433;
LW3_2 = [0.085326017048162839 1.5283784040130497 1.5886189227833283 -0.65479537507258334 0.6417717162104144 2.0300251039505772 1.3279889229849267 -0.67973839902898503 -1.0044491784321676 -0.57713734838240038 2.0270162843367006 0.62200825392599013 0.91719396103799011 -0.99146352798887494 0.76698828377329853];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
