function [Y,Xf,Af] = PM10LomaDorada6(X,~,~)
%PM10LOMADORADA6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:10.
% 
% [Y] = PM10LomaDorada6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;0.00462534690101758];
x1_step1_ymin = -1;

% Layer 1
b1 = [4.8273807834479436;-3.1823693599734764;0.21612546147584283;-0.1620876886584271;-6.6063081732608859;2.3570222851004448;-6.9226339549974707;0.0027795093046678815;-6.9031943751114566;1.0315626319215674;1.812875582663908;0.70424309850602718;-2.0068209770615235;-1.8013654758585189;0.62644074219647061];
IW1_1 = [0.0087624357291432031 0.21055372136884926 -0.34845965371954646 0.48877358040393143 -0.0340408870541168 -2.504973579649604 6.3694266271544198;-0.67477429784509169 -4.8137646961374161 2.7908059438882775 0.54054873856931218 -2.7542009019960787 -0.18753667096394999 0.87027325259607413;-0.050610165201995252 -0.55709436626992914 -0.77102903283216506 -0.029670222115971635 -0.84348772318515575 1.4714757226045614 0.90827117891980413;1.5897361013808902 -4.1073174076417747 2.3445230487759807 -0.34876656158146735 -0.55118788541409691 -0.50529117931748613 0.2070915171639876;3.0550907949532236 2.2147587721964439 -1.0562957466997307 0.14340853652128968 -1.3494930499229369 0.84365671586798396 1.3364298853040233;-0.4136197187438248 -0.20426754836473698 1.7802020073456939 -1.7528668695768221 -0.46540379248004965 2.8297014146562156 1.1377498228612619;4.9463094877656335 -0.01968165448847696 -3.1131947117702046 1.3320641809685336 1.9720236864895337 -4.7205771461026362 -3.9235334275344136;0.19152047443806339 -0.19476079226037885 1.755328944300923 -0.53825718956500357 0.37335479009203204 -1.3269441074570125 0.80841624383760358;0.68951584893831896 6.0258527645131306 -4.7332868333461349 1.6172234845762741 2.1145366418660561 -2.5482521126134827 0.12110934903940403;-1.9738287742210769 0.20106761104421117 0.59548899063233485 -0.78044041679449305 -0.43131616684794116 1.176802359985077 0.89981566271139535;0.14157088640875146 0.19796949836770988 7.1055432407059813 1.1772189548273893 -1.726737286640204 -1.2493462274471414 -3.7824241167474106;-2.4792805607756896 -0.17414822399099272 0.62651256871711902 -0.46500599845002083 -0.52027118956748131 1.5623457535808993 0.33392835151733402;0.30511543412555142 0.94063371143151675 1.774727641846038 -1.5269359728147092 -3.3400441686616147 0.47963699438953156 0.71855152548654377;2.0540377795820697 0.94948593387018354 -5.1803436599372468 3.3105635351954992 0.78279904836222269 -0.12910471636273313 1.6152067878571268;2.168223579951293 0.41205887540524433 0.52967273177578345 -0.095748080229502708 0.45334963941405693 0.97581788938384129 1.8889124920637548];

% Layer 2
b2 = [7.5408744854594989;5.0820526431841015;-1.8411248296376281;0.5655631802393003;3.7103019230566967;-2.5825209224550085;-1.9900625501763083;0.38353297684507853;0.14732332502156051;0.57309828283759856;-2.164026339885941;3.3127330400816004;2.0724888509843185;11.391047848643872;0.26578761180244204];
LW2_1 = [-8.7743681667942397 -0.68709919126059649 -2.6672514975684085 -2.8643684189002632 -3.4803312672078772 -0.35742796456428338 0.056139627580868962 3.0687567224117025 8.478443384713767 0.89756129648020511 -2.3933436672442401 -2.1015932790022318 0.25295244669570038 -5.6694633173992415 -2.5302099472391828;-1.5825326981693482 -1.0893916290220877 6.8711557438916735 -1.9673334862155263 -1.9742314495818536 -1.2813051048819297 1.5048477833606939 -2.9711294472417773 0.48683615525286961 -8.6295277229245908 2.1487513382099852 9.4132871650317487 1.2262138311019022 1.3016415666578469 -0.39419774208286701;-1.2252942927084676 1.2325847207047165 0.35791884375486516 3.8935333671231693 -1.6811987105346446 4.2535284533258499 -0.10355926481099123 0.087695495892628039 -0.88491809276489275 -0.25084164765417993 0.11949137544595548 -4.0615200005243528 0.88531452048151249 4.5804869617976873 -4.487865789622048;-4.2199514976939732 4.3502156102913538 3.588363105211366 -0.33772233577689026 -2.7466647333758334 3.2510287317449591 2.7245387587144116 -1.2688815439746097 1.6821613723162088 -3.9406934120910191 1.3787939797367297 -1.0965932416094319 -6.6893548289284102 -2.1707694829877981 -4.7146285775248149;0.061179214131282675 1.3013732448178352 -3.6383299054922293 1.517782371945066 -5.1807370344771533 -0.492653263767871 -1.8746345963995827 -3.5359811010868736 0.37929771334078688 4.6712526264085179 -0.6954784146000077 3.2780244458010626 0.45580260671707407 -2.1384442898157645 2.7012916997470997;-1.1578135157864082 3.3613955480446012 -3.9679339714167803 -0.68059278166291304 5.3263920039193362 -1.9504452335554654 -3.7897345368283957 3.124961907168756 -1.67819900295419 0.81806085377256688 1.9346163230437921 1.1632179868408101 -0.53085022661553471 -0.12722975274087475 3.9909636173764778;-0.12873485385309494 -0.83647028695972625 0.39926777786504158 0.14339664108347849 -0.17375704413629978 -0.46078771877793956 0.20830482133433806 0.304806686276063 -0.16483956934173385 1.6437834091820418 -0.076507019140636665 -0.66833007663462562 0.011479415722084428 -0.84451010413001237 0.055744951924726699;1.1666600683332062 -1.390046459110226 -0.81063062979488121 2.7343424485437264 -1.4941785842628938 -0.37292385090960017 -1.7264559215470794 0.42946146988304534 -0.28029021374463797 -0.67205038388077598 -1.2658817893104379 2.9664995132183383 1.4188178253662989 -1.0197520568887115 -1.8245380086040828;-1.596185081389963 0.033253146247166354 3.7721755032822024 -0.46459950452118581 -3.9888758295444435 -7.1693558413155198 3.9519195724368346 6.0731084754682731 0.027956968991054987 4.86583095822958 -0.91905334980439068 4.1658563191394506 -0.053629024435482536 5.283421967421817 -3.1774625920256767;-4.0882595131765402 0.34139832223628042 0.36395601615379658 0.51364269160758902 0.3934602133217312 -2.4526530397566932 -0.1356292249319126 1.6174657085873392 -0.71992891159548256 2.7120564262568641 -0.3896618853039493 -2.8605370219430766 -1.2141320534637468 0.72661215877660457 -0.84046398163415115;-0.083524867722668386 4.4961978168835159 1.1895168097199582 -2.9575854750657911 -1.5488826823139394 1.2030526432619504 9.6679732962764398 -4.1121731362046257 3.3807541931611924 -1.4387640851182268 -2.9402103979517884 -7.349526010171024 -14.998122498507763 3.2542267921854848 -1.8979257866302148;-5.3575300903243868 -3.2355792227404869 -0.37226775602296286 -0.15347660572798513 3.0815001446208812 -5.905259070063023 -1.4575553362154827 5.3761336193450049 -0.3001670321293336 5.545914000789649 -0.81797365977463243 -2.272583199072097 -1.4858004785028831 -2.443731672844919 0.24470287880596087;2.7329965102145359 -2.1289973259772048 8.2483121242797637 1.8939882786672513 1.0105460526198409 -2.2156023498996142 1.743919341164375 5.4285787919452062 2.3928784768084941 0.14727703086616875 -3.1854274867961263 1.0194931430769014 3.2057599414068063 1.0898971399093325 -1.0689751878245364;2.9108788623526571 -1.5225047985043902 -0.88892214416252935 1.5693258470125786 13.104578695562443 0.69647236573581395 8.6430072365139949 -4.1871418124093402 -3.4147344795734256 3.4838738141363246 0.52607160820154042 -2.7170777053598236 0.084076872273420616 1.2458574391832209 -0.815886812901637;0.2479940957921497 -2.7434714153111281 2.8853570132449873 0.21775315675769652 -1.8201742361064126 2.2177317784082775 6.6732312996065062 0.58735693041719517 -0.66955692784169707 -3.6433824232656185 1.7612658680847595 3.3522464393455427 2.682203778506695 2.1607657648963876 -4.6268251757648606];

% Layer 3
b3 = -0.23721543563607217;
LW3_2 = [-0.060222891018161091 -0.041325657996248003 -0.043320337707964486 0.033608296765546067 -0.31759400572540819 0.03470062603748935 0.2778820951094626 -0.075360890136628889 -0.13135597158061846 0.098109481593464179 -0.026512580142627466 -0.037939681767487902 0.059079921208810234 0.065363808455093819 -0.058399558115098629];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
