function [Y,Xf,Af] = SOXOblatos6(X,~,~)
%SOXOBLATOS6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:40.
% 
% [Y] = SOXOblatos6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.851646945557011;-1.8041390652352631;-0.91967869353017184;2.121809011174173;1.7530307062495711;-0.7198759966608711;-0.63496737641105971;-0.38215086671999149;-0.047503968799421842;-0.40457139518022472;1.4600653671380313;-1.3847659829462524;-3.9485595172985208;-0.71475418891749876];
IW1_1 = [0.24487467303543881 -0.41334464627428819 0.25683496795512284 -0.9178855268134215 -0.94187390373348878 0.35154811861305346 -0.40644690701389974 -0.62091083070494835 -0.15441780407337027 0.99241741808789385 -0.22558605067298268;0.65196838666117951 -0.37621299317712142 -0.97639276696889865 1.4985378775273106 -1.4583949197888428 0.99461363204236475 0.40602850289143599 -1.6206816205076087 0.97345749975489348 -0.10382362100891601 -0.96003581956123007;-0.92123740284036681 0.56699338499162666 0.70936191200963028 1.5568421145197795 -1.1498582778288671 1.5847884455383412 -0.33461825358490338 -0.41751221567654623 -0.53893480821898843 -0.83808312631544024 1.4411811600858324;-1.8906346909369107 0.55769127465013735 0.1011270518724805 0.71614090887483328 0.11844666025710805 1.2759571780123742 -0.75589835038493003 -0.96154200732683437 0.33734934864782767 0.38150449179229623 0.87459987838571618;-0.59479561302661621 0.059007082579417558 -2.0137912276427894 0.039280337452883132 1.495562559791956 -0.79967070101284399 1.5208018789312194 -0.89011255339735229 0.90039583020443115 -0.44368495996257584 -0.51345538705975169;0.041178608000162036 2.9203279949364043 2.4248675546996443 -1.3752325041740185 -1.7788450284508339 2.4490828868489065 -0.40032241998174412 -0.60925870434342366 1.3482696197140351 2.1609996898577131 -1.300934786352578;1.5281427961452383 -0.13240760014455005 -0.16278414596237997 0.23495629488950828 -0.15079969069216548 -1.3110697486352341 -0.034715976439151024 -0.60512691025095755 0.35736250687790905 -0.67300698817147164 0.35762062712170561;-2.575346107472309 -0.071729493083957069 0.68508671793338871 0.39314992146368088 1.5229965534459531 2.0238595684636649 -0.62413606556307688 1.2818438021979799 0.065776286958662861 -1.3816959210841526 -0.95452863735016558;-3.1589973835854521 -0.18081447739514347 0.81478545375584321 -0.62607258815960387 0.82662238188632009 -0.2229027078416228 -0.20600319738478681 0.0041237561161067138 -0.070600637569039087 -0.065034076777679389 1.4918100463221553;-0.413087220721088 -0.2184448283762177 -0.19345388882012476 -2.0546296692735817 0.77233181679611618 -0.91233627594537647 1.1626019598012196 2.7017415027056693 -0.71079897103425815 0.45506704553586796 0.1088466420392955;0.72157733295624893 -2.5114545360297398 -0.51509625659383895 2.5741380422491713 -0.11503310285345265 -1.5001261297071589 -1.5217878135116525 1.1447337142771079 -1.8371036343636393 -1.3295143824537663 2.8022098039728829;-0.40951634629870043 0.63473458579534048 -1.5903293153727225 -0.25721333485496833 1.1253277281610692 1.9637043206515834 0.25756356397844793 0.2273777778292384 -2.1732740028648294 -1.1046897804081304 -0.17895590970477843;-2.1047039238749421 -0.051917549847070865 -1.9408915433827245 -0.97473090815296126 -1.0417960900325993 0.47077620146603211 -0.1846152047428582 0.040611405432032295 0.29325769313556982 0.66768419131741896 0.98654392384563128;-1.5787864864382077 -0.13540966800686435 0.61692471266800908 1.8958850166710497 -0.94283272208538715 1.255710832428947 -0.077093628520742918 0.4599395335428661 1.0015821118192052 0.77729173214916947 -1.2118390147574765];

% Layer 2
b2 = [1.566627707452757;-1.3908310155616801;-0.89222675480833413;0.80179776128447589;-2.2525187137921527;0.23972055908744511;0.29190925835455062;-1.4436408831966603;0.31138385658391426;0.43730018641502316;-1.7287799114572002;-1.2743287110862402;1.3448645805328672;2.270605363932364];
LW2_1 = [-0.67375646466912997 -0.87300460775295274 -0.21496732559513693 -0.3304229833038011 0.93258346101893275 -0.57826662044567712 -0.41899306583616119 0.38671323966073984 -0.087856343009046906 0.086644401970754598 -0.41256998006596163 -0.17994240633086045 -1.1672274519909791 0.15519068493428201;0.74285623081321572 -1.1069192594222772 -0.19427563320577312 0.7817038986593553 1.188981706223829 0.71526747008626601 0.12039451476691473 0.65691589487860791 -0.48022112410424406 -0.34919418524309254 0.76717069124415205 0.49020901485007751 -0.6454072537616018 -0.00071983234496030002;0.97342485745710927 -0.71092170562560075 -0.32941243785497187 0.6117918133444159 1.0642905939115088 -0.67211285310186231 -0.5426364402318582 -0.40729466821250582 0.11574412697617546 0.11503078026065103 -0.34322949271858066 0.12021951199727403 0.55800129822238898 0.35599280212567719;-0.79006110685362974 0.77988661493722167 0.0023465985186831026 -0.93336922724899329 0.2953133916194618 -0.064902577422636859 0.56637515783212677 -1.1163588048029387 -1.5892735879897359 0.29124898442781594 -0.4633682800547993 1.2754480032510125 0.07550791655594033 -1.1773632415225397;-0.99928263077914026 1.1871605989841363 2.4076682455885248 -1.5473378400170086 0.56528868304268154 3.4811615181966293 -0.22057016384886652 -2.6508306994344828 -0.17933210020792195 -2.5802148688417961 3.4131885288937456 -0.96727935974898827 2.4294185418375212 -1.4544877452447451;-0.50193229138026174 0.38047053505988759 0.28403924965038518 -0.59203224549671496 -0.83254044457220167 0.54930750203547096 1.1296031898058594 0.83416555646774027 -0.92721600119402781 -0.0034321484377927425 0.24267859628133859 0.087084492540173114 0.42022576491461272 -0.09710806777626993;0.88925575215031327 -0.045979471749229381 -0.34246137259228049 -0.11731271949903033 -0.24898612668295023 0.14090641600018242 -0.094494845672807332 -0.51928937739010506 1.0502408412448989 -0.8372274101654642 0.36671881020372737 -0.092598341586476493 -1.9745860324602875 -0.19719718828214447;-1.1445649703041201 1.77549143973156 0.39643480137776693 -0.65791401653288051 -2.1692002390196574 2.4738244671719594 2.0656902814086493 -0.99705989613064705 1.539456177764055 -1.0027261402382803 2.3234041080867072 -0.79136928652476657 -1.6512690372158574 -0.10203826241685376;0.37496420671950165 0.45529895092849698 -0.30889110528615127 0.79192250337912207 -0.38658397469399797 1.3976560563338505 -0.84957784809807657 0.37645624625935703 0.25749241909539017 0.22759861274894971 0.98461937109367215 -0.37393481041839832 -1.5278044722574495 0.80492277545215085;-0.079265983032109202 0.052855522273936362 -0.52640884417439426 0.12271894551514724 0.42685649809365517 -0.14371382304709349 -0.11507133325721433 -0.31094034196614195 0.64722183461522165 -0.67484163180257739 0.11308438596700428 0.074006942429827527 -1.7136251975437156 -0.40227981447926109;-1.2686558708700575 1.9366169144409611 1.0911438424357194 -2.7908304019197336 -0.92146450432331539 2.057328923794973 0.029469906015947303 0.017245863385975585 0.098010840517732539 0.29486106925250211 0.81831473913981845 1.0029564467673526 -0.27758440761340397 -0.43149446296428096;-0.5171978585954391 -0.0045687356263667406 -0.90173525239244146 0.037107817520638194 1.6415727642984879 -0.059447774821881391 -0.6977009801869869 1.0027435460062031 0.81432370115055464 0.3470068558447546 0.3462188765792486 -1.1267171052990654 0.36301008532821155 0.84394741950443619;0.38770091236595228 -0.29904080041418502 -0.46004530064427318 0.071447665557463555 0.36071034730902557 -0.49704092070634498 0.7331038287579682 0.69373843837210125 -1.1199499980928975 0.15817514577214167 -0.25411540069757566 0.092595430450860355 -0.037051713070963804 -0.70177608300063554;1.316556495247466 -1.3047247920117084 -1.7900884920956457 1.2545322755238972 0.21263445924255861 -3.1129415739932731 -0.42066475587529506 2.2513379745603026 -0.026717569068150107 2.0987922257119282 -3.0356624384068058 0.89421651509807121 -0.98316284610364391 0.98642440530890529];

% Layer 3
b3 = 0.45493123168955979;
LW3_2 = [0.54947386429076328 0.081781308475799508 -0.21743832248582387 0.088544609385177914 3.0458534213934447 -0.33456182933287926 -0.50930679550448477 1.017562242608284 -0.033739191159124091 0.58045719488514635 1.5996218803057571 0.068532083389719944 -0.63758931528724283 4.0766476943907382];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
