function [Y,Xf,Af] = NOXCentro20(X,~,~)
%NOXCENTRO20 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:21.
% 
% [Y] = NOXCentro20(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [-4.0246928109291158;-2.3638695400969034;1.5284075282294294;1.158680113513187;-0.47425020917256527;1.6403745526487794;-0.74272243938139748;-1.1940840035682607;0.73469269094905665;1.3078697768737091;-0.84315393326279697;1.7740780993391136;-0.82946704428972118];
IW1_1 = [3.295248518894053 0.2824521725345302 -0.71301074481008009 -0.97489211234481976 -0.59349095367111382 -0.29735336983938604 -0.2148986045179431 -0.036183912254542691;0.59172684865690994 0.15820883158082846 -0.12780431450509253 0.98732766682830664 1.2444001916442189 -0.16308917024731565 0.18199046650490003 0.40164174593378454;-0.82331874195557475 0.33684360258718066 -1.3479051068948922 -1.0813361945525353 0.9445353984096484 -1.1960417539065076 -0.14473753438658737 0.2833291194227861;-2.1255874311110801 -0.81384784239781993 1.4298759267418379 -0.64693743433966955 0.4593659382517627 -0.24111942996875022 0.38851290297890917 0.18078236086414323;-0.77376414549600625 -2.4772044063370942 0.26909546465298279 0.15585833062656346 0.37294182877131232 0.035059530673708462 0.20111915406137107 0.046561338484084613;0.56912754805070409 -0.36093002104046878 1.074994714368833 1.5234201313580171 1.713198587908336 0.072356753988063488 0.57464914724868132 0.60626779062523617;-0.58316763479367717 4.5019807627501498 -0.56302077332899336 -0.21632395270865379 0.19835317903345864 -0.067866041056267937 0.034028720399025068 0.016788998190937383;-1.3403886230096587 -0.8997613850562175 0.59490591099272738 0.96749791415259478 -0.61716575876980695 -2.2663177640009144 -0.40817626146638153 -0.035584640601493148;1.1548413178525265 0.32958804006916703 0.73588724052484922 1.1790074282017831 0.86461667067297299 -0.022751144299339707 0.18409061617601899 -0.093301486352177276;2.4027777261205832 -0.61202335347975101 0.48463392111610576 0.34497773832679762 -0.46697698116428388 -3.649364153891328 -0.098388986431693068 -0.39121430091889697;-1.3786210663462366 -1.8441524091635322 -0.30996194970948698 -0.93965107475440957 -0.10889137900198226 1.2952827197679633 0.12773749673854187 -0.24026160134160846;0.72513226758989136 -2.6449546797411916 0.1575737091558124 0.0082308102563928079 0.29617268013866638 0.45422758618697234 0.092472089461941576 0.1410245122630808;0.51852539832943612 -2.5644952511525791 0.85118151116958407 -0.076092720602603636 -0.52086391745770411 -1.5789694257021483 0.02282894322184887 -0.84146431900057972];

% Layer 2
b2 = [1.661136658062083;-1.6421567592599187;1.069068017055234;-0.38688393832961937;0.30541432275584812;-0.60715006606716093;0.41703281799333086;0.27419650010336932;-0.43874959293905968;0.12217170947077116;-1.163492720747666;0.57392136188356435;-2.5955542731875072];
LW2_1 = [-1.7493477529009047 0.50555042562358044 0.2426615423119956 0.41957345185031131 -1.5946843921189009 -0.7211989097756728 -0.47972272444468056 0.13633826540661337 -1.354561924415884 -0.15217393327692827 -1.6670300741858877 0.98225951114050247 1.1471761505521494;0.38185544825724899 -0.17121336661495595 0.13321523471519936 1.1562976022124996 -0.093277779268455374 -0.72041738041147718 0.91295508840114981 0.21814037612985621 0.54848579298111944 -0.11836870865044891 0.06495128062385172 -0.30850090842349098 0.22769084363506947;-1.1421218596283333 -0.64677433850937815 -0.3900194758129864 1.5438071506227262 -1.2167256392690515 0.71329183244470695 -0.9309753797597502 -1.2493231013572506 -1.9550836361019621 1.4842028969712489 -2.5266153517372985 0.45412269451826537 -1.7453549242196487;0.86651101315895751 -0.77408938153513118 0.19447491492136695 0.73108201145293317 0.93390743898657924 0.9248971966709022 -0.79427941075557429 0.8735998221240856 -0.59876238976934193 -0.12867183098131457 0.96052869293417431 2.1568550246901674 0.65953122628190131;-0.40702505854408372 -0.2927028825571294 0.71544286051390615 -1.4286597726887869 -0.92382292812724376 0.57555117169555492 -0.98961819073128898 -1.2780522971452415 -0.81275355371794844 1.5486465584640798 1.8144291763663505 -1.9507343262935737 -0.23076513171908294;1.8279792085057918 0.88998712311971251 1.0170954568116837 0.83142284790089149 0.02756060155774296 -0.75405336061896888 -1.9203999930414881 0.31559406615414554 1.5071301846646115 -0.72204966406056637 -0.96104861096608007 -1.2068029664123721 0.90485554784441202;-1.0681664869115588 -0.90257013486107673 0.61546373412599009 -1.227331080133355 0.31383118191511128 0.61971925813375117 0.88454622526874183 -0.75375205096204267 -0.89343019843498883 0.19927379742170925 0.70513949056018199 -0.46719894994172328 0.55179342213792937;-0.38637711682531761 -0.84610531719662629 0.80824591651196032 -0.16820290146867675 -0.81951753096145952 0.10595494960284371 -1.3863851293008005 -0.35689012750089466 -0.2469770181767133 1.5072152878989968 -0.83677097568788239 -0.69820335854937432 -0.80348043789834034;-0.29736499899404045 -0.28084053861866737 1.1187286026046801 0.55883758431020158 1.6229449996371894 0.10753360222858567 -1.1710292890464937 -0.011551947939484719 -0.33997264007855893 0.53061989180824731 -0.043277860578980074 0.80393699687488329 0.36621667395302454;-0.84962844457591302 -1.3069043388740389 0.12054362535223619 0.37098771817787979 -0.55784540025069862 -0.27695700705794418 1.2834452071594571 0.060751034847392721 -0.48448220290284194 0.8572904607505667 1.1226357350866645 -0.55106614312713309 -0.89589473659123131;-0.18663927533108038 0.80451181820545448 -0.060490814360307774 -1.0333623024194316 -1.5629578838233629 0.5912805024079778 1.2005937159759419 -0.18410380072708904 -0.35468269987089379 0.10873664958485464 -0.0039331084383452813 0.32305981620556545 -0.14661599423181024;-0.51902079385215971 1.2882635461373317 0.12585941056997976 -0.96666148650357753 -0.89573110680394896 0.81457030460799129 1.0279690765473242 -0.35959699167275877 -0.53386325904932785 0.2188327360764924 -0.39643261428799592 -0.8693927485877464 -0.42455986645887983;0.87237681865232597 0.3096160193929488 0.10866005429662651 -1.0181666163183385 5.6331243914603535e-05 0.91999902117935561 -0.68082465403830406 -0.4986330096957084 1.2382272281623572 -0.39814298622880417 0.5794445328670631 -2.1284944842353504 -1.2011317978375784];

% Layer 3
b3 = -1.1697632437869701;
LW3_2 = [1.8692307244683775 0.91849813696851346 0.60260379076434911 -0.98281210554702736 -0.86006874576568682 -1.8927185300381524 1.0835864577684196 0.79832684728262793 0.26958854995584242 -2.0194862203122339 0.99530757669107317 -1.6945254256511861 2.2280230549123972];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
