function [Y,Xf,Af] = O3laspintas11(X,~,~)
%O3LASPINTAS11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:47.
% 
% [Y] = O3laspintas11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.241545893719807;4.5045045045045;0.00280033604032484;95.2380952380952;0.212765957446809;14.7058823529412];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.8850871867969228;-1.7978617637187864;2.2671692040189542;-2.8770441887558653;-7.5168841261555732;-1.7958793231893238;-2.1041100034791951;1.6263334250059687;-2.1683830913774482;3.240340283804843;0.53361407481909395;-2.3706704029146337;-1.7446681546024692;-2.0833889131795016];
  IW1_1 = [-1.23186173263091 -3.8462287480765602 -0.57079482355924593 1.5215664503404474 0.85675807184887554 -2.8050844781595647 0.24642910981926164 -1.612976928209009;1.2844631592453015 0.12671491137161497 0.006316043939666614 0.14250674753982392 0.0042324237535562685 -0.3564096086980949 0.08230588959966377 0.11698707355006409;0.24455373179186488 0.31266610736640188 0.12872520515382424 -1.1414707766840357 0.4731479276403035 0.020558231374538435 0.19318357107636214 1.6586288058938892;2.7762831515311297 -1.0343722545830354 0.13108052628737696 -1.6613434245831258 0.15341192002001602 -1.2608030715820095 -1.1396900331103739 0.15297263763106903;-1.2776656994749516 1.2461377293945695 -0.82432137109226955 -0.14716969547937764 -4.4817873708084388 -0.30730428633248419 0.55148060019174949 -0.48841784243395009;2.7202423293410845 -0.70730228921895555 0.54308557911650812 -0.12756725513510953 -0.037102969720374912 1.1748061440532622 -0.34801060829239444 0.71465738749999563;1.8277626736989516 4.8396470671730967 0.57348464609471339 -0.44725666574995276 -0.15683509362285508 -0.55861611198524519 0.19148337645388977 0.071837768783757472;-0.8892614064854043 8.2773318465322898 -0.61520012359450127 2.2941910038882183 -0.99229174324332214 -0.41770096729728895 -0.32235144540932492 0.48111641907128261;-1.1945615409243635 0.0028003912394403757 0.33588848779076813 -1.9791772150177593 -0.1045125018694813 0.03915215728039767 0.02076628085673958 0.5699533170034442;3.5698900709619124 0.59788075004263841 0.56555809878186969 -1.2770978174598895 1.4759162888371149 -0.51858792878552473 0.81923189111398886 0.67348300571002351;1.5615431918506091 0.4211512925918785 0.22731337891126982 -0.25455467366696477 -0.93453912690165886 0.41877528336796477 -0.50783643160267389 -0.57140892493407569;-1.7563489338563436 2.4998902895219066 0.42912771753502787 -2.254956773993043 1.1576303597216768 1.5947915558788661 -0.01055428451296748 0.72510558992637697;-2.8396995318067026 0.31836827939617485 -0.19488978595013812 1.0090285997959976 -0.56881779647636777 -0.81598812020802591 -0.48935061273787128 -0.26261020557866044;-0.43064701577846631 -0.24086477859165403 0.6052416625507443 1.4674216177995332 0.96097293673653694 1.0005816999895965 0.57458137153996236 0.79946542850032198];
  
  % Layer 2
  b2 = [2.4264326848410924;-1.2250856004658679;-0.38417470184048408;-1.7461084556918134;1.4047188162129955;-1.4755457952716489;1.9764702311837592;-0.98807279651785451;-0.44509014987275564;0.55757914733673009;-1.8468650041064198;-1.4614676483613811;2.6722979731016436;0.13490771482771385];
  LW2_1 = [-0.52187354018808607 -2.7698849201884697 -0.32480312444628079 -0.34324879869540276 0.69615206425576037 -0.56682575918791134 -0.1741226406488563 0.064190788577486529 2.0842778040596106 -1.8936979376186223 0.73237595146856471 2.2355958910496687 -1.7850227284692097 -0.053263647564565628;0.072356816405081917 -0.87380419962513556 -0.58577205564092472 0.19294557144602412 -2.1139501240575922 0.50550019551219616 1.5392522330567968 0.26445560275126478 0.44769480782233467 -0.49136676930634349 -1.5407117759053968 1.0039887946880612 0.96589718898573507 -0.71646013188781887;-0.21230076952952812 -0.57201373630289232 0.93347095293098459 0.30009281549709288 -2.2088119998638645 -0.53464048608146097 -0.18240778258713669 1.0840511591182991 -0.77970504178822975 -0.53678454761152394 -1.3228433160336039 1.977933702178249 1.1828493114205709 1.7602989839388941;0.3914984235925581 1.0153627348288252 -0.25041518966227622 0.59343159453183292 -0.80153899434077447 0.44863375715352455 1.0316488546297005 -1.0061468839268868 1.364497754296522 0.70627411837895782 1.7539636108466312 -0.97646561090298734 1.7518219408635027 0.65697628279846643;0.50165582775005269 -0.50478552134661947 -0.98092392857371968 -0.37439488104659568 0.10641164851649174 0.33976211956290081 -0.71089890820062185 0.91556833367508184 0.0054437819046334462 0.14150122982523511 0.53631321966769541 0.93831270509780995 -0.66223550715954571 -0.32967754694700457;-0.38913330882977676 1.0439304157866256 0.23763700978946994 -0.54581309310142112 -0.65039897772490507 -0.70023977302948992 -0.55098230549908078 0.042478240926726682 1.9752245897980663 3.7993602234846899 -1.1781687702087698 0.64477351135655459 -1.0526693948852253 0.84557421531280308;0.37872500980845969 -1.4520315967878412 1.0160121802187951 -1.3503094748623232 -1.8218564716913377 -0.21442446553777167 0.072143027994344217 1.2421027767345656 -1.6146362337289779 -0.91508352945489646 -1.5915286740712919 6.0520726395643258 -3.1370640483196084 -2.5239923945783485;-0.98209057847580905 0.11860959390638327 1.474561312198589 -0.62979645865218825 0.25902737049754693 -2.6942675903995554 -1.0530128397436025 -1.2138908484840394 -0.37855013812535565 0.086652287561790317 -2.065498851153031 1.2160650438703693 1.4800543624317137 0.99141377363363881;-0.26962556312769431 0.51817391183168138 -1.133958623371508 0.38853719359582201 2.6918187558431241 -0.25657424739111634 -0.87284669888466981 0.12640382447411183 -0.24659762083938694 0.014352347630972036 0.76520406568693355 -2.0556037093761281 1.9652249838747951 0.30409440982078151;0.35704144307347085 0.61519826158354629 1.0122326196508762 0.5625933177066943 0.23895127573606331 -0.10472180871034939 1.3921607647779903 1.0742443111773425 -0.15076681311324922 0.061398936426635735 0.078474070291541353 -0.80187564268247025 0.12471766879183802 -0.69449784390680458;-0.45338621884020169 1.0043908859758239 1.7639097034127051 0.73699873879773348 -0.067656739675513403 -0.73217956150966845 0.85495580660107384 -0.82575129534320502 -0.8042512832449028 1.5631740813730206 -0.2837398594399988 0.41721175166827551 1.5809262167801343 1.2226233914612956;0.1896756724219012 1.1727454503954324 1.2547503511064104 0.69015874200102412 -0.017807962787525482 -0.14026920167244428 0.49114418127702841 -0.13072109772151391 -0.92851257327640069 1.7054639396047182 0.18861779943349613 0.50596370242581568 1.7791256731199019 0.66831804177741783;0.20277575462045419 -2.057259746833779 0.39971550907582393 0.20651712072556166 0.13017151573387983 -0.47885608598233154 -0.055492580647696729 0.17180656513402007 5.0285596232872738 0.080223092288175396 -0.18547039392596287 0.47238067511030202 -0.71408878023676614 -2.0107240338161514;-0.0067640995569676187 0.28637046890832796 1.0148599948835977 0.51448399519294818 0.70631642298043396 -0.32141203338259278 2.0725185826317518 0.71262905031237145 0.17563188410481248 -0.19232445806685095 -0.5412685880313276 -1.3102985309371296 -0.18888923842271504 -1.889508221037574];
  
  % Layer 3
  b3 = -0.12605809368726123;
  LW3_2 = [0.58137149217962725 -0.6968914201588865 0.48083765292631553 -4.6461457377539972 -2.1865147252658002 0.28607624426425043 -1.4077379658250186 0.5502998160698771 -0.56608727171021234 2.6993142477970622 -2.1417407546618747 2.0751048443435822 -2.8294030736633271 -2.8411579966130596];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.7058823529412;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
