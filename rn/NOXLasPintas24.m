function [Y,Xf,Af] = NOXLasPintas24(X,~,~)
%NOXLASPINTAS24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:49.
% 
% [Y] = NOXLasPintas24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.96825396825397;18.6915887850467;0.0175284837861525;0.0546448087431694;0.00640204865556978;0.138888888888889];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.510698287017215;1.3722321999022939;4.9259229000859603;-0.63240433932196205;-1.3007808812498587;0.14960913031884593;-0.32188257390085828;0.090622349936227156;1.0618618463739942;1.4983733549513896;4.490322519576214;1.2621284011555078;2.96732588754266;2.3120643935553225];
IW1_1 = [-0.41377758693514205 -1.1829150398346857 -0.52545396745255391 1.0664205817512928 -0.86456128086296335 1.5621494599506986 -1.05579743570992 -0.34359029293021626;-1.6787660673704341 0.77849855152809067 0.53395115372713586 0.11619092172470248 -0.73943373870360007 -2.2040236095209815 -0.37046928127963896 0.07239528002811467;-5.6844449980664224 -0.28389539734545793 -1.003566598650131 -0.16849543628690614 -0.32526455469731758 2.2053481834703943 -0.19366311180886706 -0.47001818944582596;1.5303170743624837 -0.62341442158955562 -0.12978178059865267 -0.26609425712116641 1.4298613407680743 1.4121380306697064 -0.2188372164855959 0.071050799087264235;0.66688600314874968 0.97770999801598568 -0.28326553046349062 -0.52643286756704843 0.41056791937388076 1.4031253139989481 -0.4443085237962579 0.10649921855117291;1.6190848784354577 0.40203555384696721 -0.20022025332738405 -0.76944368327308521 0.0674131421480543 1.6892241015257576 -0.80873910711343266 -0.39565280462085328;1.5724075137692528 0.90063103513207565 -0.70316500186692088 0.43207796229777373 1.3094716453568274 -0.22661037624763464 1.1209230774618977 0.59659112173675821;0.046848382064071589 -1.2052960222101294 -0.66853940264514122 0.41783211611110438 -0.13344021430146544 -0.93527234832973105 0.20916331835256735 -0.018684407682502888;1.808592941189727 -1.5087755159938323 -0.024767342655288793 -0.047139719058355956 0.44624207973384344 -0.68178902778735473 0.084971470713211816 -0.072461219845705624;1.6854211249090958 1.0597902417326874 -0.53252517683965417 -0.24224637234710347 0.055242173642109781 -0.19870215824621651 -0.43899566626718012 0.30156501520774159;-0.23889739816647435 0.69329805833795743 -0.030802557584158716 3.6959932302730825 0.3921082338006977 0.86636713768436135 0.35886258435611912 -0.19455592167186181;0.26287830218839209 1.0429803430772207 0.14723890165251072 0.38953041980742059 0.037218095290936767 1.2717043624988624 -0.24707925404476758 0.16672109242680413;1.863535031236607 1.9294273286168355 -0.30710014165739602 0.048563239688964935 0.064268934082695364 -1.1749975334138794 -0.18930672202017804 0.55543699818500814;0.2797185069493619 -0.41917233257299835 0.79339266102454598 0.27348569802321893 -0.15099918634758244 1.3519760180766349 0.21709768018845746 -0.52556386828635115];

% Layer 2
b2 = [-1.1064294086578221;-1.0522721997427318;-1.5921251384602155;0.035208353875257323;0.53013689786026152;-1.4597796916744608;0.83903422203595546;1.7347574592557653;-0.47418101107597943;-2.0875806907554151;0.55006056888737831;2.0551849732936724;2.6430170121818888;2.1435607324690191];
LW2_1 = [-0.036347069265030396 -0.29708161144462142 -0.66030817495822958 -1.3145755700860691 1.4363704719877706 0.36537567139987726 -0.56161111755661497 1.1578229734587844 0.50209521577628236 0.37777910841391271 0.71406878932284745 -1.4550473005005493 0.34269222845207969 -0.41785272400058915;0.35843373217425578 0.14387256314677377 -0.11238463964901248 -1.0012443819243884 -0.21344892447739439 0.18881882465454036 -0.076657731355944073 -1.2768590076456245 0.81025315409083931 0.31590578811240666 -0.12075388205486563 -1.6340664516189969 0.28859796846455782 -0.54017532130427581;0.51112021571097965 -0.70882590825361724 0.62667991829716541 0.08798479025302651 -0.29615065508502203 -0.58527821903353017 0.2538482882039314 0.65883710467920231 -1.1753386644395227 0.86011795023999382 1.0460686414891258 -0.12895929103259565 -0.50850094003838098 -0.8839154638206469;0.9185485646057483 -1.7525486675852788 -0.56798745981232523 0.18094764001122243 -1.8583560349297492 1.6926341810080796 -1.0990712975167152 0.40943380858341372 -1.1803325453609974 1.1468402705086309 -0.48928089096098076 -0.16763614140625582 -1.6438205913190622 -0.37260137375002406;0.070237552191099034 0.92057164784810375 -0.47796415252399033 1.0412322969837369 0.1269944814933549 -0.71646836744388653 -0.24237130021450731 0.33237711890805266 -0.6953434427103975 0.63401650995691561 -0.6083021511101051 0.39574831780292496 -0.37976245555376653 0.89285569268392151;-0.087896363216271312 0.43069906275510228 -1.0850060895545841 -0.64371620472924451 0.37955508746116551 -1.5153823126698769 -0.71147471893294312 -0.42927263888654987 -0.70854641778141425 -0.51194570682508767 0.054959334225443926 -0.15429002044731457 0.2653461516130749 0.39258148197153742;-0.62329842540822211 -0.088610657677438961 -0.20532336579266658 -0.32314069922351407 0.79111990909307028 0.1231346272406645 0.43498860166372028 0.24057739066291239 -0.57786701358303283 0.70925984477606063 0.80289325866601646 0.38747679639777116 -0.26724953233638665 0.67736458562386948;0.88650790939431379 0.75752799555008477 -0.55724868244670989 2.0134236485538102 -1.6498326772338172 0.37091037539168853 -0.20282434747315986 -1.2962081164570161 -1.0528754522896713 -1.8389012136116187 -1.4508534236173958 1.0810852304489451 -0.11658862239374573 0.23058221450384653;-1.0531811650297467 0.36536878547174989 1.6103776486679018 1.0908645272978355 0.67914304840158735 -1.3157387029103158 -0.54615523373610653 0.83135699309649391 -1.2962586519933659 2.1423782740029149 0.69277498783430591 1.5941224110510244 -0.71599560546350005 -1.4993201096846758;0.43361975731997088 -1.6645676583148445 0.45144513243906942 -0.42986672342773347 -0.5635045194707281 -0.071760687589530553 0.49708047687056067 -1.3935785022893257 0.93069899396751388 -0.76564121891063597 0.45300450706095924 0.16367706814973534 0.35975077776169906 -0.21244906132258007;1.1601559731731912 -2.2500866508751924 -3.474237510701577 -0.67462191254193493 0.84610473695756738 1.2804998850692331 0.68860380612814442 -0.50073181451776427 0.76419064066964004 -0.04402361557748067 -0.29687540726281536 -0.090112479370473786 -0.62827922236868339 -0.37434105168669518;0.64777092292079996 -0.97233900769281123 -0.36819631602775105 0.51540559748404935 1.0114164220421593 -0.024773900001501314 0.27192073628228636 1.3176321294740709 -0.34161826146651675 0.5445804275004289 0.24063042091657205 0.37300636896997091 -0.69040510894592011 -0.30505278476044784;1.4322252476573112 0.22764175039143364 -1.0135695483543508 2.2680460156151478 1.5820360175368531 0.028619511147301092 -0.09217038189561591 1.1880560738204304 -0.33237988020930942 -0.43847540772090271 -1.7434693821542451 0.79484173037240613 0.60497145279315911 0.16091386086333731;-0.76162337393412916 1.1036103970329239 0.72863840480413999 0.53850322495853897 0.70038654327798811 -1.1460484587922795 0.62660581491246781 -1.3409239128997867 -0.94921385997674268 1.6385840586757663 -0.15299186459607503 0.62820132855778221 -0.76105065897624613 1.6349633928055192];

% Layer 3
b3 = -0.98305077948941422;
LW3_2 = [-2.4933328412370739 2.5354392029119834 -1.0732976751218184 0.32184645797535982 2.4805627394000469 0.77331947078493024 1.1686691851752458 -1.1571588378702726 -0.4151682598820895 1.0890780459639899 -0.39140288769656495 1.3853587730532175 -0.86401261825901177 -1.4541326349549915];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
