function [Y,Xf,Af] = PM10Tlaquepaque22(X,~,~)
%PM10TLAQUEPAQUE22 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:42.
% 
% [Y] = PM10Tlaquepaque22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.295720950044899;1.700884081656274;1.8781170140336871;-1.6429372175976611;-1.2395991794689154;0.35140117982050723;1.5357413823190504;1.1811969936355213;-1.1320112373769633;-0.95898343095812355;0.10663501362873977;-0.13348123527570965;1.220408911085709];
IW1_1 = [-0.26761494350696685 -0.3676032672490368 -2.2780014214859841 -0.027112366188760444 2.5905914416514824 -1.4622404917466618 -0.3756559803703432 3.349366792806804 -0.42429295545466089 -0.80771610313798059 -0.75398343992525674;-1.189890399821979 -4.753699743767438 2.4162091627623759 -0.85928792672339538 0.73226018480276389 0.26322695775164773 -0.5203985769288697 0.42396629499642907 -1.6149898058111793 -1.8743016262513308 1.61323366935559;-1.0991646602535434 2.0173531258280621 1.7054183857741254 1.7074870241016102 -5.8485393997736699 1.3307933408599135 -1.1373102241270672 -1.9717895689111986 -2.6732740265773867 -0.78515961023068348 6.3031695597158093;-0.39770381640206987 0.39811249115206043 -0.4638026054146091 -1.0374336094443977 -1.2100669260985388 -0.53034115754771805 -0.1189243837624467 -0.21697414229535958 0.13150216818427915 -0.4754303046841053 -0.46385661576271675;1.068000306145384 0.06004080554703034 0.20765532857640007 -0.48214175780502461 -1.0263714200947045 1.3242653667859046 -0.30156369557531471 0.2607937162372948 0.84932161802577122 -0.73914944487877043 -0.19374794020785566;0.42949600337290766 0.12488330492813647 -0.10119159847244927 -1.1440421208561622 -2.2612035668403681 -0.99115314331064253 0.028283527540446565 0.25460501451569617 -0.67210474477862647 1.7349029246295378 2.4399404426478251;-0.63064199021990652 0.38622589255935169 -0.79844590007034488 -0.96511472492908623 2.7403057579535104 -1.7716621059521571 0.00040912980245620158 -0.15589372882983643 0.97017567463197496 0.24614712733608096 -1.06080094982769;1.7249803295273418 0.15780684780643869 -0.29144781890274613 0.52762560403479852 0.81914323577695658 1.1989058944195543 -0.075547450508623867 0.099966028776669158 0.42790348503904008 -0.24772137961922716 0.29867586131036788;-0.23485176267654437 -0.64005207215618087 0.89228579563249433 -1.024538028779469 -1.4379491002231186 -0.47284486646397011 0.027558875887516859 -0.1321977017027143 0.056906925891587759 -0.29672354110192234 0.39681744013574383;2.1509725035495886 -0.03075844699285955 0.14878957171150556 0.07631223988612662 0.54362666647705316 -0.14415929976599745 0.0078205390747746913 -0.024568389761243686 0.10825486431807854 0.070001126661596316 0.088165248905575894;2.6782273083827071 -0.10493283356549905 -0.42539719431594941 -1.0623792817737454 1.5826918973610413 -2.229821958670239 0.27282151959058848 -0.29014737372142141 -4.3713563681854248 0.055680895853885949 0.73610305558814138;0.51731563769641098 1.7838941127300889 0.74129245693716428 -0.39467341805049311 0.65476317496459446 0.042330529416127589 0.29188745625893342 -1.6738323750469166 1.0291268817975765 1.3137352771709934 0.80443977131154287;0.30481278969321041 -0.19982733991180482 0.057358581127910487 0.28325883282629427 -0.064811476656909423 -0.054898617888774516 0.038168381552852577 0.036525013201871903 -0.29785738386283073 0.28272655557531301 1.1096389849228609];

% Layer 2
b2 = [10.034105449966445;-0.57409018795711475;-0.88849805511220548;-1.1932010266620487;-0.58177583470960992;-1.3834874255579941;0.86680086339681095;7.6310185594528308;-6.5471307443882898;-0.096936178345281426;5.4566189906099538;-3.4943134472642745;-0.86310414020311144];
LW2_1 = [1.6949272229689996 -0.12700398946818595 2.2912185468313782 -2.9546064616760392 1.7509522094503327 2.794937996203311 -3.3398808865321921 -5.122362275218193 -2.0425251380284828 9.7018254192292286 -1.039875134452499 1.9785443987011797 -4.3018557650849241;-4.5815489058954091 -0.96969213570972368 0.62756797572108614 4.2122742220002314 -3.7240977256704175 -0.19060614749365262 -3.0829551204113588 -3.0704157886543757 0.50074355612308952 8.1144479277605317 0.74583300741003355 -4.1070231804272703 -0.27721140976299308;0.17395231926827251 -1.4138106645411412 -2.1864853290072164 2.0636537521609419 -1.6552520641684036 -0.8128668896859873 0.39632873453701145 1.4022304484517212 0.71759288143498101 -2.6981934911386181 -0.057003792137493764 1.5936250915511954 2.2348388013978417;-0.2365279025578311 1.1630351456010386 1.5083996957158834 0.88767479690825313 -0.42734297178061281 -0.32878154643832747 1.3642105475581059 0.89775327751763578 -0.85903156939831038 -0.14890555063370053 -0.11401792594276595 0.20615747618027452 2.4507353970097348;-0.82619996886948954 -0.73876889316994454 1.3713712874862052 -1.0566500375949281 1.401173821814607 -0.22270278065329299 0.16225468064809667 -2.2138376123694359 0.35749019486602296 2.2107876067642702 -0.014258876633587061 -0.2972425343715534 0.063991422102276901;2.6615230332950053 -0.23777967401681913 -6.6007473929513676 -1.0785917316220892 -0.31299872820839458 1.4579338559342865 1.6720258867917317 2.516092477989389 3.6680183882037505 -15.947068913793307 3.4060442398870991 7.761495701814046 -0.39584810131249815;0.60848889228972169 -0.01619249854393686 -0.13661797710385867 -0.085598106648524061 -0.86521076140008879 0.70434082484528615 -1.0974284817193025 0.70468461800803273 0.77898254296133473 1.0754787838833655 -0.30870360666023472 0.28540761533687331 -2.9754318076983468;-2.1708416242470734 -0.28518417165935389 -11.897312116645745 -1.5346485976350477 4.3154295205413575 -3.0597883574329758 4.0667363637357123 -2.7637556428897097 1.7245972654165249 -3.198855130725776 0.56794309775194518 -5.4824935570723738 10.952576301700802;-1.9126173561395177 3.0718612009853068 2.7384653191576955 2.0775316186336168 4.875847114325218 -0.53227474442831468 1.5732746455825284 2.085895732499127 2.5203932670923845 -3.3009645812026776 0.95696567799922294 -5.1708423399044268 2.5093332891419222;-0.15386613150964185 -0.68425335009155019 -1.7451688236219902 -0.34570885536070556 -1.6251269029860789 -0.9816114281153322 1.9359954615195005 6.5355981787891588 0.4783063372386363 -7.7900792796979585 -2.2537739803814469 -0.63912404415915558 3.7255978438271362;7.4867201538710715 -1.6011935322091542 -6.0737421682349693 2.5828915832667625 -1.0821598321951158 -1.2682475545016745 -6.5424485161934669 -1.4067041999373056 0.46060769170646237 2.9248254741117892 -2.9103797637228999 7.3915093512345313 4.1680305493190479;-1.8724892490250808 -3.1898675087822923 -3.9532794143279881 10.613452199780475 4.8209966702735594 4.6526099590460781 5.0238676813287242 0.27210347838371024 -5.0187718804776882 -1.9627905604479923 -4.3944527264443494 5.2094106234666313 2.7031985023023997;-2.8682933824298846 0.031745778335365418 -8.1360876881908126 -15.210648374831937 8.8013432889093526 -10.335100859718931 0.12973085291496245 -4.1131261763470874 -5.2277405757255568 -1.272211798337155 -4.0655754810903115 2.6903047802269509 6.9120564201450323];

% Layer 3
b3 = -0.68469981048724771;
LW3_2 = [0.065665676298954312 -0.076890999284895428 0.11725978699363558 0.20358527599407972 0.3101630806136052 0.035470322631886875 0.46776920458293669 0.069661322012917831 0.034626205162801092 0.26058842592934445 -0.037178431997352469 -0.029692561810412826 0.035847461520077631];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
