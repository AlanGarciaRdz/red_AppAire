function [Y,Xf,Af] = O3oblatos10(X,~,~)
%O3OBLATOS10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:45.
% 
% [Y] = O3oblatos10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.697622531436338;-0.90594765576410519;1.8293810963730039;-3.6312094301687821;2.3924973929761997;0.20666849167564741;-0.7858308198364985;2.1777470402211079;-2.4144410514335228;0.4219512448288204;1.9576353360277317;4.1009348735745643;1.8859609320178912];
  IW1_1 = [1.241644419225413 1.5469242152096518 -1.2023462569554928 0.56674226696369956 -1.4008162981047527 1.210565922494258;1.4120753134872921 0.25536393378037808 -1.5443420051174921 0.012703364349994689 1.3769964473085539 -0.71026985839119161;2.5499412397524495 6.3068405656174953 0.92820530718863314 0.43374688521737154 -0.82679048387182819 1.2291917356413595;-0.33914307604787441 -4.9487901595850108 1.5232228464975419 0.67430859321221814 2.8446280844992065 -2.0851402509470893;-1.233995379723767 1.9116960247835986 1.9953661872431503 -0.18727177733647929 -0.025085099430741369 1.6298855696647334;0.73110568353616667 0.96675445516154057 0.21519418662860432 -0.46962928366405454 0.78144610283711824 0.72046173362068888;0.3729596779895844 -0.31914803161536381 0.26733236548023437 -1.2117446846334023 1.1636971492466348 2.1164284807992662;-0.2131356497601187 -2.7226315447903033 1.6378244594563163 -1.4609150716495467 2.7525377708112471 -1.0003439740741256;-2.7768220590850494 0.46059878996925491 -2.5398963443628291 -0.058423069570640168 0.16286459162089731 0.8236020152113489;-0.45970091006818359 0.955348405708207 -0.49050407428757981 0.81868019825553406 -1.032205821514109 -0.87632581908228768;-0.629295868892918 2.1347623853101774 0.40409447103310187 1.1145144411178438 -1.1026676287083073 -0.86818029312649814;3.3989999488353182 0.78520337827512143 0.66489121229210912 -0.1899115823885893 -0.316525149329764 1.2161355515138217;0.24216184786095957 -0.7550227909142222 -1.3941548412835523 0.63923125730639196 2.9165739075533716 -0.21538122460697914];
  
  % Layer 2
  b2 = [2.5422459361734409;3.1446209064808328;-1.9309340515471716;2.6454091071360222;1.7504682532932225;2.9376167169511738;0.82813584335470358;2.8568106040306049;1.6183350182044258;2.1268888332372038;-3.4068659108806614;1.5054716504067505;2.6735729965676773];
  LW2_1 = [1.031319124720157 -0.29175600912596167 -0.08938173752870264 0.35598776395065002 0.95181531280325005 -1.3870452242432805 0.47483244955158266 -0.29741504120836632 -1.2825039693561053 -0.58789251018514432 -0.12139625516950173 -0.41988399584153946 0.65249995909639946;1.2073986741835956 -0.44884035797949273 -0.22745210131541857 0.12903679318239233 0.916130591117437 -1.4327776761483662 0.50462505814273917 -0.21476493940059554 -1.0939327295365133 -0.59560493316252516 -0.093691693635866422 -0.0071028639587799704 -0.16588236314106977;-0.8646514223055588 0.45417933367722463 -1.0721031069728184 0.21664849258886337 -1.4944793229140667 0.0079930090589178972 1.4618839229084175 -1.1606113229715647 0.85124047688131332 -1.2438247305285468 2.2262595338617168 0.46535056541100883 -0.58015310188317393;-0.48588196229308955 -0.59683600686398264 1.4227238132243787 -0.040435261150036594 1.6043128966050675 0.54489290188762241 -2.2098981416209766 0.27411291377574398 -0.86998408530514859 -0.43752739565499821 -1.2768604427343349 -0.514224345452586 -0.41161513005780725;-0.27571202372549891 0.48589046266016067 -0.19765698430130485 -0.072356707239626838 0.22079557480237683 1.3044965885229041 -0.070110172319734779 0.16634187913597151 -1.145525908097953 1.6162510915920838 -1.7851859972942656 -0.38744633584448684 -1.5137143737478622;1.1690606410440387 0.40298397121395169 0.93263427225838269 -0.17627950353489147 -0.58648830663803397 -0.71269884845165432 1.9872430015883396 1.8032803094114129 1.125130640094558 1.2957538058441314 -2.5001299734240949 1.2462450008532777 -1.574819018546044;2.7485462434191112 1.5889419483735363 1.0124146742552675 -1.7778988192616518 -1.4414661693741782 -2.608976977006054 -1.4525593131444434 2.6129187735139778 -0.31624189191724822 -0.98101357621525853 -0.61374435280368955 -0.53160498639379117 -2.2618352233697618;0.36886654467795105 -0.42972068023069243 1.0020463017059957 1.1440598499936701 -0.4911234042348791 -1.2522928767323842 -2.2588043723094722 0.2931622547816724 -0.1799970036167694 -4.9475959880499518 2.1317764952851896 0.90870797494758981 -2.4798413095758987;1.6445343934883325 -0.099823545115518039 -0.086423479503459383 -1.2102774604748419 0.38777101632004213 -2.6569470007978895 0.76570316479814626 0.004550487829807142 1.4659116586408765 1.0466292624186264 0.038741297520050705 -1.4762756069739966 -0.85743971631868765;-0.11974374707385364 -0.13709497159152834 -1.3005604435093132 -0.075721801289652085 -0.35744563525643702 1.1201392078116912 -0.37290775364739059 -0.11533032805972575 -0.54519596368171119 -0.062437798502737188 0.30759258262503097 0.66415632444755857 -1.4983937026846434;-0.43666390394535048 1.0743835091355187 -0.5191208865099165 -1.0909512260572478 0.83532488893284451 0.067282235594318604 1.3005181903710827 -0.57428600299633725 0.11851923502335915 2.3006427969261596 -1.1679352194136461 0.69525369814061666 1.2831558893451882;-0.62224494001410047 -1.046885574290837 -1.2600558692574702 -1.5782947546022523 -0.18990533674871563 1.8491248375301637 -1.4398860199632779 -1.4623407381937412 -0.35752693026215937 0.20663121132363485 1.430188326276334 -0.79526660590095666 -3.7793987582914816;0.234159013941383 0.088706093219391019 -1.3956760868779854 -0.091105511362408742 -0.93886681002393435 0.72553703362266919 0.3254993540021589 -0.40428064561463456 -0.48421375512499842 0.5082166936517567 0.34084378864253684 0.76514097225008793 -1.014561877213819];
  
  % Layer 3
  b3 = 1.3679604408293287;
  LW3_2 = [3.2170119781338604 -2.9504216333459392 3.1580419076569077 1.7023757030828275 -1.8263208139201612 0.57386006716589621 0.3140046705436404 0.71128239716155106 -0.45330263946187027 3.1231989117420702 1.3287619329822995 0.51993362020187595 -2.7122602933115307];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
