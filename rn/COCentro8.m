function [Y,Xf,Af] = COCentro8(X,~,~)
%COCENTRO8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:30.
% 
% [Y] = COCentro8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.8572375075995926;-1.1001897814725528;1.4798623128326871;1.956819359164313;-1.145595043584015;0.99536555511192404;-0.89150004892609758;-0.86888180696061235;-1.4892402299227274;-0.03904934661486191;-1.0586084685301023;-3.9150011947780889;-1.2898548488118335;-2.4715308992139438;-0.65336242878322126];
IW1_1 = [-2.2029577805285094 0.10764375769989067 -0.25430597932942728 0.58190237680251033 -0.36861500083171223 1.3019461074088292 0.058656393930990439 0.98919283090385079 0.065187933121969049 -0.28474146410137968;0.73876940824407522 -1.9243472070272063 0.48543825505607707 0.092644855677689875 0.073654605968625192 0.09789510709051058 0.19746202670743254 -0.25988053788977955 -1.2655155809266976 0.17510102758716553;-0.73227437923822658 -0.38566150812378341 0.088899730918409886 0.021900187055942842 -0.29442319252726251 0.04196868447572849 0.037093477003565078 -0.22623941320330601 -0.54359799743279813 -0.48938230765809654;0.62599109281341503 1.3832639050815685 -0.34648151261147958 0.49355904932725586 -0.31273723403185438 -0.17701084782786597 0.068399503867165687 -0.29137478068657552 0.25330888875279833 -0.29355295981532264;0.32916508408354556 -0.32678740822004115 -0.052409928527326316 0.072661022652900586 -0.37742558192775649 -0.98734683208791896 0.10991899256935658 -0.27825403430844087 0.13829419668315118 -0.033803442090608878;0.96505748288813276 0.52168856595450697 1.3575303948159159 0.46052662280882833 -1.4778800558156817 -0.39102748989139746 0.011285628343806014 -0.19187803119017877 -0.18857492393700753 0.57874038455380106;-0.058881801687045876 -0.90826154515381785 0.16539069434259424 2.6879777695264191 0.060022636866637516 0.61365618647751152 -2.2363882604182335 0.46626867717331033 -0.68712374685219435 0.7410885559059659;0.086777120388338125 -1.9519688918141456 -0.48810207537640787 1.2186587201906591 0.10536861819724737 0.58176249388967949 0.39822819101416063 0.11619713960173511 0.54191830596336044 -0.018254471432407299;0.91890983734832599 -1.2171697680154543 0.63367784170896024 -0.10316323233878158 -0.3055534172830377 0.03459630172298836 0.03105382406753868 -0.48174263715579224 -0.12116019271998663 0.33132673111335298;0.64853630015595087 -0.15131066134052046 -0.70462268888007051 -0.32340744195838067 0.55835225423868085 -0.17367773160398781 0.24048866518603146 -0.35200305706951046 -0.23801351486597988 -0.27185862949586143;-1.4408859924244501 -1.3727261162119664 -0.199285594904476 0.11353513833408879 0.083663108941231482 -0.17574492253612292 -0.19118641547254805 0.19568160799212619 0.33621396304074247 0.028596508484669492;-0.65927113722788766 -0.032354504526645969 1.0960790926256916 0.03480715758023941 -0.84271573980446146 0.78808228968844674 -0.078620106835684253 0.37226989062961879 -3.5526922433342332 0.022449811769030614;-0.29706785889425635 1.6682852550387832 0.90353559367082592 0.4012299939597086 -0.45638314798811686 -0.022473792282274568 -0.046033696459742555 -0.048267157575081647 -0.27648729598109423 0.34988465234387001;0.1199080892937731 -0.69739811178719058 0.067763777423276814 0.24267880782724605 1.0165023171595762 -0.076974093236030883 -0.17068887752619413 0.011723168559470826 -2.9423771828924647 0.20697056726267668;-0.40126276813163941 1.6986237079494464 0.17174427128024561 0.0053650993763720654 -0.16603650496884512 -0.35674310828807959 0.013355295536155817 -0.09964282754066163 -0.22879240550448773 0.013978230974685379];

% Layer 2
b2 = [2.1067664167366278;-1.8713182015734036;0.66889993129528313;-0.40414053113944259;1.8967998594511688;0.12897385606794223;0.0093312261943809399;-1.388555878866647;-0.061707349382202327;0.14804557069190294;-0.64851257927779116;1.9360479539619466;-2.3055769314986918;1.9115741257403238;-4.0108364363913243];
LW2_1 = [-0.62955843012047752 -0.16444426939882398 1.3966345832439255 -0.68890079399378634 1.9316063685678375 -0.39375388384357546 -0.0089877562354248285 0.26612612854172452 -2.3052505468808961 -0.71358821145685658 -1.0607886342923312 -0.46681415824225547 1.0712512768126736 1.7284505939563213 -0.39589099079414547;-0.38486352157192594 0.18534376838777022 -0.35044963922613437 -0.3257976367475075 -0.84902533922954504 0.28265745564665101 -0.9790236609457571 -1.0823189627567182 0.38770350620281391 0.88653504399549221 1.0076852953580013 0.098223391684269759 0.22405673097789064 -1.7647649656997071 -0.41240953479299575;-0.48857352639199841 0.54691558669434648 -0.69537990632137447 0.043711921507697489 0.44622295640857967 1.719575411035553 0.027412913689198015 -0.045839119642979431 0.84786672416457098 -0.82564692933854789 -0.26358240317268083 -0.2633940202249242 -0.060766639325185584 -2.143051132915148 -0.84865933541000071;0.84840856864979242 -0.59218198062103355 1.0549800762525052 0.1212664714111269 1.2670327813283158 -0.85924236842959312 0.02768880108198632 0.49415380953911303 1.6775419940848171 -0.12960776965079981 0.57947815224408472 -0.024390726828622901 -0.94806555130224801 0.97866146518905917 -0.77099597369132278;-0.76664820568162684 -1.5108155546760664 0.56808150265137181 0.87786133267804156 -0.47712830278709661 0.79163791946555584 0.49386062868147418 0.31199791022832585 0.35384646233836814 -0.35816292412833461 -0.0091020167365656324 0.50263934599316851 0.23318511569469932 0.12974007188817085 0.019286233237099368;0.1687848417815084 0.39501480442943909 0.28124855729534265 1.3470355494434536 0.40025761925402359 -0.54688556421495604 0.67455365509887688 0.51660900512354313 -0.9007549749234578 -1.1639762779221579 -0.92911573816331894 -0.33138815438931346 -0.066695954119377121 1.4988542528816275 0.55102018641923289;-0.2171550460460771 -0.68204512913793414 -0.60199098279503149 -0.044315437262330448 1.2770181024826022 -0.54342464826063852 -0.31094955956271414 -0.096955796062180272 1.2511998141361655 0.19224784747832005 0.17056030217938617 -1.1959921459377396 -0.2320619423737991 0.25866179332025407 -1.4212203466086726;0.055580007453308711 -0.93274388623054605 -0.88347972506650685 -1.0885375137647135 1.0772575732355147 0.89031977382992178 -0.17279320382002542 0.21385559464422138 -0.077930538306262384 1.0136620754346588 0.6481565477960084 -1.4701685275171146 0.77494279127546484 -0.062978146462834478 -2.2168342656797719;0.70867435947850577 0.78150724029577878 0.66288257351514801 0.2607910945621213 -0.19979807198664484 -0.88164572463758772 -0.15187308382013501 0.026288495291307667 -0.23542811851184997 -0.63257157186209767 -1.1347948297331321 0.34182999843340106 -0.66265865447609706 -0.79822436519807649 -1.7349295737012624;0.24161747144554313 0.70330238448781524 -1.103674054142789 -1.3119016099891065 0.16060468019080296 -0.47836369030093923 -0.1791571312130617 -0.20473760320928999 0.21514658959695757 -0.1107321063856596 -0.023109953168909181 -1.1414944099660729 0.49197579919457796 -0.59229565153914743 -0.36520099218077018;0.049581651580510422 -0.86125010425070558 -0.88525750270250714 -1.5337729912537348 1.137208267360188 0.21760749853763411 0.20679269103358053 0.010858757247293748 0.47232690345952189 0.89581505619907964 0.57746131975380033 -0.40249723460552395 -0.26194374245464747 -0.79618176842843236 -1.6785776987411762;0.373699643801499 1.228104825114869 -0.75566552610719628 0.66214662223186371 -0.68897133178399816 0.025063222118328878 0.028376782589996426 -0.07606837122061641 0.26111871478446558 -0.62883468535454035 0.19894878773496982 0.40889069752514923 -0.71307344665158134 0.30174937541940988 0.8665921494520793;0.045732435390921693 1.294684125996193 -0.10409147535042232 -2.0921802693050364 -1.3051680071812028 -0.21503477130845891 0.18767910373614985 -0.32292072111919579 0.19581175919783503 -0.27426586331655506 0.061532781308316679 -2.1510008245723538 -0.2794905915863356 -1.3237343822928596 0.63577350482041484;0.73205441898350165 0.11041113365924696 -0.5307665111466402 -0.43962915407990488 -0.65478507622960302 0.092990422537397102 0.23196807403045275 2.5702172043704685 -0.93289587319060696 -0.2330798907756374 -0.10188454289258696 0.17096377749020833 -0.70729223991103352 -0.16051327143064373 0.10391505728639563;-0.1787186429449226 1.5523632334831179 -1.481409319625844 0.0026105834502075584 -1.2183183434040235 0.80642681190373766 0.42626676064303171 -0.5285693191214953 -2.5916882371274101 1.6660209522243721 3.2199410678518805 -1.1799760074931092 0.2682513482379188 -1.0385026930857217 2.5031520461408521];

% Layer 3
b3 = 1.58822021519163;
LW3_2 = [-0.48427555680827972 0.9329980437035148 0.23023435099649359 0.68208246119433258 1.0209434571716842 1.2899410194407472 -1.001094472014735 1.3776364953993487 0.91214187951238435 3.3208475024541699 -2.2187042185550312 -1.6315051531705016 -1.3762326824292017 -0.34417819005229022 1.7912274018196228];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
