function [Y,Xf,Af] = COTlaquepaque11(X,~,~)
%COTLAQUEPAQUE11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:14.
% 
% [Y] = COTlaquepaque11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.66992333685040251;-1.6944799850343162;-2.1403931501140927;-0.06111710055747871;4.1207866280150975;-0.43173671052509582;-1.0159738470333055;0.01536369867902895;0.97790107487014943;-1.1550896993233475;-0.024355460015921121;1.3414350201383518;-1.9510318683615839;6.0589602756094818];
IW1_1 = [-0.64710698302612035 0.29989417038902649 1.0596887541544402 -0.20321259118057214 -0.24980659107262082 -1.7140259682170604 0.36209694796504943 0.24873935771694311 0.23682559222925706 0.14278965758188156;-0.42411885246298647 -1.8365363978844109 -0.02382048115427244 -0.011352410604820576 -0.12431767789677588 1.1154589563951294 -0.28140814203072351 -0.030026278252445616 -0.28518617873834901 -0.83730727289522588;0.48161846934314861 0.067102918184591534 0.51445010438265959 -0.52445020890336969 0.57387855262083964 0.97347638505159551 1.3031201385336173 0.062179672804085498 0.26356847734442007 -1.362064361158575;0.20526096188479875 0.73303580235448873 -0.43763569182480422 0.42420774949239443 0.80263737525906298 0.32837047679137266 0.050008851643714956 -0.2197579240531819 0.012798426260786932 0.44194418169524535;-4.222250720339404 2.1057633367691229 2.620509404002128 -1.8714629544744736 0.49431889829431103 -0.0031788040417449481 0.26446299079817004 0.15306095691838265 -0.13107880157869606 -0.97883433153178767;0.27969630334568563 -0.73920371406912166 -0.23770815365690987 -0.26107124534791937 0.048472944677046929 0.19063360652809905 0.23689007570630302 0.037908164201674165 0.043786506013741969 0.17385919112039211;0.42468082307127003 1.8920492098351271 0.21841403806860729 -1.3558675672075335 -0.52200319292375408 0.87031414973200283 -0.4535704143934699 0.019656490322877106 0.88000580138062101 0.43842934699742109;-0.58147990134100302 -1.0207586579963102 -1.8100024372868 -0.50703001248681201 0.67892354866941496 2.401640943582608 -0.096302544217763408 -0.15514108807868138 0.023254196567856801 0.71084942118119199;0.47970361516047094 -1.3274291145067514 -0.2905972136578025 -0.47830632689211933 0.50715681659967593 -0.07995636148033583 0.020010387320779734 -0.13387744179431293 0.74238769022318829 0.8754558495149426;1.3091732143896779 1.1126604638773325 0.66309418131480358 -0.5237573084303323 0.066122437878453427 -0.70272926591016405 -0.92189539498615936 -0.16305428592382623 1.3916101552680131 -1.7004001225905248;-2.9703513856156447 -2.4689512002321061 -1.444251527284061 -1.1899178510439807 0.37061672904752224 1.6865124547550685 1.4840197056478561 0.41632967098404561 -0.30602926592566215 2.6850679143167318;2.3508245424671124 0.28017920196144452 0.86054864578950363 0.23974812857818967 0.03124179693534343 -1.0423068514910951 0.66799478917809463 0.27137737085970931 -0.2934738697462454 -0.34458942636554768;-0.20820046318315971 2.4832611501363417 0.21920501081482444 -0.26013690675973411 -0.037191929896435966 -0.062892423716154444 0.05555405479170792 0.21830914732605555 0.65599803355301689 0.64507727450885977;0.54978539761266454 0.53367354563461433 0.62620351565432797 -0.10358261325092395 -0.12744588316154276 1.0131542480273337 0.14063636506417657 0.051476350965939291 -0.066407935750789751 4.1623394108369789];

% Layer 2
b2 = [1.7736870555251707;0.23685786968996936;0.78297839893058874;-0.42255657773851973;-0.0033473144177881969;-2.3702095520699062;0.5593418470056013;-0.40379059715952914;1.8798986706282839;0.76902501093209108;-0.87876684367566682;0.42193423032112687;0.96662091059781419;-1.9071493901479439];
LW2_1 = [-0.68956738436350595 0.23010407382693704 -0.73699932454672556 1.7183655525342303 -0.23962396538956254 1.548488510359862 0.1384716654934704 -1.0199962613625768 0.84869251299526827 -0.1783364927800028 0.61110438891127827 -0.37035366262367131 0.6749680916038302 -1.1579445456758268;0.01587179373583273 -0.49571375045765625 -0.070670658253643714 -0.27493363195521953 -0.054726929153790543 0.98667916387971721 -1.0926984685746639 0.50749872907839899 -1.0195109528721966 -0.189172519506141 0.16038236144004814 -0.69765984276701287 -0.17466218886256366 0.10880531775348318;-0.85855991324592051 0.23870445161653292 0.14072593172160913 -2.3841169392896684 0.092025029159803345 -2.2080449037214169 -1.1420434195583153 -2.1401095048651393 2.6363923560822231 -0.1058271540737401 2.1723394526079329 1.3119966560046876 -1.4977391438893222 -3.1752636421501297;0.90425254402144961 1.5049944915070301 -1.4624209141387059 -0.56557447891233581 -0.2866821696997891 2.2187800196597571 0.21631860642281908 -0.12196125766788532 -1.4645326716007452 -1.5449361150769574 -1.0891851287458945 -1.19549632465315 2.6861310966852692 0.51982402563136421;0.44448296626662609 0.91384071979459014 0.69798057662651425 0.30819751000456508 0.16834258162188645 -1.2985225331686854 1.1394330589561434 -0.14898962659531709 0.8613345073226053 0.24233697314608427 -0.047653703889822367 0.8016420435234145 -0.083576603334474309 -0.59163679900325761;-0.25059704991022741 -2.5328307270295536 1.7450304937830976 -0.5846500537029754 -0.78793622003998387 -0.31803360378405537 -0.30443250695487573 -0.82840246429272857 0.21500953255580868 -0.31526032773614293 -0.66065050508647982 -1.8040569593366265 0.19386831076075176 1.2242938126523464;-0.54437800635293898 -1.2992417343690479 1.2289668769670616 -0.79811037759197778 0.15149952493077179 -0.0050723113683706217 -1.0177558056826235 0.41446273033382697 -0.6546883997347045 -0.90954188065608488 -0.58699323442874463 -1.1764916352574444 -0.22671655452868353 0.8712316517970099;-0.3796394116384974 0.96212781944571824 0.23847734450238545 -0.095093800259566832 -0.27598314540846247 0.078082236397345267 -1.0013846095550483 -0.61238628098745984 0.54130396024791783 0.86647580794052825 0.71490498337375485 0.9194583638446413 0.73867396397709673 -1.1922471295826136;1.7284584397594724 1.9670026529399973 -0.79947457900816254 -0.021285418225421501 0.062569490218594731 -1.1067684572267313 0.12574093116993446 1.6385552667416943 -0.1649573040520155 0.30376642473611543 0.67573089378044493 1.8771061554624264 -0.78967619621973462 -1.7828339739308543;-0.25136926674452997 -0.88529769999423558 -1.3151075974343118 -1.9988294598534433 2.3656977181953986 1.0483329380243336 -0.4456502591264041 0.26123942061804822 -2.3306948631598838 -0.39810281562026861 -1.0545661755857307 -0.54345855679015886 -0.040962324861400223 -0.3553314334060253;-0.39337203304192442 0.42819114815703796 0.19064495655945859 0.8041335711464439 -1.1046554930972541 0.36125954220712275 -0.6266064368517219 -0.33714497633864765 1.1000863191789061 0.38766166810894359 0.76998167181091492 0.94381037077740271 1.8059102017175872 0.21875074362012409;-0.018840294062886183 0.53228895288692468 1.0505445700126015 -1.4892111059518587 0.76458713264506728 -1.470308510368505 0.81504603384613328 0.54111478362596144 -0.068752835179631988 -1.2589837307093295 -0.80354505827284395 -0.25129680406338123 -1.5416436492567154 -0.22411700005116772;0.5333264050205514 -0.23004246676269141 -0.11023453071486536 -0.97908765098408401 1.2783581326888207 -0.95583174538103532 -1.9517291395798904 -0.16735721309479384 1.4950246076547165 -0.43028489761510386 1.1381140222964021 0.29869539218315289 0.62240871160465405 0.44582590664914296;-1.6725568750856317 -0.48613403131468208 -0.25799215355429106 0.93631767623278317 0.10478888141241741 -2.4555862364321355 0.84927252088773075 -0.43053842992157104 -1.7040707362042053 -0.26200427889102101 -0.028418926227342822 0.82515709990121322 0.60546075919590547 -2.2627160177927896];

% Layer 3
b3 = -0.56211097595747539;
LW3_2 = [0.19599065605175678 -0.73528007387080063 -0.27153295262091448 0.45526850228418697 -1.6861438778420985 0.58561698156752284 -1.124949553126624 -0.9456071324640809 1.0974631505411734 0.89963294025201879 1.3737021892749997 0.28500714623291007 -1.6424078577154821 -1.094639142760226];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
