function [Y,Xf,Af] = NOXCentro10(X,~,~)
%NOXCENTRO10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:20.
% 
% [Y] = NOXCentro10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.2353101375810809;3.1107024936633114;-1.9132079613593505;0.72725791609950474;1.4323839876576561;1.6079538993483196;0.54158943328820808;0.43710381207291926;-0.28816387233429758;2.2308215515946319;1.1965538613738005;-1.3045978621278738;-1.5595440511970018;1.2237048253205658;2.0244334085513627];
IW1_1 = [-0.60898324936254711 0.52010764633085771 -1.0364438683507982 1.4180146501579849 0.45712369885229348 -0.09709733734202225 0.53390319947528797 -0.30740635108771391;-3.5410259179892565 -0.021112874181485372 -0.25098153268208417 -0.16813126935307035 -0.021300707177063852 1.0467226944741321 -0.49530112478395821 0.43347823963678456;0.43688365337288843 1.4722946779264923 -0.42803827271399636 0.78246607754438446 0.64106487238205923 -2.1622431441453678 -0.041722914951610249 0.57861466708238751;-1.8342088852796703 0.22157229352013866 -0.94108216617723173 -0.19061596227563951 0.055723002812780371 -1.0127275672452027 0.58035799541971644 0.095836171517447319;-0.23260439326592566 2.0136927056671561 0.19858002929149066 0.23850278001401484 0.22156660862643315 -0.57666215370205276 -0.076543482406166458 0.0038663156268670743;-0.16794599661814197 -0.6208515883729977 0.2183359335703233 0.98205561733403501 -0.24878214975954996 0.81178668380852137 -0.40490152926720008 0.52585916957092571;-1.1440875813991143 0.3689729605156094 0.35542354296289058 -1.2852382909793727 -1.0371886630463525 1.7430953119750561 0.10846451529176751 -0.57002207368139568;-0.027848803298505673 0.19673219786489488 -0.0057999225024524259 -1.0009112861168845 -0.84852235834860013 0.84519242671256523 1.9067887350802515 -1.3676303907668907;-0.30279183588073777 -1.9395868175793498 -0.01924532475035692 -0.90317056060651246 -0.36944573986956186 -0.52568074820154698 0.041970236946975464 -0.16916439175882927;2.1443755895015997 -0.82370858061372665 -0.24826989227927349 0.15445681582377108 0.011645038999866615 0.21178035566648407 0.089823080638708794 -0.021595947575502587;0.9510562471327394 -0.19477046674162138 1.0389748656734641 0.40687341674811484 -0.19056312481344456 1.0118952613764642 -1.2821752721113087 0.020555361765428784;-0.10091769975250409 -0.34105139481408808 0.63217805276817041 0.30908329730018114 -0.83218138669009278 0.40359573392730713 0.00093856059517686717 0.48082596540895089;-0.46425596863980423 -1.1153030497981242 0.17557338506285028 -0.11984368017522723 -0.19284285135113038 -0.17189600669542579 0.019960485476863837 0.18046874788809261;0.40386134862765027 -0.82563935394811006 -0.19704329034338247 -0.46333132463886861 -1.3851012361066621 0.58817757760129263 -1.0398403024603278 0.61331851564965534;0.43974522355077622 1.0859193743388604 1.1901760892108821 1.5910268755794192 -0.79145247836393307 0.61278132943383457 -0.0034165113844170846 0.8784123049576702];

% Layer 2
b2 = [1.9688101856357301;0.99121709094013422;-1.340766325028949;-0.92255801941470106;0.39482851815966247;0.48441904048909601;-0.099502734813180768;0.25576034938174858;0.33412871203185573;0.31253042156614724;1.4309526862302648;-0.42481659520540421;1.3885079384708556;1.4664826515746185;-1.5651829374498052];
LW2_1 = [0.26550259499598855 -1.2685838154595905 -0.48761981332132504 -0.45179696820060256 0.58432466417581264 1.340414200367126 0.31863682872597443 -0.55411220415680862 0.49141009902443783 0.54298214208244688 -0.04945881057958141 -0.37830032700611749 -0.3226381152491673 -0.048933609671935024 -0.4692092765613583;-0.19116433830964041 0.73456631233544412 0.93437149755172066 0.59355110624330876 1.2374086937724615 0.68878103596814844 -0.7899233155506109 -0.61398176394286208 0.21815582178381857 0.0065686396927141094 -0.3080238548152936 0.89337788277761099 -1.2063255695239821 1.2585975219047358 -0.48125699542451078;0.3229352185840812 -0.038268628114558181 -0.32593938399637418 -0.40247641234246329 -0.047487789018003435 -0.42604783277319208 0.51729153971130548 -0.19243836827580807 0.46770091294809907 -0.22846414795506698 0.24308774019866511 0.61017207980718291 0.26304048231482796 -0.79644389355841061 -0.38817245337373207;0.53402884892677616 -0.32247755172441456 -0.21363777154345337 0.91932898535289809 -0.15798473460412926 0.19505361214174421 -0.06334322085188189 -0.29668492330806651 0.81544662719590344 0.4792555636873686 -0.48372850005577567 -0.22399902323938031 -0.55046596483179022 -0.10147122725997712 -0.10894750470436987;-0.46621620599477714 0.64250820215342896 0.63299646540747312 0.40496453456927994 0.95478509407526468 0.14782855404102699 -0.72696735927272271 -1.1561559926322613 0.17369273336336136 0.099344829313571067 -0.41123701507469851 0.61087914097545526 0.011391709460748134 0.057666728867763459 0.55749337273492094;0.5025416222835557 0.36114700155679652 1.0744167157151414 0.87555872572379834 -0.8909125593749132 1.0674401945433274 0.62848710699259314 1.1183298947421429 0.040233528763507352 -0.18905592272756672 0.79195041898324003 -0.66407466308587326 -0.31786885036428741 -0.19875828932326833 -0.62407412985881605;-1.2316671373833807 1.2192487058416159 0.012726602976710959 0.73201863210661589 0.28429764712117689 -0.24848461792957627 0.21194229694309508 1.008343000409875 0.4612570076991569 1.1582573875124029 -0.18569527555264317 0.29414029362009886 1.500204328151608 -0.80841899644370474 0.027954108039614511;0.38473569149047682 1.0438564746217391 -0.38346251035237261 -1.3203097274643261 0.20654953043486424 1.6503642361059632 0.89995262910487117 0.19549675678958853 0.71489231455976665 0.3205350590262151 -0.078090146783499112 0.11755902379363727 -0.59537000769045467 0.19491663573334761 -0.68728418640521682;0.94101275892984948 -0.96028001571845423 0.046545166945920639 -0.66708919166948732 0.93012100659567953 0.59977708631436766 -0.46486281123659989 0.35865111020450985 0.98134107214063393 -0.16135797514898537 -0.14548559499727021 -0.18715887193247818 -0.081951879637332553 -0.72065450548683385 0.11558793259101527;-0.13857165924710643 0.71607006604648082 -0.062756534343986453 0.59280789906418763 -0.30642830290672268 0.1778451010208871 0.4063772263696902 -0.36752027434409507 0.2215568158487467 -0.67182796514299736 0.015233797929579164 0.14137891509112133 0.67991909904119241 0.2222888375309513 -0.24031156860662112;0.88316098791117315 -1.5711361105643535 0.33868577024414909 -0.65468562029610644 0.24052208871896144 0.20086829009108609 -0.04514770672877344 -0.2399034429055435 0.44460845506807817 -1.2721682526083149 -0.23888401518599542 -0.52972172314701738 0.5022655869249687 0.73327755227471447 0.13001921007372183;0.35456644635658685 -1.0484296093548386 1.4272959994184296 -0.492348849453561 -1.1514796066126378 -0.74846290829436224 0.32422485261310574 0.0065371285171714061 0.34344229335535781 -0.041459308726525271 0.42821989743858468 -0.8932399656611979 -0.56795986709009061 -0.25030673245232082 0.58035767157524298;-0.043535240091740243 -0.83457752319668732 0.024474648078255584 0.0959903208413736 -0.72127943430733499 -0.5037728579165438 0.34269881784787737 -0.33933829427005779 -0.95015191899499962 -0.39646984179427847 0.15530735628521247 0.085711792432072761 0.20378537255120455 1.0267897561734647 -0.12830057004628123;0.5086686603937508 1.752261367556883 0.22204243852853497 0.0098040693479641942 -0.68864167933658949 0.2593176103295583 0.23107218515171016 0.84957174813701941 0.092174903701700228 0.6056409021861755 -2.1408921479286063 0.39608641056442151 -0.55070024761858738 0.26113094762323058 -0.90059265324940407;-0.73193470786729853 -0.94772838534856763 -0.75639919991801197 1.072655277990614 0.27213227841016518 -0.0031006777341213987 -0.68973128875628409 0.76407067805178541 1.0352410354667896 0.17331744563727688 0.72327411951815446 -0.29142038704509676 -0.43195213511105446 -0.3684619438723159 -0.57944165202417897];

% Layer 3
b3 = 1.1307614297950033;
LW3_2 = [-1.1316078855937954 -1.1598464889151878 -0.38400870292290518 0.43577666222786104 -0.42303641986805529 1.7724719261780477 -0.64173636602337847 -1.2342933132673419 -1.8503836360670252 -1.0240673426689573 1.1105713823378418 -1.3067406587574828 -1.8921182280539124 -1.3395572411221413 0.26408146634548568];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
