function [Y,Xf,Af] = SOXLomaDorada16(X,~,~)
%SOXLOMADORADA16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:33.
% 
% [Y] = SOXLomaDorada16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.7449721265836373;3.4126355972730225;3.0644993594002918;2.8021319440690848;0.28020901957034683;1.1483559544339632;-1.3030289356158469;1.1719331720233357;-2.1914718312157624;3.5447246622287638;-1.0929182469057703;-2.1111112907286635;-6.3044144419662969;-4.4102198585054886;0.85448798285515914];
IW1_1 = [1.184039306558911 -0.13670394398959826 -0.3583128847286936 0.3130806818084701 0.34206439536240751 1.1327150276072657 -2.369603457799021 -1.8296689105805928 0.32237450015159336 2.4529394357977017 0.13326333781747488;-1.1819213540193645 -0.96363168581496861 1.3510212926793927 1.0216605604651736 -0.92507714692265741 -0.19576942457484628 -0.051181506311480218 -2.6308720823651202 0.37279423409754414 -0.92166096311174439 0.26157837994057992;-1.615542699798395 -2.2048824562421236 0.54990527494623964 -0.17007455385787257 0.17292170531559753 -0.86076410185141872 0.90110544488461819 0.20393885198260356 -1.0071953422142905 -2.5608104018979061 -0.89444425527136151;-4.2840079040818209 0.089200813797327333 2.0619854955989423 1.1546963865249071 0.19749983765648924 1.5459887562483707 0.54784530591559766 0.60548522930876869 -0.046727479514050117 1.0246857898613839 -1.3427509140162082;-1.2406306777254883 -0.005822726583228334 -0.7679279973427916 -0.61783316537220589 -3.8023735472043421 -1.3057426849850542 3.1246662953451274 3.2579626983663852 0.48970988412089234 2.8814573131266989 0.29222140607249558;-1.5262951371777427 1.4804516476054261 0.0040096219333681238 -0.39447324669004469 1.0879600339728137 1.043588161590248 -0.52423621125988829 0.49058659790517978 0.052750641045720158 -3.2850566411411046 -0.58601504452720832;1.7790414765913365 -0.54032897441585392 -0.13757331958951971 -0.49402006612595112 -1.0352163067593805 -0.64474695900661516 1.5339552222242292 1.2924436716545702 -0.10629760347863998 2.0337944966566526 -1.2335526000241983;0.84197690377803658 0.062663045946530632 -0.014374574282455622 -0.1250613788784064 -0.048897326876399472 -0.51320847076130416 -2.7952375708103916 -0.2315987316358453 -0.061724144333270337 4.102734590212826 -1.6656298848683471;-4.7276070293669754 0.85563159403697386 -3.7620689533152798 -0.4614192489410841 -0.03418129617117191 -2.4416446278556805 -2.5167353158674879 -2.816415934280768 -0.70161626038301927 -0.36633105432331814 3.3313001192985441;12.795118608582122 -0.39515132049805735 2.942903944774927 0.18451440944057387 0.90290327653978764 -1.7102437515601916 -1.7854272452041884 -2.8903363480421302 0.80556534906092925 2.0790566864047819 0.38792525711572357;-1.9384990328957159 0.34054857678686984 0.090798972405655196 -0.083105216150841293 -0.44222050813243285 -0.87323247567466977 1.8395632122351702 -0.28430197213629971 -0.059563908221551803 -1.5492783225061084 -0.2355587387108378;-0.0050215084722163104 1.2249825410821134 0.91483909043531153 0.32334766911808072 -0.2180336478706808 1.3974994046243514 0.50974422488202331 -0.92342338953948622 0.92711606902693811 1.3417314221725023 0.38625821009978839;-1.1057805955807447 0.45782065228651747 -0.14151129205492796 -0.094708649313262977 0.46828965226860719 -1.997380775077179 -3.0145792391891746 4.843182483529608 -0.96902898706435714 -2.2690855226506268 0.86523454539039846;-4.3979941280478725 -1.2997812718290016 -0.95005298524842652 -2.4526158257168502 0.15123707297978506 0.98575325498451671 -1.6078453163428199 5.922071833066803 0.073676773443598187 -0.082013878234504928 0.67346950880171064;1.2980560076066792 0.85159552287552276 -1.2654396867222886 -1.1802913334872727 -0.016829144589233177 -0.013677897158500485 0.93593220207552996 1.30235106049469 0.089670565397492102 -0.3390619617683393 -0.84387730938960892];

% Layer 2
b2 = [2.2614166521251602;1.735930067848926;-1.3173314085452117;-1.6702870990513676;-1.3360588302047387;0.0045532526942044654;0.5854060202379161;-0.92594494148396689;-0.71049124508207051;-0.6655676745346395;-1.3503017383966174;1.0808762445807509;4.8449571090988739;-1.1239701724627313;-1.8322262442403714];
LW2_1 = [-0.33045252096072897 -0.49098717650783213 -1.2307577928625231 0.11365840550030056 -0.21080011677844313 0.51709150939444659 0.049590564135316276 -1.1704379638579492 0.16149705234757597 0.1303180036134704 0.49138630629333768 -0.8130063183086651 -0.012083444510786665 0.51924132028235559 0.92960694019244239;-0.1353559169721687 -1.6940632140523322 0.018028891441136098 -1.069164872319706 -0.4228693733191019 0.83623670457197619 -1.072327908368403 0.076272842991393419 -0.080674525055064297 1.3344440231293759 0.53861378742360477 -0.32981389130050259 -0.16342996289124262 0.52798396471007436 0.68729303963492705;0.044393481080049577 -0.054037702961425745 -0.61374290016835609 0.18975050688788564 0.70624351587280121 -0.44171629083034991 0.063461175305963569 0.12611231251735888 0.84429619678534618 0.16584842141979919 -0.36222527897276685 -0.029604899928857738 0.2676634821375225 -0.30561690002668357 -0.76349870067192649;2.1932999236263182 -1.3992008365179378 -1.8342662344683982 -7.0015097967643829 -1.8835608344524184 -0.81192936656998249 1.1704433286117 -1.8973053013189716 -5.8353741327895277 -6.9935345415190762 -1.0545774046587089 0.95954915110698913 3.5752482127732756 -2.4504001328793574 -1.5629418766006451;-0.30085757368619914 -0.28977772370040072 0.16422341929198508 -0.48052526353483732 0.71460306549579133 0.54903081743379445 -0.84406073119960334 -0.7090477150300466 -0.98175889698205598 0.03165658146986202 0.40592546303952681 -0.1868872850135333 0.17542636334991712 -0.55325240453596103 0.46981119868173193;-1.4492521564570471 -1.5646409130975529 -0.10109752189533716 -0.070244665796058689 0.041121082048893594 1.2617384966730329 0.45398542158806082 0.51640384369188264 -0.89722038550075811 -1.726554654701161 -1.3835897429256705 0.96642946850358324 -0.32471694604169249 -0.037555509293363147 0.86310016624672881;0.38083056942607763 0.590794942295505 0.51346298563610815 5.8239688980911462 2.3539557783385496 0.99704034623748794 -1.8996126933609574 0.41384993872399051 1.2163234014377584 3.1738164929469677 0.62408055146248032 -0.6665532433712682 -2.6316224901450926 0.74048038730859611 0.87807891495714507;-0.78385777543323254 -0.71335204938627195 -0.54434238137854285 -3.2003982009595817 -2.4716035911387242 -0.39858423163434858 2.0307596268579577 -0.43715393242513584 -1.5907509763999208 -1.3881456264417051 -1.0352782470489432 1.2397592591489699 2.3859192726101526 -0.64940890367175497 -0.29282922260303329;-0.53095332099410752 2.9781885223020574 0.4650718342422987 -0.7190141119652036 0.23292488062677674 0.94831624351181765 -0.024386864825239472 0.29938440357294216 0.86774098996442262 0.81821985551650755 1.2843366443592756 -0.1268810605012764 -0.17234097702375442 0.11026070991159426 -1.6599386990903424;-0.91797753836696394 0.37777714024014936 -0.81688162186731916 -0.43345059971565636 -0.018751007974521477 -1.4484975255376511 -1.522194478560605 0.80929611210941099 0.13601866445711838 -0.30789180920410719 -0.7614084902104522 -0.042771796713172557 -0.13622741832249496 -0.036791944652129101 -0.28196044626850642;1.5707888877435359 0.44306266470859773 -2.2534134094014959 0.077195924459666623 -0.15366471838797682 -1.7612348329190495 0.37872713284189008 0.78377244759890108 2.1102987507967805 0.32515631828236058 5.088828349198061 2.1812436224340366 0.72064659198140379 2.0850186564189173 -2.9652377187554353;0.33467960314526318 0.024949805974744901 -0.65654304422014598 0.53304133072245763 -0.82030509122536766 -0.79594639278877333 0.74690309712438341 0.5686453532617195 1.1120478975468562 0.081984724492756317 -0.36260926419975575 -0.68648457657736384 -0.10205448977550571 0.64085160338938063 0.020650208833540545;-1.8907333866973266 1.3107460718476525 1.7316477041573566 7.3025757833281002 1.8468610664985703 0.87630257257383715 -1.1789440197907035 1.7970125338322924 5.2270390387886119 2.2287441318971126 1.6564291436988963 -3.8388199209760163 -3.4721397717688509 3.4128250750293225 1.4895645145471881;0.011209055379202131 -1.0052382106903739 -0.32001110071505878 -0.16137296074591523 0.26562980167144556 -0.62155484722741028 -0.22977782298978838 -0.50860209068447038 0.44894378051121936 0.42743301792790861 0.68312635282535628 -0.55503096852873091 0.17548473015300547 0.17727849029841533 0.50068087630513536;-0.60481744581561947 -1.5851269074660919 -0.77521833401701767 0.43353508155916765 0.51979501314311005 -0.15590055422090987 -1.0495297577497351 -0.4288165492408873 -0.0066930442930689046 0.10302039438144106 -0.35582901200703743 0.097044618904223875 0.12069739873955029 -0.78833793611715564 0.46755460427179829];

% Layer 3
b3 = -0.59550916374808371;
LW3_2 = [-0.32021071480710162 0.10291349455834355 0.56937974835587579 4.9750933485736892 0.91084221520134545 0.13115370437036125 -0.92156935150090402 -0.73017254697062373 0.11381284939121233 -0.28892624990729743 2.1135213569193856 0.910478670469555 5.2669512463000672 -1.1112103411250853 -1.0419928568711423];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
