function [Y,Xf,Af] = PM10LasPintas19(X,~,~)
%PM10LASPINTAS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:30.
% 
% [Y] = PM10LasPintas19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;5.0251256281407;14.7058823529412;0.0179856115107914;0.00280033604032484;0.0558659217877095;0.00576368876080692;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [8.028250958569501;-1.0402167762747263;1.1062868502589125;2.4199377433751397;1.4041223500467879;0.75436652783956315;-0.16769449484653132;1.223008361962175;13.214769877334428;0.46814579562372033;-8.9921911055431529;-1.6233990157778262;5.8430802622769438;-0.66119562162304679];
IW1_1 = [-1.2994767743968552 4.4227600398543272 -0.75276674933611165 2.1821113836421095 0.21867117526672281 -2.6981892199462498 4.4068011048489728 4.5252007354336836 0.62854909285022187;-0.69405661715446154 -0.605214288019846 0.49452420306423694 -0.57603928348304145 -0.30499912936924722 -0.31611719413931244 0.26306774958233015 -0.041282182763078538 0.51326853732779554;-0.023777805193299133 -0.50380363994752764 0.34910068294079194 -0.23789104839845968 -0.59299569025792875 0.5202177260113876 -0.53099579272346953 0.088710468047254049 0.89739644829039;-1.5416925099266201 -0.17613713593564378 3.6282953083682408 -1.3757851514666308 0.7409746712506925 -1.6065857126435352 2.0793532486601074 -0.023917098210390883 2.0253507574046861;-0.77609551895810991 -1.5163570962412922 1.7129879696410764 0.70490340110934402 0.19569591952702756 -0.19367808663706723 -0.54522120636829763 0.22977282256611348 -1.348381490689752;-0.48486778023544952 -1.369224746656444 1.6917093816726667 -1.2678439949363061 0.3595457743530745 -1.5257486992164038 1.3933356962533978 -0.016161083974971985 2.4700956258032281;-4.0178506099057216 0.098565078648419208 -1.034494667866978 0.6188038149121613 0.53320059930504393 1.0825452115604339 -0.20058487754956708 0.49449253160167816 0.35068682651705446;1.3251448575416296 1.5573182412682738 0.41019969149847985 1.1879346946180649 -0.5090598914877662 1.7198594198438684 -0.42014049912631901 0.12818642986602485 -0.21062455291907381;1.4528217208009577 -0.12173792014671357 9.826763928110001 0.25743722643700051 -0.40572017442073904 0.090715415806528421 -1.253368794165989 -0.0048086066040634295 2.0253634017600222;0.64888899661522959 -0.16699395362613303 1.8083372153217483 -0.93036520096765807 0.4032147630208136 -0.090447952204596491 0.18534167096908322 -0.055319047109509599 -1.4516423931932683;-0.92509433985278267 -0.77221886785122484 -7.7510535680455499 0.56272679181818019 0.35312155148788454 -0.59050838774424697 0.73346394429865047 0.070163926810312263 -0.11471419664170437;-1.7369069530785537 -0.70732745945170394 0.37288768120823568 -0.065479166623037446 -0.22877085677799269 -0.98078204563425853 0.55077427920505206 -0.21254606304487042 0.82580452528309234;1.6409085923658471 -3.3524599116586362 5.4016870669218013 0.36193442457973185 -0.18910695788818679 -0.98213754186691327 -0.55360692274727119 -0.11467372971851778 0.083050572399462425;-0.78499517331375934 2.1322677387328617 -1.5295908818407971 -1.1411684587285855 -0.42132664115260576 0.44144849325229768 -1.3793599662757863 -0.030314544071314793 0.87724893833270656];

% Layer 2
b2 = [-6.1376159982727945;-5.1776093989907537;2.8462350419411053;-1.1508482807114111;-2.4035937632672386;-3.2437153879439902;-0.66261229830979562;-2.587536528457528;-13.585830098160814;0.89634656487530706;3.4288493966658109;-2.4468213164701513;6.9274909313550417;-17.727133356209194];
LW2_1 = [-1.2523816935661523 -8.3554780111890512 2.261323693833631 -0.7520002702125439 -0.61893920127929325 0.38820038549513802 0.72899478447082777 -2.6750459478098323 -1.2692468882587702 2.9063096636261352 1.1570455495484042 1.4336979032276918 1.7467131298733061 2.1311110618379434;0.047422530913283523 -0.88705318053242665 -0.84292397902041805 1.1887649055837246 2.6246172620773853 -0.041301626986107051 -1.9316034007308203 -0.039696611675747819 2.0008531193621155 0.10411107784259807 -2.0744824065348064 -1.3882233211769546 -1.4957549235287666 -0.6904539208310827;-1.98001766962504 -0.51456399168666378 -1.669763838887504 2.7887321770796616 -0.76726368011071955 -3.4555464641827198 1.0539729676296832 1.873097324663423 3.0028441007107221 1.5971584303154749 0.90178712804242878 1.6508451657825045 0.38160290347331671 0.064231336242132842;-0.11583538489467862 1.8348389043768945 -2.9173147865016995 0.22909064536953533 2.1413739849325575 1.3349836470981404 -1.9381715604547245 0.25750532986442243 0.36365188220653233 -1.1000518149208944 -2.7003491646502318 -2.4462104650961822 -1.9010352499340497 -0.66683896082773231;8.1751728558718284 -1.6477365779890223 -2.0724463696592959 5.235140512250025 4.5875664513281356 -4.7284751862180867 -7.4161948127693584 6.6840058923393952 0.095030983817634779 1.3101374763875064 -3.2072702666882784 0.3919443830488536 3.3697643191066433 -0.44044823944549588;2.7319870697659647 1.5389273869394233 1.5158613916530999 -4.2473449922040665 0.11352133928612952 4.0982032434211941 -1.4276684606434569 2.5799354401460985 0.71422568518583585 2.1116657503717815 -0.09276242395961673 2.2937618843953254 0.14147306932479031 -2.430821952374322;-0.069918298546118599 -2.6450078631281122 0.70658803102152434 0.010079076068321466 0.62190046205778893 0.89151727095166589 -0.94835807826401686 -0.10478224561813104 1.7321039366547097 0.33790542891684267 -0.35587362724069582 1.6342540592203743 -1.1616573138636554 -0.33463613640492701;-1.2586206442849643 -9.9656232225523347 2.1601908885922252 1.6584127169002543 0.4416356749572925 0.75881115536610055 -2.12024000231591 0.72509594495443064 2.6857523055896038 3.1529180157969638 4.4770134987621821 3.4339298545221064 -1.6683361163458428 1.8183716189250256;5.4938469236014313 2.5762952747506831 2.8962718047461253 -1.7093879778521672 -2.2149845536733315 -2.755064805364722 -0.50752924228448459 -1.7007430416327876 0.11859302233011433 -1.3647218810289155 1.7110855582461095 -3.7390132661955557 3.2606308255336072 11.129321023898028;-0.4531875660851743 -3.5236850607519581 3.0413931242600301 0.61038793390605128 -0.62551870360049111 -2.1170443104494612 1.0928392880518594 0.95117227162894624 -4.4419199663438524 0.67205602838922174 -1.7920514479136258 2.0339932000178278 1.4371666026151073 -1.1256250334678719;-2.860624338698099 1.2494730742429982 -0.70189487118462002 1.7169121043187971 -0.33291765033879345 -1.2983369598453498 -2.0017262518052581 -0.59203568337995349 1.3469963174567552 -0.11716803942955104 1.1516836575307474 2.4245471083136869 -1.1029528247067719 -0.21087815864110887;10.180134764064105 -4.414504337241854 -0.31899749824223117 0.87806077906931723 -0.3973720650665038 0.24759388409194411 -2.8345346026755176 6.7037817656094081 1.0049222259868635 -1.2227233031283189 2.0213790644973053 -0.22587593916994284 1.8572802353732119 -0.95278943026785134;-1.6362118393167941 -1.6668621412692557 -0.81819757722421294 1.8247182122878705 7.4383586557207186 -4.2929166511863661 -0.17662465583946652 5.8453344127976141 -2.6080783233522173 -4.7912123659033732 -1.7802990056282075 1.478328123427304 -2.6907187152445986 -3.049907977071395;0.02644822653919169 8.8867687887130131 2.8278104721216608 10.659818014982497 -7.2041784830809741 1.0059198324551062 5.9754895484986479 -10.279827954975437 -1.4786092550241705 -5.9943790159011616 5.3544243803877212 3.2987740698167864 8.995760035943583 1.3091764800430943];

% Layer 3
b3 = -1.1102598923772276;
LW3_2 = [0.060347609284964285 -0.20460321901113224 -0.16616587724645618 0.2025606434518511 0.091050474661818911 -0.098771035291464165 0.40936302087948678 -0.072467283182372069 -0.023512450698562823 0.1871719553965385 0.081000156738000428 0.10389152136709388 0.030102704783976038 0.012714416368488055];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
