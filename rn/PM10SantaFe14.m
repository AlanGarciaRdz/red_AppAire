function [Y,Xf,Af] = PM10SantaFe14(X,~,~)
%PM10SANTAFE14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:35.
% 
% [Y] = PM10SantaFe14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;0.00341273633199099;0.00632111251580278];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.6051091040865444;-2.5560174668626359;-0.37088199199255556;-0.83630954319377759;2.2185963688236718;1.0622405282822904;1.6283668693970925;-1.0461701852721623;-0.0026752730997819177;1.4812793245405307;0.10173616072277183;-1.7415775662322777;-2.0140007770796298;2.4032298388495783;-3.7868430324324072];
IW1_1 = [2.2704644288151798 -0.45939941090698488 -0.1682379040093511 0.47033879131841744 -1.0336264430588262 3.3913153888897813;0.27657011599040993 1.2401384055551743 1.0309522209923476 -0.3115110973652816 2.3068907420218192 1.4394796605274705;-1.1107107522362425 0.43510593893653821 -0.44506181961975982 -0.89059843489185819 -1.0779111226573803 0.64400514801910813;0.55517740896808587 -1.1100944976999008 2.206932009357454 -1.6723296666731891 -1.4671643622027595 -0.191992076926843;-2.9462125729386153 -2.20230764429003 1.2552996263088139 -0.076127877986897616 1.0921606493566232 -0.46761175670480082;-2.1134402613275123 0.76308440827955715 -2.0747067159996684 0.26226203625474198 -3.2826545576507615 -1.5007173112455252;-1.7377937879851943 1.5023970227133148 0.4619893896067227 -0.049634793160168257 -0.15153005657943047 -0.052315369028207694;1.8962578519729527 -1.0613315438095978 -2.4599215270627575 2.1121755032624496 -0.58784265877355812 -0.15985682002291032;-1.2091196340046619 -1.7516130129791181 -0.40224999643777659 0.0094406883914591039 -0.50471221354507412 0.19770310756838677;-0.64509158679666889 -2.3944656455381654 -0.0073211981639657309 -0.024144436879716871 -0.3534348872856109 0.29331882499894496;1.9755150162285673 0.5438083927362487 -0.15059008876030699 -0.26580860392563321 -0.026516644121010256 -0.16594344891060372;-4.59531590901502 0.41905573532519502 -1.9713532990812193 -1.1592222245476294 3.6451056881721136 0.40982875144297154;-5.4924665753211865 0.5852879538957485 1.8259682580625178 -0.58003813554582329 0.05346815494731208 -0.055251888584248267;1.9408711837787953 1.4433479820152393 1.2096042634914212 -0.92038810628270995 0.91501801411268024 -0.11761160101839047;1.6868869028601259 0.88438712888225279 -2.2480713277436499 -0.37241008758898286 1.777071360528204 -2.0533261144548032];

% Layer 2
b2 = [1.5231917466405209;0.80168302792075208;1.8000349824035202;-2.2991509628022002;0.88867707466210633;0.13967025651375869;0.0032445824518444882;-0.40780963709094553;-1.0738104511622708;0.55347906385108436;0.029278194941736568;1.3269365762190406;-1.1416246697899053;1.4922750141936014;1.8810648497719196];
LW2_1 = [2.1960429652396796 1.6281411062883995 -1.0946590700378382 -1.3079735388324873 -0.18561908797995563 -0.99413241099829408 -0.15171283989700962 1.3115885028839078 -0.70706043677922781 1.8840625471680656 -1.3924676759583057 1.3277146541233902 0.2990761990169053 -0.16179542498872385 -0.84652572422052808;0.3208495972627905 0.59500753611065904 -1.4928809364492825 0.10218668790166605 -1.3609836093934773 -0.16593939346346787 -2.7190796004806259 -0.1244430765640363 -0.11245482041598795 1.8861780294207855 0.41022683219533457 1.4630555234788423 0.95901589877216042 -1.5270679400436202 1.1144777047488046;0.36608235558951085 -0.58052982010547405 -1.128921350403904 -0.47659057482284567 -0.65523034079324638 -0.072955722014527852 0.81895728022927439 -0.36260898185402707 -0.68355859965162835 -0.31977369157919011 -0.09817230893617418 -0.59149894327956387 1.3528355438907873 -0.39131382035094181 -0.80266457816066539;-0.32593331026749389 1.8264591536734402 -0.049408239746545721 -4.0217337805042757 1.1727590218992532 0.81958790419467653 0.9767064561999026 1.7451440423302687 2.8083049066286807 -0.98368020684654911 2.1476875802245705 -0.55841547271329872 -0.98039815143396913 -0.67353710925056764 0.59716272333503773;-0.46847320919929142 -0.44301011917560906 0.56293684479312023 -0.70608983311011575 -0.11332065070716282 0.53241708970827983 -0.57679535810878679 -0.64943394215851791 0.62902260872554427 -0.76952222480985089 2.6230760844750254 0.82069027539848194 0.22861477850322529 -1.6985367566471945 0.99111300723399065;-1.4760540208464576 0.94213902887791889 -1.4423093161945029 -0.3242508735920559 -1.8611828070465519 -0.15089983314757327 0.37279521981844693 -2.1104866926022203 1.4918079928251167 0.93501206421427696 0.58943068491674633 0.078508929733000443 -1.1980793540511721 -0.92369149313547405 -0.78665921894498125;0.21238650533343575 -0.60287216647280251 0.22179530347985787 -0.63179535983255675 0.55050642531263638 -0.88901400843322942 -1.9056676362813143 0.95643438270962955 -0.5375527751092346 1.2902299933635266 -0.55021559075932935 -0.86363336119471223 -0.52970897328344146 -0.36988225055089247 0.44103990160265216;-1.3986115292924601 0.59211183324939709 -0.13560687921737666 -0.013775135545319693 2.4211481341183916 -0.75023843847272265 -0.081348912128405115 0.097929254778679323 -0.38905963479177774 -1.2260511548078235 1.6996236169840298 -0.91174502922583245 2.1880562798218426 -0.83968999162708191 0.14220376615679461;1.6772409812858096 0.42384994062700104 0.0074572517225473811 -2.2671060862938495 0.4038017594106188 0.78078907256280616 0.63477300334199049 1.1010172649768513 0.22719384955079205 1.6347551694354245 0.91843965487560975 0.86398033718617961 2.1142313755770967 -1.5937504802467382 -0.65513126094642238;0.748885958280469 0.50723152860610254 0.13198632364014484 0.60987862293302453 -0.75491453163520394 0.20329056507209581 -0.65253488752000832 -0.10057617684713209 -1.8653510584843513 2.3623179387967479 2.0500022991484634 0.36592569993752716 0.058820474472627823 -0.31751801064977903 -0.84813955168762745;-0.39231770370577046 -0.87632357393749294 0.95022026607290722 -0.23103471092588465 1.0995048073559641 0.10612848235683991 2.7916626919397878 -0.63770454235192719 0.69270853919260145 -2.6053076234743147 0.3671941378197271 -0.905797381069124 -2.5264773684534276 0.27165117132146716 -0.97182864569339233;0.54536510067333321 0.19005865931791158 0.12302218658308245 0.0061528304015826124 1.5539983433744962 1.1062620427547136 -0.75328981511125992 1.6444573055881933 -0.91733430529257121 -0.2401344351331734 -0.45487900143387272 -0.55491533830824114 2.6193268524640092 0.54147933639474166 -0.87582802336208176;-1.0692980189628942 0.084140197838333486 0.18906167207966745 -0.94914489374866173 0.80552652418707982 -0.70228094453211498 -0.089596641759707732 -0.80035871204069908 1.1271925239727691 -0.59673872636359293 -0.4276421207969936 0.021558678464080147 -0.22546370526811849 -0.63623951989546679 -0.70981499161627271;-1.6782677503347148 0.49051365141100128 0.16628823226881254 -0.32754058554980947 -0.26853539544022098 0.28974198772192228 1.0384783881704605 -1.040996143858447 -2.2540513218509974 3.6202479224793733 1.3817563635989121 0.22398859682255023 -0.40898887896010022 -1.3558738148139511 0.22623634405185369;1.1919031676287641 -0.67135860416665505 -0.22679375622894526 0.4271335065337053 1.1146351540901513 0.031118813155239948 -0.47900245110506406 0.18847862291831408 0.66314931961809864 -0.10896314192382531 -0.12414954600690448 -0.11308460066797504 -0.95065485150594564 0.77064086835556345 1.5383998900825508];

% Layer 3
b3 = -1.0667269130032255;
LW3_2 = [0.32166401528634059 1.5080360984759331 -0.50889334314254375 0.13712334194855627 0.25668257520348942 0.23466098990963263 -0.25708538318591567 0.79343163046370369 -0.26723216185607079 -0.71725473780701532 1.7394412207906145 0.34503336742295954 -0.86825746584925401 0.42975267709263598 0.81596303705746154];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
