function [Y,Xf,Af] = SOXCentro5(X,~,~)
%SOXCENTRO5 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:27.
% 
% [Y] = SOXCentro5(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.9608545296922122;-1.7808089694569982;-1.8713945647746653;-1.6854472318227152;-0.52526499478098621;-0.67515577458734255;0.70319053619370231;-0.32424297506960009;-0.8722620694551515;0.073779423266903246;-0.67470590716676759;1.1326299243108138;-2.3701116218401674;-0.98648285697511529;-1.8550880441345103];
IW1_1 = [-0.49439455263730353 -0.596784952379665 -0.12275899225497526 -0.69999643434004899 -0.46900597013719558 -0.67615379017865429 -0.49239209616898311 0.68202244875026952 -0.78972670139419421 -0.22783885153421796 0.10489158581725022;0.50073618678624954 -0.49717746812447383 -0.28600585409347279 -0.23813952937538269 0.57458686524135494 0.049726106761306482 0.86056302463749645 -0.37091267488656798 0.67359856731647638 -0.24778508019689163 0.78648185239643675;0.91123926406189215 1.2812168208874857 -0.059876220659937418 1.1772058828614547 -0.46366080924805125 1.4877403146928532 -0.51227091421607884 -0.36877461632301339 1.2318500939120689 -1.357114320053411 0.64136280812199697;0.87103563688122598 0.81810829785193584 0.30301087589425957 -0.70307032626284238 0.072468525833045416 -0.37494214073847326 -0.51865178168920711 -0.76111159078234936 0.26653056216560117 0.31954813717094621 0.19465747699971819;1.3654882945250961 -1.1730838892340221 0.029176244280276275 0.21216471148812127 0.9604922587175927 -0.1336704739003193 -0.085297222426218552 -0.59164503929994594 0.23663287921669285 -0.14316035502978186 -0.79761727082437683;1.6537915423478935 -0.65561166781532509 0.027018194532724818 0.28806786227159942 -0.049983047909359632 -0.26195742609415529 0.53400837378009325 0.067457065069617267 -0.71411954985250414 0.27917690072058537 0.32403034484733528;-1.7760529558037839 0.023571977918623005 0.15648113777029016 1.6394298583276095 -0.47688387396140863 0.79177716376621576 0.49019076633253872 -0.87942979675220567 0.12110474301637934 -0.61572290431370724 -0.46414311510188944;2.4186616814535054 0.5617850792637531 0.70713676241258894 0.52657135452597381 -0.36050333763830827 0.25024522905314267 -1.2688270055148034 0.72444590386830243 -0.10418152134211929 -0.70144609634336941 0.88000824081103812;-0.83391027767097137 -0.83246203396392215 -0.2205856473870364 -0.24008907464246354 0.57590685082404225 0.14801644652966289 -1.0969697502621616 -0.79929939216250379 -0.71189927954008514 -2.3839587781928353 2.2144691993649319;1.3175920031898556 1.8652236327802856 1.1989840211061369 -0.55117855724399434 -0.57376447305051692 -0.94293416621273096 1.2118396569127698 0.95994558297572286 1.089061322635017 -0.47682580655568496 -0.16203155871567532;-2.252223431912352 -0.53756175718042687 0.17172333440637647 1.1612169040339932 0.87635431364501304 -0.68741474338692121 -2.2538135280963369 0.55238693108853965 -0.34358350280124761 1.4570961153481434 -0.67461418791117667;0.90883963444556948 0.89411845238898735 1.8273599256351649 -0.53000721668140649 -0.21685239089149932 0.67800028798220657 0.69930108560595849 -0.76015320848101142 -0.62922127613409795 -1.1879345310465996 -0.022839198459797927;-1.8104786024964035 0.91112231231557272 0.11443533929943403 0.13006341581239125 -2.0527115574628318 0.65662816156897152 0.28611915431689994 0.42509993657792933 0.31678334397472779 -0.56220520183021427 -0.23779238143942291;-1.2072711079902763 0.36746376617430454 0.29997416773938729 0.13111507274965239 -0.44981762222636196 0.40116144823240363 0.68897304477345578 -0.035146485682054203 0.89770217293743904 -0.45414400300904667 -0.70595968725083069;-0.81610952772949152 -0.07645080086025989 -0.25428228752590198 -0.55408548405981506 -0.43567104794272671 0.69855403724153364 0.56926653019931484 -0.77335683580447778 0.61250908795621251 0.35587329171483206 0.64673950474501174];

% Layer 2
b2 = [-1.6512510555045901;-1.1682200291241687;0.9894245011759486;-1.036329788996174;-0.80856125949885016;-0.48739535524985256;0.399046308815453;0.29097653555930925;-0.62453816072193091;0.5633298550313216;0.75024380617347952;1.3513201007412157;-1.1269966111902512;1.499594543934722;-3.1337425884921966];
LW2_1 = [0.73508944748216665 -0.37667840708474459 -0.65491836163098993 0.37657881877997151 -0.17501332903488659 0.66103924201212749 -0.28519446923412423 0.3764363647569311 0.50634590109489319 -0.14217467364354297 0.62101552908305202 0.43533605218988969 0.32081490012080965 0.79654721774505088 -0.27991139376267282;0.73594139782142209 -0.149725221318561 -0.67038641944285327 0.11381794637215208 -0.63987862254375172 -0.57808066662843594 -0.50723764705490504 0.087169796954967876 -0.057169687117590184 0.16086112810959052 -0.45427161314448838 0.13589121285238448 -0.82787006463664392 -0.22565128571805543 -0.8202535636634215;-0.87209305976264695 0.58159617050979118 0.0013612901474667569 0.22834583921319318 -0.27964241422041181 0.2663329109294188 0.090783558136257908 -0.20547942807606018 1.0729147963889114 0.25210863640437037 1.2467375372063243 0.35802711354978145 0.85618518719089032 0.39847881949426955 0.75833550537186711;0.4018347552696116 0.79156738513204661 0.4286028345787623 0.65206714029320101 -0.11607450579198009 0.3883357554946999 0.38340178023059435 -0.12391963768259102 -0.05623956059074918 -0.24314947375367282 -0.4080910240616154 -0.55983160464676041 0.3851557622090343 0.21466238359436041 -0.53733379623762334;0.7242993605256679 0.32902586846133258 0.71084436075116975 -0.046832790535753024 -0.40725160902947516 0.10976753770797604 -0.46091091913010807 -0.25026639718257604 -0.10871408890549708 0.15066448998989923 0.29151148841288332 -0.58456020421905641 0.14416716886264269 -0.75014546907313506 0.27664835684420119;0.5944526816167317 -0.2737598505427935 -0.81287073028809609 0.31673785615101435 0.49489644773721392 0.34631976781782803 0.32505850154832505 0.56657934623978534 -0.20820036992881705 -0.25834527795582585 0.48209145220275307 0.57296013843847127 -0.073420753366995592 0.60513483970454029 -0.78726477186799648;-0.068902220069937167 -0.27331088987563679 0.084890377215961876 -1.0252307308276443 -0.28276121333073695 -0.18645384895137415 -0.25560476164018525 -0.61035561202595845 0.060939543304521712 -0.46993487914924065 -0.62142842851214275 -0.46989934626219343 0.18705088611020723 0.18005243346330282 0.32595160717955635;0.39938023035537162 0.077112905648657207 0.043455296811922776 -0.59852957198393519 -0.21891580194222304 0.24767588260400969 0.99269732927871956 -0.69451092984330365 0.62519522045295883 0.56764969526934106 1.5030605112283684 0.88363501913242559 -0.25149899920574037 -0.13279208837745404 -0.91020957761321519;-0.69159281786213833 0.95269080727177158 -0.083818372577266723 0.078326931243053649 0.32167333907693274 0.074601401340751189 -0.64964930657164732 1.3303476552228988 -0.21056652779672508 -0.37373703207161418 -1.3330189445025338 -0.69065497601553782 0.29067448629280229 0.42514791428278476 -0.19976572944511911;0.78505769552891602 0.0045379945460741582 0.089411955228983014 -0.56589102076263154 -0.0056087258549665994 -0.054200008405186531 0.51030502326316696 -0.23598592142073244 0.69699187964604614 0.94487003959158367 0.014631080541174374 -0.58993998296338146 -0.29997885277007258 -0.12938916719399757 -0.16714027137014528;0.2450054156392098 -0.56973830926791846 -0.26590065510262162 0.41654513447064356 0.11385041778358543 0.62894260900268029 0.44921159687935036 -0.037235555828112721 -0.47442944330058651 -0.21198223920644504 0.16227232021744742 0.28485960956282297 0.075657590268427471 -0.085148719910245904 -0.5640964920619278;0.94448624027163175 -0.64771861665016628 0.049725478740298694 0.36439664177469611 0.079138468983627433 -0.075674722055762325 0.26533405160854129 -1.1214644547560935 -0.069998584424636245 0.45502391926321217 0.38502753606631857 -0.30186562575606152 0.97662137584168773 -0.60489499862782936 -0.40325435046210489;-0.47228743791505512 -0.66778665919681424 0.31874584157486557 0.49836742064933753 -0.07536529434321021 -0.26163089342911017 -0.045553539810210007 -0.60824839277367226 -0.77414259862361634 0.58620563533315462 -0.52900958282033061 0.43979377196283381 -0.25793425320815666 0.45573116463469171 -0.41816503917528663;0.62335622591382744 0.0022409777960069044 -0.38919685859206565 -0.80206979769651576 0.31036119741122958 0.26405231529217782 0.64828423299301774 -0.31803128893672755 0.32144333345223897 -0.48558322675847704 0.817994967579735 0.46773761910204775 0.39486242327680199 0.41626388976313844 -0.23505484535551213;-1.5661206880528338 2.0822411620903538 -2.050342897734466 0.37400633590607685 1.1729715013445021 -0.36967403098389889 1.4535557662290928 2.1816772817197032 -2.6374106305251308 -1.9246871545638544 -1.6069687883430568 1.4075327279865086 1.6893719866020995 -0.43903253114174545 0.83187263081610452];

% Layer 3
b3 = -0.3063770446520388;
LW3_2 = [0.21243333778919496 -0.2709197259223024 -0.16305564881109566 -0.84988920076231311 -0.10805298000981461 -0.42267717337914007 -0.023787250150508907 -0.95953655910290336 -1.1318745495814921 1.0578796742642207 1.1699543753163355 -0.91108095136842582 -0.039042748758205757 0.36901390056603028 2.7444478161801253];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
