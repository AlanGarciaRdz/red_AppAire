function [Y,Xf,Af] = NOXOblatos11(X,~,~)
%NOXOBLATOS11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:32.
% 
% [Y] = NOXOblatos11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;-10;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;4.05679513184584;0.195790504160548;0.00618238021638331;117.647058823529;0.141843971631206];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.2272328098885374;-1.5846086350376667;0.89252524851674653;-2.5909983964213534;-1.7326366513563398;0.15117815952458549;1.2769085734868071;2.0528865331918906;0.8629234954004863;2.1511633712243414;-2.2193035471672542;1.0028475563378481;1.064681110120492;-2.3905943837930375];
IW1_1 = [0.21404468138292149 -5.9247239252199222 1.1453823842436097 -0.90345289937522133 0.50527468304381251 -1.0917540198839737 -0.092241487332182001 -0.67569366252773133;0.37310536203385175 1.5390211336672508 0.5482247380419214 0.28601290591221307 -1.918017466983063 1.25340136170961 -0.69121808814325403 1.9472464106141434;-1.0610868916813656 0.61455894159720048 -0.45211079228071716 2.3788144286178108 -0.49569302690773187 -0.2735212502046972 -2.931259918702779 3.2998235633282835;2.4469675058665921 -0.16114906782118324 -0.40233594268174327 -0.93248544319930782 1.2299300354624176 -1.5397888956746684 0.0031225534947031432 -0.50864683413101808;2.522154307520128 -0.13364384461580001 -1.0401735434140413 0.82411708707133702 -0.45079417333788457 0.87863695454209356 -0.54633471713306681 -0.046055675732634624;-2.6720343646743747 -0.23186799421445314 1.3825931706551737 0.28383365614727335 -0.31707810281787069 -0.9836870721682035 0.10255630152484388 1.5909616473345896;-0.95661745503878559 -1.0164653432604001 -0.20134348524160278 0.52352088496221261 -0.34648185734842873 0.050908617325584764 -0.49117081403554735 -0.15545977367186248;-4.1283323198720847 1.2908673829240578 -1.6958164039041257 -0.4150623800721398 0.20679174381663551 0.94954590034327258 -0.38214025945280311 0.72452830718480943;0.31574237389993332 -0.083859231532988521 -0.32860668855351327 0.39795218799296506 -0.37285338035068116 1.8500022701529941 -0.43165382767234561 -0.019952573289264912;-0.17171773701690807 -4.1657650244119324 -0.13266380478952067 -0.44522706528271311 0.36238628488492303 -0.20880409333732655 0.10114478572780851 -0.072923851298737602;-0.33566904732119529 -0.28243475263890594 0.98296663193166656 -0.47234871989117333 -0.24749427030900337 -1.3753602432241623 -0.070567471711607113 -2.0178800094718503;-0.19945947558060992 0.82152820209496458 -0.29271998628865697 1.0894245591688676 -1.0702720891216675 0.60763709080490358 -0.40287461697371274 0.055826454658676472;1.0879178422345803 0.3437021837308995 -0.92721130699489718 0.66741849324998825 0.57720746980197934 3.6900562498595231 -0.55284900016567462 -0.21328437623701235;-0.343169794630655 1.9151224270177984 -0.15856714630677396 0.12018711082700115 -0.28609881018847888 -0.13120808141210016 -0.26353349587271058 -0.26715919714515884];

% Layer 2
b2 = [1.5993526746889617;2.7194113407480542;0.76630960943938897;-1.1057165437646452;1.7966863485263251;-1.6817305604216175;1.5022421470978045;-0.33165585024863331;1.1939696139429909;-2.6287364281302805;1.078844731722377;1.0293423842156812;1.7675578821367632;1.203414403851188];
LW2_1 = [-1.2332128201806716 1.2078102917819431 0.48527842430907825 0.61856339054847098 -0.71019566978551452 -0.88602640344707762 -0.048257053562917422 -0.48168856459179538 -0.281653720558526 0.23346850194884333 0.12275115122639556 0.43162143484215248 -0.30750771229419871 -1.0784246626901799;0.66317984949607445 -2.0864528900689634 0.34705289911425458 -0.43005964751942344 -4.8560604533652265 -0.34870765241479418 -0.18670752016361875 -0.89307248863931366 2.0699696120005129 0.88932472986811983 1.5771263702848297 0.2933027805884959 0.66877574539039752 3.2175699225040932;0.11596421269657686 1.2395771402763818 0.42014359181280891 -0.78667700233267457 -1.4555717131861245 0.82441830577590047 -2.541610040403993 2.2907761086301739 0.55328512427660237 -2.1038967984734001 0.85566767467301463 3.2721628575005806 0.11801036195132993 0.95748833433883518;-0.64978942550851726 0.47082618833814527 0.10963340729048748 -5.1120548871355842 5.889141525750988 -3.8084073515368706 -1.7781791784195653 -0.83439022349248471 -1.9842609277436662 -0.32841494782245229 -3.1380369602030944 -1.3209698490906958 -1.5053753813665773 0.16274792063144999;0.25590005778494779 -0.45977848123791554 -0.55905118074067328 1.0711054180465185 -1.6539716595598692 0.26775593876330783 -1.7379034581504311 -0.62546721513314263 1.3076609144812754 2.5364305006655847 -0.84269867365931939 1.7369500361585477 -0.82928564089065904 1.4325290009920306;-1.2070486704833725 -0.61871255524341273 0.37652989809602111 0.97234359665543557 -1.8826212464606493 -0.74440923864294017 -0.55436466340540147 -0.41551041498378449 0.55485932166595398 -0.54192112471891396 0.032369122755424397 0.41433329067721264 -0.77432513637426503 -2.7639646991736826;0.1946065628110584 -1.3541350095631102 0.092945218234381802 1.2672433207787646 2.1247446388772748 0.50447196594696797 -0.82289123668638964 0.28007476470636405 0.37971704026387654 -0.83771229048050244 -0.17542451881518889 -0.48668121803211462 0.22960169548703871 1.8614929693277769;-0.21647713749931313 0.31579804651238436 0.060101493780674496 1.0938066390106167 1.7664918496986239 0.33071266490556955 0.035239005578672725 0.27020810561304814 -1.2731392147114435 -1.2521824677257452 -0.067458934030553891 -1.1822044963355947 0.88737553555195348 -0.24913977963107004;1.3136126432490918 -1.5138064210321578 0.83513075375406554 0.045250082823090912 -1.93021787558989 -1.3245723175090673 -1.1840977162913253 1.0892845031237446 -0.99893404981288592 -1.1017254989528327 0.59317218431808716 2.3194454590148981 -0.62820151832108806 -0.90271993564264186;-0.28513516529911292 1.7221132053750894 -0.53610138463567258 1.179137700854366 -0.36186877557202202 -0.85203650026045963 2.4657174176490049 -0.68989229716935885 0.83527310710675473 -0.28750703241935482 -0.65039115121942159 1.9534142140326449 -0.034206775630105268 0.31766559213390805;0.17720070592007159 -1.2935978757482152 -0.54844295304933766 -0.35459587618077082 -0.29277405529431721 -0.39384721348560481 -0.22533182282628861 0.25846123359199469 1.583315601462405 0.63404873448693 -0.25734643223413328 -0.19381565986040886 -1.0412586905663401 0.58137233118179132;0.65138225159237617 0.6149914735404256 -0.38745845041139215 -0.65711898759083953 1.0272441185220562 -0.99347770159963911 0.70873790056645147 0.30918299361166468 0.56197790665186931 -0.09542197924246569 -0.56234119895839418 -1.1721711142437452 -0.61569038949372223 0.65377400903210992;0.11640612447348365 0.051396351093153728 -0.53900366675804945 0.28074949401186211 0.7509124936240722 -0.2897123496710719 0.73631640930332465 -0.46662173879277924 1.6574783614588942 -0.32771121611125642 -0.88394714247186701 0.39718564583940968 -1.1333506358118659 -0.70359737678139178;0.88999474638212517 1.4352603488897169 -0.36681080649551284 -1.083191435329252 0.23074210074619392 -1.326926897368097 0.75151578441194222 0.22128803748737599 0.34975873050683914 8.7918695321001494e-05 -0.547772434245127 -1.5505395101273016 -0.61739274680929801 1.2022950776815655];

% Layer 3
b3 = -0.61830798138417031;
LW3_2 = [-1.0499941149016736 -1.0705812970064017 -0.17973278014829344 -0.76170868281233262 -0.91418438298092641 1.0436494236120679 -0.66390057281676929 1.0565516517128073 -0.37885522799487559 1.3670496454636973 2.2103828275628254 -1.6223648193863347 0.93800945500957067 1.232159348630206];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
