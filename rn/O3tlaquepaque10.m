function [Y,Xf,Af] = O3tlaquepaque10(X,~,~)
%O3TLAQUEPAQUE10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:52.
% 
% [Y] = O3tlaquepaque10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.171659085057077;3.03490136570561;14.7058823529412;15.3846153846154;10.752688172043;10.4712041884817;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;14.7058823529412];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-0.32179728385215645;-0.28383369741472619;-5.3837969129080374;-2.0770801800777972;-0.60602868388804143;0.06295604562845665;3.6610249077177692;-0.83090360343798808;-1.4038949390103701;2.1595897053610411;1.6432777061571704;0.99500729690110523;-4.2024177547518562;1.9010002098908227];
  IW1_1 = [-0.77341613207591664 -0.97908273195723905 -0.42500554430048737 -0.35743300942156997 0.38342779962263202 -0.43806529866625077 1.4357067481848507 -1.0712586431867559 2.0429907816372563 1.2724739485000256 4.6090435856399967 0.40173120373743099 -0.58535776963504493;2.2692040486148199 2.5792618407732362 0.1121486908644926 -0.28139859254305455 0.32851736435515189 0.37756808858138929 0.94684416816740447 -0.48101674707386599 -0.03445129473969874 0.99499562841726619 -0.48283836881401249 0.083016770590241484 -0.58288060802095243;-0.16354389221804441 -0.099106386646620095 -0.92475712071905625 -5.6521258780064434 -0.85363890587635849 0.33767755686197104 -0.47486129958470452 0.71297853589730253 -0.41574557496947073 1.0656719059118758 0.7420489006629013 -0.35423239009002622 1.0626175052164328;2.2353271234240029 1.4703400079546596 -0.94325779442969759 -1.8151973785852031 0.52784023051020346 -0.38044859593436742 0.60402005482653576 -1.0620747593057061 0.43372432527565935 -0.45641303016976814 0.1858026366126132 0.30316158499705026 -1.3744691320867053;1.7851888803314657 1.4214824065861109 -0.84618031115854209 -0.94044163755354881 0.33586532429997706 -0.070270869279078538 0.36754149273504572 -0.48328172952902271 0.43565340433526289 0.39030256660587093 -0.23554920792028516 0.036036904802410889 -0.80393982273130393;1.235572321224391 0.089069554565677236 -0.25902917026655192 0.54363914073665587 -0.062408998035453522 -0.047026883805375591 -0.28105478279741236 0.10647907820752152 0.055510779298838374 -0.32535767563483459 0.12324718613094664 -0.075844301068269199 0.018860931474268743;-0.18639888644310373 -0.58191668165066834 2.817041016623989 -2.8810590860752807 -0.77521950660066252 1.705780634624058 1.3187276520518643 0.69650396693150218 -0.69204829052400241 -1.3662686221050981 -0.039417321818425818 0.42236622125848927 1.4931488719705526;-1.9496044102277557 -0.14362890855941415 -0.4713466183174384 0.092317106732548337 0.37037902781165805 -0.27206257121254301 0.24302741024833133 -0.38736173413079927 0.13205839384543827 0.98845452552707891 -0.43482015057950635 -0.046361638631554798 0.02088864975387119;-0.2668759055135983 -1.3160303308977372 0.22456748995791326 -0.27347429584342142 -0.15886628559255922 0.053716156993829631 -0.13261326161696746 -0.0075574293844649885 -0.096237979487440242 -0.18620308631444749 0.24720044021311322 0.10049015391155527 0.018095487259966354;1.1022111160822898 1.3736039939140157 2.7241835543501205 -2.1161311322589529 -1.2943569451531454 0.17985102092574029 1.5243889494809186 1.1086726012184318 -2.7461579605494917 -1.3382612481915348 2.1494273111205082 0.2680802218700517 -1.692842978096667;0.63451516891908 -0.38994194444947372 -0.32370517584237329 -0.22179746745101181 -0.1567437280440287 -0.31146151444730819 -0.39594922502946661 -0.33863954144850134 0.13106311955711594 1.1157193819649838 -0.28030176280078023 -0.17822950053798975 0.97476790700516924;0.18896365397323417 4.5060556230726236 2.3415693365468244 -0.33712363039930016 -3.2646033858057333 -0.62063403419297758 -0.21560845977024939 0.93895022839654751 0.072664602242419885 -2.260427104652297 -0.080477102744300338 -0.12944818351570497 3.6377398669947514;-0.10488350285082768 -0.77389595759669694 1.3192003884276309 -1.9736231820472736 -1.6069778792085949 -0.71655983296751935 -3.1219770439983763 1.274263659001605 -0.86175532810311406 0.93194139014647503 -0.33849533075959531 -1.532287858842345 1.5414040874176613;1.2087547447662623 -0.76193697669704596 1.1986727878359926 -0.58726964759079481 0.30638753337302288 0.074993019906055378 0.75212911792777815 0.33278939365446536 0.054752754769428626 1.0013353102606515 0.32709273758801394 0.012929545153489659 -0.72588262684876392];
  
  % Layer 2
  b2 = [-2.2673648494001095;0.10827286367160777;0.36010104358900857;1.3500904296418534;-0.36277158849851243;-2.4856144174971297;1.2992946383873707;-1.9669238035182297;0.346103062309842;-0.10173821368258211;-2.3615137893166342;1.5643905616694072;-4.1976445621795158;-3.4148459012084187];
  LW2_1 = [0.13216821379197663 -1.1017796334018046 0.082173906677110706 0.60972668754036652 0.97547225456639064 0.46432175083570165 0.0084175998138419951 -0.02048549933143249 0.11926000327773725 -0.59515519815341855 -1.5009364244981447 -0.72088982258525469 -0.44876489478229303 -1.8385866124748769;0.038060449795814612 -0.74158210395394331 -0.60248876998586276 0.1124387703119379 -0.29720048363827917 -0.66037126583541406 0.33976368262681883 0.40568363656454032 1.4440310324714127 0.15668866940534334 -1.0852629665991369 0.83070980108813008 1.3987970273262522 -0.72607975853151452;0.79927372674893982 2.2141161486355365 1.8996343630114274 0.78366753991805627 -0.80105173838937982 0.012813253028355745 1.0829826031828971 1.0032610810113352 -1.4327431711612242 -2.2613319337095636 -0.65442647035426937 0.38383254925367227 -0.50996395585333165 -2.4348692683391504;-0.21898474804484747 -0.054189587294396532 -0.84194433004240621 -0.68224175324824388 1.3847228201410224 -0.070834242272112713 -1.0250257058250041 0.12129929930438703 0.29057590650704151 0.13383919394907295 0.9733501129365647 1.2487047177109514 -1.4671241030833735 1.2140418782921722;-0.063977388045225264 -0.075423758341242236 0.49952628212727457 0.39362721966636305 0.33383994442401616 -1.0717686379520714 -0.18177450421620817 0.31895315087047849 -2.1622055978058548 -0.20109631479737117 -0.14838862734844069 0.29911528264516857 0.057203187982254267 0.3733574356686683;0.065327153165516474 -0.25306055260737587 0.54844243905516465 1.1645349847084343 0.3982102767504257 -1.0550966800088646 -0.34244920100395454 -0.33150772650562382 0.0085462164429435487 -0.49096846798663552 -0.75339086001446232 -0.83582644074809598 -0.73322146473407701 -1.5041629047862817;0.0097045532077464497 0.98787608095021018 0.76219410698147327 0.30643956125774996 -0.12450448696783374 2.2846139958906608 0.25202349130661661 0.64479486182058621 0.19504135193640926 0.18589660367108035 0.18251167627962245 -0.59879711745104103 -0.59067859219804797 0.37317570165816982;-0.22688335449801378 1.0480186073507787 0.53050029326102444 1.7587922987761797 1.3624435537087167 -1.2281782525862663 -0.79020421898886051 -1.3433368991519772 -1.0263429039775636 -0.044029251586291569 0.1791224218604221 0.21878677760796594 1.0766692725872908 1.4337744763782796;0.48718218584686362 0.067592510934744013 0.58440736135950189 -0.1864466964533073 1.0030131160615103 1.2863476066518207 1.4258748654494753 -1.539581598071035 -3.6269029016504954 0.31174255221539882 0.71550888886920239 1.4603983531492764 -1.0384590919903209 -0.61559517431503452;-0.30454696758705257 1.7397345990419724 0.9428881004795695 1.3501506167876829 -2.9466016781012172 -0.21788015192427071 0.24452486056931871 0.65197589633219244 -1.7275996686415866 0.71334088020058473 2.1714369979316226 0.64219290162863585 -1.3365155505216999 3.1260312660252296;-0.19705151958550077 -0.69152814443364752 -0.31008405447109205 -1.6028371394894634 2.1673214006525994 -2.3300508833056579 -0.55844778233104664 -1.955255114296826 2.1214801912073096 -0.59805188860188307 0.04058925725601753 1.2191733599986685 -0.63185634792921086 0.34353980737350931;-0.13233508889712994 0.17805649428461282 0.37302976881569488 -0.29890898523290971 1.5561174840541663 -0.73094072486572237 -0.44859710505926059 1.524528002135709 -1.2723186304222254 0.063427879786001215 -0.69045198510080186 0.24243872832572008 0.28148528733728068 0.5013673199928439;-2.2756251698401928 -0.31042101521594906 -0.74139573893298782 -0.56846172438826681 1.245559325269854 -1.2940754693780097 -0.68904658328614399 -1.3930914045616936 0.46439481333681959 -0.6799278850526943 -1.3461412294669932 -0.30926857574868433 0.11530509759095875 -0.90335994401202613;0.13540361303146392 0.28080999017501451 0.25164702651777326 2.3704746534178986 -0.3137269436255774 -1.7727334003386606 -0.35462043106642632 -0.18167192287192582 0.017040463362860518 -0.16651940392748515 0.70807975021697223 -1.0097582134805321 0.733949827965379 -1.8094279534706255];
  
  % Layer 3
  b3 = 0.55498333468744254;
  LW3_2 = [2.5050573688188971 -0.76255199382647698 -0.062223378627619529 -0.40615237323983011 0.73169294279075647 -3.3352776241725355 -1.2542835433486847 0.46435636892020171 -0.26063845095178223 0.469758505905502 -2.4057015851174626 -1.0973430515650957 2.7890587583095434 1.2590050300313878];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.7058823529412;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
