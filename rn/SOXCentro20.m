function [Y,Xf,Af] = SOXCentro20(X,~,~)
%SOXCENTRO20 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:29.
% 
% [Y] = SOXCentro20(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.65654749654533606;-0.76001069002160704;-7.0536505248435368;1.2766940704002561;-1.6431059608877001;0.84925487265413335;-1.3281472969119981;0.81285633571313221;-1.9740089556784557;2.6563969317814302;-3.3817749705361586;1.046317227872986;-4.9545068062348507];
IW1_1 = [0.33963603683182098 -0.2760044741320532 -0.96945157458149878 -0.95370131267163327 0.38010855711411778 -1.4828874671466528 -2.9862626918425343 -0.093857080610021321 -0.11825563285891652 2.866613252287455 0.66328476872270803;-0.30245383904566209 -0.11324491448036567 0.96808669178340234 0.84185920420179505 -1.3010444088614737 -0.32490452673365888 -0.79479201686051171 1.7469317582481616 -0.95476987337526176 5.7677342375012692 -3.2771171879427365;10.744815948382756 0.5330160033863367 3.5077196193475992 2.1061281741652484 -0.84689558003353271 2.7409704689863097 -4.7732621529599175 -0.433061946605246 0.23179025460172947 -3.4034279083928536 -2.3486496630068738;0.71711116416944509 0.076454915962134606 -1.6175244001495086 -1.3153997724865936 0.54949704215274331 -0.51831208505850057 1.9378832667203301 0.70983427282613465 1.3464183222790416 -0.90138675841316473 -0.80032650857766596;2.1722915735008823 -1.457730239183562 -1.2245378477997069 0.43228695383181576 0.1865833488411599 0.0034112969594801215 -2.7077731303323054 0.45550075630584252 0.73976823092234256 -3.8755383000593722 4.7684169370360321;-4.5608349296934101 -1.3268220100150609 -0.87180910998511096 -1.2111587269186719 0.098456215457266627 -1.2022501604490869 -3.0833377293660824 0.0766967951490648 0.31458073337149217 -0.58579544867664279 0.89075409064544464;-9.4862914058961412 -0.53635265389304265 0.017265752736384046 -0.11657963939176044 1.0257234827835926 -2.7525465286203046 0.23998422984935605 -0.95836036678564207 -0.19269852380260644 -6.8495606536612037 1.5343492546080151;-0.81103556648743036 -0.027781793605121598 0.059178544642769074 0.20395175154473139 0.026415506573284127 0.23033257893205175 -0.21752624425206191 0.1366784282993363 0.067382548641837681 -1.1600860001541629 -0.0019640530985318445;1.0723784228914552 0.36939485075725409 1.6463395740383897 0.61449427442428184 -0.54451200274873091 1.3995576312405869 -4.8010091439692699 -0.03984033483882557 0.18364646503043267 -0.081524457134410935 -1.1570498433306808;2.8522611020885416 -4.194891602218374 2.0038484054039314 -1.0358511225724953 -1.8046437246151481 -2.2972009351782576 -0.64640674074852944 0.34399969355464965 2.2643233948187889 -2.5284829643788935 1.8394464263309678;-2.228932474073317 -0.52381399765604186 -0.71173698805449681 -1.1332848094659962 -0.24983905882471175 -2.5452475424610066 0.7199068070182848 -0.27760872477343213 -0.22748336129185653 -1.2651980396710751 1.6227173363172032;1.0596725467031518 0.093532045664162761 0.5091836525557234 0.06022202190485991 -0.47347062419484065 0.0064012450027339518 0.55283568992907661 -0.042932386584033908 -0.066858840502885819 -0.80568573602571147 -0.39140289672451045;0.054927488157991519 -0.19088838275327485 -3.6085641852348536 -0.057603209775214936 -0.46083506201469265 -0.31123896350853913 -0.78104525807051339 0.10328619143137899 -0.13214856379698336 -0.92186904066774478 0.98820609327176068];

% Layer 2
b2 = [1.8753676793973677;-2.17821099590997;1.9049462458568955;-2.2636123517646567;0.81727941291146;0.84774153428087462;2.0584231216980013;2.0092444952411959;-1.4443738470269907;2.0553888551643569;2.4491937394924865;-0.4781888272879779;2.1955967300939596];
LW2_1 = [-1.1388446232239002 -0.26916940505540266 -0.56912014668269195 0.51659690267082292 0.022078087225766357 -0.29356575453094585 0.47193861152613448 0.21649789810302558 -1.3500438123970417 0.094097724249251918 0.16777963345911948 0.68729030487661746 0.040264452608818731;1.5488312023446029 0.38630326425060735 1.2278206056303342 -0.56275276719800105 -0.19980411279633431 0.12476366715791304 -0.48478879440910072 1.0285179050017157 1.1987447072738824 0.058568060738421919 1.1035752989921628 -1.1454565702530877 0.007519461969241515;-3.6899940329096759 0.81582104920763354 -4.347379394188601 1.6776090868913518 -0.76172127213882035 3.2403031571598673 2.1699117750295094 0.85001370045309133 0.15274844590946304 0.06597474307822998 -0.56821359357729817 1.4203892550426274 1.8615988413590672;0.26314139946893456 -3.4413448646820788 -2.8666934300395144 -0.80684667406939203 -0.40303437306171574 -0.53333363768877584 -4.8727768365113606 -0.93865287281151344 -0.95650140225240665 0.89274555483039786 -1.7872187267384581 -0.046781751683644332 2.3256290621016653;0.15389196450151604 0.082329461355220304 -0.31437170521471547 -0.13412640503774653 -0.045403891322002642 0.19677733770335892 -0.0020490318962173848 0.068791575493716672 -0.10272578594143086 0.0078579876888067758 -0.40746862581197557 0.63466373715260016 0.021161162814326596;-2.3160461841042657 -0.96600925113903702 0.65293832072515334 0.52755158500321131 0.24214211810613048 -0.098404229941992702 -0.38012371045045013 0.77659298526120879 -1.2125794885798034 -0.66705127496941696 0.36921936650784615 -0.31798277850217271 -1.3419990809206293;2.9125775920508534 1.2170267351886204 1.0581706223211045 -1.367334279855988 -0.68207668119281051 0.96660136635995342 -0.34444781840875738 2.4656294895854756 -2.1387482172244776 0.32857734567976632 -2.6283331857909582 2.2655934909225763 -0.5216564350925782;1.8367450046371163 1.109614425493384 1.3122587091120319 -0.16209535862302232 -1.2183824597807531 -1.1130521393732018 2.9139194189052984 1.0333436797279474 -1.2376827687784835 0.65070896182789817 -1.6723791588522519 1.0482266409558292 -0.29329712719519679;0.25767609304421468 -3.3825105324826308 -2.2251259256813309 -0.83336442573821534 -0.40791539505209662 -0.51657688595975393 -4.8449199783023822 -1.2720974846548654 -1.5913466623741483 0.90205484800364155 -2.5152130073628434 -1.2406384637508425 2.3422707908529099;1.7664365854809689 0.73900972947997146 1.2306120923476696 -0.94113958632768568 -0.22944250504313546 1.0697182858957357 -1.3967970618391323 0.42616658579615602 -0.34554631737775043 0.24365813645516532 -0.046324395092920898 0.41559505224853133 0.96684207771643749;1.9420658464570633 0.99242637527932465 0.7794814347190856 -0.143954681374688 -1.2143658195858804 -1.2177853880290381 3.077415934852842 1.3729409726372592 -0.62883412484202483 0.67977747528008603 0.1495422537503007 2.1505024396611714 -0.35804476816719305;3.5775300574948701 -0.79721266434984883 4.4848893043777203 -1.6791780310596771 1.0464339933642048 -3.1686984437125454 -2.65951715968164 -1.9391614156577088 -0.32628540110167215 -0.19115505453844703 2.2305483659380148 -0.84482316861342233 -1.8049089947044419;1.0979443813959044 1.2479945230426461 -0.75437129358460076 -0.08705004952345663 -1.3202267467018369 -0.65920701804713766 2.0035993573915571 0.87507234962139235 -0.78526174985199171 0.58327334978363277 -1.9039848395832852 1.2367129854498726 -0.077824395799667379];

% Layer 3
b3 = 0.93510217501634862;
LW3_2 = [0.54859701172100084 0.90068708321789936 -1.715574497345411 3.3552136228843032 1.040373289250752 0.065345193827303222 -2.5181901115675949 2.9064529265146133 -3.3611451652512874 0.079876565250774162 -2.4914147552024781 -1.7201017962927132 -0.4528802729895835];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
