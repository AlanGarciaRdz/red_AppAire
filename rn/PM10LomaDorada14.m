function [Y,Xf,Af] = PM10LomaDorada14(X,~,~)
%PM10LOMADORADA14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:12.
% 
% [Y] = PM10LomaDorada14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;0.00462534690101758];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.49901253922928329;-0.37426544115345095;-0.66947255797327498;-0.030529022327642191;0.094080875003255432;-1.3520650844462636;-0.40116006606658283;1.8221940263525356;-1.2666485677267691;1.8752909400284712;-0.38988719854391857;-1.9040503689953872;-1.5219369964126017;1.8331217412921343];
IW1_1 = [1.2168965718839058 0.019999718651484748 -2.0037710779617393 1.9709390363992649 -0.095181856412768662 2.3128044255653588 -0.1722837670797388;-0.73239404938129149 -1.754555953909771 0.1644610250780778 -0.019060284591737094 -0.020636308881588503 -1.0327813724672377 0.064504661235850053;-0.37689369789390464 0.2490899363775686 0.48769645441032461 -1.0086597617882185 0.25460484520209875 0.60362508965118777 -1.5646774677979221;-0.9493350088492627 -1.4107397180609396 0.34134301078053547 0.54893356037567809 0.29462998577933575 -1.559409247105487 -0.73593085125275093;5.6502881013303883 -0.044248051012083046 -1.5294689494632465 0.50504788095927688 -0.42970538218777804 -0.83533987408703381 -0.16194850430392657;-1.1345034179685896 1.0479421978608499 0.49306424936110405 0.037436489106058166 0.6292404321614582 -2.0141194392668806 -0.35924507800435612;0.023926444234157771 0.65550736296043022 -0.38987968728344657 -0.38232894781855531 0.84885849522540624 -0.43331598169282048 -1.0091763270861314;-0.00057925743090146004 -2.9392660378859725 -0.34277035793568189 0.082423771660546818 -0.57444638738037623 -0.72963607919203077 1.0620805946104077;-0.7585855283942744 -1.0132885080638938 0.60302493262253898 -0.93305487353218264 -1.0323281863773706 -0.77518187915160319 1.3652704791960468;-0.7018890293872696 0.063576482688517705 1.2963033826223189 -0.38481629719272403 0.16958071900778846 2.7397295700083424 -0.63744551608122069;-1.2099295318754271 0.68427795171357475 2.2238203070728799 1.2466634671412118 -1.2963058098734908 1.1782315006203967 -0.98646026372105355;-0.56326904325738325 -0.33031772271346999 0.82878929444320881 -0.42772761295012063 0.65671919307874904 1.0339593256459347 2.1080260464592495;0.62958895168269369 -1.8742657807889782 -1.845204573259462 0.36559161752470432 -1.1692405142592774 -0.59832379610422548 1.937302179922471;1.2774511558395698 0.5933298887091758 -1.4543052018917026 0.43962156881293568 0.24445095278652162 -0.24096871454243851 -1.065370061267519];

% Layer 2
b2 = [1.836867417222859;-1.3307792065826001;0.64582411660162231;-1.0696966314625054;0.49916550044836716;0.068420506552406418;0.059882073327214777;0.18488448645521488;-1.3594478203605465;0.90983445694195519;0.15560933127959459;1.1956967774905913;-2.3879326591656334;1.6197218338289041];
LW2_1 = [-1.788548065001377 0.40618986672597368 -0.38197466058844187 -0.53661634817567316 -0.38568303356878647 -0.26296840757795242 -0.13654252604675599 -0.22457367760003152 0.33761633908135619 -1.2528338320126187 -1.658488611432154 0.51465294207939927 -0.25291213285597414 0.51572187811719283;0.48012595514514 0.32069521667099904 0.60587878160787101 -0.96478258788867477 -0.4082393686591454 0.73260372563469389 0.68870390126377368 0.25706465778979326 0.48929591947717921 -0.79544877285455917 -0.12098982522222834 -0.28259075435964004 1.6755944321057969 -0.5207888131944185;-1.0091515538874833 2.3863989465888511 -0.29514341097756547 -0.79541880130697051 -0.22987137461583901 -1.5244153088217283 -0.51988862381738665 -0.80275305064592695 -1.1255562694950443 -0.031683773360709072 0.35675003153539586 -0.38660255269228594 -2.1360040959718098 -0.25794678735533383;-0.31154088874123598 0.30996382988672555 -0.982649436834511 1.1934631905159645 -1.3325539421590136 -0.33315728656973409 -0.1424528459522883 -0.20971568896433967 -0.31907972400408585 -0.51970356617350988 -0.29739954774679478 0.56591312659748971 -1.2267419779480344 -0.55914574904387071;1.0076407730484076 0.79055255242427125 -1.118052304906328 0.84133228564581763 -1.2616821521424786 2.5261932207738007 -0.10750061648755402 1.4189585591499672 -0.67382297533665547 0.31758309072832069 -0.34603661409023323 0.5402306689604004 2.4284616493250581 0.0347498670269768;0.76133294015064912 -0.52524439097125264 1.5217467704875733 -0.22682005246675851 -1.2356634859944426 0.19047889003061838 0.092502595203390367 0.94455215680363758 0.40137073076763868 0.32698338568244073 0.31431862029471413 0.38180967557226642 0.38277823834788266 -0.45166804153058732;0.23069403547486819 0.21131954491224275 0.92848069255424293 -1.1454465933036366 -1.0165662870461474 0.31817653675947655 -0.83027634412989382 0.67415261794566184 -0.21339213138585592 -0.04087352055566161 -0.13943981791061949 0.081475428501040947 -0.037514752571671264 -0.054967440168140959;0.83046302982653275 1.7119035113837273 -0.43611552439090207 1.259594283635034 0.36462047453808655 0.67999741410872738 -2.4269921232886489 -0.65817458256031935 -0.28754700276108042 1.5722570237269036 -0.87669861049617448 -0.21543086791829386 -0.77681364538731612 0.11754468823332821;-0.56216657901984557 -0.43083878346682336 0.6821223442625598 1.0783354337373403 -2.7258115693405545 -1.791827987732364 -0.29940661461276852 -0.89050332089663131 -0.061980620962488638 -1.9282657726637611 0.71992181858309579 1.5185074514500452 -0.93387546631722373 -0.63171708066369237;-1.3050532486153221 -1.3889587929976117 1.4462791917660525 -0.98357465948370837 0.24028424524702172 -0.37597646361425868 -0.75894025542885868 -0.12441622494463786 0.0073382406438883543 -0.098771953603975754 -0.11527720557642038 -0.067142141189019594 -0.88084514160348459 -0.42177840192047766;0.29675819161172801 -2.4503787416767278 0.44656260626759248 -0.94102822242167627 -0.40504425316185899 1.2817328376187807 -0.89269119230866933 1.1211934426453081 -0.72858256328728388 0.20042008595128658 0.031803271471443295 1.5957799316543766 -0.34416586444061875 -1.2649726792944225;0.94880947806836236 0.34199235814441603 0.22449513801215285 -0.79289550802943054 -2.3567793710929079 -0.78851144166832454 1.1265249598758853 0.86543318802744018 1.037007475970694 0.53989416985806415 -1.7298054886217844 0.14925196788253864 -1.1038628097672751 -0.50587650408770479;-0.18391663578357365 -0.35900328706333823 0.8342134051608503 -0.081120706140767107 -1.4916790540940557 -0.36248416523158861 0.51848160629781637 0.073952330735813865 1.6125783187296956 -0.80970117124147489 -0.27413836842492079 0.52139854830944921 0.60999524649116255 -0.96849781213007968;0.21419328748228517 -1.1084361315789515 1.35257570132326 0.69076782395342806 2.2363445086153479 -1.6231440229366285 -0.95376568716601273 0.43041680681716449 -0.36303174018359829 -0.52725875860345051 -0.11768225302503059 -0.52899755340356436 -1.387079262363794 0.084557017999770862];

% Layer 3
b3 = -0.33160979636613491;
LW3_2 = [-0.16739531650380857 -0.84292041917663973 -0.52234099562040748 0.54775716767130889 -0.18263906621668477 0.47891737908867232 -0.7910411791510813 -0.11099043655114824 -0.49892516926331054 -0.41309870579116426 0.49827976931750378 0.26241102526214938 0.74010594823016262 0.42509096081894476];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
