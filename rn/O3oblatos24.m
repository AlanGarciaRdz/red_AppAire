function [Y,Xf,Af] = O3oblatos24(X,~,~)
%O3OBLATOS24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:46.
% 
% [Y] = O3oblatos24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.6419459825461;-2.5269041808925787;1.0074672226841614;1.3982862303079759;1.9625355209522144;0.19217740814214071;-0.61655592335991249;-0.48996965348394828;-1.02874705543562;0.63508153240331922;-0.17075771669244169;-1.6060306463503198;-3.2602789760289617];
  IW1_1 = [2.1198386707687424 0.51560365822990317 -0.13320353241153587 -0.0031630486799400503 0.38384064673492468 -1.0878369649459141;-0.29475418250876517 0.59998640267983205 -1.0830981506396395 -0.92591297224324542 -0.68106629637002014 -1.0724299848684185;-1.2404473873906146 -0.75776167920650572 1.9651803707264128 -0.38610011736518646 0.62605430637977155 -0.90541013976281493;-0.46450765502699581 3.5095403261513076 -2.5640708827999585 0.12566566272259155 0.27463296667510967 -0.38400936061881474;0.32842560579904934 -2.0084962369978445 1.7442843137371098 -1.4888111982144121 0.94583483133840918 -1.0973642621926187;0.66412333940962165 1.1201582878408507 1.3921599572085612 -0.030522250550488475 0.40633274597374203 -1.545060031784363;0.12064128731749589 0.63488922536228887 -0.043458334175813837 -0.56677232152578472 0.70683909551532997 0.80390210107620774;0.017698826024545266 0.83107152827784148 -0.68327797904928333 -1.3426642580755019 -1.7313848182419465 -1.3794204173839919;-0.9229902223122588 -0.96035688082940507 1.290053213879691 -0.64753743647465023 -0.66188469882225209 -0.7592850620235353;1.41616997632852 -0.7352955954270215 0.26763499460436935 0.1270633030021821 -0.23774905636898433 0.52550341893493813;-0.070309353913311654 -1.0286023771615849 1.1704184821691979 -0.46574047617802689 -0.84451528464340175 0.39974180961794825;0.0092515176718555026 0.81180446042528609 1.2967211861582764 0.74247074998501628 -0.063712888897033707 0.93891313924871833;-0.50319419904715168 -2.1028800974439426 0.27142573749077281 -0.8656678072999977 2.0023581484227817 0.20331411748433698];
  
  % Layer 2
  b2 = [0.97211639817613327;-1.4514489134815407;0.66984293564910513;1.3745070127412879;-0.014350585566111212;-0.35767706361702978;0.70226691412323161;-0.010669161512181072;-0.33921071430531441;0.21985393327564251;-1.2430333428767275;1.2376979573861533;1.8369065375382385];
  LW2_1 = [-0.25052208330686515 -0.14804157786065966 -0.20253612228154239 0.81855938744737611 0.12507607273659574 0.37914822930854558 0.64801456760252141 0.10886628160118828 0.29276372212620139 1.4407402121178687 -0.63953221520819226 1.2206435001994718 -0.37990277519079846;0.64445751251501771 0.68271287786328572 0.99708415698439201 -0.16217198514669809 -0.55279165686106735 -1.3851842229578946 0.53800826974703342 -0.30032469924886745 0.13986254749060345 0.79191962754378709 -1.6873550163912177 -0.57673332087561235 0.81054120099426841;-0.25112263285697067 0.31049039671918255 -0.1556212568678717 -0.082027949650648566 0.24795285598180714 -0.31993637448001416 1.2719751160593857 0.73332226505080356 0.57057186257258297 0.058769470962134938 -0.46922090383173154 0.47242846962926505 -1.3099811634067504;-0.019565805022259741 -0.23042190510350613 0.23343367119931244 -0.28293465918428867 -0.22257275875487947 -0.14375748833263274 -0.025616598626237663 -0.55038976039966847 -0.19611247020524972 -0.99578906113040488 0.55503011121877932 0.044748145118881186 0.3866383179213615;-0.45155664468754114 0.48266775268505857 -0.39163067323393042 -0.87635094859461404 0.77202387723329824 0.17214545807488063 -0.30072978975016251 0.53439338439707529 0.33907241463871501 1.012520460403042 -1.0154507668547663 1.1650939440554424 -0.31692624665957125;0.47899439071798233 0.50733687518233384 0.50222622584360599 0.29876580850261575 -1.6375747403837242 0.23642378748305728 0.17581548163582214 0.51330051768376994 -0.96262849652454296 -0.29657771215161777 0.53717672280944773 -0.27899592733199358 -2.1320118447570353;-2.3198831545159693 1.7475736165963174 0.27607416234858329 0.33352409001885264 0.94245833490877107 0.10741832833910202 -1.542569814052337 0.51291258498880254 -1.0380621336043059 0.7025145774399113 0.87182557737300481 -1.4327754735174327 0.041331980008227048;-0.025259041162286638 -0.81412773633746993 -0.27270236740873632 0.16765400870534658 0.81239084180050314 1.0600766772764292 0.93645147273081386 -0.21452654695538381 -0.66286516439912591 0.6542673203408822 1.0176850485585229 1.0880431544763405 -0.11057084068185107;-0.041761800878588835 -0.64247153889701436 -1.0224151471142888 0.086179350813768762 0.754159524057047 -0.69989111288963057 -0.10003062470834465 -0.095043378830390129 0.8558485972908686 -0.55983968565730879 0.34213683054809668 0.81699686015535133 0.75633125124757061;1.341601411313712 0.1639645666817155 0.56437107374314965 0.088327500926265165 -1.4776047660695881 -0.37967401123850925 -0.41760540745220376 -0.9830025879987111 -1.1238114206687928 -1.1178802250396391 -0.40534267130107382 0.15062309201582549 -0.25535756190043951;-0.5839803264925838 0.3687071887272842 -0.10559805864549621 -0.60740124695879882 0.2452011921490917 -0.017810578587898654 1.8329443087337969 0.90408106929967524 -0.081324580974282024 0.42338346885975292 -0.57563783846824434 -0.089048933394760596 -2.0287116717082729;0.23098410069865133 0.5610774750455596 1.0248566678357838 -1.1225049494801747 -0.78548996119947734 -0.14740644146805246 -0.16632271099663626 0.42282415646189875 1.211242635899116 0.96775132218295901 -0.021059779540179999 -0.43817980626235165 -2.9078687374763819;0.3078341790068207 0.36984376757549442 1.1717499448010542 -0.3376574161414459 1.0410206133614301 1.4307320182548522 0.44386087413853481 0.61618611357896358 -1.0574840119329922 -0.065039708952378608 -1.082061933823192 -0.1787789158161501 0.16093616204281669];
  
  % Layer 3
  b3 = -0.9941901779287079;
  LW3_2 = [-1.2128630584080193 -2.0874946888630737 -2.4417204853778434 -2.432187010855674 -1.7679893402799636 -1.2815379488512224 1.2280117390057892 -0.55275755720257158 -1.6390907003588715 -0.63783633807353179 1.1901786254306967 -1.0816899548549479 -0.98257705287706743];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
