function [Y,Xf,Af] = COOblatos10(X,~,~)
%COOBLATOS10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:53.
% 
% [Y] = COOblatos10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.3955236278789269;1.2401873751418298;-1.6267112772234265;0.023543667608779104;1.8611100193773242;-0.79338266337118424;0.90432308221121138;-0.44733524749001397;1.0175063764440075;-2.4771284294159961;2.0951943908542572;1.5320379974795284;-0.13158660338629083;-0.50585427288708329;2.8651837828699027];
IW1_1 = [0.0019033111826475299 1.5026706528531795 -0.78626664381929956 -0.2625032003153312 0.12676132991971145 0.71202142784751055 -0.58015113319804978 0.39602332228050763 -0.086214432088379839 -0.14938627179655894;-0.54915043266003738 1.6504751347786166 -0.52264529211348509 0.81050521147334642 0.17818460706912004 -0.63494262767025389 0.29403997547365246 0.52196004578857524 0.23887593588668432 0.11015083382044487;1.5690552752147315 0.53553999489647441 0.80302760864271472 0.63546252256908142 0.27769271298326226 -3.4012100872453273 0.43596938049003564 -0.97205448548962503 0.093769648446460449 0.031206917786635528;-0.25306268430981704 -0.61876674764272843 -0.20168810699311301 -0.40495041380120939 0.27118199474204552 0.11296114234016666 -0.14918026198105092 0.28573849641738069 -0.23191608546103673 0.43403779812395327;-0.65675914751446762 -1.090410855527314 -0.53326908639498105 -0.21345731938230675 0.062088214417427963 1.6999858052271213 0.57950153907010771 0.58571085895155151 -0.0080881425491442366 0.29535703490595683;0.95719038157876679 -0.43002679787794768 0.88542496129050607 0.45574202175958556 -0.32858869614122149 0.90557112004763618 -0.46737947574770056 0.2600347039780635 -0.72029315236724267 -0.080827688828529309;1.9492663890051392 0.077448588053101883 0.80936586015081702 -0.029143129182544608 -0.6859302197195386 -1.8005868912798235 1.327993133370883 -1.9112459908873916 0.047929098510161201 -0.93755392777550373;-0.20459927485737023 0.019897887214963064 -0.70726575811228709 0.48657480012672122 -0.46040152822807934 0.82351436466631955 -0.59010836038567427 -1.3007942471278988 -0.56246452041132944 -0.31071650181138205;-1.4339416012709298 0.75935206445272896 -0.47744420614689409 0.29342750745878909 1.8350024951161676 -0.45065373820158167 -0.43037350451481993 -1.445409224015646 -0.074943103919930754 -1.325439962090873;-4.4533664170932976 -0.2442656942641363 -0.32331899261634339 -0.35994504449284231 1.3075957096504389 -0.12778797762084662 0.031904142976837968 1.710495212617426 0.30743768279603606 0.019578537999726267;0.762149555814985 1.2245596667810639 1.1457278017077919 0.11323927182113602 0.84563962361350142 -0.40800744815826373 -0.76207713629336249 1.4789622374178284 0.56871630988702138 -0.3958642957252631;1.4038730981187242 0.66643862399841824 -1.5172461800002797 0.91679922475257747 -0.63679630210129456 -0.06844433633996802 -0.2397471554179576 1.0490311427484769 -0.14316670963645828 0.39347742537263042;0.58222614114682214 -0.40702289883231968 0.69873497531635909 0.0099223478579201392 0.70964188354737923 -0.45320324992147071 -0.75624717046981405 0.69843210546276846 0.31489362786888458 -0.50709264184125868;-0.88677577163064125 -1.0420044701122502 0.17610268046849606 -0.062340309718684789 -0.78871867198148804 -0.16436055152269141 0.53936548353751002 -0.53239851584871578 0.67677296581449387 -0.53634650538606421;0.49420926697911188 0.12683086535354768 0.8429399096389355 1.1443482563158978 -0.066087724554450722 0.75801096698722159 0.66739209333564398 -0.7933604549095653 -0.052940418845970547 0.25556534627073152];

% Layer 2
b2 = [-2.2621237770210332;2.1681066838279257;-0.19314345579046807;-0.36709393352726838;-0.32757668642403559;0.63115567520312532;-2.0625324836228702;0.15386597229629223;-0.10225078219132747;1.0838116173604859;-0.87324855897593245;-2.116732906792703;1.3686136852542372;-0.72717939599913528;0.92988226170306409];
LW2_1 = [0.8441747220034409 -0.078376770014315922 0.0087487282066661676 0.27866380934490254 -0.71917032160594052 -0.66903794249271709 -1.0738958396824625 -0.23611876553295369 0.095272451404061487 0.51185890423203795 -1.5644956059049397 0.31126978225877677 2.0962178552320307 1.425949890536224 0.42929716151469416;-2.725218217087193 -2.0305412951430033 1.1195250407225235 0.56317357949500502 2.3280368102925051 -0.46177445301429509 -0.12173624238459269 1.4830515306017413 -0.57125342950767877 -0.11558523292659896 0.16992960227042592 1.0639430330172963 1.9343573294588094 0.38716464889999075 -0.82144657522511189;1.4158233971092287 0.76766719519470383 0.68505665032776653 0.9132545288386511 -0.22330971793433479 0.77568357503742191 0.34322769791456137 0.25127471124133283 -0.13859944861300375 -0.59685904465001938 0.019521205636135588 0.29740471433543508 0.19273549223866365 0.55579929379379012 0.23368201146815409;1.2455011540849492 0.082719442105750426 1.7274673744286964 -1.2030018855040625 -0.097799668686949948 1.293640628681838 0.43128514906076648 1.6565693300500974 1.980784130501869 3.1248761322723979 -1.3614476743292219 0.65254092318645662 -0.41962628037752742 0.77473999418106598 -0.77998946400739044;-0.03837697369831021 -0.86408064745046975 0.56003210873153331 -0.26718740243806383 0.29020954077234651 0.63759462141741652 0.19734439800136699 -0.20351346012573013 -0.16342467172648864 0.10276613923308089 0.587780019057209 -0.095326641436102255 0.53221545006525484 -0.13942342678189662 -0.50886431413457189;0.37389996702275363 0.65839696389926228 -0.88888287430320967 -1.1556530604070647 0.93914037402389072 -1.4168074115886995 -0.46150907383714124 0.79269397809889086 -0.14802724808607823 -0.87919665764207133 -0.25990394625300872 -0.83618503819452195 -0.49373402889341189 -0.83208703301808162 -0.36746440905197358;1.3162341498668055 0.38814508032405909 0.38810809078002773 1.0757013046957136 -0.39032928240050452 0.78353242307768456 0.35160942284161517 0.44792458458636786 -0.37893652212432305 -3.6083671288638026 0.22657760231590368 -0.81632305586525311 0.28660353705992636 0.51506975902308283 0.1123922134808273;-0.59893168606596325 0.77313459255923622 0.7173455230868937 -0.64763957720184462 0.8913563121627901 0.12011028852711295 -1.0079258781320215 0.33306162095790554 -0.19207117540022633 -1.2973556299833759 0.90960204445451831 -0.62808471493558649 -1.0018717722033654 -0.028855557447637379 -0.80564231492400051;0.65032778624959331 -0.85803008741068665 0.15356211695458516 -0.0016821673063263931 -0.96603819310404793 -0.53294244553338199 -0.057790313791667845 0.45384816388327198 0.0022081240451094757 0.74970653674593501 0.078830781125470373 0.48207496272388556 -0.65075952093151712 -0.04515893447431691 -0.16843291744693548;-0.60657428405791114 0.94467965936704668 0.65126480550186117 -0.027923335249091099 -0.38838402746854822 0.3259800145121895 -0.26977954541998195 0.66186450207485836 -0.13142193594619495 0.032102041097992307 0.64125078009262426 -0.0097303708367010439 -0.95022993378457832 -0.069691193128972539 0.1963737563833732;0.27687535635594662 0.012673456597645863 -0.57467670548311278 -1.1053281629951939 -1.145327235978354 0.83850078833976149 -0.74673440819582915 -0.02929373147020814 0.81852083090037053 1.842940125798884 -2.2081284693631917 0.886479750020844 -1.2752682090209972 -1.5929426664183763 -1.0296237456425228;-0.10764163895566194 0.81518297029210973 -0.32000974055060571 -1.6659581299597561 0.072215931196491112 0.83295838790701271 0.25396690343637729 -0.75301301867973436 -0.043780189313535813 -0.1172436025287199 -1.4723839629310425 -0.59416638672544964 0.60964149760569664 -1.6340356352898229 0.14318147319823349;1.1404861983967511 0.12571827207435171 -0.98406714061761635 -0.40097617297853672 0.70221139297844948 0.099062446492568665 -1.1357379670244809 -0.68993979562469931 -0.010186294676442803 -1.2025637764369261 0.5605596402492351 -1.4098929814294934 -0.95000010008392222 0.71855802026543347 -0.25915142649764761;-2.4115336066767843 0.45824465077822257 -2.2198740865502198 -1.6278799761111422 -1.1204404023360806 0.21270928854128407 -0.67370196312132358 -1.1802191848132042 -0.91736537586281075 -0.11799894672305815 -0.48973708625706702 0.81448416214359276 -0.58062032328488855 -0.027106565128735882 -1.3568038118439318;-0.36270035732852723 1.5647567597999645 -0.022358257503759842 0.55684290738065112 0.68085384404262539 -0.61862283801872009 -0.41342835332835892 0.18441123292612271 0.28805911532664746 -0.63089653001106394 -1.1109174288655115 -1.05251316375807 -0.49596675969760901 0.28140643014951106 0.42335503241883848];

% Layer 3
b3 = 1.6823580407308243;
LW3_2 = [1.2895357618744534 -0.47895801919639935 -1.3160957266213824 0.32917175563582379 -2.1184070112494151 -0.7741892430613696 1.0002567729663676 0.73632656005186814 -0.68596855735867412 -0.83365887069731193 0.23959227533752023 0.73466455589512647 -0.38243358159819629 -0.22728017873408135 -0.89973259579693865];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
