function [Y,Xf,Af] = SOXCentro48(X,~,~)
%SOXCENTRO48 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:30.
% 
% [Y] = SOXCentro48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1924458083937712;1.9560734047316342;-1.1541928512510589;-2.6426242148973751;-1.907462555695302;-1.4659978886910261;3.1013701869817618;0.13263346073614848;3.5394253184412965;0.88286126384874319;2.7533937702254496;-1.2984665032890115;0.61356662179922672];
IW1_1 = [-3.7293317428445683 0.87700790421589758 -1.1315659420782336 -0.36447069265830612 0.65703389010177393 -1.54542562093071 0.63483540351218548 0.57701025282085405 -0.1055654575182351 2.5616466027788909 -0.89947537882423545;-2.3473466425801064 0.20191174684477298 -0.65460530046138143 -0.2082436387379519 0.23643146602459136 0.19042193324016468 0.64074440632709351 0.093551518907899214 0.04817538760361309 -0.75420546365408869 2.1010625826926796;0.67963112564942785 0.23774706478338686 -1.6618857205169622 -0.071695810944798641 -0.41551711254265472 -0.28676490447534986 0.52384595970958114 -0.089665484571237908 -0.24499770487058858 1.6545325073734549 0.18393268182176065;-0.61529353604553449 -0.86017576595510314 1.6287424981896303 -0.054263887927364848 0.76768323940739502 0.010575977459488524 -1.8474000264730219 0.10204523619791367 -0.02772685443461062 -3.9347698107286706 -0.87592947386103304;5.192502008255202 1.5663062494225863 0.10513225931521826 -0.11649428291387211 0.15663061722292504 -0.23335768632690548 0.81484815069276617 -0.20945862158474346 -0.11028759312725844 2.1465194522389743 -0.063651763437331338;5.543425679922195 -2.5231939289765521 2.2178676422423549 -1.8289852620094087 0.75493937744788986 -0.23042718884621649 0.16705892503428277 1.8124334099059687 1.0304426558402924 0.2321491903524521 -0.81902940969831517;1.128783995715426 -1.8654935000308552 -1.0112648364240238 -0.44661787906278555 1.5293806342419547 -2.1236607028975438 2.0874065632002976 0.94965325700236203 -1.0738283101869028 -1.1864696047301528 0.3630478900990739;-1.4264139121024064 -2.2127986306385554 1.3437951760513862 -0.22901365711096361 0.86356162136805192 -1.6233002967307624 0.18134683586299913 -0.17558076273938653 -0.65833258359615687 -1.4651861328879787 -0.62955744327887475;2.5286581284492509 -2.629642991464709 2.5510100389051611 -0.51468516416983157 0.92086865836352227 -0.33464174614657727 1.8530664046148111 -0.061388010311521149 -0.29261797989018357 0.10572514211431944 -2.7000515417880848;-0.47363969118269367 -0.69235830703988177 1.6286321153460386 -0.022411623401244508 0.11976833494694192 -0.57801015120741039 -0.69903386893290542 0.080056134767414855 -0.33461383714135162 -1.1863958579016383 -0.31552288240655579;1.6419667558177331 -0.34464245832511442 1.8667018593490301 0.051898513856763639 0.16239769100958973 0.82143402102083718 -0.31669219743926597 -0.22583932901778392 0.4239769653435565 0.64862385879666007 -0.67397960291225534;-0.89524926542277972 0.009675304070828887 0.56468748632272781 0.19131417002966924 0.80266319318303514 0.53741085152160095 -0.2719241275027165 -0.17328173062726676 0.29540121644760775 0.5483733016438086 -0.68579156071815706;1.846647375672495 -1.4326746786900011 2.5831742130708721 1.7483623097410659 -1.4337240029811078 2.0107367876672213 -1.4340105948823991 -0.6074282347737493 -0.26670681757915765 -2.2040164484286038 1.0543558523258973];

% Layer 2
b2 = [-2.9860034898282235;1.7092620246714698;0.39881400717291787;0.20493912812040305;0.46305025033282227;0.57306543623870065;0.95567505327438362;-1.726446334882618;-0.28241210355133178;0.48674636909794322;0.54879312302593541;-3.0920230287813992;1.8502832699292111];
LW2_1 = [6.8131110416060405 0.81574719903655879 2.5169271017224988 0.66316783162597637 -0.076405017731979455 4.3677645993257794 -2.4819384685972778 -5.5402389794845233 4.9650912267817535 -0.48139056068671948 -4.7885932366925354 1.664862629719954 3.8543875367332046;-0.76676879842378232 -0.16586971775312975 -0.17267685958503518 0.21608830730961032 -0.43949989891881402 -0.85581068116605308 -0.34817569775032464 -0.018253134148440611 0.44780651777310843 0.50737764895410575 -0.13267491956658006 -0.59555027783849923 0.68897713502059899;-0.10053006577500848 -0.043749450012017313 0.15994856552741993 1.8839091806882926 0.8681673985741446 -0.81804323572159277 0.62621148490605827 0.9515636895729237 1.2074593044036344 -1.5503529263091862 0.2124562897688908 0.53611330173641869 0.14844915176025575;0.82266719011046596 1.9908949238769147 -1.5790760946940261 0.86001832039110493 0.48390522747127312 -0.66990304342031826 0.49870301174491477 -0.077847581243522229 -0.78330550959518364 0.33681581757412393 0.81048004483612934 -1.246413985354758 0.36720488831058973;0.20230806320697645 -0.15708015811924009 1.1066102846163235 -0.7692815273664636 -1.1357571117014194 -0.22018232600887724 -0.02106009455240769 0.76722430039506173 -0.31975165539485545 0.24018078715783256 -0.11258098217831147 0.67741485909163435 0.024309671008376263;-0.87078472099752668 -0.18763213275738427 -0.59371327089422254 0.33956126309315815 0.098601741833165085 0.17570431909360568 0.076590135625477396 -1.5696504546366798 -1.0208362877314539 0.97812790860465249 0.34469028240121369 0.1220904255193746 0.17394101903164527;-0.28650672576631941 -0.13530269315934143 -0.2926636938994483 0.90986388062965018 1.4512780025566505 0.11396162002515926 -0.10560212193243564 -0.56239448528015867 0.26714362605693576 -0.39314729407753168 -0.22321376787332786 -0.25943018931385614 -0.21082732751195668;-1.6449858089200977 -1.3899324544879896 0.7476142423072849 0.70119409841662728 -1.2325991357986141 -0.74792818456194787 1.6165560160230446 -0.038832932951348612 0.018631570070479407 -1.7426779406618469 -1.9101886656691256 1.0976390397656897 -0.48866659387221162;-0.20961241713733395 0.89919559773193458 0.54504100717963166 -0.84780010713199105 0.67033722273520835 0.60642082754431748 1.2906960661116103 0.22914271458993152 0.03001828940942005 -0.52132030076021496 -0.95443123259511398 -0.1972525158975483 -0.43985466627005854;0.79108461538973252 -0.7758661536770296 -0.26275925370257358 -0.87131824942339897 0.32998206075232434 -0.14206138855994552 -0.14562317778310846 0.76336996766190479 -0.19387183609580455 0.82226060243321908 -0.4592764159665535 1.0015691624694307 -0.076330979316689501;1.0630674016493558 0.25675199797269987 0.56025018429691398 -0.25673278011104594 0.78440731388825058 0.015379172671673115 -0.6070501482181262 1.2644016487900593 1.0765014746310717 0.1311666146482991 -0.69620688241012696 0.51233182693032719 -0.11863902411396077;-2.1343410307652433 -1.8393924732536593 -0.37234400062646911 -1.2686437048136248 -1.7383012249907086 -0.7895694893088151 0.76341115515866786 -0.28506414839249505 0.45707176039078068 0.43480693669430132 0.3067355496190517 2.4618806149150307 -1.4537966653371435;-0.59714700225158279 0.0455958316680658 -0.52304248536022491 -0.62558323100418201 0.38338735202379853 0.29883771149316679 -1.0052030225172803 -0.54456763052531398 -0.28197942972651413 -0.18744035087286701 -0.92969861565760004 -0.49592169633324307 -0.26729808732133653];

% Layer 3
b3 = -0.036585244902167066;
LW3_2 = [3.865933432625444 1.0856724137380167 -0.075890935769837894 0.41567416407998897 0.85055807436120312 0.55395488118952252 0.51950481596122777 -3.0607438317446611 0.17384234671719381 -0.67437501822911772 0.64105614360764651 1.478023100504152 -0.1347292614375688];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
