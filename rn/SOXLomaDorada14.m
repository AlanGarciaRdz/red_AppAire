function [Y,Xf,Af] = SOXLomaDorada14(X,~,~)
%SOXLOMADORADA14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:33.
% 
% [Y] = SOXLomaDorada14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.5410907088773871;2.1232242242633066;5.0892331596464535;3.0854222128156481;0.14637284103499615;-0.60023570949028549;1.95306623922637;-1.9238526898042849;-1.9665346849991294;3.0546337511472448;-1.6388330442005457;1.748380919553433;1.6106518879788296];
IW1_1 = [2.5511824261538631 -0.17553456387919122 0.066992064516622013 -0.18585081553426835 -0.32951340997972883 -1.2777992845033537 -0.07802583069252822 1.1232559142141909 -0.17939593675851134 -0.34261678345416524 0.18477717386151177;-0.36117200093795337 -0.60056526885374939 -0.18526483193206283 -0.56563918170519722 0.30688013914336948 0.77683011222508058 -0.74337994989698519 0.37137315487670447 -0.056706526366497041 -0.19291070727780837 -0.41888812121471314;-2.6924541226295036 2.4156753073804795 0.29299230463980286 -0.15898905150342807 1.2488702054891787 0.71576433598873623 1.3997294581900321 -0.58882867298615649 0.59815851442365275 -1.4942877739530436 -1.0372170658971274;8.2929816639344978 0.018416498942762448 1.3977944148422354 0.087419493975097268 -0.43853443980187334 0.94340220003967712 -0.71640924816504803 0.11558164096419916 0.29014252222972237 3.8907460055215428 -1.6788395448323066;-4.4621905662400643 -0.18326049625948665 -0.24938814057646758 -0.63070319213535464 -1.3321497918335758 0.79776101488186701 1.3802691258604647 2.346795999223791 0.070653265970873638 0.91009073543450969 -1.6118135394233999;1.5669937317421649 -0.12932962758717242 0.30936078709049764 -0.49061201219574047 0.5007841276306938 0.43828178804470863 -1.8838720052094458 2.407189320106732 -0.25918612414190551 -0.56815694320217847 2.0605578645253231;0.40643092729849462 -0.0071382018326067199 0.46385431388995046 -0.1191203342155298 -0.015208727074999262 0.13865699554382607 0.34826571241644144 -0.30533927658181248 0.094485116278016978 1.5936724290546465 -0.88547513189180505;3.4064889459759558 -0.097134839604944206 0.54813724918819429 -0.54977523151206531 0.12137023713773416 -0.72210733095638191 -1.3439079498597022 0.82492981990158398 -0.059141359526345486 -1.4315991965114783 1.5278863370186688;-1.5638817829678182 -0.068525924477159036 -1.1047998590094106 -1.1049329747677885 -0.15626147115752476 -2.4228597841756057 0.049025656633475412 -1.8764035144088544 -0.017661096153793687 0.024643449541078458 0.33898020084484753;1.303569297386822 0.083958601876642822 0.41129566207616636 0.35822001570773887 -0.34052784198274205 0.64182633845123593 0.96780399835936204 -1.0028584448343745 0.22651203297404521 3.329532607546311 -2.0516484753376005;-0.31512633423720959 -0.05023323100965451 -0.10715235926201545 0.55036549478347507 0.088496044711513316 0.44187211199603049 1.1118648572100573 0.52304591306912573 0.18531517244666318 0.83359039247704958 -0.070498580543631936;1.8581060052879195 0.0063970408651631457 -0.54800100913637695 -0.54373362782317769 -0.40587629938076608 -0.12976212181293645 1.1330268123339358 0.28706365397289979 -0.063727142977347162 0.47218428507261379 0.025651470916723679;-0.37457520196413185 0.052288900516789062 -0.1689032486645482 0.18473263090435246 -0.011061526393676704 0.056143607051589529 0.34477959526964674 -1.1927038144591364 0.16099173568178801 -0.021855947189154866 -0.56813927216221627];

% Layer 2
b2 = [0.80895530464431764;1.4976102573075116;0.80592954460467925;-0.47350127887505072;1.2547331558552302;1.0783285031955541;-0.29882016889867719;0.039901828822852391;-1.5275489633124439;-0.94483083685832148;-0.82268584977627401;-2.0569291282954669;-1.8367013997201997];
LW2_1 = [-0.6078766388933613 -1.3337704279496738 -0.30702262564580113 -0.43211545983908556 -0.32885717592218822 0.079426377087419744 0.51250880253135456 -1.4524332669684785 0.47183057256627237 0.98353638015872424 1.3104897863662752 -0.12778388596395526 -1.0749336984136149;-0.86085264993153776 0.7616845268720569 0.36463193453870313 -0.11311951261959839 -0.54685335808398028 -0.39865219148652692 0.044638080732450375 -0.43175823478386216 0.20538953995420081 -1.8100306694401631 0.35010346382948321 -0.51278483621192916 -1.3273475430629138;-0.16890158077457845 -0.35880949530071521 0.54050367784865816 0.038706240109053554 0.88434919452023464 0.13356143205232815 -0.35911565984038452 -0.10933640062504368 -0.29767348535608001 0.72238702471896876 -0.1712922224929837 0.28391373128339148 -0.019725450225383322;-0.051438946935264074 0.71330129167800671 1.0676240224143894 1.2307337662382418 1.8398858101223199 0.039092548607949022 -0.01941655699013814 0.67268801898217601 0.049358653022859793 -2.3033288295595726 -0.035403913986282648 -0.21382439470841319 1.0225706245808464;-0.094472203072165667 -0.28984340738303693 0.77234105773039397 -0.89680836610539283 1.6899887450031372 0.21175984709995771 -0.237133586776758 0.66321051285501953 0.35296831397215939 -0.34911153358763702 -0.58461537952099962 0.086906519689149572 0.30054869571692244;-0.39272942243225545 0.63360332447735335 -1.2296761841410282 -0.62697880861953326 0.43668281675302462 -0.25319892601180394 -0.14504850822986648 1.4129111205649436 -0.40734923896878006 -1.1611659661765017 -0.0021164124865303419 0.26299824336639421 0.1847817745307461;0.50982590889241042 -0.34785462065375716 -1.0271516032774906 0.098753903858107686 1.3429322429573938 -0.25467509098418234 0.5395066331910201 0.65026796034064427 -0.35173252993125514 1.1619584437125123 0.016039765610759496 0.24538082612742088 -0.90372530153664699;-1.0540910270714163 -0.61887999101858537 -0.75550885106149801 0.54487165622659883 0.45179297430612703 -0.6113928902607545 -0.055041595931036739 -0.3081587693548844 -0.29244929164758443 -2.340796238978919 -0.20000278251223133 0.037886212998173692 -0.13002074712012729;-0.26292563085441872 -0.97163801420029194 -1.4643438864084841 5.1927985979939706 0.50848626585211754 -0.48350648561074727 -0.091471647528659564 1.5727192116589823 -0.75882860899857696 -1.6607804822436152 1.3397399619829433 0.58380243822930078 0.064807891519644889;0.41486920874070965 -0.89694832331319563 -1.2699168831160419 0.12584641914918293 1.518789946295144 -0.34705897948441222 0.84690697113703717 0.70277451353267106 -0.51678941052467675 0.22766431755243882 -0.85953656325362104 0.60993613133166213 -0.17662560407863792;-0.73530899204283207 0.72281490621966804 -0.41291676120268189 0.8732793149682343 0.50530894778512037 -0.71059247708524231 0.055499441807558128 0.10866022709695199 -0.40283727681421444 -2.5315373293506771 0.2524788046703948 0.010736042007254198 0.44116969166984221;0.92522317217525574 -0.1814819056627209 0.13084128895348193 -0.54389992024677236 -0.31476246767294386 -1.9056179009112411 -0.23974861440003209 -0.74891956685383687 0.82090716606216629 1.4438905734503178 1.1320015552528373 -1.7574859719542262 -0.11778071321963617;-0.41065885779414357 -0.56397727347641224 0.35661934404856477 -0.86612782207623007 -1.7419937822393601 -0.93482050194180799 -0.40572302734028187 -0.60051258128764207 0.64469742506135974 1.6458137100615018 -0.39111980502608451 -1.173301767674847 -0.96740442660853565];

% Layer 3
b3 = -0.89756452354198857;
LW3_2 = [-1.0870829354888856 1.2472172874965655 -0.63708266384655987 -1.1463889859551604 1.5980195727704853 -1.6286328519061921 -1.6370787434572809 2.1584863960622576 1.582358508896994 1.690143497253338 -1.9191438743804043 0.87362203117442938 -1.5267811952232722];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
