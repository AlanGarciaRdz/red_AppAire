function [Y,Xf,Af] = SOXLasPintas8(X,~,~)
%SOXLASPINTAS8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:44.
% 
% [Y] = SOXLasPintas8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.99480689494572128;-1.1550714835796929;-1.0776739009356426;-0.36828712631503274;-1.0161172129860141;0.84626982463052525;1.1869996555371474;0.36161971045025565;2.3298074685400518;-1.0913083458630601;-0.62154556927201488;-0.98165958806213705;3.1384091420124354;2.0008239358582642;-0.83654674156372932];
IW1_1 = [0.49974184909996561 -0.7274067210402172 0.58680856853051111 0.20871716400683449 -0.35750218798872768 0.046353686823050716 -0.28948584097551094 -0.19626025180636247 0.78719050450478723 -0.34918636229590344 0.028820646586816913 0.50192371113407963 -1.2296979302533069;1.9894411127095488 -0.38826592983738117 -0.37739993547154338 -0.36599487432333189 -0.46749331642062975 -0.18050231123970459 -0.94790056014583357 0.087808577274506458 -0.10019570152634817 -0.15956931330230348 0.52445784254197958 -0.6848448265494278 0.75434651109309314;0.72871256376069538 -1.2405280695095275 -0.17328043341230523 -1.1360003039696245 -0.30816517567431162 1.2521821656759571 -0.97492260915098461 -0.0036748798800001689 1.7521703560202759 -0.52047190700713897 -1.2263500450576592 0.32742400087509649 0.64942803820091588;1.2286847380519295 -0.33459393460181253 -0.20372154346225682 -0.29332094998410368 -0.53419563273276427 -0.27309076468649118 -0.45909449956877202 -0.017654416092129456 0.56856343609825577 -0.15921573011285983 0.41400057996260697 -0.75079602947551372 1.3765394117564986;-0.13256841212367454 1.1066010804336242 -2.8278247812182884 0.43475719578058203 0.72921048781931264 3.8317788448217396 0.9024163618374943 0.30747150482175756 -0.39010467544511834 -0.82224369784436058 2.1814893800629234 0.27834384508082877 0.16222551132199578;-1.0554618237599223 -1.239587026811046 2.4955406093354933 -2.8597615054000802 -2.7330882302104067 -2.8830854435216167 1.7193407251405919 0.4152878749929626 0.7735072187021319 -0.54012931241669726 -0.2332759241571313 -0.49339151463889486 0.18800104009079882;-0.083599343133329021 -0.41551196009074565 0.16879441243781654 0.60730176208622433 -0.1106624883776027 -0.30503603812981178 0.18905860630349536 -0.0085750736537106576 0.63088178778704618 1.5787690765557469 0.39032035771244161 0.54610300620236274 -0.39120873551424101;1.8604425766504686 0.43893517203205212 0.27709995441307711 0.8133918288971187 1.0316869038847036 -0.078962309000466885 0.092373172197160514 -0.2082321815046374 0.091390175017741937 0.57927434965231739 -0.12317577168220031 0.10925540760534654 0.64182161834222529;2.2870390342016589 0.35578943273472591 0.056075475733447226 -0.42398820376596286 0.39340703788527748 -0.3136651016583355 0.2260065190148893 0.064132338976697512 -0.43697521528411765 -0.80529741240666941 -0.65097204865869018 -0.50398579415603639 2.0967745901242409;0.14153285752505737 -0.51500966540350823 1.1972558713381438 1.1659200826269711 -0.13103365552895735 -0.483239204014702 -0.34875900618554567 -0.32876659846565492 -0.82269951712215583 -0.12130788437904406 -0.4278095180669701 -0.60647260339991571 0.86187267903254683;0.26096277045030353 -0.024778831670176339 -0.31906332482740574 0.31433353036726597 1.4968696236445043 0.20698759232964831 1.441864990138237 -0.10743707311886991 -0.019094929118352158 1.0857468957515191 0.16672482504341635 0.3442259249924618 0.85066705115443075;-1.9113545059267412 0.37003793325331524 1.3458493986243871 0.54868719146122502 1.1774734623650411 -1.9982498179824868 1.4862913570965763 -0.26378067523584942 0.0093573938786879248 0.19174818445759523 -0.37356992764970526 -1.5717196902401069 0.26397639242118998;1.0425975663670521 0.085047730879376504 0.57226174750790038 -0.13421670527828325 -0.065413828998911849 -1.4661252350139975 0.50589338331387657 -0.23876726719318137 0.31678103464531815 0.072296383417740875 4.3913790474446897 -0.30749007684594049 -0.83020170474373733;0.46864241524164119 0.8488512052275119 -0.35224769510709442 -0.04367745927040665 0.3009868214537646 -0.27119990278247202 -0.6083488524292312 -0.16875415001256733 -0.63189871436683454 -0.23414647827134705 -0.76069957017769263 -0.88967413974157206 -0.41319591137296707;-3.7961453749385075 -2.7867834680761043 -1.6678485179257703 -1.6878013787321098 -0.49973353566674128 -0.18548965416312363 -0.42909448952144141 0.27445403913737859 0.091875209052507775 1.0075061671402774 0.60232942238482878 0.61489443641182406 -2.3256342309209552];

% Layer 2
b2 = [-2.7955861103794168;-1.2156465805502996;-0.86255177775582814;0.80110458236157878;0.7577679444044283;1.2758080237895884;-0.54278616242280897;-0.25973890151079509;0.16852436507565322;-1.7220510476864688;-1.003809166708203;1.0587016799072588;-1.9117859879436829;-1.5722814586269667;-1.4352071246435389];
LW2_1 = [1.0856289100761725 0.35889668319967383 -0.86075965954874523 -0.65965090558024209 -0.047191362264767125 1.1849686241644115 -0.13087113220581095 -0.12344056952726778 0.057735589731849932 0.012828351049367678 0.96229571967575389 -0.10026186639917456 -0.069145774869456292 -0.51310048184497137 2.8568954750474118;0.091278031567263135 0.055357456251562978 0.33142904404642293 0.37542696490132177 0.024156899709136898 -0.21405557280969589 -0.26617054334255702 0.3380757627564368 0.7891988162910416 -0.96372435132137724 0.44724530707249122 -0.1532074569131715 -0.57185706136971548 -0.38038870171897604 -0.42008504564237598;0.05497429738203885 0.56692075835914835 -0.96337672384415829 -0.43015100970861331 0.84117275474416664 0.38253349595146807 -0.37710849112292122 -1.4304238707482169 -0.20820960201433214 -0.63994430852370476 0.36299785573271504 -0.46183774214682205 0.1356438166430845 -0.35449683637397128 -1.2949125177866856;-0.26354502781184108 0.1117153995124899 -0.48303752850482551 0.61692682801336141 -0.51487010134167299 -0.21065840414213183 0.799554192851472 0.82514118861895047 0.81168107937559386 0.267925990349208 0.9282241496988366 0.78498918395959427 -1.0077282103974055 -0.72953784375119912 -0.13693201514614303;-0.329978020176113 -0.30382147147167804 -0.73378478672145075 0.0039424696322004488 0.70875301622356179 0.045396175154542168 -0.1572169453957869 -0.064599441075798236 0.19600797953807131 0.11789902664920604 -0.10440137284181612 -1.0173790655938124 0.68252254627273801 0.3372389692736345 0.025896749058999875;0.22265221023326831 0.92605099019489756 0.022423793298338785 0.83662991326793112 -2.6831039859686201 -1.4863915686989433 0.30518173787490682 -0.38213990415644783 0.19796110003638506 -0.57857167809727184 -0.24391724602540371 0.87861137210104545 -0.93127021893194062 1.1909124715927744 -3.2046157193558851;0.79594396032749404 0.26344169517851745 0.35357019345832574 0.031590775037895022 0.74737008845809372 -0.4907288902063634 0.21506017965580795 0.66577074834430361 -0.44508455670648928 0.48895512537780406 0.37146835843409015 -0.37957157438080047 -0.53805638503319875 -0.47443879637487013 0.42124080373895129;-0.97964109905580687 0.87017956399424035 0.021010939173588091 0.08637000401145481 0.11063909325582733 -0.21901154119361149 -0.22853863353551246 -0.96251567271515526 -1.1418739824681585 0.80094513998894734 0.4013504203831062 0.61209289443344173 -0.066016654034111888 0.33232909867620086 0.83944259515494668;0.086316435843484404 -0.29595550167143908 -0.4813185694460928 0.39218800085486288 0.34299027924464554 -0.5028589463218075 0.30186825450001381 1.0994108903420263 -0.22977190034327005 -0.44912372005316337 0.038965591046970088 0.72536210755362696 0.73001980282861845 -0.55994817598922764 -0.32713718292089167;1.1378833216479938 1.3747869483180546 -1.015371208719575 -0.26002320433307141 -2.1317723808790281 0.36932104256372844 0.098137222252065545 -0.58293344001593372 -0.032972314780440833 -0.28641635486053335 0.69417851611522408 0.66936979144642339 -0.93403865286719612 -1.3819083759694721 1.4084901768899873;-1.0689484265653195 -0.31313942001191952 -0.34229541662426305 0.54464045698422892 0.26115593776213708 -0.30165419708183644 0.24692802548324552 -0.65269871349216668 -0.16950665334895079 -0.6504463592578954 -0.13906365479539801 -0.42666388995241944 -0.15399185882956076 -0.089338857822772844 -1.3125261095635934;0.79981711967361224 -0.83690984142310476 -0.98529556772672944 -0.56983696120785488 -0.020392072689318457 -0.17954528289261548 0.42285120565336665 -0.7601879639249195 0.50782807796508722 -0.72695816208377217 0.59585261327202621 0.40945530963309851 0.45224826380331862 -0.46384382148485531 0.65242462599635054;-0.30113400444610622 -0.32913319481062109 -0.82524055521989281 -0.73566153846029814 -1.1719946357668174 -3.8561884883749227 -2.0637719369228811 -0.56908900537084439 -2.3877206595746543 1.0359466604010876 0.91413942218496946 0.84935530175866558 -0.90853594572770291 -0.55073205419469273 1.4952381044251142;0.21148475796739746 -0.3644420603657339 -0.7581852997866767 0.33445368717136675 -0.39230673876800137 0.60941402945440581 0.15776222213304264 0.14464409544206799 0.62853971007002829 -0.40485406387952005 0.97336281472022335 -0.48872789279340156 -0.74044117458200154 -0.09011138357315962 0.87354949933076076;-0.5507088179821884 -0.41939169586867703 0.71920694566507815 0.46928531811897672 0.16388435310061081 0.71485808310016086 -0.073839438682806513 -0.52991934386242401 0.93947367299591789 -0.70285998204716116 -0.75326781941917365 -0.085427623342014494 -0.26681865473783917 0.61086486599773737 -0.49972455196026372];

% Layer 3
b3 = 0.7699848166506652;
LW3_2 = [-1.9212892412761182 0.3395435330100785 0.17689418058488676 0.21458514330973674 0.40770590400958068 -1.3573857155542139 0.5092998595763355 -0.7082754829683342 -0.066945447806297506 1.8433298083277694 -0.22912709616233828 0.15688754437578001 1.1928941170043197 -0.46346780545490524 0.086474386165725753];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
