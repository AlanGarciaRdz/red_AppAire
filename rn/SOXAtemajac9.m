function [Y,Xf,Af] = SOXAtemajac9(X,~,~)
%SOXATEMAJAC9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:23.
% 
% [Y] = SOXAtemajac9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.95973889277273461;-2.6809756618487603;3.0424085455968752;0.24690336610166644;2.518410258312556;0.48188187650900643;0.5096776601949089;0.83535105963808787;-2.5042705595954171;0.48403990974210792;-0.71637093518530703;-1.541987613461999;0.068824557946734741;-1.5819855576712358;-1.9549060512985912];
IW1_1 = [-0.58261453440937072 -1.5930598743195388 1.55644262373019 0.93111814784327318 -0.0059120451645923236 -0.19793093327856665 -0.051718750150956574 -0.65833206143311096 -0.40085026526242357 -0.59039642808424098 0.38885120828919068 0.032017600395997076;-0.47761581632500194 2.5275879615673662 -0.027430713263494114 1.460650067285634 -0.61765053195869535 -0.37171833499313495 -0.7734386429111576 -0.47173052496695589 -1.4425690425114228 0.29231722102443125 -0.068186782493571768 0.35224711404714015;-0.25767477403533262 0.05399520707528354 0.040603514070597313 0.57942915635370584 0.25928297014515456 -0.47002964182846591 2.343605416743324 -0.047757361322780925 0.4873227454702892 0.9269381119215222 1.6309789097249294 -0.77503019242090176;-0.38290333819696049 -0.066744003088973519 0.27634075828185006 1.3273567468385055 -1.2343622606852089 -0.42846390962671793 -0.42467583316585511 -0.78580922268185605 0.43878353407118842 0.25055079103316508 1.3163453143142281 -0.8374017838514437;-1.2656054002325803 0.57335204224703717 0.62845165307305895 -0.54935870659235242 -0.13008917083566374 -0.01895615001056615 0.80920089958590846 0.13463664698583144 0.43165804129668767 0.059191505491302962 1.3412691558464851 -0.032375085542556047;-1.0252829522258715 -0.069421506770390079 -0.13426278479386727 1.6299460189372512 0.22579458101411001 -1.0814458764937771 0.2741944459729958 0.19267885476316976 -1.6780570892373698 -0.28976551789229149 0.59518509771527883 -1.9745266889437345;-0.20041758037252383 -1.5609694442322108 -0.49923226643157159 1.0115682103999359 -0.44970962761788846 -0.52127595654359959 -0.60522441114144288 -0.13900479699654505 -1.0005579161644398 0.033105146609863287 -0.15204586276465687 -0.0016661075187065916;0.70103303894846447 -0.35988498431516008 0.15473951314606163 -0.40443884524297891 -0.0087274975179764645 -0.21480578630820599 0.48837905948933519 0.02630312584568156 0.84167682729968585 0.096691678206423909 -0.067261311512031463 0.52197855374040991;-0.49579362756066692 -0.32520195722000367 -0.98107972075223282 -1.7431276231029618 -0.39371138744809836 1.2349866208230449 -0.19541178956032629 -0.21662440010243117 0.38635943581071847 -0.51287720354150246 0.22867595689327461 -0.3579982358584648;0.058323120522535361 -2.1123793851025532 0.64349369690621561 0.63894982976041481 0.13039439680990894 -0.21194414717194518 0.023336552299827409 -0.25017613174778092 0.50775143598671324 0.61608610735092251 -0.85750389619414324 0.69507680685187667;-1.5870586783395348 -1.0084472527539441 -1.4731403023972229 0.19694355337150651 -0.57730065123704322 0.96085736624452645 1.1489895962208911 1.0531252639585846 0.55343460920832233 -0.12860493648063698 0.27653363581478735 0.59789470349032769;-0.14896676773247017 0.0098875766242771182 -0.59865308606612244 0.22895086346634849 0.054426803366420952 -1.209668752201482 0.10894561754795078 1.8322073233570806 1.9777579031054855 0.1587104950191503 -1.9675981935937013 -0.085791667088216658;-0.24248982853469594 -0.14935129040442174 -0.012500012228273634 0.51344176848052703 0.040639076240402673 -0.577830725311402 -0.79930107338802026 1.1797495741927864 -0.34938597509860114 0.32696415262808087 -0.38879474065830832 0.653143443712914;-0.74119851782246171 0.23036627764368167 0.66695393837810368 1.0882577638566631 -0.006952720482692288 -0.96751768994163667 0.090776037941786625 -2.0212344926281611 0.16622644097032471 0.026442578026571722 -0.26015482977800086 -1.1307625173248952;-0.043046588930689966 -1.8402421955522232 0.25886780623755162 0.026065379765458294 -0.20063431169881804 -0.057960833062700889 -0.36524128065347788 -0.21082190251326072 -0.48510203168064142 0.16469021012550356 0.012267158511888573 0.54120876793937223];

% Layer 2
b2 = [0.18714699760659642;1.9409415832833647;-1.5404740025066408;-2.6418449034002749;1.7443861612540588;0.19181347582665703;1.0106060140486433;0.164406087064324;0.20835895764775553;-1.352467823076887;1.4264715001562944;0.8619042212534197;0.18945466045972481;2.223051246015181;-1.7088909050311414];
LW2_1 = [0.42466719281382509 -1.240350430860871 -0.043726622992811631 -0.093828383284888697 1.9840220499085204 0.4948632081026883 1.4577669513321556 -0.010354331238289771 -0.3624797514575514 3.2638808884868471 0.16475760953738461 -0.29502085929975019 -0.96433570926532608 -0.33395763400452583 -1.8343930509117512;-0.52561681479795075 -0.20777918233636097 -3.4252235108758575 0.23622561688687341 0.59134705566198653 0.37206114487610276 0.21071104444585176 -0.03456468858894414 -0.11282456707307942 0.31840471651788216 -0.21539850804030797 -0.5135822170254345 -0.30895838036750506 0.06787944035228613 -1.3709636836065791;0.55635965212726202 -0.35906997760242843 0.66319510046828012 -1.3861883589449924 -0.17958643556536005 -0.66835433576012115 0.011042874553104572 0.95641188223508677 0.037822570518966592 -0.54192958608785413 0.057410672873060994 -0.18477382736181133 -0.019056241188242073 0.33592314312906996 0.94170454779744506;-0.71568545920508708 0.66054017468855752 -0.60923622784301534 0.24521742716611117 -1.4442442676769522 -0.35304526533743347 0.19876172415600499 1.7562009092205411 0.64542902808038838 -0.18504659577471366 0.72462838576337729 -0.73378321758310416 -2.9043101844852455 2.0082032469845039 1.1982128661829217;-1.0164614634842375 0.18606327149343488 -0.70535708287153775 2.3366749664621453 -0.043915033528648423 0.21488360865882558 -1.9108943258796516 0.6971777374596001 -1.4172843798979982 2.2114064518572767 -0.29497379688824044 -0.85797284259131679 -1.1433310228035347 -1.9427761944941973 -1.4749310668148308;-0.32918783613615582 0.2323840395529756 -1.1751573199224685 1.9217196493915893 1.0201241934339671 1.6055094697265118 -2.0862781116566924 0.73371328709494754 -1.1421188777422373 1.5219350213763498 -0.24264781182910375 -0.38547721601094231 -1.3728291434971358 -1.6570201703797256 -0.71874121609939001;0.73681723852180081 -0.48966478758185539 0.44469718851610396 -0.89702734983979349 1.249350059000248 -0.5094324730937082 0.53825540576348652 -3.0288252751455729 0.25264227127017336 1.6444702300543654 -0.78980029379139238 -0.58028241987341334 -0.22783812989245653 1.1226687632408401 -2.2588920369373775;0.19339503395142976 1.3464801246299325 0.093854893266434647 0.2742206532886387 -1.4098361597377091 -0.31078710965802764 -0.2887007934594682 1.3061294585205203 -0.21737528605357137 0.024641167326046712 0.93049259339461177 1.4795056763565726 0.91433534867644761 -0.064786003684628585 0.1401682541361623;-1.0217134906914471 -0.76778116525453133 0.47201035429975141 0.040585026866838216 0.90967442346700444 -0.98184577497878733 0.74121170928275004 -2.3635988255280393 -0.66140793404080978 -0.10030075332304711 1.3478791312881979 -0.70168878081641606 -0.19923188630040056 -0.086465478196340317 0.71077706122402384;0.71213958080337647 0.38504949752265971 0.29668357880916296 0.35888049322997295 -1.4553632684146829 -0.81242595275937812 -1.8098170663665776 1.7317620900707074 1.944377694950183 1.5267989614650264 0.74256542762010547 -0.52947503047815148 2.0929361036920993 2.0482061546834016 -0.57351534625489076;0.62246048395920583 -1.0557944025858714 -0.26458156346611195 0.62147344506004776 -1.2571117889576597 -0.21858954213290713 1.396265832478004 -1.185066563513693 -2.7218868423401235 -1.1750587994554584 0.62288611026789709 -0.98743876337742897 -1.1990933783638147 1.3172046471062355 -0.78643454860088435;-0.19169222642665379 -0.9691110196524948 -0.41293903802573045 0.1233437358354626 -0.64610284758737924 -0.24714925334752155 -0.24441860046620001 -1.6057032921255658 -0.76590306015079945 -0.054125720536839068 0.95986698109884261 -0.73150553341722324 -0.91491840361037802 -0.88697780528211634 -0.80920957525033566;1.2435829063040826 -0.28254640975665113 0.25085682202374843 -0.43521766086421992 -0.13451447805931288 -0.64694969771734423 -0.5222385388106574 -0.18678630885554715 0.41839422056763143 0.18141827346294095 -0.84258406976431366 0.56898939808392168 -0.66738050249818315 0.0032798030086066063 -0.60028815497967558;1.2392878240941934 -0.14861688470101719 0.55258370566154846 -0.7044470346446241 0.78933093347957362 -0.26759385472972425 0.37704687745509252 -1.8109762428758609 0.8770576250101304 1.8463517409295436 -1.4187006216598061 -0.5719547873438966 -0.12711153565906896 0.89274780186597569 -1.2202138515937928;-0.47908009904994686 0.85871204988677663 -0.15074531242894429 -0.50362090730545805 0.12866329041860472 -0.40206883337082427 -0.34221573675050859 -0.88784438278584632 0.47074444917092234 0.33674274666195991 0.30341465279931884 0.479817089902424 0.30960970117772069 0.52844670709568042 0.32323989887984472];

% Layer 3
b3 = -0.65790092250024645;
LW3_2 = [-0.64871439291373567 -0.90083154124678788 -0.75631492584921012 -1.3613888869665121 1.3882678801012713 -1.9789474424528088 -1.5049196569213441 -0.49448441540007682 -0.24704442267106069 1.5120437796372002 -0.45923417826195417 0.21376476750682646 -0.21843654602588058 1.8173777421027975 -1.0519483006564549];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
