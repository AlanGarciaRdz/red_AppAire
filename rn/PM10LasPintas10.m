function [Y,Xf,Af] = PM10LasPintas10(X,~,~)
%PM10LASPINTAS10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:28.
% 
% [Y] = PM10LasPintas10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;5.0251256281407;14.7058823529412;0.0179856115107914;0.00280033604032484;0.0558659217877095;0.00576368876080692;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.2687554930721714;-4.801909100087296;-10.067447818816449;0.8381956059956166;1.6621895386816308;0.46581469305885959;-0.010194805549058945;-2.2533971458091169;1.3259760951502322;4.1820077343728466;0.80079420976231819;-1.357053283569766;0.65019368063619498;2.010122011305322];
IW1_1 = [4.7711081397749471 -3.1812648681541416 1.0802732280543499 0.099323127382704338 -3.5433965214057754 2.9706682672369542 -0.91179552617049886 0.22111818868965716 0.87457628581335756;0.046395862468162546 4.0071137573038307 -0.056718357545309822 -0.11085269880727863 -0.88022870143766541 0.44495952478067535 0.39212006000739874 0.21419098200440181 -0.40217147314752294;-0.87218724202979636 -0.41346127591115389 -9.2919194062047854 0.90203960611794631 -0.62480835111765742 0.121806860763335 -0.99814655541401986 -0.037410820010077082 0.10217549736619021;0.78470677214617224 -0.23353404630590224 1.2176178699237095 1.4271337182489057 0.35943263710315382 -1.2195027643359166 -0.59032729070249801 -0.029450131757978854 0.31194368310417286;0.048564225140317288 1.9217929442538286 0.012242381335939651 0.27292127204369815 -0.66640197410885171 1.9345958998093364 1.969392887847039 -0.088755574890556022 -3.7013274269137253;0.13587024141817861 -1.2540280718585954 1.0442615629469838 0.33804042295898451 0.54214567491216281 0.27275577237617521 1.8616680042902711 0.65863752361917305 -0.063473394295157595;1.4293272315829457 -2.7439525941128409 -0.35316259351047485 0.0078897662502607976 -2.0144223265526597 1.0201630268714821 2.5911899496554347 -2.008879263617124 2.0492473418972814;-1.5436238843237484 0.18366793248580651 -0.78219464667774063 -2.6095552794811581 -0.65454136110608174 1.6172140263349966 2.8515983140276711 0.35200521109554084 -1.6443975729389584;1.1454510801188695 -0.99525030452570562 0.16395800154556428 0.48457367422491471 0.63429199668937741 1.14643497101125 1.3645956813114377 0.78456943504948817 1.6616887624466288;2.5375567276182553 0.52683659222163082 -0.36842639448299586 1.7190075062197356 1.6945255547426188 0.44207345969235512 -0.77706711088468916 -0.086644877702400661 -0.034034709992038538;0.16385770501637248 1.4945423015373578 -0.79815319601073342 -0.98282634981710637 -1.3262087905461584 2.4054617722863609 -1.9138115782726488 0.17594724843155013 -1.5581199247616766;0.14945704590312592 -0.3498315012733505 -0.081180133455805922 -0.8707444112533993 0.084028708253896689 -0.041828837021485835 -1.3413957209917209 -0.040061126222043164 -0.14605938562939358;-0.50766555140133995 1.5066766323648173 -0.11427996616758153 -0.96137301461715685 0.37323518998230543 1.0887592881289525 0.047225463933625686 0.035652141665416283 0.334506792598595;2.7164372790853601 0.92818011963869707 0.17385325431465171 -2.0896754605925909 1.230757786966528 -0.30390067826130029 1.7524431784795405 0.061836801789307998 0.054562637936148579];

% Layer 2
b2 = [-3.5017460403559943;2.3198006575392069;3.5553100169043632;-2.3808964856523658;0.1502973555908986;3.0031603882487015;0.36223451546114849;1.0440823409339928;2.2268075445294295;1.0996919743142803;3.3604122319929579;0.15381972678460823;-0.68179254870742756;-1.3480134635251968];
LW2_1 = [3.2334411096921918 0.91237522624409717 1.1340706530098181 -0.81099060618099572 -1.7469341509659913 0.52062613365544441 -3.544055209990594 -0.4487114093861071 -1.0546982805793808 0.79202219243365546 -0.51412387472944798 -0.17143886444222739 -0.60182063689857879 -1.3283370863882988;-1.2760725453534212 -1.0611020591542315 0.64937493967032689 -1.6000881902531512 1.7073124009392329 -1.2542437323584448 0.93264524702470786 -0.81368247934348514 0.7625712382297658 -0.39048794638239931 0.40202544451004835 -1.0809790684034148 0.35951792051385789 0.83273084394245245;-1.0499821387242161 -3.5342916880507986 -0.85417593882675802 4.5808508760676538 1.4890446884856126 -4.7680373955249156 -0.51161820388615187 5.1800113098114977 2.8829670876709224 -1.2206822293872379 -1.4195712444869408 3.2499797864677054 -0.37138405943734637 -2.817520265569641;-0.46606564788060112 -1.4000036719680864 -0.37133556505274712 -1.6384379393637249 -0.5238534971555342 -0.89790635509717398 -0.65127111485303457 -1.1777102282647771 0.1963450831773714 0.91225517758684171 0.42968859720865393 -3.3484292249311793 -0.062902113307052296 -1.0625541284584339;-0.0021719565778257725 3.3108253546156239 -0.97402485390310523 -2.1202375454573428 -0.44084736840191752 0.98247054836388348 0.31778477284272949 -1.8251913405737992 4.4021018635585536 0.9275495867351885 5.1380784526393688 -2.0771446099398849 -0.18386119955493177 0.1742678134951447;-0.47741356088316483 -0.24818291498642264 4.7176150940488846 -0.092217833968446072 -0.4300124593158024 -0.26477500778950036 -0.076735458244436797 0.17993619366712202 0.41642345997326735 -0.95918991467502368 -0.21246772801247382 1.8232366742164097 0.87860017922819122 2.006623015811444;-0.25449322056759238 1.9381383723313335 1.6181911062050598 3.9620838554205235 1.4339032849859332 -1.8101990671671566 -0.73160008381967967 2.2977631599659909 -0.014039179416100799 -0.55907314239492811 -0.56812154074016807 1.0990222181320273 1.4400421500479652 0.65911106375149664;0.50032311337855651 -1.9807752552004532 4.338623682088496 0.37835033179804989 -0.85061062194148296 1.0863514181999114 -0.25234700553646067 -0.037272322640425508 -2.0081141002528233 0.2142333188215283 0.44322890213598615 -0.77395464442556861 0.4436266473345955 0.42835516359495351;0.35447263802046158 0.21148333054489679 3.8506145997978107 -1.3341272746342054 -0.24949485130497154 1.4167516215472111 0.8126623180033602 -2.0732786357596549 -1.5078579321864802 1.7267400600196801 0.759133818999013 0.45196893425701012 0.41431013745759365 -0.51380073513623314;0.82209648775470467 -2.4785601701408222 -0.19468957136572335 0.18222843373421668 0.51731317127171517 0.65301528081365889 1.0682849665720848 0.35980404975966995 -1.6874296481004072 1.4955935284493322 -0.13516587575368283 0.92291459652044106 0.87709200445989266 1.1087856685159028;-0.21918433750290459 0.21773528255164892 -0.49540540463135441 -1.209362547644133 -1.4834841087694679 -0.50658421931059427 0.58604516641774373 -0.5280146584497688 1.0579572786192546 -0.88625215386812028 -0.41369549853727744 0.86191310307552238 0.22382712152231671 -0.16301659926397574;-0.42059361949344864 0.14310675476043722 -3.0312198403333301 0.25056904051544349 -0.63890154212478012 0.72845058962450948 0.57367947848070733 -0.19461042645830715 -0.39116514497779664 -1.506068696776786 0.77059726489150393 2.8940674256509329 0.85147692584842716 -1.057493648317319;0.36953681987821463 -1.8411124172881888 1.2120855301858884 2.0352386816033246 -0.57458725325881765 0.25238935482219543 -0.298376617825659 1.0605886053291793 -1.3154707203059828 -2.1416734371638451 -0.12222766370698518 -0.69263849015493817 1.9957338473149622 0.97948727045864292;0.86296386148705562 0.41515520741128081 0.43394919703905294 0.49771733057774414 0.19302757251610853 0.45642444372242064 -0.036485680108556469 0.90043051285919684 0.8212744159131532 2.4052553451581695 -2.3068975882571241 0.64216102894428773 0.24824980761682186 0.19419643980311485];

% Layer 3
b3 = -0.75795772269546002;
LW3_2 = [0.88988057643222085 1.095098198830087 -0.20667704277535592 0.12390724729094342 0.052992279058394993 -0.35303087033040625 0.15108412633720616 0.30665647614971303 -0.11810276203771114 -0.26695169297473181 0.26416941362655488 0.15651531400055146 -0.2077613628874764 0.077748985702506365];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
