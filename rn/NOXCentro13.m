function [Y,Xf,Af] = NOXCentro13(X,~,~)
%NOXCENTRO13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:20.
% 
% [Y] = NOXCentro13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.937058485643615;3.6315945266647951;-2.4320239562599832;-1.6078839997159791;0.15200441365235035;-1.1232406434951834;1.522870528760401;-0.22617533539345985;-3.6259574329931992;-0.44529391589455858;2.65883309320711;-0.0047840089274359399;-4.7645473295828147;1.657171021027767];
IW1_1 = [-0.0034678572601185946 -3.2552378899983045 -0.34298633745974683 -0.67189236206747149 -0.19614890482089062 0.037421427611056747 0.62137202925434398 0.08577042986488348;-2.5811322774507124 0.96575489214785637 -0.73361091199269202 1.2151255061545085 -0.25533617519607588 0.27396564021949693 1.3979341533859657 0.42916432615326039;3.190457653710959 -0.35189363484509195 -0.002185310307009334 1.3178948906986052 0.80105286580340662 -0.9195128300044767 0.098370944069562927 0.23745184992502605;2.2151877632619565 0.35143629515510233 -0.27092172572025425 1.5321142384623698 1.1922696739613068 -1.3040138979268354 0.1899066255891505 -0.58375328519869796;1.6509750121142222 -2.0874106581919318 -0.13324406483461143 0.50833075827692464 0.15972512060616509 0.85432042678345677 -0.29446325046564364 -0.022732390454364822;0.63066701097616817 2.558053359900843 0.75459310203715901 -0.62229862145410242 -0.044871291167368488 0.8459752465110173 0.0030471293554247352 -0.41000016913524306;-1.7512344887296842 -1.1737405879074863 -0.42253605789327298 0.71207572863915691 -1.6220191796344103 2.1041780005405446 1.4480068746073025 -1.8383522884896666;-1.3254431902820234 -3.3405177183882002 -0.3642829465141616 -0.59942727849445854 -0.10406983385884289 -1.0214461621716329 0.44250767710382294 -0.15568694020844459;-0.0029745503563109524 5.186693482663344 0.59104522985636465 -0.38527035358363632 0.059275189043166941 -0.43674795214095014 0.42382971434287936 0.12262494840066755;0.62041893355710132 -1.1246386877289278 0.028291742399067607 -2.4061025333057007 0.33794189477013525 -0.51964157011649947 0.40347982006191674 0.533201643102723;4.174927947712856 0.25850148467547052 -0.19913329289770185 6.4199827863840024 -0.22195307783669541 0.87211671094332788 -0.073570034779809668 -0.093737544311372697;-1.1710145972601014 0.46148438212468817 -1.8348275310364242 1.4200295192338093 -0.25591297463078494 2.9868946899417037 -0.30679136195015078 0.38586521871479501;5.1203077422393397 -0.9385974016228531 -0.25868348463703661 -0.3348155057414352 -0.31001909399630662 -0.75169256172098264 2.3586168427068426 1.6714876798270004;1.8767990196725659 -0.38098098538744318 -0.47956159304857121 -0.098532769988005309 -0.16322615217786349 0.35722423498594552 1.197341588237923 0.094361216751572968];

% Layer 2
b2 = [4.3800670688158512;-1.588289022910518;-4.6464184148826728;1.7078349434802227;0.74989644393278432;1.7325904077388983;-0.28431722820442829;0.57063337074687626;1.8276267329072042;2.0239251098286779;-0.42737117582093831;-1.1559371893239136;-1.3422415654472957;2.6986907232087929];
LW2_1 = [1.2059483600483174 2.3392802711941392 0.52880374154821874 -0.84054087606220051 1.4588402687970345 -2.8504230904442278 -0.99983780666144861 -3.8666212877832962 -0.61654476834276473 0.06691568811287267 -0.29485787145233833 -0.69090220115476919 3.3710907476410701 0.32646118991102857;-1.9431067755914018 -0.25688736509422094 -0.64216300569639118 -0.74693580504938217 1.0557456150030664 -0.82965480615807718 0.78635154013738262 -1.2586399491577986 -0.026845422984614231 0.9081466198442566 0.68623455252129251 0.033967394347940161 0.095135852645292285 1.5471713949814738;-1.530082266855511 -1.878852778418949 -2.2906271808870424 -3.3546775917001215 1.6935478630573211 0.51348233467292814 0.15845617967007508 -0.12234887469168332 -1.613662525409064 0.67828743130155145 -0.43827294464816213 -1.2058638347648669 0.45057165555476009 -4.5033981021163241;-0.21940783781533821 0.50434122670441195 -0.31026073708745572 -0.067194847401303992 -0.71028636648938603 -1.0422692870792438 0.18714017524508922 -0.41938470180126963 0.29937469045123966 -0.011095961452674772 -2.3959051637677069 0.71846552029508448 -0.22164009755038327 1.2028042680356366;-1.3223991090620717 0.552584842508823 1.7427075165604473 -0.96343300703066426 0.064143617781132575 0.37913237465004002 0.0136647810563588 0.83970805945297833 0.28514734651217111 -0.2370974620009012 0.26971753010048749 -0.054529077251611616 -0.13550841860707472 0.83574342616787067;1.2686230215544569 0.72780218906909233 0.53766797115740084 -0.99151595559128147 -0.83086556604563355 -0.35664681695159661 -1.4217228926601553 -1.6396028449299789 -0.59266286695228476 0.26024930546744823 -0.31297802477861869 0.67781190543827008 0.92037772992848388 1.3593841903457342;-0.70294989977738442 0.41132880515714354 -0.35699338512863832 -0.26988227114606522 0.015428740675895478 -0.008704094402547026 -0.14036614081245552 0.39696440792201115 0.26652768725908166 -0.20568054803163249 -0.19826361228760447 0.17542183212090895 -0.20681571376860239 -0.055524340407457205;-0.93141795399480887 -0.94928454439815213 0.92597180996843598 -0.55995564515014151 0.93277342238583683 2.8269806357207981 -0.038479949935396399 4.8105803718502118 1.5542971998211512 1.152011955917037 0.83903263865765687 -0.70829769427709743 0.94250983215643336 0.28400184955044144;-1.6922478618690602 0.72843432565332034 -0.63717888999689609 0.98211878699153177 -0.88665588038505283 -1.1264013975033664 -0.02014225398491077 1.0125433987132966 0.77726220151057834 1.1941397259499387 -2.9561507906613453 1.0034786349234832 -0.32559277314652907 1.8064557200501365;-1.2968736674927066 0.29617132008012481 2.2229168196112434 -0.92167875448295677 0.10104249862920803 -0.16501494064712957 -0.3833522376310009 0.54222830096948804 0.37783517344694179 -0.35600146820220152 0.19113040507947554 -0.25525399849423802 -0.12936765305463802 0.80481268563280239;0.49748674592201975 0.47708979049009453 -1.2906085572656929 0.58761452048127505 -0.5959999399316126 0.25872962750334616 -0.072386256972832963 -0.60042346540135172 0.8405067627763958 0.035029589805993799 0.35700121423477676 0.11274952544842246 -0.25192747402347948 -0.46566996609470385;-1.0050157876182735 -0.14020879369980879 0.019899184394635172 -0.48596928677409978 0.50972379327960948 -0.26382106266147365 -0.12248904250974635 0.71629138958107541 -0.44358736031158152 -0.079926046003051587 -0.3811004447385789 -0.027615810753633743 -0.091205068533391928 0.071654532271939325;-0.73970644258129914 -0.90691301450702966 -0.6638372129211223 0.5596874416790687 0.22528381438419265 0.94534015744071442 0.69633241252338329 1.3846647014076672 -0.038088514581043544 -0.32614888605656611 0.17694297523544164 -0.31978220478092073 -0.5321216432231195 -1.0367493311092193;-0.2414624238990298 1.9380947738266068 -1.5818614444661372 5.2330412919749829 0.67580085773675691 -1.8192701014253092 0.090050267794027833 -0.50481227443086785 1.3874193829564347 -0.7221270187344575 -0.1217394656224412 0.29670598366617251 -0.45499890997099063 2.7171441313127347];

% Layer 3
b3 = -0.8249370542624701;
LW3_2 = [-0.22814684512935557 -0.41789257849214689 -0.34293558088504339 2.6902226569074448 2.1172393898341118 -1.581278459144152 -2.1046372600038343 -0.21382982659805044 -1.7930468010107603 -1.623938377524065 1.294209557128895 1.443229635678781 -2.6058420544245147 -0.5556073222877822];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
