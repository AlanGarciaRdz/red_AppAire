function [Y,Xf,Af] = SOXLasPintas14(X,~,~)
%SOXLASPINTAS14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:45.
% 
% [Y] = SOXLasPintas14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.966609831584675;-2.7821118021592359;0.48265779075426596;1.0539825337140489;0.96956274749562432;-1.0855865085121095;-3.8308573166489999;-2.1349315650722196;0.67044471823288221;-1.7426455707480286];
IW1_1 = [0.26496543769498943 -1.0908091337743371 -0.057640468090929049 0.10584332828274991 0.38136656094223775 1.5050927877419742 -0.69870889876757702 0.21417209470023577 -0.71025073264366079 0.049672071755017796 -0.0767792204977156 -0.66993021553842125 -1.0853334384374866;0.35884861255216582 -0.34113602224589262 -2.4236230212341452 -1.4126866651805343 1.1396086843978555 -0.85653965762167161 -0.80182447602611562 -0.25291366414435795 -2.1774245121101279 -0.20824661347992277 0.085113365937873095 1.3091887578608923 2.8051734812716544;-1.2098878056113889 1.1343177558488451 -0.52547037776541639 -1.0297885970613758 3.7495289408423762 -0.23979445986013009 5.0915500953454451 -1.1790033666482322 -0.37461649463214297 1.1348264022885453 2.2400457584663789 0.62864866422577015 -1.1207207594570083;4.6602599802239615 1.135267512743561 0.26344951915093773 1.1763150067050105 4.0261844486869398 -1.2593863886536589 2.4623042286945691 -0.39831426194442887 0.79506881369969662 0.67161102509750514 3.0954390143057355 -0.63121298170537943 -0.064763597183937177;0.25839415968008539 -0.17641287759596533 -0.28566635069338892 0.58972743825789731 -0.97467567575560021 -0.30695029461714696 -2.4601074910375376 0.1941550149032823 0.22833647851535702 0.40890396390787864 1.6511701616241563 -0.36909694431306883 -1.3474497292332563;1.8813787370880157 -0.28141609701704307 0.23771621495123796 -0.12807936123113284 -0.34548989541790892 -0.61867253257405042 0.43980359925312884 0.12626077673609423 -0.2105718917123823 -0.25275448361327724 -0.74333593305313228 0.56191641630199263 -1.1484005731295539;-4.4919168495745883 0.32025866593339514 -0.3065859943095961 -0.21833232953456597 0.66436627616506794 1.4729429808897516 0.17546396244624235 -0.35145533646175253 0.18357460224476951 -0.028702284489603845 0.31287411390018516 -0.36845252498113046 -0.09124155711106452;-4.5131510320391746 -1.4040143086993924 1.5139451652156137 -0.74286943585384224 0.39113460930227928 -0.89279601247049067 3.4251854553162278 -0.25766302329220536 0.15618606134554222 -0.90683470440668479 -1.2360700029973835 -1.2117664525024456 -0.11218487662233201;-0.21149625793188734 0.058070358221093833 -3.1433154893453841 0.91756130231993904 3.0174609787403872 5.3289551504053252 2.5291774397838984 0.11507360048987729 0.48962275213702555 -1.9445495521574261 1.8000210804759178 0.56863424528497131 1.8876531552773845;-0.5710035944600822 0.1418869982111659 0.55782439384432625 0.97194630246879044 0.35910264954545518 0.41623057160853355 0.47977160356533921 0.063483471843434863 0.43100701173632067 0.047724735810511738 0.045197003723292398 -0.073398861078950106 0.30263055973889003];

% Layer 2
b2 = [1.3162160352668308;-0.71052800722058718;1.1594927510884374;-0.82144914071038511;0.039369626743630773;0.13597905259484139;-1.0799641872627257;-1.1682542736689445;-1.5292466828584801;-3.8734463847644007];
LW2_1 = [-0.44158725873053051 -0.15867296382382287 0.45075904858965127 0.1980410050278949 0.41779727959213758 0.2691928013905841 0.27928941013164343 0.17155528977363133 0.22854554300131766 0.23533169591741454;1.4920471502443231 0.39853848064424613 -0.20417663670459726 0.30484613445372855 0.78225084967323111 1.0963764179661761 -0.043249786089456087 3.3781517229217353 -0.54352584652756752 -0.56762239620117583;0.0072062600181081668 0.096163642824244999 -0.33837616836204581 -0.010514946455283362 -0.15873006826124739 -0.26251506713312545 0.013815075215104 -0.16629272389611993 -0.44342443579123114 0.63611321081783612;0.86446441748920733 0.26139376878261272 -0.39878747036657647 0.60843207808451183 -0.57694198403167318 -1.0189047775256057 -0.32663502025901242 -3.1145012663658438 3.0229873616993972 -0.40820815184805209;0.2548477549060475 -0.40897158606297213 0.48711011438283885 -0.81830920523014539 0.026204368198850858 0.72149110829344687 0.26892385075103081 2.7547585524319165 -2.4326440903257054 0.54383147337634852;0.46421098887541928 -0.68614722321667587 0.90856117393417346 -1.1881572116524755 -0.21788509885407997 1.1378445473988261 0.26451420652251206 0.5012687541919183 -1.4836017159841561 0.84170416571335283;-1.5879354027892449 -0.23383798648082371 0.3635649999224288 -0.59484201369859857 0.28863942518573882 0.85434263703744062 -1.956591932424435 2.7244602002792337 -2.132226131595504 -0.43963144878996785;-1.2437242825392045 -0.05773360893004785 0.15075855839967811 0.68973539320815125 0.36246680942034532 -1.1212814911797588 -0.15707705506805969 0.14376678122057718 -1.2021720096618296 -0.16488757143573837;-0.56653955655261656 -0.32022014792837833 -1.3296276701089544 -0.17940792273684764 -0.58149103620911879 -0.81156971906396391 1.6652223423277221 -0.64972644578775596 -1.1980288810108106 0.40018842303899765;-2.8620512622739454 -2.6869072576144926 4.1568444749510469 -4.853988519231403 1.5185396464587453 1.1216210786670726 -0.46329727426472944 -0.84019735920619354 4.9380747508617429 2.1741839334092234];

% Layer 3
b3 = 2.5235010024889108;
LW3_2 = [0.5321573725436145 -0.57735799869993421 0.5373960803109944 1.3924615506979485 -1.9339290666880287 -0.48617308228799916 4.079817446887235 -0.23809363100157951 0.89162493070790894 3.0146236713555972];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
