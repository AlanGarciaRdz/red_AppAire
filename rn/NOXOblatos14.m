function [Y,Xf,Af] = NOXOblatos14(X,~,~)
%NOXOBLATOS14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:33.
% 
% [Y] = NOXOblatos14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;-10;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;4.05679513184584;0.195790504160548;0.00618238021638331;117.647058823529;0.141843971631206];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.4087944720226608;0.78081826496311302;2.233815958026371;1.4500729671216859;1.3961681229591731;2.3968835386053255;0.5145234881052716;-3.1098053575067803;-0.58186761011539567;0.90065794493619067;-0.13702938879130372;1.7122273651281086;2.9648912815564574];
IW1_1 = [-0.89168960261570773 -0.004458687964123376 0.72170730339719458 -0.61019197034204664 0.37344755174339594 -1.0785673152987727 -0.58736094334600142 -0.42437686074737202;-1.0440105053182018 1.3200546472910824 0.50953547512623865 -0.275437965018274 -1.0789900422384102 -1.7514768268291541 -0.34318844166859402 -1.2521925584269917;-0.28789908752463556 0.26619327728322778 2.0405313870644544 -1.2137477640488001 0.43089864422559809 -1.0927949695380639 2.2628445458299442 0.19966697788860852;-1.9699770444412625 -2.0205940537393832 0.48196197191897017 0.14207902834957242 0.32551663160250277 0.35666274092660594 -1.1909691025957636 -0.18570026709660029;-0.23894157128051124 -3.3760906740664836 0.54097902534662379 -0.50761801225680381 0.10543592494576653 -0.32986491633022846 0.018715546782087235 -0.10946387656410397;0.4472001210141538 1.2796976937709021 1.5965755130407955 1.099846962607828 3.6891571700395644 0.42233311249157213 2.0438498758808112 0.93264362904824738;-2.2056856374465825 1.019790790791091 1.2333262027117504 -0.3271073202187762 -1.5367858736184978 -0.052674102168922834 -0.2697874867455507 -0.18516176405339527;0.13728330073834855 -0.64966137841283789 -0.0076881400857391965 -0.033857734500519099 3.1846057046344201 -0.15222739395450113 0.047437588899522036 -0.030730897520243841;-5.0128650800244507 1.4179679029778476 1.2891577384947528 -0.14187395494508553 4.6857871560916902 -1.2614840492776589 0.13382523047608327 -0.9588388218681082;1.2832009308147796 1.7233413781768241 0.45764304005455303 -0.47558988205598024 1.0209208374151955 0.31128757234715471 -1.4198982495061241 -0.96020939202976741;0.41445527180469882 -0.3742739809037533 -1.7121113013455505 -0.10994149081092905 1.4174572357065038 2.5867936594578644 1.2360721362989047 1.2970605819043615;0.4207998270347641 0.47440851887167146 -0.02616222192265201 0.27166622619528674 1.0508396616653202 -1.0456836906272615 -0.00060369872949106668 -0.31681111412371576;-0.015256546724870134 5.2657815908559247 -2.6536331770363963 0.84864667207693545 -1.0810783153965564 0.57526716260626654 -0.59662403927860619 -0.12932302485934719];

% Layer 2
b2 = [2.2969951843542571;0.97839281282368529;-1.5210923566478691;1.14072374369851;1.7382008750613469;0.2063430792861615;0.54720754178336861;-0.50590980227142235;-0.87124301578821872;-1.2012171529465339;-1.0927452727965705;1.5476162115233654;-1.7810867217511994];
LW2_1 = [0.10518163227928463 1.4169294893504076 -0.55410668354343595 1.6337507407824234 -1.7918976722626792 -0.96037822226192004 2.0064680061110858 1.325181712046188 1.4957778806613184 0.98553631882710557 1.9003002214929012 0.314463584266092 -0.56954300291444127;-0.8732500978310358 -0.4996583475487108 -1.4205060631601898 -0.43911676513404901 -1.0181422107463294 0.5849829538013811 1.1775641751644754 4.414676030320047 -0.14694427298138218 -0.78626658214544265 -0.16447818955443388 -0.28229604158715293 2.0658585480890763;0.25222710002543147 -0.20197042706669538 -1.2429100266417399 -0.1444972694917829 -0.50093600658431203 0.45000689817488249 0.27046490262519085 -0.045161679122048728 0.11702237303904417 0.10437275981933478 0.70932838662577957 -0.43397064471959712 -0.12841011849062456;-0.029982758197545686 1.869803215784746 -0.88977154146894544 -0.51794573717980319 1.7690386889291032 0.12843651178234605 0.062359682691968968 2.9076801265915795 -1.1066529523031541 0.81161735950042191 0.31147351415554086 -0.12492086297078829 0.21784588105482505;0.41285552239861323 0.7220242017320101 -0.85083936719495845 -0.47940822966932012 2.168386337635722 0.12635250552016378 0.033733132042590694 1.4287945607635475 -0.69508387912880543 -0.86084448105347844 0.31226970780015895 0.65563069186739176 0.49243073596269854;0.80447434590266498 0.95103225065618024 -0.46555375704613433 0.061689948083647826 0.50377328001158528 -0.081591865356926918 -0.2314750587629483 -0.27508741227811484 1.0160054376899628 0.31068130167799263 0.79842520681659046 0.92610147966200307 0.70088578487812525;0.018274267000451781 -0.33397040546119316 -0.11886758391530156 2.2496126989353384 -0.65619098921923424 -0.67143984206695217 0.4098974782275015 0.45344076041564851 3.2005143648936598 0.24779352031313354 1.500275427323976 0.78992940513590859 -0.58920907217046303;-0.38673152503987079 -0.94518883698643175 0.010199350997225038 0.28713256017482613 -0.19560279565945238 -1.3115379800902764 -0.32333523396690067 -1.6554176160260472 -0.18624299330727964 -0.37360949956120454 -0.33866293895161853 -1.199205722086492 -0.13425268722140504;-1.0311668559996965 1.1371055774477152 -0.65800988709315256 -3.04426134167828 0.63769519614624215 1.508478686907007 0.58185519670477104 1.3139206375058692 -3.934023557788243 0.49536653512670215 -1.4975652238761394 0.16614203928814669 0.71940828377366661;-0.63807447293573394 0.44497510777626859 -1.5024361757999041 1.7407350631643626 -1.2360986119717174 0.22085351940158712 -0.34632756408073795 1.6601880984845869 -0.75500072113497119 -1.2267056790341582 -0.2857925694827893 -0.19805425573612395 1.7881397250292626;-0.56302580689660287 -0.28185768303603126 0.6366368864539268 -1.4714700555151314 0.52552798784779331 0.33754629467523783 -1.4387251085518928 -0.024167588955980014 -1.5359945470249903 -0.86891865848464533 -1.3776746222184548 -0.29673660701947574 0.57856120574824388;0.50285741191200528 0.11764023957050784 1.3995747880332157 2.043405332711584 -0.5150552590562878 0.85258745812094927 0.67551399577160831 -0.2752652139530169 -0.8094250230516622 0.35510853861261749 0.35202426454937741 -0.47924295521918187 -0.15304099010733999;-0.71540266915092166 0.27326149596119631 1.450013296425263 0.28654373410766965 0.29013259385998658 0.18524055843014439 0.071945757881937134 -0.36334007399428786 -0.17659893732419057 -0.70116883395118001 0.21438767715666748 -0.40896476403067272 0.14141910782283829];

% Layer 3
b3 = 0.33221531184836589;
LW3_2 = [0.76431129224153538 1.0852393030754621 -0.79757199232127785 -2.1758712207792934 2.2347258754449912 -0.87981554692844466 2.2734517559565401 1.723759225823684 1.5680460847570552 -0.62332052110372138 1.4402856375557671 0.6033342148775277 -0.31800256900182505];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
