function [Y,Xf,Af] = COTlaquepaque8(X,~,~)
%COTLAQUEPAQUE8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:13.
% 
% [Y] = COTlaquepaque8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.00187342205869;1.2903381752977492;0.16836991639772458;0.033472327765066895;-1.1825254527229914;0.19933664268193124;-1.2712617365094208;-0.41893111034073699;-1.2669452388180369;-0.96201727714542817;-4.0630016514499028;-0.75504926721951171;8.9593718878206605];
IW1_1 = [-2.2469873805329561 0.86933600245106357 -0.10887811572248443 0.020674955205600955 0.4078164170884524 0.098709704098914178 -0.29918989054256523 0.16985613002605099 0.32803988654115684 -0.78269359335875999;-1.1127070563636625 -0.63801147749622322 0.48933151831790273 0.31801759776068267 1.2841990165722728 -0.98184638357282961 -0.76594052740924701 -0.41367295998516701 0.5737968911246788 -0.14662583945977109;1.2556636847564924 0.46138217606972248 -0.29358512634705741 -0.046249331691310104 -0.23441385208719456 -0.80059675340674208 -0.73643681821662288 -0.0095863810935095228 -0.072197411606479411 -0.04015311516265662;-0.33403118841299018 -0.52602870958279169 -0.095496880430766554 0.077727999908964021 0.43167602752377693 0.27827512977278795 1.2390675580063841 0.91496416382549028 -0.72738022463497565 -1.0414161864965694;1.4974881586354103 -2.2882095848571424 1.4382386231540363 0.34182541627790464 0.7920525319095979 -1.0589343556887298 -1.1945530029685461 -0.0490977244673277 -0.046891134256995773 -0.61344862809272227;0.067509382862432396 1.5904069725635828 0.12239437945421068 0.065152623607611412 -0.25672514844835143 0.92147485117611339 -0.38760202973747498 -0.23805729697914413 0.096744297444525562 0.23419918713180904;0.15224858376869377 -2.9035690566018304 0.18253495934337918 0.12212056940720517 0.28186581117158571 0.20930806211404096 0.079210756089577117 -0.068276677974134142 -0.1935540712698309 -0.12271156401003692;-0.013512910190805921 -3.0134122143615891 -1.0446434468851218 -0.59455147404969988 -0.26249421770861525 -0.12899102417593344 -0.035046268261456862 -0.58480221488469064 -0.56870977837220404 0.39362203585734268;1.1590097528332075 -1.7867484516773671 0.23866885109021085 -0.73236524965007943 -0.17875044208467522 -0.92080671382261092 0.29534347184148335 -0.074917070690408163 -0.2326220444737917 1.2191109043596207;0.67203369827254233 -0.38277026573000306 -0.3401800222258119 -0.60468957822728253 -0.83299836573778985 1.5402506828580458 1.1621751698534726 0.23452111960402869 -0.31266321244785089 -0.19326427215826883;-3.6415007161047042 -0.94664200907008544 -0.36351834643887837 -1.5495821421545133 -0.67945058589627827 1.4864050765925454 0.64329557991017894 -0.13771392795721007 0.10984754909073813 -0.18617624670805541;-0.15621264517352143 1.4412746246033525 0.15074940368412351 1.430217213449094 0.94555414727761755 -2.6031306637934608 0.11916412030623463 0.27942643067893702 0.13644828046114316 -0.77176324606768754;0.42435972529579741 -0.019706040196926209 -0.23715688589392053 -0.1215957852811093 -0.10698794722206346 -0.54092415442128949 -0.091428028556653967 0.0043429587858462137 -0.079954616309930865 8.7344406368098664];

% Layer 2
b2 = [2.6686539406059939;1.4788541370137587;-1.3284329839363489;1.0972369626530796;-0.34217255004216546;0.054779440949799946;-3.025914224539811;-0.57969770532033849;1.040625442649832;0.63992284062253368;-1.8571268681198392;-3.5487443545375204;-2.5322782871732357];
LW2_1 = [0.41514284888407393 -2.8810384116197221 -2.2459653712200907 -0.58163474814575444 1.0475922348640867 0.1501059611666741 -2.9656280440903533 1.2394812622540761 -0.38597306978991996 0.69338411876209161 -0.8513459882708273 -0.18165932464827139 3.3760313396652619;-0.12255015383726076 0.13406427909507582 -0.53230078764369071 0.78240378134287503 0.27261953758744728 -1.0589387299647217 -0.49040845288409451 0.084850842976926161 -0.06821634215999671 1.162296465446361 -0.19876475146002887 -1.3069872663734901 -0.7260988107878783;-0.069533330533946058 -0.39925859075565978 1.7366761350344175 -0.74261358321944237 0.34203131409793147 1.3598366605459866 0.60229283123803157 2.1500283832392593 0.30139489814121062 0.32165468848187023 2.6882462601567938 1.3931409038787366 2.0936736945221304;0.31465027134857504 0.66212276111319079 -1.9143905702643409 0.6617219747080727 -0.45978652823945387 -1.4302102127056722 -0.65991917838379788 -2.1793729224768983 -0.15679755148518298 -0.025903276415701747 -2.9485187764156864 -1.2965622106659236 -2.2471430898608369;-0.69754291099437504 0.1438485516628876 0.23062166255593675 -0.37080279557781431 -0.69997784848143985 0.37795642461268747 -1.0386403382164093 -0.72876197061071069 0.13396683645933843 0.71192395345682302 0.37684199771731253 0.79614607157044215 -0.38807154658574483;0.57579444193423523 -1.3861342885211301 -1.2281979143013546 0.29428466861684643 -0.13900000556445818 -0.12196730103371788 -1.3718174293762913 0.9629072824380065 2.1137002513618572 -1.0900010375836893 0.22568397880713925 -0.34505597362683421 1.0035028577761684;-0.72299163855347115 -0.077770372547628849 -0.21799287649968402 -0.44451701260315452 -0.95538809369915889 0.78726206266811227 -3.8232218704182284 -0.26733845535798328 0.50548560721659364 -0.0034938034266120271 0.43841985442490705 1.0474609666545183 -0.43443500212473846;1.0537915803429234 0.076864824078517774 -1.6906317807515774 -0.55785620703733785 -0.46024731046659445 0.35816750740778874 0.46045560287794801 0.38052087739562568 0.41193119480511409 -0.34056081841358077 -0.68803417347771278 0.58324955254522803 2.0512484124621695;1.7548804950934318 0.095239068849238939 -0.71391515221368551 0.25571461645116095 0.47249373088878244 1.0121501368670824 1.1145475912307872 0.70635528248686064 1.3316426859371708 -0.42779482672763453 -0.052423122817400157 0.66806832596492427 0.93525783441342114;0.0884065723830324 0.30854192759556409 0.51023608860818614 -0.28050915802494181 -0.55593425988217993 0.1224975215821931 0.38757344963732793 -1.1517867667862216 0.59907335582092691 1.0125661645604598 0.11519966137528533 0.60094750248372408 -0.39370083165531861;-0.8225010745238267 0.14062503584287661 2.2947055094196265 0.61821408936899314 -1.7329384608084304 2.9844610362691841 5.0067529847612366 -0.47750700574468824 -0.098966458893057954 -1.4985873724863614 0.69200067610900395 0.37404709889318499 -0.028250343921047388;-0.049396318002332879 -0.38573158187844125 0.95288112345085496 2.5161064204148746 0.84522152558317698 0.15708184777269196 0.75324428146533573 -1.0221632699652494 -1.1908725503062041 -0.82650839382889896 0.032615593369609071 -1.4816189806102946 -0.093623718928806998;-2.0058923608617181 -0.63776298256091446 0.19409742028246985 -0.29163693234070803 -1.6217159719996159 -0.39717328288452775 -1.5968815462316108 -0.39313317898555428 -0.97572656013666303 -1.0409121908941235 -1.1272836091747871 -0.80559256685198177 -1.533634921754085];

% Layer 3
b3 = -1.0346322832826285;
LW3_2 = [1.381781032936646 -0.36475856447812965 -2.3306548219904539 -2.1701800341417852 -3.1350290098168552 0.23570149886100181 1.574253736102843 0.87576856867691144 -1.8798813204900111 1.4258057138458877 0.80527243581431152 0.57449411024901731 -0.9215107771615858];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
