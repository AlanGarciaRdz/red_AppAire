function [Y,Xf,Af] = COTlaquepaque19(X,~,~)
%COTLAQUEPAQUE19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:16.
% 
% [Y] = COTlaquepaque19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.3426187978677699;-1.7067240076551149;-0.49035191211930584;-1.2951359841292256;-0.95755382718837279;-0.88709757764089581;1.2354795762587387;-0.98888854871683074;0.62630190031170507;-0.492280480364998;-0.1289500616070938;-3.9189414205939257;1.2689808325378826;-1.6135255655657903;-3.429103905278895];
IW1_1 = [1.4261723819780237 0.11114413996266702 0.18845466781924775 0.99228894951911983 0.63784883617686927 0.81366009514349003 0.31524441566334249 0.11551714798020687 -1.9736662881127012 -0.63172607625650934;0.66496272390200672 1.1105108135246469 -0.60755514530937627 -0.13999959347157462 -0.30687734735352679 -0.25534349001367751 0.31578705428940917 0.12645271677372649 0.14529841328836279 0.61465809624704981;-0.14907429819725532 3.4528714091089441 0.19675264269457454 0.22119405909127507 0.072008220863127984 0.15741110272776476 -0.06799039027629189 0.020086967802592164 0.133713854100665 -0.79647011499305498;0.15136490911135853 -1.3089808755035017 0.015197024000687493 -0.041944435691747134 0.11343444677280973 -0.86939210700544178 -0.63449891159618288 -0.067492547360816654 0.07979204222532188 0.2445519105493611;-0.86034770042346687 0.18551711541654131 0.23004378242841864 0.074046849774016835 0.065031148586311607 -0.96118871610846512 -3.1816113415929985 0.42557840598020369 0.0308653953112983 -0.15591868633113587;-1.2608853843896068 -0.22810972331121562 0.001699043987421444 0.17055578270325869 -0.41000202910408101 -0.8483089648533445 0.24262273405072959 -0.066376524519487223 0.1301146621899989 0.28770839984187968;-2.6391697102430687 -0.37675051836486895 -0.61721400774387636 0.40086530506792761 0.6565832507093724 -1.4557148250163627 0.50168017260026776 1.1728433689652717 1.6328515981841953 -0.85098858038057823;-0.88698800772081299 -0.046562983054935871 -0.0040006701186962451 0.59610999722012237 -1.1085607807292632 -1.7950254752049544 -2.5219041311957655 0.060415989675131884 0.074252224402915304 0.19797957944362207;1.1168845425384568 0.6222840245278124 -0.57669743623042513 -0.39885182991484586 0.90898177601641617 -1.2380577885201653 -1.8170180121554094 0.10201382813159399 -1.06519462489157 0.43838440921284944;0.36732309223281495 1.2231411052607193 0.27819934805070023 -0.035067892602719988 -0.45528193966873709 0.62014072734350134 -0.14223263726424915 -0.180246115563412 -0.13322179937676865 0.12085561676743163;1.1988242092061607 0.16219495508434842 -0.5827004188991185 0.41695680240675892 -1.1145509868204104 0.5004894043978978 -0.028082991804370495 0.32961139182457355 -0.098042373033322319 0.43033898827269673;-0.13898783184802599 -0.33953735556954895 -0.69850900908454217 -0.023746300405226101 -0.24650829705557081 -0.54919814881011964 0.10739153233004947 0.096213445403937808 0.078595414437545363 -2.4666885649784298;0.96995973529739998 0.08206767455527092 -0.081157751449882146 -0.45522242053984802 -1.3495214853144284 -0.46103293993857836 -0.14480703157988831 -0.29168531354987798 0.26295026732942156 -0.54038945610276112;0.10090269362919754 -0.4326330907497733 0.62968055323833994 0.24928181380412168 1.0402508762811928 -0.71113573460468871 1.359879766795731 -0.68521042442595481 -0.070502844239588275 -1.2275557841732618;-1.4837114737978505 -0.11728580906050526 -1.2395896622355032 0.043684663747816835 -0.41088680927780968 -0.1540760947293881 1.4692333642232203 0.22754196623153505 -0.079348675467849281 0.6963742174186367];

% Layer 2
b2 = [-1.7860440039223102;-2.1409079586425945;-1.5716941596746892;-0.85151241551318746;-0.57102707738150182;0.2453329278523203;0.9408212462990837;0.30495157138056239;-0.70319696008864285;-0.17643673185073686;-0.88234741586694421;-0.16082860935049054;-0.70575797756626379;0.12241061868657885;1.8413814518118363];
LW2_1 = [0.17681996605861872 0.49632471140358142 -0.24702209852257184 -0.061801333409589709 -1.2854894045510667 -1.4015105117213693 0.1468749256407178 -0.17592971614370359 0.15061193888390129 0.5343197012236699 -1.7387787420457086 -0.30238790277260397 -0.45641174307699151 -0.55971733868097062 -0.68759543124844824;1.1203632575288933 -0.69511536062116652 0.41645667020661831 -0.66118823307229513 -0.084048448020870137 -0.58565853922054734 1.2145792794854715 0.50414446556649017 0.28962644974742496 -0.034549872946752803 -0.037716778235516585 2.4589875124414862 -0.32971600854085659 0.59749588320343583 -0.97692917957656833;0.95516222702815734 1.4288704601821425 -0.82629006407704475 0.030194925950323935 1.1720223782594719 0.78579704596294531 0.15540876750928814 0.38175730538401792 -1.59835894600483 1.0808891507003846 -2.0805716362345565 -0.060230901100700264 1.2465367096638886 0.30515246718237954 0.08692485112593662;0.84575802997443672 0.68965779794430881 0.16857456058027864 -0.17994563928894514 0.44785331973930836 -1.4708727805384505 1.7076819906141374 0.054869958386359975 0.33744885240579259 1.8295017652918937 -0.64868810983348191 0.25135771529394635 0.66614491207832927 0.18099196522914571 -0.8944686324716663;0.76777158198486639 0.12658859015744056 1.2932778633707365 0.62250238860918616 -0.21019992701653126 1.3214191658507206 -0.94696205047728466 0.057595671532926246 0.32022004804230153 -0.63324898422249087 0.32634319531214911 0.52492184125315899 0.65252002439035728 0.18718559371441099 0.58733360415772973;-0.95802670932386236 -0.25690373362523106 -0.095993437685885405 0.078304225989086707 1.7947147242298789 -1.209031935227689 -0.029438164893914584 0.35318083874405481 -0.59875846417845313 -0.011757005850079855 -0.73630605636281332 -0.75806995881860362 0.11977878843820025 -0.41128205549515234 -0.53142773405985666;-0.123869486020146 0.0047155681680793315 -0.16000735239194441 -0.44963038437022917 0.41634459513650368 -0.50863821610702353 0.76308078157773185 0.16383034586023393 0.36264999294432976 -0.092585697323862931 -0.42029327584425419 0.76416989244070077 -0.79099805447300586 0.44668911080599716 -0.61788282626667534;-0.10535636102910201 -0.8553308714625637 -0.67893103654063358 -0.042600004210695791 1.2689295844307382 0.51242607268574258 -0.65528546810927601 -2.4523844896583493 -0.73548472256883035 -0.2430272804828687 0.81736186683511414 -0.37726956406154566 0.56079136434945032 -0.91060168163248822 -1.2825226887256327;-0.92961502450856104 -0.94860970505718423 0.54965897471483394 -1.1661425524999065 -0.083863399752734075 -1.0939226277476777 -0.2230636006230578 0.87409119497014098 0.69655111682326387 -1.2943721229040257 0.44070340849394352 2.8710642043513155 -0.40644466489648118 0.96404927780079652 1.8949799096714701;0.10032682398653939 0.63415651624204084 1.9905815881003341 0.73486411083959235 -0.24705379008404441 -0.59738816490951618 0.2696811993003792 -0.040712727126379557 -0.049427649629845749 0.2086362566341507 -0.27500708556450715 -1.0889221368846744 -0.97975750639775117 -0.53219909003431787 -0.1899124413521141;-0.7495216214475775 -0.44693679603954156 -0.54064469255027103 0.29906115040513476 -0.89115289943493337 0.94060847737488062 0.13695437170089342 -0.7323638420742894 -0.39010912131285647 0.93096421475213109 0.55561343943881225 0.32825087796304503 0.0083144671707203466 -0.32818575275636924 -0.3578558026682867;0.28890040677104589 -0.051991627415607457 0.33121092497253557 -0.48185580498079367 0.423872612861175 0.98830272139861108 -0.58219875207083227 -0.23378145977215059 -0.026003014263093455 0.60629343963717197 -0.25953484408413613 -0.64810889858094767 0.9663273899541025 0.069030052498450095 -1.2751894006644164;-0.91295965563434878 0.24984865964357178 -0.027594553972180472 0.74153887169308563 0.33096317670909015 0.36899982459785929 -1.0358762050335637 -1.3026318946082094 0.53722985993896732 -0.021625563953857549 0.9918642740383018 0.6974535001606168 0.57865403552316941 0.13466406008393839 0.66698939452351169;0.08712723575950021 -1.6039707264858418 -1.4711759611202699 1.1595580082462993 0.0070859968175576004 1.225853555928387 -0.34069623113299263 -0.59816746247972497 0.34202309594911073 -0.38285902999818633 0.61756031958236435 0.97853376513589141 0.55033099398873397 0.27271442106219562 -0.2159971871734235;-0.79904554125416649 -0.21136506501280705 -0.39807791103007639 -0.74433654253790515 -2.0982998700390505 0.83848313222748716 -0.21366581401255111 1.2110786511863918 0.88063669218146678 -0.10630471748235988 -0.61156414007235604 1.2915698908724265 -0.015396361097432396 -1.1651383456838935 -0.14757634894360197];

% Layer 3
b3 = -0.60616446786480449;
LW3_2 = [0.16322015443361931 -2.4098826888363361 1.0863360260116488 -0.29922514194534477 -2.3428692941131359 -0.5003356539875673 -0.56842643631229373 -0.27738309395492583 0.68786816017603292 -1.157569014302682 -0.31958720979350819 -0.63580793465985286 -0.36310517351408389 -1.3510188835946837 -1.8731503247203054];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
