function [Y,Xf,Af] = SOXVallarta24(X,~,~)
%SOXVALLARTA24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:30:08.
% 
% [Y] = SOXVallarta24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.412371134020619;10.4712041884817;0.00782778864970646;0.0208333333333333;24.390243902439;0.02710027100271;0.00630517023959647;90.9090909090909];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.0091645123988028931;-2.0566772292044524;3.3130130392757446;6.1758330540630189;2.0360356987312302;4.2502744456872117;-3.6413200902506477;4.9985972356639508;2.2179214942934458;-0.51919129828447175;4.2517866308147685;-2.2504025911766932;-5.451733142492504];
IW1_1 = [-2.6933439465335867 -0.11299900974154166 0.16210288624409103 -0.33937145132753199 1.9902431288473645 -0.12710585665549665 -4.2642086676921007 3.8897783447244683 0.035520741659329516 0.095926022209046891;-0.0037560054048806912 0.8600793841836798 1.5517344529355745 0.58817240704606477 0.70012703509233354 -0.53052784625471294 0.12914026559720945 -0.3505855163940591 0.50352037311790365 0.61990220178274114;-3.5356756021998388 -1.7372107677843758 1.4717159203526873 1.4535254845010421 3.1502050359387574 -0.94535893303969154 1.2877227482694313 -4.3467333321675277 -0.79576279055855292 -2.0980529177096057;-1.6062045218165202 0.063788609020399345 4.6061581616925054 -0.058686214872665371 0.054892952256604399 0.13960472538502355 2.0420397028603903 0.35302723628142046 -0.046025948914825934 -0.0030780996032562548;-0.58132086104908698 1.9751871198683386 1.4496184229107452 -0.76887369806605177 0.78840585788010309 -1.1526200226697711 -1.1634515910959491 3.4516749394527171 0.45054841588245698 0.51725946924620991;-4.1297017208931974 0.35480664845363208 -0.94277853423403024 0.11179773694213757 0.94852238239040154 1.7901931362717209 1.5082087441595955 3.705835070877761 -0.18267571413182837 -0.047361020645850425;-3.0862994746013697 -0.14828182939532492 0.71724000643014263 0.10784670402415475 0.36146056215835964 -0.78541420821129393 -4.4272300352438192 -1.1927269465939812 -0.24037423961932952 0.05877970708455655;-2.2258498999919771 -0.024889326596931223 2.2244525303285623 -1.3940198234105581 6.2253215041113821 -4.4913173950357983 -0.2681603009954055 -2.1313691869740885 0.28647053355504015 0.50698034373677836;-0.20167628060347048 -0.13546147851625276 -0.098348830389317771 1.5147021290852714 0.13293879231868594 1.0837452904127252 -0.56463260014523942 -0.31990258395672078 0.3141779416066891 0.5483797576407301;-1.7909505349925992 1.7431631372565677 1.5676592545190617 0.21014298514459773 1.0846562744739876 -0.5842277586437612 0.79174611157444208 0.73685004886150929 -1.3013360683086208 -0.20355686506044016;-4.1787100378810011 -0.069299132963510243 -2.7249840382169577 0.75510018007398283 1.3449685431203602 1.8778247013822322 -0.778175305897295 4.7498046647309007 0.16867367859390528 1.0125857508050911;-2.5417528033623107 -0.0021987534063356851 -9.532157892479912 0.63594128749502532 1.2540580804101942 3.1905998671244067 1.1657034994298627 8.5370894590689161 -1.2223111572082099 0.99563411823795445;-2.467531991331859 0.13917626661389593 0.054355595454683742 -0.32930429729916671 0.10185779305554192 -0.19363552844578358 -2.3730744452917407 -0.88910387350585152 -0.091669595949750077 0.29139440709341763];

% Layer 2
b2 = [3.2901793954509784;4.5777799471734895;2.1745719877193923;3.8211422021465262;4.6761287884040588;-0.39071631154846992;0.75991923596648858;-1.9187033606295563;-0.6978041870412055;1.8225935181134756;-0.57572824894999408;2.4416726541434852;-1.9727196910352274];
LW2_1 = [-1.7326752083053749 -2.2451360510198546 2.9823803155285242 7.4117480661169441 1.7728390214848739 -1.9688335700737041 -4.5032957156360869 1.0133881498443451 0.63335986486884222 -1.6839418210777812 -0.21686751655675457 0.38050598185131757 -1.300500851469172;-4.6728442360827334 -3.6795467929016046 1.9216976752647135 -1.4281277174291009 -1.286794843454117 7.3079587583989909 -2.4629736903381008 4.0311903452930888 -0.72260279666193228 -2.0918938420798452 -2.8878031507224402 3.0399714146010965 -3.0888686135036316;-1.5099122006275192 -0.99743909852254187 2.5200759896544289 6.539957352243718 1.5174202973096866 -1.7701895288092491 -3.8720472389670975 0.98235300439852402 0.97076060750682824 0.079159681388713501 -0.51678245310395587 0.37593103629043106 -4.9502500355716412;-3.6460502528093897 -3.5532067574828252 1.2269154911214093 -1.3510204091760534 -0.99580883549215482 6.7256261128798487 -2.8075650832437726 3.4207336411378568 1.7710524424861855 -1.6082111249686368 -3.7856890732041242 2.6973895227000733 -0.62735340580321741;-3.9711056935162228 -4.1674263068548694 -3.8306827122706926 3.1878821989762827 -2.3068019529921915 -7.3835624786041825 4.3718846279744676 2.7939517288655562 4.5386692108005287 1.8343021361929273 1.5456906788321723 3.3962942315913471 -5.1013385712609711;-0.36992421255861796 0.14592274599989483 -0.96770060251871204 -0.70555471132887315 -1.1498520541717538 0.13845253361966531 0.92681721592780231 -0.27706047511794507 -1.3566743973548741 0.99821025173414724 1.639356134833984 0.08968754600929002 0.23620401359960314;-0.28733309844691868 -1.9462141695925936 -0.0087787976463479557 2.0051007565522032 -0.018379506470699674 -0.87419717654770834 -1.4886538260839139 0.060789393756632434 -0.74787449944362649 -0.3941047709599923 1.5469304596072506 -0.25404959278716421 1.4377103159874811;-0.82563810589558995 1.1881585555903231 1.9346068576225479 -0.83071905768706911 0.10802435027529013 -0.81388347180494003 -1.0364230995746462 -0.25195033825347629 3.501029282533481 1.9585058709099332 -0.18344141197757599 -0.89055329425463459 0.19728550242554146;0.071243110222347361 0.80142875280922188 0.95692238431568477 -0.27212902157030666 0.82237810215661755 -0.18128048560237825 -2.47122771633056 -0.5293837546540181 1.4027909304201751 0.59281458161498535 -0.25902827811000378 -0.22741891528013031 -0.16277053435906463;-0.37659632135390197 -0.73413574840460272 -0.0031334683483719636 1.7431892214317388 -0.020013718021416854 -0.76013269202570144 -1.1952720555859107 0.047557564396280505 -0.6104404465509502 -0.40505375706568369 1.389533465782705 -0.20977880418142691 1.2552976372529858;-0.77430585405635388 -0.494399807315135 0.16030677678093702 -0.10784366881817825 -1.0254781596512219 -0.39317898755365799 -0.47269830653020128 -0.2308600935453097 -0.69985410559690608 1.0017040286404923 0.94049897599008481 -0.26843293359793979 2.985097508058324;-0.32683459181848495 -0.79729912000730974 1.0387834992487814 -0.24165172528834808 0.47950269758949926 0.61104128187379503 3.3796452345864822 -0.3975386967622862 0.59604228911847912 -1.7981861055380755 0.10743737236808665 -0.093671640547695514 -0.8209574280036831;0.091007872540523768 -0.28526626681071687 1.0530584009196817 -0.28670542772640789 0.91307825599515469 -0.153066374449426 -2.5551547809119741 -0.63772720605181943 1.4349719843343045 0.72881394790355725 -0.13135805610190862 -0.25912953328235483 -0.2154122848334607];

% Layer 3
b3 = 4.304443193310231;
LW3_2 = [2.989308260466137 3.2904522475224343 -6.7945851873399272 -3.3811651484139364 -4.3757511942333522 -0.070157523776325406 -1.2974735721535895 -0.069786452729961035 1.0099368963019575 1.72438819710411 0.74591577276692334 3.2204842365964343 -0.9458048177150834];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
