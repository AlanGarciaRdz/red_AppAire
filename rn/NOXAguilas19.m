function [Y,Xf,Af] = NOXAguilas19(X,~,~)
%NOXAGUILAS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:13.
% 
% [Y] = NOXAguilas19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.448430493273543;5.42005420054201;17.8571428571429;0.00666000666000666;0.02;0.0561797752808989;0.00588581518540318;0.125;4.5045045045045;2.48447204968944];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.775412368159635;-0.81802116324187657;0.94864720077306885;-0.25742337178521529;-0.20343265586419679;1.272676766226307;-0.12435160486178204;0.78244823490058746;-0.6585861406110276;-1.4280717603839754;1.2286869244006227;-2.8874539708750548;1.4268761243898707];
IW1_1 = [0.54106876826455552 0.25469797446655723 -0.13273495351143913 0.092472590320695228 -0.42252323692935417 0.66648321755346962 -0.58035361660082185 -0.072938199002608187 0.44517399227781168 -0.066145780395274661 0.57616720760695461 -1.0214080596577617;-0.36269393798222566 -1.4315432611620049 0.96772300550817125 -2.5490665678594859 0.20702632008989591 -0.4146855670156861 0.30301137759948438 -1.4562560712368355 0.28521160802372181 -0.098061142186462336 0.74901564612579574 0.60002269730358126;-0.10379328495933773 -3.8441928471750049 0.26000848842954705 0.59798226847580083 0.021663342486888351 -0.1037465153353784 -0.2350373002345732 -0.27139696776994826 0.050254566847985169 0.0049920367818841443 -0.063353875901502099 -0.48471174612833767;0.3008050292061667 -3.5453394801443241 0.15815783895601504 -0.48939424369909956 -0.5755038866529566 -0.24298088511550567 -0.16672571264375668 0.40008750872791965 -0.083335280733158268 -0.099433203521549787 0.32943514865675461 0.15040716648267846;0.10848666149804384 -0.26481702709423088 0.3256190865436574 -0.16479145061657657 0.95366735307397787 0.99427229193834332 -1.9622467377424915 1.1874523527651495 -0.19006167215275979 0.54203344848844603 0.50173048469318393 -0.042576672696619883;-0.49251276999304305 0.84703880009241683 -0.33911560143106789 -0.53376299805671024 0.13337312682988084 -0.067597144387174873 0.50310827861320706 -1.2281779122640952 -0.6908537268939271 -0.34753306000789508 0.81745761429967467 0.66310171594057787;0.54277813717611556 0.11769642115731417 0.10838779487862452 -0.8981925855472348 -1.1704737015096807 0.022364217169673337 0.064032275057146593 1.7132957155066679 -1.2383145493856271 -0.012256810249408688 0.81412595992186865 -0.25760153126466989;-2.1840624628686514 -0.21242254970553781 -0.23073544474844429 0.32747669833949572 0.96766769885267501 0.40438369214785874 0.20292155792237609 -0.76567571243517973 -0.085326397253916358 -0.058510492873425572 -0.046992567055066707 -0.43419211515231404;0.50900659889603783 -1.1102529064858861 0.57253072145834849 0.19905304035742299 1.6484233526244907 -0.25343126548592543 -0.69583344492305355 0.21157918801927289 -0.78204570205216906 -0.049573120935749886 -0.89573253777351658 -0.28879597464028756;-0.029003920745069613 1.5100794703368776 1.0567756982784104 -2.9758674337244959 -1.1225233909972541 -0.75435352396028565 0.088167651524244162 0.66303061097654503 -0.15526308978776368 -0.23227622930644803 0.88219900786806471 1.0753887961604069;0.32958079523349293 1.1179818288950973 -1.7504698118743709 -0.52998403126252214 -0.31581375839447789 0.20815238488072216 1.396082874263793 1.5370478118280426 0.11446015894606121 -0.66372190971844358 0.3926855006631696 0.6846932368404357;-2.1172836443222383 -0.039026700097563635 -0.44702764361690983 0.51607398700643881 -1.1398670399145101 -0.0083762242244986157 -0.46664396261863439 0.32216390424778008 -0.4676381241669455 0.25365602551316996 0.23809603854866049 0.15246729858223673;1.4433284463376044 1.2505200289584697 0.58210257017668998 -0.13058353305457868 -0.85145896608583937 -0.65982226379793862 0.22076783342224143 -0.93753054736274311 0.72792837914498842 -0.023831315287525495 -0.13462604393864067 -0.0054346016040087604];

% Layer 2
b2 = [0.76407750465961088;-1.6506292441422501;1.9542570663408478;-1.3566681683287012;-0.72043873320764806;-0.57163350610733377;0.12455757831261446;0.37972492456614043;-1.742302270183856;0.69110395026294769;-0.45806214241484844;1.1165783337577224;2.1547537371266068];
LW2_1 = [0.11173148178433448 0.37715494309521214 0.44153385803460715 1.2142877734045205 -0.015046494607225909 -0.40753869596020326 0.034765953190534063 -0.53698633257315831 -0.29694005647664973 -0.67311797645602667 0.71095352631715303 -1.5973602294926703 -0.54379493560552772;0.46654989796348667 -0.50396357987310336 -0.34077437687601225 -0.14373987401786903 0.12096260258890636 -0.72963574667910636 -0.4448703232119684 -0.11095425479191225 0.062861299705692722 -0.048825613916684163 -0.16863964833153949 -0.55075555430803069 0.56123152694389555;-1.1081734996753647 1.2233188422603087 -0.63365733539398394 0.23320033039204854 1.2934832972894705 1.481830992218826 1.2869994834132734 0.97858210578383598 -1.5123207311636568 -1.1776338985079506 -0.45781617391213991 0.023147832825728333 1.0507199928041946;0.51782462337612056 0.28738627627663899 0.46545366126433363 -0.70513792356053917 0.12529719513916854 0.10617705408163869 -0.0430747061767092 -0.52403807276108805 0.014610109171712189 0.11431992102529671 0.91623178675516959 -0.75392512028791403 -0.9724400809078817;0.74428180806411182 -0.14787738432520453 1.1730943416271962 0.59640781223316575 0.75882240181534621 -0.48982034251085715 0.8912047898636315 0.8771957397576966 -0.29992472831291361 0.58599248342102217 0.61141201344483564 0.74072959879449218 1.1537851337495155;0.84036189502466319 0.16855937502055043 -0.41762420840955816 0.74092653009749132 0.37868128075295382 0.84710729413626584 -0.27249290594049147 -0.54834947171533177 0.072345386685649132 0.028159754834797924 0.9214197883047639 0.85516495646123392 0.13351249270761134;0.51595661230165268 -0.56064654868477071 1.549477886621228 0.51020087020723714 0.67296276617670037 0.055787387215134029 -0.085900087462879124 -0.2637947994731239 -0.16287138400536541 0.049442631890816727 0.2493969749097818 -0.20543738388169647 0.1915922654155921;0.029438937043035702 0.44128945832535954 0.47953560020054531 -0.33584073708397316 -1.03905316942973 -0.27023556672218169 0.31486984578786098 -0.4296250817801317 -0.091989522325625919 0.031254396048014818 -1.112163932026683 0.15233428011749972 -0.71139090439810482;0.75875588676062322 -1.3121864300356139 1.305812831196475 -0.90470760810948136 -0.5384525826669776 -1.1649766331266898 -0.42551432025105096 0.57619877576096412 1.0264339397086135 2.1930409172977376 0.83884035175055494 1.1311518876065652 -1.0846943523274222;-0.34843637968153401 0.2425888815085713 1.1848814054188337 -1.3082258109800575 0.45655838489541406 0.49705980172794567 0.021528705212759583 -0.32840123655050324 0.17278007629290371 -0.90805156736246595 0.1170539510816756 -0.45933563716068193 0.84589592832676597;-1.1964789118339916 0.39656009487584387 0.58031650858432582 0.42722230301340747 0.035154026277688682 -0.26028187769318101 0.35027813637098032 0.13412927681109504 -0.15121930945063258 -0.29803789525436786 -0.58973602202683084 -0.40715083807590474 -0.026907410423258768;0.70396257418162866 0.33124621908749025 1.0443106629845456 -0.67968899288175755 -0.078459963586974227 -0.78253701188408675 0.52823509152493209 0.5947964594660633 0.13939445453901292 -0.0075479617738277854 1.0554382694216187 1.2652581613633012 -0.12583517332729968;1.0530981025649533 0.15103871807651037 -1.3510029341736862 1.670206010587455 -0.37334781387332416 -0.091398062042679945 0.030449565092505175 -0.30229947213089881 0.89161157028365912 -1.1881909019865504 0.97560122093913215 0.60212087464998487 2.0098405027019859];

% Layer 3
b3 = 1.8778066894791718;
LW3_2 = [0.49024178781849592 -0.57144760517626136 -1.3480008276509869 -1.3443924944874832 -0.23437033940809932 0.68000957770353476 0.65549025425219842 0.25287757430861396 1.9711459977286854 1.3128132528921945 -1.1995647636685802 0.27549610698424437 -1.8246860904915239];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 5.42005420054201;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
