function [Y,Xf,Af] = SOXTlaquepaque5(X,~,~)
%SOXTLAQUEPAQUE5 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:54.
% 
% [Y] = SOXTlaquepaque5(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;3.03490136570561;14.7058823529412;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;35.0877192982456;117.647058823529;27.7777777777778;5.12820512820513];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.8835667526200255;2.0813541823805255;-1.1856199892970756;-0.94299442653057486;0.55408655525472938;0.2534387508813899;-0.44961340595813648;1.7480804001661769;0.46778066586531286;1.4811600322320664;-1.7677762885636612;-0.99868564862147213;-1.7699201834566727];
IW1_1 = [-0.52838806753145817 -0.25703938019199912 -0.40981692067024228 0.075817799558594509 0.21938146610149598 -0.53743809188275926 -0.54553300954262196 0.50856638255515685 -1.2564598671706659 -0.10378929890429416 -0.22748838861888807 -0.35479434084602979 0.16672448456511885 0.16151134795107894 -0.73854647656657069;-0.24829401772111059 0.29644717335776016 0.22853367855770437 -0.19414255278444867 -0.11140136791434592 -0.077565142708967652 0.19249266067259363 -0.84196994075151732 0.53561775956673885 -0.13983013990912513 0.36208601681070868 2.0682395384351793 0.16838306451855628 0.27350358344256265 -0.14055697988641974;0.34111630772436496 -0.73837124656738573 -0.55969289775967623 -0.14034046954190993 0.4891566398568471 -0.21914617637769135 -0.34120922164911738 0.74754955535128931 0.69166546761640813 -0.72365068535234189 0.23493479629261113 -0.05897192229042339 -0.6652163186123764 -0.25573634406611379 0.21583139691816475;0.40346870445866817 0.83168119562635767 -0.015873850894226344 -0.026666054234643632 -0.35208045459031273 -0.50672427112611951 0.55179927196594314 0.12142760297679904 -0.60679706814643219 -0.45773725521655989 -0.53856235963800991 -0.3777689874345051 -0.89092298837165218 -0.49694301787849932 -0.21783922242752876;-0.39549989432524635 0.019393843795017719 -0.72994422957193206 -0.0018920919671673851 -0.020987445474051999 0.34489835232898786 0.87454320702484323 -0.10691037631381697 0.6490023712357833 0.31054090025847031 -0.72487618696979395 -0.48949336431300894 -0.01159749366498263 -0.11430210974006434 -0.29092264089253966;-0.55724365683631483 2.0876685358327651 -0.24003437556256418 -0.62416468954529181 0.069945958605204292 1.6020892027271041 -0.21545105206316864 -0.43129012193159438 0.24274833850269967 0.13079092064718165 -0.22369386651717574 -0.60213857152607753 -0.14439162096494346 -0.15233845744594771 0.523388644631538;0.044429897105931475 0.67320885666908503 -0.24753414058316989 0.21088099617187195 -0.91835893128636525 -0.21185732894417783 0.10383636699521767 -0.4250000288513569 -0.24948919569385339 0.21113853510020938 0.51989183117078386 -0.2884086431100556 0.33732760356967778 0.31167668592640241 -0.019746970630514858;0.16065178950418402 0.036576536239184054 -0.26289697872372392 0.17918063348470481 -0.17504868152002634 0.01579947036849012 -0.068269988888557898 0.40224822697856244 -0.34774823984089454 0.10226169395405618 -0.10311599291091031 2.3568050581557354 -0.0029512079286669246 -0.11306791169584693 0.059852048042776732;0.87902730142407837 -0.095646406720756694 -0.26132383364633599 0.53131019149012881 -0.32723567230122164 0.7639478440655475 -0.81033351042046708 0.20507379713613511 -1.0268183135498221 -0.14281677295416095 0.14475240551019852 0.32499965254096863 -0.34398488360238461 0.21692482697317092 0.66789280461212397;0.79713777895822036 0.64847055281794885 0.098066650219456458 0.67100586468090673 -0.56557919075445739 -0.063001021820075415 0.013110787284892263 0.53929606182155942 -0.8733099513428817 0.48930048228859857 -0.1400328700925671 -0.2299528521203833 -0.092274185831529423 -0.026208669672287129 1.0310726615338588;-0.56458153025727331 -1.432026817080615 -0.57974161579595029 0.70936823377049696 -0.38782315015428198 0.96463205494758375 0.73911768385322729 -0.76825972123187514 -0.58292422891848616 -0.26428308050664123 0.78326397199954489 -1.2780558852171529 0.14479652031137735 -0.57724143740900291 -0.13902156644099162;0.95130805594663781 -0.29690292132483842 -0.29143756206292815 -0.48933950450897684 0.80219184053889769 0.28595008432530594 -0.75766791513838228 -0.028386113744624221 0.41599403974371313 -0.20204281116614509 0.76704460557564236 1.4904667599931691 0.30393060411682082 -0.43414795966408176 -0.35683203168305366;-0.14038636785634068 0.32322058686085214 0.55399184460753748 -0.17181586083525216 0.48175375360493067 -0.37877605796173924 -0.5910812097531557 0.59760615800551986 0.33282715772529547 -0.35583904867697813 -0.43709395307117083 0.50561756989271323 0.67884396861799878 0.52972782744521374 0.087883173418023763];

% Layer 2
b2 = [1.8580453186563495;1.222627133029196;1.45111388828877;-0.8839094946067324;0.96005804358277147;-0.39639990286606419;-0.22449037533471355;0.87225820167402779;-0.73295644635855983;0.74232163893156788;-1.1749942743657003;-1.4548941846561247;1.9899462153221583];
LW2_1 = [-0.17699021437239781 -0.18029105534535889 0.41620805622250401 -0.53464904954944936 -0.17200155137989484 -0.2162380673589768 0.67802371608719458 0.81024785122518472 0.28228157888209676 0.39408839334802759 -0.25022628657352469 0.60527516265731685 -0.69205776817747577;-1.0531459135091514 -0.034317058659483771 -0.65011181652678052 0.53564156459994439 -0.59587744563388134 -0.20856565389464199 -0.0055483585509609233 -0.109467198037216 0.92896474203235713 -0.53955872516699477 -0.27925830785822697 -0.64567031596158464 -0.37892270587269516;-0.34122462310424073 1.4037618684965547 -0.056912375981130685 -0.34352309930284641 -0.49548740345285452 0.029727696051002252 -0.63688085316542697 1.6665699990635019 0.27617202846996236 0.35873038332301621 0.10700323367077702 -0.56013182436793663 -1.0717109103224414;0.19550618420803967 0.71421665972137349 0.30827540831092826 -0.63799579797400496 0.022583656719655575 -0.17574685715323107 -0.26045891859029713 -0.68408468872930195 0.57089823639408122 -0.74527606693322523 -0.69663152642131732 -0.16859317530589257 -0.026902491721989136;0.15040499413700245 -0.2709227287464222 1.1734403259283803 -0.77218694769277307 0.20852668941931621 1.1100602027126387 -0.14160367106950242 0.042126010334559559 -0.47158384191865071 0.84243720637613739 0.98656945606866608 -1.133853592443882 -0.73733295208259153;0.35059691081461125 -1.0336240885601429 0.57279131544002437 -0.2863477064044897 0.41780429403074909 -1.1520056660652853 0.072589257901200424 -0.071009794690640282 -0.39825397036006033 -0.33638523378192076 0.25039966232602845 0.4181252093050869 -0.42527707558228522;-0.31042305489440963 -0.38972068176106855 0.32478206694128664 -0.55914852972522511 -0.60520885487692888 -0.063725117896123812 0.56412444587607602 -0.45952570212352656 0.99524708366131931 -0.24059436797820932 0.2308414959032184 0.031185038089206276 -0.47799937714322377;1.2202625750087694 -1.1807715990116996 -1.0257836135893066 0.63925417875453072 0.11878026417367718 1.8456293248512108 -0.56581990412836403 0.61578065310272778 0.90362209959232787 -0.9388394785642884 1.7234795217259722 0.22572971436897643 -1.1786121967166199;-0.64439895847675022 0.54324084431798392 0.33644090187038445 -0.48346965203049713 0.50945110386795633 0.0099650005721706944 -0.28232876125630813 -0.81074206703804763 -0.53289826897732606 0.6197169164658507 0.32336567511551306 0.60504084593571872 -0.23347811537000634;0.54362112387235684 0.39297239946270002 -0.046970867754429574 -0.32152482997652443 0.18859525696226787 -0.36237742600508127 0.1907842952667273 -0.10270277527537663 0.82017489118801734 0.3428456923733928 -0.18521907823713252 0.26691360551998916 0.28504215112770881;-0.59179554717472804 -0.14085928709324533 -0.54087345383259089 0.22823852297938829 -0.48226035671549244 -0.16223213479627854 0.87597415299090808 -0.34730532097195144 0.30172891053806372 0.45679046388204819 0.3275890300665254 0.73593597525295429 -0.19082144677443197;-0.37466014470271353 -0.9659044590950262 0.23745100326171761 0.26205266648894776 -0.68110826331203178 0.33924708132289694 0.43611087642489155 0.034033071595075917 -0.30915549554996385 -0.029632272315485517 -0.78296342799747531 -0.37611115423647501 0.080267451756047867;0.34156577327783938 -0.7033119715460725 0.37196176636437472 -0.1202182121990967 -0.53175660613095155 1.1002061790415669 -0.25463877092598952 0.22866927913704915 -0.29210110028770864 -0.031815411117427479 0.9902472116253177 -0.15242868841024354 -0.39107100668814537];

% Layer 3
b3 = -0.6425833578846547;
LW3_2 = [0.54652530270691968 0.74056126951627188 1.0021802741153074 -0.0031340938932204504 -1.419168835466138 0.037168547846512828 -0.15724324310315049 -1.1680066199021633 0.53971029994397934 -0.70242062158088636 0.086258832137684469 -0.044395923506487217 1.2178057955749593];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
