function [Y,Xf,Af] = NOXTlaquepaque6(X,~,~)
%NOXTLAQUEPAQUE6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:16:17.
% 
% [Y] = NOXTlaquepaque6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.03490136570561;19.6078431372549;0.0212539851222104;0.0523560209424084;0.00632111251580278;0.294117647058824];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.0613370185779365;-2.3090345093687441;1.7482633967392029;-3.039251173998716;1.6450775592076692;-0.50645654676346574;-2.0807247774502842;1.108092994247724;-0.48601110944188874;1.0142041482650084;0.73896071208835745;1.4539133292039959;1.9052591013637146;2.1298198525122634];
IW1_1 = [2.435233961076789 1.7160514669098255 -0.83631906391035526 -0.52503102355223419 0.16065569946304781 1.3772158998838677 0.3391616059118765 -0.80895654073255252;0.91951727745384448 0.616654795270694 -0.28087956676516512 -1.1991236123454156 -1.4286533272510458 -0.61570389756134103 -0.10956123480602692 -0.20576331003476289;-1.0719406177504756 -2.6461707578331519 -0.12977586048813994 -0.83720886998807464 1.5149918882967357 -0.15316065671659235 1.1709614424889305 -0.096690138517580654;0.040220812606367257 -4.5430267961671209 0.006118902273623843 0.057638608853683007 0.18645025171106941 0.48486958082678783 0.054465599171318206 -0.27767331364527781;-1.8546114006396772 -0.010639564253791131 0.2284390173527458 -0.81088138973319579 0.76390745378150582 -0.15656874299044685 -0.33356205376135634 -0.38905461526774054;-1.9836326244774918 0.26220633870555465 -0.5752533583685554 0.46922308806227336 -0.8648939745242723 -2.1260360409550216 0.12877892668535018 0.58223667102220522;1.254022518293558 -1.1904132157790721 -2.0057718279280299 1.181208857506622 -1.3058709168149794 -0.6274774928988377 -0.95722629505223489 1.7951090746331553;1.0544371266915702 0.12157869501183416 1.8264140753850144 -2.5106295493786339 -0.18360781710854079 0.36452523819260796 -0.59567438991363919 1.4117186222610174;0.03190351149604579 -1.4186333644918134 0.22345711727981848 -1.0947171381607852 -1.3340738296409063 -0.58319808247129146 -0.45267393396661387 -0.24671709966782029;1.7863414419148438 -0.77902351036099271 0.66143816421285273 1.3034175178532832 -0.58322463534518731 1.0533674687387213 0.02522068823670387 -0.22898547320569412;0.27558629945729934 0.72343584581094356 -1.139626324560816 -0.48383848797627005 0.19827435085903411 -1.3583318045401691 -0.27576841239673833 0.24066996914690322;1.6054346997191293 -1.313094040341594 0.43161430906290077 -1.4003717228002448 0.20036277510695324 2.3787670642632772 0.28985921587874608 -0.10500571875891768;1.6836251086219365 -2.4052828047749708 -0.22398885537553692 0.46906923390898914 0.22261587618147013 -1.7024742015781904 0.15453535009618311 -0.095605475737847376;0.68892285473767767 -1.1258591105964373 -0.74390013019114809 1.2709133141874196 0.074725522318148357 0.84049085791474198 -0.00015901498863186286 -0.27185736112068387];

% Layer 2
b2 = [-2.6179538281303949;-1.7701905662429127;0.95679791628578992;-1.0943052628131116;-0.60393265724084588;0.91111081399366711;-0.82506788721247448;-1.2117862377164792;-0.98584042739153077;0.80615585173351378;1.2956511957265591;-2.7562130359120065;-1.6973394011957827;2.0931590153720121];
LW2_1 = [0.78034581535365266 0.082802662631661222 0.33073015907584968 -0.058419147905856644 0.073525983596854388 -1.7883874344482382 0.053985525292304312 0.49654103635473806 1.0777440012923398 1.1355057906057759 -0.64826230333864976 -0.56163484971947342 0.70410460642809325 -0.83456932380080429;-0.13766868161482301 -0.37322189594300104 -2.4895282119594979 2.8470208838106679 -1.1028373259746986 1.1956785140881694 -0.30813928799765555 0.48378268042694939 1.1660249381735961 0.70421126680226909 0.26275510428143073 0.058959216523291932 0.094323897249857902 0.82171804787740443;-0.19628114706298064 -0.76120490479031611 1.5671740212381686 0.31313914322348202 0.07517104647994767 -0.33298996875929288 2.3212265898529854 -0.052416124143956591 1.0221091734344636 0.55593846089158405 0.58258729339371607 0.134810928049789 0.34590961951314114 0.5395444255818006;0.9949790363901525 0.81615675750859351 -0.17864658234627667 0.14293959548359461 0.059899506030842209 1.6749792383137767 0.93887222187209729 -1.4892769951530667 0.52384521001210782 1.3285434299055374 -1.1497618806911005 1.4217942495402929 -0.49364003238428944 -0.93886619733822929;0.19133289223670855 0.90639823841931033 0.28961102183980486 -0.25808817487233604 0.86911944245307282 0.98822932117635176 -0.25022588144951069 0.13914582880918214 1.2589744166017387 -0.86887334595614185 -0.55621055344534398 0.45178258364470242 -0.74735838069225002 0.53543534684937766;-0.47841727804509337 -0.86297316375270572 -0.54754487680924036 -0.39610710812917926 1.401494556110749 -0.02745893193218122 0.46338142111047376 0.70670895329094918 -1.2535592480127675 0.16966499143923705 0.35216833772279438 -1.1568053524023489 -0.13957703035352254 0.85459664105660216;0.51370786576210303 0.83943447876732113 0.38470277602164604 0.63609892948294711 -1.5445886640798432 0.42166350467082125 -0.99943943392208856 -0.47369967158081783 0.96696048972880699 -0.0035420376547722621 -0.24049101472454074 1.068460216586592 0.074899321722497081 -0.54600538331234927;-0.22622876605027853 -0.39874305977525931 -0.33615222146021173 1.5584745597830303 -0.86398076534217294 1.192464463307559 -0.28243321133700067 0.42975477329301404 1.2161115312691815 0.87417167941486595 0.1969642530230748 1.0218897435952672 -1.5341756126640407 -0.35583539919250129;-0.30103203726338479 0.53016940735118856 -0.33795301561830132 -0.98985526109762445 0.63278508240232179 0.42230537102981169 -0.73924043477470636 0.30115254958561694 0.19255565559240428 -0.14566670062076992 0.85976396598383875 0.061002416163623903 0.031810506513858167 -0.44616944759137056;0.20596810604441065 -0.27581111297329491 -0.40223744104108411 0.90460730422092384 0.091003714616021428 -0.29065332867159654 0.17182206712607689 -0.1535099661830176 -0.52713755342506274 0.31749567726622574 0.42860666471249326 -0.13563313460063095 0.18442035374560156 -0.44155103464347834;-0.026925000295439941 -0.62283193789893809 1.0637857154701476 -0.6643187427617907 0.74440658670514526 0.78193821844411271 -0.45420551825632993 0.10630625525571866 -0.51582322534773428 -1.8642567742549119 0.52578477698658022 0.24562005336703438 0.17462641044406343 0.69648147037116126;-1.5113130716603578 0.46510962526598604 -0.48053268947432537 -0.24122958460356309 -0.23941039257504121 1.8458560613645325 0.56664360678367431 -0.40946603209473087 0.23638544184970947 0.1733787749970303 -0.1646022671452991 0.62549017821951103 -1.8383439978957326 0.31238360699795015;0.42141036053748215 0.22906026347224781 0.33530380238621871 -0.064553126137047848 0.19629754751437201 -1.2648991646991956 0.27667808719731407 0.33549630941379549 0.74959433527644392 1.0433733282831994 -0.33603202180513103 -0.87079348541542256 0.86969000935576979 -0.76375192720781626;1.5440834656847964 -0.53174206090348963 0.85498489632162622 0.0034791689377267551 0.37234888905169872 -0.99968598228821759 0.23690270872573049 0.50379980740557362 -0.81502684404250547 0.063392593327843139 0.76456156942080089 -0.84539490239309012 1.7116199987140843 -0.15217389437267803];

% Layer 3
b3 = -0.10312570809897618;
LW3_2 = [-0.59442095895456148 -1.5594210345255222 0.16966018477820308 0.53174524831199577 0.18307353577557564 1.5287302674000156 1.244175726275055 1.4148936564385637 0.26452763158324538 0.43156986224364263 -0.81182139365611916 1.0976635986539007 0.69115809360317848 1.0558118506825338];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
