function [Y,Xf,Af] = O3centro12(X,~,~)
%O3CENTRO12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.4288682330343265;-3.6390618644118358;0.25800010182247152;1.1096067079526646;1.7479108795541116;0.44253775642955395;-3.2479779534620312;1.4177537907417002;0.1880562817971857;3.8786957567695595;-0.7637752438267843;-2.2811989282589402;3.6218610483479443;-1.7173226421265582;-5.2121563950921841];
  IW1_1 = [0.35455962371079569 1.2287901340602612 0.39209707116973602 -1.8927462432936806 1.2771758932162556 -2.8178232286189777;4.1157953682794428 0.085716686486140323 -0.065757371392459379 -0.23784056332455367 0.10140808991218576 0.058262697832902513;-0.26466724373912165 -0.87588570005917632 1.0793932350208808 -0.8747014800191617 -0.87997702176105108 -0.44727621650312832;-0.43065345977808611 0.82027580624277785 -1.456316501331151 1.0707230310351019 1.1593864295058136 1.1855847645983326;-1.5395657065457995 0.77368973174703326 -1.320438772822909 0.92634752504389151 1.1042352664569548 0.17882971427176333;-0.40650842430234196 -0.43302623242603633 -0.38714653901420842 -0.34653842715529071 -1.7510310755676188 0.46668254002703335;-0.8272962585889736 4.2659522586745684 0.70365367551190383 -2.4290232341219919 1.1313439722514924 0.69310749077175215;2.8587442934622391 1.2280488683755628 0.2356686222399661 0.17881923330684293 0.32911815884099771 -0.86571589696251572;0.13242638890346442 -2.4664321574271848 0.32107017098386087 -0.83986279947453135 -0.25979439688595046 -1.8059110366890561;-1.3178800943682856 4.1814347305205901 0.70189542331087784 0.191162540120974 -0.56883690689558786 0.45839115448799861;-1.1475930485238242 -1.817903760306298 -0.90106230997222225 0.020645131447401665 1.7180567657266612 -0.81720330485440262;-2.504333637803895 -0.24561043485058684 -0.047672987953705614 -0.070437678810550894 0.52479644933156333 -0.17274352302048079;-0.017107936704605309 -3.6902687021179212 2.429686290282568 1.0716005506073343 1.5356257555628585 -0.72574774449431845;-5.4101103132406045 -0.49654355147706186 0.21886285734713337 -0.45023206780143671 -0.79341880569187184 0.58783982317340688;-0.45421915250789208 -0.8649994049883859 -0.067334780844637065 -4.6293248980893225 0.1058555077367867 0.14697310286268253];
  
  % Layer 2
  b2 = [-4.0514020955858712;-2.4609981623562929;-0.91977189748561217;-1.7866897443409822;3.8203736942715225;0.80627693370933073;-1.4610235748164413;0.69989912211097349;-0.54741447578346603;0.84258909189422226;-1.3858303546588771;1.2480966905152731;2.7508996746965728;0.72231583969631441;-0.13944810853212594];
  LW2_1 = [0.045303628215176854 0.36868820166010174 -0.15540252817389566 -1.1652435029308561 1.5368867334410492 1.0494564156740291 0.13810529552358497 2.3052911960113196 1.1611808693073418 -1.2036934477345722 1.0239689721736798 3.2091565758011149 -2.4918751723337302 0.36748308568422733 -3.0215521210280007;-1.8545540428745857 0.38677408273313552 -0.11821306338043558 -2.0089152958596199 -0.18056514866501755 -1.3059621750058326 0.78806879078010372 -0.084165452880138852 0.15145801311252319 0.81061725119385175 0.17796460478319154 0.4091959234996827 -0.26924691027757869 -2.1521529900901282 1.4567130011842671;0.25270940461257169 0.46714317248981574 -0.032781388976515675 -0.28569002295071588 -0.19183855563787133 0.029599807913398495 0.020951889575215883 0.15385759369782406 0.057815764879656451 -0.051898760926798085 -0.50972245628450286 0.11582385233302797 -0.035419027961159658 -0.78296918616569777 0.29082649029458196;0.59481084169039389 0.92888370845916113 0.37421209070413042 0.3290569963494368 0.68316780766157337 2.4028325578454721 4.1481542803286429 1.4641780766647636 -0.93372896135562844 4.4310205654529282 -1.7270635465714412 2.548144177780717 1.3208922529262033 -0.59063770455524489 -0.72620221641694116;0.2243148585415074 0.041134820892956996 -0.23395048728071149 -0.28971192366023701 -0.47336288362635714 0.49710101377575633 -1.0316850955761616 -1.6444954530339591 -0.93946147092748389 0.51446377742489613 -2.7862249356946496 -0.3933130404486328 4.1632099711959736 -2.0860005892480147 4.7104427953626544;-0.13136955990020682 -0.033579255900862831 0.30520632864680736 0.40276148318969707 0.12310808265882352 0.047709012197618736 0.076677000545060811 -0.020844102681138288 -0.19465485479900951 -0.078394546466873466 0.33767162502576686 -0.15170702790871782 0.24749838549125194 0.15733684969822373 -0.37945258290298534;0.28148102251694412 1.8757879768188004 2.8289331595335736 -0.013671841617448638 0.032406830163944716 -1.3905519150517847 0.08803641132079594 0.59381813750507695 -1.5436230519533622 1.9727547577360749 2.5111708638544754 -1.1289286050496776 -0.91323836808997072 0.90557731983740286 0.48356219496838843;-0.67519013500773117 -0.80591387828885275 1.0641335351341916 0.26073267041075165 -1.0777876855198782 0.012836780051932978 -0.37471492837115605 -0.37404203418680426 0.02352350486516553 -0.041806284949140959 1.0919008275737996 1.1636260733052157 -0.75794488384574543 0.35193966595445619 0.42821008407522643;-0.6008865038205301 0.12578010132870218 -0.76446562866093948 -0.89370603009772676 0.62514200837018541 0.16340248103215155 -0.66649374758192292 -0.21621326033679425 0.26965684956089281 -0.13682871420858927 -0.19197081886136916 0.15450595973272083 0.65264482888089048 -0.45037607782915201 -0.061326454612878875;0.11158963179857125 -0.6256236566131762 0.73055562430190224 0.60320192475973156 0.77069392110952495 0.27849025938004751 0.19726079823526402 1.4794363896307858 0.27673377823059853 -0.67419660364981626 -0.49671825337857523 0.33915029514141615 0.17586443863177265 0.80051560542441491 0.0051223448059434067;-0.68357544292325567 0.35608977990051283 -0.16537492513967711 -0.72787877696093872 -0.3684131602794149 -0.22385236593610713 -0.020893513149941131 -0.51020841069999623 -0.35031305827743897 1.0689146072938585 0.31066053882406569 1.3957127679766905 0.10942892470691128 -1.7721511974822495 -0.006036666648343729;-0.57207490118325133 -0.38331535965550528 0.28080140980677298 -0.27573447400585471 -0.52758790170259628 0.50293403170445594 -0.068053070461245646 -0.037492621126919277 0.54215448972153812 -0.67254293047432478 -0.58971167549308789 0.26541278137072699 -0.62208740610327129 -1.7305510634180667 0.1842047961881057;-1.7769160837858475 0.16471871524470208 3.391057007623425 1.1800525206399108 0.98149535309722158 -4.3939670989756001 0.34221917903684346 0.58404792165844177 0.736330128814075 0.68890288448014769 0.32262966543565919 -0.7193420680714665 -0.86008024418377649 -1.5422358883046308 0.9401194270508858;-0.59249975545801892 -0.65569074048258724 1.1400121981824214 0.33817864740972131 -1.0953746349662039 0.094197622934487635 -0.39749798735375536 -0.33871034795399907 -0.045428363250925682 -0.22259313369744532 1.0308257515923192 1.1765687846866635 -0.62625615864165995 0.46907745054674027 0.39303859455887236;-0.52694139174685795 -0.20305418741187434 -1.19393481917813 -1.0391728021863287 0.35772730588277413 0.17431799257108163 -0.52277545859814456 -0.52483458053206367 0.49545186748596876 -0.39778246308044685 -0.17369727120589915 -0.42820750386583845 0.35766602976417633 -0.12040822990441434 0.20250154728608463];
  
  % Layer 3
  b3 = -0.83579280689953728;
  LW3_2 = [0.2655973012847333 1.0325405315383769 1.1100907544679504 0.34910772332582901 0.26745624591127287 3.4357909205840489 -0.97647245369713875 2.2467249354561445 -2.1637488495225252 -3.5923857348306854 -1.7796393354189548 -0.83576370896734398 0.60531576336828363 -2.4365392930293526 2.3509907123149545];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
