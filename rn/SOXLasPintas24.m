function [Y,Xf,Af] = SOXLasPintas24(X,~,~)
%SOXLASPINTAS24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:48.
% 
% [Y] = SOXLasPintas24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [-11.318702826576409;3.4548363120781014;3.3011989428989126;0.087978411448450283;3.6685184592987881;-0.042539322862642268;1.080895053498494;-0.74271237910743626;-1.365740096036512;-0.92009433029821719;1.8436224502856937;-3.1832149913778141;3.3005919023248609];
IW1_1 = [-2.9789655324858431 -0.56801050777221518 -1.0898258104841543 -0.29736005975392482 -1.3848404356816015 7.4210743085829156 0.63470243096038315 0.64527395706387547 -0.50020961100326555 -0.64530074750576216 -3.7096073013213959 -4.1239420447427744 -5.4116520692137868;-4.7163541238826596 -0.78892278804523086 0.33715103556564113 -0.9524415503282585 1.0856037697309751 0.069678324491252303 2.3883152153801079 0.37180967092527112 0.48735770178033289 -0.20174393446018832 1.3346202485452565 1.5151077547365992 0.1397858051648278;-5.1546847900115385 0.029029022178518292 -0.51944629879876758 -0.19860009209500246 -1.0606817038059464 -0.58227878503702046 -0.25632484085649448 0.017821270117661138 0.38678548781282179 -1.1608885815188104 -7.1475411737728645e-05 -0.73456328715610053 4.0832325950640245;-1.5626182301726828 0.32974563860555106 0.051133662364420414 0.61089125632250396 -0.16922540815824588 -0.27171685476607971 -1.2496617818803633 -1.2994922723920121 -0.17429708303942212 -0.00094107095403277163 -6.4865155946964528 0.82152306977996237 5.1966973230697997;-1.122446552761992 -0.15028442744227588 -0.39766448782584962 -1.0657293243002464 -1.0022934023025674 4.6772960295947019 -2.6706123639423076 0.28873265331086923 -0.57160938787914561 0.63730870932149408 -1.0206109973314001 -0.3425921698113682 -1.6729101400334405;0.9860757167422981 -0.024003358579809453 0.014327109585090923 0.15599175218871253 -3.6459024981276866 0.029268017981646847 -3.4395577022346386 -0.077834355878923511 -0.031654864998405634 -0.090097972531731962 -0.49491489661160282 -0.70210782807182825 0.77893069315988539;2.4587062293345738 0.051824765728572864 -0.91134042080121191 -0.064007266592730303 1.575386637629568 1.9766356426267058 1.8031494805441133 -0.48249023268639268 -0.30802281830888123 0.39287954404890857 0.86140773898391898 -0.34717438550637125 -0.44216050145559121;0.69581053230358536 2.6849715670089025 -3.1828300877453968 1.1220618323821459 4.238312728915413 -0.75217993363182423 -1.7701955438437529 -3.5783326350874831 0.98592264671226182 -0.34308731606146819 4.0928806944845055 0.16647256315081263 -3.2693927560867722;-0.090657099219714682 -0.80592300577541343 0.98873536640053694 0.69237810295215529 -2.884041821122628 -0.01545519607948528 -0.99361941696887479 -0.40561201014656312 0.83594325450415863 1.247944081440665 -0.88208319442323935 1.8791359717115188 -2.5918597485712809;-3.1556201381391928 0.29894661541136558 -0.80837754647718951 0.14295930413086333 -1.014455582271335 -0.10858150296230924 -1.4059195819525909 -0.16528452911824798 0.1354758812994015 0.26729664188261354 3.2112043478372048 0.074277877683678287 -0.92044396521862371;-0.74820598714798014 -0.82683792836880954 -1.2046600142321648 -1.5043979070012463 -0.35723286312997349 4.3093320453249282 -0.5862125126847525 0.89144174603240767 -0.38509361155389088 1.1865664196127046 0.08700656742653326 -1.2919304577485053 -1.5270469404365621;1.3652779760541029 -3.3366615264326756 -1.3796376430806674 -1.7670040663632602 2.0335602313018675 2.0416886740861764 -1.7222169815664254 -1.839620840813798 2.850422061829506 1.3954082636618472 0.1062328574296479 -1.0384460998803258 -0.65082326354188458;0.53356259540435524 0.29711118631333255 1.1512656663467866 -0.57719448940859641 -0.49576742633765897 3.2603812391316804 -2.5607183780139127 0.11841997493386597 -0.63036490168679671 0.63718879793586169 -0.93919799552649008 -0.22261880359465841 -1.5384185726576096];

% Layer 2
b2 = [0.82205073584820554;-1.9312389302685842;4.0367047498550717;-3.6748270229820452;2.5441871263283828;-1.1729525898347428;0.10926525854791339;2.6950180085302531;-4.3749362534949983;1.4769569746232099;1.1281296997292092;-1.4862520845814597;-2.7505625937390294];
LW2_1 = [-0.1568022877643683 -0.81960251753230762 -0.61167021329596882 0.63148054738285975 0.60865865945332076 -0.70498581584878051 -1.7389851609422617 -0.0056809845548315124 0.57853020644811137 1.2736253176446668 0.32462560121649975 0.22672217796256786 -0.017294286957618414;0.24426732304506291 0.62147989137151971 -0.19809216743833943 -0.19053786371959741 -0.34978498022674487 0.11819128784281924 -1.0324837580584576 -0.92057592540290645 -0.12973487405557707 -0.46347301370019045 -0.96365429791148871 1.1940232577247627 0.067127149520585017;-18.93678472116941 0.8898253976519066 2.8282056522320222 8.5636657627207011 2.9253981928461132 2.0903547895213017 -0.36897249439863333 -10.484233413621938 -1.9043463188362479 1.1101498951225848 1.2111135130513833 -5.0764261890786644 2.9190822691094223;3.1324397130535391 -0.97483702281857676 -2.9195727650597432 1.9110903444766931 -3.3482242436703404 0.26106064395949063 -2.5817678787610556 -0.54368474173688008 -3.3762297909826362 6.6055701313156385 -1.5910267379672192 1.2385589863033317 -2.350511400885583;-0.17352089167960386 5.0733916480121994 1.3881515611670028 -1.2682568705483577 2.5555203562945441 -2.838276567994646 0.93305811143027695 -0.42224730841723068 -0.033414741629764183 -1.8749769992151892 -3.5357089507117423 0.16415895354828997 0.6468923300504954;-0.017990955964459175 -0.85598754808215771 -1.0027367013694057 0.87891712056997751 1.0903275515186996 -1.0272405315038735 1.5515770962600695 -0.01408949009450876 0.61025017972247586 1.6112843872026077 0.53993814610908597 0.29257010770961311 -1.2445154017761044;-0.068188150826081331 -1.4694644978552334 -0.028570812559335121 0.61962837830471074 1.3748420533991612 -0.74055366300211356 -1.9596094318176402 -0.0031058602410744731 0.59768672622264785 1.3481232247645332 0.2138606805815883 0.24062095283225884 -0.049765266281912288;0.14669046807248701 4.9655494197849546 2.4753389171890237 -1.1823689906303967 -0.45156194435442532 -2.790422089470292 2.0225913050048625 -0.43625255128760576 -0.082351460202124249 -1.8690107805691913 -3.0932677922400904 0.16615813368390026 3.3009035553591679;-0.16671824429048404 1.7469616435632647 0.84789594251111056 0.12251075898259606 -0.35132742981827225 0.09080402903925737 -0.27846349165100071 0.039125247832117772 -0.21662729799850966 -0.81224890647739489 0.13270357338945354 0.025643086117663871 -0.0090206225496488462;-0.25724958752462046 4.7535920355454389 -1.155695481748138 -0.44777612800237832 -1.5500470205123664 1.0774522497853964 2.2626665965279096 0.12367896125252704 -0.63839506719607009 -0.44660511349570881 0.045563903170185951 0.30684466833960483 -0.48433184773740939;0.96558253533485261 -0.32794963094706508 -0.82987869735219233 0.72131640655188556 0.15623669980006469 0.58137312301883759 -1.7828595672075205 -1.5663856265285308 0.40584476084461452 -0.97874987265462399 -1.158268000178867 1.5925686309125087 -0.76726867150575784;0.43624572707218551 1.620265139512763 0.98500781965305628 0.14143968641349136 1.3442128823804504 1.1376196563399827 1.5056679080262121 0.55502302851650664 -0.12527525041537596 -2.4283918972366365 -0.038979372460636305 0.13287380397287349 -0.54316313353867385;0.041925775538737192 1.0349501233423217 0.87198097566892696 -0.15497017288232323 -0.86950091131345875 0.18267340289893846 -0.82727609855670958 -0.73373585659405782 -0.13319766180703674 -0.58356890108852466 -0.88942454589856312 1.2060673833829281 0.11386586548651004];

% Layer 3
b3 = 2.0485553530696263;
LW3_2 = [1.118292354879219 1.3900508985406501 -0.97299157814078363 2.2693523222661516 -3.5627650744930675 -0.28462257022329618 -1.1100569265989542 3.6110010205710856 -0.41251448283825731 -0.071336894457107058 -0.030519349837819645 0.040755984496788876 -0.90436419609127727];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
