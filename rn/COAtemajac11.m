function [Y,Xf,Af] = COAtemajac11(X,~,~)
%COATEMAJAC11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:24.
% 
% [Y] = COAtemajac11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.7545877316337686;-1.8260296594871792;-0.42028973930868541;-1.1139528132452177;-0.48098318813466767;0.4962544558207419;1.2308086007574841;0.90530358041305026;-1.8174201275552877;1.7140342053013595;1.7584343831641218;0.54316955712948756;-3.4118881681405204;-2.088788999867548];
IW1_1 = [-2.2585589886843378 -0.79315074465282487 -1.092157440742223 -0.36535652048947104 -0.32473344023129302 0.93212728909661757 0.89501288605240104 1.6724907012121968 0.48865521859441952 1.2362058221282968;3.2204674181057271 0.71395235745706886 -0.085631564619967029 0.57011749890319996 1.0360987163258499 0.62695043345517998 -0.31194897252919451 -0.9778538834851207 -0.3228332539637872 2.003297000128355;0.073014681331378756 0.043892854319603096 -0.14211407498426815 0.18258945983975403 0.31002064881194696 0.10681862159481645 0.0005727267372629876 -0.24389998033193586 -0.089805174607084454 -0.24453984235143475;-0.5274581082817702 0.78926597493787354 0.10585280060113314 0.1965155830030422 0.43230878851484394 -0.0060522498328280661 0.052184837052169031 0.84399788599743264 0.32440905132173981 0.13543045891219202;0.32660101608244352 2.2411662295467507 0.17251426005156878 -0.1516168231197581 0.062565601702694845 -0.090003742963386424 0.077816879214840845 -1.0765324708694182 -0.28430879768324419 0.3482329629361382;-0.025128076160010698 -1.3551771786456355 -0.20222228582478013 -0.088394188298032958 -0.22329195717197364 0.022585402499004589 0.048239148901760419 0.98290813738968641 0.29171751984312644 0.010769720571830111;-1.4692922535706843 0.82560912328012448 -0.026909721903027241 0.085209737173514377 -1.123974863519025 1.16541768506531 -0.29147387984700762 1.5569927525874152 -0.023230966534816287 0.86975957263259107;1.7374747249030309 1.3599564404624396 -0.9062261496279117 -0.70462296231230581 -0.16447954372973564 0.44412510363098501 0.13618941061214662 -0.096194208620538804 -0.48195404589306001 0.45064298764591987;1.8918148598509337 0.42434792622312351 2.9805955774691708 0.25169101979159503 -0.57891528231280476 -1.3236155589456546 -1.5200270651922569 -1.1053893594144559 -0.40264816453956692 1.3159736182386605;-0.19911931915896494 1.9031921502883062 1.1029274974429217 1.5297315077498137 0.37390121207005789 0.19677335540916083 0.030134071568876018 0.68335453863331042 0.081399065984865626 -0.49834237056573638;1.0125675013496032 -0.99154697447869689 0.75049299926128898 2.6507279791221281 -0.31852143667852234 -0.43465419354412155 -1.0416758157339987 2.3308744886766068 -0.46733507164969401 -2.4826541381194831;1.8254509250582802 0.47863429305233007 -0.90443254744536317 -0.6971647148412059 -0.27472372898922076 0.50840237724491355 0.25164202812423198 0.30470562223060216 -0.18144921834660602 0.63718234306857424;2.3085485695900099 1.0232025278971193 0.18858904867916185 -0.12592414822617143 -0.13676252352885593 -0.27235082864844812 -0.66283969387207042 -0.090891956192477849 -0.54341763873534465 0.46918694968885699;0.033718084723182468 -0.25640461565526873 -1.6686516765614285 0.66366923210732953 0.91726323480394945 0.14797197875906196 0.5244447487658016 -0.65871836836136899 -0.083354900155276662 -1.6412070166744113];

% Layer 2
b2 = [1.7359906488591368;0.09202310853365106;-1.8223582388194908;-1.4836379683788075;-0.32512385881278083;-0.040107358097987295;1.4364073875651047;-0.23760003352215867;-0.17533918737054571;1.3778593234305674;-1.5625369935638134;-1.8260676903867439;-2.0744447676980737;2.0096938175750396];
LW2_1 = [0.29278490399092355 0.36376143022317459 -0.53470344355187094 -0.93932652446554044 1.2969124290710832 -0.64458698833126782 0.22452358055101662 -1.3690846395139211 0.13998099859002761 -0.32863476576170281 -0.23109234414190613 0.099062867782671093 -0.16006418292962751 0.54452467866118848;-0.22815968877550366 -0.18423462111904562 -0.40948534108749318 -0.6919497359854746 0.04454720726374338 -0.42621279117542737 -0.12793287512395185 -0.26611269443380209 0.041952365101504893 0.72101489021963516 -1.0156448264117048 -0.22055544562362786 0.88096381731304174 0.34919549307875986;-0.28879480111256972 0.96596771478709031 -0.80296499582202707 1.1372352283075804 -0.4121364041732955 -0.1204442755512992 0.93804400597101234 1.5651562165315573 -0.00037783963680309424 -1.2337390701663697 0.8232800078802518 -1.2419186522177121 -0.51261596631705553 0.39371661615375358;0.5859969636981146 1.1100744427036009 -0.47172337223054461 1.2490649989358944 -0.48276691583153514 0.14171832660103603 0.21117116639010239 1.6045353934126612 -0.063107853173126199 -1.0764307963119775 0.19973497226185494 -1.5917939346385102 -0.46452670464566159 0.10439156018994183;0.81019104151893573 -0.20107814965822923 0.043385317480829008 -0.034344490949194006 0.060432203253152891 -0.19017618432764663 -0.11250393600284296 -0.93831375729433286 -0.41682207192585008 0.35051776889861824 -0.59662705562472373 1.4518355018907383 -0.10771828052177018 0.38004562546448983;-0.54651072864012962 0.042276668857476538 -0.10641636704720622 -0.21742639449235446 -1.2340841730839913 -1.0901825182243341 -0.36807432226029202 0.62304066886492837 -0.1246968061196152 0.063286281321083077 -0.1530030110867911 -0.78437440214851684 -0.49369397973953505 -0.094771446205906648;-0.10192539422095112 0.24675269917129622 -0.41968136411321871 -0.15176776994562799 -1.0275623616623091 -0.55311801721502907 -0.48922292794902356 -1.3038116507538817 -0.20215475286145837 -0.18595567517034872 -0.016010670322740259 0.31870530166004446 0.2748773209880816 0.033458102754120297;0.5580833940330443 -0.68697393943255858 -0.57974327763103906 -0.36649648546818797 0.38195687156476066 -0.13863939874910092 -0.39754724370488309 -0.50931244764045591 -0.035031898949850288 0.42857068494266132 -0.68416239358896824 0.28775241399364987 0.1264267913048574 0.30545327465553235;-0.23151848607803993 -0.043002958616387914 0.76299843138741819 0.11486391617303307 0.23345859388171533 0.87161547018393126 -0.33405322105661711 0.78413652967263425 -0.26156006589145259 -0.068238441551919632 0.37189344309492933 -0.6569587770611397 -0.23691048535771664 -0.69929446150921237;-0.079120921759510549 0.1661418510019517 -2.0785645410931184 -0.53012879966673521 -0.50219223569773486 -1.7272280074269057 0.043407001181242133 -2.2794557074336832 0.19644162515226443 -0.33559906804020256 0.060531791375163561 0.84822368095216649 -0.92107068941099501 0.6842149168903775;-0.90897889400531784 0.38514988166964259 0.99171366051702758 -0.5604814908772322 -1.4375568769023181 -2.0535665859907946 -0.10501360713276736 0.35616951853004664 -0.21129417605634321 -0.036488813800346465 0.086319119764169644 -0.28749761964584558 -2.4429534401430417 -0.35667941642550066;-0.44388018876255614 0.39389899284699514 -1.3063190382667338 -0.24105632156528337 0.39261034267156864 -1.2534518592356405 1.1675210454642049 1.0639435642544182 0.44997831590831489 -0.44403875560624217 0.41131891202224447 -0.51736314936101735 -1.99874765938275 0.97250312051943333;-0.16456545556908792 -1.2567798130928409 0.13100073973956944 0.35201235178113433 -0.84160034590481614 -0.58428735361544337 -1.2027858287431985 0.35470927171558991 1.4568524721150091 -1.7560100705160469 1.0022223877248322 -0.32364040457699267 0.29926830178597902 0.37083383417131965;-0.05065213079160328 1.1450757548957964 -0.49999330915643747 0.092053349513837382 2.6043077337872993 2.6775934166200961 1.324399654856766 -0.61588595290459414 -1.3540101828389217 1.8074398654861215 -0.83132000181064036 0.5229035657704153 -0.58364881274541047 -0.1388368822856707];

% Layer 3
b3 = 0.33114234499639189;
LW3_2 = [-0.59213307372511614 1.1955633432886772 -1.6048052099178942 1.382869340511609 -0.99522642541809325 -2.9298218235981506 3.2055158479328325 2.0531564025885238 1.5563089571793727 -1.7319248715054145 1.0355743270245852 1.6141029219443428 2.4254248562631617 2.37918326867872];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
