function [Y,Xf,Af] = PM10Tlaquepaque7(X,~,~)
%PM10TLAQUEPAQUE7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:38.
% 
% [Y] = PM10Tlaquepaque7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.4401950293959556;3.0986714676230926;-0.083979249000887934;-2.9297685867906518;0.94347400969277906;0.82874535210300193;-0.41873948679862832;1.3519230095219767;-3.7805900188308761;-0.13394750877867986;19.755468384710838;1.655941018280406;-1.0047238029726184];
IW1_1 = [1.6478797410476986 -0.71758556622813463 0.38376753740599545 -1.935833478770264 -0.53208789773319387 0.32968296748369036 0.46342347876336387 -0.41109464918974492 0.33433930832811898 -0.91294547591197361 0.067455514599778166;-0.81569901017873081 -0.52863321061824531 0.56894575890799903 0.51435374582295856 -0.29392618024056871 0.12213070340144613 -0.61094776229663772 0.39000019679395531 -0.24426035744355223 1.7013400668202689 0.027168658387017305;0.28496677645353014 -1.4261423600198211 0.0096240549425554607 0.076382263442256237 -0.094530439565538735 -0.20042291263582518 -0.018969216894463105 0.074695053211456988 -0.18014693060208153 -0.0099162647242602708 0.24754932625868656;-0.4838248801915262 1.3610254212692117 -0.50620060160890901 0.15563161421789851 -0.41770952172370457 0.9708710198889231 -0.18678490612071075 0.13639082004806249 -0.073060334722399103 -0.91178568698062101 0.29910971320778645;-0.407331639293526 0.82457705671741133 0.031829410589085352 0.070705220301787414 0.77294980060325913 -0.17088921020598613 0.028690773873831992 -0.058098524216569691 0.074102919935847986 0.014081869657326329 -0.14059579714215589;-1.0911316990718141 0.69399597421379122 0.52201427079233764 -0.3484380844263209 0.21057997711400536 -0.41128382318739753 0.1234188500183997 -0.10885847574980342 0.019867931210092553 0.045238749318779352 0.039766593749411015;-0.3132661719162082 0.76918066459317802 0.0071955709155761081 1.4075181554029079 -0.082741444732229219 0.82192282838115882 0.37173508989744036 -0.45510829245885104 -0.78040613500074052 0.074966115331350114 1.3080117866042831;-0.044885722541987541 2.5328037736573195 0.06997946001312555 -0.17798367601941614 1.7876583380658733 0.019603658064378218 -0.044607597168404803 0.18099308810574652 -0.3106324495711964 -0.013918377287206244 -0.54777037883679092;-2.7001026782168225 -0.028706713651822788 -0.04282746247263032 -1.4794252098239211 0.51307846762467435 1.7565324358455063 -1.2642204748466135 0.21220276487304074 0.68278867665862664 0.1992143643469137 -0.27179985319097477;1.1710314862303377 -0.15686469208254972 -0.77735546178511683 -0.35508493354713611 0.35583671017755841 -0.23044148193419306 -0.24884860042086809 0.26618767297748991 -0.54724204291774825 -0.54262681535637791 0.32374299871101164;7.2745464080148974 -0.21725198650007638 -1.0592496338376398 1.4279488429249891 4.5181537882639526 2.2562710742658818 -0.012318256081302232 0.34089705238044371 11.577799337939606 -0.79094877013032716 0.39692874248003057;0.29194148417469074 2.1090994143142714 0.052501486753218557 -0.2401645179374515 2.0544073503119704 -0.047500833851417845 -0.053486077969562937 0.11928708499266852 -0.24672562292382635 -0.08331301224627409 -0.48552210841587545;1.515660715813592 -0.33931093892463088 -0.38816457015356992 0.38797510534098761 -1.4350450184596015 1.0306573628222599 -0.10817561915883361 0.015450559002720307 0.32603200096675 0.091008937871015425 0.046045557107255095];

% Layer 2
b2 = [9.1102720084726432;7.6128662435338708;0.43461516422861385;-2.5934353209656922;8.0040262268573024;3.684384852973579;-2.2422162950520121;-6.0105178768096712;0.86068021338104406;-4.3687066090622455;-4.3331682439884309;-3.2102833650518492;3.3124847123285015];
LW2_1 = [4.023033247972104 3.3629907346004022 -16.787721646665442 -3.3649374102423382 -13.188243898234571 -9.12392367015768 0.9502606328337041 -3.7609041966797485 1.6489839657958507 -1.9646696027437096 -0.83982278600789917 2.5243807529073337 -7.6286314383470248;5.7869788003051204 -4.497695084968294 -6.1342783899340585 2.1197476852787882 2.6475433217124134 -12.215801921120361 -4.9263515688808672 -4.2076533055393401 3.8812299264437695 -11.491236608892446 8.9844827201168282 3.312104686976046 0.059122369165110829;5.1668197933913786 0.43711837503605616 6.8963554298779988 0.29020747809764463 8.40544681969509 3.9685880418074166 -0.9554393631481265 8.9262628601938498 3.6285039132195664 -0.95187010503756264 5.0662766011197089 -9.0444300846989822 2.2519269444512457;11.636003029178884 3.8861771050541529 -1.2728035990192474 -8.6253629248008785 5.8675381779491396 0.66515340842556048 2.2768884532859719 -3.8170438121104926 5.2252935775885057 12.030189131582652 6.3982141422739423 1.4551492303582843 -6.5494177164729965;1.9365340207724582 -5.742913324198228 -7.7514642621388843 -2.9928229471425003 -1.6352380812343372 -1.1322321780752016 0.69298661076787171 -5.7898687066778276 0.0053715302789126423 2.0766661683174479 -1.3225091118916501 1.3828968708782217 -1.1673726063914707;2.419102810548829 -1.918719806028949 4.5108130151551116 2.667984631392784 -2.4353567709726924 5.5698216088758485 -0.15749554104276611 0.59865067839134734 -1.3547731647103585 -0.30243050597616489 -0.23765894086154277 2.1748762200883598 2.7695911306196583;6.7573056635036624 5.6225634307943846 1.1180943654037907 -7.3390001554423741 -0.53275356469139501 3.9096398289943335 4.1212976525867751 -3.4417745816691876 -0.68245019831133258 3.5671970755503155 0.6216348082182428 -0.23320374125092452 -1.5718474523620152;-3.1854292171222025 -1.2106934046144602 1.7676607218389193 0.41141060927679479 6.3413868065939001 -0.4017649070104658 -0.21716973453319721 -6.6746023481215699 -0.22854323876003338 -3.8017837005064736 9.9072589674410931 -0.20783304181100942 3.0847267411016328;2.712197164495131 0.96245843742468851 0.71062219988455577 -6.4176789857494345 -14.840460579262309 1.975317774032963 10.38368362881628 2.7094921175307412 0.33734874892497596 -4.227620958491479 2.4296712248224157 0.69996804034444049 -10.144506496710639;-6.2956467635577393 -1.0247341295628802 -1.6760099186588349 -3.4639494665224788 -5.5453032666610849 -2.4049711392915838 -0.055242168609907272 -2.7548580859770824 0.094148229818039816 0.33864668087952765 -0.75866396087851062 3.7945038959309452 -6.2213160778168124;-6.6259075589012921 -1.9564183004945017 -5.1213191967119878 -0.71555906895939148 2.241119541673394 -6.0659289155624263 0.37366013391022834 -3.9128519870385903 -2.447220030113932 -1.5431491671809572 -0.97678828917936844 2.0208760923692557 -3.6956927217308952;2.8068084227494774 4.0750053056204303 -6.4013244793021382 -4.3845229209646499 -2.3771883493538288 -4.7095141548521386 1.2824974259154696 -5.001604560267908 -1.1253823507596095 1.6417761166311358 0.025239343683722541 3.3097570727028609 -3.641259573998509;10.39220079746808 2.5140754415830222 -2.1098634269686087 -3.2883180112799315 -9.561138622411864 2.4474934198411944 2.2718728158178463 -4.9302916356129955 -3.6326688637619151 0.96184731986430816 0.29949696423253247 7.7941986006675386 -1.4810818281263896];

% Layer 3
b3 = -0.70586260818985325;
LW3_2 = [-0.11418234253450879 0.032206732099234622 0.1113229094722285 0.035346275168746728 0.17582102716751083 -0.18935906473878222 -0.026356786348138928 -0.064363486664367919 -0.0109860155188188 -0.084811145883003924 -0.12759491179450974 -0.16760384498638359 0.074808111828384635];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
