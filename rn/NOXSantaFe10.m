function [Y,Xf,Af] = NOXSantaFe10(X,~,~)
%NOXSANTAFE10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:51.
% 
% [Y] = NOXSantaFe10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;22.7272727272727;0.00341273633199099;0.00632111251580278;0.294117647058824;5.42005420054201;4.04040404040404;3.03490136570561;3.96825396825397];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.8717751807357588;0.6485701038699917;1.5406388891098302;-2.5952428868623199;-3.0026913658048255;-0.26400296437752846;1.5786652680658644;-0.19048085840404314;-0.67698471546864059;1.9103792894095175;1.4449278429132273;-2.4998978741237865;-1.9734746200101514;2.2508358927300782;2.8418658859990464];
IW1_1 = [-0.031095424006987504 -2.6116446965595261 0.98955438505474247 -0.23603139141757401 -1.0760341729191756 -0.3875811225692895 0.13849209670525089 0.083486006666399937 -0.67248168318388979 -0.24381577613356747 -0.10009127015312298 -0.13249094111514059;-0.53404971376250032 1.332197252785871 0.55211756490370323 -1.3244232710907722 -0.051369991480287737 -0.40352746554319485 0.30723865038846154 0.44649153553489773 1.4097349327902136 0.73284556684442059 0.44991846123271523 -0.174913013401683;-1.4195425958744896 0.84075918272380057 0.52179639637627684 -0.41881655993019218 0.88039857854695769 -0.42884303163451343 0.89941783365385997 -0.54442744936609266 0.30258375149769406 -0.48418208553438646 0.78185099470542097 -0.83880006741424606;1.7349636093361414 1.7509827612033293 -0.49909118007193226 0.70578501078169298 0.14046243666280311 0.018542360912502817 0.25869331093784315 -0.88791360967660216 0.73952084384027961 -0.26804020371778015 0.104610432461719 -0.43647947231602768;-0.45259726462312749 0.47443406527572629 -0.22381484980214292 -0.25100930419213208 0.12263650112813448 0.090688800913118595 0.31777174080801551 0.30160455063216807 -1.0201512841520066 -2.5356560972411577 0.2198164964942477 0.9244338995598147;-1.7032613251142106 -2.041616260238944 -1.3265562807765969 -0.2846845998502725 -0.98667208522062544 0.0094528445493415464 0.29853161532423578 0.23424086378564468 0.9328463055327707 1.8429525012346546 -0.67883299044880629 -0.027406317556407572;0.47327952343828439 -3.7017838738043634 0.47310015866651928 0.22579422983702624 -0.30859140594345613 -0.51584167895963007 0.0903679637885548 0.38726871607384206 0.56699459392705576 -0.18320922036564963 -0.23307131080910029 0.16791301034906583;1.3717100698363804 0.51732203333881988 0.34628543799957401 1.3766154727958773 1.6392971826437788 1.2083928305586393 0.28988549836471889 -0.43240545717446555 1.2560447735579334 0.68767984438646135 -1.1909305452811605 -0.64283416562422546;-0.52240780070196502 -0.57805018107091644 0.63926573491248351 1.4501054095309549 0.20788365246337798 -0.28245817328046302 -0.67356447745036929 0.89446718488508981 0.28752931681102545 0.2671593942833238 -0.35080834683162593 0.37449705425704877;1.5190522270100315 -0.59796947592707728 1.8235252310407113 -0.56405849746121195 -0.043635958605811299 -0.42378359425131479 -0.23789621138914901 -0.080062725452471811 0.51627284444203003 -1.3307848830510105 0.99754292956387447 -0.80704655191865804;0.71987160337319067 1.8616938833283569 -0.52808788069449553 0.23890432582243065 -0.73340398713851185 -0.52077208702848976 -0.3089053287007929 0.12011913622411954 0.57739178618494424 0.046082937184677819 0.17511223464731632 -0.13477166674769175;-0.038512454360895898 0.37148206518449772 0.34095179204221771 -0.17038788351850631 -0.12412094022898046 0.1895786726722275 -0.25365062326991261 -0.26969612388031117 0.60180978883801695 -2.3887780967252148 -0.083475911023789595 -0.65824030657824995;0.31503547263478532 -1.0288146524866097 -1.4518822529979418 0.37342288340698981 0.92332335640118757 -0.26690634768404087 0.13688670509972922 0.38790526680369553 0.74365604491241755 -2.6009430170757817 -0.48006709788220525 0.7570692449367451;1.2547373965817232 0.95147591586838598 -0.048431641715299539 0.55470192963310705 0.6521027086681046 -0.11825077491798834 -0.0392324427442323 -0.018343480873793033 0.65698300806589915 -0.83049000618341207 0.060643697788587025 -0.21635198381378101;-0.0087237542504791654 -0.34859995574258679 -0.99826124263491478 0.62823385397638276 0.76804802524204097 0.0021761847325389855 1.6003448802772127 -0.26899230882689784 -1.2149087652161283 0.81696521603881966 0.37662482978972156 0.34666291670308008];

% Layer 2
b2 = [0.96792582740738287;-1.779131965262454;1.4087289664608231;0.91082842817242637;-1.4863630441507893;-0.013865246769706532;-0.55098258444990067;-0.043084098495742545;-0.38167915250889556;-0.19898413037640356;-1.2680181407331119;0.71954493903474936;-0.8124374962159856;2.288478149937343;1.5894960479848488];
LW2_1 = [-0.92159800203487319 -0.27324498274505804 0.48234620067805695 0.60080531944832205 0.13094157942878432 -0.016248808467998994 0.28052985266641095 0.80936597661015153 0.65465417176619678 1.1074744520959665 0.33031439085841463 0.53158239782932359 0.095173325241739937 -1.2226006159538114 0.40280193860035363;0.58969375270216151 -0.058284042037363031 -0.079750957713432519 0.68474584027363394 -1.3805484988326033 -0.11606091893752853 0.24428149796644349 0.51301682743019039 0.9422745197828426 1.1867541842877434 0.0779360230268758 -0.59809635975318953 0.54842224834612174 -1.0691372696985599 -0.48125913528316605;-0.15702791337856786 -0.8439096757677973 0.57963353493876879 0.037448196798805122 -1.2398634790030043 0.025994178134404917 1.3760867128128647 -0.011833495560096184 -0.071930035908520096 0.64477826350297185 0.86180947405433528 -2.3268789772247565 -0.10584372896590259 0.25981126065058086 0.29449165799003851;-0.26837559145395162 -0.38343444313476038 -0.40959072239013838 0.23164939230505197 -0.66280309728067766 -0.24253866494976251 -0.48952725890827287 -0.054792929956368371 -0.89292898725815695 0.22656967081186502 0.30827348768129847 0.31114601083118126 -0.47468672111180343 -0.46065502311338236 0.46628774538212553;-1.7381328994817486 -1.9780277837713613 -0.90638686810159719 -1.3132809666389134 -0.75083375018828136 -0.49560325277281103 1.2060942964734009 1.3952319259170081 1.152393632584823 0.3956951934081348 -1.2296229079879739 -0.83681444886427125 0.69941928914011109 -1.198743932276203 -0.82350894062080748;0.78228162122312184 -0.014280572461092295 -0.71244816248818865 2.0022563082704727 0.39717457940457945 0.026923170748072642 1.0366027671974885 0.059156604936280388 0.20606614497810305 1.4153823108751022 -0.42751090805057423 -0.38292050861930071 0.01801557789768745 0.80139691428893889 0.14114033695252806;0.90085192728301988 0.5303885010484527 0.30773841325262385 0.14634826776141224 -0.024236920469549089 -0.27350230801597453 -0.34542737877668978 0.027931339491468102 0.76007665555488979 0.86527389778103336 -0.75356132483128468 0.63939355940138454 -0.22689593004442118 0.42532648630908132 -0.65674089723553652;0.30618537478428776 -0.55867810371068904 0.020916841003047151 1.3852486673082258 0.21290072497108134 0.19817024632057023 -0.51504157354233249 0.72956451191102245 0.34266227370264357 0.6198349991364025 -0.9264781259605388 0.6531633684576017 0.020379950348785099 -0.37641018866144693 0.663459339509613;0.056351621529169234 0.062187436129700437 -0.26772338738175028 -0.34608903244876416 -0.649956877274248 0.057342889519354831 -0.26251548318724521 -0.50424179838223537 -0.3820234250628109 -0.6314355533077578 -0.028459587565742774 -0.64460313709155981 -0.20071601642871784 0.017019012786514458 -0.58172321678460615;1.6862804687862567 0.486259011636964 0.50109195080094426 -0.94744926860968803 -0.77408274782335251 1.1373964707164126 -0.28475973488142986 -0.85613584500840578 -0.98134767908569942 1.0484524264031521 1.4266721738875225 0.00085519059807107056 -0.14358048094595272 -0.83730885422586077 -0.29810931804178065;0.12688001771820084 1.3686028760786293 -1.7155956871582287 -0.81157490260601739 0.57762461007399413 -1.3497081269818139 -0.40863221064374966 0.33969411268193783 0.52822673317163327 -1.4338803566637359 -0.18345475339398326 -0.47276442613147973 -2.1112640767919881 1.2392111376069814 -1.8990150177140019;0.89910290332412246 0.76702098576303956 1.5527100745092015 0.61978488830232958 -1.0462640278043736 0.49767520331980342 0.33716624763821434 -1.2346022116566473 0.54571511030671493 0.89505876799259609 0.42155215979266397 0.47677755641531111 0.1942662797374346 0.12826457325763921 0.0016660792282378739;-0.1170728916310068 -0.045793319237449288 0.33994949631544347 0.47549742939671275 1.1074297075035135 -0.088748973030566017 0.52959192195910976 0.33171446920540776 -0.8625959204271656 0.37259489858888512 0.099947604959311848 0.98606740615981681 0.33920785978150891 0.012153569152215569 1.0570521768300805;-0.010634857205302557 0.81999274823625834 -0.79386864573568661 -1.1738846743586795 0.90997689719300068 0.3926978888470507 2.5283249288051537 0.74981865104777656 -0.61970870408732681 1.0665108725240122 0.96038105327949397 0.25671525616674623 -0.48931068316515092 0.61973128017929513 0.34574349436120122;0.19002579241719558 -0.026773733630184555 0.45920343351215603 -1.2725234641823255 0.07832730323628051 0.089393388708456256 -0.56081512003595013 1.1390227434355349 0.1014024852561492 -0.76444471637456468 -0.39949116563005116 0.50931305478611988 -0.2509903835920439 1.1938672529924312 0.29506130327337726];

% Layer 3
b3 = 0.90577534613747279;
LW3_2 = [0.59982765501519086 1.4767337683753219 1.7668312680533493 -0.25924956727946968 1.9467086061825414 0.37513906708371686 0.78045855979009648 -1.0938417231514281 2.3203636719731193 -1.4669662892788138 0.56294423937544003 2.0588903459319896 1.3141984467500776 -1.3495187934957227 1.0522703931503894];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
