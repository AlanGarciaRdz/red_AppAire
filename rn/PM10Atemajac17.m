function [Y,Xf,Af] = PM10Atemajac17(X,~,~)
%PM10ATEMAJAC17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:19:58.
% 
% [Y] = PM10Atemajac17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00968992248062015;166.666666666667;0.0561797752808989;0.00614628149969269];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.96835735050362;1.3738057754930542;-1.299601438940718;-3.7867143247037123;1.2327285910121106;-0.52128770985621686;1.0345175555756441;0.94398671821384916;1.90727521015095;-0.3890192640709137;-0.90119128698126638;-0.48987132909445225;1.5388533146639316;2.627143427363698;3.3224273493927337];
IW1_1 = [2.9362477597570127 -1.5270876910688813 1.5044316847687742 0.44211738303685194 1.6891075803159461 -0.61108771681644769;-1.3710092348572096 1.4598584879680832 -2.0664998044832821 -0.44220888151706961 1.231423948344506 1.1117270034409641;0.039565430976894425 3.7299065758180143 -0.18765495951099082 0.16792111308864319 -1.9693271782299555 -0.080877472183942437;1.0541302294542203 3.5307262093842278 -1.2583666175752144 -0.84314692574095373 5.1048446544417656 -0.19490964835385738;0.047455011867983621 -0.65370261442858446 -0.19484355756503036 2.6628547884924889 1.573191075001698 0.38072963381085889;-0.084716079526789057 1.2601216033986391 -1.6596135411047992 0.01881480916785859 -0.12221007503731091 0.035162946809779071;1.103072083591597 -0.35981096810757784 4.0141549929761196 -1.5529103446702244 3.2307152343035868 0.23359628506463087;1.3952733934982819 -3.0589067015223383 0.86332163983678123 0.56312675917550692 1.0758570634104414 0.42363436759424639;-0.23187549208934299 0.65569317034080887 1.9318349517610902 -0.20129497746172081 0.14602960088607156 -0.0018545167575530353;0.10628435123734377 2.297296452004562 0.59850773322178163 0.041450333539675734 1.7192696198407094 0.0095929571077974472;-1.8089131234126266 1.8991148279722627 2.4632303161440587 -1.0679526438272435 1.1700944520855807 0.3729572062443699;-0.93624888587709965 0.45851314601548654 0.64567985284297613 -0.34108479579721218 -0.23853158996017143 -0.0030029878985851602;0.98351853680169321 1.5042177202085203 -0.6792377738755927 0.31434463249174377 -0.09712838158579179 0.0084641070190123908;-0.094454593802465139 1.3490761553436461 2.3218640881444057 0.052230540022767925 -0.9480910658417645 -0.24021104353940731;0.23505746287795481 0.068661007830686016 -2.3352278347473621 -0.7002979081479842 2.0491520717569394 -0.45948627456157587];

% Layer 2
b2 = [-1.3392369622354372;-0.39618143478018542;-0.53786069103723511;-1.2724348087884096;-0.25015308941142311;0.063780180016134475;-1.5707402143718803;1.6605943795463434;1.259966697485996;0.22460659413595735;-1.0853119762762158;-0.35157816037096207;-2.8788269016520616;0.92068452873369833;0.48544213909231571];
LW2_1 = [-0.33459753511082768 -0.073598741161983144 -0.010881327991808248 -0.91192129516454434 0.013963881219937677 -1.4302310488378791 -0.19963800153242445 1.2426430386195537 -0.65057246189851714 0.97565174746643613 -0.40889689806111396 -0.30996559083607306 -0.82568638339955003 -0.61272428416136238 -0.77674688883748433;0.95096528507372158 -2.2315250928103429 -0.13111891867966119 0.61726841901039875 2.5513674185544284 -0.81808350306202848 -0.76455267286815398 -1.3696716657339434 0.29350439644159049 -0.87742263516330454 -1.8345639990292106 0.84261495285667276 -1.1199030036598387 0.41705173385824978 1.1171656472431248;-0.63664523346599822 -1.0033432729640119 -3.0165609912403659 -1.0425806911250619 -1.339224631485934 -1.0626065522931685 -2.0939197835686825 0.65012843623646333 1.9832727332603082 2.3464085452777161 2.2046499093200294 -0.88896260337970523 -0.52320441602192436 -2.9246913446766283 0.43533500996116803;-1.1857657930214867 0.38743230361467129 1.4419699090453204 0.086738152542077396 0.56139031476924317 0.18454590219617661 0.90069198099732761 -0.40546589423608731 2.1831203709255966 -3.692949002503827 -0.90620864040347016 0.773963076199228 -0.72303590211334934 -0.22285616373688566 0.43296196388465985;-1.0236629654830467 1.8173544222980411 -0.60489557787665849 0.23735500158531589 -0.018576152297642 -1.2995488876421277 2.4313785437001365 0.68148721359594944 1.0682054926408679 0.48325838672586774 3.7306770245235445 -0.15008218088746744 -1.508887631711052 -1.4663098157622667 1.2748340910213181;-0.15093052376447552 0.71684642932035392 -1.3297364517501831 0.1986769342874542 0.096097471011657956 -1.3769278311000821 -0.22605610793443809 -1.0558385677873832 0.38877483812722319 0.015682954267612251 1.0442626271008497 -2.4733956186166992 1.0814083859528092 -1.813991425327202 -1.4318946880904602;-2.7168011263800511 2.0291632589685946 0.1141621889517794 -0.60934553432994909 -1.1249895710868205 -0.28408899950667221 0.80392671955070605 -0.099676326965550455 -0.57641247709005217 -0.085352051537529422 1.9103316174694955 -2.8817517866805398 -0.12020740978885362 -0.3231839127796301 -1.154155183006158;0.1376260300529355 -0.41231708490161706 -0.41219800825695074 1.1074039395537434 0.0024541050145612114 1.4840484550473949 0.03093356425299423 -2.0909302815186619 1.1065211905685088 -0.10441152294975042 0.68849132069253394 -0.57869951267798792 0.41545262675334205 -0.029830663059059778 1.5235869308322774;3.3069967329188619 2.3242128392608108 -1.4159902737702676 -0.3524989917850701 -0.16043768458890553 2.0437809838902332 0.68335924892111888 0.68880767267209453 -1.1346378884825534 0.62434199133284674 1.499526379959446 -0.50312112343705218 0.18715774382792852 2.1120059239622768 0.61716748810354338;-3.6218640279779084 -3.4520357753444086 -2.0595451504066919 0.056296107325322815 0.061944334001905674 0.20296344530452259 -0.72560919457238471 -1.7395195917381134 0.056393471042253757 -0.27724524027666603 0.93689419526812379 -0.93115942837643728 0.24645253679485177 0.65629678540809899 0.15437574409663479;-0.94642163356731523 0.39800734216318784 1.0716900216465366 -1.1665856943812591 -0.75175586204815514 -1.0409050898044054 -0.45123823124258444 0.77328348640734945 -1.8954158901472682 2.1481646268869645 0.27280974908907019 -1.4561659113827103 -0.12251341250645231 1.1906081882111057 -1.1138162647663854;-0.95161072969723537 -0.37586312256413468 1.8290343954169306 1.005821151804142 0.27735372917943407 2.0168115002577216 0.82553154582946486 0.12553742056497838 0.61795183458041258 -0.2141854400359984 -1.8679482416435069 4.2114658640200533 -3.5268275335199144 0.56227925060051598 1.383613064046159;0.30797957329372311 1.3496206251642684 1.2108075617516516 -1.2329719903933527 2.9963241614520202 1.1916596794571228 1.0480095078373772 1.6218847410939903 -0.83794052789393048 0.99980541029907466 1.794318306060926 -0.30944237501291499 0.73682173497797643 -0.13470409895654853 -0.23663545122228133;-1.5235318339863009 -2.8440853102023929 -1.0496943407423316 -1.0798394622504528 -0.80819670372896624 1.417556165178903 -0.36483752184554646 -1.3683078789510796 0.24918559579990268 0.38817146857979479 0.83353315529134298 -0.78021381008094925 0.65474546191136351 -0.17164227876163413 0.72666316502201078;1.1003802546729513 1.8759663009521501 0.012157508130027951 -0.32921047419260979 0.48281541392649852 -2.2507566623430364 0.36262063669438266 0.56218562284232954 4.4749103082549304 -1.2330925929978083 -0.35314514106618877 -0.37141925565259065 0.38895930720193056 1.3091928461527804 -1.2509179023477952];

% Layer 3
b3 = -0.82732726640255905;
LW3_2 = [-1.8846076163197885 0.15831662098571625 0.081697009622927336 -0.23451275496421781 -0.04158244382300285 -0.31929781531978074 0.24401063786965208 -1.5809386916345334 -0.62457300538266092 -0.455286186780479 -0.23545833728668034 -0.21030349750830482 0.083789806550492868 0.40695238948252899 0.27572645300338372];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00968992248062015;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
