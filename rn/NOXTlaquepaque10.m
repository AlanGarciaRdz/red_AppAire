function [Y,Xf,Af] = NOXTlaquepaque10(X,~,~)
%NOXTLAQUEPAQUE10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:16:19.
% 
% [Y] = NOXTlaquepaque10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.03490136570561;19.6078431372549;0.0212539851222104;0.0523560209424084;0.00632111251580278;0.294117647058824];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.4723621773850701;0.46521377958176735;-0.12010042157621538;-1.503756665484522;0.19511496789340319;-2.2523344322714625;0.11261904749526032;0.66924828451698992;-0.67318098486867306;-1.5438879946146529;-3.5846525916117349;1.7681587672428818;-1.5764066712967695;2.9447099898473379];
IW1_1 = [-0.86020396271769906 2.6552290958433518 -0.84419783002899973 1.08155443841139 0.6507755372859888 1.2738553088713109 -0.1758727127027106 -0.1565497639309181;-1.2571329512884835 -0.53913105486549373 0.57512252414254617 -1.3913295278724496 -0.15195903867060567 -0.57879331023272007 0.6405020370412009 -1.534581762779285;-0.084552162422911969 -0.48318568677938983 1.6210559958691557 2.0497057477700564 -1.6674103283096624 0.23359310341629796 0.31603108458163603 -0.24753543287767221;3.0470203994124585 -0.11749136587967124 0.39801103323558601 -1.021194450193107 0.61362083615212693 1.4388442992536128 0.56187253001489268 0.71406154647122266;-0.96805902036496805 1.9474808091203 -0.35561158215911104 -0.22093310707733455 -0.79697941555864971 0.061331463166859099 -0.3333400731808186 0.54307392442232705;3.2164412234872231 0.75954585675303787 -0.66064451437830096 -0.67677962500776623 0.39910850265932013 2.2583127869493556 -0.57076104629856794 -2.6667249170369214;1.6478122880564237 3.835093459595357 -0.028138882300877063 -0.19666377114070815 0.091961740409375936 -1.6054385819429191 0.072423782356821953 0.8765744584913937;0.12383856877111979 0.078049666259005362 0.95370302347873404 0.18956739957924246 1.0086254958116561 0.27120782761128098 0.60172641348833966 0.27906023162865179;0.92952700165126811 -0.89671174961862121 0.13392059687296021 0.18118093356583168 4.1725412865863616 -0.092231978845494167 1.6281810471312586 -1.4015208608998533;-2.743819726328895 0.60206403485528071 -0.68578086096802415 1.0885133196887753 -0.62300119516634433 0.3744074101632292 -0.18897074348378645 0.41709836821582169;0.09386250602331131 -3.4957549153270548 0.42616868521421852 0.095747795131591582 -0.15457045867885078 -0.93870164119980282 0.093756677428640023 0.33711827693277113;1.015949196424468 0.6945912015259863 0.48849526604608229 -0.37115994633301619 0.38974650144732226 -0.043736801530044861 0.13295223480271745 0.014125466412067997;-0.11811399826936902 0.090663400741712932 -0.98038158828147093 0.29993686315428247 -0.36642672059341669 -1.9398925079477241 -0.57546019659992043 0.02492042788856532;0.049839069044742612 -3.3352482514390047 -0.20599655980809464 -0.65556233036703238 0.17722951155310079 0.35572839100023251 -0.10992071513656301 0.17255018709423528];

% Layer 2
b2 = [-2.0149438881339687;2.4781514700787834;-0.53093349341241869;-1.3693230045002507;2.771623495968516;-2.1641294812942542;0.044713494281622197;-1.554636236433377;-0.76189454722563055;-0.54430643048773153;-1.3391960984369828;0.45424153381231125;0.55050499062997027;2.8240953228116408];
LW2_1 = [-1.8417364106658256 0.45130670253676408 1.3600672112429051 -1.1709965091475072 -1.5666448734241405 0.90389416735411077 2.6751387782641589 -0.89069848273141927 -0.62831812364243655 1.1697060679135947 0.48952229215959464 -1.0064805978821436 -1.6504503419397569 -1.1555471601559104;-0.017575462526163144 -0.76851038739579758 0.094501103553174273 -0.018900303794224367 -0.23264417470077958 0.27711029821249333 2.416219685749518 -0.60088596309499143 0.319408121534342 -0.12965701384724629 -1.5024082915981285 2.2258401465022595 1.3129636985679611 0.34010485821256914;0.63011465070482253 -0.16012302582366214 0.02666768950040763 0.41586889210298111 0.0090164983585792023 -0.14201668851152097 -0.86019773820275469 -0.49761582940475024 -0.069591701498746952 0.21136496382526962 -1.7810687944894081 0.20175808817374902 0.74137145983116315 -0.026097443720997024;-0.32351994517806232 -0.20957053250628255 0.12823639019512395 0.36529215184611663 -0.039381231660296973 -0.33859735359093607 -0.48253349233495135 0.96891562203887904 -0.68211974349706539 0.83824849875926055 1.1019708614516435 -1.7226520746593661 -1.4749291023409299 0.9211438587953189;1.2438780599968016 0.21131017949182149 -1.9094551863457407 0.43411233027199336 -1.1390261158612285 0.94624411310636103 -2.6282980985783513 2.203250041147498 -1.2453746710308129 0.1884647489919429 -2.5168134258499482 1.0198074267370447 4.5647895394011897 1.9197464884352913;-0.58190061145084349 0.60500121996591483 -0.25947761769991318 0.47587970900373405 0.51974485239251256 -0.38581302197004885 0.964088835233473 -0.47676382187927563 0.2967482415097541 0.5292797659694598 1.1592805086626163 -0.59007316401534726 0.19666317827538546 3.13797677155502;-1.6328094418296828 0.47938517956550175 0.25660440719575084 -1.7603586140661429 -0.23097403917130219 0.049541268270179885 0.7013546666421 0.95201280557629486 0.47894889232753057 1.9622875389257222 0.47311600492457406 -0.10594976983168097 0.48316938123610581 -1.4225097134830778;-0.98207076413943861 -0.19666323697636107 0.14479573769552417 0.43642553326048694 0.75726238301011972 -0.23635554205046905 0.61407450467992686 -0.73464767681808951 0.3806468958914056 1.5224789126300746 1.2168898214727661 2.4247760551946906 -0.94475364617916646 0.285957868333507;-2.052263727009636 0.81854286786591035 -0.53042130591098124 -2.1083609925290077 -0.42739634593363446 0.036362084358906102 1.1891552126815181 0.98160950917994783 0.7653543375087879 2.6567506931949492 0.73574724758195054 -0.11691101615626659 0.30106588035564424 -1.6774514651810879;-2.388970140352872 -0.90550968986982505 0.91172015763932213 -3.2123888110185033 0.98239218305497478 0.21654988813180789 0.49282171770018968 1.7876695192852343 0.0056568278326257146 1.0265466491174966 0.495587701989949 0.73019016068083098 1.2350579744607491 -1.7478722744146777;-0.87675802413327142 0.48530594770796132 0.8232749864929656 0.27913770780097397 -0.099129810569085125 -0.23718509012479616 -0.037300858411655612 -0.20078843930374343 0.29512643201083694 1.2257350673688363 0.014627085421075981 -0.053800371967605259 0.57734203431524522 1.3477303331143431;-0.68036851074040372 -0.36136653847511413 -0.038254088498881733 -0.57167717630411796 0.31444639451838563 0.2096461781331988 0.65193321974399465 -0.031488516939210925 0.18381751114995418 0.70076731677130977 1.3797866353116846 -1.3364287417703165 -1.8810778882355295 -0.53363567294801095;0.10310866847210189 1.0650558016286749 0.19900617530955567 -1.3923670505623806 0.1221749061278344 0.32139430762394422 0.6649957247925472 0.39108324569946623 -0.14296551803936131 0.92146066843517294 0.15558215791992028 -1.015940150178219 0.53687407675694332 0.94463885285876903;1.3455158148213908 -0.060413983398190582 -0.060012267601833244 -1.487010534920082 -1.5708022906248249 2.1324983676293003 0.19087551183575982 0.35943552431234338 0.27598794020438744 -2.5038017298973201 -0.29862856932506954 0.96871315913562139 1.9101765798296908 2.2257811818861901];

% Layer 3
b3 = 2.7119868170429031;
LW3_2 = [1.4928136115585389 -2.1864756987962597 -0.25371894498785552 -2.345580457244048 -1.9302134791442254 -0.51242593363770972 -1.535780504811719 0.5612193740430933 0.98909793280739144 0.35971566697815471 0.74194426858373519 -0.85508903940681735 0.16506650759066654 -0.57034333212919264];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
