function [Y,Xf,Af] = NOXCentro17(X,~,~)
%NOXCENTRO17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:21.
% 
% [Y] = NOXCentro17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.0934657021344005;-2.3576588431766412;1.9447376083761712;1.2295120991774995;-0.53754647931271538;-1.123898280876735;0.95997796396432167;0.74599724482388896;0.9662701436652944;-0.58315102499468208;2.2802133217116318;0.56529018861336333;-2.1789556483969013];
IW1_1 = [-0.75626686617784 0.48824734329279312 0.46589301025004054 -0.69787276589526204 1.5909656414594298 0.43359849031803555 -0.10003214098744362 -0.42861130397444008;2.265111291102281 -0.84636408713877509 0.072940595237125413 0.058760695999469481 0.48359144099886603 -0.46455412074626357 -0.24503468229082992 -0.64431313546022606;-0.45641599007786882 0.66845998388571815 0.16762979136300854 -0.49173721025351175 -1.0497476056934363 -0.25517409177570216 0.26220221592796367 0.25266937343887785;-0.62201902512982432 0.97476922676337285 0.44568516042961986 0.32755845125784716 0.023684373469362946 -0.16845320117874857 -0.046053432668684613 -0.069511929094777311;-0.4986353366708256 0.40075637943807241 0.25763029416756689 -1.6597557094053421 0.17383488021600466 0.18285979402211358 -0.29558658204122512 0.33568091044118425;-0.40265176143112524 4.3925291048696664 1.4534589005254204 -0.015903072397791727 -0.29964760641851407 -0.89725552891947402 0.078259262111921774 0.18906308703925506;-0.43647856514625233 2.1120913374686698 0.043821727443886502 0.26505834143112639 0.043787920322883575 2.7301288264675043 -0.29151150579246354 0.065974687345907543;1.0570878913016055 -0.021436671392176997 0.25003420281287353 -0.30575116022267002 0.053509106846679096 0.75829561743668661 0.28179918350408761 -0.068173324828935747;0.062893357191130803 2.6246597240769645 0.15222744934327717 -0.89777226415024758 -0.47793906665257446 0.7663167706221955 -0.2342771021421001 -0.17264829565319617;-0.56001370364595449 -1.8180062648835769 -0.80855661102719401 0.19653716011224426 -0.092895187603806731 0.37145098320957814 0.077253755390944159 -0.10637648054077559;0.22942263333985391 -3.7111778341283284 -0.43765154383478355 -0.49585149337232703 0.39025230458597743 0.77831084233920167 -0.19119041784141988 -0.14912358443666221;1.006974175782823 1.8708618685343752 0.14996043504540785 -0.64791213752629706 0.14865398919774356 0.75764455662041053 -0.39976697439016928 -0.04709473373271264;-0.54264418195151765 -1.0839582287248932 1.0108410326472761 -0.6389566555362709 -0.16402125218871053 0.49779907385778355 -0.26330031351633038 -0.60240325828112229];

% Layer 2
b2 = [1.271172982858791;1.6049705120160136;-0.066972448477981089;-0.4714962787720488;-0.94769187785861742;-0.6120106474748761;0.093081640179649081;-0.1418184463126306;-0.76756858129130534;1.141660743968989;-1.6613074937040579;-2.4559686780901768;-1.7595125836069954];
LW2_1 = [-0.58323663424754779 -0.19331545713783752 -0.40804951435767961 -1.815689218761849 0.47617076854423174 0.2171768697356968 0.027322830779015005 0.0074927325761996282 -0.74745900572505919 0.2372614340923766 -0.26827654728677186 -0.15299108087932217 0.74317224871440557;-0.40410258329133952 -0.082543317557371293 0.0020396398425781646 -0.96216783126560224 -0.77266188339043684 1.1630345759805893 0.79044130175984384 -0.40630967390282879 0.38656495240750771 0.21056501333502872 -1.2316384293813525 0.3564554076998957 0.86455202188338021;0.5615097520520016 0.79573265400247484 0.77639025218999014 0.33997261547218344 -0.064091031220163394 -0.029602798739983616 0.28632660211205901 0.085894725723763235 -0.011436257251498463 -0.03187587396361162 -1.6613140096655317 1.0536143143203953 0.24315360340440917;-0.018320154448913727 -0.37585692754420058 0.69755939646564358 -0.38692796943695235 0.79004365887840178 0.040214814157580825 -1.106091253359951 0.3828074625905325 -0.19530648579583479 1.0838060868443098 -0.33159919298776075 -0.8215913381255332 -0.18725430775746069;0.7269928372516381 -0.61009886747549957 0.17156244308483307 1.39520753538411 -0.33932692926572433 -0.47380262122160449 0.28679269923285561 -0.58421104007516322 0.70298805354694494 -0.21602384327322191 -0.51870191816859323 -0.3516743678539645 -0.29004349949854213;-0.31155637208284892 1.3749926230396317 -1.0332299855425806 -2.051239699282501 -0.82408343245910132 -0.68573961883215495 -0.88784812137366054 -1.377146434390945 0.33441430338530187 -2.080891622396515 -0.23309703084786224 0.8329368874176033 -0.76749880835777118;-0.16708297006982456 -0.17501925233264448 -0.45868290590482247 -0.4398189864728288 0.60728574980489625 0.42119778504450789 0.36914634351441483 -0.65831629831963268 0.025983122818582855 0.24146922625136449 -0.071725415882866544 -1.3771130062131196 0.65488713024964784;0.23177034959638917 0.39719148167158624 0.45586003376311379 0.27411216763769691 0.28275525953965136 0.1849622277519129 0.81274992348995245 0.50431473426038631 -0.2464042384234035 -0.54205743180455834 -0.97587158676659869 0.90299330709885406 0.46067371234619098;0.31279479862807885 -0.40040241911911378 -0.12849633883435227 -0.52958239715509414 0.026005958878487709 0.25434222367928733 0.32561926246501377 0.45180335914315917 -0.13741420753837166 0.14311571147818214 -1.150806431902613 0.070938888230046779 -0.10259756007071565;-0.77385322000828172 -0.89721803258994248 -0.94597138052750751 -0.70288363111425145 0.47693815452985877 -0.80004080069869388 -0.63028233043591808 0.31692341619662195 0.34858155657353385 0.27355807784304581 -0.62782921492002974 -1.0975069761572009 -0.047452036806634429;-0.64180926412422401 0.31381719929115076 -0.65617869532337414 0.25156217298737188 -1.2278338424789406 2.0047339557897366 -1.2860178335857848 -1.2488948091168872 0.051079015388359628 -1.2584994421462636 1.2177764434775233 -0.64683445031758247 0.42766811782655445;-1.6739226054075493 1.0640442804526815 0.17395386407851979 0.86462603732309373 -0.25289278352315231 -0.73940278140388505 -0.81958529238693145 0.65616020490631599 -0.27389866952661773 -0.31831116807101356 0.25515676763983391 1.4121243583746843 -0.85052580956227675;-0.82330926665830784 0.30242573289338825 0.17338625700916088 0.48925403201510115 -0.75254925475298984 0.68198085529426467 -0.75184439662821645 0.10883015437581012 0.039434141382329736 0.39458938031243695 -0.40246679267463153 0.35783368485358957 0.46001797526751353];

% Layer 3
b3 = -0.30030585883350791;
LW3_2 = [-0.65507927461014981 0.38538484832826225 -1.4560248713506216 0.75126339574935275 -0.61005081963176999 -2.3840156441068348 0.36228700195245361 0.60759246885033114 0.052370153737267063 -1.2236376576769705 0.93815281175883514 3.0360474760521274 -1.2475605150514719];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
