function [Y,Xf,Af] = COLomaDorada19(X,~,~)
%COLOMADORADA19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:40.
% 
% [Y] = COLomaDorada19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.290275761973875;17.6991150442478;0.00572573718866304;0.0175284837861525;0.0546448087431694];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.0615836236331706;0.43015032436168682;-0.25607541717537874;-1.9711083170380606;2.7372746935740127;-2.0482461417956777;0.2520808233434475;0.53342021630550895;-1.0485186753639837;-2.919976697506836;-3.3865912462705885;3.9483502699770141;3.7165517680716822;2.138330155520983];
IW1_1 = [-2.3718747385618628 1.232729336882616 0.087529791679238023 -1.2956061434490729 -1.3217288256216793 -0.56074243527402956 3.347002790205285;-1.7751778725230896 -1.9354003667087778 -0.67074350092430546 -1.3796111135710492 -0.17701610615334568 0.74425179515863871 1.3247856176744124;-0.16794470541836334 -0.014958386961727851 0.37119457228465819 -1.447406256219266 -0.35427828513621701 -0.13814027173342239 1.185587570063777;1.4565262820339282 -1.0382615845092 -1.6245966367871958 -1.0061121298641997 1.9626079999960324 -1.792362321716517 -1.066232163810706;-2.0544952061643644 2.1076182641591399 0.93371772257265151 0.54010490513964771 -1.3663281857131235 -1.6221605164104995 -1.5713038584663908;-0.50483769100550702 -0.71018019823709611 0.17603745493945538 -1.7488260216564515 -1.5555970025754788 -0.58856457528865891 -0.38854342832750766;-0.67008525579309097 -1.1010584404801333 0.53137551171119601 1.0840022241648974 -0.57926499960278299 -0.29181736419716425 -0.43508460827340872;-0.20264620796487581 1.6844516157123517 2.0257728274254414 1.0874033386574982 -1.1195507862135499 -0.43644666326980086 -0.95562669660006916;0.24042079924108531 4.9961337523423319 -0.19831022202989224 0.3401623903923004 0.25955346703738263 -0.081029661752640883 0.063506928448559236;-2.4008804617738844 0.14756951294143836 -1.8742166465510071 -0.66755964004304724 0.98949389248261865 0.50807119806277479 -0.15790141445218142;-0.75662827465972149 -0.33356486944973129 -0.87436626514589932 1.1703973828269061 0.50891140538432555 -2.2147265262355762 1.4153113546614378;4.9013991197116216 0.24288128059907493 -0.032102304968651088 1.079461751313745 -0.12036413528789969 0.20451200014761126 0.60378771603510906;2.6133247682227867 0.23206993547620983 1.2180630031768154 -1.9566563617841017 0.40941463529544087 2.0591869326192449 3.0233179378902357;1.1703387923769721 -0.45714889367502992 -0.82417127078791996 -1.4734888751240443 0.26019415913336663 2.0947810700401766 -0.80034525168620818];

% Layer 2
b2 = [0.43545358689402708;-0.44896729218572401;-1.882181368758798;0.21069264058642248;-0.43045688523736275;-1.0147428833661962;0.21737842366010315;-0.079409705574680092;-0.72653347699435533;0.4662712608741133;-1.0583886974548422;-1.6079832653669688;-1.7159635603562786;2.5740723776728234];
LW2_1 = [-1.3823750217366628 1.7863248459654004 -0.46074369932693343 0.62961723702112216 -0.28696710202491904 0.53308226195170183 0.4875630154899645 0.5115502674521385 2.6756674607473849 0.9590187078745197 -2.3165253955507499 1.8786002738833314 1.6636614213606356 0.18954504208925602;1.9470675730842186 1.0120978818365678 -0.79247411321906913 -0.7230702811115014 -0.15442269933466338 -1.1244737369899145 -0.0062618750350538488 -0.335002758307406 0.88149247782214002 -0.27109462249970773 -1.1236908212052261 -2.050876679865326 -1.1602928287503955 -1.0922241411183271;-1.790171286157527 0.26664910062219316 -1.164865756978479 0.19116396430609128 1.4690662947654181 0.95039040525258023 -1.7910882379797035 0.060330927827126082 0.31834097199171052 0.35432063318827917 0.69801262178445156 2.0340623565794664 1.2451019103908549 -0.14475047661139442;0.35579877890311729 0.6833241949735307 -0.84288781727620099 -0.62971554184701095 0.47270203117292164 -0.77177553347126282 -0.39787889343538163 -0.3388439766611786 0.49457004847910691 -0.38748409875549333 -0.085136866637149006 -1.5291652993736875 -0.49954850304737874 -0.62589621664599926;0.23741112123706679 0.1487725667022948 -0.55186007969156481 -0.4049388875673412 -0.072553655706094428 0.53133598401479132 -0.78023998456866883 0.40993836694438796 0.64292725519100402 0.46952224955258437 -0.63606860251065045 0.14951409885830316 0.36770885054073843 -0.78945407902683773;0.22274124327511893 -0.050963847475271822 1.1174285904584667 0.061774353780445976 -0.29544163443289506 -0.18527532926764281 2.7645575805629434 -0.83682939161918968 -0.6076152773094724 0.72656852284838414 0.41451518164680629 1.8962650365215246 -0.70519780304843271 1.2732585943118135;0.10291661454568421 -0.3878405067107516 -0.67034083003733069 -0.11622711667298909 0.3247303948380349 -0.12679751530153413 -0.39335402285109605 -0.29492365051502628 0.34823172162395893 0.072624602959088999 0.16540353005666511 -0.044678955982412422 1.3301451903695887 -0.13181864686112235;1.1139550649082548 -1.1246462336169849 0.55517638328780805 0.45891797129708567 0.8594670438130162 -0.10974758403693 0.39028406695883977 -0.57726023507991131 -0.0062858074558407306 0.41970825738869039 1.040000579544502 0.31431975435187426 -0.1608147889221121 -0.060679533970580582;-0.280113035474436 -0.078139747034093446 0.65253044574221319 0.14314038197917217 0.63734929551020214 -0.18967630904449886 0.95702328739937603 -0.020120294164849756 -0.90010534612431992 -0.35127928914044604 -0.53327599314904472 -0.68944561167177765 -1.1452962588809417 0.038503442562052584;0.018812419285712603 -0.52905601474713337 1.3922307808792262 0.095381625043769971 -0.57102795214690172 0.29060282707415758 0.71926277211375211 -0.63604800385863614 0.35695180541128085 0.36960880749891079 -0.24949931820295401 0.40090357836865259 -1.1423562831901848 -1.0509130160444358;0.43137589856013647 -0.43891679893633911 -0.15894153470763772 0.047268979119290143 0.92955692984725813 -0.26007857279987801 -0.46554486561932051 -0.58847741706993484 -0.18441904728297462 0.01239586465057497 0.89118852642763591 0.2325089048089779 0.062449613459516544 -0.12115029737424761;0.92525710292462815 0.073884849890603344 0.2659671181603307 -0.37490288790205173 -0.32210436811485421 0.45310900011816035 -0.049959049856997478 -0.43786530075608798 -0.22109531088407353 -0.060434067276662666 0.10145802658776328 -0.2747990800408891 -0.10861905668169482 -1.3828005946818054;-0.52913274381688402 0.41341603321617648 -0.31167919846389219 0.68531961912222805 -0.33787793922484366 0.10371565626319307 0.64539145733009884 0.61023329718698627 -0.43488836173319867 -0.83390781520029933 -0.56492151171152094 -0.053551924319991645 -0.7216164682309264 -0.90433195483986295;0.31609173532352619 -0.40201740315612594 -0.31776623568182666 -1.0266824690973757 -0.40140827814593139 -0.4006124163825352 1.3915103963112943 -0.64130707765087258 1.6668831499268832 0.55692965525244509 -0.34503765308053774 0.6274890150797191 -0.17503136810024617 0.48138881309441106];

% Layer 3
b3 = -1.0970161277439228;
LW3_2 = [0.71947574002498327 -1.1274602695709623 0.60057418246861982 1.9296890393487025 -1.5433953193184098 -0.46185227783711219 -1.2167930232745279 1.1013811349936808 -0.99207417738739301 -1.4232262753301776 -1.9381728073128461 1.6806435621283877 1.1674596373780479 0.99240840096610639];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
