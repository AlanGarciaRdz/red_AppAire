function [Y,Xf,Af] = NOXAtemajac9(X,~,~)
%NOXATEMAJAC9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:15.
% 
% [Y] = NOXAtemajac9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.04040404040404;16.1290322580645;0.0210748155953635;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.6237120740512361;-1.2747967896734711;-1.5834658956635219;-2.5850230698298424;-0.068397383391065103;0.64264700616006865;-2.4962757667457307;-0.88211355074568532;-1.6866162619746357;-0.88613348990970087;2.6873970372598786;-0.22500370373140421;-2.9438746126216508;7.557679855362772];
IW1_1 = [-1.1359602751824747 2.2962860419717024 -0.32188157139748991 0.69089012722052745 0.98104827334133649 1.7290471599644901 0.32518741388829991 0.30608973353512392;1.363264416949997 -1.8632727965890274 -0.058835407795527352 0.84540510582082784 -0.84302950005424604 -0.84067167728990377 -0.33240527792919367 0.036216824553383313;0.20326893067959476 2.4184105648227274 -0.37373308183911674 0.27068389362926321 -0.32792651460089539 -0.74704442070892019 -0.037235096989517269 0.51935337397874948;4.7045052069847086 -0.2262824006954689 0.92135296078427575 1.3899640421884614 -0.72260353707568892 -0.86373615751630906 0.21313029496839112 1.4085463557586115;0.5081516807616584 0.37515584888020592 -1.1461424956065813 0.051015341750827198 -0.7086696350217625 -1.8730450168565858 -0.46358454326106563 1.5344781191668269;-0.98985573957721462 0.1445452990309655 0.8650118847678635 -0.32282838782033929 -0.2249243713737713 -0.9173030114916072 -0.31923599161575394 0.21039318044314564;-1.9895575769532134 3.4238438715031023 -2.1136607636436198 -0.48441279396972087 0.72840534101497778 0.87064965695774688 0.017747082072720674 0.096825280547562634;0.47721391358010246 -1.2896476446278515 -1.4067929239554908 0.18666655129728194 0.61388679581432226 0.92358769722964662 0.3116360495382704 0.95700583755665281;-0.43149044149395543 -2.621133257666945 -1.3639424777327982 2.9143300164556316 -0.091640793739883375 1.0652785666109899 0.19128166012679193 0.25709549932033887;0.32908629388431798 -0.58590770426913286 0.50184757366713362 1.6140205184498173 -1.5952869546874107 -1.0273223372340117 -0.60098633655568223 1.0718846463566818;-2.0870668095961595 0.55670155287210243 0.4436959423892104 -1.2693082143817271 -0.0084648185816301597 0.79561724478107465 0.36513256137734657 -1.1827252845380467;-0.68339569568189584 0.66590625113851987 0.96238080001693016 -0.26099120756653726 0.07481050558201735 -0.3102543107890699 -0.34529931401894925 0.044969769932626365;0.052871654297105893 -2.5496584979580654 0.61152387170175648 -0.55731665931790941 -0.30598406426629116 0.06649714184730926 0.22625541356928908 -0.60412910039491707;0.60054099093447721 0.27339581933627621 6.5551379534148921 0.10951109027839899 0.11366838972536525 0.16709420763833144 0.028254824685922178 -0.16243214190243191];

% Layer 2
b2 = [-0.78563676147722872;2.1326519378374207;0.87480513244015656;-1.7785350638796684;-0.65654967692780253;-0.1222563119067023;-0.93012546021880982;0.048331626336546293;-1.4257719693364264;2.3267759280786708;1.6057466419716737;-2.0909432319882679;-1.5948631321229314;2.1680711503640273];
LW2_1 = [1.4135107167606664 0.90697435035205998 -0.42403781798756235 0.44746250983445068 0.36153148242103683 -0.61499359054022684 0.060508655912401968 -1.2289513123788625 -0.090247611360788987 -0.044936478641110188 0.89984018781141029 -0.18505151931304112 1.3393234631306554 -1.6433871033095542;-1.0697465420968424 -1.5180841762723354 0.026652582812219352 0.13064707742999329 1.1530269369562109 -0.29933484072893235 0.54267229683406659 2.2529332061828429 -0.42999951840526351 0.3433835113157257 -1.146906552063508 1.1798950767149665 -0.21579415841896052 0.88994955454998137;-1.7800972769731134 -1.4554137513675909 0.62105661805223777 -3.1291434652717345 -0.083193432433422171 0.68274268595871757 -0.55031682452341601 1.2551637582413446 1.7462338390549224 0.85657342743857068 1.4793516861624516 -2.1550995306123228 -1.6619277059667097 0.70312969356995969;1.1599885525830804 1.5932546306076194 0.32534659582436021 -0.19434182245615733 -1.03838257552497 1.0975492265339015 -0.33296905051634162 -1.0216141345773917 0.028306362069924339 -0.29034839083153624 -1.2384257325135604 -1.4876741775656399 0.3950634524804546 1.2714917772025796;0.29125410460034645 -0.86659881900713764 0.12474297250681071 -0.29572787657803457 0.3508338836521987 0.56167096701141017 -0.44000972988490394 -0.79352979383911837 -0.24278234221935763 0.4252379520876588 -0.10606973270898068 0.61515016863626648 0.79811904224627206 -0.81054839349146457;-0.6240402338623362 -1.3564426335126119 -0.032201637801246193 0.57301795170179459 1.5179998299468465 -0.10623136145010663 0.67564742188796467 2.6740706959197329 -0.7528774595289156 0.54034231786126607 0.38245600682121211 0.77845827866973316 0.2286470870896101 2.2198758050741771;2.0645133206774395 0.8533094965293746 -0.24125314731755093 0.3273523722023961 0.54470301004563659 0.55241602753858243 -0.34820720527197929 -1.2537467841152632 -0.17685216576189988 -0.62990333141397714 -0.83930063162927182 -0.54938457257668671 1.2564554669353387 -0.31543501520469214;-1.2442242670961656 -0.17619805563778135 -0.070572390655151113 0.060760405502363779 -0.51086771922076113 -0.58053474576022424 0.4393507385089262 1.0088968146556798 0.27772773853336213 0.35848647029869324 1.325505617816074 -0.1816534159730735 -1.0221614687572422 0.5502495598719741;-0.55512150221541967 1.8177555485425119 1.4037448796992658 -3.2641968326810211 -0.72728722509812482 -3.0918143337534842 0.59562094937220211 -1.1577454445604543 0.76155774112836339 -1.6826148243885242 -0.59154683677749798 1.4025559450445382 -1.8608405138997455 -1.0409094338279268;-2.4552888956804417 -3.7104685416832579 -1.5818581311110449 -0.40281156182362199 0.67803906711117012 -0.43507083181460243 0.088809461683083429 1.216022157805619 0.61671547772174162 1.6019970582632712 1.3660485223586196 0.19687249416609842 -0.55692122188028015 -1.1064886671057723;0.5111256784934306 0.19196675060427182 0.75130521412841922 -1.1585376095866353 1.5413519799485942 -1.405214315982305 0.10450945657552956 -0.64693117795261279 -0.70141895850643166 0.99179376371756778 0.67503774389290994 -0.65858070413062875 -0.30539977714303607 -1.9758844675074789;-0.41498061274111442 0.775115107757819 0.0050135739623373143 0.77581513907042454 0.3641046150972051 2.7511245838028797 2.4080165090554644 -0.93068460019144372 -1.6471722475724364 0.42626737028549544 -1.2248386730668155 -1.6297557184672824 1.4795371246526896 -0.84029706925698266;1.3051755943256513 2.1198864643086361 0.26899282076788467 -0.097824120527962133 2.4074260067956352 0.063788304043928434 0.17263648041731772 -0.45295011331838331 0.0089293106428359956 -0.2597746343365484 -0.35365431045471252 1.495606387155616 1.0974213237321042 1.7940030594487626;0.28630046657542679 -0.71635155160456543 -0.061769857170118944 -0.39898811524427891 0.46911149520105555 -1.3321840073101217 0.9485136798160686 -0.8518847376630545 -0.65497716322840127 1.0987492053374213 1.0617411102345817 -0.46254593459787657 -1.4464108274338179 -0.81475769675587939];

% Layer 3
b3 = 0.99658392342375257;
LW3_2 = [-2.4678553056877326 -1.3842325201396426 0.73568844638847919 -0.97334366898586799 1.4654335136090597 0.85660804220426323 1.8671293189704949 2.9752035978558964 0.065367779807013124 -1.9445252415775607 -0.25804602587582848 1.5029560723371387 0.1668607154158413 -1.3460351033061806];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
