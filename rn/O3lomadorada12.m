function [Y,Xf,Af] = O3lomadorada12(X,~,~)
%O3LOMADORADA12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:40.
% 
% [Y] = O3lomadorada12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;17.6991150442478];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.5364328701667231;2.1985379056637426;-1.1853409569763111;0.75521870118387646;-1.118991181002825;1.8717026997202566;-0.26276213500858647;0.59956205176295163;1.2897072866266799;0.58560364511969165;-0.17892364966453844;-0.3164539364936888;-2.0268108407910592;2.2751485647921301;2.8274084128542452];
  IW1_1 = [-2.0744092364501494 -1.0181334271013267 0.13180638431068956 -0.12290127753784692 0.40298373941356924 0.81438448791301776 0.26649517068871054;-1.3048661423349044 0.47271019646858664 -0.7397938080001768 -0.65399306475563768 -0.33074805233983295 -0.53899126108273421 -0.62427415229249972;2.0253585957498603 0.25054901661295775 -0.31062938275494356 -0.56082170573407242 0.45121837992552077 0.0043688842871537903 0.79802974092416312;-0.61908734615251237 -1.1501915786639638 -0.36178769334183097 -0.46429677364337679 -0.73525284490881793 1.2229435339710106 -0.51344181669543765;0.083335198146452127 0.26609387514451355 -0.476844055383428 1.392824447418916 -0.3897570363073975 1.1326064513490721 0.83605438787662545;-2.9085911947151377 1.122262269945993 -0.083113945467896772 0.10681270447170484 -0.44958291912607157 0.54546748903867315 1.4625282281248253;0.74682389013578432 -3.5334402403290475 0.93191933297576379 0.6529457909068247 -0.29126065883507685 0.76114206805373263 0.22499357924137522;1.1617330209741803 -1.7620696150824051 0.1050886528708431 1.0132225065904796 -0.5616608528519994 -0.19576027702859169 0.76371208788159117;2.5405574277775136 -0.16111894328662721 -0.53290476514981233 0.28601488525898661 -0.32179005312835629 -0.28041310976885347 -0.16375465347836154;1.4185483127575877 1.0976157521561942 -0.53347739638864888 1.3664768121080706 -0.40664943262157516 -0.31745324735565533 0.7930946519160661;0.73392043626998893 0.70192371930357378 0.12665743390593354 0.019930552472494631 -0.77254747264611623 -0.66398996969591484 -0.38305227632292116;1.1307450751057573 0.21474747782994458 0.11779118222719248 1.8331783623674165 0.14971413819883547 0.42257249067117253 -2.3873691175911564;-1.0091757498444063 -0.43875186499530849 -0.097762045614357362 -1.1452306374082508 -0.097982575253709944 0.086657441539136862 -0.54787574919136894;0.042859149634740849 0.5510980589526655 0.86781907081713305 -0.01477596221750764 -0.47331100893275913 0.62072778513180682 1.3621294762562044;0.25523768790784829 -1.4824636068569059 0.47933825291839327 1.331384569902659 1.6082789604209526 -0.0324948222437903 -1.3903978057831705];
  
  % Layer 2
  b2 = [2.086165131981319;-1.650744444285011;-1.1202293904610086;0.9655052733940942;-0.8901445280667355;0.54012423382831121;0.18880904797504053;-0.26583348831623621;-0.44834449485626471;-1.0318776465802666;-1.0090122789985831;1.3272641924663093;-1.2879260674086661;-1.9547429041839455;1.855835237072808];
  LW2_1 = [-0.22693351022037597 0.88526951223783723 0.045669839840573795 -1.0754312612553198 -0.66652717255330685 0.23259244249948893 1.2665673669282138 1.4143052253497685 0.65878483230313489 0.99640585857622421 -0.060763245924778192 -0.81461025637956386 0.15068181105656739 -0.27167386782920105 0.58048516357466573;0.67962338813794843 0.10499666865818755 0.88307242187084056 0.54560213785333422 0.80245557228916264 2.025396158912431 0.69379391544978075 -1.1156478863566259 0.47660355596143633 -1.0259804748568757 -0.73766425883818709 -0.092296071581669803 -0.52594865655112788 -0.67393928078455823 -0.82676585420442317;0.75867517689332109 -0.64624166510962378 0.31287441156607554 -0.2105045742223865 -0.0082536014164825144 0.38987684134470257 0.11296715772044946 -0.69087445314853613 1.3984381616920305 0.78116159535443774 0.26301115861239438 0.28801019730824234 1.7308569699032461 0.27281842433197284 -0.35306661110809956;-0.00081439905541802471 0.24600483956027488 1.0355821338359137 -0.54886313435643996 -0.19330117990737156 -1.032009787167373 -0.62694478965495126 -1.1595936796682136 1.422701132435839 -1.2554347414866176 0.15648171861142338 -0.028634805693168168 -0.14090624991994777 0.31470714676562561 0.79435383070444121;1.201749761713266 -0.52286364376717087 -0.16680044703429314 -0.20183231823784151 0.45765193012604832 0.37617337863087069 -0.28868491220559311 0.19661681703005482 0.8482973737665821 0.71705065348579766 0.47876312334768772 -0.17018865973597785 -0.60350224451059209 -0.54923640193438605 -0.055181997072814723;-0.71769752015993782 0.15917569131750736 -0.2329517093278291 0.31611397901865662 -0.034897718911045254 -0.93265170482442572 0.55559135787457303 -0.41170639111781165 -0.44800331569024132 0.26335751849368844 -0.084451961366565853 0.013353467220205223 -0.35803790529117341 0.009381501163602618 -0.45064638391123846;0.051447331951372924 -0.22635507912958769 0.5819924812052959 -0.3296699950933823 0.10736249273786362 -0.41117604068190727 -0.13426813271987603 0.59319255617829225 0.83222330672753198 0.5736565466146113 0.28674463374863279 -0.21987547909523072 -1.1061216903995355 -0.05923128305484876 0.68876396195143996;-0.41999804608299068 -0.33605891214476008 0.52602486685540262 0.19573240240436773 0.52947346757733937 0.96455077614242313 0.58372582362948056 0.045496343098796271 0.10850185643234911 0.57339346643817801 -0.66410482161831608 0.91126126317230949 0.65038911373159047 0.13644432018898703 -0.6932520512267244;-0.24773605073524615 -0.57704897338413141 0.071928863581347202 -0.094770579022200721 0.0012476791771356202 0.43392157984121532 -0.30761409459065897 -0.22728969733157825 0.31056070996246632 0.1543009898016717 -0.74707713481127735 1.4537735101914422 1.7677953185260284 -0.93774392823059838 0.24488570205984833;0.23511495419459724 0.118139241033243 0.83989957202975163 -0.061167016117502179 0.036850776122428097 1.0553740885830594 -0.45573921327187905 -0.53978098784298401 -0.26473522403430227 -0.57990321971931946 -0.0095209514508207433 1.4819739419315145 -0.72805868285097264 -0.22496969710641249 -0.17331116816754025;0.16138557818215524 -0.95989718595075713 0.58690809908329944 0.15229567424348156 0.7543489715688636 -0.081250092249550432 -0.45708835548902227 -0.1280933316879509 -0.82059228034721376 -0.05301711128271816 0.71420795451090902 0.068800280090108995 0.29692396452403635 0.95003157133006932 0.2912357005391063;0.61316772818821719 -0.23800598054056782 -1.2079363997002621 0.51542041614359424 -0.35384494147166473 0.15737716994441983 -0.62403058352124474 -0.19366085720871118 0.43011650833032239 -0.64828588467482007 0.14727590972062635 0.03856768930312772 0.062008866087250342 -0.39890843039080554 -0.22466969498900957;-0.17894328456741834 -0.075920498902314892 0.80112505119726718 -0.17780429940289283 0.27540857420791004 -0.69028487048042619 0.21059409001190069 0.61336112435838552 0.29256299442339501 0.46062256076831209 -0.45540043673691621 0.70089169852474853 0.037340712337399336 0.2957217464885683 0.42478502018217268;-0.77833117572296517 -0.55214327891737913 1.571404728237799 -0.60756453831753199 0.34842016181299318 -0.33646138641611095 0.78074361770853995 0.57453937946667655 -0.14228869201877947 0.57095604370555153 0.015897563126020909 0.30489041406082784 -0.26455680262234249 0.44029655878204449 0.17912349333984923;0.79735036647822255 0.37174086698130987 -0.27569839790286066 0.76671772025501317 0.39908775495932303 0.21533314450324342 -0.78039015971313441 1.1108217975409778 0.16073376028125486 0.29950975329836638 0.12733266221576109 0.53841493528195694 -0.051587385005014585 -0.42987665877235393 0.17077744101568487];
  
  % Layer 3
  b3 = -0.1638350807420976;
  LW3_2 = [0.99561317549828887 1.1543537050725248 -1.9217664450278706 0.78979356836116843 0.74520915879208927 0.38251857801430189 -0.62710947736172529 1.4342994414103272 -2.0926289277331627 0.27286286824688483 1.4142067706921713 0.56551541728161303 -0.01843065856974755 1.0482681784644248 -0.94041144748562244];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 17.6991150442478;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
