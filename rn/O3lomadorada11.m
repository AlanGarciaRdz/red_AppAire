function [Y,Xf,Af] = O3lomadorada11(X,~,~)
%O3LOMADORADA11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:40.
% 
% [Y] = O3lomadorada11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;17.6991150442478];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.2873547935017355;-1.5351548341819501;1.6905406376527321;-0.51995574085226037;1.8746061506159157;-0.41326438188719239;0.24640803296216574;-1.0509335921579568;-0.044184966335728972;2.0613147782114081;1.6625995434168326;-3.7780989555420552;1.7898025442792578;1.8081878142559087;1.9644256913380791];
  IW1_1 = [-1.1317497116578386 -0.10453907984472076 0.37711205914778517 -1.3175616705276947 0.26689945594437542 -1.2571105314970807 -0.45143334740531127;2.009971181103003 0.60064520436349023 -0.59476418918337282 0.87956155458662733 0.0707580630750093 -0.37815269074047508 1.0726616490406518;-0.26145577284905264 0.58595128808038976 1.3947826161409775 -1.4111947080529297 0.31989984169790575 0.41322730519397471 -0.84855394867493406;-0.80844383227705441 -1.2602157090613013 0.46165940818694912 -0.48239539220146765 0.12994199416149652 -0.68212977050467127 0.4294744908757388;-0.22622880808433823 0.29070428158752065 0.31766622370891562 0.19402628109989431 1.4344552359990053 0.9151982324401442 0.029448306475284562;-2.1369731465166328 -0.1753347932919336 0.41690017331068968 -0.32299626638175516 -0.14165442404687281 0.34899935676033872 -0.29863187224764054;1.3682679666053819 -0.80397043750029973 0.42954271844835601 -0.37234529647085218 0.38873261551458588 0.054757872190542525 0.59882870831917712;-0.86713087662748101 -1.1027104295747521 0.23104755318711198 -0.46868891173035448 -0.58907886719124147 -0.16689754904983464 0.94873188797582875;0.4954695155253066 -0.28880126280359519 0.45749510986767972 -0.083910512518210745 0.19331327780657867 0.83827329890159819 -1.6933568505277254;-0.54417633091735718 1.7427708065006622 -0.15203089237905343 -0.059828546393239146 -0.29507731570106921 0.68658635690884739 1.3779831282475692;1.3719881216306207 -2.4261673980022005 0.33380994835679406 1.1200954529726399 0.20223424855408981 0.14238423438363892 0.77703830916454286;-1.322253222666421 -0.32185482536992438 0.29892640467968301 -3.1702556733755354 -0.90594621733873504 0.48501545829447662 0.19223742237746383;-0.45153939136946736 0.30552561673962958 -0.51673837052563709 -0.13176724904267234 -1.2123630435563391 -1.0786573459008482 0.87786799394399329;2.4014905934143012 -0.22805220385866637 -0.085552922147876825 0.050094436216419569 -0.2611065697503655 -0.42389515083900808 0.24816075103848309;1.341655599256286 -0.71025421720240756 -1.0826768163694451 -0.057653890261479754 -0.688542623158102 -0.62843018309660248 0.012793379241236772];
  
  % Layer 2
  b2 = [1.4688383730893491;1.8960899064016377;-0.75290436380525949;0.44455905591045131;-0.42627736778859049;0.30042406026967905;-0.92604434908055766;-0.42494898004494835;0.41528073908949553;-0.69316893319747852;1.0593465323315217;-0.98836904841186946;-1.8952489008672702;-1.2719325654652571;1.4177596915750661];
  LW2_1 = [-0.42820887163955357 -1.1656824671656225 0.95636588336739736 0.087010943783996667 -0.0023861379936706839 0.70457153748197821 0.26775485815190186 -0.71623299320541367 0.39653884275078699 0.7875385271423474 -0.24281580891405224 1.1556189431133406 -0.40040179253535829 -0.61637127333620512 0.39402091655964783;-0.22994002131343047 -1.2919437348109406 0.12951932299990726 0.53180660647904909 0.20272914267814088 -0.14504713384148277 -1.993152042970936 0.58653532082651272 -0.89060765386367668 0.26359337830583091 0.19315355676119444 -0.43485263942910274 0.24794377194180423 -0.092759975141155387 0.481807791833197;0.55048420285278765 -0.21015423500143263 -0.35147835591966925 1.2401327207266672 0.29911938734143134 0.86763979488338583 -0.66072528514446605 0.13074003770440781 -0.34441987390556966 0.55961279426600519 -0.45082612295723373 -0.39689406283541712 -0.72015360446740528 -0.58588475542386331 0.60129330025453454;-0.67648251640934287 -0.2078358410360174 0.26092095454747205 0.44065815916882645 0.14725209982689155 1.5527871621060261 0.41742776734878129 0.4230576087228381 -0.67547476540539275 -0.11914657089548791 -0.79226199878155457 -1.0055515273397977 1.0072476394715826 -0.51077836304455759 -0.70744521030012375;1.0275192132545259 1.0265300066353902 -0.63804454402761379 -0.70644866367363035 0.19300276543576675 0.31187243115272362 0.89393909990178799 0.87769106861715418 -0.24831187529963686 -0.76420813327965087 0.027006417642637302 -0.099145335711903454 -0.061160422447857327 -0.63655477661197757 1.1387017746629562;1.0589947857267969 -0.30815511125197032 -0.39329815108231536 -0.15387327106576559 -0.43632745966508318 0.60766109324126938 1.1622294528900374 -0.20671112158580551 -0.17087499802797093 -0.39081828975608585 2.0454753998698583 -0.81933309120900999 1.2541011388539365 1.0225762786800898 -0.17746169300096565;-1.1954339849159976 -0.10434848719452129 -0.88237960804758742 -0.73867213020924771 -0.96488391453768951 1.8430374783556236 -0.47626023204092482 -1.5253662512418582 2.1058849324185749 -3.3508524853338941 -2.1668695100966331 -0.21394187044728913 -1.2779256372583121 -0.4128276748356059 0.27151262733351916;-0.9490151994363154 -0.33864985820432697 -0.73332962464952178 0.94293891521381734 -0.47507298687864619 1.3888297030708927 -1.1930478266330464 0.64749131450808084 -0.29092578497076571 0.93827374114578144 -0.13545986785516492 -0.48670533776053637 -0.71730435986882679 -0.16153637911055072 0.40154373153493805;0.51802388816111389 -0.23624855074965562 0.22278080115481988 -0.096537019109032285 0.072525115932583484 0.59048821821198416 -0.16264822171960108 -0.36656974524970914 0.30174600351262459 -0.88374855103371641 0.54915015698622993 -0.89947493323492544 0.77426891083204274 -0.2419708024087579 -0.54600540805676334;-0.53585289914946588 0.52288102625396637 -0.35956827446207895 -0.19626979831051444 -0.69044798374982408 0.070367173326730009 -0.81292590331990755 1.0117240724586358 -0.72854658882089041 1.1003457931954808 0.41601207258570783 -0.20396630058432785 0.38658199129063447 -0.12458550072067079 -0.84149209995181051;0.39405640170293527 -1.0975549457414815 0.7253762332635374 -0.43799895017045437 -0.42282704012285549 -0.5446174696391789 0.47300491575672254 -0.90049574537861177 0.14880077335159791 0.9859256444248784 -2.4033712010960966 -0.28069081418508002 -0.42504217395544558 0.92151998533521406 -0.20656082914367441;-0.39529240175699715 0.53202038889249237 0.67090790497369901 -2.9141072885212331 0.64801047081031393 -0.47187958605813723 0.31619775168360004 0.11959914550343848 -0.19677537710942025 -0.85198664500235965 -0.76464800654999754 1.2639897055178295 -0.024555569998097319 0.32310279242080359 -0.27767750473670549;-1.5051574364764131 -0.059652328745204763 0.76349956381582662 0.71323287228070154 0.73472003527538021 0.82861273409222658 -0.071365940961643323 1.7705502902576655 -0.24315107608655304 -0.93336986445868864 2.243437258783608 -0.082592831859206337 0.14636537618560108 -0.029786486697444027 -0.58290354089362706;-0.2148700085139916 -0.19618319750599528 0.20722784637153197 0.47355790517845664 -0.74462694533534979 1.5801318235498025 -1.7744233197376496 -1.4408961454404883 -0.78987607924000236 -0.20490472175715999 0.3245599985751213 0.91233683114936148 -0.34274369219828715 -0.77622667077557106 0.67686465076085867;-0.13486048960570832 -0.15191322390495154 -0.33195609596289827 -0.68704433438594636 0.5171489296144719 1.3920570852628962 0.29418681370720579 1.6570055752252968 -0.5484888019647397 -0.33646040684062567 -0.20618942165473575 -2.5544141414637913 0.28292638475714804 -1.1243280483738929 -0.29484531395798547];
  
  % Layer 3
  b3 = -0.83927631083832122;
  LW3_2 = [-0.9355075043736002 -1.5867991749449564 2.036602801660409 -1.6722335236077626 -0.96433596678600786 0.58433672565174533 -1.582141303885984 -0.79487609571460649 -1.0798541077674499 -0.63464911950644942 1.4893791854031007 -0.22212987296970654 1.454553595797812 0.44594391825390767 0.5681962603547861];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 17.6991150442478;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
