function [Y,Xf,Af] = COTlaquepaque13(X,~,~)
%COTLAQUEPAQUE13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:14.
% 
% [Y] = COTlaquepaque13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.2667530788736481;1.8928362589031096;0.37224925777888396;-0.90139069253333326;1.1523303084254293;-1.9964899771687721;-0.028252416969029741;0.71164027925932993;-0.34576754098608781;-1.5229310868707557;-1.8131358258209793;-1.3975430896970256;0.66719818417048815;1.7705826893429029];
IW1_1 = [-0.41677593564790866 0.68739805274234611 -0.21348664223298466 0.020344913654001987 -0.047496737632248334 0.0042507161932547055 0.87241092292870159 0.073395355236065843 0.27030756237926701 -0.92423690092659894;0.10907708678870197 -4.1382636693118044 -0.3250275035492477 0.28542678072658928 0.074478667251172886 -0.58110556009489922 -0.083560564630252479 -0.04714956213799458 -0.02297663123381009 -0.66400223650515389;-0.85870574022339996 -0.38713427866734829 0.28415653255358825 -0.70542135069847856 -1.0353238846048032 0.40630764089562416 0.42498023425995368 0.39781235550118005 -0.035455407172046767 0.15898482983512643;1.3986775682971762 -0.71720727869223222 -0.012135528646329916 0.13521030043303034 -0.70207048514623782 0.571777440472515 -0.42092780047534328 -0.13806289626726803 -0.63494493622334369 0.71478784519717309;-0.71163710259242463 0.20274332448136698 -0.26978022300009885 -0.45420831865156841 -0.29043515939733155 0.68941998697861084 0.83761850829805562 -0.18113371854558818 -0.37144163712360584 2.1935674926568582;1.2725137429966353 0.12443974867490235 -0.22342122534451106 -1.1955603424848733 0.13047630475566294 -0.068630294074556897 0.064982835028479624 0.75583772641704272 0.81485416128790333 -0.31035534774458412;0.23901146269559059 -0.721310422784329 -0.24849019193926669 -0.16634474259903567 -0.41941825773670327 -0.35566875949481846 0.11106126068947589 -0.0015907061688889492 -0.18553376738679919 0.31750697181980519;0.16653517884557906 -2.3680230177623329 -0.63478798530377334 1.1044714551591888 0.093907988079733065 1.8277734734706452 0.5862211427921572 -0.079554453544094655 -0.7748453093305937 0.44979822529355712;1.2065359930254107 -0.31304611492706708 -1.0514467715891884 -0.3110804636471981 0.055325176751010022 0.029056898890614608 -1.2586110482224364 -0.074085815585270748 -0.55863773698408425 -0.93885465000910306;-0.19589423652122004 -0.56832018169684906 0.1358221655540402 -0.44447441509833896 -0.66645077465141556 0.13245205956062334 -0.1226956079411871 -0.0086423886610788783 -0.33692966640921768 -1.4817168308638973;-0.6218929057597482 2.1633238590676553 -0.53753223396059713 0.83845673832149892 0.6899054366560049 -1.1815246716904766 0.076786400149356712 -0.22040218742526327 0.50468651767935013 -0.16171224328223202;-2.9640141745888777 0.04794977331678936 -0.22412735946872167 -1.3790255479468578 0.47460604754880414 1.5520552602270432 -0.76280612632538791 -0.13957234549428582 0.73691414141960798 0.49671095637453017;-0.21876034673350978 -0.53317436162182541 -0.0046239981837477495 0.22505894651011177 0.020173951357509969 0.8988009338485744 -0.14498195822352 0.3183575152584327 -0.0052702984555578411 -1.216664263601672;0.089193788040368885 0.0056117811958562762 -0.53259038950121618 1.0700139656707739 -0.73197455745733309 0.25478405002322951 -0.57503220510779074 0.65414449804096741 -0.45815180573958514 -0.58311435084591334];

% Layer 2
b2 = [1.8978625247811647;1.9566178834081958;-1.0616519874917079;-0.66443897818616349;-0.60805464522087527;-0.41417097675123743;0.75530330729620632;0.73072412154522015;-0.10108502431149974;-1.0305580986314855;-0.84111474678077369;-1.6725569326853551;0.55738285000242471;-2.3633244660539705];
LW2_1 = [0.52742141566105361 0.14046032566777822 -0.40131146805300627 -0.56921905467487999 0.69103619636007285 -0.16537446654965665 -1.3235844295902295 0.62061428448552947 -0.052700762937815754 0.32577696362814873 -0.70550722025077117 -0.5164376348308769 -0.16083923810784717 -0.060222191729658509;-0.6649237172528546 0.58610296448152532 1.4449300389031492 0.3514844747111342 0.62948791032089257 0.066392980976617638 -0.24838272189252242 0.13292254866562206 0.14957898628625096 -0.0093615028084156476 1.1257906793857948 -1.0913917847990218 1.1098861641599735 -0.49118432723268324;1.0888021837190591 -0.72326707789546596 -0.26062226746305239 -0.52441537110486414 -0.97860300687698687 -0.078330429979594524 -0.69297965820484664 0.04923573901216749 0.58679728250718288 0.83613524575170761 -0.14738770355370928 -0.38322954365751982 -0.20904981391735239 0.033503272041190996;1.1994197295161266 0.64204838729622771 0.017212257959113315 -0.51327117076084983 -0.33666590210807573 -0.26320165897185854 -0.48769803642053522 0.063585246513217619 0.34784634437195316 0.28784973421590976 -0.72891047474388204 0.10964318181147746 -0.18467986451411417 0.57268358435770883;0.86352057621430245 -1.5385806960428889 0.22257419437263351 -0.2839571315989517 -0.88757765714264147 -0.48067004127380503 -1.3041110171730232 -0.54212742296383232 0.63202177498091061 0.28846606686838766 -0.34393211157264508 -0.40185458781893507 -0.693115447479142 0.79568781607849282;-0.50420593048313656 0.84439235318769301 0.28832952244096394 0.44886441708919012 -0.41729049863071882 0.18257125172301877 1.2102936509463615 -0.4591281874794565 -0.12919732309705451 -0.7467390315383603 0.41719732632755241 0.055033775050562797 -0.29191328975804554 -1.3842760600766728;-0.10601609047989455 -0.074259324921536835 -0.39402318773264683 0.68253846747348568 0.20779005863806529 0.39779250354923695 0.13891544236587014 0.37709413034053912 -0.35330531662800435 0.4486435674933954 0.51698286459766507 0.50626602334934101 -0.16117323866237859 -0.23049262970286033;0.77004220308539129 -0.80529827162170275 -0.90445668206295182 0.83847259206066105 0.68498731832122139 0.16279572882542237 1.0547478939607495 0.88573500106598191 -0.47141035215771621 0.72824087860326991 0.805771149961509 0.73466509035773486 1.307701442605758 0.069703331588136491;-0.68272903667425644 -0.093596182654835131 0.095677295324958167 0.75924492637465013 0.71851314362670538 0.21784720135043639 0.48253243062812501 0.14510962798525015 -0.17148047079008299 -1.046832130891147 0.42105944715674676 0.17749991474674212 0.18652957715598811 0.19974711312806981;0.31925228271311962 1.0617724332585872 0.44651319943238837 0.86971754859591699 0.38062456165391723 0.0046947951992948218 0.48637193246431104 -0.026704584878404162 0.45242607639515836 -1.4262219377951186 0.067446660994629967 0.39568724578091058 -0.2380442373078161 0.10733613163633084;0.97085664211485656 0.0029945593979369481 0.69880320186089873 0.09024041671284011 -1.3980686982462636 -0.090381873326719542 -1.384328437575602 0.21042846839602256 0.90286055310167124 -1.0530271989464008 -1.0229649082646992 -0.93170775902618352 -1.0655266501365401 0.23810336917869962;-0.11747503010411123 -0.50926600726680082 -0.63658506181121377 -0.37733104235918913 1.1529589660488997 0.77256282942880394 -0.56722080839725897 0.41779331974857503 0.1589971800165878 0.15285789356266671 1.519387340668332 -0.1375151912175574 0.12130846488284269 0.046842386714743209;-0.62043899146855952 0.67354683878805632 -0.43108689516116516 -0.14720327263608879 0.66025061166903698 0.29872404220600551 1.2784476039507293 0.21705398671287174 -0.77037589404269002 0.070054076068763474 0.18198524544355107 0.39513767581092513 0.59185728515769953 -0.50003436892139408;0.40783732016126761 0.019455706486747694 0.2609688478251122 1.1622780171076825 0.32096514115717056 -0.62661955785708867 -0.14005787768812961 -0.3499709180469559 0.54682787193983373 -0.47561920692995829 -1.061112816380924 1.124842825836361 -0.26686205583428468 -0.0017526978239029711];

% Layer 3
b3 = 1.3977422952434473;
LW3_2 = [-1.1164677062307122 -1.525425284400433 -0.98128670408990493 -1.6512042556724151 1.0337958294739344 -0.74659940350947895 -1.5581750438984174 0.82614070117455318 -1.5176311939324201 0.98991554364061873 0.39283824042684418 0.55221794603409213 1.7269751128031747 0.75556808686692956];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
