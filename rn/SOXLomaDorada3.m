function [Y,Xf,Af] = SOXLomaDorada3(X,~,~)
%SOXLOMADORADA3 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:31.
% 
% [Y] = SOXLomaDorada3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-5.6342888516870175;4.0653385410829488;-5.9026894986171463;-3.0335516849813824;2.1701055922935377;1.7244944855034201;0.23405508155923466;2.0045151007438133;-4.2456444276405936;3.1733511629867461;-0.52961012086723547;-0.97202476240428903;3.9393033444925192];
IW1_1 = [2.4942344565601702 0.40969192816913275 -0.8337072427103569 -1.6136126246919471 -1.064755027370162 -1.7804265715378207 -1.8389087243897222 0.60045061461087657 -0.3864902801897076 3.5721215613086366 -1.0555755876836375;-4.3196389698514599 -2.1256528268226758 -0.80889345639944843 -0.8433060541725792 0.71844200389772894 -2.3419975603304275 0.13160766188705647 -4.67816782491842 1.5755357085543864 -1.0515941735809466 0.32626869181660956;10.97057184475273 -0.42757654624677111 -0.71979849346417735 0.73153728931513018 3.2056948658103752 3.4219544735102367 0.54403689678649203 3.676051418680887 -0.68222838959920118 -6.8746357056488705 0.22558697387166785;2.7147567337413938 -0.4419770285929594 -0.67897836008622636 -1.0674681918862878 0.80967532686101584 -1.9618440350366091 -1.1364564249561213 -0.28904214195827804 0.060602006881623503 -2.1587241651958657 0.97261257472343288;-0.35107466668531423 -1.6942638011385323 0.2903560082849711 -0.67037128162777682 0.23600293361622351 -1.6375594135239773 1.0941451517118053 1.9949461039564012 -1.0738949521091441 1.6827419324801181 1.3053460382021851;1.0276596139824232 -0.089122850522422414 -0.010734318710356485 -0.18741807410862807 -0.21886650283164166 0.10445465456342115 0.54163412415187284 0.4285805251967148 0.05355844274597641 0.26847077844398182 -0.095525119163404101;-5.288990398630208 -1.735987248505374 -1.6746468102802723 -2.2950047956813022 2.6613814299058918 0.28701074303033308 -1.0838658522499154 4.1132868071226936 -0.87287842002293581 2.9120504480062994 0.33940048055723021;-4.1938162965759558 -2.7125333594441865 -0.27101240146015443 -0.23433478516781692 -1.7671250799112197 -0.74885278971575775 -1.8826283789321614 0.2898066109045585 1.5391083535786576 -0.41458540900622459 1.2887738763784515;-7.4397282055112797 0.28104415697831453 -2.7496472905071911 -3.264866235060464 -5.2344973469229545 -4.0519464439015929 5.7433492020137846 -2.9096122599863334 0.86340179662836136 -4.0775556314510135 0.5116053197862902;-0.88820754755821829 0.67018457179583035 1.2833710286020121 1.0545415925277823 -0.28529862031845143 0.75551639322219344 0.32382571081664713 -1.3403388787384705 0.10387804145809684 0.80950847423544869 -1.0780196603475176;-2.5209961264096656 -0.66255759890651234 0.25126179892803735 0.67002828724615882 -0.045018548222134816 1.0519440631618218 -0.93434140611768191 0.28954352743774281 -0.11535232853711949 -2.1145235777531157 -0.51573835914497446;0.32404916829725666 -0.96364979102829729 0.069679389335256109 -0.20147520951884595 -0.11921553892587911 -1.2234545469017448 -1.0165692222179843 0.76512233175202649 -0.81324419822421246 0.62103403136552326 -1.0678989349398069;2.0591196797188087 -2.3720440384420347 2.3617896378860808 -0.76875386176508853 -1.5068787174045504 -0.90251884408905958 0.50968442708190098 -0.055445918897073017 0.35216571939112878 1.2417406405594604 -0.96515916312438899];

% Layer 2
b2 = [1.2886810257529282;1.4823072157402788;-1.7490443424275171;-2.3949773315737422;-0.71291686583814851;1.3892671288458978;-0.93751271865336405;0.33936143625805204;-0.77426668657731201;-1.8313506724231585;0.84553489356290945;-4.1307532474888555;1.917464852045093];
LW2_1 = [0.92471542022591691 -0.096357108465075364 -0.27469286177920543 0.93734725590223078 0.06658277512843909 0.97212595168401084 -0.38096872222495531 -0.18748037706286766 0.20776543978014517 0.46800151101802118 0.91225019731550938 -0.47091758808788353 -0.046424851379587906;-0.17783610776164566 0.25714784535731877 0.067201557613410373 1.811034314932932 -0.28426843046681677 0.84149837450820597 -0.41683963649937633 -0.87012664796718542 -0.058470817355199864 1.0699846177699179 -0.067581796405108058 0.56833792453603271 0.34976333822981887;-1.1721666648830149 -0.3454653107624418 -1.2739148759022449 -0.49028095882470279 0.44910992914561865 -0.40443892185878133 0.17082731506388213 0.74770406685308777 -0.14215499734277873 -0.55137651652420516 -1.2744529106867237 -0.53305095811013148 -0.48580205333342896;-0.69890818526794996 -1.6448699762324008 7.5473064108908279 -0.26885843767799833 1.2145273009611133 -2.0962656825134149 -3.2121338470657275 1.5923938230658889 6.2559218193468435 -2.6731304576281869 -0.68188634301504703 0.79660438806331024 -2.4907853384428531;-0.29436695503141602 -0.84313778668383899 0.2025031937321751 -1.7781713529053513 0.11747137080568273 -1.0768824208733461 -0.76670379633351926 2.0077315043094832 1.0097817899919179 -0.39352946711390124 -1.1676925236883171 -0.17573904878920138 0.44951049685686761;0.773978222031801 0.99629366873972325 -0.17602449793180538 0.96220761657426224 -0.22356506146353478 -0.1908392435392201 -0.3159681448780598 -1.6888905294655128 0.077170427780646034 0.67385989737777974 0.61667447209062565 -0.16411737546622102 0.45731907757882706;-1.1684177795289243 -0.034728505908339743 0.41036614528536342 -1.3111086002322601 0.085245592604788367 -0.7362833111560062 0.43808861555645073 0.45859288672544196 -0.34533531963227032 -1.0642784455991057 -1.2474239129014517 0.47296588468060563 -0.12378953025045573;0.209760943322157 0.87334236182301173 -0.24803860208239337 1.7308660820616697 -0.11875826417864555 1.1794937665204506 0.7674415102047969 -2.0516896557683557 -0.97522316442269752 0.59839158450706531 1.0813584671466727 0.20230168087567288 -0.37974418153419109;-0.98713097734938016 -0.52937933192330333 -0.19661148405444684 -1.6175663318036839 0.45743783460813547 -0.88391676533907648 0.24474594870776917 0.96346801878863508 -0.25203736828524703 -1.4935300778252323 -1.1095779351246804 -0.49967752490201117 -0.46890376089784924;0.33180038213496099 -0.20358502667767342 -1.8724007124920874 -0.69844281743229164 0.13057788402616338 -1.5462320077331935 0.35112712269938123 0.71181805126567244 0.14328799659400043 -0.95366753681052918 0.27605857669559253 -0.54927033991034513 -0.15967359729762357;0.63679335092233924 0.96531080197594976 -0.091000897475070758 1.0011365874632063 -0.049469065781788828 0.78857318747002458 -0.33660043673465861 -1.5925658583719049 0.033644126609916752 0.69621579295544411 0.42856998093926379 -0.28795240511375808 0.21046773062905408;-0.92138858734646933 -1.5822802823652331 7.168424950181687 -0.64083122245636526 1.1712443890767563 1.2490862934337406 -2.9936395852536442 1.6100901043427549 6.2923615534073525 -2.784676491441779 -0.9522839709715023 0.98221691619465623 -3.3803707980513304;3.2602918245658112 0.37700070605562191 -1.5618191344030601 -0.045063419685564009 -0.58586636892823252 0.13918923927848573 -1.8313331219689875 -0.2833656051157365 0.34603908613020312 0.46601116563884387 1.0347594926906201 -0.1654547951916705 1.4605812206933591];

% Layer 3
b3 = 0.59043382333355732;
LW3_2 = [-2.6412289755696388 1.2753357949297954 -1.2152129434374375 -3.8551960032461752 1.0866025112279976 -1.6508974674240227 -1.4822323677407634 1.0762841606027158 1.5820069957643046 1.3547465819079332 1.6405809247051153 3.8759134273000058 0.061717606327921046];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
