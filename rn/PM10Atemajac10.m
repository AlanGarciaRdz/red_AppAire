function [Y,Xf,Af] = PM10Atemajac10(X,~,~)
%PM10ATEMAJAC10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:19:57.
% 
% [Y] = PM10Atemajac10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00968992248062015;166.666666666667;0.0561797752808989;0.00614628149969269];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.3443367178308894;-1.7889598318560196;2.9848962651333832;-2.6983752408310555;-7.1990301594070729;2.2998337059439806;1.9986318253223678;-0.4733022686682925;2.7246883913804782;-2.2680201730591718;0.24043356972810825;-1.8145903692058181;2.3840264031040812];
IW1_1 = [-0.29525204403102129 -0.86751941008977274 0.2710299315596898 -0.04021590446907574 -1.5573102054600785 -0.21424431468591504;3.3855866855370773 0.044217313961864194 2.1937100489994767 0.11516008368584914 -1.4831562823714302 0.19822247270443827;-3.2220274584797148 0.3189780137155791 -0.651435849590001 -0.14094144277511936 -0.38695149237980753 -0.33768841488592583;2.2456653541011855 0.35677124055709664 1.1122033249808909 0.28130550113792618 -3.8982522922818332 0.35251211101244856;0.031838171639640228 -0.095425845689729283 -6.9345260400135063 -0.0017781581331964931 0.0096076307555324099 -0.0072947751292975769;-0.077360451948963488 2.0044277938721771 2.4918746260710862 1.6324520512224716 1.8980407829315031 -3.4661619972726729;0.71078740409525731 6.2126428652000873 0.69969896948579458 0.11265297504615668 -0.55594607010641617 0.42220188939212744;-2.2057284284754473 -1.5286649564026198 0.8202181102228373 1.3911452304088678 -1.0974617253345123 0.36268705233722182;4.8959442636768804 0.24339296942048322 -0.26748563565195449 -1.6358050576666785 -0.50612522536298632 0.15398302620902063;-3.1151351951098416 -1.012292781511829 0.96300198407135995 0.66079410176304465 3.8963437735831317 -0.018545287493124844;-2.8501105248904404 -2.4223189896519042 5.1455125142423812 -1.8482859895886881 1.8425378560156909 1.0402540309929702;-1.2826562153837699 -1.1588918433879356 0.12472857883262368 0.59441330655357072 1.343339286261594 -0.081423877604847761;0.10214723889416778 -2.6671396055910073 -0.8355342244378573 0.028423894750019846 -0.44750901251513209 -0.33678799154578054];

% Layer 2
b2 = [-3.9346439321003936;1.2784805181537531;-0.42589601067834165;-1.5034663340612502;0.90902367827962327;-0.55704136982145358;0.045820049203346869;-1.8587806698451705;-0.29534229935374362;0.40436114899298548;-2.1304189357122283;-2.6068288231918055;3.4128905847283377];
LW2_1 = [0.98146905746233826 -0.44892171832746375 1.2157927604331433 0.52806827406472845 -0.20079244283912639 0.29334741468442999 0.8921145897076066 0.40423405882732566 0.56983112596864149 -0.76221546350866942 -0.01565296641940981 -0.3303263977462334 -0.57238062355414054;0.57537306903721075 -0.145152606365096 -1.4038624611758141 -0.46438063781746997 1.1933954903412682 -0.022620172411383695 -1.2374890584649714 0.5801955335667105 0.96738610737908659 1.3633272237958804 -0.13226971474888552 -2.2347258965884467 -0.57639669464303112;0.86029671009597652 -0.62242257371755561 -0.89420287129904408 -1.7305813685245588 3.9581508998297248 0.11744937389919524 0.50143515504810554 -0.37766044355980999 0.53394126498508465 0.67925028438196766 0.2663064901802058 0.52520252014432978 -1.3860427285730923;1.0611573314258176 0.11991221291051173 1.5725167488550846 -0.58386920822760968 -0.5840586431242738 0.069455226389516372 -0.79419647756270051 0.28644135136926685 1.3690220025974356 0.62820903010021933 -0.30421480486003366 -0.26599391972736142 -0.79115170220717912;-1.48088450613166 0.62015532390544204 0.58332692567126077 -1.1298301845033694 0.56404491831539116 -0.36382824687096649 -1.0400431787710076 -1.0294812555593325 -0.79731793229640002 0.25478400561954917 0.39642344188196549 0.25125591154888821 1.6348925059622526;-1.2887074897516713 0.84788160240793153 0.16699531541869464 -0.078560815797385122 0.030796071472128411 0.048576935336935009 0.43695130495909335 -0.086272422743305002 -2.5571623158760088 0.85282727617229259 -0.71731009083246311 2.232495669973213 -0.23387515580520482;-0.78150845452067574 -0.57418030272003684 0.028944738166144131 0.078369826686880126 2.8554315253287417 0.68885073254316409 0.38139624053426541 3.3630939113169758 -0.2515233453775767 0.48836251892109095 1.82955456683388 1.2263521724637481 -1.3996626402165209;-0.85820740987228494 2.0581725276146554 0.057698019267794942 -1.7024374829800659 -1.739042431714962 -0.36151555240597821 -0.8327151883713706 -0.76528317820511582 -2.3720241728517535 0.45686445675493115 0.26010209433358006 -0.17651475637457453 2.6791019728476271;2.0517730685158013 -2.0598804657395942 0.51112330632602077 -2.5475669330401032 -0.0486317251486389 -2.3005786870440788 -1.9047653444832231 0.19899064466363445 1.8369389581068627 -0.4991118256678102 -0.93788335082738905 0.97556924444521909 0.68234573655081543;-0.61239212998843118 0.3378357201022929 -1.6873966652290029 -2.3395192995035532 1.0845925604180713 -0.21640051410475383 0.7746329409562237 -1.0001860041885098 0.21380153685826409 0.87684665523034888 0.46597582921092318 2.265459711121216 0.22167672713155037;1.2614086552704673 -2.5718115298114079 -1.4758293006548744 1.8318152503573386 0.12803161766694557 0.22565158039973585 0.62293764904927318 -0.05165707820170632 1.8013515542254104 -0.095042183270971997 0.16441088642921034 0.61959041336565868 -0.33044459410268351;-0.083157239941364869 0.86992503502287732 3.3646828479481385 0.86748417133740918 -1.8868342316141746 -0.11458717262752641 1.466251276625101 -0.84580918658508975 0.4551229099008019 -0.48219822224981873 0.018962283056783748 3.4565280324313017 0.35317696792695003;-3.1789707444052455 -0.70628123171293877 2.4040416729005876 1.3261950870276618 2.4487697574640395 0.78110189238269689 -0.4326043853775785 -0.18333449168765456 -1.92519998071944 -0.78931914129527303 0.23316648812760557 -3.3091187963647486 1.0887122279323009];

% Layer 3
b3 = -1.7080608053813178;
LW3_2 = [-1.9020179790515783 -1.10466735576668 -0.83143010366742498 0.93536232807410191 -0.78302810255846533 -0.56006949472687084 0.051897377333764622 0.13224086906774576 0.13556460299172388 0.55411907169618435 1.4889508169252379 -0.74641280859061454 -0.29678610349612222];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00968992248062015;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
