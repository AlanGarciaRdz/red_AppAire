function [Y,Xf,Af] = PM10Tlaquepaque13(X,~,~)
%PM10TLAQUEPAQUE13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:40.
% 
% [Y] = PM10Tlaquepaque13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.3216797368395794;0.51263398517722625;-7.3623275956373897;-5.8865057108659089;2.0375091828661529;0.53612090943063473;0.85607741429773276;4.9217851081841459;-1.4631551488609937;0.80132187899180118;-0.87092706765999484;-0.95604068327305325;-2.3285540787800145];
IW1_1 = [-2.11040258620557 0.28156951042672818 1.2340481212395531 0.04304669449148045 -0.96760532218997486 0.17979378495556203 0.046819999811327291 -0.09711139854130342 -0.6991016927321726 -0.29230429697529231 -0.3953604986466272;-0.10224191064193003 -1.7076168137513226 0.82801441820625421 0.33610735392421814 -0.9259484475809987 0.18839737168377427 -0.0014359576956470901 0.13907091401691712 -0.80665350904056099 -0.4327299122893743 -0.069737488061540009;0.10111617095947045 -1.8017607225977357 2.0651969654478806 -0.20544158926785916 -6.8593832905040681 0.10714978660833271 0.69981728737278703 0.12639359952984913 -0.26434226162957414 -1.8660851215228436 -0.53920286832493725;0.56075714166013224 1.2370724585032651 0.54229630390683414 -0.25804729558148665 -1.4451365538034964 -2.4544020861965556 -0.017434432180106946 -0.28542384244110597 -0.34364042262278643 0.75466855834723778 0.13139381201602646;-3.2915049202225761 -0.11767243826832102 0.40172139304124038 -0.58511049392005932 1.3316748550628437 -0.43365536136090693 -0.20684016856387596 -0.066578066877492029 3.5137202609971419 0.47044924168444496 -0.58086941673295589;0.77766202179607502 -0.32326130092468291 -0.60625581683009888 -0.17451332257657373 0.20151486163687796 0.16642657836456956 -0.19279645187427619 0.077815575843005316 0.32529515198058639 0.26004548104663827 0.302237234129062;-0.09487339350554734 1.1526581331698686 0.52142508391269971 0.49852479758420376 1.0144649161343657 0.36106807449346334 0.090469152126640223 -0.06729917747621654 -0.52241331321434081 -0.49298101117019533 -0.21120238110849196;-0.070703409725644289 2.0100972666325658 -1.159256663805587 0.14396249798824884 3.9064472842454769 -0.046613149296240747 -0.22235374013892345 0.21297295379881659 0.22740911476570488 0.63069186885487305 0.40590413442079604;0.6953922839303337 -0.13687768298901698 0.27592765439851624 0.3932177882389874 -0.88980344097537167 -0.19255923844948117 0.11173106870629179 0.055527202001241428 -0.26865143415212245 -0.11859776245773783 -0.069539853092174142;0.079569087480013498 0.033698312357328113 1.390919821238535 0.51814473157460561 3.1365006262419866 0.22837183265911157 1.0333950233728322 -0.51134010539509112 -1.5802144120001591 -1.4864730070772474 -1.5739541534259682;0.22983869682936892 -0.73037493978117651 -2.2037049248935374 -0.21753281257947205 0.7769238218677158 0.30148545358558027 -0.17008291832775882 0.037652249629828494 1.0606537161284413 0.25601310169075786 0.16106914603486161;0.46128295690630361 -1.8128240027878113 0.66760713865001675 0.36715500003061985 -1.347867930995629 1.3270532210965462 -0.4156362216806665 -0.1906707771965675 -0.26378972948115414 0.65364628825408733 -0.35433954789182476;-0.57660914170761102 -0.86748252903575573 0.48962484057384181 0.16600334821658325 -1.6349981370932414 1.388996071571905 -1.27464298477317 0.26149390109116061 0.40994324859635328 -0.26411609594218355 0.50060415827054072];

% Layer 2
b2 = [2.9783132495396831;0.38150046370912816;0.13059330247089307;-1.0399257850082815;-4.6726573557147617;0.99829468550742428;0.8987053301528376;-1.6222800476386199;0.77238164245891527;5.0655236618773678;-4.3444811373160439;-0.82327165254890722;1.4533537330833033];
LW2_1 = [-5.7585280788310138 4.3253657320407095 -2.2291310423456006 0.091612755167617549 0.34270285870578776 -8.5930659938486684 -1.6612406266379247 1.8777472676321316 -3.0852537812552643 -0.60395757811324169 2.5454049878660623 3.7823919584725991 1.7047030395671461;-3.1940067477123217 0.62894047957234145 0.27149040122626694 2.3169990194202419 -0.47781550151695767 -2.5826190266474272 -0.066736513121643332 0.77607181237991463 -2.2838128043373591 0.12164961459013095 -1.2713523680469787 0.35926187503075779 1.2736313388265943;-2.4232266936630742 0.42297160510244497 -0.65380756337190582 1.4897787640541815 -0.46033680776226055 -1.2776058871515052 0.6265235567869949 -1.0101438557282192 -1.873023924201106 0.28107712181969241 -0.81826750721497254 -0.1350169893303296 1.0556916588285385;5.9789379889463552 5.3394973474649028 -2.1330422540909719 -1.1264957514055665 -1.5389618419264437 -3.6666485016991546 -3.4282551736346329 -4.4868483172338696 2.5044220612127721 0.15658229820452177 0.23389558979094038 0.38905656388050347 -0.22309741108549261;0.25164076251714584 2.8189627614082227 1.4852467318247258 -0.62097804641473719 0.93770165544280282 2.3802079741632447 1.8308198087806455 1.0045089632920852 -1.8419572025952737 0.71525041173257808 0.57890019249205871 0.68956790502773169 -0.54573711631317123;2.2748207728547007 1.0682385523691851 -2.9882486602936504 -3.1720608699250619 -2.6473894730231149 0.076173437869063054 -0.24679554431918976 -1.9560828968877408 -0.57168984929087241 -3.1804339780413429 -1.9632762111549631 -0.51184185901966006 4.1342337003550353;0.29250397966882696 0.22878847379104714 0.16912566127211848 1.6141171233452236 0.18595602185772536 1.3279055511706257 -0.070373718956486739 0.37975952356987924 -0.49546918433088083 0.50489299870806947 -0.30909558187529368 0.13616281617535239 0.31625505028696416;0.23419241074570088 -0.7344541220445493 0.89060731306094232 -0.73019508972764979 -0.44501596951122485 3.48154069470313 -3.037505558837057 3.2828059597978578 -1.352276855408157 1.6466890406203376 -1.9029564795151801 0.39462721245556365 1.5869958460224469;2.0502403784982923 -4.7610434165687652 0.021892393586988468 0.4840652280393668 -0.57820717167989144 1.8172888976176358 -0.04555442331175847 0.74834288161564433 2.4327708511525823 0.42596625875499289 -3.4531304639920037 0.12860391716966788 0.79806618517588779;-2.2814818799214267 -0.099053534936231619 0.21622991291551225 -5.1306574372246638 2.4380634233505569 6.4887980706288602 2.0696200443097528 -0.25353566968234736 7.9078175089321796 0.45433783446918452 0.22575071752678344 -1.3513777206753657 -0.66786940082569679;-3.2898593085552457 1.6524000484294774 -1.6467002647023168 -1.331100554676929 -0.34763563552307114 -3.8160967031590101 1.7303694463383126 -3.1300025899848887 -1.6865521745633911 -0.88423397220916189 0.23706261207984769 0.2914695846087349 -2.0051050844356455;-1.1903145498011802 2.0190383246089527 -0.65946146487086788 -2.7043415924879981 0.66110887459092726 -0.26131213483434751 -1.809224876375088 -2.2937422217876677 3.4879926616567687 -1.6764471737722622 0.44156583269634786 -2.5448951121442791 -0.62900688498142199;-0.55283594511136325 -1.264834716659281 1.915758378519846 0.40247452359604124 -1.9536145874145121 -2.0801513779308682 -4.8823021775445534 1.1063707115629187 -3.0704048327321507 -0.73240045662753217 -2.4123925566296558 -2.1134460550771799 2.6158856163833244];

% Layer 3
b3 = -0.62935260635915935;
LW3_2 = [-0.15759667229990493 0.38042949068847759 -0.55853332905656239 -0.026119460443377394 -0.18725772588245926 -0.011135478242588537 0.959039366497488 -0.14278765166312149 0.13897406012678137 0.17229086915979172 0.20603192614892799 0.041840804761431663 0.068703607264696487];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
