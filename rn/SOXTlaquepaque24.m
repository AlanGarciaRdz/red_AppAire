function [Y,Xf,Af] = SOXTlaquepaque24(X,~,~)
%SOXTLAQUEPAQUE24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:30:02.
% 
% [Y] = SOXTlaquepaque24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;3.03490136570561;14.7058823529412;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;35.0877192982456;117.647058823529;27.7777777777778;5.12820512820513];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.6884596226048383;-1.698142583276613;3.2130542761184135;1.8180452964169529;2.9205825657649034;1.3878294686849966;-0.59560716988470064;0.1947769502850461;-0.30689279380138912;0.83673704848398489;0.75565412493380779;-2.2127953953461059;-1.3943196552935384;2.2621736197276556;1.6464998578811822];
IW1_1 = [-0.37467324423761961 -0.63639098554333817 1.8361459429414484 -0.095360006312942253 0.52219837561724003 -0.11904822992404207 -0.22452589708617302 0.070114036463060997 -0.099844871565067911 0.16440657333501407 0.27256549009105013 1.0822961935465967 0.74051596526387697 -1.0486729911951207 0.79557720197279669;-0.18703380103676642 0.61983253631792823 -0.3040898575326802 -0.32906293078601045 0.15283843154715315 0.20391852351393674 0.45181290194937235 0.85204593497522307 -0.46670237596642877 0.019891991369324402 0.6669801383596109 0.39259485479591522 -0.066770997929781556 0.1075775426255072 0.50253484691057537;-1.0357229893002287 -0.17385315850826746 0.87843422544802618 0.94214279738845352 0.28313237012286591 -1.3059732805888087 -0.65473250608177358 -1.9376491520404731 -0.13751507172921373 -1.2021282591339104 -0.38352712707579251 2.5308593595055306 -0.58100742421892626 -1.0579880084657141 1.8202781974897897;-4.5185001362547741 -0.23681016910977809 -0.55937198616533068 -0.19344676034740435 -0.0043987281822162466 -0.63200148829011205 1.0638004496771576 -0.5518024255936419 2.0553770106171116 0.50071839583661581 0.041469161529273713 1.5021158994696426 -0.14864599127036487 -0.89019134813007328 0.34699889645538717;-0.15545683861982298 -0.43550881584143991 -0.74318962956749024 0.63517855469349249 0.57323618793702402 0.25167231149964964 0.62821008845167314 -0.21686009410293397 1.2552541867101925 0.028914500435843413 -0.22030901939561792 2.0942858820034518 0.30022724090303649 0.52375761155089484 0.29387972374072652;-0.023245963888181807 -0.606411364008142 1.9597227360470271 -0.20956341760379879 0.58313798890403501 -0.035677655797644418 -0.29116674959707495 -0.1003331064809197 -0.45604543167590739 0.090801179096777762 0.24151678398551985 -1.3431671292793312 0.87762718286360675 -1.1561712405703655 0.68633493346226138;-0.37162290343260984 0.7619622318488104 0.90975334813341135 0.49160526626712209 -0.85854891390733179 -0.85210458108609788 0.28684318047229596 0.58522545379080226 0.21810916126071628 0.39511559069983454 0.8367069343905138 -0.77280756939057504 -0.39219371619456361 0.023149179515431578 0.63333808414030912;2.7606250776145336 -0.15533504356874037 -0.33962943617595637 0.20542632772259134 0.25709626707111016 -0.093134407886613493 -0.70440760002619573 -0.085274619494902101 -0.19912440139470167 -0.1192122853685985 0.061339284482451129 0.82151100062326554 -0.31213955755356809 0.66675055654358861 0.3863709365533845;-1.4503893807242256 0.15504496643563354 0.7842647061098017 0.35773266121798358 1.0164513974955984 -0.167089891642276 4.0775343964217816 -0.097364445540643552 1.319443692585367 1.0625937051373526 1.7199882464679035 -0.53599015718350529 -0.82062199818948378 1.3316245643521181 1.0008879742547085;0.30283252468632244 1.1217825446601433 0.70267154749608296 0.70673573632057474 -0.31986736957987733 0.80639461214183328 0.57222522605303872 -0.023119490831112227 1.5926974645890686 -0.06207277884711461 -0.56592790072874688 -2.7731331852347929 0.80640435190222637 0.35745303978516352 0.25939317479095003;-0.57180490972081222 1.8871545207834897 0.081829400188761003 -0.95618608615840461 -0.82918386946353073 -1.0285233239238938 -0.0042439051141940423 1.432792396384065 -2.1780183338362438 1.5976039955306494 1.1157034357559821 1.0668941122009115 0.73672547305966662 -0.61952598480303456 1.3003155753797693;-0.23567033872281506 -0.1152109636575805 0.070925310017296517 0.091969841322930887 0.1312642716998203 0.01711316388107657 0.021875844739354975 -0.15364607662877566 0.20870371885070488 0.07086928248587307 -0.044316551788181863 -2.4034354261906343 0.040192303005081524 0.10455056395968128 0.14408336155280951;-2.544007461016756 -0.5034343412245077 0.35336910231355861 -1.3184625454561467 -0.63619574736263806 -0.44917651035860001 -0.61646522416992078 0.70101163676508582 1.9454734780437677 1.0895112525634478 -0.32834731335880879 -0.79981596282532652 -1.1714404780983485 1.5519979791285297 0.25924121592715998;1.4544783096051341 -1.8478798507663776 -0.32333172027573348 -0.0049965494693324092 0.86173015473446135 1.8664708320958958 -0.4407991251106903 0.37693390186667131 0.064932697590658117 0.54324657056945036 -0.43526757653602033 -0.96013557732973021 0.80738145077389412 -0.56252671426698986 -0.080721286450402607;2.209199325219052 0.47379234426638672 0.14890462656818371 -1.3427988140435156 -0.58521640018533205 0.17131986664936646 0.64927934410079557 2.3589469776620233 -0.8743775966202264 1.2848495964731237 0.4481292890605183 0.79950418205140772 0.55008453393534706 -0.53025766666299501 0.54873896840419634];

% Layer 2
b2 = [-2.0267812908478824;-2.5979702679545347;1.4595050587661551;3.3586357709551651;0.34864834966696967;1.5255707026960776;-0.068151685996587205;0.7123815647417;0.6775738213709257;-0.81938662458330902;0.77616728737930796;-1.2043039286039552;1.2654606536256259;1.8689096108420455;-2.3880843399455287];
LW2_1 = [0.12512441676946298 0.14069257517514783 -0.68578288772970653 -0.1623948688843283 1.0742953509056321 -0.67867851953972591 -0.13583547923129541 0.88304659023008902 0.50550633953482549 -0.69459303236126924 0.37507830638941336 -0.13993913460460575 -1.2081894600447105 0.31878871237746609 -0.90451051944871608;0.66968926080108604 1.6553168904212072 0.063263377395306131 2.8372939582150103 -1.2508536497945442 -1.5748155225395453 -0.73967235998277903 1.5972375767659635 0.50912344349520144 0.19185692497489118 0.58459307717273823 1.1830502890726944 -1.7414879409476636 0.56263971230545673 -0.16743572383989902;0.32061650563002247 -0.54905898264232755 0.13386861145221837 0.79463215532496012 0.076475861199379463 -0.69564848919792177 -0.12251118266394467 -0.36478190082595552 -0.93788815326200758 -0.17833691611533367 -0.022792053869780768 -0.91767944042306104 0.47355053590162483 -0.34226888118357934 -0.12707165738520701;1.7884709463305186 -3.1535903883158207 4.6460936373765254 -0.50550814841982616 1.5866675619310389 3.1712232705438788 -2.2575540806460079 1.2549765791951488 3.8001690766541021 3.1095879435144589 2.7895180628226699 -0.73155552498002363 -3.877755930742218 -1.3911307780196869 -2.9313441701769376;1.0751034950947771 -1.4036164296984452 0.68301407947533366 -0.53941149480029305 -0.71766451893869965 1.9891686363304517 -0.43206749570740416 0.36127568065149573 -0.34741130673490189 -0.37206035142077781 -0.45186072301953772 0.61402826832298008 0.16630649694161556 -1.2028643836545112 0.6714295462285067;-0.76589553286176093 -1.4966507863513783 0.91440196416635477 -1.7254895135272623 1.6041910185652071 1.5164890613863276 1.4607850980698309 -1.5030587517056502 -0.3027735027773017 -0.43834049306724676 -0.39896623137093429 0.22933641136705446 -0.092346456012250944 -0.19877962656775355 1.1111923906902612;-0.27972999578402713 0.33073953605436335 -0.70627885045637306 -0.95109805079425325 0.25598934761093695 0.11441995423954625 -0.054074767027820297 0.19017463155726269 -0.016259302069113454 0.094019696634495678 0.51937717129643324 -0.60921023849177236 1.0607272508036054 0.89914767957327035 -0.65814571292648549;-0.74303480164481484 -0.71748829471471909 0.19690120539303013 1.040119303374313 -0.93855852474255119 0.077334213863622256 -0.30517769209702916 -0.8512866078370408 -0.36536485030467214 0.45839318032263587 -0.41402609003661939 0.058399644848572289 -0.74628022724003928 -0.30216296412477994 -0.26807421295502354;0.098661612234370741 -1.1461496539216898 0.091532152908006037 0.23037829981568081 0.0034722536649382796 -1.0735722779536871 -0.17320932260342756 0.14255402749147114 0.015499365179321566 -0.47041330810659787 0.088550187111436168 1.6356480388116479 -0.15583043874444513 -0.36916232173771479 0.1839826852223192;-1.4050934817141956 0.66857366323094303 -0.22718873205620077 0.53357760054955183 1.2803082427984922 0.51926718732250798 -0.4155623545001062 0.3019536331110052 0.97510053967533883 -0.41508458183624952 0.73447797468071341 0.81707819154002459 -0.77562765316884597 -0.49747088490512031 -0.79039516599355852;0.58475069041757277 -0.46977989844383661 0.53711309540926599 -0.81871842716698451 -0.52288614293238378 1.2903302395113907 -0.1431133729619111 -0.347190028357379 -0.35965636729265554 -0.011644713068993569 -0.3588571431882272 0.27276969234367188 0.44961854781978866 -0.4203255166253882 0.58820200783757015;-1.1348065298309802 0.86906960870352901 -0.32574968990648956 0.083009284869297137 0.59535672339898393 -1.6579141725876092 0.31719018966899515 0.21424654119522832 -0.22960232906650468 0.19658454455405958 -0.072404102513580204 -0.41028138072075859 1.4233931398394009 0.82867046775597875 0.28408957369375848;0.6055823820624554 -0.76524631433089085 0.12457228531569252 -0.21219376745437876 -0.65320586483499099 0.44075690861417577 -0.7722334134726887 0.17047674200662691 0.41309495367709792 0.55728322452461909 0.2285334763785809 0.90538515786112206 0.39219616029580595 0.069673212822076669 0.11824957088777883;0.075447398417480063 -0.60332955568533697 0.7241043180204485 -0.37051994195842552 0.54210380035168659 -0.1867331102053556 -0.20537758061779568 -0.39944008676306042 0.35242918932229117 0.16731767467000444 -0.74000336183574544 -0.19938799192071371 -1.2131076859907055 0.1608110578067766 -0.52259071689019432;-1.8046935175885626 0.19027956622341552 -1.1880616564719646 0.67504887835687777 -0.7567710152212227 1.4977022674610068 -0.306505824186878 -0.25697498408983971 0.15233391019844819 0.20496368048912772 0.18344793445888435 1.3885155899632053 0.062503124648201125 0.25002782670780083 -0.79364831965383964];

% Layer 3
b3 = 1.468383484214463;
LW3_2 = [-1.075856096527946 1.0898803773391321 0.44097216936425465 -2.9361434784436033 -0.7363219916713698 -1.0336911260613164 0.034381088035492537 -0.1470819506002459 -0.064816547014493298 0.74703268274023027 1.3536779420785647 -0.21732509710586764 -0.8200159717567439 -0.048423403677799445 -2.1387345349440152];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
