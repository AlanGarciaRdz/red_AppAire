function [Y,Xf,Af] = SOXCentro8(X,~,~)
%SOXCENTRO8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:27.
% 
% [Y] = SOXCentro8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.4295919520768563;1.8678640287495896;1.6695322195364828;6.2717592246726301;-1.9635035747025533;0.11586989033529338;-0.65747561694663181;-1.6516473653776109;2.8052007419343203;3.1735061575014956;2.0472217274434383];
IW1_1 = [7.3480355018600134 0.0043266585328238169 -0.30795758150220465 -0.43566590633733043 -2.3317989024289907 -0.036063290478511152 -0.018254949166009143 0.15434069111737839 -0.029432966573750663 0.18662842621682074 1.1415685079577942;-3.1305606983257972 -2.6675233658368893 -1.7756730304492472 -1.1813914960179588 1.4249417938175488 -0.34614830344693959 -0.26842328431593793 0.37611590336120504 0.14042249500402043 3.263094398079625 -2.0280395732529937;-1.4663706036572661 0.035311016574769261 0.47208496213935797 0.8413677890690362 0.21652798785662353 0.53060822388430462 0.96530985492709864 -0.675911817566621 0.18784807234085338 -0.50083505542976725 1.5179922057732442;-4.8472860489898775 -0.46522126717249429 -0.010022771453273821 1.247185863838745 2.0365937866491648 0.083536703847452681 6.6564563098306531 -0.28933610286911376 0.25830150812147179 0.35977227685871105 -3.7783023310581916;3.3457128469087332 0.53930595706186657 0.77441003011609699 0.65170337778638388 -0.099018728971565051 0.092566048250595306 0.90342299423862826 -0.12231843867275553 -0.08126154594481351 0.14208459643257565 -2.4633318155405703;2.1666404681208742 -2.1452248276471164 -1.5184411909442805 -0.80038659074311513 1.201321421670102 -0.60023185638072651 -0.43195248915180251 0.59884101968085979 -0.082147567880214628 2.9367838084562288 0.37038761847833696;0.41630168247751259 -0.10539427937655137 2.2048017049022524 1.4796454975324995 1.538418558318065 0.27073642687709992 -3.6523952998402649 -0.2560130422462969 -0.18121588593049287 -0.80096748164606535 -1.6535582933542319;-2.029536756224998 1.237555331469232 -0.3723162565335163 -0.70022108711761311 -0.62302249858516645 0.15592310377271007 0.26240466427313297 -0.55279038823647941 0.64417778211014143 -3.9435329279274334 1.8698885078738381;3.6700758398581352 -0.51700957395319069 0.57977340477967165 1.44888196293753 1.2113430340843478 0.32181557256337845 2.6438688620219013 -0.73320081676376159 0.51517740684507529 -1.2644628769213302 -0.50544639515182022;2.6560295622668781 0.022043623379440228 1.2930020173616439 0.65819983710994889 1.1166396590509846 0.33018363545282359 -1.9503748791487912 -0.21337010541552986 -0.12281913238057281 1.7868873996845367 -1.7622843997211224;0.040724290657207889 0.41482975666369548 -0.44444672833932636 -0.48149138443758044 -0.90262585281716623 0.85154497721062339 -1.0544500928934619 1.0402327547425743 -0.96344119235121062 -1.0371885141814297 0.068307640642232478];

% Layer 2
b2 = [-2.914056149664916;-1.2405328383511665;-5.1771208119328573;1.1755737697750044;0.57344076170590241;-0.49659851724737347;-0.43270210341315085;1.3254151938129932;-1.1043109932262642;0.81301642788717388;2.7757696400390452];
LW2_1 = [1.1215030541291258 0.75746540928662209 -1.1030667132776246 -0.55475875340644132 2.197034145413717 0.30021294080990851 -0.64168182380485694 0.072638609695800938 -0.76119902940059025 -0.16063966845994393 -0.16738321009219875;-0.99022037272304719 -0.97057287315547047 -1.2839792351613177 -0.018477497262358505 -1.1505017245077305 -0.50394379073204498 -0.063388208423986445 -0.78961086486599563 1.9516691239325874 0.43607605612721984 1.0153297160446031;6.4796662407074086 1.4437307275695583 0.2816076473517698 5.1178822203562859 -0.1912126691104587 2.1777574327661542 1.4624851343047371 3.6604939250877013 -4.3633017126989868 -1.4039583501427957 -3.8524144547624197;-1.1546120748146496 0.063908591372435875 0.12091390292559878 0.47372942662107431 -1.862124971470877 -1.0027916219556472 0.47823469631519688 -0.064456192338764984 0.58759179062125133 -0.038832797582417589 1.3079284568441609;-0.65247245934839793 0.83333681966313122 -0.53060325609299619 0.31228013960186884 -1.0490943336666896 -1.6389085264030838 0.18911901745561643 -0.19201364860791487 0.26649054549690948 0.070283510216535117 0.76674042772210615;0.48215207288041761 -0.69900925831862681 1.2265756284403684 -0.35717089288211346 -0.52837073653762845 0.26920735021477099 -0.27670180254357257 -0.27765761587434595 0.076820732998156144 1.0531208634926985 -0.76418728897182786;0.82930052225886386 0.31515422521047415 1.4200786503207348 -0.52740332362895415 1.0660095340961333 0.6872440257638448 1.1007733246101268 0.45005980731167805 -0.29376566407386828 -0.5782525257998532 -0.8322137350081239;-0.74133818291627618 -0.51140786010864603 0.5146863091009779 0.00091661291005050438 -0.29937036248242083 0.086236241045229561 -1.8277970000007928 -0.00453764397408285 0.69103686397394015 2.1334235751737087 0.098897978408505019;-0.6289996694033243 -0.2161683597177681 -0.0087144642728607252 -1.263274663581462 0.51622829497086764 0.80874598250301 -1.338149498708461 0.12684930360463034 0.11027494510954865 -0.095947448734056542 -0.54130837972629253;-1.1487960927259473 -0.84775885700516906 -1.2724610026293206 -0.12756576144578424 -1.0614349608943707 -0.2532839617416337 -0.11497136337396399 -0.45270355128265338 1.9080952270363196 0.589829163962867 -1.1535614856702552;-0.29226170000463686 -0.69978585025211404 0.44762807985301245 0.12897279873327663 0.31025021299595668 -0.52668197340715117 -1.0737826816411415 -0.87291772983895677 0.7683594190694214 1.0409438240179685 0.69602496835168226];

% Layer 3
b3 = -0.82395830684126947;
LW3_2 = [1.1589416698079325 -0.66850092313122844 2.3179216418811937 1.8533413597428816 -1.1957046837028487 0.13925478963503884 -0.40435668039894873 -0.43802316015059239 -0.71724898063343612 0.67545206122893353 2.1077185757000882];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
