function [Y,Xf,Af] = SOXAtemajac12(X,~,~)
%SOXATEMAJAC12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:23.
% 
% [Y] = SOXAtemajac12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.49919017825314971;1.7594773584392476;2.8481832509649618;1.1701577811268411;-1.309470963643961;1.8106793949909616;-1.4431596812179799;-0.5333686246540662;-0.16375549206920603;2.6268182432613081;-0.94943383951751525;-0.72988935888960438;2.0631165746043489;-3.0290898253215359];
IW1_1 = [-1.2978723786450497 -0.074025410105550749 0.15044134314761448 3.1885880605825792 -0.34601167380199738 -0.95991479942246616 -1.6931067033355203 0.42870213188262563 -1.5522181364653622 0.13835462306827279 0.77572706676291492 -1.2302873160907131;0.023342716467598754 -2.2205079192477402 -1.3407469180986247 0.074775225078948807 0.79698798779197633 -0.093875821749052096 0.35428003076981646 1.5477521368981197 0.142134120875029 -0.18265215275454807 0.0054932099907870902 -0.86525660048772057;-1.9226312573248514 -0.67145882594473638 2.2605424023566898 1.1913506533508542 0.11111259005225368 0.73777920572888522 -0.97077550958508896 -3.7736004124460663 -1.0425769897475676 0.092438328111210125 -0.81766409977153875 -0.45265589164413189;-0.25273606433576229 -0.65021317278492774 0.067448238766616583 -1.6697405750054937 0.50845673010542747 -0.55871034244257978 -0.20993214863630366 0.37443881732372319 -1.7833292377073415 -0.31730739951163872 0.70114422735253057 -0.79704205341642487;-0.24221099596511442 -0.046024089751749972 0.66949545677053657 -0.62945263734116197 0.18981007306466188 -0.19221363999433683 -0.31680313971588442 -0.37824452959077709 -0.79781071332673792 -0.25141225789696109 1.1570706311375729 -0.5901490781510168;0.35789321220652515 0.41652979539635354 -1.3329254887600459 -0.052333112127685974 0.9829805103625826 0.45839435409516704 1.4970712524304379 -1.7024381624807177 1.5078023283376709 0.3792251740704935 1.1565825224392754 -0.54509812149389791;-1.3645501472055734 0.53952881699524102 -0.50222837309161017 -0.903468402988863 -0.98342041158608184 0.62825450714036257 0.12181429913517491 1.7325894631513825 -0.77961143778499697 -0.35971295470009257 -0.10934859234828825 0.38330319582285199;-0.08313789797376718 1.2379919850572041 0.30920481593722371 0.1080312294299674 -0.03982369699093332 -0.39162973029460052 0.075368940445544333 0.48357501761563315 -0.32811242713025213 -0.10131399731653977 0.10304494621491429 -0.62952941717222966;0.59094275133803431 0.15969717827105606 0.13910250746674119 -0.38662066919057808 0.20418730719272915 0.24199636268369679 -0.32664795508450878 -0.2672285945356464 -0.73526083766527983 -0.16972290590369798 0.88074046834385045 0.10071372380794011;-1.6019478713966562 -0.23376528978508454 0.80942409087937994 -0.57209695791067094 0.12300471354231871 0.089283457963534166 -0.48674027737681064 -1.1653012969980672 0.52041918764937745 0.32430910542543029 0.006253431018606273 1.4900590856522065;-0.1346311324736911 -1.6082170628584711 0.24134769510375542 0.051487024030743456 0.20724685762166498 -0.23383063651678535 0.13200669304277851 -0.54443946174928937 -0.10114934888974815 0.073871100008913143 0.39722829546319022 -0.49603430722912523;0.01505375893775516 3.1409299681347327 1.2379890591752347 0.33958127465447313 -0.43772906917388904 0.16963163326223962 -0.66535308941833815 -0.26081727943569616 0.2844633902080918 0.42860814022467242 0.10180068132452448 1.8235838899086287;1.3299052898371069 -0.082962749135861796 -1.0727102774141686 -0.19475390954149124 0.24580127827739431 1.0738787610620195 -0.64480711959179804 1.4192005056567401 -1.341706020526966 -0.19674208192770187 0.90785995962742749 0.33305817671170473;-0.24963880274895495 3.1530157465176369 0.9715781166987858 -0.062818681416905151 -0.33841398150116331 -0.23032558110743612 -0.11318006597763268 -0.33553583519756891 -0.013582686650579517 0.0044112046383878549 -0.13252381651798217 0.4371745794804015];

% Layer 2
b2 = [-1.7682614221021573;0.53791944017058735;1.4883823483161982;0.96086954333965391;-1.9860570125502945;-0.65093368549347097;2.1654424714294529;-0.17640355849541345;-0.72636745717813989;-0.19040508546693441;3.0657555234187939;1.3297210509923252;2.9062853634786316;-2.0052772708959754];
LW2_1 = [-0.027898708707186012 0.01996446599676277 -0.37574477597767064 -0.081319759307291128 0.09000264930170912 0.82943458989989216 0.32015318880148425 1.3345722164660929 -1.2563819613996996 0.52315547795271 0.71983240342445232 -0.16651712898526616 -0.37370381452587376 -1.0830395494384251;-0.40666385309738357 0.062077999245746508 -0.46013265931175495 -0.34183806280609025 0.21422053694757917 -0.071350068132855604 -0.46723088512838601 1.1301951058072048 -0.041385766020615777 0.74936651178706604 0.48532905914397201 -0.68515085266820897 0.90340671875790857 0.12195307067684982;-0.029218228176559027 0.61933066742747622 -0.67398365553566009 -0.22348181814579665 -0.53394534974083363 0.44140329579907517 0.07774384046997676 0.80619121449359421 1.3335673816511955 0.72509416724731424 -0.37975902390916449 0.53694384108119408 0.095460531635973969 0.57721953572688423;-0.98372985398553181 0.92996210726755002 0.00086963025720199205 0.43798489125516582 0.27244151929584898 0.51012187646654561 -1.6027583524062958 0.74920479227202319 -1.1273588842343605 -0.4364612856861721 -1.375754409967727 -0.73554533483603979 -1.3408681409805596 -0.23717253827700485;0.27848703539207248 0.46664512462242635 0.51407506719924878 0.51981550033636714 -0.85655666505181682 -0.022090802824223054 -0.25133602891843915 0.085421036829695152 0.7812000580493027 -0.685450370977705 -0.12739344479597067 0.28590992635322304 0.36803764006989614 -0.039702690362613702;0.31169003892257074 -1.1087958882002371 1.1714536233029267 0.43636076971091614 -0.86474726159383875 -0.089449053042494869 0.65888970962077575 -1.3285862459642659 1.84419117412488 -0.36259678700386666 -0.29214057619716904 0.63429008943207354 -1.4633992295687677 -0.79045077824684329;0.45939627406651168 0.90810567196528535 -0.080083054451633273 -0.12138584849660014 0.13506045629561028 0.58867137898883737 1.0655093104954818 -1.3832245515545436 1.1052021725328649 -1.5917104520467924 -0.98806261957501218 0.62487798986156795 -0.71864232093545188 0.41287896757074266;0.28238319635597386 1.1516105932036238 0.75422358996147898 1.2030569660702499 -1.6776444109013253 -0.033034569632151151 2.4796493935069659 -0.23521058792960781 3.0258396823247971 -2.9404673536014676 -0.01300279908148242 0.45648820355222058 -0.20407862849974423 1.3915392450082014;-2.6003210043722911 2.0138220916332359 -1.2405574366780281 -0.70843944800248804 2.5551970538363955 -1.8835124652054573 0.71039150742998802 0.35286796389083913 -0.59437947132173363 1.0040773496654698 -0.014249255517007606 0.98230862826217613 0.84530431348403035 -0.47240729035451884;-0.30906127358360985 -0.33948766897849536 -0.93885116689740222 -0.14495847660639949 0.086764981472367969 1.0657007497297939 0.016218939490350456 0.56846713381609626 0.23875151156483923 -0.54393775505725728 0.69388333782842926 -0.44608490650749799 -0.61044890607002467 1.4286396138502422;-0.21203332230098387 -1.3504623699507263 0.33104116588306537 -0.63965819326951334 0.34558028626882431 -0.0064933186893759353 0.38897140335997338 -2.2536743577107097 1.0326795222075087 -0.97102526014332102 -0.3683464404818278 -0.7666845686674314 0.26413490669806211 0.31889671811928533;0.024528425294459727 0.69598484315223952 1.2521298476778782 0.25477445199113796 1.1993207304033082 -0.79847203233552211 -0.038067345981901771 0.92565939375585227 0.093176669991469036 0.1143580530821893 0.68253782992035505 0.72602386182880829 0.44452141317663918 -0.91967374360463083;0.2652452401776057 0.16842139037376341 -0.40007894711703901 0.012329252510959565 -1.2577956546584408 -1.1732373895692791 0.61403028851532859 2.8779926928530393 1.1067140884917497 1.3078064396533331 1.4113619694847255 -0.90582130970437602 -0.39758448174165117 0.81548360731518188;0.015869550971353424 0.2894670747091258 0.62847573651444133 -0.18556766021609505 -0.75263652148351057 1.0980759450857764 -0.016305632396238185 0.50266676128630527 0.012095851371284133 0.16350028388803867 -0.029756490484704544 -0.28045193451935091 -0.50700186623205612 -0.1057448285443485];

% Layer 3
b3 = 0.97150551899916926;
LW3_2 = [1.1606511320760531 -1.4156245177680704 0.93416716515429665 -0.32138733364559674 1.0274976182174549 -0.51460352846728274 -0.58785978820802476 -0.59480099072864467 0.64121762688494666 0.72034899944605102 0.56250849740675601 0.93490432149622127 -0.64497236461159169 -0.92748331738617706];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
