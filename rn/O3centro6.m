function [Y,Xf,Af] = O3centro6(X,~,~)
%O3CENTRO6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-8.0569682763484458;-0.8878082876739174;-1.2321466985270939;0.40113425042807183;-0.059701946315697023;0.96848494254926698;-2.3589397640391003;0.22880612547587126;0.23725039531656406;-2.2704176509557854;-0.092658678710436468;-3.6247837469438751];
  IW1_1 = [1.0720187256458775 0.81387534313394894 0.81973250890277027 -7.8117521593198429 -1.081209831090117 1.1975240693300011;-0.59002719188927377 -1.3200507966988371 -0.25465596452004075 -0.61991544818867039 0.21349033399592043 -0.74484920191595749;-1.0668927418372718 -1.0118969562138824 -2.1903719949803002 0.17256635422079336 1.2336001605231506 1.7541206101030171;-0.61866657552818916 -1.9866397700782661 -0.44708078559325032 -0.36357677427861135 0.26656221774852346 -0.3583823560376318;-2.7678864789589017 0.92510504003916971 -0.76583374677366522 0.46695065988448886 -0.76789709793687844 0.65883474501562156;2.6922556769262624 -0.73095861333314849 -0.010531562783018414 0.04339718714861223 0.22851861638830906 -0.40814247788333452;0.52953320345489208 -2.5796838010647942 -0.011051985211537114 -0.28340002374158774 0.56158569637717437 -0.442959744711236;1.6671203494340916 -1.8466402973778948 0.38207755743429389 0.0062569567105665112 0.47029960519375041 -0.87746376458805042;4.8483647650115298 -0.64026687628246493 0.64440919930939178 0.2858506143012598 0.46375139552232597 -0.34306711325275757;-0.94722307698126007 -0.53607668657742746 0.39045627945265016 -0.90098941632262408 -0.33794512217640343 -0.49240391373967402;0.23739099069789676 -3.3093286645774089 0.4984955611627519 -0.133724890718914 -1.0103387559020567 0.82664027475730217;-0.2221247986571751 0.074614793469163304 1.2081681999405776 1.2545585747019761 -5.2673096370809001 0.16454044610923776];
  
  % Layer 2
  b2 = [-1.6217050490915408;-0.31207122614169647;-1.8319449467901332;-0.39173527274799752;0.60082389198623798;-1.8747679628511922;-1.2164229268350515;0.083219969548415693;6.5237649047625101;0.93567747528015732;-0.29973860818543963;2.1432359222897825];
  LW2_1 = [2.9027532041055237 3.6683130175555507 1.5878889078763374 -5.564738681714438 3.2942091718158122 3.2149931312415143 0.60952785368230433 4.7711910720058368 0.76668359728112168 0.90744561422273562 2.2346989803726567 0.49110363456848932;-0.044283893912935454 1.6811446232344427 -0.71238495504017707 -1.3892481528187277 -0.36234246606133863 1.2968773156313613 -1.3087029926216047 -1.103905624080322 0.026348520680508053 0.85745807446095856 -0.21628103798785925 -0.58548545396395035;0.060569943987896301 0.34320748380541705 0.21149691238969467 -0.19593381516601707 0.15080494683104978 -1.2809601919142117 -1.6635919959264183 1.2014577877189623 -0.69546253262516833 0.14184022164586735 -0.36254826253409622 -0.067418830976698624;0.14778246166524089 -0.65340246001884972 0.13557449030769245 1.8882546799322164 -0.41713310347422639 1.4871159329298396 2.5891276443734479 0.33908726476139223 -0.13039699426975665 -0.33214613428233386 -0.13418212404887633 0.087037796156553632;0.10482395225394074 -0.50787045705293121 0.41490941272277365 -0.54717269555803361 0.5852498893629875 2.2941160264054274 -0.18900870912216478 0.21932268238744679 -0.41080648609269249 0.82375846876233405 -0.37368694912850947 -0.10505901706841081;0.84940705358854129 0.12540325412867165 -0.20741230491825785 1.0355367143489702 0.38274936397723192 0.40533696114552104 0.84354040132190355 0.99257825015842782 0.49811131238855211 -0.58909425738117893 -0.38220740168506073 0.016726222022721025;-0.89913462683288714 0.43590010778324889 -0.91974130378713392 -3.173108158693275 -1.789415483925308 -0.3403919604547434 -0.74527536660261529 -1.8192960854066464 -0.79564943077560613 -2.1408807974871635 1.3668433118035939 -0.22140397042286003;0.15656926395532081 -1.3412947711725973 -0.24039836489395733 1.260460058847634 -0.4560140369714884 -2.0987995938486388 0.71424430312353582 1.0002721069222709 -0.83664465482915307 -1.196953730367782 0.0018902373849146127 -0.033654781576421974;-1.0269183653784462 -1.0771157503597981 -0.17543841471381505 -7.0386259060347376 3.0421632402633092 -1.3866096723771617 1.6618131828936007 3.3621202623189057 0.51487582179102287 2.7128971173044669 2.0987553528174416 -2.0869026615604134;3.6289310210467329 1.4875286656232209 -0.022945121333462857 1.2450293299277331 -0.77600903537165999 -1.6895391555706722 0.319237706581803 1.1288743126545269 -1.6605554123494322 0.7333111145235286 -0.87238657309882306 0.090735219271388778;0.99175492878847149 0.18601357040974251 0.08128109083087573 1.0011784382838662 0.062394190409605456 -2.2012598226616902 -0.23868894288176823 0.58800112038038077 1.1510087973699792 -0.5709298191395521 -0.34233072351205485 0.2807437109611105;-0.22455887469761893 -0.43928475014401863 0.63671594584973867 -0.97440434300588052 -0.18753218448799663 1.5235225802323342 -1.2332836660905979 1.1154248540471245 0.85559439392783332 1.0208745042569425 -0.64323807636292696 -0.20758368828971679];
  
  % Layer 3
  b3 = -4.9623456077258767;
  LW3_2 = [0.66829042052089138 0.65217446193155015 -3.746067104510884 -1.4891599206993009 -2.4760253200918756 -2.5321784116693178 -1.3512175610489421 1.6859660211352616 0.42556234393322911 -0.81386309424537329 1.5553548776540005 2.0493645280862154];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
