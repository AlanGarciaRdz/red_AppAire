function [Y,Xf,Af] = SOXCentro12(X,~,~)
%SOXCENTRO12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:28.
% 
% [Y] = SOXCentro12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.29522284473407612;-2.7175538048551879;-1.5383937232256786;0.76639049457898145;2.8696451714817544;0.48173908211160038;0.6150412996289738;2.957206596301643;-3.5645658431392686;-3.0361141436955412;1.7755027439981628;1.6358062655249312];
IW1_1 = [-0.64375174322904805 1.135051242117072 -1.7461931537140214 0.69846045375537624 1.8513341466803115 -0.94156480630626305 -1.9468302124993773 0.29999932703343907 1.2083649283765903 2.1483864258694476 -1.3626077896604059;2.1847244136216033 -0.88079399730421648 -0.5901436655687331 0.36389038825803682 -1.4955635063572488 1.3698814108420814 1.2930651844203962 0.39344966333647358 -0.031544407269276514 -0.76462307888879566 0.83128341791862226;0.31964781476671589 -0.32823876434587917 -0.41745238809894214 -0.24697918272797315 0.45719023925848251 0.24415214661917883 0.15166400601571287 0.51214618443105231 0.54211068047529587 0.85596322828572835 0.85170983162965419;0.47372916947422605 0.39210227493437583 -0.21188391298827941 1.3331866845611435 0.54108707228816622 0.56997547163602236 -1.2124269191782739 0.4161255497003441 0.91617240195898098 0.56395040747039171 -1.0242587160312224;-1.2867594872797208 -0.23277867467663738 1.1644723503624526 0.1486791045589746 1.8120588402526963 0.16225524382067336 -0.38941430575342667 0.24971565376879001 0.70964537985823517 -1.9192049644226556 0.79683206172642507;0.9336184351680431 0.16773613300256807 -1.6783360132100928 -0.47388096459455537 -0.69928078331930144 0.13739251644161399 4.6838520439289457 0.55511536268477135 0.44896315309536095 -0.50316103719574656 -0.9652665820632117;0.026179870709756605 -0.16066767290405667 1.0866932198139814 -0.5991398980380207 0.061171659066512132 -1.4367678858771189 -2.8923101695360365 0.055851208985217796 -0.97563595332453268 2.947021547937227 0.24526190414204158;2.5156345321702345 0.12855419381466596 0.53295652386173109 0.27901858832350418 0.62083535862500072 -0.57261904249199302 -0.39922298476553625 -0.068963797759310094 -0.32809117399126975 1.1623969564436198 -0.039389781339530042;-0.98340973709513335 0.038977653852097498 0.70388096080280227 0.17429383626773995 -0.9287304981061475 -1.0026730295132464 -1.712062652771879 0.5415169460256255 0.61809081364567731 0.66943988728027637 -2.3323217548421349;-1.6994068681638774 -0.99045682718850492 0.26868770061649982 -0.86873716478654139 -1.9436109378790387 2.5653674307085637 0.32061561604585448 0.54312106852807951 0.56041484767741923 -0.71562892374146669 0.17703309578826448;0.39022440609874259 0.048609471600677398 -1.1329448380890539 0.3792346380749006 -0.050898006731493188 -0.25377410860931932 -0.10811736577534298 -0.20953051643598636 -0.58976079890649036 -0.62695479976424406 -0.86153646686752472;4.2210150241218463 0.28910250583275676 1.9068515282376455 0.84742503010675019 -1.096651196687584 0.800022842589031 -1.5655755351749783 0.84310570568600907 0.99579876995323247 3.6366515172520932 -0.38575030604323346];

% Layer 2
b2 = [-2.4462011324745809;-1.7860005970862749;-0.36122548197575804;0.59952656249424818;-0.10710859075774841;0.24864968020858849;0.22017803796367783;-0.43490678540045569;-0.39939196458400977;-1.7301979989211247;-1.5718208726883522;2.8018541427377608];
LW2_1 = [-0.22923132847575503 -0.43049252064490051 0.24479574148489458 1.4708738609824088 -2.403330722759554 0.33680551570445727 0.80057015293522471 0.60691655469883676 0.13927325164096166 2.4822375343016696 -0.47806331807727898 -0.22050746085248046;-0.0052901937085699374 -0.64476710483830568 -0.3145432498917049 0.30539175664665874 1.0212252103076769 -0.17201206955574239 -0.39634135142503002 2.0648996897129472 0.19705059950025094 0.87382047600556711 -0.85745561874453069 -0.81574279275454398;0.86637897528504215 -0.4837315816449782 -0.85921022499326782 -1.2708255597527907 2.1809884428215356 0.27923585236285769 0.44511375519499147 -0.79981187206574 -1.0365385804492266 2.7853464944573121 1.1905365431477379 -1.8237885216540974;-0.32389835669701134 0.69790424020597419 -0.4756335463439843 1.3231914471662027 1.2065856788726357 0.42110608605940386 1.041702557960295 -0.91272359777168988 0.73267730671173259 -0.54100027974446396 0.15448420550822445 -1.2646619373122427;0.068044707899385992 -0.71207908895946392 -0.088256023155055791 0.38017082931701324 1.3845366835961852 -0.23535480788338195 -0.65216219480348314 -0.59820790578179228 0.30554426333263851 0.30430503800163317 -0.38595465902972115 -0.61055265846520634;-0.091547586976520531 0.91656089421901177 -0.1369160343939432 -0.3175886846027719 0.21967679125743678 -0.042087942281135104 0.31430777561149403 -2.305308743857712 -0.086482695051489228 -0.9708424165973043 0.93700230668501561 0.87222843619996293;0.16198746764739699 0.073292263637620397 -0.50922113809735914 0.16416643037361409 0.34571030122731711 0.86553859242772935 0.93811942690688355 0.19290174170199226 -0.79026697902327081 -0.059223790388171972 0.55271312541360784 -0.42766952785448925;-0.057033371655276499 0.53849364983785974 0.015114086104221124 -0.35955174394309203 -0.093194500105745176 -0.21798037732687425 0.20991214618969653 0.56465097053249302 -0.30783245439082285 0.0016252760573907035 -0.41619319690565693 0.70869481212893271;-0.17859764309571888 -0.96282950162073244 -0.91243350004795087 0.63863613748145398 0.66970924677401533 0.91003623577913551 -0.27334831719145875 -0.99455099155814064 0.41519775787624891 0.38731082218559387 0.4664328854213764 -0.8073878195689792;-0.81056948582080113 0.080216939975101501 0.3987392087650396 -0.17146785840428336 0.14669879609108083 -0.15555263352303839 -0.069341792445722708 0.92265408679207028 0.24963539955448522 1.3825991671671793 -0.57160777867640122 1.293997197942615;-0.44480022480066694 0.30578133449884926 0.64804111058986813 0.4777190627019432 -0.11790220788371911 -1.0230509090575213 -1.1650891319494252 -0.36613163019611589 1.4137686489100576 -0.030281296552502623 -0.6506575979583743 0.23110288688532199;1.9857092258096793 1.8201967459409667 -1.7053921737281095 -0.58878488624781966 2.4697400497372497 -0.95982419729518553 0.26483906221742826 -2.6187468464752612 -2.3405479948356946 -3.0921957127855588 1.0495464553891085 -0.090065739859318608];

% Layer 3
b3 = 0.12004946753361645;
LW3_2 = [-0.79138114985412267 -0.73355341185427803 0.14357781370842798 0.20445574877401837 0.41197591474853246 -0.71937028789613489 -0.9084707426747255 1.0355461923952705 0.2662560396434776 -0.34690241224300844 -1.1726867283451223 -2.5648882962154524];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
