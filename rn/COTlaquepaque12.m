function [Y,Xf,Af] = COTlaquepaque12(X,~,~)
%COTLAQUEPAQUE12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:14.
% 
% [Y] = COTlaquepaque12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [4.3918156081099617;1.4185334290774765;0.19025699645776931;2.0491226624984016;-2.4036988430795136;-1.4442773303081131;-2.03205084496618;0.69810434434896274;0.40409601274884177;0.1352827524842431;-0.040862655891063804;-2.7058491577251877;1.6854415513485812;1.6278778445584083;-1.5035570560924887];
IW1_1 = [0.77063239937709127 -1.5779492014412091 1.2705469439613437 0.057186727972264928 2.504693918481653 0.3522919492581259 0.46195837681023633 -0.3739108274145288 0.0052034045898825751 -0.20063941672152041;-1.6877957363275258 0.14308095046482294 -0.063818555865784152 -0.93824982900143616 -1.9565538636232418 -1.4534421594938518 0.25403014340149832 0.77353003197639902 0.0091083543741627502 -0.77657020650306396;-0.39641194258120543 1.3656209485139454 -0.17419468464616369 0.007834056626133918 0.34294278499503983 -0.71962369678450067 0.60081572313060372 0.06558877273071656 0.20193661030268217 -0.19844039939120936;-0.34161534518815029 -1.638070212579388 0.72878592477451098 0.12964029234061783 1.0808893119168907 -0.67405556018951351 0.47073996723303058 -0.51540987367864055 0.25853532697808612 0.025297103440804027;-0.11329827260840394 0.79643233712281969 -0.2348110954037457 -0.091138454422640847 -0.3339353007357358 -1.3472547861471258 -1.2213385701151243 -0.12541448966938001 0.12826355241143997 0.054170956687143314;0.16429509956225946 -1.4107127078872201 -0.48688186976271497 0.63460183495274414 1.0281730591639626 -0.30889046770494821 1.2954014022489304 0.12974632068784261 -0.10892763016503493 0.51112785908279157;1.1421896257284061 0.8369505576136288 -1.8009516238609677 -0.34997450545800179 -1.0539571647379766 -0.23015397418349881 1.7588032734123367 -0.20154740842126526 -0.35972732479980696 0.46190032622179256;1.0935610378724465 -1.1599233672901224 0.49830152632769231 -0.0043209924696686608 -0.27932714514199031 0.99924985760312623 -0.67145361785726609 -0.073697427869455517 -0.073550809493289751 0.21030857566779565;-1.2412692180622269 2.0345785426640721 0.27365452039515054 0.23001788952110208 0.4333409280656545 2.3434458581592073 -2.8223270617038878 0.039064715937813188 -0.39150117609615948 0.96910856153695246;0.014798184880133996 -3.4770407789431563 -1.5240239233109463 0.038104078507231597 -0.54154537482741738 -1.1818836153317123 -0.2248789336682202 0.25420771185717117 -0.21448645518129017 0.43688286526408598;-1.1093985565344111 -1.3094080485828385 -1.7650419332501504 -0.84536003871231358 2.4686063783235674 0.38019255923443712 -0.15274579902969521 -0.87939585592573188 -2.1643113689164553 -0.86470297821695496;0.43434312635670813 0.010365315502093964 0.030717405172307369 0.062772105645615167 -0.51734006671495458 0.7608162206420237 -1.2487270012502838 -0.051438412968184861 -0.057616394101895611 -4.6092769737569981;-0.75331394517312789 -1.9216474440628066 0.84184624928684126 0.064708953363427829 0.6619905714692248 0.59362334514380866 0.42938619772107611 0.10493360166626232 0.019646122172963392 0.32273162916281761;0.46055578368135353 0.087501446474361116 0.03720685026586331 0.096584928228636804 -0.35567203436327594 0.50729718237923271 -0.98023147216911111 -0.020893107002490835 -0.047953636359663973 0.31000135072954343;0.84349176813358351 0.64314216027291393 0.30204373126364681 0.33495881819606621 -0.64888748756807235 0.88993350270309335 1.0038371748337944 0.28299497532233076 0.83464985650235013 -1.0580193999271161];

% Layer 2
b2 = [-1.9117921472395449;-2.0962279425299197;0.072775379258728554;2.4870034684958435;0.050262109641121669;0.54285115731008482;0.73364446607153766;2.0255576860655005;-1.5754134037135108;0.71698540825370982;-0.99712793687481838;-1.9435222238688619;1.02316014343665;2.3245966138365235;-1.8041473374133035];
LW2_1 = [1.2046050707310934 0.56058426503146441 -0.15662801569696286 -1.5729068834253817 -0.90332547119860784 0.41124836274890431 -0.41757872711512672 -0.54244668090825265 -0.15045964524967897 -0.28697634022956092 -0.8887607181924968 0.50621631469430217 0.27443278184635522 0.7770061908728596 -0.29496513911119626;-0.49260641030926794 -0.39502918952190769 -1.6786364792813457 -0.62175153059499644 -0.46586780903110181 -1.7811063744268227 -0.79185053420942175 1.2191181473095631 0.175864035529611 0.096187394165586373 -0.77831928750820289 -0.23220099469078823 -0.68694756894073228 -0.3523430795957378 0.69170779180859721;-0.23285033687064816 0.13945016588855538 0.93140241394937684 -0.061772517213895969 0.78707363911812434 -0.26583933294581258 1.5633207983148121 0.309538205391023 -0.05561950213350092 0.76778228974951646 -0.11862090636013173 -0.095794535645116224 0.50946676628879883 -0.069567175781540314 -0.43151559653258503;-0.42755717821131539 -1.6839471196118894 -0.76587493640526183 0.94928168283792891 -0.27692963248608754 0.10372461331246685 1.3063304949694898 -1.877661478913826 1.1540602300142573 1.1463979681338514 -1.1059854416812827 0.26419392514631013 0.39545738706823164 0.73413493306061928 -2.1363618036925143;-0.31701759971863863 -0.94299333461119517 0.9436436232699057 -0.4488476254566221 0.89266329350702112 -0.78450911321591033 0.42786355664099884 -0.43539841228897652 -0.36708510921947485 -1.6546270998007262 0.23109628614290245 -0.30733002146528471 1.7472327804179972 -0.75221690816815501 0.76225015364938642;0.24248587495092569 0.9865018744323788 0.68039966994156897 2.7708736854797618 1.4180714713662315 0.9212430516323461 0.76405211963301489 1.5129395087526292 -1.3799231866298161 -1.9581592832424441 -2.2767243781206963 0.20912930788424711 -0.20930209845080566 -0.50799253933386856 -0.55998232108038359;-0.72778827022614689 -0.97974189280756641 -0.98124914083551773 0.5346381581031846 -0.37659912501148335 0.28309036101988494 1.1116820240436474 -1.1641247260549372 -0.14478398596565228 1.7852638857366971 0.12347760333897545 -0.00085565894924154867 -0.94468587977824314 0.32825351495789173 0.68780491100244545;1.7097170921506177 0.16860558687790531 1.5123634357401747 -0.46036243555918366 1.2652593635594271 0.79685839975650519 0.75805649351849513 1.2025954794415967 -0.10555008645523681 1.1613951186047011 -1.4716564074196306 0.13443570140649622 -0.54110245444381688 0.73102146795683409 -0.84859687729027689;-0.17993963126571316 0.9897230215416114 -0.80255846626915672 -0.93116761912789603 -0.37077761805968018 1.3579028988571917 -0.3755971609129844 -1.2914602245170563 0.57143198555408159 -1.501493640085134 -0.63750116420991687 -0.35627465068371628 -2.5559648084494082 -0.32827531496908313 -1.1633472029212;0.66336037734407927 0.86887122287411245 -0.8009275988364567 1.5089452639170391 -0.91769502585245122 0.00373231543758017 0.65530109110399681 -0.68168652052817913 0.63206087160859503 -0.28014655706078717 0.10042181709777118 0.77150024340710655 1.6766836299541168 0.023374895715423963 -0.08251452302956655;-0.15641199642719961 -0.54274394366149148 0.77123767414065092 -1.0866738178942119 0.16837679664541913 0.67375807996331605 0.83505887097885556 0.71451996908977045 -1.3737355368592814 1.2752832056793615 1.2983648478300449 0.01362793245791432 1.047243648472022 0.46809630287686194 1.055533324506686;0.17888206910758997 -0.6437672469164395 -0.76896966437105418 -0.61898599581539226 -0.060947286668954853 0.52305674246857015 -0.44931325069268696 -0.16684083630542101 -0.56694299306757456 0.050622881255031643 0.34380340644443108 4.5196770687259784 -1.2571735003713613 -4.5311674710044487 -0.048687648083323501;-1.3147579174119042 -0.27363890152834103 0.89315530649350638 1.7703124071201757 0.42844066881512649 -0.56715608712805887 0.45073799253311597 0.85451048599994872 0.51502368385607167 0.084622525235172247 0.8538682251023646 -0.4271695708986239 -0.28034360754808779 -0.69463089352591934 0.15449867639490122;0.066556822679445016 -0.15308056225673167 0.63159533591355776 1.467800392708406 0.69227021406367828 -0.41553093424041854 -0.6679374773915252 0.19182417941553886 1.535327517836337 -1.5011448594900034 -1.4589924796750973 -0.043376619800033288 -0.94851170607204993 -0.37376082025183616 -0.91122551007830244;-2.1791026257049304 0.1754847227173579 0.019210606532503709 -0.78612177773786962 0.47108193057769437 0.28394860349973944 -1.388013242174936 -0.48140584520401947 -2.8207918167032111 -2.1869560591183155 -0.14419511630079818 -1.6254606912594702 0.44283378300147869 -1.1157933381869243 0.80775471074209959];

% Layer 3
b3 = 0.18674207702967255;
LW3_2 = [-1.4207269225719175 0.7705282304694554 0.46695350819047121 -0.8004032616519795 -0.86109205395404043 -0.1327046877249746 -0.20554770510965562 -2.1456431284062569 0.47814931062327509 0.4193164236081704 0.76662990849497825 -2.3301011064399089 -1.4413411828440768 0.83481002591265063 0.60807271767460003];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
