function [Y,Xf,Af] = NOXLasPintas1(X,~,~)
%NOXLASPINTAS1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:35.
% 
% [Y] = NOXLasPintas1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.96825396825397;18.6915887850467;0.0175284837861525;0.0546448087431694;0.00640204865556978;0.138888888888889];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.9709416486993199;1.8520132073468998;-2.3605873656394039;1.9978963316893423;1.5173205536346761;-1.5669391097181369;0.79010624762222692;1.5571678033208594;-0.3524787832378285;-0.37485023863850742;-2.1713014884302324;-0.39766365335613368;1.6513090628427165;-1.907828433344122;2.7046213554774896];
IW1_1 = [-0.89673629143845446 -1.9940889162933242 0.15281259622677371 -1.2361673494626821 1.874649593644764 -0.87324086921766064 -0.11305245333831677 -0.68088899668617175;-0.66093499844613002 1.486269965119126 -0.13856266151416977 0.38304576060273476 -0.97022774536727796 -0.16310053344726197 0.13743794070352436 0.25072397101316174;-0.21813237182696057 -4.9598758135802541 0.20854191337777522 -0.33513483172917735 -0.83816371485522911 1.0523882057165703 0.17602116253662689 -0.26508888747328369;-0.26955476869017791 1.5083218534286353 -0.25375884207305832 -0.24767839417721635 -0.92739905482219864 -0.62643693133432121 0.082067876065671036 0.38873532653903303;-0.75300246957966366 -2.0945723081334413 -2.1403635069153792 0.1274941138208745 0.48847360593258343 0.54104708501364374 0.58432277939407873 1.4026314353183189;2.4248858642328188 -0.024939136771857912 -1.9313818920819412 0.42362825122898962 1.8530574229028112 -0.73730988049209067 -1.9019624481013093 -0.28146715170299474;-0.66654693848849578 0.47021419633994532 -1.0796454076522997 0.0024258805345405005 0.22969598505125535 0.61889384892603938 -0.33117754630587409 0.84218537967261187;-0.32486005346296287 -0.064551549795974994 0.7848122257583563 1.08340513509116 1.5041451957414687 1.8635218178167174 -0.3876469638898174 -0.80658574233024982;2.1795896327276845 0.64025505045151743 -1.2481819322257253 -1.5628720224402295 0.86038107361858873 0.19674329625639383 1.1124648397370887 -0.42990048052377977;-1.7803301322022991 1.2087797189125238 -1.6536630953242737 2.2130241641703323 0.080415817489343233 -1.7255017841277138 -1.7311990043118204 1.093825817880473;-0.60276783387830701 0.47059935091581995 1.1015339766753824 -0.32813917276388666 -0.64227368415180919 -0.3312632123256406 0.4530278434595249 -1.9557949413696947;-0.49553989349909672 -0.58779125041083424 0.80207701852567292 0.71976934918007562 -0.6033069427642036 0.71198029031426346 0.035011087580128025 0.4593182253128929;0.49507636626159968 0.1164519188345466 -0.35637535144691879 0.35906386295595444 1.1463224080554844 1.3292184534960223 -0.32092066516219442 1.5826824332690468;-3.3223956838249928 1.0090620231608398 -0.7775887806050289 0.53354065711834253 0.83027216976262042 0.15975834885512302 -0.5770480149209013 -0.095977296582787419;0.10787726746072596 2.7956692090862085 -0.23065545015045566 -0.11113110195377361 1.2811362551481229 2.3219142046215864 0.18219761574617246 1.1786665340430693];

% Layer 2
b2 = [-0.91633870892514158;-0.39058298390462898;1.2680112097872711;0.15899905191096664;1.1685660705012904;1.5563755463943942;-0.85460238924888121;-0.097334164004999862;-0.68683195511360251;-0.38910600789496186;1.474580601235294;-2.4466041892447739;2.6650028418705887;2.2173026614218112;1.1119633549229151];
LW2_1 = [1.3246352874542959 1.8079409548198677 2.0985489693236694 0.046645982044904763 0.89186047534902035 0.74415188521527686 0.40766083755675736 -0.64005798105898792 -0.48591754724091157 -0.60938868242961963 0.56932459253056888 -0.46829689383029233 0.77737659170890994 0.60849887077387543 0.9038686375252093;0.68518260045449841 0.82139777202570607 -0.80783502250935912 -0.23697400089764167 -0.30087975176302861 -0.070114336785437381 -0.65066352931402105 0.28005110677899497 1.3654042686917491 -0.68326390650044633 0.8281394567238497 0.88235274496833993 -0.012516659949989965 0.09278537740645898 -0.87482798666710282;1.2847058526583552 -0.17953297994030221 2.4832771180315891 0.93538416261884483 0.13843214794795708 0.83429464727680791 0.37478886490688579 -1.8453074775946385 -0.39435456400385405 -0.063224737698272693 -0.075832591134903024 0.64426158027632818 0.62546929983456767 0.66478364796026046 1.8189799417244366;0.75874217448048742 -1.859909135765593 -0.20650002956737257 1.3987788922485553 0.65373204729874124 0.77487773964856987 1.0006971753174596 -0.28505417917754883 -0.55013786311322155 0.15239558047003671 2.1357552281101166 -0.73841103558989973 0.7321850620985586 -0.29313085369419822 -0.28384360452038737;0.077902690405553976 -1.7814340381223233 -1.9138591475672093 1.1384131251330389 -1.9978115022706655 0.17389709434459924 0.076436650946369519 1.3256763255226676 -0.43812451497120941 1.4147286310348701 -0.52204801567942849 -1.9685197900878595 1.5114296780834602 -1.4331854029958844 -0.92786652195983199;-0.33947772602249648 -1.85800762634891 -0.028579075818774845 0.76197792092041405 0.47819697972586855 0.32352831648204877 -0.28563705747456258 -0.38445275703542203 -0.96524521035862509 0.097718441003048093 -0.34658366824320969 -0.88696009188998692 -0.05804798991968238 -0.19735802248033502 0.5624327867179979;1.229106540040722 -1.3587182031542928 0.10969978266005659 0.63219021847700363 0.52143144867161551 0.82560588267541335 1.6217864092122893 -0.035248948725178794 -0.25770605501572164 0.045878024362331488 1.0490598150207275 -0.021890067596413397 0.38382125035374459 -0.2902108039808356 -0.020211606186474211;1.5469139725166077 1.8654183316731565 2.0415517280596966 -0.037157701637126186 0.77793606859045228 1.0769524973399132 0.1315931380897952 -1.1955999889297395 -0.54046206833939803 -0.62003088637634174 0.29264241418685377 0.30526893672144523 1.5078117014332078 1.0785398845365055 0.66255984059891992;0.7708314280249271 0.25317904407923397 0.96260659329440701 -1.3531206091887056 0.45524167420917566 0.47463323730986889 0.41561274223101846 0.43240538395345679 0.22133047562883731 -0.26688082342866526 -0.92000186216528634 0.63889477486441448 0.75422526882339813 0.38738742593886333 0.18821895194289992;-0.69449002851419339 -0.44973439531572329 -0.28510617262415011 0.1353039687097935 -0.50273828301416168 -0.35907114328726331 1.5508645545820208 1.1003978786791322 0.28060897962693337 1.3847708844549227 -0.66406444619442306 -2.2589664930254747 0.76191475488587612 -2.7792582710929405 0.77414783200080384;1.6552461379942989 1.2125769882627997 1.4381323584488517 -0.30080279041694091 0.65182394073386185 -0.13838816602956042 -2.4802355065906192 1.0238901193401957 -1.1852142745355805 -0.17453604396482855 2.8527928906562128 -1.2047212085247092 2.0342827296606139 -0.26268394776484705 2.1865843776667253;-0.13287128811614088 0.21452030052147064 -1.8679502001025963 0.041882800244612974 -0.37523190842055482 -0.14292060807940693 -0.041222238187109246 -0.42371448317664462 -0.59842878893721285 -0.51530316644992002 -0.93759089896217851 -0.37217758613116114 -1.3213278560413946 -0.32282746393816641 0.92801150383059994;2.2143085645549729 -1.4633255130158582 2.4020508758612782 2.3080252824017702 0.55900531576854506 -0.17781224157006392 0.70258684074637179 -1.685605072342937 -1.275942804042048 1.8617370370897015 0.64296770788048507 0.53817107081581395 2.2917748984199653 0.48037221259442642 1.9881098457509303;1.1709922210280554 -0.87585022621766351 -0.16470715258571719 0.6662765441333538 0.49979642668327118 0.66827881418917423 1.3421200099428625 -2.1690621993926635 -1.3240237903630088 -0.17843074229741035 -0.65624881860418627 -0.73631021240103578 -1.3316334238096936 -0.24931297814497172 -0.43757971403639095;1.6260859687172389 -0.030117457375107196 2.1418406071862206 0.094779470870164154 0.30996812446764782 0.37350289449426893 -0.81060374244363964 0.44319083410878507 0.92988853562802376 0.71983333824023088 -0.85765612598085128 1.5583681996007077 0.039855374995715565 -0.1730136905424976 0.87984402466272471];

% Layer 3
b3 = -0.24687054160980415;
LW3_2 = [1.4957569143446603 0.54255858595932016 0.9118828352291124 -1.726795880927678 0.28865897524591289 1.4313092509246108 1.698882723184056 -1.7206057950017459 -0.74099780504464119 -0.42568619826545534 0.41728361755800059 -0.82439433120431826 -1.0259745917021035 -0.82936076195640451 -0.80333667902427064];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
