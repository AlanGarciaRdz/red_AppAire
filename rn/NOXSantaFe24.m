function [Y,Xf,Af] = NOXSantaFe24(X,~,~)
%NOXSANTAFE24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:53.
% 
% [Y] = NOXSantaFe24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;22.7272727272727;0.00341273633199099;0.00632111251580278;0.294117647058824;5.42005420054201;4.04040404040404;3.03490136570561;3.96825396825397];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.6311266441337506;1.5931409660388338;-0.69329558399431312;-0.99438933909966842;0.053769583922679762;0.42483831994879445;-0.16580106218123999;1.5154751922181768;-0.59692720872616711;-0.6032231910873036;-0.94271878569802636;1.3085167708582521;1.8020397185357242];
IW1_1 = [0.70631278204660475 -0.10383044163735461 0.61401136721917893 0.45217128572491833 0.25750723051515612 -0.13950769532023236 0.45044885039204152 -0.21917619180207407 -1.482121611244136 0.6624161727902913 -0.37841779671820108 -0.76200525375152228;0.11829974781556475 0.58738936051065804 -0.59055117038018923 -0.42908088913547959 -0.45525974169895012 0.37047309770420134 1.3651844353513196 -0.25424717079327058 -0.32823009474070941 -1.0971974807172633 0.15990063472072638 0.17726592188209403;-0.054199531589373622 -1.4732894421593135 0.18822468202918585 0.54246588002035045 -0.3265854355954137 -0.23512210921978341 -0.35274090992218005 -0.5225734696704758 0.71400015941285122 -0.0389859274670427 -0.17948010632864997 0.32864256635269684;0.83273380449913148 -0.46163912972617382 0.48972558285469542 0.023076493291490963 0.60131583293759006 0.099276097451237111 -0.37828592255484339 0.39029466447622929 1.1436751760665376 0.17027390510351492 0.81294795406726439 -0.55255701399192025;0.067380787880817417 0.064365410876579113 0.48258919183506543 0.97321895948336379 -1.0204634938023054 0.57311400684804759 0.2730652771616241 -0.52004304304857207 0.11550869304690148 0.82739170006520735 -0.73169614716368325 0.71189138674753361;0.33089699372918885 -0.12332250440102764 0.39137961075586608 0.67931302871105903 0.0040237273388390206 0.97443891156749463 0.064758117080478156 -0.28867049823099744 0.36992407888450113 -0.39975637169836842 -0.51945252778192974 0.47247217777268041;-0.021942199504138858 -1.5679593126259921 -0.24021181177452189 -0.59463881881126557 -0.029925275952267995 0.67453344008266736 0.31448866226133304 0.61231618275527111 -0.78881794415908024 -0.41383175607964151 1.0748368112789062 -0.36455802892412598;1.4652240988664311 0.30643797647872606 0.712972643359716 -0.083282293244795025 0.015412264443888855 0.19229459375973951 -0.0029554791157000819 -0.045246574988939657 -0.10362397904745368 -0.58444217683997368 -0.21808282822300107 0.45020873592590827;0.14587386056674082 -0.7078577325506159 0.71525949488167617 -0.58725945857082529 0.71145045350115876 0.0091639334837993955 -0.48489259678690633 0.023608975077944006 0.69872662147643916 1.5851953839096806 0.3516530863201619 -0.29359920132356926;0.36259688157964293 -0.6193770036052435 0.54763533016089339 -0.0461528626762336 -0.2862266326247056 0.62493276857034952 0.0022248647600110125 0.34232512895928696 -0.37405771244286784 -0.95736943615328884 -0.37121690945952307 -0.51732194679469423;-0.59752126139265838 0.28128722277443474 -0.40417617348402296 0.2579229538216426 0.26049133012408915 -0.24211884092779173 0.061351145950400844 -0.52795309021351255 0.4219325130996141 -0.5112647532837894 0.15563812867970522 0.46602421161793739;0.37074226409413735 0.53335607530732843 -0.14026876720273518 0.75842891936070822 -0.56387871470459727 -0.57400981033880094 0.063976703657759024 0.43710369895306456 -0.38448709388297619 0.22164943307673138 -0.12893349506223656 -0.82224693675139704;0.1405043945709703 0.59380026958325505 -0.5364581774789523 0.64133728118298428 0.62773552465413229 -0.65482481394660952 0.094411787915793646 -0.17297576278080748 -0.24981270375611428 -0.58792060727248896 -0.12705084984506293 0.20393900644217122];

% Layer 2
b2 = [-1.3709067325934705;-1.2522617358229184;-1.238943800790095;-0.85554098207603912;-0.31225725974832291;-0.32845686457446605;-0.035192831425049184;0.43289597220418785;0.38212048969345297;-0.8464443110082448;-1.2176959688649132;1.0311524091496227;1.6532758217274055];
LW2_1 = [0.54366279863819666 0.38118999758070393 -0.38304486524073023 0.43273377059369311 0.59809534860442426 -0.80651552591063669 0.074663703468171153 0.58685684831411722 0.11273234929511303 -0.41035211560431484 -0.7187885764399603 0.85957875656778204 1.0374842159266457;1.0132658742777614 -0.029670229204067932 -0.23912449980780362 0.26973805986749749 0.21695917694506089 -0.21003684432793102 0.60938412783050544 -0.63078767202082264 -0.68528250238721933 -0.93699976034508548 0.026605421116626796 0.3135568385449678 0.6545746890025903;0.1949847845926839 0.40571231320234541 1.3931638566144831 0.2250639381034007 -0.3754045859203986 -0.19365593772855846 0.83998861747585207 -0.36603853844814715 0.44030278173189841 0.93333909027883788 0.26333242566990467 0.2656744635081032 -0.53612674133042848;0.15961109064795262 -0.5684416469239072 -0.022507600945569375 0.46297683755333485 -0.3081286924405971 -0.50969651982084474 -0.079238662305366706 -1.2541074322770152 -0.78434383776687733 -0.61765498385819384 -0.68155278454195611 0.073851185834937647 -0.062325095853540638;0.4946514063918292 0.5048866210379932 0.011584002532477796 -0.052160850933606277 -0.85145516323404513 0.64991587588062461 -0.3504698057279701 -0.37614487602941116 0.88380896940308284 -0.079675717960518033 -0.89917677574595856 -0.095495005339265124 0.85333038028763686;0.84071598666651037 -0.853221642004373 0.67287358944163855 -0.15246404607808167 -0.82157753712318826 0.89591057482744796 -0.67904926050716929 1.1034040158536924 -0.85695815340553727 1.0614923079406178 0.54779216755897087 -0.076641754085202116 -0.068657445899247715;0.55528230510026588 -0.31635818753351019 0.77008243384696184 0.48438651730860222 -0.99091893787008878 -0.40641163008827164 -1.1388327978649941 -0.014904489395895421 0.42604583706183896 0.38515767084599761 -0.05450903611667645 -0.22970910533011471 0.64111227304911667;0.43319769179483369 0.87757560447864824 1.1538965624195416 -0.17987782812572237 0.78319283532023254 -1.0087433243579045 0.98257552946332904 -0.17476104233483608 -0.61028753652178802 0.43021437106523586 0.20548493788888936 -0.5878455031791846 -0.21651209753013387;-0.058198874732168976 -0.17578104142095297 -0.15090507920491364 -0.65229194503418508 0.82598682145934332 -0.29433241760806678 1.1426408680188516 0.11285445598952226 0.20447908193083547 -0.18428502092719401 -0.19540425912804552 0.29093372291116615 -0.56271863722843551;-0.92437378155524019 -0.32998823165965113 0.11774895909049507 0.30798848704870396 0.20473926036653792 -1.3686501122580492 -0.066939185798559175 -1.127367328022991 0.73667354241606109 -0.12340000113193161 0.15112333283368462 -0.17290624536943489 0.17062783744501103;-0.59649016596745197 0.51667939377251981 0.27528621465794806 -0.32298949199055543 0.25381195924684796 -0.31465194281543302 -0.44312522345813676 1.1721680776648618 0.55228643928635768 -0.34803516948638796 -0.48088592783215311 0.47818521045388601 -0.25739900052828518;0.17968814030777425 -0.094058675052354199 0.24435830863809949 0.59848504507318756 -0.60167263719901054 -0.11951438838854098 -0.55290051262517381 0.77126171509109143 0.74943534447882831 0.36329818399665897 -0.72372507493401572 0.35290823003228705 -0.5971377975136587;1.4747976168571797 0.41817822738634763 0.67202185633904821 -0.52188578059222834 -0.56628415226143358 -0.73338484048165709 -0.66533846346814152 0.33664257072087878 -0.1740345777229588 -0.20556611614609327 0.042698455795168545 0.083947151118541091 -0.85484167374479603];

% Layer 3
b3 = -0.25568840516299524;
LW3_2 = [0.63555264274993384 0.46127073600210977 0.54966072869575988 -1.2466093634580728 1.5034040404598492 -0.31949283688347746 -0.66436366597640184 0.8041687695633839 -1.14247648115842 0.98748948180033702 0.73329941858641101 -0.86768730727308729 -0.89597137764200108];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
