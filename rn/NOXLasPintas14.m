function [Y,Xf,Af] = NOXLasPintas14(X,~,~)
%NOXLASPINTAS14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:48.
% 
% [Y] = NOXLasPintas14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.96825396825397;18.6915887850467;0.0175284837861525;0.0546448087431694;0.00640204865556978;0.138888888888889];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.1867431445361116;-2.07624334537587;-1.4463702010665203;-1.2355398281486742;-1.3590628638434485;0.15029057259001971;-1.0599000009498085;-0.27300745259324305;-0.1296193927692427;0.70495731507812198;1.3157230748045461;-1.548241755469405;0.25869183278835278;-3.0058018020155139;-1.567538816116729];
IW1_1 = [-0.55319252260518137 -0.087408889461867187 0.0427687100174967 0.20605867140765236 0.047493947075892419 -2.6350499331703268 0.11991003414193427 0.32419640571899688;-0.27961622306086742 -2.7067961960806501 -1.0812929880856361 -0.50585902012820338 -0.49127645022686101 -0.44833246330778459 -0.081589883148569048 0.64297262592733151;-0.31925304539428107 -0.32363742199680517 -0.78664407826370242 -1.40321433495879 1.2808341516175461 0.43644085840251845 0.12509383222604872 -0.0075032016539777098;0.24764904014892306 3.2869091255837994 0.0037628954068406979 -0.29481653739690827 -0.0079959230283224436 -0.71720819417441362 0.06384993999269753 -0.097381261818520887;0.13242358426795756 0.021553487412377351 -1.0687690032818682 -1.6400814366382035 0.63740280207347877 0.66966042415343574 0.38185093121698777 -0.24803895318148619;-1.8239818395686822 -1.1176408252577226 0.41130310397988218 -0.83458823209221011 0.36366241681755496 -0.40576194644332464 -0.6057451527526071 -0.82658315732762866;3.0358839072056707 -1.6757990460473662 0.81793735065909468 1.0711661354820665 0.86788924930854117 0.23540327495111091 -0.075730191334135971 0.5212472226976711;-0.67791604323064236 2.1162462091185703 0.094201387190368344 0.42615092363002566 0.12884601141607446 -0.65956883190439397 -0.173341965323344 -0.13196433026630869;-0.75066351364795836 0.4761905288081868 1.4652308045350564 -0.33118061928204301 -1.3537410892868869 -0.3336076661330572 -0.2880613819667831 -0.88249994014022726;2.2373582582089719 -0.50358650834155416 0.23140090192028906 -1.2743358120574786 -1.693526461992223 -0.55134381666298649 -1.3560836249249375 -0.90922412175704148;0.47227974931363664 -0.020972378393827033 -0.28056025664896833 -0.48456914569951193 -0.72473285990701908 -0.6142073274347476 0.92060062513027108 -0.12647303405883709;-0.85818166614212132 -0.20632182012337855 -0.48287714243663032 1.4513499865630928 -2.5154604287385163 0.23692163168453007 0.97628477012526882 -1.2648125549248825;-2.2897321083435687 -3.8348300503530335 0.15853016202748596 -0.15082628344565627 -0.58744140668216305 1.1666236733853064 -0.25144929529282006 -0.28434006833380571;-0.30204948964834777 0.40043379649784738 -0.10215592858268906 -1.1613675258093306 -1.7410615199612136 0.84163475382903796 -0.48876123471054345 1.4527215866910885;0.56577357344785717 -0.48523333592475526 -2.281603932724904 0.67832669054178274 -0.55996372142149653 0.68565195909103149 2.0259633905053769 1.5248822140799478];

% Layer 2
b2 = [-2.2813616918116271;-0.6914112405941274;-1.5428685429704192;-1.1270669223957441;-0.31076487781848211;0.73615469479203077;0.058750283085659022;0.17076164137844974;0.13522879354782874;-0.31372829744268699;0.77081021862887944;-0.76456170655519751;-0.71049834022959624;0.84955714108533575;2.1941070781790044];
LW2_1 = [0.13526798799117196 0.2923126182489828 -1.2954080333204341 -0.76747347230985419 1.0469422888772155 -0.11729470078535598 -0.19471109214537871 0.45513904833616037 -1.1315406818835732 0.39459194400303821 0.15654321409595709 0.68234706867028794 -0.37988236810040882 0.62320621665203346 -0.18480536496677452;0.70658845386253311 -0.57833280387807939 -0.8695810447572333 0.63639825828275043 0.60524356049321304 0.028377010011391101 0.20363677250990581 -1.4601929372114921 -1.0346431158978153 0.043231529793680737 -0.43924014028546865 0.37496277811266654 -0.34480014067056586 0.46194415340110706 -0.044173334740730492;0.69212200930916301 -0.82391973575879351 -1.4485612857918289 -0.3904882759373105 1.2051755433413545 0.65088294156951276 0.42968568692653597 1.315592985559271 -0.34896344393796275 0.4470067618759116 -0.43283837024535254 -1.1531196378989506 0.2804621911188892 -0.60777486469526509 -0.044449873863973317;0.65902847547258514 -0.26712105407754366 -0.20590505658256791 0.27745620059794768 0.08495148606293354 0.6286166774844999 -0.73457085853282578 1.0675404441290965 -0.10754659871838784 0.092886742151756158 0.044381179543078311 -0.44978512730430892 0.50522703285090054 -0.19715069457506129 0.093506267704845394;0.51119322331863526 0.13505662584659472 0.69626748906536695 0.55063589192779083 0.22118095524374573 -0.66306560410851145 0.56924121799432803 -1.5544861347196064 -0.48082457622309765 0.20704382168312541 -0.33332335941968411 0.0067421217000409196 -1.0530815248654379 0.94078604929019449 -0.057808913096591433;0.25386935366536878 -0.78384584005975932 -0.96060772754398172 -1.5273488595281854 0.17782122518853369 2.0035300615896596 0.85968282564832132 0.44135674688700199 -0.49370821238484952 0.029624318085025411 0.94776990139256112 -0.024381044998094795 -1.4619274334444858 -0.36791917174792649 0.39709380397935273;0.32355748772990983 0.66261377645469299 -1.2393783091756121 -1.4851798227034678 1.5643535034935123 0.15434154330092423 0.97643050769274364 0.57015557465466271 -0.69967747280855586 1.1139916711875533 -0.047988228459120479 -0.46641061427237529 -0.89858757315512183 0.40824174796575763 0.36879791707328935;1.2648321551633701 -0.17475297878907195 -0.25468850981323671 -0.4344568494685872 0.076050764890045933 1.1749127423821488 -0.8099602200123126 0.81633394641375234 -0.12477004882561148 0.025127112110954017 0.35856081413966939 -0.58710519112090576 -0.44976180734908244 -0.1965466627486242 0.39467220086506266;-0.94265284024375295 -0.15260626179304912 -0.19740573784696711 -0.61063640617289183 0.29574236765336936 -0.31081097658007478 1.0879510370756584 -0.77091851482658313 -0.18895548897864167 0.16222410571250631 0.12808408551621753 0.15070192878038693 -0.62912380294617753 0.22458157686873231 0.070592147837933966;0.47650793369272337 0.33958340800208819 -0.3681154688267384 1.1993188058896713 0.095465530957365027 0.61932416545256419 -0.32887168188743376 1.3750555371059583 -0.5062916082681701 0.34817807389966016 0.78447145671117846 -0.0088120232035975316 0.68728057487970795 0.17798337418842805 0.34782388602553649;0.98839710537337611 0.96053713887269676 -0.49764643442023176 0.92568382845474162 0.11739970630687428 0.4917116592107077 0.65197797662464418 0.61558509591001143 -0.33237435806675203 0.3759161666591746 0.69099670721820294 -0.57367785701514185 0.88523240912995371 0.206463752233676 -0.43381661201909405;-0.86811934237010024 -0.84074064000042337 0.024366719240915848 -1.130364623756221 0.074939954878967013 0.030936664484505924 0.93843133532248701 -1.4713691456954716 0.095211440936504299 -0.27183497483100544 -0.2743831773825447 -0.20270538889106104 -0.57311661357542898 -0.085068244949274938 -0.15648452124960094;-0.25176332049854711 0.063739390772830307 -0.12052174215948118 -0.71881202422100321 0.5384986057542317 -0.27819532362177085 1.1492393223425981 0.27734205414044344 0.0057182010591093364 0.20471185003810954 -0.13850119751121162 0.20345373839040121 -0.571132417210923 -0.036024826641894513 -0.31982190543938144;0.089350572708298159 -0.51358979948468386 -1.046129217544036 0.25986397545344442 0.083735491383185007 -1.2783619942616411 0.18422593744040172 -1.3748792778850698 0.38121359547326722 -0.57466345879236203 -0.49111118036730744 0.16835839437622804 0.78037105955219388 -0.91317769391177839 0.76097335714424752;-0.028626522879259143 1.1177028573277141 -1.6131648500501454 -2.4794695625963739 1.532517641245503 0.90544876407941366 0.15628146210620536 0.78537588690794125 -0.31429883554721072 -0.98578870086266712 0.5066881900823843 -1.0321748589730195 -2.0784894583526037 -0.60745204191645807 -1.0314811811687554];

% Layer 3
b3 = 2.2469470380077632;
LW3_2 = [-1.5212628473859207 1.5668452868473366 -0.78695155004728978 2.2362420423297342 -0.75542947695132534 -0.71290348030922035 -0.55816898716163044 0.88374705236725526 2.344282696039834 -1.2284763334294495 0.5308713994605766 -1.1801672274218546 0.87254002765905059 0.19186654489622551 -3.1029369059556333];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
