function [Y,Xf,Af] = SOXAtemajac5(X,~,~)
%SOXATEMAJAC5 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:22.
% 
% [Y] = SOXAtemajac5(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.6098838796915658;3.1617229047419659;-0.11606577603922821;0.3998544271552929;-0.0098193870300047285;1.4690321791382535;-1.3754440794800007;-1.0733557058742251;0.67542263870461516;-3.774288750908239;0.29368655955703393;-1.6666454062020895;2.9499436571121138;2.7315383330558576];
IW1_1 = [-1.4470471197110193 0.051155319898346707 1.3719216482114309 1.158681631016496 1.4336562769816024 -1.1439549488023966 -0.099010110141115826 -1.9868851701004975 0.46517236448175747 0.099530874801765187 1.7632894469503302 -0.14942019179554897;0.14582735386846943 4.6192019330211407 -0.38044356923212397 -0.12672428706165634 0.044712262915564814 -0.022453247339878669 -0.19350055845833564 0.25864520571046923 -0.14455565245500035 -0.14340859474509554 -0.17929057920548563 -0.42163660431063471;-0.34693509897097674 0.27325706916035508 -1.0761002680890892 -0.074835888587420879 -0.92453884969514832 -0.24363127217561734 -0.64940102624038321 0.61312679688333693 0.60381017231817335 0.070410692444764431 1.6407178597361129 0.87542420846650237;-0.089852577554266025 0.86556140703922124 0.137772359360291 0.50143132440816285 0.56209102472148909 -0.065607383870971148 0.1058803576068332 0.68823201136521173 -0.73991300977725261 -0.31972234556476514 0.52052969296767559 -0.49596831647299838;0.28465460386422264 -2.1800901662790211 0.2252547380040022 -0.078766649033578454 0.47978167880665129 0.19012153826047609 0.31037997686860058 -0.53892184336572679 1.3725436608894648 0.33963865772077212 -0.7703768368817635 0.33333167773022754;0.18276761482391271 -2.8589879083698335 -1.1832833132238485 0.79474624524583481 -0.51469532886563329 -0.30398982556159043 0.039418029512144695 -0.37633916176221238 -0.047354569021987654 0.45370464898723367 0.112420733438341 -0.51003295351486411;0.63147572412608588 1.5491607213949714 -1.8706388181215876 1.4196199905774181 1.9254162486019097 0.79602966921304763 0.50690669263297106 1.7658835078112562 2.0090217908760719 -0.52254472443786693 -0.23660217706000508 -3.0030205198095747;-1.2680589726335794 0.30508393775338377 0.12771129757629904 -0.070933668174853484 -0.34037487935581884 0.33208626769043659 1.7260681641262867 -0.80670658889529645 -0.63239018802384639 0.39372055800962391 -1.9895036120053649 0.54940064630000773;0.018646994172101309 -0.62311102374476413 -0.047673075046065633 0.24324153029956702 0.074283652752928545 -0.26257100102371367 0.017533781145402341 2.0937809081523646 0.69173862206451542 0.015964971667005643 -0.44403169239610257 -0.97241572154813538;0.22492654212431096 0.089199132664123978 -0.65953055668733185 -2.515437505335115 -0.25578836453502474 -2.063645549666155 1.8729756098956059 2.377476431491155 0.41179315439371933 -0.12242981446370418 1.0592943503879044 -0.65465955037074919;1.5757682459690221 -0.27852061803767725 -0.69361914476056696 -0.93996641397460357 0.34374166502228737 0.91879179171033298 -1.241966880260801 0.6596167267251094 -0.62056662568100573 -0.05111578147607998 0.44635106748898951 0.72754317034390414;-2.6319908329732637 -0.34651290088823272 0.86639798187895645 -0.67475112079003752 0.65421136576326333 0.056237826297843553 -1.5057611355888463 0.30077608729693772 -1.5475804030285094 -0.47591745134408608 -0.55304845563957572 -0.50726065033943601;-0.35567936490232516 0.45177234691847135 1.1801707425830421 -1.5672136361624278 2.42404557492261 -0.34101289959079772 0.016122089371786216 -0.94113856607670932 1.3390398503033516 -0.61314287043734805 -0.6551539886646206 -0.63102904163595086;0.23659166122485173 5.0069954553666509 0.27866859247936138 -0.29837392091224929 0.37620442606235421 -0.20470768585992102 -0.036202166459100016 -0.70592412904632407 -0.1691647160223895 -0.23952486060780079 0.23781087013025673 -0.66450438144489254];

% Layer 2
b2 = [3.4951203149352539;-1.3354995605039486;-1.7170501446599162;1.2183974347068331;-2.8929951952741226;1.6885873797714017;0.084262692742230777;-1.8484982323428094;-0.061304351555701589;2.8372003520680669;-0.91817692286095343;-0.92009743452217418;-2.2011903191800295;1.4951713354551299];
LW2_1 = [-0.49066055240268758 -0.20143510958966612 0.48313706062618822 0.044299740217713199 -1.4067094548383805 -0.72736634584212012 0.91929011340630973 1.6756462976824733 3.7461251879366513 -1.1135722327901976 -1.3371981596766258 -1.4434289983506903 1.8642795758412349 -0.44848935173288984;0.5121510131980751 -1.928095196233697 0.14004173325590083 0.3863506391576163 0.55831267529079553 0.62066645122265551 -0.002988978986842934 0.28385260216236763 0.85592367122199586 0.17049058433228323 -0.20292247812447631 -0.16062438968810988 1.3586047008389981 0.83050081377831675;-1.286433012299806 1.3940087193469433 0.26816601074469593 0.64121754910160389 0.14792598882793376 0.43249969708070446 0.035313345743452837 -0.24950782474081071 0.62156632838752568 -0.11831480901961379 0.44789522236884488 0.70451620320092412 0.34300400274935611 -0.33333898707814186;-0.19094704201001161 -0.12610009415000401 -0.35778123620307289 1.0403410032286944 0.5324545974964523 0.68108956088267092 -0.77635878719816775 0.54004318552825792 0.25647018247797143 -0.47598854993558604 -1.0427576379656709 -1.9727092690917989 0.38209222311280933 0.66294266945307823;-0.19035998197154586 -0.77246558042345836 -2.0368483225942873 -1.0513587053606186 -0.12803127294828928 -0.7009853245779093 0.21671972768174497 -0.29503800015029408 0.98872156730886307 0.60495446877008741 -0.46969513028231907 -0.58310226566615708 0.87195159397601685 -1.0946545752488259;-0.5668812713217104 0.73904648356381286 -0.23534359710580519 -0.50692100961051367 -0.44618224680506685 -0.74275547152149646 -0.041644558072164127 -0.31199017733324563 -0.86255932223857068 -0.27155955651932845 0.063038833970675445 0.1778072572797626 -1.5196503479293568 0.14019428560958186;-0.64872579458150992 1.5140664214906356 -0.82927610819130904 -0.92457506330556116 -0.93442525089960604 0.58209363657625146 -1.2635812491440641 -0.018477009257070125 -2.5422873945839615 2.4095133607890746 1.0786027262006221 2.9239182423171672 -0.81121141646566741 -1.4844146328003003;-0.33139498650803279 -0.53137992638571363 -1.9176316497590788 -0.74276993078067144 0.26325138097461676 -0.43628463717217764 0.3721040887937615 -0.31238468473910186 1.1155954527684691 0.62539381041721387 -0.50514125583936698 -0.42544137755734779 -0.29521114751730182 -1.2222558652809532;0.32625335438973324 2.8468209455564488 0.36603396279428879 -0.38905240734594915 -0.78305146575523088 -1.1916286179086533 0.326842938136999 -0.12897854351815485 -1.3073178655801816 0.055851448897815952 0.34525616827825673 -0.20878351425974329 -0.55232512571570436 -1.3372967718671267;-0.60145115390429882 -0.061426827014713442 1.0664237673397694 1.0441848360678192 -0.97525888529451887 -0.98871144146808621 -0.15908516546845031 1.142497491384032 4.8164788041977395 -0.34609340379118975 1.2520322830423045 2.5079039704226851 1.9654080900992428 1.2328224678180564;0.21743263014923717 0.14239243699989007 -0.29947850628209949 -2.2214204812593059 -1.3350710107839963 -0.85484362801628178 1.006509012857792 -0.49603909607889085 1.0732771299742201 0.66669766141319131 1.1452615309563057 1.5576865758028169 -0.6766820485241255 -0.84558316857869409;-1.1897063103944872 0.80421003294168714 2.8692713729753128 1.8652507711460429 1.3413784336448267 0.73520049256584774 0.20770778303734952 1.0292827290781461 -0.35684057638912176 -0.19997778408082531 0.53374707077886774 2.2465980463334376 -0.012166571840970334 -0.40921070663101344;-1.9751073107776338 0.7039216764747237 1.0531110801768842 -0.88515906275940204 0.42032108513001903 0.16220019391831306 0.18870741961019136 -0.076212757040824933 0.5294230318671781 -0.68300381935958165 1.3153971236670139 2.7112428637667008 0.48425539791848987 -1.2728856430952631;1.1412146910034495 0.31509530595845314 0.1576881400690536 -0.6949606118995042 0.078349219939142664 -0.083239622937385252 0.14367340852429925 -0.14360495491736716 -1.2286537648830766 0.28393081788719232 -0.7757076633066422 -0.31838544804652713 -0.036729201249749696 -0.70040265883719544];

% Layer 3
b3 = 1.1206571303458486;
LW3_2 = [-2.7371886783007375 -1.7357690550046927 -1.2472762875291252 1.9435995613505705 -1.3044788229577127 -1.393561232974625 -0.14693498782255104 1.2699447351669708 -0.35579418274956581 0.16783657445889874 1.3308718057036846 0.62966260259490103 -0.33569983453693136 -0.98579396478756609];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
