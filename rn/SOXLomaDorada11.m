function [Y,Xf,Af] = SOXLomaDorada11(X,~,~)
%SOXLOMADORADA11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:32.
% 
% [Y] = SOXLomaDorada11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.5871538785745232;-9.6352729256357819;2.8141064536454126;0.27566658727558918;-0.70182120187440822;0.28091054157030731;0.75537614217142801;-0.35947449495641082;2.9898153322601266;0.099087040149890324;-2.1500339093342822;-1.9789652285732637;1.061390637722615;-1.9409863074480858;3.3702816129353144];
IW1_1 = [3.5371399214546897 2.3104340700543582 4.0499325530646271 -1.0189376765508227 2.801544484823876 -0.50516304903104814 -0.47232087097832803 1.2153085382097351 1.3505576880537278 0.17354113235820179 -0.40585466397914111;-0.36859616977156301 0.075501528619615385 -2.070884677374472 -1.3212264189284106 -1.7170557994708004 0.23303267267006544 2.3037411453506067 3.6845487425463723 -0.31318742653945475 -8.5737102653519681 2.3789470461301816;-2.9045872876471441 2.0730119477506515 2.1533494483529689 0.62859758888751116 0.13831022884632441 3.3568263700853058 -3.3078525353152379 0.22528273068108909 0.71361132924329662 -3.0947563411581318 1.0171764465888598;-0.36454012944341763 -0.019170489237738075 0.65462433646078599 0.71099333501901552 -0.47629902048537626 1.9331939792480164 0.92001289077955817 -0.74870493738085753 0.31744452688200953 -3.672447616456886 0.56771556265639722;-7.6541842911367004 0.30191396526723729 -0.75865091783013405 -0.61268016115708746 -0.93574375835738222 -0.042716319360259429 4.0364442926195219 1.8132251107336104 -0.29783544179163057 -4.1201066778927675 3.0990252080480984;-6.6054049294368458 2.4252871642282003 0.59960103453991398 -0.75871218360147663 -0.61469928238278204 -0.26409959471300937 -1.3847600950654284 0.27616046608570016 0.86707800189334094 -0.33481524926222966 -2.9108831196857041;-11.681182203855469 0.81650254809369227 -4.1578891691566024 -2.1900687848352702 -0.7235736008022049 -1.6407027255469511 -1.3119566583077102 0.17343823008261064 -0.60697940253682847 7.0218020964979351 -1.1476082537106918;-9.5910320157915194 0.65582053253539352 -3.5971216191116642 -1.8601373341394205 -0.57572486166885706 -1.3002075666473805 -1.4376430318641413 0.14054918422743823 -0.51024753819433744 6.0765414625450962 -0.96312131443943083;-5.8651035375491922 0.37433956080083552 -0.16173791432239704 0.46508128893705913 -0.96911589431639733 1.7401828972793258 1.2885865713778026 0.83485353778855076 -0.13497591377506427 -2.2998744679258962 -0.036284553385236382;-0.94713816373563131 -0.14166358328390705 0.31714921499465804 0.3041297835386888 0.22484237121934261 0.41064517884587881 -2.7542419844421255 1.3216344268085172 -0.29763877056367116 -0.081270040493192017 -0.98340402363074397;-1.8229230919649628 -0.0869650023370028 -0.050482205593922726 -0.25847201826583488 0.40971572925761479 -1.1193401946749819 -1.3069261212566097 -0.81194942219720945 -0.026874646237851098 0.24608117068186958 0.3898865844463022;2.6022113003253899 -1.9002918929663706 1.7028572005477716 -2.7255512436706941 0.57701815658893807 -2.8236360389308968 -0.9816586904282294 1.0017670743478257 0.17189426252546369 -4.5762962419460429 2.1379519577351638;5.9660912372304722 3.0982831782696878 -0.35693228832136936 0.11592315919308815 1.0625320778492529 -0.42209131297533381 -0.29430557632907417 1.6099696132884673 -1.5687686359271331 2.8917912197382001 3.0834261180288784;2.1834739616360777 -2.7606705031351337 1.3512475191207671 -1.3891435043662799 2.2623693249439092 -3.8928773471803977 -2.3851839931991967 0.10774301560331735 -0.48257358775493109 -4.1913824619620819 1.8488268525901175;1.770078444465105 0.03414443992285681 -1.6445022006338943 -1.9114411599394878 0.5577061647255982 -1.2781584814329841 1.1184277954029569 1.7958863450118501 0.902291623224455 0.24137765854714818 -0.1479327503054752];

% Layer 2
b2 = [2.7595059926989447;1.9977188419468832;-0.74689421887415552;-0.90415703230254529;0.35394871612100365;-2.3168561938009056;-0.1942690228563852;-1.7491938690387154;0.85654042202188041;-0.39602044059326552;-2.4490343892169899;2.1905767791821984;1.2568309699324283;2.5047400166475331;-0.024028278034676796];
LW2_1 = [-1.3358715873071763 -0.68722966556127685 0.8969461885532829 -2.6329512349293753 -2.3362328537636894 0.5641940146691542 0.40244841411814386 0.29758937805819186 1.3545908999310698 0.14231998038422011 -5.1378797461548542 4.3925965121752117 -0.21995002463886115 -2.3528573213553434 1.592650180262895;0.029378161476703111 -0.48364005286843376 -0.22852120972660978 -0.0025627195736497533 0.19435269453830656 0.18286333413125969 -4.4441011881108308 1.8638698523701573 -0.52221394868957105 0.12514956492949852 0.068440831837587715 -0.098726493140794527 0.27373687489408188 0.090072124798933673 1.3755669792347673;0.70735294803862914 0.5551327159606132 -0.57474395878439721 0.19011223596269441 0.73326990736068254 0.15286699999214176 -0.39174504580114233 -0.98447199549998543 0.64291132843649201 0.90778435639662858 -1.3117406050938079 0.31804933490921844 -0.80382033468364378 -0.21106129593464876 0.049796308861408629;0.60009539866990569 2.8155106813341066 0.36489284587112397 -0.54134809038614051 -2.2621043204873272 -1.4192492835188608 3.7374471027609983 -6.0937351741535286 -0.96943472425352972 -1.1713646484828373 -0.68808473919131774 0.9938996644796203 -1.4410538792251042 -0.93578625249692049 -2.4279179304410738;-0.92233417812164287 -0.16727230862658091 -0.41562986612862407 0.046134182016244453 0.13794024888859316 0.5444124237628285 -0.67063539865794519 -0.62326389745442201 -0.15471930292564712 -0.040194745216595329 -0.42563678072693878 0.064132351390522355 0.51381227828034481 -0.047034141051566433 0.23785919713324657;0.94419315528993908 -0.90518281577774373 -0.00034099779106856742 0.0074273218667744185 0.86505484089687068 0.77244893886625643 2.577992605156012 -0.46192753987453161 0.29117111078112684 -1.366524718582524 -0.15761578958371372 -0.1156490960404344 -0.68243901162308285 0.144662053943624 1.0522814168276815;0.68380170973346666 0.15576015690909747 0.14999738531490467 0.083639667864899195 -1.2323344453481166 0.1339022883450581 -0.63308899761129978 0.42295823826644452 0.72667477789642454 -1.8702287159565087 -0.12510049592505409 0.28888602872714786 -0.66472594350345737 -0.19409526745064209 1.3925788419612672;-0.63218837049784582 -2.2208705959161805 -1.353272418260919 2.3433909633691385 -0.61324936501272398 1.6242269982971678 -1.4720927105067731 -0.79889816590519314 -2.203663011179847 1.0882512036858025 0.54346084621711477 -1.199170073443024 1.4252566104965079 1.1923297649916271 0.00071316898375194072;-0.7267109959922512 0.20864461338350176 -0.035208667247339703 0.015907616336741245 0.42089660309977123 1.3383343778189993 0.49720671917271553 -0.19468375062942569 1.4888454900470796 0.43227828437066351 -0.52351349089663657 -0.65195207374601705 0.8117246485027082 0.44025785440167042 1.2628666825558157;2.5573656529759656 -0.023076254656660574 -0.62864005706617965 -0.57491886643832413 -0.4541225648153222 -0.57112181919858174 2.2056757203512523 0.7736062421959724 3.5199388970130658 -0.44374073842934569 -0.2141027652411884 0.11574152686835863 0.59389112409647582 -0.024142460065601397 -1.6553172245863157;0.099717480799838359 -0.69916314922182987 0.099324224256556362 -0.0095143878872284912 0.70782720522993647 -0.14998251133204094 1.891901146156399 0.52075252446899345 -0.33321738885201158 -0.46582523472394666 -0.24052348731241296 -0.053442904431817317 -0.63739513550247429 0.089852343708884327 -0.6172889404453028;-1.1453190796014401 0.068992199989760736 -0.094672009774644988 0.3955754795791977 1.0069860001332891 2.1590630916996822 -1.8520747728965474 2.8548654786302516 -1.178720726971815 2.0186515788975941 0.54060419911762925 -1.6106238675363582 1.6641606259241772 1.4270297043175375 1.6614580103516774;-0.61221554762796604 -2.0303937698348697 -0.29388420682848271 0.32482593776809687 1.0323202697177636 1.3588458581851208 -1.6148121602897187 2.8151565037123976 1.165097228112467 0.79963357655279466 -0.98815245552934794 -0.81593541562577321 1.115297840199889 0.70010175899465033 -0.72968957950108615;0.28847428330919855 0.31463040026945704 0.075384851583378432 0.018816404135228192 -0.35698785198168892 -0.37405660863606155 -3.8114915594241636 1.3573163500146255 -0.62742687589062429 0.82155292291589899 0.37962335250293622 -0.050242872836642867 0.31896634352084657 0.0093606057851497552 0.94515368773268194;0.09833124187868085 1.1392174300643767 1.5463781784776505 -2.2201674186529994 0.57803263064049815 -1.7665095317379509 1.3996597464456639 0.88680160607668668 1.9588886419072764 -0.25307779566928834 -0.4499018911367641 1.2176639638098596 -1.3720420673947211 -1.1534833550305701 -0.45686308940554771];

% Layer 3
b3 = 2.0353756125011473;
LW3_2 = [-2.2387815882091044 -3.0033153022303121 -0.24515407681153634 1.2919587832877646 2.2573201274320165 1.8144238262115342 0.2739476544769926 1.3159556266970438 -0.87600627930687103 0.37004302094705538 2.5880283325267919 0.36929320724978371 2.1215228607038608 4.4924039033258669 1.3373738293415132];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
