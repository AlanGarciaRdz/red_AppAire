function [Y,Xf,Af] = NOXLasPintas6(X,~,~)
%NOXLASPINTAS6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:47.
% 
% [Y] = NOXLasPintas6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.96825396825397;18.6915887850467;0.0175284837861525;0.0546448087431694;0.00640204865556978;0.138888888888889];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.083905943282964135;2.1271194615997358;2.4484248877179438;1.2880498770733861;1.0978912057163632;-3.0214657076840932;0.36406643364299085;0.55805258739415753;-0.168449167594593;0.51863843315943903;-4.2146132331359345;0.71572253082934023;-0.5026353612747968;-1.0307079787328084;2.8259489362458416];
IW1_1 = [-0.67553114039940465 -0.54221519373484661 0.52794586090829365 0.50052549979016525 0.091847996313051031 0.82071997408705921 0.1241615278957464 -0.61774095454514799;-1.0884372781916625 0.2584847879745989 0.41230754544241133 0.1231403824831418 0.32617904889448313 1.1535259749143636 -0.085514576904871437 -1.1230843960346757;-0.83874869837068833 3.6354488125394466 1.6003499341158072 -3.5180121298141271 0.31415092893612734 0.82787931885579891 1.9704876781967173 -0.079859383857969923;-1.6151520319741126 0.18737805882344238 -0.51183090205838699 -0.73301663949477647 0.22108133538478172 -1.086458864594247 -0.12199452654760701 0.96909324919009066;0.092166706101893883 0.18416575503549329 1.0092183762572149 1.062766046926312 0.13144190737364569 0.5228253700910509 0.52939579590509911 1.2489244510091706;2.3253061028504174 -1.2002487886041857 -2.6163815831763713 -1.9217561330701649 0.21795419310208808 1.2973265608016231 0.8700809540726292 0.3052914977902213;-0.36176886361446386 -1.5076079183820215 -0.29788726397116888 -0.36942338975870231 -0.47191723593883933 -0.9804427016574303 -0.10864082672930923 0.25191482453838571;-0.22385291545439359 0.64084036939877975 0.86875510945577528 0.16447683620448406 0.16527643232729175 0.49570705535275528 -0.011538466000724612 -0.40538770574594707;-0.30498749099875139 -1.1410062231269249 1.4612062072006877 0.44613994052579503 0.29817256723397423 1.4630367509676394 0.2466869037131956 -0.77459677629986312;0.58615390453767535 0.48278918237676149 -0.77445208977604341 -0.88050005971673673 1.2031475881674638 -0.47675895726155665 -0.63210959058629435 1.1353848740106194;-0.24867803919303905 -5.7194048702869864 0.16210432183681669 -0.43256714863454993 -0.063709654227658605 0.042611644851459012 -0.2326991431335319 0.0046709973539690898;0.23857756252482781 0.75616573664337239 -0.11967395095688062 0.097712137122982629 -0.58157733153616453 -1.494074304180403 0.11697962689980063 0.64380557561652529;-0.017700526091557853 4.5601216180055095 -0.7437115803128318 0.47346487699449991 -0.94068863799858615 -0.69693935736328161 0.14035223213165368 1.0276686011247178;-1.2745221121639843 1.8342687320334976 -0.53984919055223834 0.82206025043376685 -1.1227236663494398 -1.8218955774433225 1.4212066537025163 0.47728960164563983;0.16428072069576422 -0.38347239781953824 1.2837081680143989 -0.0022471492550438857 1.4262283507678608 -0.7484382342979774 0.56429891461036319 -1.2358006958861574];

% Layer 2
b2 = [2.7143760194518785;-0.89527107343601431;-1.8467418209443731;-0.87903705674747845;-3.4222488562073226;-0.20512609446474109;-0.78020564776404022;0.11347304120080587;1.4543100356035428;-0.046868157420448975;-2.0618509644617187;-0.78915466763314424;1.23641274497105;2.3971359235307621;1.8340775223871291];
LW2_1 = [-0.98435881876741638 0.97380672046966799 -0.22898647899352215 0.54116730516727618 0.63647642882840583 0.058296905285493882 -0.070458699181477596 -0.47531689591764348 1.622257569858359 0.063439207875644776 -1.3999866352434691 0.37528831776131788 -0.19905698202001595 2.1049685268307079 0.52370814691848488;0.0061122482169690268 0.11213703140468198 0.64750310580141468 -0.93907143839540608 0.41957147154729724 0.19375347359300157 -0.31932214283365135 0.23863726551591707 -0.79808294090454535 -0.89482197940025465 1.7477595738461951 -0.50223003546567169 0.53474739731659349 -0.46215035246871305 0.63307539594224427;0.87769941696600018 -0.9736465692442654 0.39327910426050222 1.0628321299906769 1.0806058087120096 -0.7042561642268067 -0.56355297886544375 -2.1243273812829639 -1.4486950899811162 -0.51149217884295217 0.6725431323740152 -0.49514511257825156 0.26134651083339555 0.45227018690311704 -0.053701760565714074;-2.9844660632105948 -1.0997738886453698 -0.5080136696641061 1.3683745177071966 -1.0483427294418071 -2.0680059405695057 1.3847565624350251 0.076376485697108171 1.1227197128629172 0.52662054027755534 -0.45827020633442717 -1.5536695198133306 2.0712338441630025 -2.3069565878526759 0.24595323472276495;1.3936000982563193 -2.7810459975318325 0.38942086846692708 -1.4236913309755788 -0.49654095410000409 0.42463460448014262 2.1358556312556267 1.1344813291794436 -2.1478495180370443 -0.46303338066676203 0.87226457019180104 -0.017285304699900316 0.98176622750130593 -2.8686561032200006 0.58299654641157295;0.23929167574729457 1.2086552575107761 -0.019038100736948983 -0.67669272684128268 0.44941919771994893 -0.058738422408576685 0.57563133028393831 -0.72332591981826333 0.58525243138217087 0.45213983631330412 -0.98350995610160374 -0.091039324965121904 -0.21782903726493391 -0.099375971024075721 0.037687360032517853;0.71004780724128802 -0.6337377327269802 0.69963220592449515 -1.7638299137261662 1.4691884280164471 0.68331694813761146 -0.72078455969826405 1.2565493082003827 -0.41099298428039877 -0.49828380395985855 0.17660982664744496 -1.8746578034465984 -0.76204676555625117 0.21677186647097074 -0.2527578940831014;-1.5482684871219929 0.20827469009616487 -1.1652606437910944 1.5144176294356182 -0.99031452866376857 -0.56591468693294722 -0.77680799567072112 -0.75089567003083124 2.0830264633794355 0.469125726276866 -2.3204399919604946 0.27049262931334028 -0.72917716777523267 -0.21134819430384999 0.060641546069027809;-0.73234219631022079 -1.2267621214137068 -0.40610338331808821 0.13959693635428644 0.54310758942817039 -0.21396709608335698 0.80949896854944181 0.24391521093501067 -0.088885307558384405 -0.21093841348472339 -0.49186139067528017 -0.57288656433469143 -0.089503444898656068 -0.26819546317295612 -0.19388432380309317;2.626574067137653 0.06222679550405559 0.75720196686024177 -0.59502644079231681 -0.28313809390624561 0.59884622315526115 -0.13169621856907454 0.41868672173746874 -0.5849842225586972 0.5297881687241317 0.011449983703550633 1.0917207031303542 0.011528347558950793 -0.043287821393089725 0.098225803960321184;-1.3165038305706396 -0.43601546286941145 -0.17941992005679788 0.76445638101203461 0.71959562019859824 -1.8464306005217697 1.2367939876128042 -0.11570629415222534 -1.5509470426593694 -1.3574019470693921 1.3742313002424171 -1.9390739859860924 0.0057930638579926641 0.10231741144525423 -0.7867633017050123;0.14055864289540204 -0.22524909805213925 0.0056476901388954701 -1.5613507324224798 0.80678352036572054 0.17755676551713878 -0.37121563921350409 1.0217320471094 0.21968398351787985 -0.14817122128930427 -0.14111216056025186 1.5731172935352171 -0.31408534533305055 0.76196594064546663 -0.67335746079802783;0.89026845829957624 -0.33879109629513754 0.11839623571346553 0.38795019803440534 0.45063973052971429 -0.060178771194946024 -0.48163917578966681 -1.8311553612396092 1.2974024517630367 1.2523336573864543 -2.0283550929675465 0.60152124482827718 -0.68280414954704671 0.52592544406057495 0.16240840150497299;4.5788298037728454 -0.50883610043570437 -0.51874037840428833 2.8343235342133246 -0.10142233909475125 0.00062776565562436271 -0.1755022586101449 1.1407380058418395 0.18687380995815114 0.87526220809681421 -1.4575585839555947 -0.84579868725683816 0.75362612224139425 -1.2370921239598012 0.97212593156677507;0.49237350434790927 0.38122993472738914 -0.11164691729359026 -0.6980998847382095 -0.32538831687200048 0.077911159999324187 -0.15338659254680131 -1.0320757925315438 0.013072792783042853 0.1782007408658593 0.12154919981319508 0.77966223279286462 0.028869614202498346 0.1211894705395957 0.66212655390590869];

% Layer 3
b3 = -1.0912751770173192;
LW3_2 = [1.4230724981191112 -2.5111330747613314 -1.758890569050884 0.11646741932425028 3.9757733807630316 0.8244210911796801 -2.0298669281704957 -1.7956538627803833 -0.95766468011045847 -0.19768984851923804 0.60372644927823294 1.4280385446771309 -0.9465087188384318 1.7865956386040116 -0.76402385656640892];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
