function [Y,Xf,Af] = NOXAtemajac24(X,~,~)
%NOXATEMAJAC24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:17.
% 
% [Y] = NOXAtemajac24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.04040404040404;16.1290322580645;0.0210748155953635;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.0203831551917375;-0.6634504396585037;-1.647098360243807;0.92512872748114827;1.8878193871303552;-0.74177047366135185;-0.15409856982325745;-0.13666666446452747;-0.53533969915382551;-0.025733958904568886;1.5968273893905898;1.4153283969497876;1.6205145594666113;-1.4228716308317768;-2.1323801549561843];
IW1_1 = [2.0092482496635391 -0.018317340593581734 -0.064719862297178937 -0.70265760876569527 -0.18533282441965682 -1.0827939176017203 0.14302692077499057 0.70055059670125419;0.55227802642239787 -0.34466683951763677 -0.77176977881493414 -0.7774850017770758 0.8736912837243761 1.2342203893539359 0.18301182626399728 0.36388234934769803;0.30297510361934438 -1.4706313863539628 0.65830369306297998 -0.85710345696885692 -0.12771227802337501 -0.97212089995187867 0.059577219361986525 -0.46270079612345966;0.11708081812022103 0.82638041055464584 -0.051223365131981648 -0.23898232111688072 1.1903437173337765 1.9745237664230488 0.060533249662421046 0.45074730522393852;-2.2107081764474117 -0.5109842274737405 -1.1169520813046712 0.62669822957155219 -0.091576818023687806 0.78863201422849705 0.34159753199407789 0.019878642708062381;0.43427771043752894 -0.41777511728128575 -0.5412247643860667 0.19341139450166334 -0.84068364200136958 -1.2176845226031634 -0.025135276135660231 -0.011681498468517647;0.55009350677947366 0.77190860444032738 0.48090944819288783 -0.61337638916114867 0.20620147377642553 0.35431628574399882 0.22985743073586279 -0.54332473790151303;-0.21488784265230204 0.55897489113462606 -0.81541618265004234 1.0170216975564608 0.86100982260028791 1.7838448013972414 -0.43624498982938409 -1.5154356745502739;-1.3041471355389911 1.0524422615938644 0.84552848021039151 0.26332369013722401 0.27619749042424513 -1.0993581053265116 -0.11825827744333109 -0.34717516032020546;1.157952896969431 1.0394336554730461 0.085982539662485091 0.85046875383023324 -0.6334633717554099 -0.53193754730111165 -0.061196640963073694 -0.51668145429402645;1.2505587222316896 -0.15141120420672211 -0.45128865331947632 -0.30689500475653364 0.30863706018458209 1.9816683205331405 0.72285301756696319 0.29228681198811313;-0.81163369901693749 -0.8922108409883317 -0.95069286456331625 -0.42644881964845066 0.81649135570048381 1.2098405946361064 0.39240111541107919 0.60188341447972127;1.1962977988844858 -1.3634187766965877 -0.71782976637397189 -0.84573889720619522 -0.83147181683810423 0.44690466173627497 0.64123239868165938 0.024900806471105406;-0.60956913150666769 0.37020419606727029 -1.1379738731823139 0.56895727595829937 -1.0378633057949009 -1.1778754283714641 -0.080051811073732562 -0.53175078967566136;-1.7637801961560184 0.8872799214289192 0.7098094365921882 -0.24110757621125314 -0.71527638367452639 -1.1710325721987223 0.10155233848922313 0.78943275123636503];

% Layer 2
b2 = [1.7184824829590757;-1.5821704329483941;-1.3181027826319167;0.49845559177680365;-0.72722744385175098;-0.19288899122255387;-0.10599846605305698;0.21649459081156291;-0.26477490155278949;-0.2656133068210414;-0.19010491252273679;-1.0725081120422399;1.3634099644708166;-1.2927275574874062;-1.7121382728557093];
LW2_1 = [-0.84265062091076781 -0.42712356374437127 -0.4279194567595524 -0.67901580870294809 -0.61314217653652725 -0.10440152297195961 0.18783097410327601 -0.33672771253846334 -0.32394378226661891 0.32271114432713482 -0.054758036608937077 0.048889888737053945 -0.72854386317773523 -0.67087742282957008 0.53239874696799505;0.96868386764903347 -0.27584983892272968 0.011444771479392395 -0.28187639792799835 -0.41962013183333496 0.45760337542085849 0.36904642837884449 -0.45522583129276695 -0.63572103358425647 -0.093465575042526894 1.4308030814880623 -0.3808271111154703 -0.095917190911629133 -0.92543676503213113 -0.34876166360081806;0.51731912958387671 -1.5316790089252015 -0.50798628386478284 1.1597811809585381 0.26012695695628524 1.1456482928774425 0.59770553519958891 -0.67906093636356257 -0.89166896555665887 -1.1143821797779854 0.22826456045752144 -0.74557809211546644 -0.84080278765263194 -0.47323398408846529 0.69897934180059296;-0.96611826320547678 -0.78638529511640909 0.457596021871301 0.6935346677301012 -0.31205385286104442 0.56470905266071791 0.4485042653504735 -0.27709498567104768 1.1106491309946178 0.57658791904479834 0.12815380977147084 -0.80157229791120643 -0.77354979927700984 0.22004150178298035 0.68779775833012802;-1.0536662234512864 -0.9018057816500733 -1.2151470957662389 -0.17294662159824378 -1.0013833601771622 -0.26312631372961487 0.19061305407770043 -0.12171155849976914 -0.22382200726163093 -0.20247722120577938 0.18723617714168569 0.67395764867088481 -0.21501349982804635 -0.91884964397539703 0.75657157682241205;0.42898419080182304 -0.49798066723094497 0.70610914179606965 -0.47602633177616488 -0.097531835254398555 -1.0553736306681569 -0.66972450143310025 -0.40780011966590463 -0.54609988576900825 0.37119072498616024 -0.92502805989794645 0.51649782599202942 -0.15861059481723846 0.54631050127805458 -0.17052648604912779;-0.88575090143005375 0.52810208020838934 -0.16700019191510054 0.036103470019618611 0.84683979017999789 0.54058036784984209 0.20742411817640866 0.45250956707005086 0.39961690787944321 0.14117349277196889 -0.45251994909535459 -0.25063930572697213 -0.76676813358356632 1.1528782120986394 0.33247694193555216;-0.49726684093600204 -0.64180804181839324 -0.75823551812115186 0.30732161253068319 0.34231109397545456 -0.023592937325413958 0.76529274135337 0.50456092702275535 0.68849754707299771 -1.2913799299464859 -0.31754725263555922 0.33914278278773508 0.59542849375802653 0.51129913532109028 0.32177719774183727;-0.56169261542446536 -0.023711414965665787 -0.50493440785437915 0.12976782997889863 0.044714305799957312 -0.21202168863085152 -0.049488638249174259 0.0086844163382572802 0.26859325277178092 -0.8393183628535924 -0.56549570245400149 -0.67056367283791052 -0.29619871053511965 0.096136247083671189 -0.23176803101920865;0.11876390934062472 0.91588051180791452 -0.56476844647846047 0.43523271294769306 -0.68354597121731353 0.19992119701607786 -0.060982855852294092 -0.15166794017847932 0.52006546270314291 0.24416125542658101 0.45912138702960958 1.4293130329435306 -0.71971590608956393 0.32327306977974857 0.7778210314678401;-0.59061418264947696 -0.63195067814358696 -0.14494078676453892 0.33528690318499965 -1.1326403530063862 0.5887789058126992 -0.0621089805481531 0.2057519971590844 0.045837401789516827 -0.080951529726460247 -0.10580471727676509 -0.54158100263785225 0.44112609342251918 0.45261379377987443 -0.44397230415333483;0.32507603637740717 -0.90132684203062385 -0.20143225128850056 -0.4578995296452823 0.016722478811102344 -1.1330023064531569 -0.79401793042565671 -0.75799335243893295 0.22029792896790037 0.70890852848150243 0.07125770426420934 -0.63750516114025335 0.58282008118595763 -0.23143173914439594 0.47843393559039366;0.021461404190078005 0.5136584699672776 -0.14633415019428614 -0.082385597777077282 -0.04247276322263091 0.41135293977638498 -0.76994858486722306 0.061130414510690151 -0.99254564398719358 -0.78228309556380404 -0.8608146646752014 0.23097260731339425 0.46239602142761876 -0.19113484604020139 -1.0134885273792145;-0.97721363335747835 -0.90880319167332169 0.086292647488061841 0.48276186192698428 0.68853381071811115 -0.3365099932102576 -0.49187024462865003 0.34227182828345193 -0.39668061291413115 0.15884719783209783 0.14706432258047922 1.2922738968199383 -0.20338628219837809 0.25225357249280844 0.69343991300232788;-0.19469715587525668 0.4425694224546044 -0.62588693549663477 0.10009183337413605 0.71918402154280014 -0.39421537158183784 0.61111842231131508 0.78002148495028367 -0.42865959888156313 0.0566529492127818 -0.50122738812728074 0.41734183946336356 -0.53761105326627345 0.49171692789688026 0.36850573119871577];

% Layer 3
b3 = -0.18730433851193179;
LW3_2 = [-1.0113672940757505 -1.9526403521660252 1.8454055050273939 0.77062034518970446 1.3286218064265165 0.64120138154981832 0.87149592364640094 -0.96110519329727484 -0.70823326808536968 -0.99056229034238008 -1.1280507343505823 -1.514477617011956 0.72785198353805403 -1.5954817499759828 -0.45761114604275588];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
