function [Y,Xf,Af] = O3tlaquepaque1(X,~,~)
%O3TLAQUEPAQUE1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:51.
% 
% [Y] = O3tlaquepaque1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.171659085057077;3.03490136570561;14.7058823529412;15.3846153846154;10.752688172043;10.4712041884817;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;14.7058823529412];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.0384383131199977;1.695313894741096;1.4343720421573607;0.22835489362847441;0.58465616210440763;-0.70441799333073929;-0.018300044926610345;0.31204905926965348;-0.85007443697969975;-1.4247668279815557;1.2643899261395717;-0.81768158417873449;-0.15641537367154734;1.875732622849615;1.7228494369176812];
  IW1_1 = [-3.00623839084898 0.076813619390279531 -0.90653725023207388 0.29026204299801528 -0.091225366566661761 0.15710918910259986 -0.089671002188909152 -0.6380705535497383 0.33147910072675618 -0.14382787417870585 0.24879089571569679 -0.10462681146164172 -1.0482808063626918;-0.86688288949511572 -0.92683712652561523 0.42650576601625573 0.086941069212712926 0.47788196875641153 -0.30111320265860442 0.0087367345370163493 -0.59573023466656216 0.59486073940462214 0.22772980787733091 0.14655552877763733 -0.45025641432546398 -0.428633549208014;-0.99326265484038279 -0.081083506741254738 -0.71234379371841294 -0.86281560593982776 0.44196685639250921 0.2847094657467103 -0.24733597953734715 0.23603590183990159 0.43658277488184744 0.23950496005369443 0.54437662270491693 -0.17028691495365039 0.85442034822904467;1.3205966892754071 -0.10534909942765179 0.93195033141279349 0.43572865657270593 0.59244728251167578 -0.14446085594253105 0.59097342325039248 0.35321602110483047 -0.30847385235740699 0.40915783003808515 -0.072489444552638518 -0.050275494864305964 0.96074748265643917;0.21859358696916262 1.0368646903561289 -1.1486144348350977 -0.030028731798616606 -0.45435786719700955 -0.79594764128999684 0.23381285977633304 -0.1952650180824031 0.90929007496073366 0.12271162808532607 -0.51258166913718251 0.052553928744676522 -0.20551144298423388;0.00054102880010051257 -0.054966914154598527 -0.010160648639303979 -0.57302981491090232 0.12809986495564799 0.67927474878247163 -0.23509136892923507 0.49162549074684103 -0.65798963367675889 1.2852461330099427 1.2511168407591542 0.0051845134861401299 -0.69524437712336795;-0.67479050409799013 0.079872922198693283 -0.35290315006434569 -0.34489472138764871 -0.40454459362094963 -0.11618715824392045 1.5264178267988386 0.082016652956473327 -0.10055976258997149 -0.24015990661166681 -0.84888114213339672 0.083985341616883216 0.11846425905692373;-1.1356778963078216 1.7575505897816681 -0.0095661544907256896 0.35053129799501032 -0.87959046179017975 0.18349402114967744 -0.66327986711186393 -0.68696609699296207 1.1306203365898613 -0.59676422833305764 0.34453036299525241 -0.68260077534372499 0.56336161150710162;-1.018747531321416 -0.05427433217390356 -0.71131121970330435 -1.0712654701117483 0.2514010266914678 -0.25411475138616563 -0.2306107108815684 0.63640453859637724 0.27977310862496324 0.0020647562840739354 0.30769633847383521 -0.11045271204872904 -0.25421964572421013;-0.62765702228122688 -0.017142164943465273 0.61000061549953977 1.2283123076242601 0.13239782007989334 -0.073629498267581389 -0.050455828785057416 -0.16457496732508875 -0.038805971109085374 -0.51410920672060001 0.10105105747795985 0.061648860014840351 -1.5953431209573288;-0.27910661248710145 -0.0073610377910565397 0.54443405051164739 0.81950863954935338 0.067510978211501441 -0.0046597440865869628 -0.024318339282791746 -0.012900472393207373 -0.079053555151521293 -0.37400886903003705 0.062272287199770987 0.026184004348059092 1.063425013123702;-1.3009521916485611 0.50693505614639689 -0.59561747480060034 0.16628194983482383 0.48571243300577743 -0.1469551384909096 0.53283397035988578 -0.67351588329033429 -0.38793200765259417 -1.2850170162337682 0.77314889047108859 0.093677580155801687 1.9588780557603576;4.2393925159853625 0.07360256823711446 -1.1629363757093214 -1.3104612552378252 -0.73483988276243706 -0.20490655930476526 1.4272585376175986 -0.020059068724491161 -0.41121243178071409 0.34762028662084371 -0.22869094459923509 0.01000888635278574 -1.1680677229457994;0.45218378697342837 0.42170083885703619 1.0640530724993689 -0.48688576790277444 -0.47331636204159977 -0.62515085344956356 -0.0026011295947211237 0.21482087870791769 0.9338064719252418 -0.30432303976669511 -0.35891232528079597 0.16415632781533795 -0.70161629382721136;0.32927967779279815 0.095553296239243662 -0.34677392236661686 -0.54492038898791195 -0.51846695531354015 -0.67782468711952593 -0.11546984374138744 -0.097003148240972406 -0.055264138661849822 0.0060338572612203302 -0.045078345233482447 1.268612091912295 -0.68680855702641352];
  
  % Layer 2
  b2 = [-1.6189557986747987;-1.8756911650768293;1.2225316879210184;1.0030929349729352;-1.4440268270021499;-0.50900470182624713;0.29108916196011042;0.053427074906306271;-0.42568937757708047;-0.9468809746813529;0.84142659358780092;-0.9121628208051098;0.88262995173928815;-1.6828832312454445;1.7061151218479451];
  LW2_1 = [-0.12911048578975062 0.088122501113332891 -0.50577207603914487 1.1319429016503288 0.16847061500648741 -0.13932555607727246 -0.62972451784315364 0.090357388217568557 -0.5199465497871274 -0.35410058430482638 -0.05090089987567821 -0.28367670590450617 1.4956414444703463 0.49042061851702468 0.085651710807119072;-0.036182168677667312 0.35848219062669162 1.2762731849924676 -0.52678681641952951 -0.78297409487143732 -0.61280396280735239 -0.1954581552021073 0.45574792216196897 -0.75455098058614645 -0.93596642373722871 0.16054451060337346 0.098697814048895438 -0.35092435090517465 -0.47753639524666658 -0.96608051069410239;0.42413937408071745 -0.85147953287885725 0.42465830513164171 0.57436521264662521 -0.8628020482731491 -0.14796090819895352 0.15567722406885559 -0.30821495359064155 0.90846478567696431 -0.60608833564060449 0.23619240307542821 0.43647589306473999 -0.91457130516400498 0.050823406247300522 0.46362500168914095;-0.54513268176035057 0.61691481663721037 -0.23707926450876005 0.40830190075842721 1.1474670977721158 0.058638224089721011 0.51612207042751401 -0.29790604928900571 0.23723969288213326 -0.52225644683188299 -0.14289006511649407 -0.75480177741492738 -0.30594185283011605 0.33056878161043657 -0.17444972557383737;-0.087801068469361976 0.10915106549704109 -0.32689943697422019 0.065755233876854668 0.18117717317009518 -0.10254342596009539 -0.57428790011000519 0.28837747554088894 -0.37678336295947334 -0.96881828596275199 1.2636247751850531 -0.58606582508706451 1.8358889996629717 -0.55266370356268513 -0.37656729115752918;0.52234411681975346 -0.53643052955910275 0.6362966817407788 0.30501182911375813 -1.1115063472485793 -0.87353317157986698 0.16128437509636226 -0.20857347804539569 -1.1932956845052785 -0.46282042525879435 0.052568499730219001 0.0083398214938582432 0.40344450547819338 0.4936060363773912 0.39777840873987441;-0.6703101040263405 -0.11657985172305721 -0.1266587952923918 0.63730545328311583 -0.090962242763325346 -0.16561800296111467 0.55693224189097945 0.28875053936480899 0.56609563432064991 0.68461291267546565 0.094844708827813567 -0.22576411479277675 0.3224630556472281 0.013544573048108167 -0.6430919429790658;-0.050626349587342447 0.30458151402349504 0.93517393733174892 -0.92740622272287265 -0.95686589098902108 0.77860570247166383 0.54504683603152215 0.91040190899258433 0.31807338197047336 0.0094336449696777284 0.85212761431046402 0.034625671060651772 -0.14802192991755972 -0.38522441135610586 -0.51596055492451021;-0.049928301201821707 0.57426252282480716 -0.62276748738333454 -0.18810305217332837 -0.020915997037630911 0.98028802032687035 -0.2958467852834411 0.22133897331971208 -0.74105558362915314 0.35660991779761775 0.50419981151582638 -0.081361624620370235 0.40963346762246072 -0.99037204301281734 -0.82545210142120795;-0.64504000908446602 0.54726526195637792 -0.57569896797714493 -0.78389184410875479 0.71266065586604255 0.23112424636604528 -0.24676588481821718 0.050241343472898811 -0.52470258387449453 -0.30664644433097027 0.47324368309293252 -0.27733603327391965 0.73366150145442988 0.37845840687873705 -0.39806154592535115;1.2944237585277085 -0.25656051455642825 0.8963684130752817 0.062888754027848659 -1.096514688481133 -0.19806720617601095 0.75765025570944367 -0.0064767695426811451 0.33893546261217034 0.396960734388634 0.34637671147646287 -0.017322158647256333 -0.48210904057139503 0.23164210728812917 -0.36394631443363473;-0.16881838361946969 -0.10092264657918881 0.34664978341271546 0.59295654296381084 0.81111200024990648 0.05870510340774078 0.7312691692568325 -0.40535927020751755 0.17844527359733994 -0.42822991272573752 0.16916293367031773 0.35418426933738084 -0.081675403001617478 0.72960594342410512 0.45388275247114696;0.64347918820096306 -0.6548269075624491 -0.20226398420611552 0.057452509840470622 -0.16326977699143247 -1.1857304138557727 -0.28293792118826655 -0.75585580566486488 -0.90024990615508194 -0.033439697894422735 -1.181971143040716 0.1093213267764159 0.099368993423632174 -0.23628936145891946 -0.49086324701700002;-0.77195099949265367 0.38198297613533472 -0.059518870775590926 -0.14866146300312266 -0.1471288879979922 0.36264436756391039 -0.86880576910729435 -0.25090575543639482 1.0561525926270408 -0.18887676773732309 0.06508222461330912 -0.69574609895530259 0.39202557768698776 -0.17466675681728347 -0.89943146973882748;0.37768501271620181 0.11960121581830588 -0.44834861670053028 0.70041589466653364 -0.41242200807593737 -0.60637953819013546 -0.033644224612222176 -0.050062041207695404 0.74695110003257048 -0.23960760253799498 -0.54116160767688248 -0.13626422629445967 -0.81528031948975743 0.20349863029557447 0.18950610096465817];
  
  % Layer 3
  b3 = 0.23460817666579242;
  LW3_2 = [-2.2046380270403634 0.50686285729947711 -0.42477035124706486 0.39860232440572846 0.99355511796427853 0.78048897399116579 -0.32012382264992389 -0.76555457869070809 0.32957863861628783 -1.0123907836529655 -1.2268122606369123 0.12539929629123014 -0.95499999761378673 0.58259736341401891 -0.41029044104975965];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.7058823529412;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
