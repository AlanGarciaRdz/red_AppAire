function [Y,Xf,Af] = O3oblatos6(X,~,~)
%O3OBLATOS6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:44.
% 
% [Y] = O3oblatos6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-0.5846576007035138;-1.6000468892019732;0.83225180930137099;-1.5033777904419092;2.5173518736673168;-1.7149178680585884;-1.6478004043841576;0.28511886800578301;-0.52111775447102682;-1.4979436596649569;-1.445780899876655;-0.94447960021575683;-25.002373695413041];
  IW1_1 = [1.9350302995792581 0.48404227894630558 0.75266408748120961 -1.390291219563681 -1.246963558063426 0.52021738955780594;0.25093869799678775 -2.3176553374434419 2.3824508467775196 -3.0513867435871376 0.065205622813172187 -0.087669048820697287;-0.84601193656909623 1.2624136160932227 -1.6971352683072771 -0.83594583298303404 1.3549671151732141 -0.86845980847920612;-0.044399128936974799 2.4094947293616809 -2.1094572426782552 -1.6070699341473693 -1.2440670766496944 0.85895593259779568;-1.9835730336650095 -0.83223407083158607 1.0065670511369287 0.26360515582442817 -0.55840972610487083 1.7337345271233742;0.88988777706382827 -3.5351150534614471 -0.7393072083307568 2.4057266263833044 2.5609454031038648 -2.2140621684270245;1.080087006704421 -0.9313780714341332 0.2628488891662123 0.36075827760773838 0.10115707152542697 -0.55424837253730885;-0.21357416299003984 -0.015206502074912871 -0.12610656385598834 -0.52047390665346294 -0.42912405199551162 -0.51827878593442689;2.2684993790184702 -1.0595678357507272 -1.5168423953507959 0.83495732960467994 0.79922787554745534 -0.66983889208994274;-2.3481037555127924 -0.66494147256019809 -0.31700560820183055 0.65891020703298253 -0.10103525145672981 0.41264258781023322;-1.7280022894976454 0.43316117486667843 -0.15950412488546092 -0.098283238954146326 0.97221726123871655 -0.62271988028644198;0.67929092591388895 -0.98203166624970917 0.68347520768772374 -0.31494010577577747 -0.32704243991904225 -0.34095594986144973;-0.045050428086436667 -0.02858906450440226 1.5678744164539704 -0.47500508328711855 -0.49597396929089621 -24.71444729374339];
  
  % Layer 2
  b2 = [5.4411541257970057;2.3981330073004488;1.5437665368310691;-0.57227069611694292;-4.5295529399610164;-1.3300903382660985;1.2210032644622142;-1.7193631347250053;0.20402026330440431;-1.4736003658314418;-2.1985972231036608;-0.27935766151666463;1.2992417972536003];
  LW2_1 = [-0.48304027587486675 -1.200828643409573 3.4658879142757271 0.60821709777192257 0.00022748337782335648 0.24490190113678184 1.4614212517024341 -1.0065483232285644 0.92161738325910325 1.8164340200402602 -0.20697240609430728 1.0890850988799559 4.2075002380887909;0.13112888742069922 0.15481498397959567 1.0180109415369916 -2.1788436294294198 0.1932128675889217 -1.4653243607728652 1.9996924403925758 1.0410917540259175 0.12896886170651631 1.7013265170606482 1.4015206798809972 -2.9178690130436333 1.1970633043193766;-0.080254680995530403 -2.0781479574034174 -0.24778343832168911 1.5091041009498851 1.412096326515659 -0.11462569665364275 -2.5160301566160328 3.7711793943900402 1.059249577478788 0.25629376087809186 0.11868943891578793 3.6872790768879273 0.46992824756009732;0.41258219375639088 0.3846130577896662 -0.53829346005798839 2.3218097567010232 -0.28183488147259605 1.6240944492462881 0.19752399721524322 0.57448702893712367 0.029721154674137523 0.23713361904247698 -1.274605809470355 0.082273907046895953 -3.2043888724743272;1.1139314352338547 2.4353912350914451 -2.9508973825454703 -1.8778934499123099 -1.1337146693182474 1.1594834694908491 -1.6747140049976701 1.609288075543146 -0.12123674822851246 0.029880315881987474 -1.4853799339632396 -3.8795396082209521 -0.23605662232490141;-0.46284237777846898 0.25858698479273595 -1.5961982461736908 -0.70763141240913296 0.71425414554168321 -0.74790740489867558 -1.9079292565928341 2.2841981594846477 -0.2919003043383071 1.4527501128217009 0.36989703187981726 -1.2645249537290699 -0.2983578046141892;0.024583329099688384 -0.2289483367569573 2.0711078562217029 0.92187652922939667 -0.50540619474995929 0.40146107721404933 -1.9908356282812729 -1.0172485903506145 -1.5841760920691015 1.909601917387757 -0.9171379945809246 1.8075966195811679 2.066258080668228;-0.72055742864137062 0.92351853508862725 -1.4713390859315263 -1.3704371730341527 -1.0214975099419057 -0.90935043818388217 2.2000837024467268 -0.6049049074767755 -0.73045180387220265 -2.1958157837023062 -0.81786148021585059 -2.1253055528585407 -3.3641984659632107;-0.45649969701037096 0.091715282998034914 1.8947025937256818 -1.9005993276954538 -0.39329055904331262 -1.3561166645831413 1.3099992717540734 1.0792955027816586 -0.36372904848476356 1.9290390233616057 -0.61039989940510575 -2.0151141690045811 1.4908261332626249;0.57826870887979864 0.0033823704897542059 -2.6821735764657291 -1.0317944788869131 0.90424692577322374 -0.30933351957121674 1.2738797589429998 1.9678218570171286 1.1045854562521398 -1.8698960354679437 0.71193273819579972 -1.7602599886294812 -1.423781697325764;-0.71629906102273355 -0.45820427064276381 0.30869202406068552 -2.4057326182940932 -0.39276414697829454 -1.5673291670328948 -3.852191461238637 -0.21900658684090032 0.080350127875208732 -0.46565379336337448 1.1246935925314749 0.20115410271867984 3.2424566736238205;-0.22765903546710548 0.20523459562737159 -0.76171790739321854 -0.86000282136548534 0.18867390167708578 -0.46311840076576827 1.4246657604124078 2.7975886365538933 -0.5764683487318063 1.7254808151241499 -1.6011469304123969 -1.6206363050206902 -0.76263872838952462;2.2507226219828529 0.080527194205679567 2.2168476008758073 0.078035163088473455 0.86949089067801333 0.45512850232033236 1.3749341176854348 -4.7443887436225296 -0.21981895964666481 -2.5856220268781431 2.5229526141332026 -1.7899404271254546 1.4686914598324958];
  
  % Layer 3
  b3 = 0.89803163769444894;
  LW3_2 = [1.150535491674221 -1.4087897317032443 -1.5177934070857912 -2.096646479151175 0.11705900762684746 1.1821931584830154 1.2898108657455785 0.70090779731292863 1.506783204504456 1.8912116361112286 -2.1453453569905601 -1.6723160174043001 -0.27202260151529428];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
