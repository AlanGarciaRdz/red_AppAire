function [Y,Xf,Af] = SOXCentro11(X,~,~)
%SOXCENTRO11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:28.
% 
% [Y] = SOXCentro11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.6366163717017832;1.4579030330668266;-1.4878861347222534;2.2820917766781443;0.95863235179371609;0.78037825304202824;-2.3409681292205367;-0.34533287566216564;-1.663774389100408;2.0036347771909413;-0.046925084513928697;-1.0716199337802987;-1.1442417276772601;3.1551255855727103;3.4075353873191805];
IW1_1 = [-2.3121214916712063 0.27129391757361404 0.44976092751149555 0.010190231758965385 1.6793029363969407 -1.648659398563304 -0.98461012921427649 -1.3737462723941132 -0.46000251110987422 -1.438141726427093 2.214284444055703;-1.6227508571739422 0.1020821514640334 0.63957456711355376 -0.10525573830400901 -0.01863880277322065 0.07782216919799996 0.99979314902052308 -0.24541757671627765 0.0017182192717667584 0.26481431939386352 -0.90286754792978219;0.17042707665225276 0.49388251208249861 0.63165136671995026 0.89942246088298039 0.14992289726658808 -0.63321551323206926 0.40659958350091407 0.56353170148087084 0.65939769214431709 0.796550024660866 0.46559752037610969;-5.5713440672046941 -0.42433322150450287 -0.47916665592304541 -1.0045095438770606 0.27690726133315174 -0.39435419486029033 0.51652492726252497 -0.57440702398625587 0.26346168998556019 -0.74285636156709656 -0.51320676292049183;-3.5779408789117473 -0.097728049944252229 -0.67640887681229589 -0.68952194895511454 0.034664057045258087 -0.36075867955562502 -0.60514857728029048 -0.33500594645264259 0.18330393177030943 0.40662496695550082 0.036592154432632133;1.7508809546359907 -0.72127654314398226 0.33161095636664867 0.65226885486240938 0.85492841309008571 -1.9961812430202861 -0.15014085144589759 -0.4106502195971854 -0.26940221961031297 0.026100899890369175 0.81112894886096132;-0.72539979672324295 -0.92155356731742999 -0.72742478116988141 -0.35000687350296605 -0.9624651274710031 0.28679391289625594 -4.2048261767765931 -1.3357937877759232 -0.35785828318198598 -1.1280731228381129 3.1998310481018164;-0.78113680140559372 -0.015587907522646986 -0.51951189770018547 -0.82369453047391716 -1.0133652059852161 -0.31701081444326196 1.6295546052827725 0.50415901467855184 -0.10961266546944991 0.49925183350083968 0.52276660210693116;1.4234464096977761 -0.11676895300334622 -1.7372490596924592 -0.29658599345618969 0.33199066948851469 -1.2289826216729312 -1.558474953506533 0.30321332357228881 0.10174274750411713 0.84401111939840912 0.25031695348497418;2.1418541938038365 -0.19952326818271182 -2.102906967631784 -0.32233244612285211 -0.69685058515405029 0.073454595275044568 4.3196437702979118 -1.3725261262593016 -0.17090082656555422 -2.1417724210083207 1.0212735233228663;-0.1002061694595958 0.18690500321003245 0.33995856845367922 0.2014082385832931 0.027762298274410784 0.15137442142187479 -0.55096148107696608 0.48034036768006499 0.090486133900647359 1.344577654872656 0.35665227749229023;-0.69453328981819551 0.066053894349421369 -0.18478486624661475 -0.94483791067062917 0.24585395755592068 -1.8636810672031863 -0.58258343782325628 0.21779326324980966 -0.41557822185383003 0.32977731055471615 0.3403818877887938;-2.3063562029568496 0.060263022250432445 -0.16181520494139681 -0.58200631672573588 -0.35346109524178776 -1.0669465735333536 0.85694436834526999 0.39366746313624507 0.22961338643090043 -0.50320957369289432 1.1534641149036142;1.9087510371339127 0.35733769044352914 0.39873208821541517 -0.70088660593409535 0.719186377420163 -1.792884183455697 0.47951394367991496 0.38291432158452626 -0.094378153224158268 1.5500411215426744 -0.91099442281518284;-0.89457703789724796 0.14207749101161737 -0.27683681638407942 1.3907009750862098 -0.58463503646043735 0.27865991709633642 0.063539836402336444 0.71850810042279056 1.2342887297399265 -0.60151162024166438 0.98097240451481282];

% Layer 2
b2 = [-2.2592243856802559;1.2075257995196758;1.4551718955550226;0.049206738784063508;-0.85599954550455004;-0.47267096999706804;0.027036615784629951;-0.85149880954680479;-0.3631708319816484;1.161917957149283;-1.328102664223235;-1.4569503725628805;1.1829066672467823;1.81413721468908;2.1143760580533635];
LW2_1 = [0.40771750629436276 0.078544410587505081 0.9559387455301499 -0.57302405426169623 0.0070492773305178974 -2.0605962842559329 -0.03926018601238012 -0.44804899355301092 0.088021963613954979 0.7019713101517856 0.89302086396622138 0.49969370971197591 0.17645180909430078 -0.35248101938748522 0.40577390080221848;-0.29715354178699488 -0.22030351058945896 -0.11048974994654673 0.61701389190344857 -0.66347561276202438 -0.19367653584077649 0.35765970142307013 0.31661368363427661 0.22906770025906892 0.55571860811121865 0.75400524239312494 0.81950716321248829 -0.20435187342286823 -1.2811207118715982 -0.44880079270412926;0.48638903164247194 0.57050220189481182 -0.40095896408448378 0.87091350906091991 0.80711698983794555 -0.42121226836211345 -1.2927603347880938 -0.66548994503652226 -0.028592541934729196 0.42666554160098696 -0.71344761670265444 -0.17678701368088892 -0.67224139188193488 0.43386684332637959 0.51199941442194818;-0.16546015189348928 0.18890505670664634 0.38405485835467834 -0.44428248829609102 0.32356977835187967 0.042990379925291637 -0.054590429888923486 0.14091821154213682 0.32014699597403384 0.13395849001039706 0.27581961611435213 0.89176784466517556 -0.7342668313228492 -1.095018388926136 -0.36982346363972812;-0.1749902602652918 0.8552594316271328 0.084343631996993296 -0.36196598118135404 -0.28565865874404178 -0.43903263724655528 0.95133240326384572 1.0839936576807716 0.55717901959184146 0.70982494393965889 -0.32981485347202211 0.26126083433810526 -0.71131016076420694 -0.03163704676510587 -0.57929317576903983;0.764725766955062 0.70335879624203756 -0.4608763466302081 -1.0857855713374844 0.33477969347227549 -0.23733849870500404 -0.070921193438506572 -0.043176650350247384 -0.10460844037821036 -0.064847621291197366 -0.10466676391156282 -0.25117844369360537 -0.53959629655693608 0.030492352976670311 0.70857165273590506;-0.2743695353420883 -0.89506010290805216 0.36452993300819519 0.25594296228949925 -0.021716044481904263 -1.0607902988240232 0.2444944457369547 -0.30696397065132891 -0.22157619929172981 0.64461283387316182 0.29373492216065883 0.86002787366622313 0.42258528632100428 -1.3742316770836798 -0.043577700281171521;-1.1463344578893706 -0.94507775283400952 1.3557722748661125 1.3114612697696062 0.39344407271095649 -0.42503546233245404 0.74387703449101572 -0.011798602818659659 0.040785106800582657 2.5100261852462378 1.8522882030251542 -0.43664676106889494 0.12066707754343017 0.062243441781922509 -1.1930468545213471;-0.12388407461355071 0.14369574499141419 0.49779976095512002 0.14768863468167628 0.080987607535655634 0.71570712006813553 -0.65106216503299563 0.15362964235518484 0.25099405481931225 0.090199761497798542 0.16753733212718591 1.4136148116463934 -0.44567217850596363 -0.91652970862275085 -0.77432053953265934;0.92022975844991473 1.4010902604854687 -1.1549381458958392 -0.95903802271105931 -0.44454084263714616 0.41321467414463192 -3.0643668914634654 0.55045420028898284 0.37250942106071749 0.12335267789318088 -0.8132480603843576 -0.15627206128544602 -0.85989479314056105 0.71463605809433994 0.52114495898069713;-0.84849577123020448 -0.87499873807855255 1.0718277349682137 1.4276089838769117 -0.080301790228861455 -0.70860719483683443 0.76727109821044659 0.52551143075209727 0.28384997298738823 0.9659284207895753 0.0080941483677429982 -0.46733109510147813 -0.20795282327518905 -0.65779127134574433 -1.1680947614827111;-1.0485599584788829 1.5938318384305203 0.77551116858010316 2.5396404241631383 -1.9835996718544444 -1.7583707892868676 1.0516072705854642 0.81002858164721547 2.1698388936074124 0.64277212067328948 -0.093165870428506867 -0.4246362606115785 -0.29564352914729314 -1.4022182040461975 -2.1813021228126082;1.5396278278829665 0.15565662787495679 -0.47589982848273005 -0.28442031714489491 -0.79798006981478686 0.14611767515186899 -2.6988728811646339 0.24077816190583104 0.30558571534224299 0.076862607486086948 -0.92141162254357278 -0.11578562222374419 -0.59183288755397978 0.49967559698969061 0.69993694450779631;1.633056033737923 0.59792340551973344 -0.84616678750567043 0.01325039701830439 -1.2918631655062993 0.093224655061113423 -1.3784394296108982 -0.47640890443427014 0.60989990756395007 -0.18881488328325163 0.30374096978368531 -0.24196488894864873 0.96781944079907956 0.50157755456812925 0.70655610713888717;0.2806513366440998 -1.790556908939396 -0.83240594274887691 -0.13318484373965395 0.12573995298495075 0.0098970699914325347 -1.8932339540471765 -0.037662042267422972 0.41560509000120793 0.0071332734222227384 -0.75415958079865197 -0.3084344833503958 -0.54141069586771462 0.32945250584155894 0.84580729729935755];

% Layer 3
b3 = 0.82138826969557643;
LW3_2 = [0.83950271975535684 0.58857660884117258 -0.68636416989041693 -0.96751667566618438 -0.15394636160280245 0.59587693934771968 -0.46276500953969396 1.0416571264673837 0.50579926265519348 -1.7390413675672043 -3.042792197332842 1.2308087282773204 3.0511126810547236 -2.3762719547715614 -1.0207741339940033];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
