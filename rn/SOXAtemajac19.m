function [Y,Xf,Af] = SOXAtemajac19(X,~,~)
%SOXATEMAJAC19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:25.
% 
% [Y] = SOXAtemajac19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.98393689145661323;3.3156179726807333;0.14670892798241997;2.763724109847443;-4.0067006363393132;0.73298432417042581;0.4775098068888996;-1.0958564344357309;0.64760941295714214;-3.2726437245961288;2.0799133939588117;-2.4983549821989395;-1.5365106239642645;-4.0730081868495374];
IW1_1 = [-1.2255258426308495 -0.28972271730616023 -0.43485214694995278 0.081239228904328692 0.14139835091564731 -0.18392414738054688 0.81430486350039766 1.5611451486655328 -0.53315982461546907 -0.20541968129650379 -0.25626444881449284 0.72240677012304133;-4.3801418539959611 -0.39610625729059357 1.1526085896873557 -1.6117487580196164 -1.6365892845986934 -2.2180751992620258 -0.77791858686167548 3.0406908748684263 0.7025078314861849 0.46362051042434949 0.50813594076601198 0.36189420947207113;0.15498715735946375 0.36104760447588069 0.70641511438073934 -0.88355052921811228 -0.84955519266253077 1.178040575736611 -1.1093603317699594 -1.2682382626899431 -0.81270695619077982 0.1649805178410568 0.87175904473688426 -0.063857631975225024;-0.83254528588248822 -4.6027179392531314 0.36790967848734335 0.93809797193134781 -0.4179144033877773 0.015762001343953846 -0.14911076648147575 -0.11500421950384757 -0.69831731614341142 0.34625481989123724 -1.1268025343886121 1.7391977917680614;0.87827532303280598 2.3431368350550863 -0.93740763089542412 -1.7926577170912095 -1.7301578353878717 2.2085971616110847 -0.31202799970546546 -0.32435253994075247 0.13907839189159377 -0.15310145293487043 1.1053969444328333 -0.67079226697432737;0.032723981675485264 -1.3208884860615528 0.086161844320139069 0.81078974249781433 0.35293569929461777 -0.73934110478142689 0.31613959196949915 0.23072558576050345 -0.35492221979116623 -0.027821987377972424 -0.82124058559003821 0.87684013438505226;-1.5622655329474961 -5.6170540618065423e-05 0.77430359497449897 -0.41432230986961716 -0.12903210472277685 -1.481214903436437 0.32581171678795301 -0.82918428231949848 0.96946731282168674 0.11619266517512279 1.1065237330051101 0.27814181883958955;-2.3677177450915141 0.094931289507332331 -0.17986114144111873 -0.17207265080752707 1.0107449317650534 -0.77293981167565406 -0.70551164297051383 1.3430274598928167 -2.1427985643361911 -0.39962415135324969 -0.431690174041862 -1.0100860156425795;0.08098992694532367 1.2930513992189472 -0.30372413472258708 0.63407274758474275 -0.30270730008869473 0.16058711199483203 -0.29926773893494174 0.39086542694585619 -0.84252129161194012 0.0057478920007048642 -0.31957597885881095 -0.30881537321085861;-0.2552695634666643 0.81825701899052994 1.0246643398448323 -1.7524451446190923 -0.7366284997282887 -0.51781633956725504 0.89989678177233068 0.14110589608499768 1.0610257312267111 -0.011647878357393143 -1.1361770974702763 -1.0664549271884254;0.14177867736822181 0.7405840926040077 1.1717996679640068 -1.3570105497698626 -0.14360109990273667 0.88797539166172545 -0.0071519719641350565 -1.3572659708125383 2.1539155404663393 -0.021944563039449264 1.1120742651201656 -0.22528732459937448;1.2994438499806922 0.13589794534655436 -0.29378428800298573 -0.84043681314314933 0.89121041967791759 -0.16235357884280446 -0.63362983905828696 1.055607538335219 2.4133105878135956 -0.041367599084474745 0.47917686516246616 -2.1700696218573059;-0.33461632807353781 -2.2557870785110032 -0.091002433670981264 -0.032617841416556097 -0.76424871875441347 0.090471864439586491 0.061685165409197162 0.017356832682601808 -0.39319696767885065 0.08897450093038535 0.23843985491332173 0.84260522708329288;0.94515220589307014 -0.46369021698846041 -0.58750804303136139 -0.12563049321731751 -1.2305440045893381 2.2750828239139049 -1.5146248545021255 0.86787884135484028 0.83604884560648141 0.10753571110880383 -2.3708736775373422 -1.9298920913072068];

% Layer 2
b2 = [-1.7739991123940806;1.9607743490127036;3.0136227120453802;0.74922021545088846;-0.99534851790453849;0.65449995265726646;-0.76762998459326304;1.0587396942976401;2.9510242136230733;1.0393624988876109;3.1591156035355032;2.3077607215096934;1.051721102270883;-0.47639753367797411];
LW2_1 = [-0.87339262156689146 0.18944494547692795 -0.86512519807070221 -2.5922921368966807 0.15089825826687325 3.8829666473432183 0.21701875369948803 0.66486364611217508 -0.10544189833176704 0.23419319695477295 3.3892375631828813 -1.40357966581829 -1.4214713167679336 1.596568932601464;0.40677446561253428 0.50246105951620434 0.88529939344752895 -1.2310468666982288 -0.42808624986517213 1.0671104863612357 0.55419190933251672 -1.1298006456989693 -1.4020948159549353 0.39966517664732137 -0.53271116351065884 -0.42696328076732926 -1.3438408658841194 0.81711486181860216;-1.4347688705883122 0.72233288378896676 -3.4504500804734404 0.075723151696355642 1.3756480004202629 -1.567062817666552 1.8659280320646492 -1.8903711741754596 1.1595153829657558 -1.7484461188345914 -0.1711121776827696 -3.6791220098944928 1.1935687898185812 0.76445420016061139;-0.40808515125038863 0.0082430990025881591 1.106251862619219 -0.45099476155574358 -0.94509619462661554 1.1677199556528726 1.0301528213560158 -0.80475921958044827 0.10016673125147565 0.89784006576921493 -0.081994983486916154 -0.037332889155359053 -0.58880801842371522 0.36095436446009532;0.29050553496885878 -0.10863182338102319 -0.52020822436467073 0.50854629599291346 1.0017557663865873 -0.57642220311076431 -1.1923648766294133 1.2812323531803316 -0.64591038837396264 -1.023797167994863 0.22216500900091413 0.16719850863072241 -0.1790349973419163 -0.32647683406222144;-0.1800702224388849 1.4058819544000516 -1.8906056126778346 0.11604136424303563 -0.35526119146950019 -0.38897793239620326 -0.90508462910596421 0.27713174285620901 1.6264990194601268 0.13323726771631955 0.48735632481663732 -0.69394424939030674 1.1650828567324538 1.2001170527962342;-0.79923258639078254 0.13939127351722877 0.9030719534427083 -1.2535594742236453 -1.3473447371289895 0.52459419573431398 -1.4912538892525533 1.1153801516628217 -1.4736667870740763 0.13394122839949985 -1.1328611479367301 0.37949612178743791 0.15536400819212687 -0.25368857520649502;0.0030286567402779477 -0.3442291549691352 -1.4677556638595359 0.57268055040843735 -0.39305069591787384 -0.71975625714467617 1.6465612374286995 -0.49711753371179201 1.5299678916488522 0.22783277832042842 -0.82894555976890838 -0.55268396218684923 1.4090816108575159 0.99073561096359197;0.30208094940479358 -0.94555693712015509 -1.3604660038079539 -0.57265517858740689 -0.59115351786037063 0.091024928931277907 1.8470172420305178 0.048733513778032277 0.92423061692244757 0.7641867644838074 1.0389041625102091 -0.04313102581696681 0.32198160281493582 1.0520785593097506;2.877364496987012 -0.73632007392027632 -0.043164688654584851 0.05243768819708134 -0.2122502841522205 0.73205006430753561 0.97169702726518148 -0.58226520816533878 1.7818284464083323 0.24323423806934275 2.2045161873944781 0.48317336878208228 0.62870670659448002 0.11425333241232689;0.5054263794138858 -0.20341603628291685 0.14962845912218231 0.38657145920339842 1.0719911289780504 -0.26522767668564007 1.2285721468214048 0.35874440105100514 0.43282280892047154 0.53778685030195483 0.60509218023096234 -0.20419431037338232 0.7075995430323091 -0.032137247330185206;-0.031976637308307188 -0.24049888906698982 0.17047924439227716 -0.94210196802027524 -0.60176005467911176 0.30026066553220127 1.2798461875100773 -0.99347346970388872 -0.12449214564517214 0.94754497432798701 -0.57902167225165657 -0.50398290761608566 0.097160441040791218 0.70347443269559029;-0.21208246165525324 -0.18300321181983087 -0.47555388870082976 0.086635944934934081 0.59923436047537915 0.68990694358701021 -0.90141469770974292 2.2278728910117014 -1.2469379732906622 0.005864388651686963 0.022914526221079499 0.21294658148733575 0.25738049185131695 0.15049096543242005;0.11413077463527521 -0.076021720147620458 0.34120307835078373 0.26854607145155324 -0.17249450669957267 -0.9923107501632753 1.3903431960362238 -2.2575928158973455 1.5718006004815559 0.16480084210195825 -0.22831246858763138 -0.034090099648142087 0.033868092191723036 -0.078764645125694588];

% Layer 3
b3 = 1.5572235485243977;
LW3_2 = [-0.19129779215618739 -2.6029246865924351 -0.88874824558581278 2.1122929303475289 2.4884235958374679 0.28183008832929729 -1.0208444099664709 -0.3102492428899094 -1.9347832636531825 0.61764795446597254 -0.83692073529018474 2.8492118075652604 -1.3043383510494799 -1.2970803407470097];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
