function [Y,Xf,Af] = O3laspintas10(X,~,~)
%O3LASPINTAS10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:47.
% 
% [Y] = O3laspintas10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.241545893719807;4.5045045045045;0.00280033604032484;95.2380952380952;0.212765957446809;14.7058823529412];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.2891317751807509;-3.1081609055525146;1.0028322574609476;-0.8796768858600954;-2.4752434607855278;-1.9220888200491566;1.0931839356132873;-0.00028965340971572832;-3.7701426741872432;-2.7523444313951635;2.3395409566831455;1.5879767968031877];
  IW1_1 = [1.3553735802951818 -0.6894096718443381 0.013135111314773783 3.1665606674696285 -0.45495272230356798 -0.90696646950010307 0.50872806419851979 -1.6516172142741872;-1.7867698614217744 0.41246262681592288 -1.6383088184251851 -0.57478361056424021 1.0476584993143974 2.1341303285750803 -2.2010317146971379 -0.69973617181504999;-0.98130819985956941 2.0009743785258527 -0.0094562218598903576 -0.222460987931871 0.44713549334392233 0.24613667457205748 -0.20108965597231374 0.23127632442707993;3.5512232627879747 0.055902547265019212 -1.0218231208857571 -0.4364857604758528 0.43730405308299841 0.2758047996021506 -0.073150474341666119 -0.45700340642923221;-1.9842812119557074 -0.19152505855323035 -0.30083551256596891 0.14974421469347121 1.2384532870718521 0.74859174565143949 -0.47913658807572906 -0.87624059307829494;0.87794509055400527 4.4787834447591566 -5.3098520721037312 0.62696576197085485 1.2994698573645891 0.2593658966207254 -1.3615277224898492 -1.0854327223533;0.92983594838636308 -3.7511227102268112 1.5969871324780858 -2.4960121163297213 0.75742436612657749 1.8923634188572493 -0.3563297389922509 1.0313479091218389;-3.0798907637453672 0.24150181345758812 -0.2474484409224689 -0.0868453596726452 -0.13167089858885175 0.60120611026022353 -0.22659032242488439 1.0300843715710246;-2.4064397761855942 5.5721178099551807 -0.082410393590434977 0.073531460072279939 0.26001671356617584 -0.19751988331932979 -0.37208346685876892 0.46480554914864114;-0.82889085096717163 0.79867075360113471 0.57238978081743963 -2.4280665717787544 -0.59441128661179754 -0.38557762528484546 0.48515150893849346 1.2086171617537396;1.6406826236744492 1.5482245365324989 0.63540046479337553 -1.0230154249555501 -0.95782820209223241 -1.2548268545276657 -0.28636383675461025 -1.0912709247582966;3.0521004875356517 -0.36784819386423367 0.1470642710864617 0.088456832684534512 0.66820918669375751 -0.60386469223532602 0.21391057767992991 -0.30143893033203539];
  
  % Layer 2
  b2 = [2.2374623361587327;-1.7790401489976508;1.7530896109653102;-1.6715931024550317;-0.81634360098346903;-0.95861189037622629;-0.84472039666019461;1.9265708121801524;-4.0711893731944766;-0.46796642446740905;-1.2088064524191642;-1.5418845442221383];
  LW2_1 = [-0.75920439322605826 0.28600323762964686 0.14323312707212343 2.1074734995942799 1.1637187521358356 -1.3486084039522441 -0.95165418803947421 3.1624952125320198 0.10505890116082842 -0.51259609888339741 1.0711570655732339 3.2535160201339974;0.5028554869477323 -0.78844562829444476 0.22278603503768071 0.10606955627133538 2.0740702876328139 -0.52293000702997183 -0.52209537938512363 1.8156013471147434 -0.97052074743662764 -1.5578434851353586 -1.3089962894464071 1.2917446383029345;1.3372541188453291 1.0715801043803757 -0.28720827520982278 1.0587140234163326 0.27108007105065046 0.0051986699509342614 0.66314214242872238 1.4048550547631571 2.5226097161181782 1.9618504207062923 0.52285027536206841 2.8131852617942537;-0.12734968281341608 0.25943175658858791 0.4444640373756733 0.016854663535474969 -0.054328779741173831 0.0078904307071296313 0.098669917266679619 -0.49399572722639834 -2.5451665005399375 1.1533835795005176 -0.7341977204719502 0.87448925582676107;1.0413671000054308 -0.2308797440681673 3.2606465015220896 1.5084771906655263 -0.44211843446482402 -1.2216694982075214 -4.387430866669769 -1.2332856176755813 -4.2835902626204456 -0.45695390396432289 1.4065085928527812 -0.79774006761868088;1.1326090666358504 0.59669624221899653 0.49750581594414356 -2.5243478195560183 1.1063767232377588 1.1505220243630536 0.77724355721982485 -1.1564033029224281 -1.1950272018305497 0.99327756242914356 -0.88622794299911556 -0.054289595695564331;0.93729491259686681 0.1308435513375085 -0.88330474443561913 0.82442355906264098 -1.7761521771754512 0.24097711797860416 0.12188440503987723 1.884363235169908 2.7360887772185065 0.1013085928303174 -0.31516148891137213 2.8477201765088371;0.40805991724907242 -0.27450065892240549 3.0102174991354738 1.1639888159546934 -0.7440289370147557 -0.76375777748918317 -3.8683844552597746 -0.60332966564749335 -1.9740381292968099 -1.5146397492222068 0.30308301183710051 -0.28790501055782675;0.19267731019963952 -0.29571079377759468 0.33978944852903431 -3.3653458296843746 -1.3004602537468968 0.42306750162269063 0.35592813139311436 0.77182771200459421 -0.12825011453252036 -0.017678001678643838 -3.1472518667187059 -0.73626485841537637;-1.4083826162629831 1.1747988107914353 1.2531106646638202 0.26183269047530688 0.078056550910692191 0.10172642735893174 -0.71710062958563958 -2.1714859857289825 0.32209238108382382 0.26228703539271692 0.65335107737051679 1.2771963906216524;0.070274788286935924 -0.26962752324348932 0.084971119772169423 0.5010784648803045 2.3228591405269299 0.4572437171818079 0.87954160436780338 -0.098450479553079687 -2.9654454206077316 1.3499983977297028 1.2882120809001099 0.73945085927687482;-0.45623738574304967 -0.40215318727172761 0.066446891022448801 -0.44797338115552626 1.5858084028221757 -0.60890829628207932 -1.231628610854554 -1.1737961119428593 -1.3273223647265289 -0.65575626367199491 0.61752460153349109 -1.0283222647345389];
  
  % Layer 3
  b3 = 1.5681947837456307;
  LW3_2 = [1.7562770551965738 0.7530457183253727 -0.49013405745252647 1.3473052009201774 -1.0078428266164305 0.52139758423493865 0.64415089167502049 2.5757485133741151 4.5153497139469065 -0.31059830574203778 -0.78125127014703799 -0.67644423372997564];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.7058823529412;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
