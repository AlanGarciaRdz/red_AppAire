function [Y,Xf,Af] = SOXCentro22(X,~,~)
%SOXCENTRO22 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:30.
% 
% [Y] = SOXCentro22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.5982718390673236;2.1948901660625171;-0.27232645851162152;0.027675177134814655;3.0784512203015142;3.3553780511944922;2.7536654101938232;-2.2149515738201422;-0.16105779402958126;-1.7097489302003175;1.2690720071878907;3.2686420473811597;2.6477415654043641;-3.3371183252899477];
IW1_1 = [-0.68834596455991104 -0.43735929887458236 -0.059094660012355381 1.2986431236848648 -0.18351649879978585 0.2036650302331601 -2.2023607997799544 -0.43832386788088046 0.14758355291073871 0.50457136342395459 1.5520831150189676;0.66366173820770469 -0.00023269289420535522 0.27522896785433903 -0.023414707993117623 -0.40531324355541287 -0.07915286187666512 1.0447817109846864 1.3541149825399788 1.0903505137421103 -0.45486924491350073 -0.36778783044529234;-1.0348330231583747 -0.89039539256344691 0.48664685409883024 0.32198677949834964 1.3783186707242669 -0.39700324580460172 0.8506135408811234 -0.93019924905917439 -0.22521436700671985 -0.88183938410704132 0.13603012060658626;-2.8673429177200584 -2.821301622097983 1.1659359313010413 -0.45851328670245756 -1.1831820734465637 -0.2110699270434987 -4.9093506269684593 -1.6103267340405212 -0.32462755492103185 -1.0334691100299502 1.9354026770885111;1.519207578517171 -0.84601869561153464 -0.3107761288073384 -0.70679403780060412 0.36557073780739147 -0.38499498409635285 3.0476943791701649 -1.5818962166844899 -0.41458001324198329 2.2067595735042564 -0.57747597983087984;-4.6777480465880528 0.2945949180781165 0.10099336147756233 0.18786233697290344 -0.53438342809733264 -0.80683125595843164 3.3310922280413364 0.040874362717470213 0.059027996437948357 -0.9348452053789913 -0.62622622890705726;1.9162168001847488 -0.63662957242067464 0.2084125862733385 -1.5808172529738174 1.4530346086482184 -1.8232434777298692 -3.1817378905839591 -0.086104077311240979 0.27402529689771854 7.892126655803307 -2.3027465991387324;0.34658464299148717 0.25443143964211429 -0.93060481225972713 1.4754012242814909 -3.0557878335122188 1.1159291190204725 3.0115794773231781 -0.40905502493524398 -0.19460816492761471 -3.5639853862368005 0.49299280113851329;0.32681676405647714 -0.98017420136758338 -2.231231711380115 3.0385709676675852 1.6850138375196775 -0.8085581336425125 2.0662967230944167 0.52508253275213002 -0.28202437306595096 -0.2015750668422569 -1.4944038665792387;-1.5267513243703037 0.0070260191784946181 0.55273193872489035 -0.55068295330308858 -0.24881259069025194 -1.2602795893612717 -4.1145918111276023 -0.11452962059819226 0.25798404462638869 2.6316528451933339 -0.39398724994344925;0.909651395327153 1.2237787105439037 -0.089466991238076887 -0.428995429122773 -0.427216521424998 -0.11684558869411503 -0.15355075398971951 -0.087276439905297848 -0.83685173935412138 -0.1541598137148967 -0.76940922392416322;0.53545485097497525 -0.1231497738701777 -0.19239639295345359 1.7950808423610585 -0.50339962155929485 -0.2679707437993894 3.3119380593996173 -0.098472036933493226 -0.045814328596405274 0.2150092061321888 -0.075385796374026995;-0.0076457681525491511 0.21770074023589975 0.3851029425074235 0.69287440604517059 -1.1647252244817172 2.2852046972099762 0.90610746121891017 0.40862209923784071 -0.50657175991194325 -0.13334331019754736 0.032656059304360378;-1.5756196134170648 0.22175823100296865 0.28176540791137589 -0.5109953364801364 -0.1812218556181473 -2.0777732128305719 1.1768750654859852 0.040140357784107628 -0.24453224466886161 -1.3991763875174021 0.0073899455836827499];

% Layer 2
b2 = [-1.9218156916948437;-1.3953828120994229;1.7377247464978425;2.557364528162942;1.1349907432742552;-2.8347490361976666;1.3671938543694329;-0.64844725735134001;-1.6099975039399026;-3.0890667241206544;-0.68901735839571554;1.8459667281747443;2.089948439959791;-1.9396346593932101];
LW2_1 = [0.9718245281598894 1.0309115059043663 -0.027146247911716485 -0.69773548077036551 0.21458904651193211 -1.3669005114911821 -0.61976713321783983 2.0522264727381963 -0.91063112378028954 2.334322983478565 -0.60720195413348688 1.6558634516187887 -0.29493635582431393 -0.43089231096948805;1.2368128243475121 0.296354858969549 1.521979574639555 -0.30676619588652315 -0.93229185408524318 0.93756033635652924 -2.0941196402386923 -0.13054509748990586 0.15858491735262537 0.98665092531678833 -0.28878400133135029 -1.6469450830002479 -1.4990458634324237 0.89485554246931098;0.33240545375993574 -0.031370932653665064 -0.95712453963501354 -0.061164456545259913 0.16762887985513575 0.83050686617010439 -0.38990303722894443 -0.19377562907560608 0.040666145570679692 0.282689866871627 0.71617092816936523 0.34493618116694869 0.8343644698919982 -1.1364747343441834;-0.60977769040675189 -0.87258507216594661 -1.2274901097823574 1.5692401579166431 1.284480897130539 -2.377433045336474 -2.9605794121165694 -3.5629412552947404 -0.25499704227210929 -0.71319707530354792 1.7869164785677671 2.0511837648761841 -1.0558957241690656 -2.0993377949951832;-0.14115080001832958 0.070901742468188311 0.46100278606933148 0.86916181642979051 -0.51429886649090806 -0.98758977827122651 -0.55404870229420455 0.37188457511210299 -0.38509201735864446 -0.87307047773346813 -0.028170660602312301 -0.10039846130334237 -0.58768034906438615 0.59807672799618772;0.66261331416865088 0.97221551468164269 1.1820257244604757 -1.6551141288015878 -1.1610851491817 2.3679854590952987 2.7082900393149489 3.5797137058070643 0.34593697411466362 0.967831320849456 -2.547464862932137 -2.225660920818636 1.398415782035872 2.0596783206317211;-0.56532476264676934 0.20815433887280593 -0.06551434241875409 0.35382767186282682 -0.98814662051617386 -0.12615036299419152 -0.27186973523305774 -0.096264143446250797 -0.10247421598259059 1.4764893060333337 1.6507211507320763 0.17250398080076615 0.47382674735902364 -0.30361193782222429;0.26346422256304325 0.64333628399000842 0.28083076410443741 0.20567591887951095 -0.26356082145013704 -0.43344845771449914 -0.66625216870450243 0.26003903085495927 -0.17522448441191307 -0.89718339348420306 0.62087100526767669 -0.38484540223518715 -0.3774830556929451 0.59508635109410679;-1.8332175444519492 1.1448245104750441 0.45741842600141519 0.25956864129615043 0.5275395672828761 -0.21307089773880089 0.54281231212411696 0.59817676269724762 1.0937487118100298 0.34007262574869812 -0.50120807276709822 -1.8244450297630244 -0.99520895315074931 0.74873542385937775;-0.74608138092327969 -3.4185070009618235 0.0090435816600064056 1.2351594487260831 -1.7943642908595132 2.0841603829816298 4.239677056766249 0.46827708542341845 -1.938826648039738 -3.171677319909679 -3.1121537064336042 1.6904133734302251 0.21542102410953365 0.27852643448404479;0.41104611242025069 0.89871097358453955 0.24376620686462297 -0.072038552972202019 -0.1417568219629253 -0.54079493207040685 -0.82468224194654749 0.21211642947020856 -0.11735113016245152 -0.80541575161962653 0.62536641570156437 -0.45958824229698919 -0.38129141635489411 0.56779277404619422;0.89864581894497964 0.43515770089997252 0.3289002787020493 0.79029402042785013 -0.87820659180122518 4.5953435696895664 -0.46690944071250828 0.26061608443384482 -0.71692775663685282 -2.918648908143163 0.77124664445300195 -0.59496341617362436 -1.4441298697220464 0.072260612645157263;1.3863563842527389 -0.67194939916832208 -0.020705159554331068 -0.12543824944940896 -0.36521566213873058 1.2465017450238192 0.28318993326115116 -0.24307180394429753 -0.62430402860083001 -1.2343590943997551 -0.017109389916617465 -0.55662372127974757 0.53407179706232089 -0.21012585877657333;0.34202729541536514 -0.88512440850619367 -0.28830692096307148 0.27216303296829819 0.96811827912778947 -1.9824662039758718 -0.6966021660903623 0.36666698012961879 0.40175253379269588 -0.17115036961656416 -0.41075704975705918 0.47895888532993658 -0.24918945636330142 -0.21992626800101128];

% Layer 3
b3 = 1.9595134885280525;
LW3_2 = [-0.047088772235646642 -0.077893612652193731 1.3950379319600887 1.3093108424543201 0.35330652141167029 4.5195301486467612 1.4926404678358751 -1.166998581744854 1.3993465621067658 2.7357084762065607 0.83541034026800864 0.21104924067832764 1.2916066544377551 0.098971547066669913];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
