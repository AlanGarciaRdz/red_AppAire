function [Y,Xf,Af] = COCentro23(X,~,~)
%COCENTRO23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:35.
% 
% [Y] = COCentro23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.85937591519370771;3.0003985896900036;-2.1235749960025059;-0.95089014501215563;0.49598206790999028;-0.28253300401492193;-0.79281478366944813;-0.16199318789686065;2.8306067620445918;1.8166116480325429;2.2902086358422085];
IW1_1 = [-0.26789779444998135 0.55730053877174113 0.18640497847959209 0.11562118928738836 -0.092224011411297213 0.013716663199907445 0.5443081790689811 -0.16558365779642215 -0.39120562556099436 -0.34457123763743192;-0.48810674882819344 -0.37273500321807834 0.69074301396467286 -0.16696855002210614 0.39148786945946595 -0.10190133970292374 0.19337985180699124 0.03452601781859016 1.3795092599946479 0.13939993538376086;0.11546136924850543 -1.4567233817388929 0.82503813467159071 1.4221202810216182 -1.963431678704203 1.840972231594791 -1.155705917839055 -0.38503748475692656 1.5137845691871976 1.7445568811909462;-1.4980454266893113 -0.35489981691392153 1.8756381994592506 -0.0094770934233042725 0.47435564986553586 -0.023552020424222022 -0.15833105308218193 -0.077647690239425582 -2.9243624424848162 0.37054826249739498;0.07029944031790239 3.5642296384382139 -0.11955569015187469 -0.038122382114393352 0.05113974340352756 0.091323217773918205 -0.041047492490829993 0.1465658677444393 -0.05418066944668215 0.05415865790682349;-0.21942387135842628 -0.39687962291958367 0.1561563409518891 0.19285167773557071 -0.11390928231406512 0.41462345528593864 -0.5549311768323153 -0.26716098702651336 -0.15421404451438797 -0.15889216036341156;0.032606583307517478 0.10015623260211874 0.50802820053893927 -0.047309650515891345 -1.588460475696043 -0.37683421502507308 0.94721966860743978 0.47789623016947524 0.0039259394055273927 -0.14303079361454135;-0.16827380522380703 -1.3092648464742027 -0.29523547580100945 0.39981558460687294 -0.39566034672508477 0.36400242002943056 -0.21592325247101046 -0.17615908585967999 -0.49741361040975263 -0.62231218148821477;2.7745778715645293 -0.55116065407450154 1.5472542770824991 -0.0052952542707121074 -0.29205990084302952 -0.34993542912821801 0.13037509479957374 -0.17180168780791527 -0.019863853147446923 -0.331367612472107;-0.71209919885671169 -1.1649728260303558 -0.75833000758463098 0.065787726917929362 1.1621330561125593 0.031120530362500648 0.29826281808566796 -0.60307809459436057 -1.6585967493114298 0.63306229708132988;1.6645752885417409 -0.0027031788265530488 1.0007186406461648 -0.059604529810776234 -0.28796631207009182 -0.41800533936562667 0.079935024920812711 -0.15309260356889162 0.50880887334889779 -0.18305863191918281];

% Layer 2
b2 = [3.3974670884104379;-0.92697444668089524;-0.58802915380247922;0.08373521841442623;1.5544865441492561;1.7174650016119046;-1.3918551326019619;-0.6473807213592897;1.4195737020586374;-1.1099476429800825;3.0847146965413308];
LW2_1 = [0.32353568753462297 -2.1082194997457635 0.39547234566444373 0.79447144554778626 -0.66017136299695411 0.41046772731458858 0.67989502020955417 -0.28126280090556338 0.06269147670797437 -0.93825770712612477 0.3259747675945146;-0.36852975627753581 -0.055811394836563499 -0.51817075439119187 -0.42611645496618544 -0.12913698086179945 0.57392383324048379 0.35217777269062045 -0.24388452676681205 0.70540757577561541 0.83758889094740974 -1.1764481050525337;2.0443736290454599 -0.48121839557945467 0.96001953986329291 -1.0581163563662745 0.31796657570114728 0.94679138871335067 -0.19282927633545976 -1.2658466081875714 0.073120769866598573 0.032175861031985928 -1.3711329541676316;0.43693445072330328 0.60630563995340581 -0.12499097727224584 -0.22547323837759881 1.1148297253471819 -0.030228331540296385 -0.21682640579262416 -0.069230331892850092 0.050780160013585998 -0.77041553934414742 -0.0080180771763624509;-0.49354691050835164 0.31445513351600274 1.1195418722807355 -0.66967274859443127 0.10015892887701937 0.90146053451661246 0.41964305841635885 -0.1510739183890831 -0.031990414622814205 -1.5161553193376429 -0.9958055506443495;-1.3006216035293048 -0.63195069746917476 -1.6964311846927587 0.65300113564534024 1.8530893557435917 0.64245867070598894 0.50685756700388085 -1.4164841823861756 0.33770756988186829 1.4787220559814664 -0.26356105873634506;1.6500966446720724 1.2208943270685979 1.3703558298264127 -0.73725883565267969 -1.1953236682221469 -0.37932674919801473 -0.50367515471183799 0.98508047638753515 -0.20071497305962979 -1.7909899395870297 -0.025621356614192257;0.26725094494510071 1.2224577356648334 0.61445184387739349 0.43621554539496271 0.18869093877026746 -0.3601547129788803 -0.28811109792978679 0.23633030886200404 -0.82207006224205392 -0.11383828281958114 1.1437928132179462;0.80412331627979983 0.81992763133457458 0.67046181573447217 0.3930629216925462 -0.82625316886104794 1.0519496349813204 0.56247695222019378 -0.49193751886086695 -0.81524623876052027 0.2128540400389973 0.032319189179770669;-0.46432714599414032 0.18145790166765113 -0.69248528885373095 -0.037202469599577542 1.186931243855569 0.19083758363842809 0.11826538844011793 -0.24285460617532012 0.48719241760146631 0.99057920820124312 -0.59565607903896545;0.26984223084421333 0.85258794175637298 -0.97474276760533995 -0.14388619218654541 0.30412339853311982 1.5354373187679904 0.74638145281731449 -2.0983357553168389 1.2718826031492851 -1.3701451893737457 -1.4047475119988251];

% Layer 3
b3 = 0.53996676267665533;
LW3_2 = [0.64316953391771836 2.8549299935951473 0.37759057676833152 3.1476096094374117 -0.81041336727295221 -1.7665920521165188 -2.1860476545406717 1.8854808386168131 -0.78107172739202857 -2.9616540333813983 -1.4429450516253042];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
