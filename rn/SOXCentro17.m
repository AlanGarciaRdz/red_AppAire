function [Y,Xf,Af] = SOXCentro17(X,~,~)
%SOXCENTRO17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:29.
% 
% [Y] = SOXCentro17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.9725037533270018;1.3952488873086912;1.7955500074667872;-1.557937342056078;0.86018751155911533;-1.784403278452114;-1.6406906426635721;1.187696061346861;1.2154130669390042;-0.90981723630165867;-0.12527199645923498;-1.2568982920642069;2.703197340125294];
IW1_1 = [-1.2072060764062245 0.58503451063360856 0.088266723969395486 0.090177112607597976 0.052431034895442888 -0.59006370300508226 1.0974463982772549 1.1047956091851887 0.86911163059626317 0.50796192139022522 -0.83699967980158174;-0.3184651328392879 0.048287081487507516 -0.40898744529103997 0.883757043369087 -0.51656178369723804 -0.44786974945469354 -1.4116282399091109 -0.8190356116992501 -0.37216248932843832 0.60659521050259768 -0.032625658936757666;-2.8853993155673829 -0.06375407575737585 -0.79752949301097997 0.76802412511065576 -0.025143408337874644 -0.4542590400301913 -0.21269702012921629 -0.6981661400165533 -0.029626474892590047 0.60646732636903611 -0.71356421605959786;0.85917392862885655 -0.0057372865968949383 0.52687649790879176 0.43202530569350106 0.37096923888113786 -0.47231041514826544 -1.2256391143998355 -0.22556784663924595 0.085057637559593613 -0.22369312800706492 -0.86542170246376393;-0.83365034919796355 -0.079327322944795914 0.91505572071951047 0.1445981744411918 -0.71795073315424396 0.70163527186331653 -0.56411394091842226 -0.204364060238034 -0.19475834064773809 0.81908302670230348 -0.76354091851406158;2.4768388298940569 -0.20572925420878768 -0.075072956309171851 -2.4166315340011613 1.1646283566408056 0.653860023413118 0.8671721720822777 1.4549811316093315 0.95773764640382253 3.0015770081863375 -1.3232300919374715;-0.14573933813396786 0.062769140835513659 -2.0483307116969787 0.52076202095238655 -0.31246944723598841 1.0326896196516104 0.93749700933181168 -0.67452432095973769 0.14396277224395204 -0.22420224534049063 -0.55472937595444405;-0.15848336614595562 -0.074440180009022638 -1.1687034997976091 0.29881379844852091 0.083209795208222012 0.72566004089938918 1.4804290075505306 -0.32717516543237879 0.030952077082497295 0.78583821486508387 0.57978872995527486;0.44637290761054388 -1.3720113010687844 0.9193641195011748 0.14257645810487762 -0.49867765295923883 -0.091242868695078097 0.33041547193908227 -0.18553407500534544 0.18730553544316919 0.17787270755131174 -0.75684655680067769;-0.90571765199258603 0.8918471203875904 -1.4881843134821433 0.52999508776863025 0.61386262662931512 -0.6161747430068365 -1.6784855711357394 0.15776190331740841 -0.39069068074648977 0.3299073485326936 0.7800235574284734;-2.1256890464562863 -0.12487763320467868 0.84898534585323027 -0.5531503692906633 -0.25321074396400678 0.29656132441935251 1.6929765307219184 0.54777236279673747 0.35071837225253044 -1.7235700178247413 -1.5746006083773427;-4.1333839960020589 -0.35882025840435428 0.19555426034864307 0.56173476982920623 0.54855476566397376 -1.3942665056912154 -1.4648224610787073 -0.33683198927974206 -0.36815993644902428 0.53164533779779921 -2.396987005861086;-0.64007622300659395 0.51411867296498315 0.58371554473429665 0.27117105491152171 0.55870071741812088 0.43698026258916067 0.18988588524620273 -0.45974581827791872 0.89804042153826802 0.18633107282581979 -1.5568326659141014];

% Layer 2
b2 = [-1.9794375775422997;-1.33796052616893;-0.94761767605862013;0.80076558525385289;-0.32335303030418766;0.029392549028938258;0.63782568972297571;-0.72028708565508592;0.2134310494747628;-0.56757803273130258;1.2147879107222299;-1.4735994862122039;1.552299764402242];
LW2_1 = [0.42199862823350925 0.094879179650609546 -0.09041315920064949 -0.64931336495064818 -0.18362658107800622 -0.059023442178225222 1.4505212034170925 -1.2429253738722903 1.39321647016922 0.20368106419997767 1.4738541230828834 -1.1699393738860593 0.12018548631358195;0.37581815320668732 0.19553174535231577 -0.028478717392779154 -0.032137904349004077 -0.78770381440175363 -0.095158533224141015 -0.82328532694502032 0.011289467135536496 -0.96092375109817807 0.20760853416448349 -0.22246964287488383 -1.0932886298820255 0.59277592591114314;0.57790486784639727 -0.13196524455107811 -0.76918545933082405 -0.041065549886780392 -0.75346769248282475 -0.10007518854253958 -0.42602490243665997 0.019167496878451887 1.1683221189924018 0.34866118316838002 -1.6214215721913134 -1.3981061886647099 0.88298379390682935;-0.80366906336789123 0.19884808413935343 0.36309953796886585 -0.67835797596594072 -0.53581749682684043 -0.2228604677573775 -0.89280504983968612 -0.72993209095282785 -0.42315826122778305 0.31426864710124364 0.10354257502915383 -0.068053021226788094 0.098267774901097393;0.68110727756042511 -0.00038032050087838734 0.40570219920847755 0.64297312079314117 1.0492777994510527 -0.36718235314868153 -0.54345226897518517 1.3130380477639514 -0.30813994668198602 0.24060213669836311 -0.11926745370939518 1.1828717885611364 0.46009925192033024;-0.090689620626304215 -1.0648821594856617 0.15978456449986889 0.42230669873518656 -0.18945395095707157 -0.041522374678471509 -0.53959548576306948 -0.27599189907074073 0.75292511071685364 0.082376138184355852 -0.13603215398071575 -0.25637654649338226 -0.99945915314081157;-0.91530375475734749 1.0420200213954409 0.27909286405830247 0.59909690785725989 -0.58941456639342849 1.3510242163225548 1.0113898221927184 -0.31696575459760529 -0.11658237342810604 -0.27079042293908701 -0.18258451008145521 -2.3491967974777657 0.04168955124432748;-0.12753598422267379 -0.6710585771339076 -0.10084825476092027 -0.76198561373682872 -0.96101859859359462 0.020562906910245312 1.1899530593060483 -0.92028200807689609 0.019871768196838176 -0.16700925567392552 -0.40408485091492574 0.94197972278920306 -0.29139872197254407;1.1518218604098531 -1.0983861990486925 -0.84037563075121702 1.5544014232767265 -1.3165575565807874 -0.38894707212809848 0.14223752262858239 0.34205078373787073 -0.1909765990803847 0.064035689988294953 -0.20114997863643741 0.57204555436086202 -0.11374729071669754;-0.48997895846771872 -0.50266351260547093 -0.30927599506078118 0.6027880684745649 0.72851919317937652 -0.043916225455149636 1.7698032506095827 -0.29618919588988918 -0.60846747533049717 -0.50168042106833588 0.15807846215456667 -0.23951047892503607 0.88541425530836004;-0.17724854163242632 -0.12189982717740105 -2.585325297257882 0.48766282324509969 -0.90027425060552513 -2.2799792062600353 1.2671679947691707 -0.51708177326462845 -0.18060450388707738 -0.36200886455318687 -0.29183973627054582 -2.1327027767225104 0.57166996460591257;-0.3605915453565684 -0.73949443567741135 -0.21803591986398752 0.035759526254201819 -0.46360946452547913 0.0093949370660061995 0.61555485398535625 0.21188762754748952 -0.62276094790204528 -0.70058735699931329 -0.98081066338625056 -0.3539484051288555 0.25020724073919792;0.67691932414595546 -0.89717622494954907 -0.81165665902186235 0.58151392868644836 -0.73074438049931645 -0.39388259000665515 -0.35996727348048102 -0.32112727592643098 0.75471672620390085 -0.19025649300646819 -1.7339267903632813 -1.2766751110699952 -0.74469943202473809];

% Layer 3
b3 = 0.40689334654720061;
LW3_2 = [-0.13919199121940953 -0.14071642827895819 -0.64080463886457195 -0.20981612242504818 -0.26842684838385189 -0.25486834469405234 2.3282519097475851 0.9462183919039564 1.0578847054399005 -0.11132273889353059 -2.2859915088206666 -0.38228060465592312 0.58461088132381678];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
