function [Y,Xf,Af] = NOXLomaDorada14(X,~,~)
%NOXLOMADORADA14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:24.
% 
% [Y] = NOXLomaDorada14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.00280033604032484;0.0179856115107914;0.0558659217877095];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.5552711336634761;2.8512976622301243;-3.0456373436280391;-2.2996359861110247;0.11457360276824013;-0.0070201456411145956;2.1224050696939134;-0.3704084860901789;-2.8090770457980798;-0.87656689988384573;-0.35109743460474951;-0.20948091061226204;-3.7821307329110239;2.5467043987752245];
IW1_1 = [-1.3329436131765786 -1.7735525174785891 -1.020779114302732 -0.68236600107977041 0.13034210200484786 2.4180808202897781 -1.3685994194040927;-1.6095323104887829 -1.3108823608526743 0.86125496087536013 0.015841762135351649 0.44447238122331817 0.99118006817717785 2.1489657949010694;2.5711601969997906 -0.3632233493451445 0.60181693479607123 -0.69307616746032108 0.25853989062731214 0.067013687586906318 0.27795705711021479;3.0500726168143157 -1.0651331639606789 -0.68956629485131327 0.64738741967248303 0.43645344977301065 0.8079069203760415 1.1052545436533241;-1.315792245721656 -0.80212929379673592 0.40333685848506867 -1.5758796288343135 -0.026023251851447323 0.85289837444787553 2.3564139321129716;-0.058234603393531655 -1.5358270421507456 0.31459199606533955 0.38503491576298332 -0.50514192833332572 0.1322413919231111 0.28707578095871872;-0.39833645166871068 -4.0529379971930704 -0.42104464365678707 -0.38230173233884518 0.22737474791923304 0.41163974230163508 0.056979964181205628;0.9465906904648016 1.4885230632774737 -0.16139600640992485 -1.311732512296834 0.83834623709486344 -0.29568259804347391 -1.0774305209105859;-2.3299584303098468 -1.6445866504671653 -1.0068984425179692 -3.6926919497593533 0.43370540207574632 -0.60380313105204408 -1.5926998119929017;-1.5663982667167602 0.43585641678416287 -0.52570300319939023 0.6765183700715568 0.53869158829022179 -1.3439944901260681 -2.0295253628965337;0.077118294171087842 -1.7499748654599336 -0.46623831801233512 0.44746183072020734 0.53850430747564626 -1.0781113610613211 -0.4915732907037772;-1.7404710673844292 3.5934700792471643 -0.27866892362626638 0.21973495846159558 -0.34017696136060532 0.80871740681040782 -0.7872181993414038;-3.5854791086049143 0.33564030785547999 -0.23402374173593879 1.3530126370698143 0.45907137503167394 -2.2386619246136901 0.8149354798632229;0.078956887731922165 -1.4990667015953147 -0.44570355472649753 -1.7272009198759977 -0.036465479701116743 2.0057083137561258 0.32030920236449195];

% Layer 2
b2 = [1.6377393266282825;1.5259956745975138;-0.47928546631522662;1.9187399861735934;0.42611488510478035;-0.14728976743061431;0.5554680735667703;-0.086950683192990777;-0.53641459822518833;-0.18145290077583492;1.6332451717674565;1.1026890807426952;1.8944127038747636;-3.1387247573112531];
LW2_1 = [0.47856304944070355 -0.31647637977882875 -0.26655093723323553 -0.85625266204708617 -0.68274201351800201 -1.3676421844193827 -0.33101906159211925 0.085644878892457463 -0.31492026369461551 -0.28381846718723175 -0.34486034713540614 -0.14335087393621762 0.96276410614631391 0.27004567428412241;-2.0020722921686391 0.60369153469075054 -0.86729320041702107 -0.0846663460502661 -1.0026502001808073 1.3706496762823943 -0.2008749162138577 0.15405919316572489 0.075848378161540705 -0.37357746346738119 -0.19836996093796486 -0.31803762582767869 -1.3456583385664866 1.0259928119574913;0.048542385924953482 1.8963550399244951 -0.28665538202720792 -0.87052637094823471 -0.10496909582038806 0.48972289297037952 -1.161149489843494 1.0784070276717221 0.97739704571017294 -0.70285676440332256 -0.56533012637873592 0.43699638511704242 1.9687613557155614 0.080879041580266306;1.3386222063848729 -1.2058088032761001 0.15476382697231456 1.1219510485238811 -0.17153653741099262 0.94946065732703078 -2.1170076725623503 0.37384354768685135 -0.79749615057245249 0.08388178696573742 0.87032731869114377 0.4187982525710145 -1.2598211053502162 0.69679671254747944;0.21133990831944358 -0.92871697480016802 -0.12967477191436419 0.43259762466949808 -0.10162523424053259 -0.0072387713353674315 0.73835938238124088 0.27128112301021784 0.78264016042348361 -0.12530947654307834 0.031017007085011331 -0.51731795965899874 0.99551343629730893 -0.14107224319564771;-0.40342802863457528 1.5301843783876588 1.3599432309088635 -1.6324128553354236 1.1841029580831746 -0.81449441573121817 -1.6115341747222187 -1.2227580123418236 -0.97861059752876067 0.12356157696435258 -0.10101993194951633 -1.3740327523451146 -0.83503937591832622 -0.17182104850237345;-0.10877159596425987 -0.62992202796957286 0.26342594250788115 0.64962375575667231 0.83587709451816572 0.071456090436856926 0.5358559816437517 0.36175876454132178 0.25555713640729599 0.23337570316548467 -0.44797355496120084 0.59637046942717264 0.477452711249021 -0.54378918275342703;-0.055227735537945584 1.5461125077017177 -1.7552654950760227 -0.73082483211391291 -0.35527833976614231 -0.51695605934764888 -0.31689295659498595 -0.26049948529763367 -0.0008928198242515728 0.26415506353261065 1.1434571284141364 -0.46839683908979401 1.5444150118801765 -0.80070199500916184;-0.081582855109007923 -0.45920456447187552 1.4008431350978314 0.84431080388134583 0.43884071136880526 0.86706389115344651 0.87639754440703399 -0.73348172114841437 0.65864664170818543 0.49308903219474154 0.24003132540029476 -0.49567285978895215 -0.32948992022856938 -0.2577439476423275;0.0086613761467149442 1.0993116001352445 -0.77698459439567413 -0.53740987359704673 -1.264016558268235 -0.69266279527353192 -0.45203610336290512 -0.38525709273773689 -0.1362030359974348 -0.18682634234133244 0.80775884840321344 -0.63420495196675997 -0.36368049437308553 -0.43073119639170587;0.48781535810458737 0.057609925704345366 0.010712003648133473 -0.88657713846032149 0.58069350811929099 0.3175748008435435 -0.17158459653996461 -0.45298269327428647 -0.85888038135240385 0.17501033733203722 0.13415087462023967 -0.63441276954190018 0.18742501374622006 -0.54583613838928136;0.46508790933726624 0.76999553946015908 -0.093510423563652828 0.094380885878718263 -1.8099924768709452 -0.1591418909438006 -0.6341074791379796 -0.80060398069229699 -0.38737883942739221 -0.47412788768035385 0.46767811304987222 0.81869742562300285 -0.6429391970979883 0.98684144397982465;-0.30421257906153559 -0.91479647728473124 0.13133843098972467 0.6465847254374939 0.45084016026548085 -1.536327317022615 1.9160932335710541 -1.0410535188922119 0.29009156249182477 -0.27558277232053302 0.31653400987244129 -0.35565417626580398 -0.39747756607870316 -2.3902209894515027;0.010195128417242029 1.5705463842430538 -0.76050673499480492 -0.41686548195919448 -2.1754799699155809 0.28791235545942206 -0.63046468862817773 0.66957067542744664 0.46063722187693612 -0.52539176237358776 -0.50430609601539744 -1.612779152302209 0.20910164391624705 -1.1316651656441963];

% Layer 3
b3 = -0.15180750445995711;
LW3_2 = [-1.0722205500988919 0.54039455296757832 -0.57416957146893544 -0.53052559897903828 0.6640270960611786 0.32932668468641813 1.5807804533496035 -0.26011742146531741 -1.0602443499053369 0.8434784872131772 1.0893500048872067 1.0386591741211686 -0.80505690012622477 2.0767682456168286];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
