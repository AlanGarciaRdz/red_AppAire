function [Y,Xf,Af] = SOXTlaquepaque6(X,~,~)
%SOXTLAQUEPAQUE6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:55.
% 
% [Y] = SOXTlaquepaque6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;3.03490136570561;14.7058823529412;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;35.0877192982456;117.647058823529;27.7777777777778;5.12820512820513];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.2521871039689712;-0.55188913313656196;1.050448543523788;-1.4362467818709157;-0.2431646506822131;0.72040233849916147;-1.6690389671613794;-1.7508233764353218;5.3774176276688479;-0.55351294751972147;-0.64169471263460165;1.4985437404655484;-1.2469848302326112];
IW1_1 = [1.2744276124593137 3.1010484844890636 -2.3750930013300371 1.74270913583969 -0.6147275287479631 1.7823608927709687 -0.15122226419641172 -0.037802380775291848 0.77444623155793368 0.31481572681026337 -0.56707435844400478 0.48292704283362098 0.078521082577205095 0.34771444505521121 0.56073450176294304;0.94509776914516108 0.72337580699738258 0.12811678959506451 -0.55581310365625292 -0.90374168987996339 0.10681246938978364 0.49844310928471314 0.18383561320209657 0.023402107066338718 0.010781707755515686 0.4345020823370872 -1.2081114443065153 0.99184087508065366 0.74106524782647754 -0.73385414699213825;-0.6955222638505425 -0.94425331314693861 1.6843850490538153 -0.15012368376957813 1.3381597897963271 -0.21917184821098754 -0.1483720900318751 0.22952821173364601 0.76939784898001629 0.092929985347221605 -0.25156558013453367 -1.7511307187493168 -0.86975754393253457 0.387101671185208 0.88692654285802752;1.0473335226739504 -1.9445706896698161 -0.0010677400778070154 1.0383848386812289 0.39625058113808415 -1.1152937338637623 -0.50075185988207027 0.78472474531656589 -0.44640684080637505 -0.043898223253761512 -0.18544234311908553 -0.75616592421109952 -0.40418322071939367 -0.26778257084430024 -0.57861445838737624;0.46886281958908077 -1.0606167161219637 -0.88949692695894989 0.012509914175546089 -1.0300171091898425 0.14954444249321541 1.1135275182827673 0.43783024932708448 0.23453100534764482 -0.37963540947726399 -0.38942238920802519 0.98395981806497368 0.17704148778170134 -1.5441449899650772 -0.54454060100549784;-1.4357814798819044 -0.97518139841188944 0.72091471643777805 -0.3400352505048061 0.57742245026038996 -0.36298935172831281 -0.97448870356191941 0.8338027738032856 -2.1537727471291546 -0.26171732746663867 0.17467075584116379 -1.1729682634709901 0.45020995014542564 -1.665242704042406 -0.33435822373288165;0.77844934988781622 -0.38099250568698861 -0.27202600684907186 1.2089092145324076 0.4531128067766188 2.0101594244883056 -0.28257408668830508 -0.26492909630559025 -1.1899299909869248 0.12375990844364376 -0.30191027683634358 -1.4520317229266175 -0.48479771805578553 -1.8857585286660044 0.0038571948730151406;-0.8712518934795852 -0.94966510606462529 0.01394864469138779 -1.4432962084714971 -0.90748495643508587 0.036936176879565283 1.0448013695841356 0.38008872242451441 0.74756897087054097 -0.18415997058499564 0.69476312496947445 0.10288644989864242 0.75023257984615732 0.75426368857769599 -1.5795194851732;0.31999825878622185 0.26838443522745087 -0.082358521204297305 0.38341858513973592 0.12777367151428451 0.33584799967652101 -0.15680599121500635 0.0019447323831874481 -0.13925187471947104 0.066233215289800848 -0.11206652072982116 3.7693600423106428 -0.026494085391723252 -0.15918867281061252 0.11552765457459846;0.29293866025259158 -0.49437049500317565 -0.73477362891953168 -0.29771939678860976 0.13853260305456699 0.086411253178997366 -1.2906472905084427 -1.1185386690434231 0.73866380078637783 -0.22707289341665221 -0.70542609950561952 1.9077459588742292 1.5821763147110619 0.9813843338049808 0.13366460679592335;-0.26298178342725353 -0.88003244746779707 -0.26975969251152165 0.29265078294053992 0.26546282133273807 -0.60445741227687211 -0.16059733344327826 -0.090677163728359489 -0.45072925650442414 -0.077969473675385981 -0.18378110111571805 1.3114785930317259 -0.3955780422093903 -0.66983959852011998 0.49511160341525928;0.25870751577732176 -1.4067570436206303 1.3646639702497807 -0.55353645300176402 1.3106829786755245 -0.86729342818923549 0.66614597858915048 -2.3919058200030818 -1.595602810166727 -1.4574839251625089 -0.67620661418185057 3.0394924961681622 0.1153823138292718 -4.4257137016526347 0.47156350111354295;-1.0210148436372126 0.42455755249902871 0.24373542462281936 -0.62112954447386703 -0.46550117164243932 -0.15015508112512754 1.1303580919296425 0.00071986185764815608 1.7633067511028138 0.0081733349313988096 -0.59950243589647045 1.9671696966717165 0.0044154244867923714 1.063244230811015 0.27533802019613351];

% Layer 2
b2 = [-1.9585556680771079;1.6148832243057738;1.3386415433323429;-1.0606350535739775;0.69007003912498233;-0.16400222653278967;0.12748865448453423;-0.69950451524430279;-0.49074714233933975;2.1949722637422866;2.3188601840483245;-1.2788741452227073;-3.3971561507262678];
LW2_1 = [-0.038431859928177874 0.11162848527835514 -1.0184953619839305 0.18175261187032171 -0.67489580727011178 -0.43355515081355084 -0.16152807206303108 0.82744543333990539 -0.41807368697308156 0.019208374505303598 1.6166514339375606 0.59620414492724372 -0.67641805129464638;0.030802210800572674 0.50458020533397818 1.5091050344151618 -1.1055373727781947 1.2305947617787534 0.037489751133187824 0.15351697783528329 0.55801321963224382 0.2493182533233014 0.18927473461080482 -0.025884499056077745 0.0026576782432436163 -0.28513558543683143;-0.32993684342439328 0.18062727853689975 -0.34322719209323599 0.26585966728933325 0.38462825809922563 -0.042487856780504062 1.657511041478545 -0.35120176531337299 1.0992693240023081 -0.13987103342851209 0.014148668414613985 0.17775407622590131 -0.57862396442091235;-0.139842389350817 -1.4289308239541572 -1.4582514317911293 1.0807642915148548 -0.25493345863727213 -0.58957185167141146 -0.45014277271302089 -0.51405500183513342 0.44091713062979465 0.084970848825544593 -1.4935511547174722 -0.23840811025565375 -0.74221478858487966;-0.56992334016122026 -0.15122711160336511 -0.47025721345340898 0.55088046164485871 0.48159653961164794 -1.767400267013234 -0.0368966810591492 0.46779360660199309 0.34865355491516037 0.38461365690343069 0.67827300924245626 -0.59846008143057949 -0.73454702846553221;0.33177905147734421 0.1720234345027358 -0.40103529591285347 -0.67460025741524698 0.25484536106374978 -1.0777703000101049 0.53716558074766629 0.14572475283158307 -0.28409459417020499 0.26208622096992534 -0.36112538724190663 0.048328199906686783 -0.75627354267888303;-0.19581901298839416 -0.92809757953732142 -0.68338569427748874 -0.61896444580922239 0.54923975928410207 -1.0680080865078656 -0.14589225304865694 0.39173381590425627 0.22757460187979681 -0.51468533966560448 -0.23280561710569186 0.30659178990791602 0.20869484193149468;-0.051860921895202416 0.32112098542085288 0.37813537419745535 -0.47520015762524953 0.23102801354113195 0.123088939877115 0.043029738030269535 0.26302011507526746 1.0252973291896754 -0.16918384195039377 0.43335362893694396 0.083697303397709255 -0.68514117134421859;0.34815040705460965 0.080369569979050148 0.38128331824350487 0.047138698785645035 -0.49708830550517802 0.89993930235534947 -0.22096092161093192 -0.45782139473153438 0.34228905011262295 -0.36820159037690575 0.048966446030519369 0.85397970480801899 -0.73467516823225365;-0.046792394359172769 -0.42226780780147483 0.047843822458825562 -0.49356491011838299 0.88469825012798831 -0.32752867179899725 -0.22276460469254009 -1.3378832101643421 -1.4117673980386711 -0.450837527237961 -1.8228197920933846 0.64405172273618549 -0.27891205058738755;2.1562211411093246 -2.6821558460718791 1.5278679516547626 -2.3541382247902307 1.0475939022673204 1.4766438391479828 3.5615262627939939 2.3589154482127754 0.48622690775762545 -3.3202727719283973 0.9376348309391519 0.52553217972951294 -1.0567673816228351;-0.26367225984324855 0.33678426539881817 -1.0128334306712568 0.19228299275948468 -0.29252845805487776 -0.6007775205380812 -0.52947793964203749 -0.18217803314401318 0.85246926327229566 -0.0043318343634274475 1.313704880688443 0.028202086629151815 0.23681399398579123;-1.3812185517958349 -1.1779996469861616 -1.6682845526135042 -1.1677139186441006 2.6046009566305379 -0.91053778492050763 -0.70065243809814703 -1.1797718898910632 0.13007411510529063 -0.13720064997389242 -0.9600801576328245 -3.0976171714712843 1.3276995979450774];

% Layer 3
b3 = 0.22571855518570122;
LW3_2 = [1.6808221859669001 -1.1388245860498873 -0.23567882710241939 0.27356036490130686 0.13811473958104054 0.059901276280180542 -0.10304145877603871 2.1830896352988374 0.99486047618771067 2.7148881552901365 -1.5282911917970552 -0.5958818705216653 2.4746323779738426];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
