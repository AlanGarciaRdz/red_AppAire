function [Y,Xf,Af] = PM10Atemajac6(X,~,~)
%PM10ATEMAJAC6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:19:56.
% 
% [Y] = PM10Atemajac6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00968992248062015;166.666666666667;0.0561797752808989;0.00614628149969269];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.40438425499759;2.8379538601586716;6.2557250108962767;0.85766612944699061;0.31803465650462637;-0.36235629392291374;0.22856529395992919;-0.42517343895411258;-1.0438660070047532;12.153336533889812;1.5801006252404826;-1.204153528253386;-2.9085338037598696;-1.3303811420362419];
IW1_1 = [-0.3692493535353672 -2.9584824233376597 -1.4704182391077851 -0.79287144151852851 -2.4484234896875385 0.82851250379566677;-2.3107880341049833 -0.70746002880479819 -3.0224471223436282 1.8552309280799375 1.0107848274584983 -0.87865270073740309;-3.5687340252365201 -1.9936903788608153 5.017549303286394 -0.8394006502267497 2.1073327136816977 1.1059411215403498;-1.0887176699698504 4.6574960774306771 1.3730133862247587 -0.045037898162205561 -1.5673865925375792 -0.24152641283759183;-2.0398680888293863 0.48132302714626735 -2.6210940398047446 0.96631991934576222 3.1399067251536144 -0.024728885072976839;0.6348600477116304 1.0896768069937059 -0.031347041588481221 -0.52955147010563253 1.126496260868791 -0.085088218329490151;0.868028049494181 0.57249244574181779 -1.3844995401574594 0.8237428450462102 -1.8965429930852797 -1.0529900402751824;0.63784084236401528 -2.3331007585100796 -0.03928320319167157 0.70357959193453723 -1.3789875408317416 -0.72127705423314459;-0.64989132939939942 -1.4221349660230109 0.064360407578886392 0.0017249378913977015 1.0290272047469853 -0.083993797143160895;-0.35445618950656704 -1.4279282611615582 12.923188205956901 0.048038861922344495 0.85037340143861539 -0.17363838965994574;-0.40968785774017835 -3.0119642678355349 -0.078794744730205812 -0.84906629504089925 -1.0880430460941675 -0.2079634404897947;-1.3960108686798929 4.9483615722789596 -0.50710387819375258 -0.15854133992490077 -1.962761080832262 -0.34949953732984917;-0.94841055019043363 -0.25397751201048202 2.138449583862883 -0.47374879981247259 0.8002189787813746 -0.83636366186175548;-0.071837729357375285 -1.1835856505376727 0.028311529054002034 -0.47484776982060478 1.0044377449979478 0.26745991960498811];

% Layer 2
b2 = [2.2458281579150001;-1.7835307256967878;2.0520659975436986;-0.85433880062619061;2.1837291761436539;3.4815795341094065;1.1449105650106;-1.8713086717893423;-1.5647043251265302;-2.7498484162152508;-2.4296908409715159;-2.6231730144014724;-0.99893262968973884;-2.9168570637099163];
LW2_1 = [-0.23654721244249818 0.93307904278640907 -0.72869008282208192 1.7852708916153164 -0.74840191411990709 -1.4461582574955627 0.50737393629050298 -0.95347816155287868 -0.064907895689762435 0.3558329808117347 0.76945102059243808 -0.61689008139786883 1.4176432507794652 3.6893243885331497;1.1863589647430743 1.9270926009971741 0.059259172021379702 1.4798476790705843 1.369815281020154 -0.93128377030009535 0.052227789220770676 -0.76676539298656599 7.0454122488409352 0.045055751530513881 -2.109034071084523 2.1248170457365081 2.9491664496653902 -0.74917343991996876;-1.5429254103003538 2.6145424731911433 1.2587555687450616 0.93615738560213302 1.0574540778977621 -1.4396252003517986 -2.7489336573792733 2.5242949149922946 -2.9199494234498053 -3.9063833827033303 8.3037960804708231 9.119315854031953 -1.2706066003754886 -2.1975709842002979;-2.9024928830650607 2.471887108269101 -0.11016294018267622 -0.89313087755088405 -2.1523514191634572 -0.94197442597360503 0.21603471073912586 -0.092309933353819318 1.2140627658600995 -0.60526211422214771 3.8762956410894409 -1.0265994764112965 1.9630436119715731 -0.10529999694126638;0.062186888713396983 -3.2166915365100706 -1.4269923475935393 -2.8759446272663154 -0.44118385166097401 -1.3552825031689282 2.6426530836590811 -2.1037533746231714 2.3792378972657615 -0.94126932385716067 -0.98638224532010488 -1.0843518924489646 -1.3722076683414173 2.9182980069117055;-2.9089580809537408 -3.3021872909212973 0.67836378740921799 1.4654528628533525 2.6162005836856044 -1.0908289274081211 -0.82058918655684709 1.8668068884525262 -5.1314817447536072 -1.6789256944392792 0.57537303968917763 -0.88660879516845104 -3.7424092425188866 3.6576052422711904;0.56694932674281195 2.7261648875413425 -0.080392693377760727 2.9256449541687988 -3.3258490061520773 -4.1855503508828136 0.49257924764164224 -2.8570324378719576 2.9854756633580051 0.4899415450061097 -2.7532632642756041 -1.5819255953576399 -1.9320758615778393 4.08503372952757;3.3004923026198947 -1.9466383110166554 -2.541678987267205 -0.22631088891072013 -0.20379255988946551 0.0067401818371706484 -1.5388381100983595 -1.2551975705709615 1.7390379640375442 0.62432486566890355 1.9178559247301468 -1.001788944010404 2.3212634749654177 -3.9636984655652556;2.8840179406689757 -1.8515925917123863 0.87910296844433988 -2.105640191887499 0.97191304527859301 2.049093342288737 -0.85056868571780331 1.6169085140973785 -0.25554972796653674 -0.31859806001772445 -1.6203624009508644 1.1574698914722754 0.16994969240274771 -4.1173213018136661;3.4039848130634418 -2.4331890723191427 -2.6690931036104732 -0.4214027615574496 -0.20244625369166325 0.023923958363794344 -1.7956086603259092 -1.2580114688170194 1.7061968514932433 0.65561625055467287 2.0601813147264232 -0.80225771098901733 1.3193489733484585 -4.4157973773237185;-5.1851694854018699 -0.25636025007394925 -1.3741016513449176 2.4837072235591595 0.45227091159754296 -2.9362313345863194 2.9135591326383059 -2.3001719328350867 -5.2649093124584834 0.40885106700090107 2.1989294365963854 -3.3278951568890736 1.4234231022614985 3.0715100731591125;-0.90581873820865022 4.9838940135123861 0.11356774888841401 -1.2752435063583798 -2.8096524874212938 1.3977368491795787 -0.85805815270633656 -0.35081532560163015 5.4776158638668013 2.0069563990022887 0.83213956165952008 2.6937177228825049 2.1060917419831715 -2.720693455247813;-0.13352640653297904 -2.9348012731999615 0.11576690057825689 -1.6438189073457037 2.6702239114460893 0.029514555612013289 -0.43180035050559595 -0.72017123653258786 -4.120152972145056 3.6784621632959897 -0.37191373276253326 1.1471169122438709 -0.058868005421451187 -1.0965384858718337;-7.256317814664019 -4.8293863200091751 -0.86676642399042603 1.3991271004258388 5.5296982103227199 -4.4156362737629324 1.3513046585286204 -1.4930048549716661 -0.25053425731791057 3.3940735519844862 0.73204099420948976 -1.9016946330815636 1.7627865544327839 0.48030631012166097];

% Layer 3
b3 = -0.48075036318590497;
LW3_2 = [0.75453627293854597 -0.4026197026814588 -0.16355154536345337 0.16252988025640366 -0.090871771888545227 0.3108964505136827 0.13375846963514981 1.4652430827806748 0.82629962845917004 -1.4007047293023782 0.44492226974254956 0.2979714134849149 0.18269751140461102 0.20898716098459869];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00968992248062015;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
