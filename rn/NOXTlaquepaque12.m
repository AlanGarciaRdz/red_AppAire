function [Y,Xf,Af] = NOXTlaquepaque12(X,~,~)
%NOXTLAQUEPAQUE12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:16:19.
% 
% [Y] = NOXTlaquepaque12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.03490136570561;19.6078431372549;0.0212539851222104;0.0523560209424084;0.00632111251580278;0.294117647058824];
x1_step1_ymin = -1;

% Layer 1
b1 = [4.1019061541983817;-1.7073204632775452;-1.3188178133504591;3.6285336751829829;-0.90314287378322622;0.92998766953588519;0.15926494201105751;-0.26519686195393288;-0.6769688083329235;0.49151660938530345;-0.26354811747028833;-3.0471337911056029;4.882175537556277;1.8405352463730462];
IW1_1 = [-0.44411551761821272 -5.747553358790948 0.35275786626771621 -0.50168017472709114 0.2980903164070734 0.60423637381690665 0.13337749064823334 -0.084296930811818868;0.035598908319396549 -5.5560940971379678 0.51199585637801215 -0.53776528182523087 -0.4830887974894113 1.9613142397304328 -0.29176130448228277 -0.29920817940037087;-0.51009373088479959 -4.4243276396237556 -1.0056558453452551 0.28428469733283762 -0.010658992402325795 3.3969857225530946 -0.12865444928712294 -0.79579510897273975;-0.36235257993861297 0.18770788564677865 1.7059783943302065 -0.047873012819185067 2.4711541837906577 -0.69435860996195287 -0.025829381673002576 1.0939888517716967;1.4380494449530115 0.083847702670784091 -1.8462738917971775 0.5637281616100267 1.9270193273854805 2.5732708189943279 0.40498245163532998 0.67370726381428603;4.4487609633591054 1.1276326619253756 1.6654084906697002 -3.2292528427369205 -1.033390410709236 0.12066037450467539 -2.4359867914435287 -1.1334325855781626;-0.86644133235675491 -0.26006072699159483 -1.1099444339793911 -0.35378227647825511 0.83286643984738296 -0.25140760497329739 -0.51526496648698061 0.27000956280042737;-0.5542855207807118 1.4593989246395818 -0.017631921016149528 1.0732233169498746 -0.48964195397851368 -3.5714278373191437 0.3960532054146455 -0.22755936172069488;-0.16646006997287555 1.8194920680629501 1.1983515029930387 0.20111113932831867 0.013657073998990289 -0.035883724754076349 0.56825868419600689 -0.32397845405880948;-1.7485011385241005 -1.7280508198220033 -0.55466170663778591 -0.36177636091178134 -1.4346601189968424 -0.9127435242293056 -0.43547904265089016 -0.13549232184960711;-0.17560032848839238 -2.2828153120203831 -0.58537172243681368 0.30028232519077697 -0.44708858817635905 -0.17340406633502067 -0.3605452425625601 -0.41796536184789879;-3.3294536485946011 -0.24177219617636653 -2.583347600575852 2.4302460193013937 0.59861548498504058 -0.97517413833931976 -0.51861708014884378 -2.5241986503454994;3.3364966534220009 1.2334178709359205 -0.93376224633191351 2.14517533178083 0.92230646467542343 -1.3579905763033697 -0.17508915698558924 0.49903460736708227;0.73348446953769419 0.011783771586671175 -0.94036598687431872 -0.30202761441926862 0.53471118979963483 0.62557144866230463 -1.1675482457172661 -0.60184105146430666];

% Layer 2
b2 = [-2.8079215576729344;-1.5112291001186953;-0.036928985096137665;-1.6517581221238806;-0.55008968220789156;-0.84157313718211091;-0.81089040528298451;-0.78904760101928439;2.480607955515219;-1.4032380000781279;0.92010979247804459;3.6625134642394257;-2.4771190279460802;2.7105997958481427];
LW2_1 = [-0.11038842677209625 -0.29469135725333356 0.16923246788687601 -0.45040699705206544 0.057040704332079008 0.81781334391390192 -0.8028993880348938 0.30311330631398736 -1.4452339411917099 0.12826506389051154 0.35618076815761157 0.33740513008312495 0.88243016939017271 -0.20602488411330824;-0.6752735399901082 -1.2452520416582689 0.50311184246091956 0.2771606991923819 0.33437441463133249 -0.21291167793733207 -0.94494183810446197 0.66675617574705881 -1.4029277731129708 0.22697207599535493 -1.7812592881257292 -0.27155537181050504 1.3551638129433248 -0.30613169933599899;1.10354209584612 1.123711130675604 -0.086553791416579262 -0.61184002774334845 0.19194958461517847 0.074264338764243751 -0.086179765948764794 0.6335857735153968 -1.1419626265081468 -0.61496732332523552 -0.79809886122275209 0.27848910395158172 1.1136498882218411 -0.33224458547253516;0.3536309740656341 -0.32877978754062842 0.38659424023908295 0.082362305370377448 -0.34935843878692108 -0.46538960795307677 1.5324063073506915 -0.89159126057994609 -0.16580299102457116 0.33698873082361352 -0.84755699772062276 -0.27891949072081257 -1.4772950972729686 -1.0107746888849554;-1.7058563388307371 1.20639116575829 -0.46406118416573972 0.43060234632329542 0.043398001677681097 0.32255267245344782 -0.492701181643458 0.33383961049169758 -0.9746166025508135 0.91652874513740046 0.96489205730149208 -0.29046810681795948 -0.033893248188331823 0.29675184562957829;-0.20599970729087971 -1.0967230743351351 0.61671489280819269 0.23628427691446124 0.57133744319087565 -0.0121216174814547 -1.2758117563258986 0.96004110626904382 -0.93430825129791795 0.57001759528200202 -1.7644210680702757 -0.15851818043638588 1.3198965057308107 -0.82063932364892767;-1.1517631979754488 -3.4796359314848226 -1.1947753456677563 1.1395201813637275 0.029657985180366421 -0.49056271588165729 -2.6714784536867122 -1.8201353460546428 1.9294566051037423 1.5248495604625065 3.0443703873763828 0.19711096099199921 0.18227315419911461 -2.3834315132982105;1.2443354989428466 -0.49378371612308453 0.78988518539966224 -0.79868114048877814 0.09107352838861027 -0.12173493446262905 -0.55664065411857644 0.39464781275444549 -1.9719361581381012 -0.25577029578697891 -2.4545045831575427 0.5506566055825014 0.40771216900078 -0.0011089362681674202;1.2353924857493053 3.6501236003598776 1.1799099803968358 -1.2174783904259547 -0.18011920619789581 0.51388649235668271 2.8715653940595196 1.7075773512965491 -1.7873040150856438 -1.8304872235027696 -3.081247392631743 0.01556481806427016 0.39351534978783581 0.24187259040872355;0.23521962147914288 0.84148485070041756 0.67306777265770035 -0.41138762556012176 -0.36012261305230625 -0.53118900509970135 0.061282274705045686 0.75862250304947743 -1.2763393945102541 -0.24326864277899249 -0.57441655011676829 0.44592695639247093 -0.29999057238801785 -1.0067170202035023;-0.18123892632239622 0.61022783976252781 -0.26566288649714082 -0.30858488841835169 0.34502994340078041 0.34098391357625535 -0.77800006415650613 0.78384317613971866 -0.15632400078895278 -0.2668796673079839 0.2786214634239359 0.23338534666502131 1.2715523156343178 0.78610979662126157;0.91254795760466934 0.015761946851866292 0.54662862902491849 0.87521561324430797 1.2683050034135572 -0.23114921822153142 1.424115961391871 1.316704130945439 -1.6547907476865675 -1.2465089796510134 -1.25871026357086 -1.495080251283696 -1.1127075513521032 1.3976076230988719;-1.683782618722879 -2.1977403483097699 -0.065781830660006868 0.3459034565727529 -3.0050311464539576 -1.7744166812375533 0.23793636351461853 -2.650322136426889 0.89768692780011516 -1.2292705446046035 -0.085341154743922926 2.1761758560907345 0.35022253847277551 -1.7692236964308972;1.1734622802398429 1.0734641177367648 0.26883511717924607 -0.32786434098210665 0.12718448494430751 -0.21317711134010076 -0.70446408162737939 0.68341708634162368 -1.6389930328150573 -0.26207832705219675 -1.4354169409991813 0.16974870447581855 -0.90776906826286485 -0.56377797031416654];

% Layer 3
b3 = 0.057304184791121801;
LW3_2 = [0.21080045465430408 0.62696994097766234 -0.8233809624207149 1.1833806462721284 -0.25036114191996128 -0.56472396551051374 -2.5502402522825185 -0.29976912540073108 -2.4762223976487752 0.13141794979124047 2.0275813303875179 -1.6548762180733698 0.16113558144669796 1.094985269888227];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
