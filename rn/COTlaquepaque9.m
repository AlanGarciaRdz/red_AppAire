function [Y,Xf,Af] = COTlaquepaque9(X,~,~)
%COTLAQUEPAQUE9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:13.
% 
% [Y] = COTlaquepaque9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.0047148907692911;-1.5642235326791176;-0.036020602053646295;-0.39908782437736073;0.063446079770217434;1.5976118582582881;-0.30905845284384476;0.45970477788863423;-0.98320828259422677;-0.43385504043555306;0.64690459288380697;-3.3022871975090586;-2.1514718489620215;2.2923702069141543];
IW1_1 = [-0.59373523249656435 -0.20667827937287572 1.243107245668496 -0.014206305003654789 1.2339951495877248 0.82238328545502903 -1.1562347882008595 -0.67373080097200488 0.11432253812554768 0.194533656329169;0.34588812998241586 1.1580475110867279 -0.050538121496962685 0.31566812298864677 -0.15622546614041835 -0.86440647061353071 -0.43623880078028154 -0.0037556270339523818 -0.056749642037318353 0.30372618616900643;-1.6126435675491051 1.2330731327995246 -0.3094101656574571 0.030386830096904204 -0.10754103335427261 -0.80252403034046571 -0.50259450939300365 0.32754202356146045 0.25514636535849622 1.8006985905645341;-0.26532982207645345 1.7859409535347865 -0.3016828372116907 0.22012415016379888 0.2564156833640589 0.72445651938201094 -0.15692432793580302 -0.11810117098378563 0.25965344605914181 -0.60596133514292327;0.34567468197303575 -1.1760747993583498 0.23624699636030666 -0.023043214046619496 -0.08775615338262352 0.24332340635238253 -0.63760755862271823 -0.25321862264677558 -0.15436611298426664 0.98124923819982457;-0.59733144973348606 -0.06421882127311726 -0.028234901840409801 -0.2958556537290935 -0.24456014026754985 1.1971113194910443 0.056499652939896595 0.06079088776631536 -0.050434300682034736 1.583861134802844;0.83248378351298646 0.90251154410323753 -0.23282352426378944 0.46631804803087001 0.91111492708056008 -1.2000573851817262 0.049285050667679645 0.14739249635486196 -0.094217472139210279 -0.60215706579440109;-0.32063850205639738 -0.44455068256400965 -0.15040423142977435 -0.088730349570594294 0.90096953802804192 -0.79204978300595319 0.86968431859998441 -0.03724148963743492 0.155841238041632 1.7944287268956591;0.16861534155737112 -0.71588161944737627 -0.91041348924351506 0.59519447792287028 -1.0719462936796662 -0.27655430785691187 -0.071932246880488229 0.11685103707866376 -0.60172545702834679 -0.86362072075570451;-0.65606648801054135 -2.5542331993321996 -0.73984951383449438 -0.2908932173287489 0.58105160908886422 0.52745746315838382 0.65508702208591629 -0.27074567243664638 0.24751042932168199 0.73342195014230571;-0.069653649354319822 0.20569413377376344 -0.0087493727662610148 -0.40758345799661 0.27164911283480458 1.183797347071643 1.5212489220298961 0.48473676644354369 -0.24550338125711416 -0.98568942153797312;0.032828736618593111 1.1304693659731224 -0.089377939981870047 -0.1816817486739751 -0.37547133281665701 0.068678070023981103 0.21349343502586185 -0.02884159723463638 -0.15534430605813404 -1.9133096172393806;-1.8642289620716406 0.4957063931613071 0.16954142020162222 -0.20939283124760907 -0.88726313769074194 0.9200523603898032 -0.025472179450652079 -0.67107366060488338 0.2333841749929923 0.14888446447933609;0.04261102969488606 2.5986409382936109 -0.066911984811720532 -0.20272000596147588 -0.73530114518114531 -0.15858064621422827 0.6218865375103787 0.32254017448635169 0.076050233860439145 0.39376459890536153];

% Layer 2
b2 = [-1.594357839850439;3.347134481219677;0.93899334126597267;-1.1901277919526096;0.40845873897194501;-0.50331569811451937;-0.32188330140600002;0.43710617697347776;0.28313550660103881;-0.17476203600399545;-1.2175419091493549;-1.3065034272000278;1.473507190669586;-1.833845458845117];
LW2_1 = [-0.38331729281330051 0.083906196151223203 -1.1124022951583874 0.29322965691519881 1.5154263351033022 1.2482584260801948 0.64661767721620456 -0.77711810759581357 0.76729197203312438 0.023531684641173205 0.92401687614449057 0.78324681177341293 0.56738388484364255 -0.77727259098922008;-0.40996960089599999 -1.1707934367494381 0.13381505392233772 0.11374678205810661 2.677847851001832 2.5981270090487407 1.1561636865168814 2.0947220697204405 0.52139342596563565 -1.2298694963947496 -1.2293793663235677 0.79432991762750271 -1.1714489227271192 1.7389429064387545;-1.3855436283934037 0.26154127723392884 0.15083719550539335 0.45561997246878977 -0.21756874219965552 -0.040541442939750191 0.26325993099942985 0.76432236541447718 -0.018082834054755585 0.014110055037976396 0.115048647301685 0.44037707596608344 0.83680934805258689 -1.211271271834705;-0.81205221016689044 -0.74108382201878353 -0.26036805639789046 -1.3264005623703368 0.91196734994191075 -0.26833976235073337 0.565959165838397 0.54484037889379311 0.13130715806765636 -0.6830437169157102 -0.14034701283752313 0.61018472006592339 -0.025892128456006011 0.34443810220502352;-0.30611665071217858 -0.2956095385271113 -0.54445438089269382 -0.44695226479663286 -0.49734403388911896 0.33891444682399324 0.15642709259201146 -0.65290755884363116 -0.53918476280645122 0.62186251125384284 -0.44677898570504831 0.46950121575636827 -0.27378050956477851 -1.0450947597940912;-0.32998744192538482 0.3209414342625494 -0.15150168403437458 -0.32971253215102492 -1.591730916968314 0.27985228321317956 -0.57287876011456995 0.10008106583047503 -0.13797752963559329 -0.21596328680756838 -0.55574158340395663 -1.2408842801956386 -0.085933274333499857 -0.71378502306918046;0.59008349082668066 -0.3752232261124484 0.35791235446859559 1.0093704511425756 0.33611311920299725 -0.012964203765203923 -0.28147685907722231 -0.32846771622942145 0.014435671383595333 0.89190389833357309 0.93426426141646179 -0.53437180463981115 0.19130169332142952 0.18495227618083607;0.50885672887900746 -0.41631313783938279 0.30325260841557788 0.056134588049742765 2.002015531104429 -0.85268530383080099 0.43510948025629376 -0.10921832671973263 0.30708031899959648 0.56869858538038476 0.39863956527207184 1.1513096823962472 -0.535782076973083 0.60684919424271766;-0.48358339212115448 0.68208086389615252 -0.47695343385500105 0.11404256478463427 -2.0617072448133409 1.2104524113701156 -0.092500415710945083 0.035220715858279884 -0.47277864901365257 -0.81547312416527284 -0.4593930825050746 -0.87367483478927421 1.5398348979807039 0.0061001350069405189;-0.016949844912091738 1.843422940444754 -0.26056605543067207 1.2561278521020824 -0.35593888779548821 1.2173375331636658 1.4261222109265146 -0.26455611326880335 -0.41852124440999461 2.1683333084379242 0.50780534191110904 1.191616653697696 0.77400291290480305 0.18148811956843436;-0.79091824636595109 -0.50296172869587641 -0.3624301062125832 -0.71148831279687186 -0.016294936672672976 0.16009347573513288 0.012639297750765381 0.5731948751995114 0.16469009252581682 -0.80486079189209736 0.2981541163815063 -0.030618612729324427 0.98798686474608433 0.17852406532712614;0.20912432246609491 0.028383099163618176 0.72897014241880986 1.6401128265601514 -0.45394439545464971 -1.0186265125658307 -0.24052214290888141 0.34993295863384266 -0.4864550604868576 -0.94738949991684995 -1.1300114083185588 -0.38586967113512366 0.47449743857103344 -0.26075469377974803;1.2813455782811547 0.30191221384082534 -1.2794255569818918 0.30994891221902754 0.58762663716914598 -0.3552100648263104 1.6813685353903254 0.51439625762134156 -0.99522534214652203 -1.2167192362695693 -1.9156293687084551 -0.22449881225027865 -0.92267144561934489 1.9742803684623933;-0.1916117531793117 0.37839393318324516 -0.024802801934802596 1.2917529895344695 0.042032992538973808 -0.036649526510919288 -1.0853240058591456 -0.99567821376043841 -0.52002907710328095 -0.60626702145618483 0.0074951267806277529 1.907581425811492 -0.21343902570935466 -0.2832770744645674];

% Layer 3
b3 = -0.55509372680332036;
LW3_2 = [1.7209268721773512 2.0611292863001744 0.23333398602680527 0.8219836875216282 -0.081525385875299713 1.050381247242919 0.4154341988436121 1.6756157205794406 1.5037235826282243 2.2157740009380857 -0.90130580471065858 -0.25794927231862025 -0.44277911773902978 -1.4783187259846449];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
