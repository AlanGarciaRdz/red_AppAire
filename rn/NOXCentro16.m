function [Y,Xf,Af] = NOXCentro16(X,~,~)
%NOXCENTRO16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:21.
% 
% [Y] = NOXCentro16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [-4.6168305146107862;-2.7511269339982585;2.3891119626996904;-1.2406102200441422;2.8253000882974679;0.66089682046410647;-1.7630693617687845;1.3163878395404129;-0.78851297082664018;2.2740067840805005;4.7621026419052903;4.1251082143057118];
IW1_1 = [5.7051860381882351 -0.25647421257966529 0.49667786021532578 0.042262832984722234 0.19285300532604838 -0.61837115900159068 0.23827397643812651 0.1722399387640417;2.8428025559475603 -1.6513831067437914 -0.01684252808900058 0.79626982416675951 1.5952947409557083 -1.0390140739888734 0.79152372399105198 -0.13996714677839001;-0.31966379348337293 -5.4346536788676607 0.041100480605618536 -0.36830389111428818 0.038867225841599823 0.1354914188224936 0.034674487178653082 -0.35019954586409235;0.13317035984793418 -2.742284049523632 -0.048137876557225137 0.00032587709270166278 0.19678091458348856 0.34730827545748699 -0.084324098498884822 -0.1016107314683278;-3.8798808224607533 1.0623089266600405 -0.47156177175563457 -0.4397455160180167 0.33049206883428256 1.3711536743297357 -0.15600753636513506 -0.033133840722524253;-0.94232571530993592 -4.886986029282621 -0.50430588687930977 -1.0984990499845875 -1.074438371401502 0.69495334250320917 -0.69605597562046717 -1.6648123379762119;-1.967216704665341 1.8977754846269086 0.33050946251699476 -0.84063928650347242 -0.23390213933597334 -0.052750839464492764 0.11103283443744354 -0.30590447410927363;1.7197419914423855 1.9378954440010221 0.4017292385872076 0.21043776919148133 0.75517647914290598 -0.049135377348076083 -0.089443797506643413 0.55934234160897711;-0.13363486644379013 4.6428193499926831 1.1343891063221994 -0.59127772125194855 0.078976085119059125 0.96597913380906064 -0.7653959739479167 -0.49938765734689955;-0.1801044323039678 3.1917060050861159 0.042264663917418524 0.4990379200791864 -0.14497926140089193 -0.15905295942740144 0.054068282902525931 -0.21264223554661166;4.6420321360998749 -1.2850823352327925 0.17018727935809783 0.48100761499224698 0.41678812495253681 0.62369385443752468 1.1435516337144469 -0.47761798425549767;1.8207043590184462 2.4018179680082583 -1.3189840364550534 -1.9320103136254176 0.76487859796394175 7.1280121978042681 0.26805158821331238 1.0078030906203674];

% Layer 2
b2 = [1.1722116591255207;-1.1499569362850042;-1.1825155450280231;0.034278520399672364;1.1053022808551471;-1.3156879490413362;-0.27733322474730349;-1.9682128520374322;-1.8246146311790725;-2.2539166759194602;-0.7093193186130331;0.93503835948250269];
LW2_1 = [-1.3926469997501938 1.3204357141172913 -1.4412307467584344 0.56922977574553069 -0.20650462742406278 -0.052299710947826233 0.32055403751690237 0.17203310697507124 0.27315646479155481 0.54718035432535383 0.50897625324853368 0.22475514132415994;1.4471235663910174 -1.8679378104353084 0.16358503028757529 1.3454888653299641 0.5882112170098418 0.32878819347519234 0.86835268240908803 0.34283452418302313 1.1390410645132891 0.094819746337051911 0.16825364756977035 0.29148973256622379;0.59943454699066523 0.83837956286458504 0.41684146769915137 -0.056717801709712079 0.45365689860100306 0.1327322522154526 0.52507764809756896 -0.8424150262800213 0.31590870027917722 0.27995368583842434 -0.23117695370242936 0.59008712326974067;0.4136354710018903 -0.77590664726467784 -1.4493149124306237 1.5666460120003556 0.10233186176149718 1.0643443412310303 -0.1701400865692565 0.773988579398045 0.30514323375741198 2.0416648112922737 -0.13473972730401854 0.17118428635492003;-2.6363636638259327 1.0981992723958831 -0.89064268052511608 -0.061909312499060953 -1.798215267294432 -0.20318430986196331 -0.8775915000273834 1.0992475125452608 -0.63612537175901751 0.79377371653581485 -0.28785749400930749 -0.84649482862474767;-2.9842329902952356 0.45354658090445926 0.93897131062811778 1.4344628413339788 -2.386035752509533 -1.1369961033596339 0.2786527248825495 0.95736450028941278 -1.2118547928029675 0.082798736949088569 2.0177606087456068 0.26708915376629361;0.76500402856182692 -0.89938350817781632 -1.2266810425926764 0.73549501418343599 0.2096303802567803 0.7500344893096067 -0.55174364094791017 0.34417638388473354 0.33395392492729203 1.4079186886938408 0.061453432822484347 0.2031346260702579;-0.88088351853689861 1.7839648072898839 0.62404585261690093 -0.68322872179102823 0.20511040126323554 -0.15770868921733097 -0.42776344330361177 -0.75352982218655329 -0.4992873176592672 0.13382960173164796 0.86413064557983987 0.43738947015988339;-0.7510693842332018 -0.53373782636369904 0.44897484247614577 0.81255876240292269 -0.25260482259634298 -0.39501235207322011 -0.40466527029085703 0.95709339655285897 -0.45493880321101227 0.81737389725546705 0.68273592160669128 -0.37618593420516055;0.69049942583915125 -0.13175625193391344 0.9973663907694732 -0.13364640205851766 -0.20904540196541574 0.083016302589170352 -0.53691163349856796 -0.52583883228963679 -0.43917274386032884 0.66228513973054537 0.54768389047138843 0.48264209347871206;0.39188803505618447 0.43211315305151088 0.84369076862758219 -1.5182969138032885 0.80004854265230441 -0.15698384026990803 -0.4666590076288788 -0.7135220577218202 -0.23163699529613066 -1.3443791589217087 -0.44223583165150632 -0.21419694574542308;-1.326385222840949 1.3741113355871279 -0.72235679051316437 -2.0520911947217435 -0.97158960026701013 0.10043351287329517 -0.45484103497497302 -0.41462239517107558 -1.3647505066958119 -0.38074086171335508 -0.40583610312145846 -0.064608135149952187];

% Layer 3
b3 = -0.64566370742155177;
LW3_2 = [2.4783632464664844 0.74364650414483591 -0.79042530631343677 1.7974610397491395 -0.3715040410729889 -0.23421434702029897 -2.4966562915076644 -1.9126456257971625 0.94751012112985544 2.3838644405327809 2.0832150773649065 0.57304662505544957];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
