function [Y,Xf,Af] = SOXAtemajac48(X,~,~)
%SOXATEMAJAC48 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:26.
% 
% [Y] = SOXAtemajac48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.3123348202883247;3.5203850636785763;0.99790830999417246;-2.314264364655561;-0.74276745812256439;1.3616814031819904;1.1055248786551062;-0.64613288621026754;2.0374025916764293;0.61547113045832347;1.3903748455400902;-0.55102712492076711;-1.1576404745958853;0.15497061813294685];
IW1_1 = [0.6104220695115038 0.32536501957507352 -0.38028930334825684 -0.038789046805712241 -0.44879329157657905 0.78093971427884412 -0.7155576453031538 1.2337445013591786 -1.2383876085267402 -0.096871312512427532 -0.97574867234644869 -0.59337878031538471;-1.7381343076245162 0.010582984929409192 -0.28386505371146681 0.0095589859264576388 -0.33077625096150343 0.44954880225295091 0.0081732657044884978 2.2609412147105763 0.52774782388666086 0.055308506201031206 -0.72149954158820206 -0.32073107451721683;-0.21346382799287164 -0.18197295546554365 -1.0367507902012754 -0.74091620234388966 -0.083437700642735091 -0.32171959674401934 -0.2352831124873524 -0.30454211059384212 -0.099301345544660941 -0.48608663683845171 0.31316484614263584 -0.41082667745848639;-0.47580070148801057 -0.78101364986607347 -0.14157937638289991 -0.6482673678681401 -0.77920045821798356 -0.62483435036447521 -0.64582497366718572 -0.50646429027163953 -0.31041763439332548 -0.080724298715408427 -1.1163783755544832 -0.17358921102113511;2.4110947208691966 0.35714075850802862 0.28430506768208041 -0.11945633904022171 0.55614299576895099 1.3378849317106332 0.99823274058628886 -0.31178434670348509 1.5544930750941939 -0.10795504022139202 0.36032761578783173 0.41800937797416132;-1.1672201328043557 0.088097148802142727 -0.0075700283282745841 1.2113347267484356 0.46219197217188301 -0.23319690692988468 0.41646822626896574 -0.13455421225045522 0.43489938027756603 -0.10808023498009324 -0.46158786409638169 0.027805561550713759;0.083245833203569694 0.24494156750229706 -0.33709670162615818 0.72717596287863229 0.017834552449904832 0.41624514045067168 -0.4270265710402783 1.0521181197961895 -1.4163494963082506 -0.35529296919773012 0.072328071075821704 0.53113207225903103;-0.3864317023536315 0.89889364952030293 -0.96724428870957846 0.43862246089722051 0.091695776283889655 0.41317692366430492 0.6516578782738075 0.0065638300546377246 0.62480220730338554 0.1566120914345524 0.3887770087662038 0.41277344103078245;2.5065400748129023 -0.025124507153888094 0.0037360792239706699 0.69142200513203222 -0.62495196949808474 -0.31642046025142129 0.5183307323107722 -0.72723890608354214 0.3032998661557928 0.17037944793097901 0.080839278472057921 1.2601153717754456;0.52197524638043968 -0.15377244720636984 -0.18480408948113383 0.83954832879395835 -0.28577208603715987 -0.062786438069215883 0.0027980617006132212 -0.10304400211044253 -0.16446422567107308 -0.21752927233110539 -0.39888572888098928 1.7769831401366938;4.0233906661108758 -0.08195129227868117 -0.35976335804832577 0.018285414474782311 0.21487225170060925 -0.22406960293200248 1.2159102531609876 0.21481345710454347 -0.38009112503390341 -0.0028938844571367809 0.38400695631009152 -0.78424284510600928;-1.1516972120744926 0.1367813214482464 -1.1179248795616641 -1.2036609440025403 1.0344131920206971 0.69113592584783901 -0.11110543063208504 1.1863617487991911 -0.51482399425407666 0.37800801506354342 -0.85644289003838936 1.7564499257604482;0.33785368319371822 -1.7486702110910073 -0.34113565673018753 0.11411816863692234 -0.24166024819607865 0.19365917785219411 0.90703695186958899 1.0258473657449159 -0.45099854435666942 0.21775930597685025 1.2999145946506043 -0.17875718738809712;0.70461465031569093 -0.18001901196919601 -1.1101083503988762 1.1346373476742371 0.038241098781126664 -0.50299138771987295 -0.0026165216556773008 0.18609527810504231 1.6463608560950873 -0.51557575438811032 -0.740260588226621 -0.99565678746045327];

% Layer 2
b2 = [1.2945050077802838;-1.3338296064169708;1.6907882241548666;-1.0946803698695045;0.54820050057263292;-0.054141152137762716;0.1540204250079934;0.21048129822781778;-0.80170433815555531;0.71110333020870131;-1.0747965141555791;-1.1997749071318962;1.290095896494569;-1.9405006287170807];
LW2_1 = [-1.0349144294843273 -1.2217430477133577 -0.65102183358292387 -0.83636659063729746 -0.063237756151804381 -0.59424619402777556 0.25635935002261079 -0.39575529439926205 1.0816960649327465 0.70697084093737472 -0.50420940236667067 0.55655769437883407 0.2951117520020618 0.75634909463585798;1.0257442419184 -0.59222471645854247 0.56679193771034009 0.22924167536473974 0.14076977683463071 0.39733111882020777 -0.18256244764997095 0.34408520969029205 -0.75314149572351929 0.43574701896923723 0.22814724456876598 0.039837373446512385 -0.66560265332163793 0.63869083843406449;-0.78785807359590199 0.1903717839879196 0.98698739489484544 1.1459909447495915 1.1189746159542524 -0.36579191967398567 0.70942176672578605 0.65622971304624678 0.50137146687274858 -0.46296531825040088 -0.58460929784873439 0.69890601885061854 0.61391117635926007 0.26336345638273401;0.26523613747785063 0.51772215241931241 -0.019615949552346645 0.18933796977441153 0.47540762348004162 -0.22304988104186513 0.27869151903992895 0.54198206819513761 0.22965111135995603 -0.27393380739282563 -0.10342868870269416 0.92027878154150444 0.16752662499221246 -0.88311217440021561;0.40771827193228649 -0.40396145801756 -0.93758923569981156 1.2103417978330999 -0.042724877088162139 0.8395239731937838 0.24333437352021409 0.77642947486586056 -0.5658093734924754 -0.9553764355957638 0.34975087718102782 -1.1075171473368735 -0.022253439110815905 1.0549095669184481;1.3351509843256635 0.66415923049225156 0.77054720222922901 1.1195265132435135 -0.34747372281481254 -0.39330263153134865 -0.49137345494454671 0.83341063939334881 -0.40129398766120772 0.23779089468412912 0.1128661787383607 -0.3096974792520138 0.051817372088294143 -1.0950518704704946;1.2231170611599653 0.57347504987563547 -0.37788608376900751 1.0776547376353882 -0.036106028545447012 0.14091103452093964 0.079818628706886233 1.0088061736824319 -1.3093376764637639 -1.3732984996688169 0.75210498283610561 -0.26671174572329509 -0.27339633576747091 0.21767027936641237;-0.2511983910333524 0.50770844083808087 -0.79840348663123695 -0.076158727932446962 -0.37923004990166609 -0.24499484091536192 0.64761083212302994 0.27296962025694349 0.2345171403326668 -0.37239335189737655 0.18636820622541797 -0.014131176399706361 -0.73468270080818732 -0.73478992772770391;-0.66293987609839666 -0.30940834449631233 0.11727036150960887 0.60426124364214073 -0.027876084780967592 0.65481485439820597 0.51947060453258875 0.20913471799246916 0.77920292620427944 -1.0063655016765456 -0.89639642781574747 0.0075136568654318803 0.19013496613683467 0.8897033064626706;0.47132991530863821 -0.30732802015008459 0.60842450951082794 -1.1398563756765887 -0.78183190199933572 0.39825481782815547 0.24744254870753971 -0.51404318018062878 0.84448166827291138 -0.027588963278170918 -0.46420949325067995 0.78528681462894112 -0.61677571277664023 -0.28328341644364302;-0.85882703447278608 -0.33001155842231389 -1.0077241202300227 -0.9987061527122878 -0.015686860061145363 0.16771687861519602 -0.27648411683643598 -0.80480313297438244 1.1837854790874016 0.17563214643067504 -0.39404615597511317 0.79647217399700332 0.25921008238769538 0.56332059453663952;-0.63332705108014364 -0.60874016124287689 0.036479140005662838 0.13144868850714062 0.87006812043171555 0.095550554469915977 -0.33549471340186493 0.38975434529389935 0.13731564105887012 -0.14224398752536488 -0.094278946134425223 0.24448457202671661 0.9216728472036938 0.23508493903330435;0.92775028556073258 -0.40083014904706904 0.12429195245506715 -0.041286050117397624 -2.1121278995846078 -0.15923891480656605 0.54730025569074847 0.58503429397733753 -0.38537349279189798 -0.47428828912747567 -0.39124558944642163 0.20970703431688795 0.235182622932259 -0.30266013917216211;-0.28848212620561742 0.025184251621751134 0.0048761354118466559 0.45736332598871005 0.59758279304848749 0.63618797894173407 -0.15364132744649833 0.06880300255803154 0.038462713899501802 -0.91462091549480173 -0.70116510915816266 0.87240376975382827 0.2329003347046241 0.42720177885416483];

% Layer 3
b3 = -0.38543123564598869;
LW3_2 = [-1.8092956705100622 -0.59635688516669227 1.5482548109483052 0.17118518196861479 1.7528638303402189 -0.72723407309709365 -1.1440621334547723 1.2045122358394433 -2.3442795014675832 -1.4280501658656046 1.6636269143184839 -0.16489549085810284 0.63338715108016874 0.54542764607114624];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
