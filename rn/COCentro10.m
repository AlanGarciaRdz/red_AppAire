function [Y,Xf,Af] = COCentro10(X,~,~)
%COCENTRO10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:31.
% 
% [Y] = COCentro10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.2709428087872063;2.6186571063869062;0.97875836775949732;1.4324417014917146;-2.4857453613017908;0.80514130930652184;-1.2451856459449615;0.69285187964414152;0.14124342821110339;-1.258500911089284;-1.4315735268074188;-1.4815057420102131;1.2701432946830522;-0.49389682545749514;0.84397960663148541];
IW1_1 = [-1.4470623664330442 -0.38070388978395436 -0.29209473399761865 -1.2057719419106117 2.099040581974859 -0.034238894608160167 0.41933120184639905 -0.1149223425314965 -1.6852932353939523 0.09456557936635035;-0.47164907638293063 -0.64746088771690147 0.79631070474447674 -0.27843299503288704 0.16492109237757085 0.56384438371716727 -0.04617164050262506 0.20094321752771332 1.5359870655701455 0.1159034658671256;-1.6248710502813632 -0.26138347096663483 1.2656408424264176 -0.48096463093035985 0.23735950048309515 0.37555700022760596 -0.32537781883460115 0.44751425067214412 -0.1679839193013917 1.0417694185529418;-2.0679764873205957 0.37356663389269595 0.73716725300168839 0.3947343028702206 0.35563183838339463 -0.1424917669757971 -0.099544373390248034 0.90632875649572087 0.21502849664471752 0.34637424562415076;0.027724270395229643 -1.6999788839819521 -0.22043321958079962 -0.15900440140893263 -0.1196854291182133 -0.82645971276166663 0.30765074755870847 -0.87980835322228967 0.35839054828121997 0.30829820644791012;-0.60921718778718725 -1.0101090239177062 -0.27126120116980784 -0.31586767334937493 0.93411519921283459 0.62820773465418245 0.022139508068762762 -0.274431649479837 -0.88502289755929986 0.73792784618665852;-0.043861324082141176 -1.4063961742550888 1.1284751729454952 0.49706508500656899 -0.82977448571215451 0.17841957161661764 0.12428775516708744 -0.24375641705435167 0.8405045605318201 0.20102804137913402;0.15609667174274622 -2.4990058924306982 0.10118963793835373 0.31884664578847483 -0.22989025583038541 -0.032549562022247902 0.16033518575936662 0.37872959239370108 -0.87215943921341121 -0.26449836057302351;-0.52975281594072543 -0.2536510566622911 0.033702610357452069 0.2445217215466165 -0.24100734069965596 -0.38012536678106607 0.10075212105814237 -0.19494825994289705 0.11667903543799941 -0.30221804551487413;0.15542408627854074 -0.18417605241903287 -0.21719713644589175 -0.66875183501946744 -0.091800378949108599 -0.34862313548598689 0.062427922381646156 -1.106057608139182 1.183200413841867 0.056091070384951688;-0.62434158000041606 -0.17905691288285444 1.0113010754392373 -0.31650888351459161 -0.078592466785679271 0.50068178796172458 -0.087478466127403287 0.26729927211265758 -2.2179779604228593 0.2750755460138426;-0.35927767238660191 1.0768423994687835 -0.69638386980259093 -0.54036058635159789 -0.43903767226063867 0.40919664413325851 0.046487249659934685 -0.12839925337788793 -1.0067242986773124 -0.15284478690246492;0.055046704446324576 1.4680771564225688 -0.62546193061374977 -0.50530003765163389 -0.5649559701747644 -0.090923821040616554 0.054826028564422057 -0.089631599547379592 1.1214061030332678 0.33201102383404435;-0.015133147453154678 -0.60766919847362244 -0.35215970103417382 -1.1779402600247997 0.28942605491658441 -0.41858623597618821 -0.92340957245890676 0.98726907836863564 2.0513630980654742 -1.4252824778413127;0.037243280108906193 -2.1710084319908161 -0.3820030607506224 0.24987554622825331 -0.031105521551370561 -0.040467692893494465 0.34160639764182998 -0.85096383389314789 0.39013948401438903 0.37678799038432959];

% Layer 2
b2 = [2.492384318514357;1.4323974751035213;-0.33556615810639023;0.2873511532996344;0.82564604471001701;-1.0742346027396537;-0.046655651100905533;0.57645282740097281;0.62260745676202889;-0.62914391841285611;-0.8011899524820445;1.4255418443715;1.1581933112303344;-0.71217249459247645;-1.5709466086333022];
LW2_1 = [0.59489868099285004 0.13184252610101019 0.21198336469603452 -1.8220692260736457 -0.14127225190415743 -0.16035631103540351 -1.0417755480845829 1.2732989056388884 -0.50260808850538274 -0.8989109095376 0.077138494948380112 0.40171100907190171 0.39022538941864948 0.32109094948594802 2.4100394583449227;-0.11826422780217094 0.23292031001831945 1.2280253015921963 0.27065502485941378 1.1613130256329405 -0.20710597727621846 -0.88174413731203283 -1.4002869498799841 0.05015596455223352 -0.72725503608558828 -0.38326969718151804 0.257581996207911 0.13019469406696349 0.375256110028652 0.047108395851041679;0.28484775250948763 0.18002640182273802 0.32671531250477631 -0.2080555569994704 -0.00013207640409507865 -1.1759708148722936 0.30404890821707076 0.24027651901037855 -0.19514475293621253 0.58506865057597124 0.22833688375890032 -0.46031387774489935 0.29186492712924428 -0.52567579644369344 -0.28767922911951627;-0.14471507768816858 -0.26435274077654863 0.01029807178157929 0.41101411166180685 -0.35717388112634024 -0.014139163247572851 0.41197354208829762 0.048193114152989172 -0.53947071822199799 -0.11358950354850308 0.063222025462129752 0.0032007332914926242 0.001852350446694696 0.21503187701877816 0.84814332663601677;-0.5089431513183853 0.32902278327290302 -0.38733640416789172 -0.82178453198952461 -0.13561691875681894 0.61717819216033643 0.5629297277089883 0.43651998655411262 -1.1238331315774723 -0.18775341628482492 -0.21133859156772669 -0.98523382240067381 0.2443774121873783 -0.02960800532322317 -0.90606270267635214;1.008830328842824 0.11477765956081114 -0.39896406313667659 0.24037823634734504 0.69795198485596155 -0.52534991498876515 0.95620053458957388 -1.0206698338957843 -0.66507875928408411 0.97282155373439172 0.065151097716762238 -0.20422466061097591 -0.59177249348788385 -0.46342183867455211 -1.1316965602416875;-0.96643837761367402 0.13406355681846766 0.93521792765007983 -0.88552689903553938 -1.3265433086059011 -1.1412823081333439 -0.046331245926342003 -0.28240942554724907 0.82672675395642214 -0.35514476850514815 -0.45267480892493656 -0.086644150639489367 0.34665507438787402 -0.47666983049684319 -0.0011890893938199458;0.92974813920941701 0.34621112071788346 0.28259641059877172 0.036204650783207289 1.0049611534678795 -1.5102422865302267 0.50152269975398822 0.068631453484747432 -0.94605566879934189 -0.12445313241745128 0.082929357053408814 0.37028593941661142 -0.35063422315709053 -0.07124115371630349 0.50200685985189764;0.13300752606421476 0.57378028528326042 -0.22192048957348601 0.33349620852374229 -0.49247266096985243 -1.1160198812247903 -0.4871117377121838 0.073863532594716327 -0.25564422208058102 -0.38560700466582726 0.37007391609327328 0.59880962527873438 -0.3006379044412219 0.46036855609844773 1.326208523585064;-0.30894914601489981 -0.33355290478405347 0.11543575872769725 0.16459266412031298 -0.29724211126987427 0.21323322308503823 0.49678732533032693 0.65765006881582466 0.34697784883343064 -0.36000927921890175 -0.21275598447902064 0.55222713286408365 -0.67904640934165972 0.2346011730338981 0.11238923523371598;-0.3902886259043099 -2.2289057439679216 -0.48757740675185829 -0.30379087116715303 0.92644247439746552 0.23384949268384517 -0.53294932649663995 -0.40862595208655272 0.84690303763225694 -0.91474961878178718 2.4821735111446088 -0.0064808534923390566 -0.66203383937845217 0.08155938287794165 0.18322497878306748;0.20662501515884635 0.19773211325749634 -0.4310545092666993 0.61674575316213198 0.78046271970378012 1.0045550904796341 0.31093395535000812 -0.022820257657048551 -0.90763673096464481 -0.68610590885508604 -0.65768224251369622 1.0948819797447358 -1.3261485413794005 0.73738029582237141 0.56473181112999238;0.72643079177363057 0.30046492396720437 0.29426317403230229 -0.3464705465188932 1.1820741675538358 -0.084613895870732689 -0.48251101511080174 -0.9039444858075566 0.088055066145644068 0.15224534396377712 0.050240978174023856 -0.48293883354395412 0.42412219885691227 -0.0034520675063793409 -0.82837495844267695;-0.15442035787800898 0.31986352256432943 -0.69670402557091349 0.19176526134244773 0.13922191895255032 1.0478138221580284 -0.33183461276722398 -0.072508151728496006 0.83624399459966947 0.33429440268070915 0.048706571302796181 0.19189037150983548 -0.048098908738588998 -0.15117987962007076 -0.79470034056801941;-0.56887972131763676 -0.173340848105868 0.71737444394069605 -0.94578283566626487 -0.58738483024291743 -1.3376912889669883 -0.165358670911226 -0.11025150447505962 0.36755544836827247 0.34485809893298103 -0.06238286635129725 -0.66634872129250666 -0.39592920799032955 -0.48323479928201774 -0.57068561896288983];

% Layer 3
b3 = 0.77985922135097574;
LW3_2 = [-1.1928749587498282 -0.33601809522595294 -2.0756205504945346 1.7894299073565618 0.30190920042865127 0.82476865550790224 0.51733420177692024 1.4635876978527407 -0.65741247362132549 0.93215778942731609 -2.1593907699557242 -0.91610668566346365 1.0838445540496806 1.0635249364640149 1.2284497987222935];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
