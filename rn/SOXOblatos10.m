function [Y,Xf,Af] = SOXOblatos10(X,~,~)
%SOXOBLATOS10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:40.
% 
% [Y] = SOXOblatos10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.272581698784828;-1.3331069585313648;1.2185599661410647;-0.5918896301948614;1.4686011011436035;-0.079163413754059136;0.46336696819695061;-0.078987849450933692;-0.46630849404195235;0.44807546390665842;0.96731622524033678;-2.4981277534527875;1.7756736656490468;-1.5011542625292775];
IW1_1 = [-0.59195384431631837 0.46320758619903113 -0.52682322376057189 -0.34441773667007969 2.6371692484953368 -1.0159836160186981 0.39018057031154857 -0.34725281768781635 0.028077940908628529 -0.50250327869978162 -0.97829415376371609;-0.30537336237206375 0.034086775122820157 1.3919456934559808 -0.66428382637559902 0.27524518303025391 1.7914121869333099 -0.245505979723701 1.4443867094595153 -0.15079439729274105 1.0924703852356912 -1.4953579495512275;-1.0622412078291261 -0.12726587217769025 0.18708106157046422 0.20665557440802174 -0.93092015168430731 1.8998955336791339 0.41140397423156927 0.54594104340825933 -0.43612465705593662 0.16253291796257516 -0.40911915070876581;1.0641819501716101 -0.16492046447952649 1.2896635017173972 0.49440807456772884 -0.072377294486461602 0.085099444899052107 -0.082173279457473741 1.0450315449704861 0.069924086828471232 -0.30198896004709391 -2.1259872158672;-1.8797076941036197 -0.66119078893870165 -0.1012151702806654 0.012087722383851054 0.62883331983660418 0.67385733991337482 0.65511349116184592 -1.1523362744695558 -0.22361588233701607 0.12490187061387759 -1.8554716002969858;-0.53493791571622618 0.49819206090618584 0.67742042652249834 -0.84231012132632876 -0.20889557227077846 0.975704982363509 -0.62825779525753911 -0.3789723070830579 0.063152143973738556 -0.19216064415663967 0.63839229668065978;0.46690951859491553 -0.67358480749199801 0.083467430925990294 0.012137311821372399 0.17184853050614513 -1.0286452971106481 -0.27081584013419119 0.68158797303019614 0.6790418371710728 -1.3838620076150656 0.71776947140559433;-1.1897186431681559 -0.29770499537768891 -1.5088178416805795 0.11794765857491403 -0.28647682604474523 -0.512304164705918 0.4034892725224391 0.16475093774719884 -0.025268161599808069 -0.38293473417101453 1.2801895923627264;1.8432695510960622 0.88285635402527518 -0.02955290754265073 -0.35767859760835935 -0.89845603179512279 0.67770538368768074 -0.037841092163720856 -0.47621869311737031 -0.39663732855072498 -0.51940217768432906 -0.77506996650855886;0.57429128830293019 0.1737125753258778 0.16740896208208242 -0.51528251036641426 -0.25613659696180274 -1.7157709734186934 0.16308703137436364 1.1295853634701214 -0.30342608454167852 1.1298444504005427 -1.9956674843492057;0.75034709919185016 0.91647153794154546 -0.37171044586029611 0.42789572507572837 -0.46565368098506887 -0.99762453018896602 -0.41835489420891298 -0.48178514288930729 -0.31544752231583234 -0.037429098605789995 -0.71581448679095072;0.39877707150317832 -0.55503935053299736 0.58872030476635662 -1.277852464449484 -0.98171946199359883 0.50323291945684068 -0.10945690343381793 -0.22697888578050676 0.45357263106945322 1.4505444431877632 1.0624052173341627;0.33352454791830632 0.5208995746982984 0.98702038063053188 0.77199854837221116 -0.83553548556981794 0.024104396276908767 -0.20883422080411793 -1.2067801534379536 -0.1350445374294785 -0.47240082368373781 0.66641315932190104;-1.322719311087589 -0.26132907862666344 -0.49935875012644942 -0.012035838602600095 0.40165339248918847 -0.64828762124409356 -0.19460961850212455 1.2097123308407927 0.15027504174419634 -0.42111260312030502 -0.7977366624425839];

% Layer 2
b2 = [-1.830958329271418;1.3444831502695924;-1.9027503248677038;0.85611111727893807;0.98430698348970969;-0.67109668236729692;1.1142631156224023;0.30971563876244596;-0.01143032317074516;0.72842247717366337;0.96219449806492507;-0.98745917133383654;2.566097941728632;-1.5200422885831433];
LW2_1 = [0.23452913404991507 0.51851479808437195 -0.45532267887044942 0.71854667234667668 0.2052393336780112 0.49164693632420681 -0.075197943136570189 0.23130338116704127 0.17410729878376954 -0.09149723876188022 -0.53172612424969301 -0.33582323837191536 0.030306525034771006 0.58105534414552051;-0.61339010246873349 0.18327296110055788 0.40717705243288854 0.36044923916208504 0.28707082863459421 -0.25561627484481064 1.0585569170075353 -0.36528769787437898 -0.35411771698279604 0.94290516311725181 0.4711855519744636 -0.21051329126278645 -0.23365458233843422 -0.03053002229785249;-0.87629090896600104 -0.58046150519135442 -0.59603810909799759 -0.4626737166796433 0.25134977535995379 0.24115319597664248 -1.3504555659175075 0.50918634394638773 -0.24596471054269786 -0.80204928623763283 0.71692122754301957 1.1055126507244972 0.93428291202850489 0.027433879093432735;-0.79469637775214397 -0.14327598564895577 -0.069215139077543467 -0.037093838933050592 0.49593594448633832 -0.12257020686815769 -0.00754802991693229 0.44596828532381799 0.44501862206142745 -0.59384080009532192 -0.25967126104668536 0.55857339118417804 -0.65868296908255108 -1.0203187334747028;-0.44649710259769237 0.294512063978912 -0.72524745669231538 -0.13903133639515211 0.37992735703741587 -0.062274434706469595 0.209435087279955 0.19777813195368116 -0.66104270665110443 0.54720736877320286 -0.36237067354481473 -0.50017342614953064 0.45964073759045199 -0.19542168406418919;0.69915856359655271 0.49670501472411877 0.12156470516268154 -0.075277550732902349 0.47592554697975625 0.091128805380635239 0.11821341146026312 0.97526680517391828 -0.61575295261764562 0.19212347443036426 -0.42124706642648568 0.60742316742858871 -0.038789815536816312 0.53298311708367452;1.691356191172521 0.97102814833072504 -0.40502762019673538 -0.66017169768615946 -0.4518668394925815 -0.9450471176612717 0.19268099497726737 0.16258811675283222 0.84015622710974913 -1.0744281501156532 0.14774319095929322 -1.7187730982048941 -0.67416309930586271 -0.044059209896058063;0.58663425879881448 0.26934343336117522 -0.19754589402294465 0.11228487706249589 0.38519605476727847 0.57064470174569737 0.38746011254429996 -0.096403637145265147 -0.45137681951296105 0.025508630018749145 0.87676466227658201 -0.79070100535371834 0.30692013479153257 -0.96858751860142767;-0.28663726206490142 0.18564623242229306 0.324359673853648 0.292316877850892 0.31804769914091952 -0.8252713428499342 0.51339242698573817 0.28371370239359939 -0.80914057761714953 0.34010345129563391 1.2303699660987173 -0.42537993820918718 0.69801338297546134 -0.74550391915176928;0.4385814496127638 -0.16055720193251383 -0.58971952866598232 0.076974716407031032 0.63122742380372554 -0.53499259389723819 -0.34077740073399843 0.027823610971416883 0.94930227189480532 0.64286653568887975 0.51208519781624906 0.19043054265332635 -0.25065132496570297 -0.0030961022685514466;-0.116151058484652 0.18412169202275391 -0.3336670718425736 -0.74353705381774837 0.50562948013350106 0.24090662577763988 0.52556840861939991 -0.032637458948751724 0.15390617042182314 0.50408606838470083 0.72959981238542748 -0.13790844023309126 0.76770546838556275 -0.38839345057034863;-2.0319364102077215 -0.62456911116793923 0.0098035098256052493 -0.76716927896128428 -0.07743355309252048 0.3813345382722953 0.16708157150003991 -1.1834700988442426 -0.95364137715398478 0.95097927982098485 -0.93652380516776335 0.12340782987829674 -0.15490560323901947 -0.24865625458160065;1.6520514406607043 1.3641298374334243 -1.8297868668510804 1.7728400053079729 2.2968811209712627 -0.81915380498534096 -0.21373182269836624 -1.5504521722614282 -0.35499284514868545 -1.3976976356383659 0.42662139197337479 -2.4706109023287168 1.2804627936846738 0.32527657682444461;-0.96376398922482731 -0.59345819063288208 0.74051144096174137 -0.19669179363477493 0.18573823158353611 0.73458064491283104 -0.20824221137295229 0.094071028263989692 -1.2226474433872125 0.14205407725169616 0.85188324883156041 -0.16894016391636113 0.65423549599270736 0.66903155643507062];

% Layer 3
b3 = -0.36613980680903596;
LW3_2 = [-1.0348508121866877 0.46031465770186908 1.5553543332151993 0.0067233295890733978 -0.10316398918514594 0.18583277159185602 -0.96047167443725645 0.15245571226838106 -0.44587673062273492 -0.044477894664921191 0.78489671205832301 -1.6684448634084577 -1.609595904541238 -0.19350896080957736];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
