function [Y,Xf,Af] = NOXLomaDorada1(X,~,~)
%NOXLOMADORADA1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:22.
% 
% [Y] = NOXLomaDorada1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.00280033604032484;0.0179856115107914;0.0558659217877095];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.7380223172524349;-2.6674116774856338;2.2865923469255574;2.3947697959775804;0.34357319352233096;0.12718726476650169;-0.48204577501988188;-1.0892488114017578;-0.11910070803656778;-1.8176405574050054;-0.72203288875973581;1.550840349823936;1.0586022867324403;1.2536536764658144;-1.8107848076271404];
IW1_1 = [-0.30103425541769691 0.76271600509890025 -1.7653182240486305 -0.66005450776882546 0.76499655854645998 0.38684457794683946 -1.0988608464810903;0.51202569697249223 1.8462344192454014 2.0662928779330856 1.0314625933141739 0.18000012508849503 -3.01298709273668 1.4207193317696669;-1.736941034096152 -0.52542508354877482 -0.22290776801822265 0.82463523282410633 0.49180130810569817 -0.37162362505373375 0.11175832170562694;-2.8890289767986213 -0.22118925624040994 -0.88135843311034978 0.85286097209861655 -1.2164160927761216 0.14613336817430914 -1.0896000058562689;-0.054919772601904449 0.57369652581507169 0.17196145815518862 -0.99518794499790608 -1.3095266390178115 -0.18883608962052786 -1.8123041646500333;-1.2879233354461406 -0.95589315116615914 -1.5023824344599894 -0.53776999691599214 -0.46215380516152221 -0.57729337431012362 -0.99045942262259479;-0.036529187945297081 -2.3370761379252492 -1.5611623014031717 0.16874661948965416 0.25733875354271429 -0.16813868499511128 1.1475731525782131;3.122112686955699 0.26426272828711184 1.2057553571764672 1.3962388857183969 0.10932608430493528 0.27947963919676522 -0.52477759059205353;-0.0087344274091644344 -1.4986083423063221 -1.1909553347030113 -0.33790400425764372 -0.40828973406615521 0.35581238119480196 0.79972670820842184;-0.32262168316639361 -4.2942578303832537 0.05473220615328929 0.027762744217518197 -0.014823896227927012 -0.035195759908052793 -0.11158710522782812;-1.6701448256964329 1.4613427420637715 0.65413092277211449 -0.23889727294913324 -0.66373291641061383 1.480965680337041 0.3159901880243739;0.21358355975658661 -0.58413406366342302 1.5092851768363156 0.38779890281337709 -0.0009045104013577338 0.030781032419699862 0.33630333740564999;0.27627895665618979 0.29986523041023994 -0.38583691264915282 -1.2745847468737175 -0.51167905280028403 0.20756782046066191 -1.0953000997714115;0.81897407584216531 0.86709657417564623 -1.2347890870309044 -1.1798976058096842 -0.46497582809052862 1.2537957314044395 -0.88997076068186676;-1.7033331114871837 -1.2780918430415986 1.0122708635428324 0.083372128680568008 0.30659605808421003 -1.7954607575479686 0.49339761608123295];

% Layer 2
b2 = [1.687814436757006;1.1867854094834966;-1.4590628065583353;-0.93249972405956394;0.98349621671722143;1.0372681332555596;-0.45005409482324238;-0.36370772535048962;0.14010978216993283;-0.49142777887325301;0.41341297818147105;0.63504536323180327;-1.1082177193248792;-1.492073847313816;1.5166968811398573];
LW2_1 = [-0.45626049931483414 -0.66386624475443312 0.40748186623385735 0.46549218201533754 -0.035295332008394423 0.65892187260102963 0.04667156401519864 -0.22097211428869007 -0.69324093449767565 -0.29076320982690229 0.32609502589817524 -0.12617659196722547 -0.13840450034904017 -0.24111321340127878 -0.67135338022028235;0.23489238848218688 -1.0557350354603645 -0.32650641638583255 -0.62072102662920903 0.020295929416195221 -1.634331649490945 -0.12790215741830183 0.73201099118665047 0.23336043679343749 -0.12927445262928033 -1.0339106170515151 -0.2528313356853974 0.58945122992510968 -0.29113308390833342 -0.5926335647920834;0.09724108126923843 -0.015543660306243767 -1.3081045197145889 0.13262661924520902 0.61452035054026177 -1.1392638023812809 0.093458735486376829 -0.657330419360179 0.050950629608358826 -0.52880866796598236 -1.2347705573737331 -0.5443895635396685 0.23791204350126682 -0.53028615716844785 0.45918136711938812;1.3793504910362671 0.34043559607218571 -0.28853204900306639 -0.2593137545300222 0.26276436000705078 0.70541960220856015 1.6645218442087164 -0.094191351231468518 -0.1846279293198714 0.3571320880350069 0.073674867529874913 0.37047660978251973 -0.65011895901687833 0.10251920995877414 0.16851731366455763;0.080877064706280241 -0.87513014014926638 -0.44177898674847105 -1.2727950833088804 0.35246902209859798 1.5147763881629353 0.3663048375382838 0.76691151891566156 0.30665242112988611 1.5700628350861725 0.28644986868654421 -0.13193869421108409 0.18865236838728705 -0.34469537732554978 0.7186601436647132;0.10333596718701296 -1.3277760398724543 0.37894323301425037 0.28044258788295329 0.32130852338929233 -0.44035039916680219 0.87671846152681276 1.0872729546330762 -0.40303289841177437 0.55796380877922214 -0.011458907967740482 1.1927875460461004 0.18183936555056443 0.15943067329561333 -0.81454716922445825;-0.44886310997804241 1.4067324154072605 0.23817638894863655 0.49444809582432692 -0.2779093772010634 -1.0074614870104164 -1.1675912392668959 -0.97831779924705764 -0.64735569230101653 0.77529109237021354 -0.22795486933028039 -1.7034300761522652 0.25240907973018795 -0.8788812220759542 -0.71266669538942973;0.24091891652448663 -0.63374934877034772 -0.72424704712057841 -0.64894850405905891 -0.29026707493925208 0.59381872108270439 -0.19549508642891239 0.42435249170511091 0.39459415183402807 -0.070521578291514245 -0.24757433125899614 -0.49393037972942822 -0.52021387846079836 1.0247018655424274 0.60215642911595879;-0.019660241564637811 0.21350302065626831 0.51064142491624986 1.0874167426115446 0.16083741463852466 -1.0134224931886722 0.62073872355288162 -0.41677733624034968 0.70514552190457269 1.1780086565596839 0.57565288626586852 -0.51181819660951466 -0.25196781092097575 -0.77715662846996991 0.43805034446340663;-0.62981476481846888 -0.6455644098866451 -0.75727631367597148 0.2964869281777413 -0.85632324203014121 0.53952639868194108 0.66923043916440039 -0.45530511060194861 -0.14592318552899147 0.082378491754377364 1.135142749477634 -0.90893471625662936 -0.052854062407146948 0.18302260546911889 0.51703534257827921;-0.15318136156152232 1.9667900417493969 0.81154288484732284 -0.39474925988564769 -0.43999311303891708 0.5000384888866547 1.0264002188236583 -0.045941467582562678 -0.11976795519912736 -0.74828823081830564 1.1513856075511406 -0.58952687099823131 -0.41228428462523997 -0.34293469901332063 0.4325345847395039;0.04106857946023626 1.0882549496279625 0.078138435045193438 -0.27300758420450622 0.80304377736384169 0.15953003267993479 -0.4371887740031854 0.19787835828196079 -0.78005069037537944 1.1198906775032325 -0.24775889285126462 0.20069868727199242 0.81413697113903738 -0.24584767364936772 -0.29454060682670913;-0.97376929681645652 -0.27849671056728775 -0.82922296567804354 -0.64385436967271792 -0.5706172994902996 -0.35857325614901747 -0.72123102891653845 -0.71984498422882148 0.2821566816537005 0.45775296873652316 0.20782890546811597 1.4029394799401929 -0.21738200016006962 0.12037200997582213 0.60568653715354648;-0.33092449335976681 -0.61048373121118649 -0.11138299332471988 0.18459461599669369 -1.1416693807792331 -0.46463444077600469 0.54723495821284096 1.2582765795714359 0.46004094223585623 0.82928494804035324 0.052744990493643687 0.41911425818529385 -0.1798176356368216 -0.8953442851943344 -0.20400108116848528;0.71309653204050738 0.033514291533397397 0.72438615487582314 0.08948717019323385 -0.22868695956846119 -0.21391677481782045 -0.4507876107579244 0.47089341367526683 0.64166008051838574 -0.90934070488603291 0.10708044714868306 0.25858591430098538 0.089103754996169821 -0.35106884189594761 0.60731063455317835];

% Layer 3
b3 = 0.66349458517280413;
LW3_2 = [0.60808692669181219 0.85786034591458338 1.3563843806848088 1.825847899758072 1.1813337266763333 -1.3217624378994979 -0.97334855749862381 -2.0369873294786016 -0.95441638636037629 0.63701599670309328 0.46676709461823779 1.1199930506183284 -0.88714273540259247 1.27476037554318 1.8053872090567697];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
