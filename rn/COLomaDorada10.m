function [Y,Xf,Af] = COLomaDorada10(X,~,~)
%COLOMADORADA10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:37.
% 
% [Y] = COLomaDorada10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.290275761973875;17.6991150442478;0.00572573718866304;0.0175284837861525;0.0546448087431694];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.4061194671259831;-1.2303807837943717;-1.230213058806811;2.6638819871168691;1.9598094955333532;-0.31568306807577451;-1.2824712207676545;-0.13895253800128718;-0.83526740489409623;-0.38744713924589524;2.6384137349105572;1.5825756919436684;-0.53955329216360881;-1.6174238731607082];
IW1_1 = [-1.289223507076295 1.4170353056630605 0.62012828431476053 -0.76171418415619063 1.5992352195228789 1.2114667044898575 0.70500380532136886;2.113064585052352 0.27971751681205942 -0.041229011077459625 0.59748278500638308 -0.021926409147580549 -0.064208129204872511 0.57110752699379763;1.1866025860383653 -0.38998501114389933 1.5815862152944622 0.38206005629956308 -0.08328316063665725 0.73885608420036097 0.24592533768441113;-0.63418909107243604 -2.3679725716648581 -0.59959189894135856 -0.19992126725345177 1.0179353078428086 0.0057622676403194942 1.7293290994431387;0.928631681341613 0.55587436776223076 -0.77616892171033669 0.49672679848820217 1.252999370140115 0.50707050964996669 1.680949948690637;-0.7047990946022078 0.24606996029256967 0.21650517776167147 0.19795803101579151 -0.51793983169176705 -0.062471998619317556 -1.1164422233234146;-1.5369331220669271 0.33811421746689702 0.1639666495918049 0.36571436044270778 -0.1173823392398317 0.045385999102964952 -0.17435371098554592;-1.9110536725371301 -0.70683957469696734 0.20400988578957899 -0.64917142974230946 -0.21700011695157001 0.77374598039908304 0.073523500628921157;-1.545756604101258 -1.9235743654763178 0.26596051737064869 -1.8742398774735873 -0.079861998655588046 0.40171644661204919 0.024059313889183385;-0.67480525953783554 -0.83962268269669849 -1.0022020206423918 -0.95802505789017789 0.11399099894877969 -1.398135903175002 -1.0308593391064915;-0.50564233245074741 -3.1586345042755997 0.38655645962996488 0.11716960968519098 0.6989039165325629 -0.20534940515719344 0.094137050649339818;0.48939245180191038 -0.62828921196081167 1.0335396418653082 0.41552222206098743 -0.76962289579782983 2.7696026916050021 1.8540197997300258;-3.1515383948857947 -0.33386155232315912 0.59011161988493033 1.2250766031128693 -0.26489820556659766 -1.4451644144512681 0.3307137335938371;-0.42315804013722169 -1.9207261210530664 0.068430620805258136 0.093036499917300217 -0.099462985834842602 0.69346274762345861 -0.15409596984198359];

% Layer 2
b2 = [1.9470961184616191;2.2404788480223301;-1.294560082088285;0.012202144060874354;0.10459750193952994;-0.63699412356406837;0.45063943350932661;1.3472988033277755;0.20033337851302863;-0.27409563097127754;0.095761479965580057;0.65410268358950385;2.0565858085104063;2.7204775334258717];
LW2_1 = [0.031224967595686763 -0.31971463617532508 -0.036638186746126324 0.65198806489971828 0.44111298381291708 0.81371024907645384 -0.51471836284028483 -0.40406511311726712 0.44556123150929183 0.092720766508065322 -0.24516835628406139 0.19426399395983021 -0.1619219683443304 -0.82726977972893434;1.0015639072721862 0.36229685544955581 -1.7383834514252521 0.29621147145839294 -0.22163577355481967 -0.027276886662910723 -1.2850615499580675 -2.2120728756753461 -0.74107358984979932 0.046345209783115009 -2.0543195513677062 0.60267330228993632 0.44608529038712852 -0.15129482804180777;-0.40082769627397224 1.967874224127022 1.6846106036549371 -0.26113167511906954 -0.68466217586454281 -0.28859136661408913 -1.9706141161500135 1.9646387216793828 0.20869988448742849 0.12884389583666542 -1.2272766449577071 2.1692150569841782 0.18725670225253699 0.18411396887417913;0.12183326463887016 0.54039555756029767 0.77830267622701566 0.73227975151130553 -0.91109566278379306 -0.17613192177291884 0.3851616930664894 -0.79680640267400515 -0.56727826579166962 0.24465295877434212 0.5192962352520949 -0.9787437305593949 -2.4663106497023337 1.2367142056803133;-1.9078812584233664 -1.6336342974121758 0.30552417935445614 -0.35440494521800364 0.22603025955037773 -1.3585070878484535 -0.35204527965122329 -0.59985552245584572 0.49684707689530289 -1.3180325184688573 -0.064384628739620156 1.146305177194527 1.4884298506567246 -0.56608116239454853;-1.6503576066790271 -1.4389476728638233 -0.81707882769789664 -0.77795284377507756 0.095229449066990629 -1.5614568275328238 -0.40738308681254842 -0.45149063541182327 0.45634548052471785 -1.0495005451883885 -0.2150576769296495 1.1229445410053651 1.4330375232302346 -0.43467826408354482;-0.072491128825609472 -0.60429957999825235 -0.42185188273185115 -1.9532615143680871 0.086293409619100162 -0.87585498737436995 1.3362480952969076 -1.1116232327463937 0.28290157417391493 -0.13593884844526075 0.9413544275576573 0.66586323758770349 0.17562757450286789 0.668477056770029;0.060980804397423372 -0.19788410119659955 1.0092644593769322 -0.20540249490881746 0.87814709359669085 0.6296436369576911 -0.23104493055775016 -0.38444143127824804 -0.48683611903670815 1.2212971763943135 1.408945647653431 1.3475658110138915 -0.1400133368074547 -0.024567683802643282;0.0099750997654602762 0.25930200804704956 0.18546399707302863 0.024970199734201833 -0.78084740353813797 -0.3152022432113179 -0.3504748731410896 0.076748371238144431 0.014677582935242002 0.083257155129822139 -0.23638711984177946 0.065271011154989969 0.17043349516834955 -0.46896038722474909;-1.934653204444664 -0.9954179504470595 0.97589093781634051 -0.35669244763952385 -1.0691814419036845 -0.13066984689008226 -1.2430222504560207 -1.0384411128496565 1.2900064063671377 0.054962881214971393 1.7842145317857196 0.46996994967265865 0.52274544657946209 -0.51255187958262616;-0.026063633432451706 0.99289905105980925 -0.95281676617645916 0.98508410400803414 0.75587030494948493 1.2958215975279583 0.38159935275050755 0.91941705354988512 -0.33699011036902093 0.21520443251732649 0.17126953754521329 -0.22422334072012864 -0.50639234509678588 -0.79155124720986414;0.28538629620702938 -1.0029229207432868 -0.64841592877813614 0.51935335193794485 -0.023212188456599697 0.5617097048693106 0.82772252289269366 -0.48610128623660204 -0.7628469030744085 -0.21417730461777176 -0.36587980583969781 -0.66036073986022947 -0.46877298699831005 0.75246764608978911;0.61386523600279796 -0.21931950638962705 -0.64514445135088505 0.70585665841381551 -0.0029471814920131734 -0.85105415548961938 1.1351389219213799 -0.9617474694468704 -0.56488531116509033 -0.98038827015565566 1.6019707699390131 1.993962921538273 -1.3107258956395265 -1.1609752833924927;0.45765412835392927 -0.94340631640755923 -0.46187955839387423 -1.1382913029344177 -0.47474675608495487 0.39149980971151149 0.96976063836935389 -0.55066230241707903 -0.77278340039461202 -0.36790586792162405 -0.47029277225893057 -0.63437427440458549 -0.46727709901967196 0.37394658839241623];

% Layer 3
b3 = 1.4186741882643334;
LW3_2 = [0.98163446832576218 -0.84866982541002134 -1.1089964172724696 0.34515979488967219 -1.340103478968538 1.5208005579945187 -0.64070365165517906 -2.3638401818150396 -1.771951646361102 0.34328077003329999 -2.4912424565159785 -1.8616183861292126 0.84084901037511495 2.0959454099968733];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
