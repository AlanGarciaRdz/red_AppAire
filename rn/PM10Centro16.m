function [Y,Xf,Af] = PM10Centro16(X,~,~)
%PM10CENTRO16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:05.
% 
% [Y] = PM10Centro16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;3.74531835205992;0.00773694390715667;45.4545454545455;0.00462534690101758];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.626288100502745;-1.0418276861449782;2.5964232880270823;-1.9049060463444802;2.7122301406609171;1.5507545025184823;0.75965946829539088;1.5840198727018708;-1.5105371348729204;0.8206953195761606;-2.3049051131882758;0.15967557486139619;-3.2832136066711746;-1.5910933974878221;-3.9398701681116259];
IW1_1 = [0.42814763694760721 4.1196688119084452 0.49695715760904496 -0.16682494549599941 0.71692703034938599 0.83523081796752419 -0.729151411120319;0.54246700771220302 -2.1379454652572956 -0.43467904418383002 0.30559363136107065 2.3929470211093644 1.6060562013881763 -1.0626777730157133;-2.8788884895340985 -0.88834915479507659 0.22686951391876445 -0.13897936762128238 -0.32593648326030022 -0.021455020101753628 0.70724870285008179;0.5495146997439031 1.524122715891882 -0.23549493652522629 -0.19829947876746115 0.57827321223375883 1.416672780400595 -1.6075658319604396;1.3898843729245751 -2.133481952725357 2.2461394679573443 -2.3349139733126947 2.5258713231157377 1.8887704557616067 1.8503287385410112;-2.3376135399734386 0.32697310935520774 -0.40239941760406295 0.79443553185402915 -0.20597720309930923 -1.55172241347975 1.0601322319338742;-0.80194670776066757 -0.77437421533183304 -1.1901889087989406 -0.028025308513471604 1.5446927960343575 2.5743313912610737 -0.54866266004653641;-1.5681241547084979 -2.1275082334604818 -0.5249705843685617 1.1317196534841591 2.8592608142613267 -1.4034105246464377 0.19809244931283279;-1.9332557043039336 -0.31443968353096119 0.31162046673191018 -0.49513834124998135 -2.1492677210017641 -3.3635129697358721 2.3918375264537595;-2.2992114555228698 -0.19074842609241155 0.12109177695478153 0.88360425075555127 0.31617295410118157 -0.052055680315561965 0.96696713830795045;0.56297249726919918 1.1412980338028944 1.1939914618038352 -0.15549803589391711 2.8777387167482611 -6.2224075829154124 0.60120060053904056;1.0562978856237579 0.9452492512870192 0.69138197309117366 -2.4617917959522821 3.1471080124980775 0.33756382402316154 -0.5674772413322029;-2.9999108607646989 -0.0034921292530341631 0.43226178122109249 0.67614511424820456 -2.9447476762951608 -1.0737585486201866 1.0727233662561391;-0.36228241261304567 2.3512858648650359 -0.34170702290879795 -0.090985425286354768 -0.2230239853254786 0.24648917701657699 -0.31655683703909643;-0.75926892722116179 0.83296139559462035 -0.52094332180988334 0.58766785549788425 0.52376774290517014 -2.8485174839264973 -0.40195000474610398];

% Layer 2
b2 = [-3.6332265422989471;3.498854588291215;-0.35118127911794766;0.36142800648675844;-0.52694843656049506;0.70788740265568006;-0.44993995656808083;-1.8812287152333471;-1.0020610878345286;-2.407671797922724;-1.3012361511868176;2.2205260411358112;4.3323675062907077;2.7087468425312711;2.8059931057703515];
LW2_1 = [1.6892691301058287 -0.8241416898322953 2.433283304814486 1.1466644831213548 -1.2039331890978975 -0.21083409388886476 0.92924212324871147 1.0409334479430497 -1.6967446593791706 0.63915088472338832 0.7487096140729369 -0.49350660096592519 -2.1145533992758669 -0.70853645398065279 -2.4528657558749276;0.24472018928242736 -0.56171209653728893 -0.72730180532713862 -0.73992402412717584 -0.16315221412909078 0.47900425209162784 1.9323446983631463 0.06914891002345154 -0.65322830628345696 -0.57200347274731433 -0.3602591551500326 -0.80916538047541886 -0.35540120414346377 -0.92742623894396792 1.6324613364986638;-0.50789365573058332 -0.95232859373324508 -1.2781322258327228 0.85709640089151196 -0.15973528422378924 2.1763637703028045 1.548293841995064 1.0830128987608849 -0.13296181068985832 -1.9973331984787372 0.15766547193264388 -1.0694435081615066 -0.014307851614407414 -1.0059673141069181 -1.1332907796953577;1.3114637665204805 0.073401724853223382 0.041525892278603607 0.023899477416900839 -0.34367642774509127 -1.5884111499286244 0.72485091997412199 0.70867803477545543 0.74287314714307573 -0.39756572988615246 0.38011438545705556 -0.80744519767473033 0.69501641603892661 -0.90757312237392385 -0.69747006739198936;0.7845331967158623 -0.92290669737113573 1.537260049460033 -2.2979225297402368 0.045243448368511956 0.40277559995662648 1.4044587270389564 -0.40012580357169497 0.63192979241711522 -1.1779616675220086 -0.34822210367331197 1.4899276105717769 2.8766212513930687 -1.6909361005552581 0.9483223212713302;0.93969049242539582 -0.41692359444387006 0.60092552963296419 0.56420817004930834 -0.27818676354105781 0.46147002310826518 0.66695251059105742 -0.02833109868436769 -1.0397757089534725 0.83496778688256279 0.22194815013829539 -0.015019432553234954 -0.98892484542714421 -0.9625761370366086 0.73061793216775761;-1.6638029023721983 -0.50629324949111121 -0.25890324944582049 -0.49006132834584948 0.28044807233621011 1.7096317949090836 -0.56658294646601137 -0.69186936480188799 -0.77247300116741868 0.20806600665264777 -0.35369918934641514 0.83469293273384837 -0.55501410331707723 1.2543270121878314 0.79100881935920997;-0.19316400251305141 1.7944914020445282 -0.71071715059206109 0.55573818798448327 1.2013302806793407 1.2641829388895958 1.7336840810876419 -2.3102818427258862 -0.9247255187190746 -2.1609400120688642 0.19826701701579671 0.29136755703528411 1.2897952084187534 2.4999661225037184 -0.88210180574065611;-0.63019845864713175 -0.64847534539986873 2.5783277311430952 0.42308435515989817 1.0550308048945247 -1.5813126748956214 -1.1229228568934995 -0.83545120607811174 -0.9890286759135678 3.8901712229401113 -2.2020598984257602 1.6164597061131145 -3.7955889866158534 0.10001657815400143 -3.2334369973234836;0.083459093687268476 -1.2790187952281302 0.20550350454545427 0.92729398735676638 -0.51425875410128674 -2.6542355122416681 -1.3981524623893442 -0.24714746326818127 -0.72296137340052691 1.6253669382359714 1.1034388559516455 -1.2718489568657065 -1.9088525980457125 1.7400835897974414 -0.76084210571771327;1.4188084347966443 0.95191315783476793 0.63811218348131105 1.0307086855468919 0.30698155772426455 0.23923138985404441 -1.3298452599722796 -0.21753411334621672 0.50059816564437454 0.59721571999964929 -0.31210828869242835 1.892587709080586 1.777091730596684 0.16684007183154348 -0.26910533836181627;3.3167249790366724 -0.19077279366286498 1.6942272119202979 -0.36967094046681481 2.4198137472336083 2.5113730564122267 -0.44981190827645429 -0.060197713504519544 -2.5237104467265055 1.4699212663639503 -0.79194205204034529 -3.6636961120253608 -0.086210177205796157 0.36207657676662952 -1.8810066408386306;2.2068877871818557 -1.7477327467140478 -3.8225257157481352 0.327371815845241 0.28739075085394505 1.2212206831451511 1.6472616843001355 -0.32543892722977058 -2.5828456324861584 -0.1419485887170315 1.4933316816449425 -4.1714897434444254 0.46452064032085788 -0.41800082708547542 -0.3551853545295896;3.1153577318298762 -1.2721829129129425 1.9213949195599065 0.18463024345852688 1.6353050015390638 3.8627093416382268 2.2443271631185322 0.33649925313829854 -2.0143288354675728 -2.4179368432948833 -2.7554214395986114 -1.4781942835444339 1.079186871632414 -0.47719224219143896 -0.57530556458182691;1.3939368200820168 0.65625878439977658 -2.0618902869867988 1.8772734531090736 1.4909734772227687 1.2860329312305352 -4.5851847140601869 -0.3848507284448594 0.73197139593996097 -3.3335218254051333 0.84376096034830372 -3.4558415230338673 -0.16381962028641503 2.336551895711799 -0.53976805872481104];

% Layer 3
b3 = -0.8047630615295216;
LW3_2 = [-0.25076258652486783 -0.57395849138460997 -0.24847732700542779 0.83622714409928389 -0.19376057234663105 0.53993596128638344 0.73430795029360718 0.12514814773107497 0.11715100891602455 -0.23995148128827024 -0.35449738518426682 -0.38813150853706768 -0.11993324453061432 0.5166296882477156 0.054050711292680111];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
