function [Y,Xf,Af] = COCentro6(X,~,~)
%COCENTRO6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:30.
% 
% [Y] = COCentro6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.7077825145767624;3.7213953669302606;0.60113845496231921;-2.8904928581366831;-1.3988317235549621;-2.0130891634245751;1.8951018021165678;-0.86816909395879716;-0.29057454302562152;-0.10384268061188898;-2.2196048022084987;-0.51077403693993917;1.9228622963097035;0.93471369872464616;-2.6247348606661656];
IW1_1 = [1.8394852103103358 -1.7022078104876157 -0.59338698310663252 0.54937939775584999 -0.35178514803038174 -1.4415697742019342 -0.2627829274859842 -0.13865058024021246 -0.69168969859017781 -1.541842889901001;-0.35789660085498037 0.13174200331550254 -0.16305942767964318 -0.59126962557801066 0.53379381531132863 0.22961683075172243 0.08709074363284304 0.26993827753020339 3.5902928377840353 -0.22193329458332089;-0.83271979809344299 0.98625741917396081 0.41446677084731742 -0.26811747577390638 -0.13951694412482979 -0.37208188799501568 -0.12880301678712133 0.41108347419559443 -0.16018560811398444 0.51965339733827454;-0.2685811919951086 -4.8149375835255404 0.30820029456630971 1.0259214226034363 -2.0007697916068001 0.64992545505967014 -0.088156622137930657 -0.018753645872536216 0.71261618693126849 0.70285734006134182;-3.1505154308053491 -3.4198836360136107 1.3589036990017291 0.9030563171829028 -0.23159109779928355 -0.075327673772978873 -0.39182941565148666 0.98148233993883016 1.2306300943879593 1.1815574730838414;1.2999854877659081 0.51697942780359818 1.1973033045834487 -1.0595426723623584 0.59114870093307204 1.5573717110935223 1.0131489523085904 0.41297954326674047 -0.78149111158580742 1.1438996661782526;-2.0320772523615127 -0.51988511740677146 -0.9918435002384598 -1.3164155577358667 0.17443171488308362 -1.5031255916813595 1.6529176109289294 -1.2727129370737178 -0.17171173747084023 1.0217730946191592;0.56310831511176951 0.88141954344961715 -0.074480142996803639 -0.8756454396006379 0.23355468441336918 0.72924385609300169 0.061876528829163752 0.69324698916886329 -1.0743980903987331 -0.72187778072492192;1.1804615639786791 -3.0783918626613165 0.086281948855758336 -0.020263243927405854 0.26717705771486966 -0.23802573785318118 0.072044727931757813 -0.69626297532416581 0.15806841895554835 0.31441409837005646;-0.82507972903395654 -1.5605937483742738 -0.18455719039896329 -0.20276608665761675 0.11388029701447025 0.29840653241481752 -0.082765199154199331 0.091482582702453977 -0.54436473051688883 -0.60411425854438949;-1.1618433126382635 1.970214905240351 -0.053418963824854664 0.050914539814104626 -0.028085196622846271 0.40802655279083644 0.11465917744660714 0.14560648376913099 -2.5379414631801374 -0.79415193044635501;-0.96246156500438718 0.44901709037655391 -0.22853210335746138 0.39779125781486341 -0.043646758586978487 0.51164120069088737 -0.042886083591471502 0.14360186384562551 0.072166848569522268 -0.87429965902840545;-0.1050972887298571 -0.27700783344938973 -0.38481568424837226 -1.4026865180130859 1.2927958920164562 -1.29495680234669 1.3303545238286059 -0.64704412602606776 -0.089619742218426127 -0.72841970519903487;0.074629836693202653 -0.25342584358748066 0.045616027623426703 0.66455920676448033 -0.25819319773180494 -0.48828454533534399 -0.15741428495024734 -0.49950186253018786 0.21475034672798804 0.41464693666452462;0.051563131433079987 -3.3452645593223376 -0.080022969821940376 -0.017121755347466412 0.40190938317079866 -0.14618230577135899 0.083915104630666301 -0.33017661709903501 0.37082169406966609 -0.072631444580626495];

% Layer 2
b2 = [2.0035282774164425;1.726569028505351;-1.1676711918468576;0.35944345174995435;1.3756268195782908;0.048193317768610168;-0.20669346374515521;-0.46212712033157383;-0.70830483799820343;0.21314558719587423;0.00014369754696033632;-0.29851915638770521;2.5507452544215736;0.57201906181017537;-1.5678489293240927];
LW2_1 = [-0.87839095624806274 0.3243254613364418 -0.40301207322340049 -0.82096827064356803 0.035524712869817274 0.98241763111012703 -0.81179826951556333 0.56989412606937684 -0.52212595695108466 0.73618520340804039 -0.94391962195327017 0.34207452212483247 0.27482096997209171 0.10426418535309964 1.9793721366177506;0.32387278438634937 -0.64667873405761556 1.2173077170402977 -0.87286319435563753 -0.20842439188990503 -1.4087901063088666 1.0057087437205365 0.48997767998052999 -0.58777143507375251 -1.5432429804898229 0.38360681700476312 -0.48707073713843435 0.84467491658990002 0.57651069845179403 1.8356911031502035;0.3626787263890055 -1.2277707585129156 -0.33367456289167613 0.45873616948339246 -1.0616660629018464 0.094036616969949791 0.091806323090274894 -0.36354824326991647 0.52940331440877131 -0.36450349841464624 0.78145603013406739 -1.3348689313159574 0.42961299099446193 -0.42038206763601998 -0.48056658560159982;0.14580822091647522 0.47911730039328998 -0.33293100252663832 0.34611171907997856 0.3145678234208481 0.030271197826122115 0.31370791960432026 0.19312929530232559 -0.42608914523839714 0.87353429733499377 -0.51778816216483536 -0.042615767623957246 -0.98992078833838459 0.200474047750309 -0.63024525591343683;-0.21871040699047084 0.37140460825214888 -0.56143815188634394 0.056358497976886059 -0.49124701243404634 0.87241192912942334 -0.54218297743832922 0.3085764196501849 -0.068646598726913449 -0.16565067192882579 -0.32021960681757478 -0.11136613622628552 0.075351336168534747 0.20414854973898244 0.54555875687475519;0.64352238114166838 -0.94181970912562596 0.8939693635263658 0.062508170847619643 -1.0661176788977444 -0.62526701775870208 0.40563544907901616 0.39322235407253503 0.32550928712678906 0.31610145765027031 -0.20494265094683556 0.39988762147784573 -0.31197951102728422 -0.097625977553720739 0.88840771439295418;0.10441230607398075 -0.19368253912295794 -1.0575030605328171 0.91668629013932823 1.0401463673137059 0.38286006808848783 -0.27129606433572628 0.81393881149398573 -1.1296306290235372 -0.09764949385385524 -0.068289738673962208 -1.1711826370889264 0.61180037687344446 0.6313851834318146 0.54197155565186184;-0.11033441013548384 0.29017374971797044 -0.40276610524953038 -0.58381242679052858 -0.41169995577107427 -0.59309041774106619 0.77073344639938235 -1.0144004324302514 -0.14000757960355789 -0.5648983634711866 -1.0700350623558645 0.27628885049178287 -0.70666964691546585 -0.9866178453531993 -1.828820718409526;-0.17919634362606854 1.1697480498705155 -0.67018611941790518 0.024718465624061887 0.49119061521445578 -0.9685572349725784 0.17778781563212659 -0.58661874940176262 -0.14849545815769349 0.030081556262954012 -0.39474200856403169 0.071608444381973863 0.55372711883628323 -0.71539693929032766 1.4513614704007292;-0.36265304736596377 -0.45029920165325987 -2.0149242476341276 -0.40769554044743528 0.60173709716034596 -0.34251886074841797 0.38459391680419241 1.1375826064729402 -2.4509106621773364 0.30874033541282708 -2.3659181312372706 -0.22521831439478823 0.23077800064169923 0.8424755897057411 -0.53564041419737607;0.25095745489399629 0.40037591325173827 -0.64982410432983106 -0.35289901724002082 -0.23617837433376318 0.028873682634419071 0.29235939322317106 0.33427195144031158 -0.75476072037454567 0.3055858104784428 -0.66456277111178408 -0.11454553257878949 -1.2075356790181813 0.30927019737099404 0.29065082471341741;0.1366927587950604 -0.28277530329194134 -0.59284169963064337 -0.23473401662439453 -1.1846081611697845 -0.34128165970047536 0.088541079846255172 -0.38020747099424779 0.20988856467633202 1.052678361743427 -0.16502309553523137 -0.45011848386469794 0.34468675660537301 -0.57421731632089112 1.5531184903826816;2.2516596416820471 -0.65779016777887622 -3.8551127692124414 0.16713957520179382 -0.39444279498338669 -0.79573277475905757 1.8582209358224866 0.099276305658630534 -2.4548633682541023 -2.7551558362127038 -0.095941088834519003 -1.886873568080397 2.1255573721728567 -0.49019546941041636 -0.83967260544797462;0.16783557376482267 -0.24028648381221168 -0.72463980029237363 -0.66904831829308586 -0.12082101009920022 -0.15012829246192277 0.18945600405608359 0.24669781682407343 -1.0160891566722206 -0.10608551908138278 -0.34908588992108358 -0.14424484748223168 -0.30381268842832987 0.44922914787393986 0.50321372619072335;-0.33473310568082593 -0.95926574645668361 -0.44742250551291918 -0.51424752553660458 -0.56550417895315053 0.39286002643464196 -0.10764556604370584 -0.49668228050337854 -0.011362738304975025 0.38215299666516034 0.13256218051528396 -1.1073870274716897 0.10554152593040163 -0.24275024548138979 -0.050741505965052537];

% Layer 3
b3 = -0.60321401273819886;
LW3_2 = [-0.56344791537682393 -0.28717701667256851 -0.65347490376433115 1.5830190049893273 1.7728584921784289 0.68368004082478395 0.81920576197562045 0.8052216921144455 0.53667609723370446 -0.74858036605085865 -1.805280220354178 -0.73753052274084141 -0.56740570633088383 1.7208980100478675 1.2670353718945624];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
