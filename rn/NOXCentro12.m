function [Y,Xf,Af] = NOXCentro12(X,~,~)
%NOXCENTRO12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:20.
% 
% [Y] = NOXCentro12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.3342154934297705;2.1927915473125017;4.7247739949595289;0.22944139088566609;-0.17977221789851441;-1.3690254807442674;0.85317614388310603;-4.7976812630165426;-1.4839950032239635;1.0051398272321521;4.9686554322694212;1.13037496904611;3.9581575082617517];
IW1_1 = [1.760052781290701 -1.1099044316069651 1.1474940971217529 1.5575784273820614 1.2424979319366205 -0.55596880096272616 -0.69507307364581417 -1.8919601757861255;-0.6864091207970876 0.12317826060708714 0.73873929291676177 -0.41744110953905239 0.2436389551871439 0.25089254748735301 0.67931627623084412 0.79797445455415261;0.014214326816937907 -5.6364308869317945 -0.11350524423968425 -0.18629392313815674 0.0172614526368347 -0.0093374398382804653 -0.093696521886469708 -0.068048093409669067;0.32468145450203045 1.1818787813254328 -0.061444261896509811 -0.15765076235945641 0.065356806644946863 -0.018330995876630233 -0.08950195344684149 0.011338459581338115;-0.92177321337957729 -1.8662978751235968 -0.66507689107089707 -0.8429380304870675 0.64382158121156396 -0.41273385872744478 -0.41511011220552901 0.081124916925514295;1.8130961234012826 -1.4028373461301764 0.23687564059112481 -0.63047656483818137 0.0296549929723194 0.38254036537909147 -0.30287655181300382 0.31966557781828531;-3.7284875501989254 -0.40461712939597222 -0.8308338025941544 -1.1753185737301441 -0.19310297679951466 1.8242941124522312 0.74312779131341955 0.12824439355988479;2.0227538093961974 -0.095380619688156643 -0.097611737138226393 -1.8813999826218275 -0.45110960599538469 0.040821152650976689 -0.70792952166391809 0.20884181971758431;1.6245398325414528 0.50795355394030151 0.046512849981884596 -0.28676010459428908 -0.28929268849358075 0.52496610991446424 0.32023510296561603 0.31355622767422969;0.89622853224751897 2.2416633676228641 -1.6413652347765968 -1.1341069881044588 2.9542225558240962 0.57179211939092867 -1.0805003633099828 0.17833538297690285;5.090427450233399 -1.461663591817685 -0.94119905066866705 -0.13700642203685426 1.2245533298457034 -0.11881674463533738 0.24067721699421579 -0.12545078911880844;2.8773540407871234 0.29078594998426016 0.50472216357538902 0.17635489254084999 -0.89358715739219308 1.040733037389199 0.065597651791807918 -0.16234148393721295;0.13470230954957435 0.21970947318182391 1.8935424931365494 -0.73547716183888656 0.061921880884773108 -0.055191390055226518 1.1392932576707846 0.92930153782473846];

% Layer 2
b2 = [-2.6038490325799786;2.55983287074142;1.1435140959170411;-2.6830915479203754;-1.9054928161774403;-0.52614812276633915;-0.62695596561419509;0.46615329668277061;-0.91302169918191356;1.2237296139274305;-7.3720795614047407;-0.07165578120044129;-1.8739104593588924];
LW2_1 = [0.29310113913278452 -0.77785449696385234 3.1926467564599097 -1.7327854609378353 -2.0196586934439211 1.1408446108451178 0.36557058498672063 -0.67006975527155221 0.34818643890371764 0.42566365843074899 1.5007628633456629 -1.9508428575939303 -1.8978353736138389;-0.28066369807255565 -0.13409423243271915 -0.30763968135507658 -1.9207404703175068 -1.1834104379518244 0.43482013760257843 0.78895923018010061 -0.21809082963961679 -2.3590676053967012 0.23801642383367816 -1.2298196207040839 0.93368111220182137 -0.665241116899009;0.32531324057239819 0.39696741221524035 0.29713705449346867 0.39392896245093295 1.5040288563316371 -1.5341459727704592 0.33784342047452764 0.73340426237641565 0.058565171337317631 -0.21901708475939519 -2.457940126193765 2.3606086028857036 1.2474752702725591;-0.43755213903916651 -0.21688781091075907 -0.50511851813718911 0.48708559981079064 -0.86625838435921998 1.6549178733629093 -0.47411633503392747 -0.72277004968760494 -0.063337031738628591 -0.11578728993107446 2.4062811332368557 -2.276344773935254 -0.063725299923604886;-1.0573747820818793 2.6161893718250666 -0.49394189735888527 1.6263520063980459 0.72634320991808654 1.3059793678511351 4.1700161403957754 2.8140010204067352 1.5800244133374819 -0.1629140565953924 -0.1799166196789842 -2.8443385862225856 -3.0871947639797552;0.6278649124773753 -0.58927856156001157 0.56120433200921027 1.1328616879433928 0.61975180397213869 0.044504015989319405 -0.13163880210045734 -0.29304199207499199 0.98146149390791304 0.19530061297544113 -0.53137273896768134 -1.177543932875065 -0.055533995323548496;-0.74473764356575956 1.6304059169958194 0.17089152461464446 3.689091977039975 -1.4972982493427587 0.97588261657932374 -0.095314829925250144 0.23567268965014448 -2.4711321491220466 -0.095598374929650176 -0.19114345410127434 -0.64329962432763876 -1.1992548794483877;0.48236397352846044 -1.7548118961792396 -0.33222152674764094 -3.489647348495986 1.4842881767365184 -0.91547706330546186 -0.22708558538759147 -0.60198432219353892 2.4493014000628888 0.10499610672605605 0.022948395199566915 0.55991693630609352 1.6368543722272926;-0.64262163959198104 -0.28735682951195812 -0.19191551488869993 -3.3369028432014427 -0.51753581216697631 -0.98373926179037163 0.43015653064942805 1.1263909767325202 -0.37330717702702149 -0.038620669929690279 0.34245952525159512 1.1552409620897903 1.7423914031352257;0.5308389885403173 -0.28752979630217579 0.4126566504694984 1.212784153051115 0.72344206767877262 -0.10699728888108376 -0.87509953350721503 -0.062119967776567961 2.5464506809781344 0.10392983249105543 -0.4449518952990823 -2.1440603364861337 -0.31873872971740397;0.17940958910789057 0.73018625026417161 1.1317172528701553 7.713847568801393 -1.8160536709280399 -2.9389857957930481 -0.29714023355850655 1.8011538757112082 0.67234727519510806 0.12965634680465218 -0.10576283472207865 -1.8329447356950852 -2.8094356258145488;-1.0923544701317791 1.7174922022100074 -0.11039123858165439 -0.72677830929835152 0.47301373142972375 -2.2828550110687891 1.9881879598278687 1.9988432622952559 -5.3037595550536318 -0.54013912866960223 1.2645173112979537 1.627381385526028 0.28485810821611102;-0.10039989140653637 -1.8173605765146965 0.42299904894573803 0.46652298586749541 3.0091838415069705 -2.3530081488634536 -1.2411367944528351 0.10889193541104293 4.3171428135077781 -0.42846506134774837 -0.51418139107273708 -0.63945014653201016 1.3797235739181595];

% Layer 3
b3 = 1.5304669882909023;
LW3_2 = [0.97885505444556231 1.5662583897749371 1.9261736742765059 2.1581300169901696 -1.1351388649354093 -1.7007038317324878 1.684931672609888 1.709950821530813 -0.14866749705450666 2.4666591461121312 5.0688242373271422 0.56026658318514522 -1.4477243437068601];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
