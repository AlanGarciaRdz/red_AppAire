function [Y,Xf,Af] = SOXOblatos48(X,~,~)
%SOXOBLATOS48 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:43.
% 
% [Y] = SOXOblatos48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.0012901919573749;0.88477196554643678;-0.26325781822471328;0.18636928693301782;-0.52065806904484702;0.19890945847828595;0.20613790361998485;-0.43434527942913848;-1.4974323380202212;2.0566066947069666;-1.8895394527445384];
IW1_1 = [-0.65284850675141393 -1.4323733590017615 0.58014292966269743 -1.6375970356404181 2.6004890508936502 -0.64619670934535467 1.2435573793492374 2.1739563211562465 0.95293656669341265 -0.4524732894624387 0.6703193693031928;0.063553544700276299 -1.3078576821746082 2.3700107917720583 -1.599848609253399 -0.93248393198268131 0.831208901939956 0.61903173441954318 -0.15061306216632792 0.30245214744745186 -0.0747679127049653 -0.79155481741622002;-0.036586694621642102 2.2676531608456485 0.12515505675936139 -1.7473008965974444 -0.31837120412887593 -0.31998519084793847 -1.1096521522177429 -2.0898814035761406 0.41838398764183127 -1.0984816455082291 4.0358287739274097;-2.1362004563729204 0.24725248900737404 0.32886803946001253 1.3166606532957563 0.98395425850615825 1.220423458691317 -0.35524828770160993 0.70313878730434876 0.017329123191005671 -0.044280417322534578 -1.2321990152064004;-0.16677806064514128 0.49959253864283848 -1.3893223268534274 -0.71443971988812616 0.0036393969998484953 1.3185598456335335 0.23413940739715386 -0.51902197930289484 0.11970521880279672 -0.1507283588333129 0.099411303891722952;-0.2721376793874602 1.4041554584265354 -1.4267494413421244 -0.10169417092274605 -0.58834972082671089 -3.3035508542844436 -1.1591543291860937 -2.0170217352173174 -0.3348329286718888 -0.062204584508698951 -0.38527798666852547;-1.8560782126475091 1.536972187442299 0.3972871871073041 0.18797499889358871 -0.94081389254042846 0.22388376649514644 -0.056953261659465321 4.0202074193151933 -0.10883951966960712 -0.9762913918595979 0.84753242060241396;-2.2442354815346102 0.011449603625273946 0.67565512476883849 0.39446584720351519 -2.5831537401688149 -0.8086041563809927 -1.5537604808520058 -0.84917252542166666 0.28207566669773193 -0.34500320753686042 4.0890952953603534;-1.0632040515745143 -0.87648584487858172 0.56226686521267311 -1.4686050486485005 0.54575817311921759 1.1813314404122348 -0.63737847795036617 0.17881458530200434 -1.2655508191504223 0.67368630060244672 -2.1757782882379453;0.99940201807206785 0.15711797997429111 0.36571907110807228 0.24915175895003658 -0.40864814037408775 2.0750878408454332 1.0339788795043725 -0.40427137893017595 0.10059891386682894 0.16778643988154229 -0.41623987276988922;-1.4166254143026606 0.50717930885047691 0.1845256528558088 0.10861950309460816 0.60631056687888141 0.98974619605633418 0.23660860346310314 -0.14474193107228955 -0.11355086754292747 -0.12414561857369351 -0.56469585235429154];

% Layer 2
b2 = [-1.5783329519033673;1.4074238319698882;-1.4683992255213694;1.0495421789333517;-0.76342925021476982;0.91001922193896867;-0.033653427330259111;0.89370337574662773;0.80365323233984198;4.7074850381166158;-1.5028059558003568];
LW2_1 = [-0.26417274458538187 -0.51199660129660329 0.26410977603418856 -1.2819159409072121 -1.4136940080608693 -0.14685270847695353 -0.40691170109901076 -0.66951638207017594 -0.3493202900028991 -1.8235718955652902 -0.060430453825199612;-0.070194857022693485 0.091141344784013853 0.46554455688507906 0.78128000616158566 -0.62526959271668914 0.26927752644311331 -0.55889041727483013 0.37536569070482356 -0.051026137052981452 -0.39477160645646192 -0.037466934038373673;-0.12400204381498087 -0.13882720228751774 0.31575378974076374 -0.76514822087961709 -0.57379591197053093 -0.0011500200936365446 -0.09249111319546402 -0.13858668644953598 0.019308265978721085 0.29542930852423194 1.1633910406415819;0.39848825330921617 -0.47581143137051107 0.33935412978750179 0.69644521371584889 0.12283853375077086 1.3849113471436589 -1.2379390907656658 0.22477759604724717 0.27006351890206981 -1.0661491472580582 0.39133658056287912;0.13709019769542113 0.22767996758314507 0.87650120985399527 -0.92566893923047122 0.72529065244893087 0.252914935639935 0.43285217154734867 -0.59386832947231927 -0.58145321344562562 0.19606062073814806 1.3414274993730697;0.2185464179637914 -0.046290028252235466 -0.049615444359004314 -1.3215020191625126 -1.3643179854080705 0.473244388538969 0.65511337970072603 -0.96791745006568741 -0.49246712405427112 1.5878531561314919 -1.6794189379147673;-0.41520624408413365 -0.030509951839779698 1.2287731106830133 -0.75256207974237721 0.42438016925540722 -0.11245222468334624 -0.065265206783471627 -0.82084900623786705 -1.050838037430925 -0.26142723015092267 0.27900145445801244;0.68229061951066294 0.5969909178792463 0.0092752783319739185 -0.53568809957399932 -0.36375131572631092 1.100798076443152 -0.10901477667602254 -0.3573445662397875 0.7860338230886208 -0.4483429667385963 -0.37396634949356089;0.97954254259965345 -0.36136272287953286 -0.48035736169446414 0.62663936851566171 0.36063459542187293 0.62203005098449815 0.072485157612184783 0.51182277996728509 0.13220370246812266 -0.091952731641354341 0.46434044643041672;4.3060600113884009 -2.4363384191177277 2.6917523825653049 3.8518397119571053 1.5931651208927871 3.64846903751328 -3.6010305049541058 -4.2089997467437072 1.4006635601313155 -1.5696296984363944 -2.0543166094355039;-0.9571201411172342 0.21784312383480572 0.37548663070237831 -1.2341408638904499 0.47671105225653265 -0.10000595341235378 -0.19801450337475601 -0.41446191722644316 0.35060739842110489 -0.097535145198466427 -0.39954245551841683];

% Layer 3
b3 = 1.8306853371798979;
LW3_2 = [0.066054562298691069 -0.15217115455576108 -1.5124575512085936 0.089244772710499423 0.044788536669005646 -0.086651104075542329 -0.017335924022636819 -0.055604345454124501 -0.12712747667533317 -4.0059838969170842 -0.058915773557981665];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
