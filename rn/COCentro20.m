function [Y,Xf,Af] = COCentro20(X,~,~)
%COCENTRO20 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:33.
% 
% [Y] = COCentro20(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.1939427178976891;-1.1725474319622509;1.1245366107749526;-1.1383029140622911;0.74093065735972308;0.10228377127931434;-0.81364900046806377;0.70797724232651216;0.30936863502283962;-1.0109540252956524;-0.029929769076098983;-2.5276216163945335;-2.3407391318766551;3.0577474605956056];
IW1_1 = [-1.3421405827342581 2.0748029060277777 -0.50512176748725457 -0.53662589090052071 0.50636491755102941 -0.19991709418199233 -0.13578960149430241 0.11731446070037209 1.4662458506565674 0.18682890568217164;0.93751559596032397 0.43041385484963385 0.43910336808002132 -0.13761098292404564 -0.64530737708489649 0.68346078595209814 -0.026334644737241241 0.20106907841374078 -2.2009217657006337 0.30234025198576586;-1.4185811160661388 -0.24108799983601192 0.095537520893746911 -0.16524324170853291 0.31858890997868866 -0.49701993584058934 -0.0091783457133213404 -0.38333667273813554 -1.3158280902208837 0.12542928801082923;0.0046931426782791073 -1.3633508961116352 0.050838755241052198 0.22290964403542049 0.14987573804848986 -0.39540010447829693 -0.078137805520072212 0.0041116061323961291 0.39392557941414852 -0.86823560878463635;0.34830620833710579 0.65693894117849305 0.50881976464542633 -0.82179532379709475 -0.85241674409969526 0.28312504827657564 0.25968866628365411 -0.16151319165816602 1.3066767410047893 -0.065604598078712953;-0.44187377841364445 -0.77295315232879391 0.055529098623767668 0.77754879840865243 0.022633038177146448 0.40028175034761959 -0.20672384304019251 0.15410471720872743 -0.59357037441927107 0.0023028758761941843;1.5528058914080485 -1.1920999149040963 0.036359011040105992 0.33922439357653833 -0.062610968434446912 -0.57836958253114912 0.19198321085349943 -0.37827208242048671 -1.4020742819888978 0.087123217862638921;-1.188630456893087 0.2261580928929699 -0.026965006336447314 0.63809588981503917 0.48840157519809191 0.45719860215376995 -0.0085759648484771325 0.12852150251078942 2.2810624253236083 -1.4964908859514066;-1.1624106965039478 -0.33659626454452557 0.09035390967834965 -0.14887635789747755 0.014992251874934266 -0.11766827370187372 0.042051067972178412 -0.15328006404839098 -0.24451593441091085 -0.1931308394923118;0.073989963303777592 3.5551311259436966 -1.0638362486751864 0.1425220561206304 -0.33826757365996202 0.51785119917333 -0.015851144365836504 0.26015415463477654 -0.89508129693891103 0.33911224846199872;0.3558806932680097 2.7829558475360101 -0.080489387611875768 -0.066501889619276111 -0.095933509406656681 -0.31793383675361692 0.049040325041494033 -0.066337843761466966 0.51125121747372959 0.015810103524105768;-2.4071943301549159 -0.45320845355407818 -0.29251221960518614 0.54971675024423672 -0.38138204133606496 -0.77271930028527502 -0.11970909245212215 0.029130162281752237 0.24546209742005221 0.12432693331501919;1.7207779653732909 -0.48760456870376379 0.32200236669642229 0.70433464088631159 1.362216815625926 -0.10242295114821057 -1.4591232007185231 -0.9657661915120731 -0.47833865878094201 0.36578065719034447;1.3090237776407216 -0.060442201185223234 -0.50233141188665842 -0.41907796321281288 0.2638983563125013 -0.10256964326766298 -0.19955275494046135 -0.017922947501922259 0.41479481002727275 2.2959138711656966];

% Layer 2
b2 = [-0.98059365204366178;1.2218474686268459;-1.2278688658014159;-1.0907193944199121;0.65595514445334124;-0.97041501596809288;-0.53890628345129832;-0.085944806306147301;-1.2721827237997065;-0.59169563693584226;-1.057232235512704;-0.0075017542858145103;-1.8821791075216601;-1.505922052823675];
LW2_1 = [-0.76663596082596819 -0.40920160159146107 0.6162118763843738 -1.0243404214074205 -0.50051275923767158 0.30811000755681106 -1.0370947964722519 -0.30772716725989185 -0.33545292159135404 0.74298660242298797 1.8561394609397226 -0.57550267291277746 -0.18517322448832088 -0.39967741046686284;-0.99860141894444521 -0.49943880200225677 -0.57017902015562694 0.94535151596220379 1.2678382446456 0.002743328296423736 0.081794327500692598 0.016562700984438756 -1.36927169329058 -0.28193403982150217 -0.66755137751762783 -0.15839238315187901 0.46738310859807503 1.3073316237263541;0.35103206540858822 -0.3055081092775217 -0.6238640371748797 0.79363597394408214 0.1269651196077366 0.58514137664787247 0.045884205607478551 -0.056516045538917821 0.8209369450209939 1.1608093760041678 0.49733937184298577 -1.0543045941736002 0.2361629790815164 0.37896092277122662;-0.059666820519279962 -0.75272912853302332 0.61835823146739954 0.87226661049253618 0.46542158395108768 0.53543695920413392 -0.27296981045981528 0.45590663450607283 -0.37810687332249948 0.73347224612635098 1.0188458418218687 -0.18611679646173415 1.0625729472827621 0.53484362714156519;-0.91130656826840073 -1.2473396765574927 1.4249888586260526 -1.5305210079489222 -0.37224476889796931 1.4274188682474429 -0.74652642970155314 0.11032760434093752 -1.0506239837527365 0.50532836654442059 0.21152613200096643 -0.088307677751025687 -1.1423564566953939 -0.51311067819560219;-1.5051155102670533 1.1774179388343011 -0.38817332135182442 1.3590215561953334 0.88754153245938328 0.61428843003673905 0.29769871972897821 -1.6874766737313611 -0.007163932211831113 -0.3869335395353628 1.2920711206807329 1.4670968100057853 0.6816144492153603 -1.5739289591509296;-0.8753758998793002 -0.62434126557038394 0.65924204500064199 -0.78789493026464386 -0.080642479413775586 -0.56047611977828227 0.18827539463695792 0.35097265448636206 -1.1843077662545904 0.27049804053887466 0.76708429663344102 0.24230972743652157 0.27630645116432934 -0.18818980685651793;0.021572830046574704 0.52083946114035362 -0.089977440678800175 -0.71998580055134098 -0.53960290205902417 -0.82296481071561289 -0.19667386373525295 0.16867811791342796 -0.46082050136036873 -0.51337055391148423 -0.20329116650306972 -0.58287891810019865 0.23521608979903397 -0.59460323690729311;0.53279296803286524 0.22531798933917321 -0.021272900282519349 0.051504907854907911 0.89689025311392756 1.6122364914492036 -0.43549600156035684 -0.32280605995095579 1.1992825403180392 -0.41600286429527794 -0.24124952995430557 -0.12481931275256661 -0.62613695494721344 0.82366734010317078;0.3950102593503616 1.3572075055661932 -1.6707295607556212 0.77664414079151878 -0.32688625525754644 0.46809992321841709 0.66791554323339508 -2.1339224633752543 1.1706513588545566 1.0715261832505543 -0.45212138284025571 0.93151793856332743 0.34461742568845039 -1.5258825878158966;0.35025131239810658 0.58767877954215875 1.3702320939413766 0.37679430206633319 -0.46523086202987229 -0.93864858030284182 0.32634221758053239 0.30614620290269939 -0.9722957747105474 0.41660629683081862 -0.33620732696442568 -1.2875351316809072 0.41588232178189666 0.11001853468776028;0.23796811149607677 0.31604874323258358 -0.9684691987766525 -0.67605064773952783 -0.02975895347394485 -0.16187400063093907 0.15019814144723451 0.15364265293584434 0.13650220831789622 -0.67302740139867312 0.092655102907349962 -0.61756367460758366 0.46987461644455808 -0.51075025774409166;-0.83033349898787967 0.07170374412441069 0.95065418709358562 -0.052065873313942537 -0.56288527174249514 -0.92885555773796491 -0.99888986178202332 -0.070684533965745588 -0.83373526654811403 0.040544484065401204 -0.54015018151200278 0.5304962038275457 -0.70298384951389759 0.11487783824663345;0.063816766571910447 -0.26964582707010409 -0.10440493716917601 0.50417448803566378 -0.051601385868201628 -0.15808374287186733 -1.0713987232948408 -0.14238978565216961 0.35963678077470479 0.2141518720965136 0.20027152658722017 1.8663783468900044 0.10221362783848875 -0.54305947875639526];

% Layer 3
b3 = -1.5976335486160593;
LW3_2 = [0.91211861411366491 -0.19749042790188254 -1.5036277236336217 0.71776116180953053 0.98733118548008592 1.1863402364406013 -1.1243221380631632 -1.7849171170916898 -0.74905180633389168 -2.2828404321875317 0.64341189499339169 1.7165887319038298 1.7048447140632994 -0.67093750712237621];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
