function [Y,Xf,Af] = COCentro12(X,~,~)
%COCENTRO12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:31.
% 
% [Y] = COCentro12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.13477698663309468;-1.2750109826542193;-1.6520590544118157;-2.0525394240143422;4.4366459545974299;-0.23180948362304926;-1.0142818888855116;2.0892808595334924;0.86692602203931168;-0.80364187366241846;5.1127148062710015];
IW1_1 = [1.5540503657030944 -1.3347875766836286 -0.048620364326836106 0.011166513982984804 0.13258126117637409 -0.20412496512639669 0.26333201341779594 -0.040197062738304631 -0.074226505924478603 -0.22221607390060549;0.035764542472564956 0.79498445722228928 -1.3951272631720837 0.065963552239180781 -1.4009040319473716 -0.36026561915522265 -0.57458904628675755 1.0306604589095947 2.3689681670860008 -0.72783781280594884;1.1477826286969077 3.3925932932173635 -0.76165624047311331 0.73304795432003644 -1.4578091936345925 0.2936985878538772 0.32285045499893444 0.15830161289453384 1.6495605537142759 1.4490636498069558;0.74003230211441873 1.8054737277656561 -0.76052321310158555 -0.31316531018816707 -0.40036680166318789 -0.83982672072419551 0.10017698339834687 0.041548109701400521 1.6428423547659583 -0.46007757086396889;-1.9870989071208747 0.30883448925491397 0.054499325922248029 -0.26783298815889234 1.6746581002149943 1.0114565584637174 -0.21741311662596444 -0.20838440119618579 4.0042284549604945 -0.2574821779307348;0.50428545186892781 -1.1746102950344586 -0.18127578130025546 -0.32632998149702303 1.2700219833009492 -0.42020499135168626 0.49317602342793337 -1.1124668385754837 -1.2055045489131124 0.2666766591634705;-1.7893053259834488 0.58907763877857888 0.26714310410889103 0.22516262044463331 0.37532803919779678 0.55846392002882861 -0.20407243883434273 -0.22401611260612508 -2.2023503195133292 0.55155096765977496;2.0993201559279431 0.76178259776765322 0.025140021804586105 0.2949380593257519 -0.10123003928927518 -0.34264951436767271 0.28238775135789757 0.12656955086257607 -0.41210000362017257 0.065934246659935997;0.22046191121322667 2.4076974862173981 -0.032697489731427359 -1.2586920378570832 0.17087559933755611 0.10682808338437239 0.056312478212068619 0.67210458605230738 -0.20174713637438701 0.15841483668169867;-1.5155264618801709 -0.28980430087056452 0.048533133986260857 0.60220816026581481 -0.45224196092937696 -0.5368627691722726 -0.0082676556955515734 -0.01454705341810681 0.465056661949517 0.16662785886972487;0.3525835342267718 -5.3259571866426203 -0.13502026201475092 0.60104670006388017 -0.74985774421564144 0.16246057571550673 0.16014462023234818 0.017382039894108702 1.182067303465308 0.49614521786021376];

% Layer 2
b2 = [0.56482476481026922;-0.87037639884516893;-0.076433759663481302;-0.21378770400878294;-0.11156591941265631;-0.82743617290878113;-0.18987849923461145;2.6556416484577077;0.007335187707485917;-1.3095792529172461;-0.21752907179444844];
LW2_1 = [-1.7468162209117466 0.59833884474015808 0.31857531901945857 -0.025947004047780227 0.9560516197293808 0.89696910201279911 -1.667831206170193 -0.092655992628417089 0.45004207373244448 -0.41800528540413934 0.52428675243331513;1.6977085439715607 -0.76129290854480669 -0.052919802621465915 -0.34462785402572799 -1.0020886115098377 -1.0812518985977961 1.5341763797933654 -0.1169822204620096 -0.63341498676872343 0.35822230107445513 -0.16914934634008919;-1.7266933466943373 -1.4647179175833265 -2.0539440733579704 1.3352533882747957 0.66377987912491676 -0.59577173003674522 -0.65688342683364098 2.2433098135326119 -1.1750454729551703 0.1165477728210669 0.22048895034705077;-2.1288116096669438 -1.3442997153088263 -0.31643134012073748 0.88938299456006686 -0.36048581996088996 -0.83629639279743861 -1.0646923526958902 1.4433201679595555 -1.5578066257456815 -1.353955159541419 1.1435150211698253;-1.2571423011882406 -1.67528885428302 -0.40150259327618593 1.6358443335775354 -1.0347796653125458 -2.4869108934930297 0.27642386988497558 3.6210752763528729 -0.98187550608620466 0.40895763209839003 -0.64244943443664704;-0.87057183159765639 -0.29343695072988779 0.75673748645131589 0.34532354467344473 0.085071075308448332 -0.23977648183036859 -0.028379796897462492 -0.41690613114098346 0.43278725506532728 -0.59183704919749569 -0.82068917879732384;-1.7748453572156637 -1.4318795599139367 -0.60788900133460944 0.7522888169667642 -0.20033579873885049 -0.84704052771788596 -1.1045517134001228 1.4274663900868747 -1.2647835507762462 -0.89979137191279479 0.85383700524488737;0.40077710744380701 1.3950771731944132 -1.2576880143045481 1.6887951410014892 -0.058023644763310345 2.6190816534290478 0.43825763309389704 -2.8545050520054951 1.0335064789053319 0.42467198711164522 -0.5788584384629718;-1.0886907774420445 -0.56246592130567785 1.7702916235245005 -4.5675302154666246 0.89126952081150279 -1.9227532350723715 -1.8579121632134878 -2.3585346308674624 -0.24963465648274361 -1.670046610656327 0.1955121150971047;-1.0282345321166122 -0.25947797753231033 0.76105594784821773 0.32881165159112796 0.050904628399866252 -0.20272514741837735 0.035076161213320384 -0.54351646784942065 0.521919196959857 -0.94347518609515857 -0.7216824058483674;-1.6105326905815314 -1.5710350883191948 -1.8065877629765601 1.2501918937744887 0.61428959964283281 -0.81366032369105767 -0.90822860694693552 2.0270900755619259 -1.2008960346172861 0.088626654238269181 0.26925293528152017];

% Layer 3
b3 = -1.2020258317174028;
LW3_2 = [1.7573573196023178 1.5271290454679705 2.3012881337099849 -1.9613861476304231 -0.11268626345548359 2.4239855270196227 2.569691489364843 -0.17093378507844056 -0.14756358509038012 -2.2927636937533862 -2.5502219339433565];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
