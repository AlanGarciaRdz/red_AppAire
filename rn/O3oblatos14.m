function [Y,Xf,Af] = O3oblatos14(X,~,~)
%O3OBLATOS14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:45.
% 
% [Y] = O3oblatos14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [0.12229294678443699;1.2774516126761792;-2.6216475155030667;1.9697460688914301;0.62069028284351102;-5.6375708514597749;9.8194147610014184;0.75125413661086382;0.1256155911145497;0.36998579324274172;0.087627661817166788;1.0175006368894002;-6.0416539144339323;-0.34202590546931932];
  IW1_1 = [-2.0628884474928686 -1.551948991588062 -1.5373964581575545 -0.42713755684258042 -1.3954227275413371 -0.50862628802066068;-0.85575697037143494 -0.075468395535688515 -0.98400454590658593 0.17189588474111378 -0.68586584227846392 -0.28820553333133619;0.90705083693364608 3.0237850429723281 1.23268024413997 -0.62530818289397971 -1.0227775115946518 -1.9622987887334249;-0.79639527788317277 1.2477993561045724 2.1900581398489458 -0.28931436828911472 0.35735555272644665 0.64361351443445902;1.8834647301476719 -0.10394489820345844 0.17639221167635205 0.071122493157968536 -0.043475484247391734 -0.29111952771654337;-0.015228146999815489 -2.4972075993448177 -2.3651844280532002 0.27921077467098226 1.3871820401491586 -4.1447094209093684;0.30693303661297461 1.4264607330466423 -5.956478705752744 14.42225877459067 0.47806952570247457 -0.038413811113795368;-2.9196014203730996 0.42625115744234743 -2.5294802662863827 0.96322126453343815 -0.18199113011610074 0.060906135845708531;1.0153205667625729 -0.068032951703476868 -1.2053522836150248 -0.55806843232566772 1.3819918420817112 0.37995375655209268;0.16749821689832434 1.9964148420113472 0.97756776898901543 0.14838847981872108 0.25634378013353049 0.42612593036527691;-0.014059555121211122 -2.6362408889858497 -0.54418737181077037 -0.17388000566861278 0.039945192251189074 -0.0089191645374487108;0.10186619027378392 1.4913410528453437 3.6834741638878201 -0.87723103201149533 1.0943731042303619 -2.1867189974837853;-0.63992238965873194 -9.606606311924736 1.1809802265846263 0.79268133061201718 -1.244046321029338 -0.35962959223477292;-0.51412046231437991 2.7536365177439888 -0.085251099845324349 0.26161064292192293 -0.19007024009393714 -0.29971883135642002];
  
  % Layer 2
  b2 = [-2.7089796244132649;0.8180521554474024;-0.44664068618413866;-1.7864200037921298;-2.2766161210914579;0.047313887550950631;-1.2463050159559022;0.49410116676151344;-2.4694428620908879;0.70330730933088348;-0.55364171632743397;-1.3232524232851819;-6.2983782154732859;-1.7789756409779551];
  LW2_1 = [0.38490693513579699 0.94988575360036287 -0.61169368912371147 1.5822844801216396 -0.30954239519864907 -0.47582309180775262 -1.6894524202309988 1.5841428497859207 0.67384730049525865 -0.51369331054199152 -1.2167652376381768 -0.026213516740330362 -0.67383597524127392 -2.1816646522927208;-0.79731648296646918 -0.88979604286615899 -0.51910180787308335 -0.52853462804224971 -1.3204882883591282 0.65217867750984848 0.13398690772965471 -0.40477637323511723 0.71187598111116135 -0.28325002004251248 -0.18611316497295005 -0.58448342331377579 -0.20084002738380433 -0.012195213925631589;-0.31810718132628307 -1.4098420545457495 -0.75084092222675991 -0.90760555006689436 -1.2195952411276985 -1.3839805729202219 0.50527646457779185 -0.029556096746129669 -0.020080610384515335 -0.27904471482044657 -5.1947884837367244 0.88176039920011529 5.5592928087331357 0.10287433914888418;-0.24990420819506637 0.86414449481825795 -0.4365716904853888 1.0180465896377642 0.48363613969921837 0.33911688958152308 0.9373824667034738 -0.81856181290681085 -2.3451164612168629 -2.5544975957464913 0.34521553171910979 0.58389732562898089 0.30321323643720588 0.95028576845966561;-1.7565076219275466 -0.14742367450007024 -1.4918619115176002 -1.5882364237979782 2.0662462301644635 0.56277158356549806 2.7197190701371534 -2.5039111960165279 -5.7510123907398807 -3.0081463849314338 -1.9054186828285802 -2.2933383585049705 -1.4463901224033062 3.174952869026729;0.51127450510979988 -1.6142559169928918 -0.12535572611237911 -0.35092000128157669 -2.4102437008837585 0.31026446988645695 0.72736277110088965 -1.4876051053793025 -0.21242807981966655 0.98833359200087412 -0.3068242899440411 -0.12553038897840371 -0.42000133635276227 -0.74197376399156956;-0.10116497468776528 0.25004602990605607 -1.1896954591231084 -0.19576648181551234 -1.1893248157570675 0.60289894733905958 -0.49154983075088748 -0.74925872667432847 1.0615597826372569 0.1295021255533057 -3.4559919496805649 -0.43561014156524747 -0.90330041162771846 -4.0542803603046735;-0.71862640739766059 -0.14807582281996426 -0.37144450204365914 -0.98214692121923819 -1.4173980888836433 0.68103002999624773 0.25418326941323038 -0.52295375682072254 0.79151355193647821 1.5281872646295844 1.8803593810682639 -0.54646255387557419 -0.074522171629693643 0.82975544430125259;-1.0941892074170638 -3.2809961675497545 1.4313834524882842 -3.0263733722223169 -4.7637084173851605 -1.6148357285927484 1.8741245034747225 0.066160883463252204 0.81731136202640198 3.4048863508463905 0.24162840930300464 -0.055635123129540144 0.57699490643682383 -0.091993159761205423;0.92971809969422348 1.3430659440801234 0.94150195481346299 -0.43742757139406768 -0.044468730493293473 -0.32590779517015828 0.074018242081235752 0.26325941528700814 0.065612286997627778 1.9642092857904767 -0.76556158858588763 0.12954753357349258 -0.47791840577331962 -2.2638191050246408;-0.94464973349417358 -0.32746162403849655 -0.9810917188466951 0.52308558751816081 -1.1638111686610706 0.63800548111637445 0.053887271087919464 -0.47363111276596176 0.50853111516386118 -3.7557573398712156 -5.1341617065658109 -0.61423687564440121 -0.57905840271620534 -2.9565352861105278;-0.2109226832524706 -1.7736877030180151 -0.083073071370769691 -0.55156970430404451 -3.1093757563003814 0.17005199624085574 0.85690446721117297 -0.069247283971908102 -0.23353004809184252 0.49504636761574872 0.013581913742582316 0.036246116847360198 -0.38120363296854798 -0.28583127750122905;0.54711894083366075 -2.9671291828955586 1.0989906476715463 -4.7921493176468442 -5.0482566638086777 -1.2651629934154349 1.9677453874640531 0.32617943728042637 0.77534618521485099 2.8936354634967705 3.125978484748043 0.64236985554267834 -3.0998615802050451 2.040942770502177;-0.065565494439302791 0.097643197972707096 0.31965720965705513 -1.4512240277837396 -2.9150751072876115 0.99461108437970647 0.55163716945222108 -1.6213183067069048 0.69905032403355594 0.13502135729414094 -1.4199849207041533 -0.90351878364643901 -1.2012215485123232 0.21306566159062232];
  
  % Layer 3
  b3 = -0.25610345547010871;
  LW3_2 = [0.1784392752660679 -4.6769246322506559 -2.2070764505852201 -0.38357275196597473 0.20584158228719007 5.3309109480285848 -0.63651832077771897 3.1321897370990506 -3.5045018997000081 -2.4121926088544701 2.0515917983725789 -3.6463699211153306 3.5248947271464508 -1.098373268642044];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
