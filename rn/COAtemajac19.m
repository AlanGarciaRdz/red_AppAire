function [Y,Xf,Af] = COAtemajac19(X,~,~)
%COATEMAJAC19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:27.
% 
% [Y] = COAtemajac19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.664126539300899;-1.9484949778669729;0.65434443689062172;-1.1208726640889952;1.119622183605594;-0.11865430890723808;-1.7708121044389957;-2.2506046364270711;1.425397103989795;4.1820102994181916;1.5086013414093755;0.66430323455912688;3.6205200677409972];
IW1_1 = [-0.24753323160300894 -0.93643849856585337 0.13378640987451021 -1.1108652630953699 -0.089926577505126171 -0.47595302228111036 -0.28680491482699905 0.51185767164489837 -0.043968376477952785 -0.1002960318001118;-0.49247642465001673 -0.3013189438298442 1.3373257936331424 -0.086924414504896616 0.047701176388117661 1.0680617673428883 0.28419806249523588 -1.5019812075813912 -1.5318436296096507 0.63572378873207336;2.093340667694636 2.0596997932156826 0.62333081555793157 -2.3194091318833632 -0.17025285312835664 0.31872564519422503 -1.2745936459573903 2.9478176649139183 0.15909567446881739 -0.043520689763871238;1.1068423145038981 0.85359605495179103 0.47544602988480339 -0.58776974069786159 -0.20864309512718454 -0.35644729549339005 -0.53837082884371679 -1.2393599714566232 -0.34190991719988251 -0.78303638052343538;0.66879072614811741 3.0627965054565687 0.11038510577522583 0.035878518506045148 -0.19360084804506394 0.81906676453834582 0.27608266920947627 0.40911146222845984 -0.075882872826993283 0.74330073400674634;-0.97072612382361734 2.6010565607340612 0.13578146721226392 -0.099233674591270041 -0.23997453641397767 -0.94465610092512087 -0.094660880679190512 -0.34188335372256173 -0.15625460040607256 0.25476292623512348;0.34224491621092978 1.6541233111627012 0.8142107729635425 -2.3934231718417389 -0.52623125219230404 -0.3160354963492738 -0.60142423258420852 0.70727495413888675 0.006680280123957081 -1.2381571967723266;0.34118153489584352 3.8437084689738077 -2.8708740871698186 0.8704366919833697 1.2165487587356094 -0.64241275709700818 1.2376326475300694 0.65934129655917539 0.5362779796529813 -1.2263262600172007;1.3522200718241932 -2.2625964933793985 0.57097631628803991 0.34102984332034242 0.84213328810916432 -3.1975888586738677 1.3011781160014841 0.26978272315088714 0.97129120364072963 0.98316003424240295;0.25248175910856491 0.41852718190242 0.05972746994562167 2.0152089582113155 -2.0775332904463242 1.898103957481772 1.9402071229342019 -0.68932727088183587 1.4232646326168767 1.8780341778588425;1.158062633153625 -0.40038738890839287 2.9214560704816317 0.027021044102302209 -0.5571160102661461 1.4066406999691554 -0.92463329108425008 -0.2919389497172506 -0.17454967033988827 -1.6176887038955965;-1.4016160527226222 0.2868753207705001 -0.34668053385332492 0.10727537256436202 -0.12165912541486269 -1.0701694572127265 -0.19857135394270475 0.22551864805889629 -0.076915480771848038 0.2651014801126263;-1.0018740267912807 1.2127668126346689 -0.76631439128365231 0.36642872862963038 -0.43348106178195284 0.00210030094953325 -0.60657633246097853 -4.2465529892262452 1.2768514183125317 0.42988364260326611];

% Layer 2
b2 = [-4.5753750507809627;-1.911915689374234;0.84313010424873847;-0.9715486262442069;0.54552903514981577;-1.042256815517681;0.37029176404338621;0.010936518135914536;0.26767777908320961;1.2619121094340164;-0.41358878590681797;1.7735775766667157;-1.3744085076537338];
LW2_1 = [0.91712508761886324 3.2142980395568648 4.0723550088242151 4.3989083835114595 -0.46025898892111189 -2.2615710250495131 -1.447977873546844 0.37497963823485292 0.43382543811477636 2.1268257001414415 0.60211828790920174 3.2773533586650681 -1.9514027480943152;-0.10832526221373448 1.178780514205233 0.96597339214236466 -0.41982930440939431 0.12241558062949197 -0.29645713697792581 0.59562410387484221 -1.3131822996106235 0.13526261256613337 0.13984376074495397 0.89586995804720648 0.81081357246254426 0.079936658083193265;-0.51553368624980833 0.52705063104669525 0.41991654659125016 0.035211658814932045 1.0871728558259548 0.099531990334777817 0.13982036990700736 0.5024633879621645 -0.091746865841485059 0.083323999667558074 0.10466119139943386 -0.077176053214270263 2.2694423412237552;0.81811917444410975 0.0036820871045076115 -0.62572961206239341 -0.36545803024674262 -0.69286224526885476 0.39421570905951286 -1.1466059005929359 -0.49101536754784186 -0.53211389208992543 0.088681276526805214 -1.164315119027437 0.90262718716281287 0.57528724813208143;-2.8021238696217754 0.34249034948189455 0.44796872044474667 -0.50374468493319047 -0.74886628355947382 2.1044747138715008 1.3520149261922327 -0.029970475324180602 0.086915642733047832 -0.12033258580406958 -0.65156540859626355 0.86234953159753946 0.66113583544610521;2.3803834769265322 0.73148643609144393 0.24333223989013048 -0.41194357161685291 0.33824910975186662 -0.072509431672159896 0.63512682874892223 -1.4772676097590514 0.36739442174060133 0.13858946720750415 1.3112786725617129 0.92080294423098963 1.3830646224314223;3.2455314136687829 -0.6224918704581186 -0.14805119140918288 -0.58656244305710281 0.64056577280960192 0.1314902247686191 0.46312462396006249 0.60881999669988829 0.13262655361045461 0.29164199233214194 1.6046481817007352 1.0805105537656747 1.7870803443306993;-0.62533928486527679 -0.024905028897611509 1.677270001997496 -1.5834735179691877 -3.0974682586764102 2.2294178675795031 -2.1153796779945675 -2.2047593419713234 -1.5498606207030123 0.59072097271477975 1.3698762234041522 -1.6647620978755662 -2.1539180947526479;-3.1996062526968752 0.36051846307611241 3.5319499357306983 3.9811521214941776 1.6706944350780744 -3.9302407856104749 0.16639945383295535 0.34676621519849166 2.1418816113701578 0.22376523286517008 1.4712275498543574 2.9515161619990899 -0.42912424607750715;0.8655407505204844 -0.82205595042695423 -0.62925353547930285 -0.29738072604455695 -1.8117060099565538 -1.5829154701360071 -0.13523300170339889 -0.40555918677752761 0.14481187646047766 0.14618545276420059 0.009181942610410606 0.7293589914950549 0.46937100627769568;-0.17344452058015272 -0.43631227740989004 0.71361109708283998 -0.17795079668633493 0.52315041097596848 -0.189906533082292 0.69944214513239866 0.36120166297121703 0.24615326676678978 0.021992938916278747 0.98747138221690167 -0.93612437680950655 0.7497246024898907;1.2520901399352071 0.44525687986895024 0.21869009267298156 -0.29166237812883233 -1.6575369228329626 -1.7400846600686359 -0.32143060049925565 -0.41747688853651188 0.1261989016456995 0.12014429349737396 0.010052736025104212 1.0361132171993759 0.31067446847219393;-1.8456675772291817 -0.52921211531982693 -0.91383847958305042 0.87361472979480947 -0.5357593215105334 0.091691087435651047 0.4607675854225653 -1.2180586766391057 0.32955520566327517 -0.81332855131174453 -1.2736227720484399 -1.5105475607396441 0.094215707234975798];

% Layer 3
b3 = 0.88511123735892372;
LW3_2 = [2.2031372786719765 -0.86769730675401857 -0.80888431247699255 0.27372771197685219 1.1137884837889174 0.70581985576690565 -0.59472475451086004 0.099117070349966183 -0.15665455522671998 1.0660448831435323 0.94477954600552694 -1.0338135744773962 -0.18933072808089821];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
