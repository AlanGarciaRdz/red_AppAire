function [Y,Xf,Af] = SOXCentro6(X,~,~)
%SOXCENTRO6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:27.
% 
% [Y] = SOXCentro6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [4.0928281188156008;-2.1161938710766299;-1.2378132129276382;1.1573880703222021;-1.6833704875139126;1.1537290405716638;0.86417889329642128;0.34300055347833491;0.34112311734729223;1.6534615399273411;-2.0360821647419192;0.54622040648491321;1.6994018818491052;-1.328853883142014];
IW1_1 = [-1.993565400820172 -2.9533087430953922 -0.046012495217665456 -1.5486069171654142 2.1889559526425173 -2.1923632670004962 -0.55183246998003399 0.033871172210569775 -0.733251298121119 4.0472480321940001 -2.174712646188047;1.2646786177369167 0.036769707197619239 -0.39840717127689385 -0.54137265228672293 -0.23096163369244255 0.8434114263811906 -1.489951670049088 -0.010584343840173385 0.93537165877390471 -1.5921505476755877 0.9724545422815698;0.16315818034851745 -0.076933035275248307 -0.69336932424838538 0.97635951138810928 0.61391437832965789 0.1865090029284322 0.31021798575476855 -0.068105876957435446 -0.589708425626844 -0.45438772765597996 -0.18136310758567803;-0.10866967011187197 -0.56080905052377583 -0.20548209917305701 -0.17116074661490799 -0.3225254025831118 0.4621400376980816 -0.33191780403421389 0.28023726914807567 -0.27687971426752594 -1.5722639251174158 -0.52804121999637244;0.7890178495122363 0.11016494437561383 -1.4636418877550978 -0.33012977163082968 0.3438890553758841 -0.53456258546610003 -0.12833829109110928 -0.899758237527431 0.55163085139102419 -0.30845509375338626 0.84737585611814548;-0.95067044252874566 -0.33194761663727584 0.12726895318521747 -1.0912249159347736 -0.24705491319772727 0.28283807727734001 -0.54361065532166897 -0.011205642780545082 0.54523572042372392 1.8384736414286786 0.93893621315750486;2.3692619165226114 0.049009847252549039 -1.5362295132890091 -0.83075510777857631 -1.3647267699818837 -0.82611264440188448 5.1366796071241119 0.14912940050733867 -1.0831262014355483 -0.93976687562250083 -0.13412833598692381;-0.35667287138880799 -0.16408133178536663 -1.3700434182882029 1.1460947715894125 -0.77385542153425335 -1.3290018669982224 1.0697563244323813 2.1834851031099123 0.40884669206656943 -1.7967589409725719 0.85549944914150089;1.5305053382562293 2.039554674756606 -0.0019942659230089491 1.2133284093457939 -1.7130678850590586 2.3891967947307533 0.95226971143138239 -0.43539703924843498 -0.075178343167991338 1.547485394891247 0.51784379763564625;0.33840374768542031 -0.13819642936773935 0.99093440769722807 0.87611814758756101 0.16017646415508899 -2.0886459616157627 0.022391441741520669 0.90457935913149534 -0.51093446021577948 0.5513247260758779 -1.6990135384278597;-2.3726120478353305 -0.16248546161379102 -1.2464137808057634 -1.0522301372676248 -1.7092061559463123 -1.0917976307390331 3.2623080024640694 -0.23238289716590391 -0.87992793437900818 0.66257913988295436 0.013024297568144267;-3.3151350818678882 0.23055048549276272 -0.44619251715673414 -0.59043554169535084 0.46984754952334462 -0.48011726313678821 1.1785663898255856 -0.72018074827865919 0.3679926639513823 -1.0239545113077422 -1.6134317947402417;0.78679013102850004 -0.39542666484726635 -0.097494008331058729 -0.47853766018104466 -0.57971692589372437 -1.0101285788195542 0.20524927633547121 0.62300021000976846 -0.17916171747955648 -0.93714714270411403 -0.55827446014802218;-1.1503627904400184 -0.020595532186384317 -1.1173473360444823 -0.084562324638760691 0.59884316618762645 -0.70584444143403746 -0.72550771756397958 -0.1435861840922239 -0.26672927531435942 -0.2202954309772302 0.76129196981056702];

% Layer 2
b2 = [-2.0252115915101587;-1.7114235159634388;-2.6508536535325367;-0.11879323493903599;1.5403913402890141;0.15370065748812703;0.78387384374637559;0.33649603652459303;-0.24374042992490183;-1.1893465526851232;0.51189275735037021;-1.2210456614977043;-1.3887869572376181;1.68986763719683];
LW2_1 = [0.2862497298776473 -0.7731629414260397 -0.24095552289699007 -0.90734077442683514 -0.017027892032577083 -0.085722058657895006 0.19146547125168067 0.11108008101067086 0.24269591443709779 0.32084904240501899 0.62313348278090253 0.17190471641312191 -0.71214082422729186 0.45696544409049217;0.65230067632859368 0.6701033515168644 0.23819555289860786 -0.9322616366735913 -0.34771446087273594 -1.670380301427189 -2.066667634161603 0.60195628843611571 0.16586852837716362 -0.93760594305643086 2.4767039553703567 -0.40457824926893771 -0.41511966652724402 -0.74460895547996253;3.1327822260673721 2.1521107891125668 2.236753021246054 -1.5151028196619185 0.19659550748957275 2.5485343671566785 2.2936632370940142 2.1010696456628066 3.7589837913497925 2.0217849395166612 -0.010002452310335364 1.3038394578890204 -1.8064703406571476 0.83634727466106007;-0.6228291007906549 -0.9273234996490991 -0.41691285761570246 1.044939411322592 0.57900075741520307 -0.41718833867391181 -0.5902450178722537 -0.51353693032692349 -0.67171291819584245 0.068585039895557032 -0.25793465169908697 -0.94536973272825742 0.040241308123562247 -0.4699533052877255;-1.2455806936962948 -0.10927342494722331 -0.11300283300846366 1.530442736744644 -0.92738963272009578 -1.3239052907255149 -0.8440066835108605 -1.6066418557121049 -1.5423040123131972 -0.38173910874189126 0.48167185075045926 -0.043821408474642207 0.82679059167768887 0.2923924701191859;0.11313938996242165 -0.34460899739144379 0.639551110348065 -0.32688098743771371 0.23369648630222872 -0.29449859867127309 -1.2344807794216812 -0.16750842335529767 0.3191234474105793 -0.58178221188652723 0.37440778236031097 -0.048918183027327207 -0.20918901907854406 -0.82661533185501823;-1.2633410750044169 0.018457732352379904 -0.26649146058307727 1.198094043659448 -1.697603862978823 -0.16452180423238819 -0.78477600062276731 -1.2798143459039566 -0.72600982361329702 0.79358595932037201 0.47747037805327841 -0.014386555940467057 0.65619758521135341 -0.32640286629263077;-0.3945615532708176 -0.47704411972632199 -0.39485840526043819 -0.11345715135272345 0.43247908812769792 -0.59842578834471838 -0.65422846962375958 -0.65625255258477744 -0.52811166763035311 0.38146005122982696 0.14199453271813173 -1.0987540535123497 0.90918927390582105 -0.45816276995300859;1.0735719134393729 0.21063332774438812 -0.94023812441886268 0.15833047571709791 0.34904600177067352 -0.35138500900370973 0.14208481505220696 0.099026939443657216 1.1338386607798472 -0.31354943197072022 1.3791184792370519 -0.50587957846378473 -0.17860006402300188 0.78812593695821509;0.40665590122550532 0.5280171047982446 -0.044581468411658623 -0.17141013212950085 -0.77745873122117148 -0.1187665374873394 0.81243427715245597 -0.61700763313985796 0.35580657571567392 -0.018544827573627999 0.22309261854199747 0.044323045452108155 -0.99256742831034517 1.361409948170041;-0.21626490388051414 -0.57844376544712184 0.22234982008471715 -0.4523742670413351 0.20404869383373331 1.0459280023124484 0.93061176288015124 1.0955894801413406 0.11285527593670742 -1.1136756227237492 -0.85430325443486643 1.0705007346462039 -0.99487922240926874 0.43469603811286439;-0.76669699224660037 0.2025340581581791 0.44455851663807344 -0.29208125475382557 -0.40234587732576715 0.14760285262394524 -0.03877500699831507 -0.093658313566254744 0.041474494931608916 -0.20417714483785573 -0.56362128850113846 -0.88588782241461861 -0.79014784275185335 0.56394405699200578;-0.45292819192897282 -0.47684439142804808 0.56543328211306154 -0.44813994749922714 0.5983164327462257 0.55064616561519786 0.32193116039130837 0.20215037365945229 0.30818121140939359 -0.50583686757509638 0.30186263717554401 0.4972080089115623 0.26371781706332187 0.41659296218577696;0.5741618442562042 -0.065592674707747947 -0.57948567439653598 -0.13179774684369158 0.62766506137056166 0.1076910501257709 -0.8222696201770795 -0.13533948927562972 -0.6168343806581793 -0.18501973947514386 -0.22233086457719253 0.56207864746427294 -0.67095896474044114 0.33015157156512648];

% Layer 3
b3 = 1.2377516988896842;
LW3_2 = [-0.18423233173719714 1.1655365031875564 2.9947815903011801 -0.59096458131008567 3.0099170653566429 0.055805361268857649 -0.65022096364115389 0.79398504786999868 -0.10122953439849632 0.32256689385850801 0.25816410120773864 0.23333485548790048 0.066589831828894441 0.0049158477631949041];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
