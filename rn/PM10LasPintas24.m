function [Y,Xf,Af] = PM10LasPintas24(X,~,~)
%PM10LASPINTAS24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:31.
% 
% [Y] = PM10LasPintas24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;5.0251256281407;14.7058823529412;0.0179856115107914;0.00280033604032484;0.0558659217877095;0.00576368876080692;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [-6.060318650867873;1.3829509559831412;0.023960944665378653;4.1987202103431596;-0.38787808481825586;0.92053159612916624;0.95660920518946801;-1.4417635023407533;-2.3084777797427987;4.40167668509166];
IW1_1 = [4.1803350921561018 1.7368579306203265 -3.4352027523656568 1.1130843749691 -0.59394171011757591 -0.45116262876791707 -4.2133821062169554 4.0522687373906328 6.2381598883558569;0.53779908730091608 -1.343096015747661 5.6855523739362539 0.88584537126974472 1.0904707676154759 -4.2048656231201438 2.6975500311269931 -0.24567417206628808 0.71023968281166827;-1.341937457288628 0.13372291731305508 -0.18428451755091593 -0.73932532190732936 -0.67041822812885676 0.49624161643514164 -0.13503252956902922 0.032984558822846836 0.5080349114357664;1.6485354721610415 -0.12252158416269286 4.3304987268957333 0.68217044591316978 0.90258219079567459 -0.58809977764706378 0.42783041502518121 -0.098763230611110517 -0.54969717050248312;-0.42939713445058914 0.61867514970566884 0.14006714838507772 -0.54382328504603139 0.18840577130473377 -0.10941147437477672 0.31709440090841912 -0.062921074974684341 0.098690809438733124;-2.3939332559275588 -1.1795332348614349 0.18118755827065683 -0.82053425507675737 0.57870402760998196 -0.67936085266945856 -0.10460877256167632 0.038208909874755406 -0.045984068903935957;-0.30400546349042473 3.7254685623363359 -0.73422735625176161 -0.11300657220445845 0.2666616519499867 0.14213869717030972 0.45647650160031861 -0.37026312174800008 0.24959310803158122;-0.44201868680005291 0.60658528951676849 0.16777019107570423 -1.5040630090648617 0.19398683470986924 -0.10888156304673793 0.32409454913467778 -0.06132448111816239 0.081907902145477302;0.9625355319653115 0.6663318460802018 -2.1640915357796793 0.76936962103344309 -0.4251795685077574 0.23228276493038635 -0.10505938300171166 0.070562629649625327 -0.086748986143336329;-2.8441549250774236 -0.15264902688457044 6.403465193468282 1.2239629887798795 -0.14884483551086242 0.39864609056829137 -0.84441210145838697 0.25127643169055053 -0.64007224235107696];

% Layer 2
b2 = [-2.4366917353939184;-2.5115093158534623;-0.2152900609040358;-0.12079332426558029;-1.5069718523547935;0.49348985888526609;2.5329440237648271;-0.13476859480322712;-3.5777915095325112;-0.95441334450559556];
LW2_1 = [3.9477666928639419 -2.973826907599713 2.1849106905532247 -1.8324579840993569 -1.5412509113325743 -5.9405703616223802 -10.700006434148312 2.157054552559591 -1.8595942464059674 5.0465347488418697;-1.0480341703666383 -0.43976401814557708 1.8204822827258464 0.41634238483842478 1.823748877314554 -0.60364469813387955 -0.66094996610490575 0.45895828836972336 2.5010800388417889 0.76676440654721834;-2.3925106029382683 0.26006577443928752 13.099689993208077 12.792562593273015 -0.73609801140669073 0.43059541387587374 -0.26383613381655496 0.59083792540298741 0.85738473007612837 0.43571344308572491;-4.2346617636880364 0.023002963572364012 -1.3672677629378764 -0.36078273971823466 6.3256608563328705 -3.1074181654700026 -0.72844605315498978 -3.6064060903695245 -2.2696194504304228 2.1371390836302502;1.3051112099991053 -0.039737324901142207 0.69668280879462186 0.43012734152414989 -0.55834473002989693 -0.21105072272902875 0.56446343864653825 -1.0314838609245733 -1.0625729716888666 0.12270786843133027;0.69326109570480721 1.800996195761472 -3.0623246663307864 -0.55758718225122339 -0.17771163107758639 -0.70239007663279052 -7.0518134778486292 -0.27645962817218034 -0.36992709035520144 -0.90908362238140905;-0.47068429437222586 1.4545537808839362 -1.6050566410842655 -2.2610866054767405 3.7211983312623684 1.1714327508877616 -0.76884767094498063 1.8459640652445173 4.1146333318185242 -0.55056704361491304;2.5325668543916082 -0.3219141684512225 1.7362274121687056 0.36442679642001852 -5.8973700201671724 0.48061276874367342 -0.087912957015986545 6.4637208614367498 0.70366940922443433 0.45441850036820008;-1.0072193782468908 -4.057030122186938 -7.6574103510845424 -2.3549893282705665 0.70856559154170184 -4.6868440435829308 -2.0274304884524419 -2.54482173118623 -5.9562030279099645 3.2398899922195752;6.3494490399271823 1.3979093030119181 2.7987007923570841 1.4189604392497623 -9.4680442064509549 -7.5042045298568025 4.6137261507638723 -1.119209658764192 -11.183026587884582 -0.15456907932802094];

% Layer 3
b3 = -0.55032711191933115;
LW3_2 = [-0.019639992212678072 2.021483273460936 1.2183186417048366 -0.39921310581870273 1.0884314357858789 0.0081250772362230529 0.071807820695317215 -2.0225292718858334 0.047260164894114616 0.090380608930307069];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
