function [Y,Xf,Af] = O3centro10(X,~,~)
%O3CENTRO10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [4.2249935296100931;3.6529478100808035;-0.70459810400173206;0.036673389245713041;1.3470253213823711;-5.6508746958812122;-0.37083479826011839;-4.3577481181333289;-0.23106498476905016;4.399676242331668;10.850364059131174;-2.7291521009650732;-1.6012306252820134];
  IW1_1 = [-0.51298219724738303 -0.11602999438485152 -1.0301227221046452 4.2329775463605932 0.60380805124177639 -0.43856191720902477;2.035662077258718 2.8378880970843041 0.35785328355282037 -1.2655915007100424 0.15769536804841952 0.18509012513715312;-2.7317614681938713 -0.26465516913493831 0.0029233465137365163 0.65627332507843716 -0.052179319388962635 0.23530378778025796;0.88320924794591149 2.3138288115263639 0.0721006866553658 0.38890611265394037 -0.05617230041939119 0.053319116375934977;-1.5052303865699073 -2.2091824912345857 0.08529916508195369 0.32276189318777243 -0.36231665967790705 0.20490693669035256;0.73388968714132641 -0.82089693644470074 0.44727632047084348 -4.5162469737070285 -0.74929563595887005 -0.12509670364709558;0.45579127640868722 -2.1416902087040972 -0.15589192797708332 -0.081936883782829942 0.26808876177062418 -0.19637490614211578;-2.1911028820944605 -3.3567283238339769 0.98482524368008362 0.84674407684803921 -5.0407070594843129 1.5246485609262859;0.87522102665579504 -2.6965494546028181 -0.30057769899223918 0.29207983286709732 0.63728773841117614 -0.16589237247928065;2.1339755520549084 3.0911360093169127 -0.78932958228903194 -1.0634120037881001 5.3713104467393933 -1.5109135745601976;4.5546684988765183 -0.37759589257995058 -0.41946927687898733 -0.037287034710485778 -0.15654061644663506 9.2578953857638986;-0.83021349566474956 -0.21087429953907241 -0.97506211452874725 -1.6645164994235586 0.3480707823535138 -1.4048599125864125;-2.1418316341115324 1.4616430535456364 -0.060706289203800071 -0.37360724259543554 0.25022128729934534 -0.21500640496926449];
  
  % Layer 2
  b2 = [-6.2836336237717916;1.3690050413813168;1.1286753433453502;0.1966698640859397;-0.76579973632868803;0.79172491368305964;0.86787682762255602;1.398015741205999;0.46060169950051988;-1.0837354953906035;-3.3311596276497957;-0.48028935452589316;-0.87895873830678539];
  LW2_1 = [-0.37085232041009314 0.81140853243742594 -0.52512516153256972 0.22934350474289272 5.498904480645419 -0.55951999284840381 -3.6969778316717603 4.4857110631160655 3.8322352452989215 4.1175632874260506 -0.54041840625416671 0.14504683033782673 -0.38657150011175845;0.33419374765440807 0.68991147536377695 -0.64877322710461893 -0.35135100639125733 0.29475870502345936 0.74694285519652792 0.40050500000631362 -1.0305094255684406 0.067816489996429835 -0.89642396690451953 -0.15516652029397418 -0.41098898998740208 -0.5939613194566955;0.31812635573736708 0.64540164984638881 0.49540245922118437 0.64559324088411219 -1.93259011750859 0.35094859134818734 -0.79222572755052012 -2.4068166178391519 -0.073182891296893052 -2.1883303308704738 -0.14839475424232559 0.17393153791758703 -2.0164981157499815;-1.0581464684710689 -1.4644333967342853 -0.77147351318225466 1.0547129816309129 0.85879047124871166 -0.34258365126056295 3.9173908943499351 1.3934080574562209 -2.770102893045431 1.3086143910194463 0.2084973788449952 0.28239496844107287 0.95037798910750493;-1.2958205163340097 1.8373427356721286 1.8246047111338286 5.9766799479491803 3.2741020258624562 -1.0347172271883784 3.8002574756991865 -2.3382612863681875 0.30958106348836484 -2.3103840683901895 0.3696000603013489 1.2277862969485513 0.9066951142598223;0.54578646395969077 -0.40508732562223715 0.062535873924509849 -1.3357245688179316 -0.87361601523478283 -0.91661787352236412 -4.2420631473875607 1.9136935383312754 4.4800425491352254 1.4776064515817475 0.30498670364542546 -0.31952823710367295 -1.1867114278563013;0.36802989324590196 -0.25255237193587465 0.49348901591867156 -0.75653490346846386 -0.061224765477291686 -0.69602840408386857 -5.0159134484403891 3.2481836919436051 4.8720763617284071 2.8517634557444484 0.29504799035871532 -0.22817596159472231 -1.234682658834122;1.1277414141042112 -0.076756129966990272 1.7064320886867714 -2.8902089424260726 -1.8999751944905632 0.91335536553970564 -2.8967832579434538 -1.5948152921220262 0.88534142128579352 -1.8132708752940576 1.6236724200980091 -0.11851190140469832 1.576958634993622;0.67501015081368498 0.83552442842635155 0.40424682728802303 0.22692784310214939 0.28777543353646612 0.12009517401327101 -3.2820374030924016 -1.2473545419563667 2.6009848234056716 -1.2376460481675826 -0.097612132235967347 0.02608609195126553 0.10930349463622259;2.5908165212242587 0.48844953383735507 -1.6112324797321607 7.447053103347435 -2.5456394145431482 6.4532180628228373 -9.4820928377227744 -2.7436621988465286 14.937003263251087 -1.1978362378876566 3.3704087509221674 -0.78675783457893644 5.7764185149788672;-0.62813414416271918 -0.060016518851540121 -0.19709232684827027 3.8515047530512114 2.5048920864637734 -1.0255947181941496 0.99578381880618272 -3.6123597938048495 1.391896306839393 -3.5986420224856395 1.101562178111841 0.50762191575079973 -0.74055523159999426;-0.42526163418508711 -0.5338014421159345 0.29958795239024094 0.34253148713001336 -0.12360743830826203 -0.54215406967563096 0.68183071157456887 0.23616894073412284 -0.36150013573027051 0.16890118101320903 0.12191120857190216 0.3977609514072622 0.81751762011821327;-0.066561255708991379 -0.48506284976125263 2.4908032540788358 2.5989768136465159 1.0246314594788102 0.5308940970199808 8.1019362939364434 2.4695641234866148 -5.8534714886293102 2.3970013430826338 0.039598888669462061 0.85183071191008186 -2.1682144172237607];
  
  % Layer 3
  b3 = -1.4710778769132589;
  LW3_2 = [1.2622239462283737 8.2305326449321505 2.2113328446358862 -4.5727182241065005 -0.67851497523406989 -2.8041347619021457 3.2022057286954064 0.53664400399851298 -4.5827625019647451 -0.12115455992106887 0.9315699843479136 8.6881154665334748 0.47113660774584132];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
