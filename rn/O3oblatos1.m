function [Y,Xf,Af] = O3oblatos1(X,~,~)
%O3OBLATOS1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:44.
% 
% [Y] = O3oblatos1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.8160185605002441;2.2190472738375369;-1.1942691297604999;-1.1036538344942985;0.55722042481655909;-1.378078390479224;0.34987565087944417;0.29934943823956228;0.65240688966023319;-0.25483886474099254;0.11635670818457597;0.37128655657104009;-2.0138878471699142;1.9279141445609562;2.6965472247874729];
  IW1_1 = [1.5241363781771324 -0.23703739792865527 0.097240811602843508 -0.26389902551883726 1.0622805247970335 1.1955716802521243;-2.7251092382792788 2.3326773000708787 -1.3945496405544442 -0.13643454574295744 -0.62286121815307838 -0.43185172859810877;2.7702614163833341 -0.89512493013638295 0.1608053128902498 0.085180124074182614 -1.2244515966552347 -0.0081239407171255357;-0.2739689130027898 -0.088042203377331471 -0.45340143049740406 -0.0086990169925670116 0.23867306026834534 -0.74967937346335889;-0.54330033480708684 2.874243751074836 0.11557986006706068 1.14140551381237 -0.33740257269495583 -0.29761564706150501;1.5256740977538656 -0.065988245446285107 0.25794976705923223 -0.11063365385155581 -0.46613597901208775 -1.8064174769939776;4.5842137103947405 0.070341423166129582 -0.29920395660976623 0.10162507567355258 0.27137987721511747 -1.0461535685257537;0.55643343501908404 0.435854463479734 1.4231714826800266 -0.19240482856118277 0.039053117582002507 1.0376723506196324;-1.4142696296814141 0.92815807635973113 0.32204001671343613 -0.15966690313659337 0.057181285690540234 0.24771146957957196;1.7547665842077007 1.7736888841280738 -1.2538113049562727 0.22373992035481707 -0.095298578326303285 0.040785105223646492;-0.36301552937839998 0.52953117203793887 -0.06815689042226146 -0.075414733800369199 1.8493876510492702 -2.2994161096092549;1.9081812849189221 1.5864752152239774 0.1952676587608512 0.13260720077498472 -0.38051516093096593 -0.64218154768150837;-1.5436814497438294 -0.24773371993562984 0.9681416470425922 0.55678341844860701 0.83090684342455556 0.043352468588234189;2.950010519704612 -1.2605316799016972 0.3156593243187375 -0.30989658969809908 0.018359421132081374 0.43592509875276003;0.75429251550837928 0.2040774829558924 -0.60023157016175777 -0.019083036944430105 0.028365916688233503 2.3150595108758538];
  
  % Layer 2
  b2 = [1.9427867096160354;-1.3003328425058958;1.0459299039012715;-1.0638960439336709;-1.0229177527003002;-0.29374700558828726;0.5836415425506124;0.06399568953394319;-0.41405765660068206;0.1955891137389445;-0.87637787637805808;0.89347947081678714;-0.74687801987321478;1.6032268579505107;-1.3971133901371799];
  LW2_1 = [-0.33595654490760507 0.66060006162158946 -0.38307815813087676 0.065838219607012527 0.34242686341853285 0.14931214507483437 -0.12936377223776444 0.15281149417918891 -0.41199134428237455 0.97627717240132816 0.33854456678765737 -0.026431834217547558 0.27985711925950651 0.60559705657692597 0.38058920941771568;0.31385735138752374 0.0015696727602899085 0.66270521158387163 0.44757514849993896 0.84344937381596474 0.60158089670804527 0.52868118787418694 -0.34824086422459799 -0.58026425650052016 0.31923751384999843 -0.53128165929258575 0.029509192822594756 -0.38211742646606406 -0.44635554740671168 -0.55525446285908586;-0.13652179399626613 0.65745923637674086 -0.86572212858996167 -0.54919091729253589 0.2653262183159476 -0.52571752740800859 0.85278406964073827 0.6474130249568637 -0.23324075940432823 -1.53515803626686 0.072665782721887368 1.3559978376105157 -0.29752839837575074 0.15872443774497694 0.21480107143999658;0.28739684122356079 0.53006204631497689 0.048854646947054131 0.80656645897611579 -0.16527247836087561 -0.6356214692774339 -0.69405526879453716 0.30791001416601571 0.13853564571300875 0.053301142364898517 -0.95430656722860907 0.03928916805121499 -0.23635461930307408 -0.20701315725820285 0.54303901648326502;0.5791160723823674 0.08738344864174287 -0.50173088585903958 0.9833762112169836 0.08012340566782658 0.80224071344954373 0.61986770697631821 -0.77493494842702138 0.53762371427570144 -0.47399031982295231 -0.48770097518786343 -0.15826560350844379 0.69440779201764746 -0.34124589562405255 0.49707291686827404;0.74960769107112191 1.1040103300715804 -0.12101475804648415 0.18075560223745324 -0.61940897386909799 0.1309533478229698 0.62527084519703902 0.34843326855394441 -0.22690754438217309 0.61859784594583012 -0.45126631821182278 -1.5859047449634576 0.88263753988420046 -0.90773485307716995 0.37024681452058938;-0.97870045014017648 -1.0173988148212814 -0.30786900909922132 0.52988273430738098 -0.18335560415994773 0.22118409494991936 1.1144218053932675 1.4482376250623308 -0.29686240642722578 -0.29056713385001698 -0.15099409031973968 0.45519523288931124 -0.62155377333515915 -0.25199840908023757 -0.92985027164897938;-0.68388051877578471 0.85781723671944232 -1.1459942629185607 0.8642546611494426 -1.1301281870259492 -0.59794162861032552 0.38552800540453053 0.72621988499929202 0.5793973706056017 -0.59651742774314132 0.58436515334254391 -1.0626789239661618 -0.058043773012059714 -0.23114329632581235 0.434808722925765;0.78688306046071343 -0.27928358969305817 0.16999421744948218 -0.71904159517545119 -0.15758021403105404 -0.85268680789999096 0.065785068373383784 0.29017704829944946 1.4169022127139921 0.50901552877109324 -0.50610417645124572 -0.86549419904899239 0.88668309059445061 -0.11218115638061051 0.62597884951520211;0.08330298440020184 1.1216999630494309 -1.0683150303977385 0.56330743498410707 -1.2889681250398124 -0.80863909468404849 -0.36671189310315111 -0.33711874023256932 0.56795213222519658 -1.064690281771639 1.0051168906830181 -0.27789177025444334 0.15749149760443781 0.49345776718226936 -0.63858867750878101;0.86282975945838358 -0.018970770598149715 0.67201873640044596 0.49658237568358082 0.36661751729796693 0.67880196199765797 -0.18028852249668142 -0.18748524280969406 -0.38755820196623669 1.4189497631293053 -0.69034914741013087 -1.2453825499200031 -0.48895272535880291 0.72380195830404814 -0.19689871192290628;0.74461443937702909 -0.089690373939215945 0.2958706141386806 0.29806688201634185 1.0281916601107202 0.41541673157346354 -0.082263634522043008 -0.37158810871149406 0.89082970187502475 0.68352665517893951 0.43156703117009065 -0.071376906030171106 -0.59425271597350582 0.33809956737823921 0.67379764275337695;-0.07203767489435732 -0.75120792370696066 0.73477288524744289 0.33891163452157097 0.44810759447273918 0.48096747259719097 -0.56728632860943928 0.13429875180532674 0.44547212913937206 -0.058305431405074812 -1.8713180194050973 -1.0603102034667551 -1.015500287703849 -0.43893602541196441 0.49662200835797338;-0.16400845575067771 -0.20232147389440225 -0.62490351566832203 -0.15997298498924248 -0.11840784725953042 -1.1515035319846885 -0.052243036179432323 -0.34979649268532731 0.31131102381905978 -0.70313831722940745 1.0501364214699545 -0.62494368463236205 -0.28797361312633035 0.14557466477759301 0.15356595101920115;-0.34916191239073907 0.70192306409333594 0.51870678535795012 0.40602185464868085 0.13893007809684649 -0.03693181533338713 -0.91229521729004637 -1.2021564547424639 0.33819448958366993 0.22447552755061109 0.15844022449376094 -0.15696044702616985 -0.13002931064462384 0.35454187499544687 -0.27928866986910755];
  
  % Layer 3
  b3 = -0.11211434541110671;
  LW3_2 = [-0.72363309395731468 -0.66164368038378818 0.95459094958043478 0.24357260184259885 0.91330141190197178 -0.60086403725644244 -1.0187263601157428 -0.65487950995759625 0.74087269825798152 0.65863722524734392 1.2707110605609748 -0.30075302323905934 -0.46119834525668574 0.53718766939074225 -1.2433244519174484];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
