function [Y,Xf,Af] = SOXAtemajac11(X,~,~)
%SOXATEMAJAC11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:23.
% 
% [Y] = SOXAtemajac11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.75400778392862233;-1.8342470602619285;-0.45399109965715967;-0.89197214209614017;0.49538232347606814;1.1234724615087957;-0.72355627233971997;-0.61336902815874605;0.11440726187281028;0.80334401592580007;-0.31400754137076908;2.0778451430068339;-1.6419859564970738;2.5553633507280091;3.0114457449732726];
IW1_1 = [-0.68788811026907437 2.7710744686130555 -0.47414031589583155 0.98985673029098109 -0.26347249788718385 -0.38693977440271077 0.77404217892108262 0.91094482759286988 -0.082873447463399849 0.17229467332601317 2.1137291657836559 0.90553553919672558;1.4458378428273553 0.40290144153451868 -0.9182092783909992 -0.70134564192423177 0.77009582111378461 1.2505418464078242 -0.23553985768764885 0.24069049778247359 -0.52381106451488602 -0.22413308744886332 -0.68725669824190594 0.092944947664314506;2.4641844042921526 0.49753543869957612 0.23864699481187096 0.67436396764294071 1.0014920448295164 0.88583482866805874 1.0790943652563771 -1.0355164748076491 0.95180329418398557 0.368660402747639 0.013011278711098917 0.97537354338331317;0.93129926400366758 -0.38557681108578479 0.28137119215790846 -0.17905416258037943 -0.40849533856417947 0.1965284517760269 0.2274566824024544 -0.2125026916727458 -0.017166760310256685 -0.092465746829825834 -0.22577407691561016 -0.14349125131722384;1.2065390439489563 -0.986312616030673 -0.3048445792634461 -1.022460826801064 0.87955747707770171 -0.76912926960726902 -1.0465203400393572 1.4104659793074377 2.7732384989585324 -0.11478589495481532 -1.3943429440559432 1.2069967220195297;-0.48302923023015765 0.93063778256153573 0.019612824820166991 0.67986851023335493 0.29802233889221691 -0.37798737507677682 -0.16306570555220518 1.1028409201100819 0.59148150935092947 0.39747135366224917 -0.32823209106036838 1.0373253312605819;-0.62545675447667659 -0.75915860314494166 -0.91930321327933862 -0.015679822016129413 0.051208878421643213 -0.44735756695504775 0.35625121716356883 1.2434154122864054 0.92582619959752532 -0.086247603722196461 -0.54512669191431595 -0.45583997058244125;0.36855673595315658 -0.39349535719389112 0.23944919958377719 0.84343743828133921 0.04123281168106617 0.57913263770753587 0.86558849938988125 -0.83566171800840938 -1.3314432472690614 -0.061624285411559086 0.42426645995118328 -1.2319437874471493;0.79325394641529456 0.29783842323698279 -0.23691750150416452 -0.33949122406789428 0.33737722874553333 -0.2068370568009858 -0.19488412813030304 -0.50476303324179905 0.9688478835186819 -0.19853732444974451 1.1508634163874261 0.49343210062096066;-1.6870524380236585 -0.3544083087705846 1.7758053691002655 -1.0315248149888676 -1.6517651058223803 -1.5884722474708615 -0.65036289395087177 -0.030470603309992964 -0.12197461554945931 -0.34787332383510189 1.1752369863410774 -0.67336082361389438;4.0238932088194055 0.26775796014185704 0.043436413509183036 -2.40608526781687 0.9522596487355488 -0.67555517476682381 -0.83427805104079955 1.2248568076623232 -0.73270892096830154 -0.19217432636312148 0.92111689388968299 0.48446521725088826;1.2355058638577705 0.78416631797786407 0.53149560553407094 1.2812894705114477 0.89550190489478521 -0.53191135793801403 1.3283374017837803 -0.53449073754912335 -1.7905019803130295 0.012482084971055326 0.45778119519003124 -0.58308905759677676;0.81189731393152198 -1.461039490521221 -0.85692574339828509 0.1584573886793659 0.29540528093274876 -0.40130970832425444 0.042541675488372496 1.2561582662590183 0.94999174196635405 -0.24658234383441918 0.35861674005966981 -1.1869252288064716;0.15328722923991453 0.38383060962407828 0.73278165695051545 -0.40615027407190513 -0.23321903050508397 1.1451589468525374 0.29113040498375498 -1.1816123644062642 0.37150108627207479 -0.079979798184862172 0.93151896891369013 0.6313260794112342;0.012078427507157574 0.61498640894491985 -0.079602194305535667 -0.43917188009117175 0.20641152636363383 -0.094466040320417791 -0.24703540195269275 1.7270414423691665 0.70716328153900365 0.014180835210519242 0.71613093309682863 0.80192605954735352];

% Layer 2
b2 = [1.9060653468153237;1.634543241448676;-2.1362712187768578;1.3342089905568606;0.40058837254903079;2.0926106252701695;1.3403202781213821;0.65283718447446826;-0.0847322422812226;0.25477602542398947;-0.62600784247032615;-1.1227694332693345;-0.41305698954024372;-3.8888224151584048;-4.4788802460366623];
LW2_1 = [-0.58991304337860573 -1.8255112117338435 0.50537263314133529 2.002217517611864 -0.9533360030820438 -2.3186569813796178 2.8141283589843433 -0.070356764267171412 1.3132532364030558 0.64672123674092574 1.2005149478106363 0.15827980885400084 -0.25746096356010378 0.065478673034233117 0.47638684500773359;-0.61113072437254512 0.94327847620984984 0.092941348058911494 -0.46085785304946963 -0.63557554260940896 -0.79594045023679627 0.28970557893581056 -0.58331411553776369 -1.5586951775119935 0.90768897989326436 -0.32714741681835968 0.24716551828039984 1.3197363503829742 1.5641227057961125 0.43828501632488293;1.7220630661892995 0.96389637009241613 0.25477835117552738 -0.555780797890853 0.44323908594073158 0.33573983393392459 -0.5166135621491913 0.78057832516568371 0.11390885493761102 0.64494824722574784 -3.7539326497856691 -0.93063946676108233 0.96714668607791343 -1.215673283372346 -1.4584372146448021;-0.52520633945424455 0.81577760191983284 0.10202927951984619 -1.0360693763229545 -0.56431494361615619 -1.744108520511656 -0.46467481044666081 -0.31660922346163078 0.21155825382790514 1.0502312487341037 -0.37614143608705353 -0.3197083690294531 -1.2055265924546761 0.088581810523266524 0.04116047528892823;-0.35182345944831506 -0.087513898011345848 -0.10395655111444657 1.2526041265265531 -0.31186747019448391 -0.69760672791012712 0.58251469017348823 0.073377417133995426 0.31109139488264087 0.2502919216135705 -0.40248999791675161 -0.1604247847580057 -0.63054329062224745 -0.13913138923121895 1.2029029110950795;0.37550753529989245 1.5767042766651844 -0.51279175574043168 -0.47099663110845624 -0.16708091947503539 0.42388278021642756 1.3139145533901202 0.89865576938183067 -1.2114185444238215 0.93999854547096728 1.1599407228172469 0.26258600348000072 -0.10786006146385455 1.5653965160621945 0.23274518724575452;0.061713308401206805 -2.0231083397326981 0.83548042870511585 0.24890326894476883 0.078965561246640323 -0.37957178466767505 0.57912712688581913 -2.1008901569067806 0.24912263799709805 -0.84571816119438448 -0.2036121873863681 0.62703696300643852 -1.0730203561906766 -0.12207170460539309 -0.95722685116634576;0.64604695111802335 1.5257786861835005 1.6868633706803533 0.064498487910023827 0.45413509103401445 0.61720888928426931 1.4880626373386072 -0.38493761785067471 0.031959601436297544 0.82207994787599248 0.59814720175503588 0.27221695938839718 0.51198594346718862 -1.0786892842871563 -0.081518918160128018;0.21176800777296242 -0.089148016927639448 0.33914059825910475 -1.2507418245089628 0.31853553540372337 0.83309133404420765 0.35225775933183467 1.2296228445315143 1.7723774075691603 0.79053933697117462 0.63722319825029761 -0.10291292794615219 -0.49661818044688844 -0.66039612864069708 -0.35046638802585756;-0.25606181291097901 0.43015916038542368 -0.26003545145044521 0.63197622266337927 -0.38832169791988236 -0.72902431115606947 -0.2828528795127711 -1.2342715984591632 -1.8532767734247755 -0.080321188453397377 -0.30469530923607524 0.19260233875200353 0.65798645745209972 1.030829015849603 -0.50937980201847533;-0.032130859747575215 -2.9796654487836363 -1.3752873475019469 1.6231719153764927 -0.084318756726315128 0.064879996369919785 0.079537816947160458 -1.3924996817987176 -1.1702525445876024 -2.4694096017576914 -0.84243622371448124 0.37174187417651022 0.45867517106553274 1.6331237890618697 -0.84083769356306903;-0.15350412825116749 -0.18716504270117446 -0.56683029704869181 1.3279032014940175 -0.58444849187725612 0.37443605570803606 0.36979285216048607 -0.43802132335317362 -0.10245737961757166 -0.80549356574832487 0.40537512560341654 -0.52473511414629426 -0.5996141948405489 -0.46779952092920046 0.33861406603452837;-0.053939813745850905 -1.893929937287425 -0.39294860257660835 1.0865593889005516 0.09346931525773966 -0.15282119726967666 0.21642224330960425 -0.17192709706176665 0.24774579170665836 -1.0703381179695381 -0.678621867766663 0.014590466990631167 -0.37644378090251435 0.26807964765664016 -0.20511041235968638;-0.35854408264091497 -0.9248964919487892 -0.069299033162979862 -0.35806589011936452 0.61088212337042724 -1.3398627062044548 0.13257812161506405 2.9492515138001765 1.7729527896813662 0.22021659344573896 0.045308321945913298 -0.80746522300671364 -1.5851005674229879 -2.0996612094908365 1.6800690636964282;-0.45449009180782679 0.75908784761586334 2.6503310914335447 -4.2754348630630421 -1.3987739783988795 -0.46547446319240421 2.6092612076760671 1.4842000181129067 -0.27231070459339474 0.36322466922489277 3.0312873174041486 -1.8387523636804504 -2.1759923771720522 -0.68666688666401665 2.2832598459313487];

% Layer 3
b3 = 1.2197010032264748;
LW3_2 = [-0.2078584969639487 -1.2157545217989678 0.95262858913143533 -0.61930680735581312 1.386646792668591 2.4643769978998029 0.66733606493060604 -0.64252038558734437 -1.2819701749009305 -1.3262728282424643 0.9618148450624262 -1.2856105943122507 -1.6194444385144151 3.6050004286474544 1.1548556292698013];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
