function [Y,Xf,Af] = NOXMiravalle10(X,~,~)
%NOXMIRAVALLE10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:27.
% 
% [Y] = NOXMiravalle10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;2.48447204968944;15.3846153846154;0.0208986415882968;0.056980056980057;0.0063552589768033;0.141843971631206;5.12820512820513;4.16666666666667];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.61986411629425575;-2.375838780645986;0.8899871077842838;0.17138243462974209;-1.7185538910246472;-0.62573868175762426;0.32194917677772589;-0.48283353481111752;-3.708304416446;-0.10648950112004993;1.6514589787995877;-1.1256965406813928;2.0761477107089035;1.9374437478860711];
IW1_1 = [0.34836710938448873 -0.028611199886733357 -0.31648578181933362 1.079581614026873 -0.62254712860609618 0.29947128751195662 0.021341313504212991 -0.050291714502388514 0.14024954131372386 -0.034571884050036444;2.872306114289104 -0.33604165396947083 -0.68100909155060818 -2.1458110543533615 -0.14473180563218968 0.72565106040723726 1.7334203876849377 1.3622562154362992 1.3144476683740987 -0.47963661161004856;0.052897044862158502 1.1764273136369801 0.14845460502892849 -0.45436063124571457 -0.1705167149883236 1.2654428499399952 0.60388788073869182 -0.2188390741404995 -0.15428107854495765 -0.23624369165803066;-0.22240390905690871 2.0386802390628782 -0.33232071037247918 -0.15128708469948837 -0.3279732174886586 -1.9506595053752684 -0.23484152272539477 -0.11592368454176745 -0.14310330076155089 0.21548415603819837;3.4445505060590573 0.95526013110211683 0.038509173232691568 1.6139890341645922 -0.44162180141547547 0.72512283051161464 -0.43652568587335411 0.91412139609634324 0.56201979035405281 0.046986918319535567;1.3269710489132778 -0.53646238253272827 0.29060136836307526 -0.99270088097295395 -0.21339738871052799 -0.43095355858231255 0.12876020539118402 0.50112979757891218 0.10025406625566206 0.10313800790794127;-0.27685864436307295 -0.78552465154943529 0.11897836856045199 -0.23145442305848127 -0.2241534110028717 -0.11762811797793848 0.13516812187786889 -0.092643042612262416 0.16675463240335275 -0.0094160536789613114;-0.3435075744618491 0.73292781548306563 0.30129668644800517 0.44128969064403434 -1.0389642084553712 -0.12601557127204477 0.28449178966579569 -0.090283155279538424 0.087972903515364534 0.044225110779774368;0.098042138151452143 5.1386801444762904 -0.03541969720841847 0.48766606568201259 -0.27414826895949196 0.17278310783531309 -0.057288775460700644 0.13422380529728836 0.075019535549862196 0.02412928373074736;-1.7521013940119949 0.78053305834898079 -0.390931830300495 0.11997053152490113 0.082437593168142448 0.37720958251282793 0.027850955937098458 -0.4133408110419029 -0.042779212627664924 -0.17207400290771735;-1.2509901523916405 -0.15023987743866132 -1.6945464068779943 1.3708326521425143 0.10592064147483995 -0.57483585422164873 2.4117507110724583 -1.1261537001959052 0.5998552916684019 -1.8144262996826424;0.44997653144043104 0.9038541276945995 -0.08212580614077622 -0.80286354813372707 0.85166133954165968 -0.12033862049038661 0.025500228812949208 -0.2599550832075197 1.1199872476249848 0.048969525144472809;-0.0027894202868764262 2.3589999836423141 0.19017200096108192 0.46512620656493514 0.26759269401460428 1.4045696663678291 0.18589882473088787 0.17856073453701626 0.13223588372368608 -0.11677257938077627;-0.22613787016722953 -0.71731827099826428 -1.6460884562948532 0.72871138794682455 -0.09736942795659087 -0.3869653908831045 0.75363439627368756 -0.45176249927633472 -0.99415645938224073 -0.68384340521493259];

% Layer 2
b2 = [1.6683861877839667;-1.5280742498396109;1.3692055242782704;-0.21688820487008026;0.23617806760971746;-1.1112991113227493;-0.22776300750594886;-0.79155151388030465;-0.82290744498657953;-0.35612301515042333;1.0779162645010389;-1.6300929123151344;1.8335880774848656;2.0336390532395807];
LW2_1 = [-0.64551604683569941 0.76547580215036048 0.11236913019663727 0.45082592878093508 0.59848332224210909 -0.1173218525721467 -1.2869517896551352 -0.33092098278165943 -0.55028401282847061 1.33369242003496 0.25798687390687708 0.47963156681248398 -1.0589818826442465 -0.98041993859360121;1.3522554714676611 -0.30654567089874973 -0.71369145932151823 0.90029133214146517 0.43226566686256662 0.80261443143415301 1.1025610958625374 0.195536531247757 0.78652445828203299 -0.50168354067349841 -0.61077246883538805 -0.26509636647197532 -0.6371441291843738 0.030867670783189551;-0.51275634633117861 -0.10688828506232703 0.7353648855779501 -0.34172393417486269 1.5171822776030806 -0.61952584800007027 -0.071170569972405506 1.0985750466032664 -0.83515722757963184 0.081423265100299638 0.73875378177655948 -0.70398065024991785 -0.079835804662946042 -0.28341957620116787;-0.18252824521541627 -0.61732597281575197 0.13530435597092361 -1.7310977029409085 -0.86113127295667091 1.3970695510497735 0.74533793551974059 -1.2750222016234505 -0.94568491074233374 0.23952387475458917 0.31334719494433272 -0.16733442057425962 -0.28551187735195099 1.5985742244594618;-0.063833130952557299 0.55802401294386061 0.20889417198634938 0.43987895701509927 0.17333089357394021 0.21550561355078379 -1.5421362662299536 -1.1359297233958014 -0.26497785530750834 0.75688648116921797 0.55141620283741111 0.1218804234643619 -0.48097530945296491 -0.70480191700241945;0.93905243173575359 0.72054961620885916 -0.13536881507684856 -2.2319752171696581 1.1344417321576079 -0.91555281846138659 1.3834097219639134 1.0980458261859383 0.99861160180794639 -0.010622022627710725 -0.3843337575393132 -0.24546775281957067 -2.6076637166076013 -0.77014913802174012;-0.72622867811250669 -0.01023265991145203 0.77366340862674854 -0.95288505196827544 -0.6206831923093411 1.8958650784506548 0.90360386498425949 -0.31501251049700513 1.1876139622020738 0.0066518402556610678 0.16336161253843379 -0.06943814957508436 -0.25209968113951858 0.59248900343071831;1.2886700023550894 0.53059515529669898 -1.1476283201690667 1.5741328181261007 -0.71187197234453903 -2.47091084127034 2.7405461336120229 -0.63261823433528419 1.5665889008767784 -2.5916125167508928 -0.70787073980154769 -0.62557446348274459 2.1234830248066472 -0.96591078657163387;0.43817287428498608 -0.11050034878637655 -0.50177982147436839 0.49308452898584859 -1.2191265299035217 1.6125489277091849 0.02023934438852576 -0.9578539130092234 0.82510286174944203 0.29546124185448269 -0.4458660643979015 0.58161181092178982 -0.14700174487156215 -0.74980261086978106;-0.77100048818488609 0.18108261919034058 0.32546054163450705 -0.59499378901163114 -0.42459097517973193 -0.5136040878369923 0.68938604423349958 -0.28617071418044604 0.43747179052647223 0.17881144071544261 -0.89323299563915981 0.27064283749520857 -1.6480973476823542 -0.37111120390542035;-0.13775762958287679 -0.37292822824358923 -0.48872847883580206 -0.4190779079357102 0.77166382172511749 0.95907808376401171 0.19670141484383646 0.39769259205972607 -1.2014372676926997 0.27920348432194936 1.0790469332906694 0.62462476616788809 1.1474789746201364 1.1263715060702482;-0.28474648008979242 -0.43948951855283697 -0.21442111171889694 -0.22201232225961154 0.15321438959351755 0.23074144369904009 1.1009009448413416 1.7666910354384733 -0.31562404057141491 0.31949897845563691 0.659173820915264 0.20353643161068427 0.22736627489743452 0.51815920105122093;-0.57772237389472225 -0.72516921924889988 -0.87346974803550415 -1.0797142805523374 1.1581604077706589 -1.5738072032449766 -0.16954346433204867 -0.55772178623286706 1.8609707331501641 -0.10587904467855438 -0.20585464373802043 -0.81495800969884002 0.51161581117440624 0.0091710876340545741;-0.52045079639144054 0.3781182396923084 -0.12027858940342234 -0.45187388321920158 0.66118670346297792 -1.2777832980774364 -0.33628077099244152 -0.36388363781602523 0.47943860387373372 0.10145493652307559 0.27756025556444419 -0.1781361474112852 0.65268442901268897 0.71439889146200874];

% Layer 3
b3 = 0.51727495679194935;
LW3_2 = [-0.34290140309200384 -0.92227963164779925 -0.69187778418734713 0.71344007062202097 0.60904237476025525 1.5591839826780181 0.10265543124853226 1.9658257374403783 -0.98533455522552427 0.12690642154856782 1.8753995394365492 0.44918320729426686 0.098187935376482904 -1.4708586336171579];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
