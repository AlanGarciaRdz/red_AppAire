function [Y,Xf,Af] = COCentro7(X,~,~)
%COCENTRO7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:30.
% 
% [Y] = COCentro7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.1645343762261593;-0.12009440657839845;-0.98399397720964676;-2.1214229452481725;-1.55091315073171;0.66898126727400742;-4.1656418320645816;-0.72073200183909703;1.1051310916043529;0.53429695031046387;-2.2865545837684653;1.4542879993127258;-0.92787430232968215];
IW1_1 = [-0.13021886626374538 -2.6105884759180449 0.002155868493373932 -0.042794342545674248 0.034168631099690219 0.22115100117646838 0.055528955392131867 -0.1211099104209903 0.070088854910860116 0.20105492687747412;1.1148199907023502 -2.5807440061491236 -0.10791488257947793 -0.048706663902511632 -0.21697014100811923 0.33213318974076012 0.087095996794274252 -0.2071497515428202 1.5899528255014939 -0.98786746014406202;0.45963367968967433 -0.092406587395376549 -0.30113073855265582 0.10020279082781912 0.30574388279176234 1.2108690246913141 -0.12489616810204186 0.72325696619282276 -0.27109039787066103 -0.74161197525133804;2.60328507809926 0.93215716598728826 -0.22056393644617503 0.12564819131559435 0.55898204773963844 1.183089286100323 0.037092857535666601 -0.07143020061692823 -0.44247961827557614 -0.24477866330264653;0.020717473995686443 -0.44761804455962045 -0.35162188955688828 0.35073652670622996 -0.5147734447329787 -1.3676757489884113 -0.55406397793881312 0.68982012111330815 -0.22774245046327971 -0.29425066313512654;-0.19542375781769178 -2.7207696930415124 -0.22205270713666572 -0.040089202805875718 0.11170623748127319 0.081382974848023731 0.076523738783266279 -0.42564968995952807 -0.074367010289396671 0.39073531606273931;-0.10148105655881999 -0.27968845113112251 0.38642047576752681 0.2157878375506429 -0.31914292581081405 -0.038060072000868042 0.1642349300198396 -0.34806360947436921 -3.8032724396423312 0.088822235480559134;-0.82736660158933784 0.39223840146290406 -0.70504263169465142 -0.028900117641019185 0.51866757189111312 -1.5427783160457231 -0.097067261075747355 0.18286459888130699 -1.1142696064177209 -1.2647951292229833;-0.10112386331455982 2.000960341434372 -0.053039766892350924 -0.099562144976358471 -0.026804654835690118 -0.066862825887772773 -0.026611946639227564 0.090231950327015989 -0.00036455734083889958 0.070877203161802779;-0.63811121633374945 0.33318450028874452 -0.48478839286355141 -0.17071617816466816 0.37829062089489474 0.5101443281036746 -0.031420652352282794 0.094856306002154653 -0.20261429206607035 0.37647202336181312;-2.9321523864075023 -0.67857109196684395 -0.079341621652046571 0.059665995710048048 -0.047517573962720917 -0.47115286262075351 -0.13180438325855903 -0.0089339373159302259 -0.019530864057871633 0.39865348534160611;0.28843570906562699 -1.0228709951003481 1.3781369771502221 -0.99213418303014134 -0.57838917179224614 0.20003884972881344 1.8100088324950787 -0.75398497144870968 -1.3580401423568149 0.69788917746959456;-0.55831107217542963 0.98453228241140089 0.2083915980086371 0.33159413049079101 0.40978840510348868 0.73853102661808778 0.016031472160759279 0.093267114630484232 -0.88341480125456628 0.32675591559300082];

% Layer 2
b2 = [2.496796695701303;-2.7815089272096798;1.8116127558121333;1.5576382067925632;0.72910730468532703;-0.81772319539723992;0.2922355499372063;0.48274673323234119;1.275853372333289;-0.59708482636942972;-1.2259329750803039;1.0926794015209469;0.75243822700109575];
LW2_1 = [-0.97205147130653957 -2.0617252767145784 0.23360882542338629 -0.16296234398448481 -1.1370750346119762 2.2717782248150153 2.4831506498565483 0.17467212728500803 -0.50015090597210388 -0.32427675787800497 0.83637328314177628 0.13674992411057071 -0.50004750883642402;-0.52677640847811991 0.34495680210646851 -0.87083777188860012 -0.040678762633682738 -0.29156884161348123 -0.99268616563686052 -2.2423352492388302 0.49508633922886358 -0.38281210239627878 0.093622900906855877 -0.28334545297205682 -0.47299862947633514 0.5780423487889359;-1.5805118511756076 -0.72347025216841498 -0.31864231606835636 0.32145384886730011 -0.94099543834499688 3.1251859470955208 1.6740996676578375 0.77754123370619121 0.55021090297873032 0.11153374641111706 0.15247912493201418 -0.14442542264782945 0.5820058683057926;-0.17924365432013853 0.31419474511439871 0.056421102176208382 0.63563916331385495 -0.35479785073462944 -0.79609512100851409 -1.3612050689585242 -0.62605983090373207 -0.81392739077724841 -1.3114940838086744 0.22009337644903437 -0.39501931620344732 -0.51786432795304704;-1.5340295981675747 -0.33854999839709049 0.96925429585825595 -0.054791260043597301 0.28383339832756838 1.0980251877462648 1.6707572709067993 -0.52536315526816024 0.0079775144904629704 0.24938850815238528 0.40514096942403804 0.34470541212265393 -0.73285701940907277;0.56301861048145319 -0.88994258681319249 -0.5621325998426322 -0.15415115980067856 0.18700498442526936 -1.1240749169870388 -0.80504988591403592 1.5185508268990957 0.06910510649472433 -2.0449358393085717 1.3233186923849556 0.47621385813577449 1.0918973981722631;-1.1345209134417544 0.32795923816570005 0.6615181504426807 0.19530657549515476 0.25896718571493815 -1.0823397765998173 -1.4356744661692902 -0.42965720797772089 -0.29569314161994037 -1.1506349864351086 0.76069951056913709 -0.061133765691593719 -0.65144962378212878;-1.4138585040350866 -0.56295010846696925 1.1403579746065855 -1.5026037526443345 -0.66722840651567439 -0.89243537178233479 0.46550901424594954 0.44855852966024384 -0.92405005760356995 1.2267398131277221 0.15909326125736478 0.084745270919137167 0.84148714348520892;1.1825429985306448 0.72198923815168103 0.32573579268318531 0.23803532280346659 0.53540424569846046 -0.38797536814221317 1.0330086846136664 -0.030133319698369736 0.5021055334169312 -0.44570262770440661 0.3084439925262088 -0.035970560552493459 0.28008085858600384;1.4935733946698397 0.22746018412909505 -0.58092551120354596 0.66171829407549565 -0.18977110255272417 1.545621820869564 -1.5136892080562174 -0.022216979516932349 0.9919378251226324 -0.67283331029195681 0.21239335052210462 -0.64216478368053065 0.74217643563109992;0.07558066221394015 0.07519795824115566 -0.84154037269570403 0.35077489413060436 -0.15318369696143233 -1.1678369391418644 -0.68104403220664056 0.14672336630686486 -2.7171258860119898 0.097662793113381496 0.23517753527771459 0.66777191444551476 0.46985271552844721;1.0619496388986731 -0.26722610617493131 1.6921651417672074 0.13852980788922875 0.26967546641740708 1.4130670444189286 -1.1376120911817178 -0.001596403232648147 0.13170329788059518 -0.4769479945104857 2.3926442256818463 -0.58465704629432635 0.17047718565859526;0.42022723887434277 0.7831322313240423 -0.37298186270523714 0.94831932726162449 -0.91285773099244727 0.94438709899364315 -1.0530670120557122 0.97945484942583261 2.0911454659523687 0.73387919028808302 0.7043773400658524 -1.1152529494479038 -0.61726343663040528];

% Layer 3
b3 = -0.69375510924412331;
LW3_2 = [-0.51769539900820716 0.83916091383724756 0.59873602310840379 0.44896732451047383 1.1195876902930415 0.17595147412702045 -0.24569842956516699 -0.34187906851534022 -1.6311127793942337 -0.59370869010171279 1.3638740346518259 0.22091991767669217 -0.55952294694890248];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
