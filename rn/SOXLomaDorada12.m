function [Y,Xf,Af] = SOXLomaDorada12(X,~,~)
%SOXLOMADORADA12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:32.
% 
% [Y] = SOXLomaDorada12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.1062656331715908;5.455149873671834;-1.6863251244414343;2.036594194575486;1.1140123083766236;-0.24448135778361918;-0.36849566634757308;0.54037002347164431;1.7426740287234559;-1.0106158212131024;1.3386432994555082;-0.98916270788842742;4.7972211108888896;-1.7862441670886378];
IW1_1 = [1.5390226752956209 -1.6320362225591152 -0.99642237528403488 -0.76866987083956206 -0.67929283685658715 -1.2755941367955155 -0.078541664519273469 2.2604500657417992 -0.0041518853663671737 1.8004980642150423 0.13424449840499936;-5.9587422871642293 2.0572998669196076 -0.11726028685058593 -0.38349726474556534 -0.84670095494743791 0.085674847167489826 1.2116429144745682 3.7034692706410679 -0.50885280664206434 -1.6802817136310397 0.91658711709822527;1.2163335464018941 0.24795301696162242 0.50384134119762192 -0.38335522263342325 0.12997107442218125 -0.68884319070302691 -1.9305668821006772 0.84594587042661551 0.46461600098065586 -0.44575161127733459 0.6369461645755341;-3.3074192303273358 -0.77013855904976669 0.36560278094802373 -0.075914780754734762 -0.74546149179143073 0.23198310992403492 0.27894302285082795 0.55471975730426315 0.4327441647712027 -1.8674589786800819 0.75406808168724926;0.53902776804312968 -1.4400184196385453 1.2028144371347274 0.17008036022601622 -1.6241990612585684 -0.79192219325399082 4.0130125329074406 0.4710604031423834 0.73759641621719974 0.69635826233648657 -1.6887052383645114;6.2701930258169325 0.94662343765884038 1.0423851377470155 1.4760167550705712 0.61664254074017999 1.0698476059886701 -2.2279092341974138 0.47794539907408012 -0.10067396287789213 -2.1814622495208118 3.2008572571052332;-8.9074657240475332 0.97447646190318149 3.4694976263747326 -3.2823196580315845 3.5839126772978216 0.72245561606872999 -2.3752209830110065 1.7401407683284675 2.1517685163151694 -4.4561639009808749 1.3537051472502193;2.0939416353006322 -0.71563573929298352 -0.99079460673243003 0.0006215140561120977 -0.56080530349764046 0.19814323856510865 0.16189699988865713 0.51533152701783169 -0.64305397185338486 1.3163910685438152 -0.043805314895635085;-0.37406939105172987 -1.0647354963147404 -2.6691629238490924 1.9008779109197407 -0.19487686458189551 -0.34296589866779881 -1.0288833834878937 -2.3884203414920084 -1.7641025776754968 4.8513456321055468 0.43248385351719143;1.6296012929733956 -1.0395959838113398 0.74267462461106604 0.17177395820722041 -0.39649637865465837 1.1612155710855636 -2.3235853061965188 0.1152038482105424 -0.55272058112070355 0.11441030795903093 -0.57604826236570728;-1.1523759310901818 -0.32700365707076223 -0.65066800785696843 0.33297715671019351 0.027866146122722625 0.86673461773818783 1.4202466999753103 -0.97972449268786388 -0.42416488463621493 -0.59940561115083313 0.68829110674977445;-2.9913926411259522 -1.6522574764200331 -2.8609611361270346 -0.50711507098214825 -0.072875619899854846 0.12591316348506257 0.29306461063824774 -0.66517456380823492 -0.72000050092095746 -0.17867704859115596 -0.64230403155543003;-0.83523215154993236 -2.1296988681431426 -0.51716631986700379 0.36523120919756191 -0.1825372548186818 0.16131978855732038 0.69884200394580487 -3.3999300047997556 -1.159242582280102 2.8328331647877087 -1.1409401537434654;-1.2234717454663795 1.1317991603746007 0.52530595878617881 0.99203553481288731 -0.52686531317187624 -1.1499398253107753 -0.056944910629930755 -1.2691672582188689 0.1335964936589687 1.5717619468577801 -0.37624545074654964];

% Layer 2
b2 = [-2.1799126681201901;-4.7355670293034651;-1.6521270228183782;-0.41124354445714595;-3.1292813159794699;0.86027474024503447;-1.0774328926569328;0.43933599665515349;0.88482435487562983;1.1150617106300913;-2.0279983414159179;3.9677364835365703;-1.5052101953054975;-3.5491890446061727];
LW2_1 = [-1.81213789358343 -0.59272827265616701 1.0964555167459014 -1.9954289455240688 1.1001283453424013 1.0506158271579649 2.0949377339164026 2.5126610403156668 0.17640636100036794 -1.3107847274996169 -1.4061282022791459 1.373323589238673 0.76834506351434628 -0.5663909035084429;-1.3067377549438113 0.19684090994122211 0.34858700229164163 0.85009280074476856 0.79213470397608954 -1.0020207529057101 0.56923368531336049 1.9986004237847226 -0.27226239336088526 0.95028823901272852 -0.73996085266866518 0.79721690654168165 -0.77424362413334635 1.402762368857438;1.2376794399916791 1.9433221742179039 0.32877464445517757 2.7203093909063765 -0.70694235105610115 2.6847182629907729 1.7319711015261601 -1.1035299221507462 0.48526629901560148 2.9199525827961819 -0.15516006880086899 -0.73227394613360453 -1.3229323079072901 0.94801258722169424;-1.832844309957298 0.96414382202148297 0.34998023627060454 -2.2287384346293795 0.87795471407684822 2.0112916412337118 1.8442442107278552 2.0670136874792044 0.068250536768132794 -0.27747492017123043 -1.6527455039745946 0.73707214341279126 -0.43172343216710574 0.40489475937708691;3.4698543011787049 -1.4542232954619727 -2.4668284099941564 -2.2045527130646692 -4.7524016169801424 -4.0361829678568357 -3.3433598259769215 -1.5815279697957396 -5.877384359727543 2.418018594358367 3.5966536947867112 0.31976987934199108 -4.4901117963244621 4.212045863926825;0.22254974578649384 0.14314990062027322 -0.40854786949575461 1.2278308541599701 -0.27614934549426762 -0.61599682716520954 -0.73687689678540524 -0.36810281951592966 -0.1509248154777611 0.43625565134273542 0.46877260300734985 -1.2159513497934682 -0.16654878523840486 0.14595145892085415;0.94584935397327841 -1.3733903527994282 -0.71331812762133961 1.842352964972233 -0.28261089251550731 0.52740487995276897 -0.2265383265685238 -0.78190970034277063 -0.035421943898590096 0.47795064556221273 0.84727619902037921 -0.091645078332798169 -0.77059001385063597 -0.23019286605124401;0.93961837720951169 1.5008296364412748 -2.3443185705372862 1.100170196818042 -0.76882201507611758 -0.56933521334407444 -0.87395061187516354 -1.2994045815096835 -0.31629573317750559 -0.4170648357522117 -1.1574738313376194 -0.74911088411605631 -0.75603153715562565 0.082438778960929215;-1.6223447092194312 0.63975563580021566 0.83618230188703213 -1.3920729104653147 0.76599281089717342 -2.0864736126176622 1.463185193478717 4.0602215323118118 -0.35244214930280621 -0.79231869132647648 -0.76544624390896743 1.8703230374248387 -0.070294084306089438 1.7183277682461089;-0.7605203838661494 -0.41168011306907054 -0.42210205191993311 0.82925708613829041 0.033955861247440058 -0.67460465378472068 -0.090451985801080673 0.34476309860071908 -0.28137153860045094 -1.1447279708133036 -1.4046867071958005 -0.80689369178254355 0.037362168488354081 -0.24341258615626665;0.59739117537913433 1.5807170052658421 -2.847221475539238 0.60698286061754014 -0.27314393084387312 1.7143491553442036 -0.42584389304849973 -1.4530912860140295 -0.2010487512926214 0.55192425098712417 -1.7831797472098856 -0.67412687161952645 -1.492008693912855 -0.092281102749378757;0.86176074781428191 -0.84156050780488467 -0.9318708090615111 0.15187924137261835 1.7487993035465519 0.39666157077677905 1.8183784006544068 0.23769359844169841 0.33423534996095206 -0.58994099036380332 -1.7643652527672038 -2.1151255772617685 0.6139825225227491 -0.69035759460695112;0.44821426149322274 1.4176883369405382 1.1991229972710991 0.76583894581525069 -0.024217379440625492 -1.7690544087124622 -0.81311857641422802 -0.50637279198337137 0.13572533420000987 0.05269116277557262 1.653323446370631 0.080887836549643238 0.84011732345081747 -0.136008809349772;-1.1310376143295349 0.3214835086425189 0.28838639873744321 -0.47789949685035066 0.74506509923286901 0.28834907989838976 0.80836803072004237 1.5745536985508322 -0.053525843035653158 0.75027790773733527 -0.6801808001326004 1.2011506425369456 -0.5092980536834063 0.35179051433978492];

% Layer 3
b3 = 3.502294149649698;
LW3_2 = [0.2227159652780159 -2.4480160041329335 -0.047958712169681533 -0.29392172741627609 3.7422674460988556 0.28783959770986872 -0.25928467686725287 0.47412909808959286 -0.14335747717481556 -0.17713262935068294 -0.32574535612473904 0.031618154670494683 -0.50672538975497905 3.806340033131753];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
