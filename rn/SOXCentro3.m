function [Y,Xf,Af] = SOXCentro3(X,~,~)
%SOXCENTRO3 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:26.
% 
% [Y] = SOXCentro3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.4241899937118951;3.3882793613077031;2.1251626323867456;-0.16442131830323828;1.425921543218474;1.2156630638671153;0.68042990139422088;1.208322075812537;-0.20865308845366248;0.015773974987000346;-1.7326576300658638;-1.7007431635671784;-4.321266705527715];
IW1_1 = [2.6109179920035461 -0.043127264385239311 0.1456451621050398 0.1235153363447532 -0.71350159527264445 1.7547054440038863 -3.1673703017085311 0.04841469635009156 0.27144265589381522 0.70070672532677913 1.2010256439687566;-2.0012028658796166 0.64793883966120647 0.35782488637377174 0.94155233389645732 1.6136435487741516 -1.2189589161444592 0.81962213394011607 -0.57823640495000583 -0.36138775231836462 -3.0031935880845895 1.2448256618720095;-2.4291333383291147 -5.4361697981924229 -0.86243499369786447 -0.60427942676078594 1.9828665417653992 -2.4132955870618078 -4.0134455342266815 -0.6140864782190566 0.63556868461889837 0.74304323822947826 1.4720035098222519;-0.88822219872588337 1.5279322739083283 0.83024692408992928 1.5612604672447266 -0.34322195601041228 -0.24874721855106088 -1.1470601932838635 0.067699170744177667 -0.16051776245214092 -0.7489498795594467 -1.2904458391992222;-0.97292018563308069 -0.042140046742143548 -0.22263777196889914 -0.53130716825904523 -0.82498011136676463 -0.088064656289024115 1.748033376741849 0.16856104600117922 -0.14231769307375047 1.3063659296160011 -0.85787021721402767;1.2304389747348046 0.16886712967644235 -0.70315978620162922 -0.024800848912322732 -2.4873069645375585 0.39895963702938264 6.0614707560319001 0.02269712111209073 -0.38357830138094606 -0.51126873484139557 -0.80862837144158539;-2.047812211010775 -0.047157010423356557 0.60326856548750518 0.53383608200565269 -1.1611655631014337 0.47359322610819649 -0.98199445104985483 0.20329758112366067 -0.061885881986787766 4.2239517552711474 -1.6724730563531138;-1.0996775528853955 0.37660170563994028 -0.36607287036165248 -2.1267356423338293 1.4203837922202136 -0.33973203711467059 0.52046640685577183 -0.42000701804959339 0.2359547288891064 -0.25252405966349634 -0.21806249575335485;1.4409896442537393 0.21664229830377119 -0.39077189994042261 0.61365171793963147 -1.3582437353823009 1.9810760162338528 0.13344481192979546 0.040660870076314033 0.20960952442687564 0.9191938831788028 1.0818901020887963;1.531750866356302 -2.5626882862200158 -0.92418559675483514 1.3356457844986158 -0.91549318036946148 1.399295106119655 -0.59226337969230325 0.53013695667862826 -1.5175414947900379 1.7200653353629793 0.34088479752166223;-0.012086072938946479 0.44056784653977082 -1.1228736125884053 -0.24042449623016285 0.28300861297750224 0.75352148205640612 -0.44669282853893011 -0.22475115455303707 0.43298826588064349 0.36582589544245575 0.24646007684980398;-0.55916584054633911 0.2053951867805674 0.35737922577992703 0.20321308091604906 0.26931407569942128 0.80128870513808059 0.53853742904359869 0.17037353824146267 0.81850641268811919 0.12468991433651513 0.718822654896069;0.63458669524922717 0.59699415593025917 -1.2021215560823788 0.53104784276970363 -0.72961252468175641 1.8781779416466202 -0.30924324711430567 -0.17701026127386596 0.28981363140955468 -2.9965011369259393 1.0748702559055701];

% Layer 2
b2 = [1.8490262373048822;-1.3484164998568846;-0.46635575307674887;0.94663050662144888;0.34779523225048081;1.8253665064725781;0.3813589795276367;0.92409193965171821;-0.20944973253334964;-1.2371568419195655;-0.31946975298788882;0.036235704425168574;2.0674993947902238];
LW2_1 = [-0.44784540839039733 1.2550492141686098 -0.8634774662049427 -1.3342026464287158 1.2757045642429037 -0.29969972338034256 0.43608321877840051 0.59070213625523482 0.83593913288601374 -0.53372651999782761 -0.16874989149298913 -0.2735884698304184 0.72277792990948653;0.090272832529865274 -0.14537654471782577 0.82393104783117888 0.6049801931643084 0.3423525439828321 0.15017514884699634 0.030960587406210383 -0.39267396720190806 0.016282284561417032 -0.41758859651452551 0.99073380431012825 -0.62235227049393205 0.16796500353043287;-1.2272593106585921 -0.72711604470647884 0.66264553834389828 0.66269195100584755 -1.1069682877191369 0.29173473649508425 1.1473432670951917 0.68387595468746487 1.9696985362931934 0.39626984323926384 0.15160781753140962 -0.21739998003824601 -1.6898730890601965;-1.0274370718442429 -0.46423829668898647 -0.39522404950484441 0.36110677156097881 -1.2590457363076173 0.044330040929486066 0.46818369593112008 0.43102135699041438 0.86716939706108087 0.34232697957852365 -0.070077065616886314 0.010851711031855667 -0.33998904979461775;-0.090049695907486765 0.38724747116400016 -0.09243144708803927 0.77431157667823058 0.86965535734032473 -0.24168301552094884 0.35451632298837082 0.33511481785444402 -1.3317491543710789 0.69773674299027688 -0.74178542862206298 0.54087196896247325 1.525538005488742;-0.54341645385164061 -0.61170814366043946 -0.17241722441642682 0.24303602885601747 -0.74772260882936648 -0.52326446831109197 -2.2104045752546773 -0.45809051218756419 -0.30216801849201491 0.30979660867736075 0.78647229805263863 -1.5142741423802024 -0.17032821658109348;0.7527728609319867 1.7177915885803297 1.5303759814007096 0.14077150563343413 2.1314546583465113 -1.0508728473128439 0.99767137202564948 -0.80564836724222499 0.99113654633663517 -0.93272456668901449 0.016970308158707443 -0.18964053360861438 -0.57945425442815091;-0.075208305758952043 0.28584055296246097 2.2910481837207453 0.73678238487194547 -0.26184271589179864 -1.3005903140408697 -1.027695159001613 1.3018615156728353 -0.13856545080824556 0.91715781575467004 -0.5504091548315192 -1.4832676540154361 0.25186351892246006;-1.0661338350573371 -1.9612235292489715 -1.6532466829736858 -0.064402993053555457 -2.654416767247 1.2176772550870094 -0.13926877118344333 1.0922898087331163 -0.83161998085037447 1.125677301335307 0.11493456676442913 -0.29399904546647349 0.39176302278488395;0.46145750682559949 0.14731440639555798 -0.38569066964086651 -0.92311321256036927 0.37820950283403082 0.42987852463882992 -0.55282647807938801 -0.43475006039994568 -0.11769715242005691 -0.56344819949662706 0.74478356310353289 -0.024613155281473169 -0.0075308368608403703;-0.54685398621889059 -0.45050200539155594 -0.17726708925846843 0.4551794858079613 -0.40476738186289207 -0.4181594217210356 -0.2683637112835926 0.18158116954946382 0.17497948089446549 0.20245418911764593 -0.4729954588365346 -0.72620276866244793 0.2312645276364021;-0.33144318836154213 -1.2559281528968642 -1.3119391916792118 -0.30934275925226551 -1.2654912944993923 0.71368875515390773 -2.6188452618070199 0.22607448507924205 -0.89432621580607674 0.516260629847763 -0.29943664260539082 1.821729320696456 0.69054312579198007;-0.15757298102265621 0.0040815580676695218 -0.49115486010290416 -0.01671960083770082 -1.2803093105107466 0.46705298267695144 0.49334048276450698 0.18487547377532335 -0.046192714230457489 0.18452022065969151 0.55223257007166437 0.12082910526415999 -0.05631349229178588];

% Layer 3
b3 = -1.8133949409168459;
LW3_2 = [0.13574223917860512 -0.16870177103979034 0.22743873746194843 -1.0705909327075391 0.17142222992176692 -0.23683247625062992 4.6101904356006642 1.0498827282891185 3.130095015533068 0.81743857923146368 0.95532648675350196 1.5462318930331223 0.70115907799742549];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
