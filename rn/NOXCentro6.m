function [Y,Xf,Af] = NOXCentro6(X,~,~)
%NOXCENTRO6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:19.
% 
% [Y] = NOXCentro6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.276012858095332;-4.3589454570229185;-1.6289184994112782;-1.5271755889074627;1.7750155036786943;0.090704992442046148;-0.15902427474126091;0.47335913611385788;2.6463174306024624;-0.28265009838916022;1.3296562887050896;2.6916558100754422;4.657553610097815;-2.2718015265505156;-5.2488720760602092];
IW1_1 = [0.52888575552722727 -0.88335504923171781 0.18510935613799481 0.57639373496727186 0.26811633622900388 -0.46806649016138357 -0.10266073865655889 0.36194064149958277;0.59002477382779261 -0.85590463673256112 0.30907054420764174 -3.4410099393913822 0.11831844204460491 -0.18573876277634382 0.079274004851973556 0.12678840872667765;1.8257233568492712 1.3360570694980971 1.0630211007905359 0.70615005642178363 1.2786537974686929 -2.6987547658798245 1.0237194840059245 0.57614225191921731;4.2405308876613272 0.30809489035832893 1.1385957371504929 1.3830555512170517 0.29688338590114205 -0.070306562190717237 0.47575263203294449 0.86339493099358311;0.088642755851452038 0.16404337449556447 0.49684917340395685 1.7705245196998596 -0.19721414236150767 1.3775628709214698 0.20034049573898377 -0.57510056697826761;-0.29582592567460286 0.80947002055480188 0.21741673229450426 -0.22899858336345277 0.060545827646628067 2.2209693660826271 0.18107588236879141 -0.31651161134690803;1.4469042450030911 -1.5067590451124393 -1.0837205836526997 -0.28032936616464643 0.60616185039552339 0.2401424313882608 -0.4837597246933249 1.009091729919753;-0.36395222016729806 -1.4520599143075894 0.19026856040896528 -0.071918396764047071 0.13149871694236404 0.79017113458080457 -0.062624751411839333 -0.27970466927107135;-0.033666805215429405 4.0072029381241965 -0.12524316084236944 -0.21621570070400234 0.010251451267235586 0.38873344797774767 -0.072279911519922399 -0.011684954074681795;-2.1472107229699531 1.8699159503340772 -1.2793407442593694 0.30310468532214485 0.23705626129930835 0.50549541688890154 -0.7776729058714833 0.38674992126344954;1.2600654233375173 -0.76565749606273648 -0.20754686466388594 -0.43902408311520064 0.0015122584715503362 -0.19237246863057378 -0.22783746173559219 -0.11163545096192853;0.30655644792230502 -0.14703163085428861 0.93094913498532472 -0.38498022353256872 0.53055866567628163 0.92468799214161401 1.5592931992792738 3.1819858494531399;0.092770146398964054 5.4279228638035431 -0.038027011524165127 0.1102397602433752 0.076756408334009388 0.097001190825098144 -0.095720674546461035 -0.11749234922571762;-2.1119934712828976 0.73230776808500275 -0.019444587692952313 -0.66705632306854612 0.39737742649842578 0.021410277951236872 -0.19091206713603717 0.69834658525912197;-6.5025796976956789 -0.68909381676564241 -0.73822106697151435 -0.1429663503649854 1.5285179761656187 -1.5860275425416248 0.46039813526747436 -1.45846878633319];

% Layer 2
b2 = [-2.3327693821867785;1.9237389430474663;-0.46306448093012242;1.8062778841946581;-1.118824144983356;-0.83074876187551072;0.78356787685427831;-1.8074466750641891;-0.38645660141675225;0.49194469338713603;0.56560507622058664;0.22658588586834147;-0.18468587311780812;-3.4521756132820371;-1.7769856824090438];
LW2_1 = [0.7147485368681703 0.6573322637762018 -0.67166594133197821 0.30511683162924025 1.0879673882268994 0.00061524689833479182 -0.057997639550489102 -0.11748917165282213 -1.4224475439495707 0.10531525185289564 0.74156714972112103 0.020778053520763735 1.4456791484078573 0.89291096667907222 -1.1807828922871022;-0.5407780103723584 -0.052648558677429333 -1.3311448363246083 0.092286944825337072 -0.20501150109524985 -1.0298547563798364 0.013454209079594631 1.3511630689568623 -0.095186646959406013 0.5926399025806578 0.082819424824426308 0.46675106264960931 -0.64307853460072018 0.28001462051244586 1.9845258396640153;0.32058992106656153 -0.091999916142583793 0.34322200968770195 -0.30674057581199587 0.47913888025456686 -0.51518327519566454 -0.091849766201262062 0.022531521287719611 -0.84308576597440699 0.28207539441664808 -0.12029613072874534 0.084418301664442058 0.59911339012525622 -0.042636131426398598 0.54051690115246387;-0.39713265264539671 0.45492708843274493 -0.14390193306147714 0.10448818043879365 1.1127972071980026 -0.63338576148144743 0.34722453635015349 0.30008176987456764 3.1690228754216703 -1.0253652425639688 0.52418701638952536 0.38479626737360778 -1.3967625152331677 -0.36302234161200259 0.61677506191520459;0.75385279186843457 -1.1129980274344058 0.21511984150843802 -0.25915208411148533 0.69235816295942287 -0.60077736295529338 -0.36596818751022775 0.029100684684051248 -0.31421237690138859 0.30130324666228747 -0.11665937927945599 0.012655860915757614 -0.056368977874989235 0.41451520688839527 0.8034569926729016;0.69973472716133456 -1.4148667553779306 0.011240878467679287 0.043083704992928358 0.41287841343335407 0.50364482135939936 -0.010908520442503232 -1.8929308379643961 -0.15687995392690651 -0.096289124120236297 0.72169152662541347 -0.125282797463312 -0.083166947222464371 0.81705602840402591 0.30987270115241689;0.7137822393131632 1.9439650725141371 0.54733451669529165 -0.86606355078209485 1.5496467234869447 0.014427830930889941 1.2942307438661318 -2.7124150812007151 -1.5460221510481558 -1.2368773444218448 0.37799299157528804 -0.27484818752664547 0.77764891254389767 1.2164744362849109 1.207815634420417;0.062651743060284926 -1.3856334112062869 -0.33671668914530339 0.27815800998093576 -0.027013411936450338 -0.17917372304026261 -0.021698609819477452 -0.020898982925758966 -0.19239010119701472 0.043874683207479448 0.52489181284070674 0.034608602181119871 -0.60229008839654907 -0.35110302601967042 -0.89229905619907113;2.4022804949957557 0.16357372123380859 0.2843878274140002 1.7768788926225101 -0.89488011368794673 1.5226557621346846 -1.1294986692473197 1.4378159811742754 -4.5413111453853761 0.93047531255038773 1.6345874723045615 0.19191103509154891 2.2115694214933064 -0.57303557051653065 0.27972509176683258;0.01537792237104141 0.24094881807087301 0.82965631730722356 -0.33962965653791116 -0.7289004917796319 0.27298002081120659 0.01663038503322619 0.61723396683612197 0.99993764323388434 -0.21033633369575597 -0.71347653820484769 -0.15996935123791906 0.094920883009059542 -0.74466091543166046 0.14592160191783951;1.2393640332225415 -0.00044885963602544349 0.4302246552874423 1.3205459949180327 0.25535490309986802 0.20861776927762626 -0.38221455611434141 1.0094477854458208 -2.1206668450068578 0.16462199132490085 0.65652764835940713 0.11049908963034877 2.1220364392699578 0.13083994924970038 -1.9230585300664262;0.7272972368333348 0.080607648073246441 0.14685955672635481 -0.90935791803468702 0.054702818973089228 0.02776567073696723 0.28608165780953121 -0.68580182845738569 -0.839134544250843 0.13508842037218344 0.92985978917976808 0.15820271140154543 -0.28031082176176514 -0.70740218852271985 0.12214809027138954;0.50817742082170192 -2.2758231161096556 -0.62771064958939538 0.097304033338554086 -0.82165733451491485 -0.42149667291815945 -0.71391037410644176 1.053224841149401 1.6757352636725775 -0.18465402786273369 1.183578065408829 0.32834628775612407 -0.80011073119500253 0.50644279253221236 -0.52455202764658138;-0.24649896087876316 -1.7575780789915796 -0.50455383375125962 1.4396845749454728 0.054074786121605954 -0.30349040202340599 -0.43974924328293435 0.97692257978639552 -0.049254131212268196 0.033570159523884258 0.16491923668555708 -0.080131153362470633 0.67634204476200388 0.01326645018419517 -1.4112973510101086;-0.47638094941461584 -1.5607584661714089 0.46201510732256651 0.12148785933981843 0.47004295967495341 0.64757821496872303 -0.083166878499369129 -2.3391978130297635 -0.50218893875864479 -0.061441194520421238 0.69756466296308506 -0.12883529923042886 0.018623914678902703 0.80147237009280869 0.11961299736550463];

% Layer 3
b3 = -0.58810820291097443;
LW3_2 = [1.4324418346546324 0.22424956701725107 1.9988603024613125 1.6434434238053497 -1.3341178196872403 1.9368242268291571 3.3180784265224355 1.2162534959550213 0.96722428610466671 0.87954048519914485 0.33644904763235295 -1.000347418083039 3.5612224669713353 -1.0204327539043498 -1.3402069223131479];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
