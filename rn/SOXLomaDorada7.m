function [Y,Xf,Af] = SOXLomaDorada7(X,~,~)
%SOXLOMADORADA7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:32.
% 
% [Y] = SOXLomaDorada7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.4638981630105756;-2.6778107412743264;-1.777904658434637;4.2658085439148614;-0.81053892444517994;0.68130167227030236;2.2215301401427396;0.38254639941128254;0.54849101405498391;-2.8060533051410594;2.1735365267904183;-1.7751404210800945;1.07166356457095;-1.7742847116794682];
IW1_1 = [-1.0607564217453207 0.71188230537077146 -0.69818020906990952 -1.3633248136651168 0.5868328825326169 -0.58727734946088295 -0.19615564318827419 -0.039985822740891123 0.93278349986231623 0.36458729473603047 -1.4520200974600443;3.254771761181082 -0.60748936766924522 0.1049908964720398 -0.39410036503152734 0.52128963512509441 -0.018614874216521433 -2.5683793021978047 1.0267089382444465 0.43427001032490348 -0.11792591864449387 -0.32868119138898833;-0.19582268073965664 -2.437226251639045 -3.6365403830904373 -1.5139237551445055 0.62129727504510568 -2.9305948339102685 -2.4732680763501973 -0.12626002576566553 -0.47646823757298351 -0.14447058050136569 2.1884177315070068;-1.3368106013482053 0.62897025984882071 -0.71932566182082558 -0.30216914425754671 1.6419376260435834 -2.6368903790091975 -3.0145318336741957 -2.6920175891960629 2.6691506559507441 4.3815173709713431 -1.0008894841415072;3.9997101765714884 -0.76465649171044614 0.2118828938211253 1.505498784011257 1.0501247422194175 0.46081252390549754 -0.21658012332326831 0.81536196089466684 -0.55514223252126305 2.0706564119989515 -1.7903907908523737;-0.70145752670075201 -0.14482923304713113 0.045800988708265933 -0.11587085844114052 1.5203214249203418 1.2857885287915802 -1.0980228831094969 1.0240628151149234 0.13196363779855136 -1.4577533930970343 1.0682865923938625;-4.0865373170752592 -1.7273329123581092 0.078182138124137837 0.24117805843275975 -2.6302776293437562 2.0607253927762481 2.2286947593315971 0.91019505626366581 1.8254122679995846 1.2221896798647331 -1.9474281697762252;-3.6813527856157031 4.3533667908441132 4.890133407767423 -0.89957960061680953 1.3337322408286338 -0.072995497485486865 -6.5110054125130095 2.2149779612100327 -2.0324188429270373 0.79126052383548728 -1.080777341792015;0.62639814757127699 -0.68068167399387758 1.2424620697160027 1.206918253280582 2.9996608149846273 3.4509175380103962 -2.6403540322126182 1.5258303113641276 -2.1986029833369751 -0.76728567893050759 2.732799235880965;-2.1511381202644335 0.43475427514641085 -0.73334406776750793 -1.3669899506228991 0.07242837690807287 -0.2141010888359606 -0.80727015303335026 0.46312728731654518 -0.29687618358863382 -0.018263746141031156 -0.93489920949666538;-17.700093684156634 0.025651064140813758 -2.2230990958101144 -0.92956947104575482 -0.46127169628561238 -1.9203927761087118 0.81998106147921979 -2.1011519593473436 -0.76253012917013763 4.2893992136541321 -2.7799085413446742;0.56365930074625814 0.90814626407636267 0.55071757851728231 -0.34472375853365367 1.1222643917439483 2.2017603260775003 1.0063983626660147 1.3490530299305155 -1.3810844586151385 0.012896857964558583 -0.052750936530779696;1.3860876662927213 -0.080853393825861736 0.061051412004688041 -0.20478235114370338 0.095630698774269315 0.49009770337668973 0.23700401979934269 0.64993904064962393 0.094132927736048019 -0.034595635833631219 0.033370992019046822;0.60593947291919081 0.048873780464202606 -0.08030987171472409 -0.10776904752045019 -0.092154941371166255 0.11774942030537924 0.26426989515688548 0.14418003846791 0.012950208000997419 0.076933985859683862 0.19888775682923437];

% Layer 2
b2 = [1.7255680951422003;1.7770934480583382;1.280519335633207;-0.65959367588513296;1.7853865300012863;-0.84762677538465236;0.39273801536679998;-1.5464887706491464;-0.090161492011289091;1.9809154763087942;-2.0852626940123113;2.48830423361041;1.4177977010408689;3.0416749517258723];
LW2_1 = [-0.57678821268777025 0.095425235783656456 -0.0088173846093729455 1.5283553897840048 0.036330229331294386 -1.1076548181754984 -0.19181297080647347 0.28757505754541124 -0.076429782589463757 -0.6519861386417013 -0.41704336313953921 -0.46308367098354142 1.3375512902098907 -0.18780994733248946;-0.45280280904832176 0.15766507867583457 -0.022458642170322389 1.1366796752212043 0.074760642481417783 -0.78920992693446723 -0.15353464420600019 0.27613234755227956 -0.10070186703453617 -0.59507853904337993 -0.33849335241269229 -0.38264146364362561 0.52607949140756682 -0.37870882266649891;-0.20376465260930629 -2.3801345873104549 0.94942287337724096 -3.2493167819997471 1.7353816214399966 1.6663578883613721 -1.4468811413107558 -1.3884089910295165 -3.6956177307816902 1.5220230778541182 -1.4107952124734462 -0.38664121965132181 -0.84837126605511626 0.54186705827000137;0.7557133516754837 -2.3517760166053741 0.91665727770575922 -3.1605719575167242 1.6958488772177061 1.59470335152909 -1.4050919209458306 -1.3495271755493519 -3.5825544564449534 1.4686003528347058 -1.5292758759545784 -0.39218202978949124 -0.7347534745041272 -0.26682276326995752;0.76974324870533772 -1.8796453613498125 -1.0759081623085145 -0.36463592919496468 -0.73067045020500565 0.90613222418739126 2.0285654887751536 0.94630247072460849 1.2318570998481666 0.4904407495019778 0.85572054622236937 -0.72020938430506332 1.3848228097970376 -0.71809866575696513;-0.16022513046756845 -1.7920484735422044 0.16851666666626849 -0.19090276666147218 -0.28183491534392208 -0.33981241571742482 -0.87045051771751569 -0.87776463019873385 -0.12270417146728983 -0.46504389883334823 -1.2198618740859442 -0.93288265318032237 1.2143304771980938 -0.41653825184885468;-0.35456721292522286 -0.98350854264979692 0.91500145387684384 0.53039784600274476 0.62851966991512354 0.82654855479473122 0.28672892782974263 -0.46876162540170135 -0.73462933382745066 2.6205095855511678 -3.0666180113555135 0.97225959546570273 -1.6575503736383004 0.17239361644104598;-1.6741406460771855 1.028004433487387 0.40946459389698436 0.82368636552181396 1.8124493510204149 -0.1112112676570552 0.026736320444968556 -0.018059501018342312 -0.032967707555046057 -0.004598669428437091 -1.2667777136906941 0.60930366539681957 -1.1713429229843249 2.0634410590789023;0.24857477275042658 1.7005188965976399 -0.23405018593789953 0.41512485986284237 -0.021179376283761805 0.045082081243153604 0.73384113861172873 0.78471379894362192 0.42035389466544698 0.20703985607267672 1.3749832173255809 0.61656338897037843 -0.8525867135090599 0.022475308970576875;1.7217038735536259 0.89917395109173415 -0.57662109733168054 1.606509914232966 -0.37843536119102666 -1.5064725411133222 -2.7951245991181715 0.72445560807769316 1.5200239601326304 0.61761724321091738 -1.3871335074985565 -1.3241489488184643 -1.3574550615465448 -0.90527644016465114;-1.0341382789760922 -2.7586514147035262 2.7783129164233258 0.52213857127276408 2.3921635755679387 1.2907552415617893 1.2932169943273173 1.0211223039359838 -0.67500055861097863 -2.8091881995005048 -2.9911079913393053 2.4551152014495567 -4.7004360161689505 0.70742863883710905;1.890713561465126 2.3107246805665462 -0.87325443531167368 3.0595585808265979 -0.49513013380718274 -1.5339324218222921 1.3566508994189317 1.3230919231081382 3.4385735635947166 -1.3454085836132195 -2.453221348921808 0.64118259432471425 0.66730777630263782 -0.066470095254177144;-0.1815539646739753 0.35455232778436496 -0.037867730015953449 0.68203541174566606 -0.27548856674278449 -0.43400379554362528 0.15647543476534675 0.037061773463660776 0.61439289454131663 0.19376533389935752 0.66098294403235613 0.023927057303981189 0.023958002357552133 0.71242908513810865;1.1353765597380461 2.0891903142551973 -0.7924504357846075 2.7727492991479608 -0.32453713320637023 -1.3934574584298987 1.2295678219013113 1.1901920331848197 3.109503253853291 -1.1610169275733899 -3.9792375668387794 0.53702909849269997 0.60564127903330633 -1.8443322350682521];

% Layer 3
b3 = -0.25817554845292051;
LW3_2 = [-0.70188133915805873 0.96504556660852281 -2.3714446979067372 2.4506197477661447 0.024085130706549121 -0.4547189214565861 -0.066269924376288342 -1.3261474626323413 -0.58881132475786102 -0.048549974110328131 2.5183973941299831 -4.3340589787184616 0.25582455675630006 4.5056323997760455];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
