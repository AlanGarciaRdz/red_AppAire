function [Y,Xf,Af] = PM10Centro10(X,~,~)
%PM10CENTRO10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:03.
% 
% [Y] = PM10Centro10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;3.74531835205992;0.00773694390715667;45.4545454545455;0.00462534690101758];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.2732336388201881;3.1737440209228693;2.5817899486924234;2.0955725004719148;0.87661790199122569;-1.5439662411654511;0.44188806970188554;-1.6853254129518567;-0.13048419411115744;-0.23591313714800399;-1.0651921461931417;-2.1143245608398793;-1.9987757249961708;2.2124827802799953;-4.1534647482132732];
IW1_1 = [-0.16250026677948981 1.1410466858854458 1.6475323105304378 0.11089291071909996 -1.0012763667042395 -0.36987461860894033 -0.98181664638181454;-3.5455120130554181 0.096917577885469008 -0.51893159734820082 1.3840340852751403 0.55688422064315413 1.7562976728112449 1.1866884953118813;-2.279249979584415 0.22371844057506488 -0.77245249075134648 -0.25914705018728829 -0.019915345574875246 1.7674788257049006 -0.49844536014302837;-1.4808964777716904 -1.081174269928431 0.30630932198832583 0.61172305242139968 0.60093409231611961 -1.0398047501086207 0.099412869352968641;-1.0622563152510416 -2.4763122520651155 0.26863006898142083 0.239768536919894 -0.8486174616537614 -0.73779907019640589 0.14244313512829751;0.92660247264592766 -1.0931304711723766 -1.178765796813487 -0.73517468791427587 -0.74011034613947491 1.1238538329395051 -0.43434804548361144;-0.15966443599426344 1.3841655482400794 0.82198398710863618 0.91138370748932718 -1.987631742138704 0.075518646783590659 0.38016137578182235;0.70095228410918964 0.011517458380944166 0.10158711685168643 -1.1859627811664635 0.77805020680170978 -0.97340007479972357 -0.12138909771269232;0.85264392650938381 0.84215106060970191 -1.1859204295439072 0.63192594393215118 1.8432706223477764 0.46101946656884518 -1.4403615880879805;-1.438799939393598 -1.7815766011632439 0.069065196694934522 0.044150211939454662 0.14090317053101034 1.2635947006770578 -0.44385748651543461;0.2299876923966378 0.90651561713356765 1.2424308625227891 0.50471523769883131 -0.39811553870024297 -0.55034817023755656 2.4151759298383033;1.3316975228038825 0.48943256184940198 1.158988067208788 0.072078542212828445 -0.85131742297417601 0.62799750029970836 -2.3776887319015456;-0.56941872625918089 -0.30972766289660902 -0.13289224533884128 0.14925301698594859 -1.3829332270058121 1.7238797154556127 0.95258293725592869;0.66499973769944276 0.68980008379919733 0.1936533933126853 -1.9909704266745583 -0.30237444008014808 0.079807761416033643 -0.46459017563223026;-1.3926137811814967 -0.37375129775181548 1.6853860189788712 0.047667463625167605 -3.4311416526752785 -2.3053215480746978 0.54508676173375437];

% Layer 2
b2 = [-1.4717780279239094;1.4521706374436172;1.5317510903054006;-1.2202442678310979;1.3711218093721833;0.48312466082565508;-0.19881135599955338;0.95210601875827161;-0.35921049130223626;-0.7841896551257862;0.18206253084267529;1.2150330729982555;-1.8806094741470198;-1.403711090447731;-1.5731521040755874];
LW2_1 = [0.43029661505875227 0.42698824619688819 0.37439694660904727 -2.3640145145822422 0.73627250277292744 0.81380871163503266 -0.18998487080721582 2.3779610139553782 0.12500702345839723 -0.034075038373568921 -0.24033652043652354 -0.84519830488613934 0.38293247403139358 0.1482874667129945 1.1506822906352259;-0.73678146460471872 -1.1499297019149106 1.084571388579318 -0.36648511981501009 -0.025387445637388269 -0.95726842711723004 -0.63372732940236798 -0.8566014957081628 -1.0256948866022666 -0.24220426385749927 0.11878223501435989 0.037875340994219138 0.83198906417068552 0.071388071540400166 -1.0506874430583801;-0.7022175595439365 -0.35633103034903885 0.80206697595404752 0.78846725240141724 0.45821363706576307 -0.04390152963115794 1.7051260289122612 -0.38223822992380485 0.88872779342304553 -0.2187727817673393 -0.17511553302094596 0.088755948686767075 0.20708545906032103 0.42082730103404736 0.34333666170493138;-0.1676828007920835 -1.4497423243571594 -0.29274810949381513 -1.3388151389737826 0.33784889612201624 0.099924576280963406 -0.62579957248225104 0.27564264228989466 1.1711311039017624 -0.99508380533521323 0.18987705784655098 0.53708577987094042 -0.10211583044675611 -0.64783511716128617 0.69649084036454723;0.96694594844983894 -2.3982118677724484 -0.29197547454644701 1.1240407378154402 -0.19606006244939767 0.28446082470654976 -1.5247242523821016 -0.91694471341072048 -0.5862269735247313 1.3354472941410105 0.73571532333550049 -0.64119829189812694 0.460829014907914 0.30849828925435807 -0.14755988018610444;0.35504098878347345 -0.091544540099367883 0.73554805577038496 0.82065276990273195 -0.15562727696158118 0.077350488367062487 0.28681062474263469 -2.5700750955277623 0.68639843916425225 0.085643161759217046 -1.029059477976255 -0.5667362524185936 -0.35797412149087177 -0.26896758853154767 0.45458895067159633;0.067079550033017354 0.0032790211069894382 0.38842061729727101 0.58176455262107685 -1.5257669474406521 0.47804471134240201 -1.8891990533227663 -1.4091790621467433 0.13618431537457334 0.49137833283342253 -0.37226783549208631 -0.67349328572946643 -0.80050557100985165 0.79336984662105126 0.93939950371550951;-0.92146020170825016 0.3555910836934057 -0.70648921966308076 0.10864399044111135 0.72594901755620356 0.33559790028092906 0.18029920868597804 0.32295692291405015 0.34407044881892368 0.26221808400992874 -0.41978052659023501 0.61351232693030056 -0.17364706467199076 -0.25414278638850862 0.81916467691379091;-0.64436478179520496 0.26996200672072146 -0.83813623127991177 -0.77459301317950136 -1.311248417353549 0.51983735203877501 0.32492380049040237 0.75099032113680209 0.33881866945313566 0.54293364294311897 0.27393554542458476 0.7045441748514405 -0.40665838538712318 0.43767686729056016 0.60417069078194519;-0.36765952895966836 0.74256655297988206 -0.76289716431483034 -0.48641074747338525 -0.25148838240936444 0.62697491104982617 0.17406686675038296 -0.35476737834927891 0.68158102001836762 0.20044318002008374 0.53828185748531232 1.0911843521248903 -0.29980051515395834 -0.52704952713500886 0.18336602300634003;-0.70719157062839211 -2.3333664672474033 1.6656376638867121 -0.14053714306609544 -0.41527083428636935 -1.2194052749253932 -0.31424947750909699 -0.74946257604593691 -0.48316151003993607 0.27187103610491981 -0.73642080040291702 0.94371180711523772 1.1836015509240498 0.27691863815600443 0.35355760639523348;0.39007370387876228 -0.52907040601177147 1.6742501269337833 -1.7542843178643674 -1.1353236947578171 -1.314099708984876 0.93227703908438986 0.24181608312767089 -0.13600840365972774 0.35632699084496022 -0.85696771588415643 -1.1292190370731601 0.54319558377172295 0.52377238129597969 0.10021588544893598;-0.44106601765526149 1.1356169603590034 -0.61302193991909493 -0.4379363821426312 -0.69523157351808151 -1.4581836891164783 1.269625361228099 0.88355590135946449 0.48426148994692275 -0.67883949927312226 -0.35738193997375817 -0.070734568391382618 0.58805686697029402 -0.74606271411621239 0.32450231498708654;-1.2375319091827741 0.55510442848161945 0.99150012310519287 0.93918734672158422 -0.14893343587883509 -0.14328921377317894 -1.2276888795647789 -2.3397632861669111 -0.39990327383151208 0.38985974700288711 0.31100315673002132 -0.40688403890707248 -0.017127067907025912 0.25233520028409195 1.8466474804782258;0.30155012407341308 -0.77874007870038253 0.76182572361011303 0.80389690605839481 0.17388668718264189 0.7685464068087714 0.44325650262227839 -0.73115556208482102 -0.13429834023655005 1.3721317228068513 0.027018180933042313 -0.61394681722598565 0.28340562173855355 0.39556148505627098 -0.12887406395399015];

% Layer 3
b3 = 0.2467121934188968;
LW3_2 = [1.3047675721268186 0.84892402032741388 -0.53973623661712511 0.044934085839267016 0.094563896706132064 1.0501007100217921 0.066286764035318496 0.4043801424615352 0.12175269885931615 0.2710040384391062 -0.10051800679005979 0.1955398061373686 0.67700886297606677 -0.1052760114749505 -0.053540604952875097];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
