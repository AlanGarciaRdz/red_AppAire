function [Y,Xf,Af] = NOXCentro5(X,~,~)
%NOXCENTRO5 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:19.
% 
% [Y] = NOXCentro5(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.144023991884314;2.664355902547658;-0.90818285008480293;-0.62642400136015364;0.77884743409149637;-1.6499882918705762;1.3206846396902943;-2.310819424420878;-1.1493737353145725;-1.1506816991374267;2.0360511365984939;2.7639180339451985;-2.1604390874842738];
IW1_1 = [-1.2109561759940575 1.0212391508368319 -0.49562370925849741 0.14430104525919635 -0.15114841960873129 1.4879891072842659 -0.31011934778601374 0.4024658590172247;0.3192908336271959 3.7057392295173694 -0.016113153681648843 0.41868512551090892 0.084163007229496267 -0.02968943180949575 -0.031596291643752723 0.020222847807155511;0.98475060546382309 0.90046696203711163 -0.87148005165188225 0.60249846564543375 0.15045068830339106 -0.75585615329652622 0.091670065868750414 0.26686155362019298;1.0883390711400209 -0.94337611090637497 0.21662253686522459 0.42001355971773535 -0.17272047709861274 -0.15969198966340037 0.014054874427112278 0.43399082202083517;0.92280951821983859 -0.21813237999144891 0.2733619476377292 -0.47464162578005148 0.12810929688563397 0.36303333258392184 0.029269739692836392 0.38026824716943491;0.75057264281328462 3.2243808361318358 -1.0238118822042575 0.57007212692463716 0.76329340284703628 0.085926676292249232 0.62321325795355875 0.56579649972939439;0.86106394175430789 1.8118303100707238 0.075507330392169017 0.069132247155906726 -0.21427465211551083 0.51887910739557375 -0.13071011794888887 0.40946078937258329;-1.2855207296328208 -0.90022168739765263 -0.31057698608857603 -1.1176411240604038 0.28148733778280577 -0.81339214430263262 0.042611707361424771 -0.36666865379565106;-0.042566179664970595 0.15301257517732272 -3.0178800340889325 2.1009679872961007 1.0653014608486038 -0.13454827831522251 0.38079804402559247 -0.61978439705198285;-0.80877395238429295 0.056531420461674878 0.089612617226386179 -1.3320536470541684 0.010662908537878277 0.70756178751690657 -0.18389891185274412 0.016869427871582167;0.22713743482295692 0.94024420807337483 -0.42396534588161444 1.6423377219886741 0.38828848915409048 -1.2563327873525056 0.52422137082597753 -0.31845931300998864;-0.016121390687683243 -0.11454483259113359 0.98268692943157188 -0.63442094994016951 -0.65781187974798583 0.80120409984475205 -0.19419024902654822 2.4231204866160723;-2.3089588748202119 -0.92048233226843823 -0.8401658173553016 1.3622088068317082 0.39269566747915585 -0.11994126580562095 0.11609395841618511 0.5951153744900014];

% Layer 2
b2 = [-2.4798728807982262;-2.6298200426939431;-2.4760825369584754;2.1911390905215833;0.80830146539029757;-0.69149929637959406;0.98966957182793047;-2.4176836124003831;-2.2782150950140805;-0.64554454960177243;-2.5060764172386936;1.0707726666213657;1.5920890474520764];
LW2_1 = [1.0026632810205904 -1.0960798391924433 0.67582667100780158 -1.1095215641128855 -0.12588123289253922 0.8982630053678784 -0.4664411368244939 0.12608206380513057 0.29205240486867784 0.49749375663874806 0.62909054973442002 -0.6364768581336181 -1.6843263824298877;-2.1064726546232495 -0.38975549746945948 -0.21699765527148762 -0.47049642731215446 -3.1472994850129332 -0.70178626764462249 5.1592517763186336 2.2025487746359231 1.5253098284614672 1.313839022000481 -0.24986136980932341 0.42958521406179134 1.0083450856832232;1.3781072922674769 -1.5301466427607762 1.185484203920248 -1.0850572830591154 0.36508576245262592 0.31876851022393149 0.54551070197963036 0.36211459892248321 0.22522433052404126 0.56412714378747175 0.96972905530434295 -0.73604882304530228 -0.98762821475900719;-1.015022132028411 2.2595294923631086 -1.320753301195702 1.228038454855551 -0.67767138063860211 -0.22585177596973369 -2.0617591078992183 -0.61279634069887423 -0.46153995954973415 -0.72545185314458571 -0.99032051111210373 0.65798991666208051 0.36357845889900087;-0.098088977559045734 1.6067490575119734 1.1797447637045344 -1.6550551749597102 -1.3078171028088166 0.76256647875814598 -0.35615331874304013 -0.90867514909872171 -0.87527273198972777 -0.59861296266009412 -0.50674175103146668 0.32190947758969785 -0.31604436777212563;0.36796850675314546 -0.83045927915111784 0.074868674498195231 0.45417837312069931 0.2136530585285725 0.64164664949007721 1.394105030884657 0.20120388185176441 0.6671863755706734 0.51720970897667884 0.7162190727951977 0.25759578329839933 -0.72191428093265608;1.2970968447865499 2.608421284896453 -3.8789640113265769 1.0381926666451664 0.80799311974475929 0.99758076877415081 0.11671839709966414 0.1166751906466877 -0.47754391444708466 -1.8205562701037359 -0.32232636984402202 -0.87238589631525976 1.2653899956091827;1.8813262324663966 -2.6951712450637197 0.047224538173246317 1.151578947393421 -3.0780747542025302 -0.66766080882284617 4.6328581230635706 1.9226221214226791 1.5208563730374687 1.3551702350982018 -0.029451676682429831 0.47235047635999855 0.81832771052690889;-1.5831127556069022 0.15002701471175064 0.10981000380722519 0.91711321978735039 1.4667042589628956 -0.53823490237021665 -0.73997999709353501 -2.128018733028707 1.9176065808779699 0.21281027204442823 0.74302855219836494 1.5793261071837432 -1.5292820472213631;-1.6696676512718756 -1.2693972621521679 0.30683821965853159 -1.1752332035320758 0.45963437504888044 0.63131670049084665 2.846913081774054 0.35322621258905829 0.78263837256436353 0.72377360164590765 -0.16194466734523533 0.33443646705177033 0.35879988114962386;-1.2741544590591505 -1.0947731628485722 -0.0087387687758701989 -2.3949480828590666 2.389377731018985 0.04564473167226818 1.4076776021280031 0.55375916442402662 -0.0079509919407417824 -1.8441037875977131 -1.0670983272708903 0.11137358749688472 1.1445104199070766;1.239886144438918 2.5532069616663535 -3.1491919780665873 1.5492628410777276 0.34936236744080512 0.57510191098274077 0.068152888502476167 0.058237605218090405 -0.1700310258454015 -0.69917961014432883 0.22281473734881019 -0.48500664251719838 0.72375996062836245;-0.28018139737460279 2.3350319333463041 -0.13579136664969269 -0.66877902586788851 -0.49462826526352088 0.25973480248654152 -2.1186164225138095 -1.0657089426260604 -0.72876420424175048 -0.48365275716920864 -0.80642696117015855 -0.52503245587492919 0.67550042168972568];

% Layer 3
b3 = -0.6774194835789128;
LW3_2 = [0.98441651086419413 2.174367053460494 -3.7976767244190373 -3.0341386091792679 -0.75591862093592355 0.36563295500910714 -2.8525144821925243 -1.9207343962085466 -0.13690109234641487 -0.72833082275376693 0.89506130734237255 3.3049195295015608 0.91402528339893319];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
