function [Y,Xf,Af] = SOXCentro18(X,~,~)
%SOXCENTRO18 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:29.
% 
% [Y] = SOXCentro18(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.9753525920350707;0.82777609951211806;3.2571513264223997;-3.9792772486701975;1.8527849553785993;-2.2726279590390104;0.47308020103793064;2.5260482062625367;-2.2669261864862413;-1.7163950437096804;2.5730495809011784;-0.81617265914122972;3.217900899065079;-1.5214120944225575];
IW1_1 = [0.40167521572806653 -0.11612151437685553 0.20198393888996566 -0.024763952228385819 0.088431755866902106 -0.28368220458104887 -0.63261840195740837 0.051839365279637221 -0.013272256006858951 0.27890355646736348 -0.49951817931955805;1.5136319025551916 1.9600891984457909 0.26568424635878468 0.98977306685143152 -0.28906870158838294 0.76313986502782438 -1.0947088629265596 0.081467006075385887 0.28768065837898205 -2.6107828123542021 1.2248414716405458;-1.5728817947835494 -0.072283312728776444 1.3460458066726706 -0.58396564978554566 0.11289493622124126 -0.51498576373640681 2.2243158345861027 0.048306359148173141 0.25424235509739918 1.7148291382171359 -1.8228546672487327;4.1991720088818436 -0.049612663489734921 1.6120200583422908 -0.29905906988352754 0.64957510086398929 -1.2120881023251888 -2.5321334620768394 -0.69552476534379448 0.34400455614095721 0.083581226542673498 -1.6029007022057127;-0.55176458990935362 0.42446865302947534 0.61419102832410166 2.8278557346072257 -2.1955299859992552 1.7655434669424734 0.49653305844953988 -1.1440957925190325 0.97188777492456435 -0.89832735004009656 -0.83261424788759342;-1.6350881946618527 0.49072536017932061 0.96896227818087244 2.8407502540628338 -2.0079538998349995 1.82038505995808 -3.2528461833369993 -1.4372970116127615 1.1401247656847018 -4.3505503863985595 1.50009874838651;3.6629787175366655 -0.04201464493489547 0.090561232662326491 0.94760701763874111 0.065566762283868346 0.57920346504679399 -1.3082374749859378 0.048498005120400554 -0.29087793899728853 -2.1160836694919087 2.292474199880123;-0.11663413022555208 -0.17944812378759628 1.180221989682948 -0.65286305804290745 0.16739287220370561 -0.71176517282248619 1.4193343827871681 0.043552053674682296 0.22356944391138803 2.305656851511698 -1.183721073287846;-0.985229569636902 -0.084604808935736173 0.90741497065369814 -0.40925655208609524 0.52417024003091306 -0.39596266838960598 -6.4598344481291541 0.07259068828790477 -0.014896049741670079 3.2170050902356393 0.23882604730456655;8.3159083538429304 0.28705240761903777 0.16698932325596388 0.84515372946271072 -0.91008492973844657 0.81511984385444691 -0.85935351260125659 -0.090822141147554686 -0.20286725113073104 -2.8755019042480914 2.0242055320152925;1.1733960025645656 -0.025058566698167601 0.58328993295772769 -0.18303512160301894 -0.1041344317380599 -0.16368271724432734 0.37936734171766395 -0.044462785500713115 0.091555210999183248 1.9129396283384537 -0.43690932180091385;-0.86030786153056693 -0.31387927194930804 -0.50225630888695605 -0.65808627029745892 1.1316323094054805 -0.57942934641727062 1.255860527945589 0.44685579164017863 -0.34259679033821622 1.1905891631955361 -1.6006349860498224;0.67616662000069172 -1.5714513913072548 -0.06897128118084192 1.3031918577816308 0.177387284127145 0.31204264231848117 -0.8695585457012367 0.17099316073453083 -0.12037266560670334 0.96113046970908877 -0.48384138480326955;0.1481632430658463 0.2030581044184388 1.2945715192315495 0.7094290485296505 0.017578699279650202 -0.63428437870719412 0.26094427832248446 -0.15477029234385548 -0.41090799867520811 -0.34566390677183756 0.3336959191803554];

% Layer 2
b2 = [1.6354444145500879;1.3830016440923414;1.3075846555956034;-1.7981553942275752;0.74491386165298379;0.22384124527413204;-1.6425945100829238;0.27742920685941902;1.7322447475554701;0.23674604414663369;0.57003466020238824;-2.2370554793975992;-2.0953623424330798;2.4873149493183613];
LW2_1 = [-1.1942816090993551 -0.24509960674871945 -0.41101657068311392 0.43135379194123136 -0.30762060987359363 0.49094695792882065 0.59192120555824002 0.62065545087969487 -0.6364636101262543 0.6494696869048463 -0.70098757335949835 0.10786059968209952 -0.59152317583505976 -0.81398906502609447;-0.55363485804663082 0.34797151568057622 0.23678979114705476 0.4384476547305482 -1.2462372121219194 -0.35057490750416681 0.79882377229728885 0.7035375834708617 -0.75525685768089545 -1.6954876369992853 0.53883721261280226 -0.33833846235338638 0.29649202071252823 -0.38240448917100706;-0.80914282075761224 0.2993711702174458 -0.26024851284699912 0.25657827643466236 -1.1933045253582444 -0.83464294242437598 1.9652601361098019 0.77265444209862599 -0.71926248093367529 -3.4398092969899756 1.4385036938383542 -0.18519161180099147 0.079806438744104036 -0.39514865481038147;0.58766330302138592 -0.58700693079116562 1.170557042220135 -2.0889755472180025 -0.090374751928418678 0.0084541025677226517 -1.0010706064971422 -0.0378272295158762 1.9028396392101525 8.6837581853310155 1.1296325271351704 0.24490655330552699 -0.12677456374002261 1.3911045912594555;-1.1198953433506462 0.10170016541596738 -0.57960930345455186 0.67447699161671926 0.5080934106131163 -1.5632633376997327 -1.6457630042261735 -0.72527147124577285 0.085934182002722834 1.8268795106635061 -1.2424434857356039 -0.37189417311772005 0.64561433300754856 -0.77954034519594717;1.0612877728064307 -0.0099786548091218893 1.3977487159522675 -1.9722658336844872 -0.077480414682596616 -0.011456828941189448 -0.20712573219176522 -0.13113021061258848 1.8144542795798082 2.7603582061423464 0.36894219685041463 -0.22450369483403715 -0.090235778559576943 -1.7277259354724173;1.675786374356218 0.7694938269214292 -0.14531152888129337 -2.0490994964555727 3.8249733801031809 -3.8995289180765162 2.1925993604183733 -0.39662937831318351 1.518502313469045 6.7201417366118417 4.3227496664207923 1.3973863353666434 -2.2752372695648617 1.9382476989058235;-0.45347227237247362 -0.6899543716142863 2.2926953568635944 -1.4673438759947841 -1.085431046826683 0.76643702001340919 -0.26244075985131476 -0.53210743576024755 -1.2863528940900713 -0.93948812778446766 -0.059574290966585466 -1.5674037076469289 -0.39253101038385896 -0.76310070739176783;-0.56824219264175135 -0.26436778987722193 2.5620198224029278 0.26217969805554575 0.10433972539061469 -0.26883553426790657 1.1982068433920776 0.97461346342795419 1.8781707132727912 2.7544041772920655 -1.3609062773174012 -1.1514507974401316 -0.43924759383743972 -1.1439941026538656;-1.4885892507340104 0.21991382207090021 1.2798399220958119 -1.4849113718766667 -0.96009232006766598 0.72091419788831423 -0.093545563132793011 0.48923201844685849 -1.0890261089897124 -2.5688799961515465 -0.50127766545220076 -1.0868260327810115 0.40297209751393614 -0.54607441309929039;-0.88772376206399595 -0.18120346662180598 2.0137307881721016 0.66884286867140941 0.33105856345094792 -0.73571667931004847 0.45210970336109979 0.045468895495427597 -0.84032900666721466 1.5998225088127034 -2.0852137507579731 -0.046881213172613706 -0.1185710884096202 -0.68692101276599726;0.96042913392565499 0.034263581231849811 2.3893500385955968 -1.4608295052870388 -0.85562924874577584 0.76460673673869917 1.6598073677969074 -0.36214743090804741 -2.4872160771842839 1.6946088442824574 -0.16115693860356531 0.11993385111145588 -0.61260196260250721 0.9970648296226432;0.53468716550308992 -0.090735523233112333 2.6103159231703796 -0.82865914409101971 -0.75948216104691657 0.62358810731839165 1.4662622641192928 -0.83577637427427076 -2.4611888914582969 1.9536916945007314 -0.11183858720885061 0.40324971875209964 -0.57394591152202601 0.97162253950451016;0.19831117601069567 0.28142874492332776 0.24701343466752126 0.12782604204683912 -0.20664982586622854 0.20046707947891593 -1.3514835404923022 -1.1835990922022601 1.380523911748573 2.8576971390551376 1.7507776677168643 0.83876698753288448 0.3660434464153185 -0.77438580302165283];

% Layer 3
b3 = -1.1795824415116922;
LW3_2 = [0.17070672604327347 0.74135704144063341 -0.34331470109509288 -1.1819967305947385 0.12474018137797521 1.2577854651804141 1.2414541343191057 2.3399877239093554 -0.81728183179432023 -2.3193600361010893 -0.15855800293177053 0.8836450508403334 -0.92367974391710062 -0.80966810363287178];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
