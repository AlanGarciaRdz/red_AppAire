function [Y,Xf,Af] = SOXAguilas19(X,~,~)
%SOXAGUILAS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:20.
% 
% [Y] = SOXAguilas19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.448430493273543;14.4927536231884;11.7647058823529;0.00666000666000666;0.02;35.0877192982456;0.0561797752808989;0.00588581518540318;0.125;95.2380952380952;90.9090909090909];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.5335881736035484;-2.0897481453593199;-0.83898685039729626;-0.76316785733318226;0.59426877344489926;-0.081671466367004258;-0.008916960972618437;-1.3471985769967425;0.97008140986276525;-1.7587982462041822;-0.14462220699500072;-0.41671064437440447;1.3023116774914465;-1.0472681697813178;1.7372483669480889];
IW1_1 = [0.22943226077231105 -0.12480219482063844 -0.34271950455601125 0.66994620186513454 -0.35064594925740861 0.18847943696579503 1.0034777345160544 -2.0842398040108168 -0.4026649948202306 0.37155304204743228 0.086900930337104151 0.160888224315478 -0.22931712052151706;1.4890296158433585 1.9159402694559491 0.81993257670169639 1.3312763332633293 0.42639736130101819 -1.4801074847780593 1.4368434231889953 0.058882106561656072 0.4522057751048722 0.45356788806168324 0.51594440759448368 -0.11458924073668178 0.72260744492275664;-0.69121638701357335 0.71732286579087756 -0.034218379200369353 -0.63133415133846049 0.62104029930455296 0.30552675113305766 -0.32913932381851374 -0.78256519321320739 -0.2163951800027516 0.11767987920719075 -0.89676652079712671 -1.1056947768294485 -0.15351378361161783;1.9244168601180622 0.38386302958791019 -0.7402652936317351 0.26239969197114282 0.33978324189354681 0.18942660037908315 -0.25521849896790849 1.5841361049488136 -0.23654212002175348 0.38348196280743918 -0.55510912535248769 0.12139793268762433 0.52517242153521337;-1.1781018505061924 -0.6763792276993813 1.1282783923176234 -2.3654821109125201 -0.40900583977481869 1.7549127700633633 -1.4819072774062669 -0.61382475211254672 -1.5666737677330214 -0.84820614963671304 0.011847269462767512 -2.3754840711897778 -0.40258687434495716;1.5299692381263492 -0.59967283958072337 -0.039819859581210634 0.93345764371400775 -0.60988844767814365 -0.11321037016797469 0.34657691287621439 0.39705004951625955 -0.48245468021660387 0.10587926666693487 0.98276826066360667 0.88008413374971306 0.42604772718746886;-1.4609067335229133 -0.34174979157597751 0.22103399661498252 0.99199858492169946 0.25753867976806316 -0.47942389865252993 0.50269430459747477 -0.12026774192912357 0.51865570164959185 0.33585371614022586 -0.056370125654271332 2.9817416473615128 -1.4168618903840335;0.66872586699376535 -0.070063248165000869 -0.42862829878101832 0.80326147839317019 0.1671889396979378 -0.069490269293673371 0.065469818660005105 -1.9253417157735144 0.49361852760586766 0.31639251679410707 -0.020339561986259067 0.62941217318013498 0.1067781946316373;0.1427680807657217 -0.15283750026473231 -0.12496611927000484 -0.57905764334912513 -1.05458443414744 -1.2525481520877177 0.28401068364510346 -0.55877055345255 -0.14790493027337118 -0.19738142643076242 -0.93276247618723174 -0.49170610400771991 -0.41598100220681794;0.37702730234090504 0.4493955086448963 0.012208420652344315 -0.2423901030746155 0.34138769598969099 0.11658758475973971 -0.21367571680910646 1.5533715298946837 -0.10328792074964796 0.59615355662484237 -0.97600218434275754 -0.42646761588647264 -0.17194482808325706;-0.097571408218840222 0.7575743894186403 0.61687044606593211 0.61544762484768256 0.27510671588171787 -0.9976139776076326 1.1746235808905581 0.21728179371218409 0.70203144267061246 0.16468459366008686 0.34699644792136985 1.0234873717073636 0.061094125405754665;-1.0075214880345169 1.2652241588679771 -0.50086728925557944 -0.77716070913926671 -0.59629274349243599 -0.50759862467549988 -0.62793317254508907 0.12831985159797385 0.29106260485196278 -0.31503779170590562 -0.58809959296268843 0.3456725655355547 -0.77199805985460601;1.3519718913474001 -0.047892000370165194 -0.73052024105873081 0.9546982283140939 0.17259053406384456 0.02978110248787616 -0.079046758426216113 1.1491831136182571 0.49433722008392844 0.38800979205264169 -0.080563739596885092 0.0032760786492434246 0.53665311442328345;-0.70294479920940756 0.84469199860447441 -0.38941505653610831 -0.37679549924972888 0.61926800983026642 -0.20340918195211855 0.034188388382908996 -0.20823264440219444 1.0512435598111018 -0.29974043872502459 0.14332440635029411 -0.68482268275644498 -0.032705597213692386;-0.33000333295941342 0.27715474282148578 -0.61428458279335274 -0.015261616869672966 0.10359232987656142 0.041849738801904207 -0.074073423410924488 -0.39781041388389465 -0.43989537612338803 -0.13662793803087991 -0.19268704653694657 1.8951898714619992 -0.62732032119086811];

% Layer 2
b2 = [1.5981954973917678;-1.6346520050389346;-1.2465725129256222;-1.1425473078754111;0.67125975374331182;0.82602172427812393;-1.2973035530988168;0.90829732948228836;-0.49737409556420165;-0.5883481008349345;-0.67652184377593383;0.91918664323957822;-1.4242687988625391;-1.3426464612854225;-1.8766719697455354];
LW2_1 = [-0.069681530832501462 0.91698353041382064 0.31316864180828108 -0.11589293640980824 0.18911206736560848 -0.24706840168782904 0.47651958458575894 0.24419183456570054 0.46612706533127879 -0.40381731200557336 -0.75332701643920852 0.0023774021745452956 0.48082099343658596 -0.32412515690094312 0.55081122344065025;0.080693293417001197 -0.090009826537726198 -0.74812406032101919 0.88852319454985784 -0.044789419727522775 0.068512944473350004 0.1955353961678942 0.54396825568601925 0.04474307736093279 0.20009997720195108 0.70973744492514756 0.31368322045129782 -0.39148086580417468 0.51391383123074774 -0.17276071260954823;0.39656732068329442 0.10200377618985233 0.30216848026830362 0.36864418005984401 -0.47021340767865211 0.48508949717968791 -0.12122255553611809 -0.080053757194164563 0.55657445679023088 0.68110902331017653 0.53957226586351514 -0.66953538126735657 -0.3331336572286866 0.40601589598534199 -0.35383394764713494;0.12539741825132078 0.0064255979787450346 0.43333242472855082 -0.041421690759230273 -0.11586943900506994 0.15636903878334046 0.727477367772835 1.3784557838604294 0.094185312213736438 0.15309564401338394 -0.5297732366049116 0.19219883345878755 -0.059664286670891992 0.15187574430221198 -1.2579677194879704;0.46362842915852787 -0.13778646347606591 0.74206235429473133 -0.65794212263572238 0.067389101951377345 0.039521533564003689 -0.17112263098651234 -0.73356957890373975 -0.66761015639933852 0.79476372303605736 0.13021023474138491 -0.65517432886441851 1.0733870908017351 0.37071661365023056 0.11047800446626313;-0.53571454740445568 0.1498877563585703 0.72828631804740029 -0.76538544338989345 0.11317905430800043 0.037925303874279212 -0.29216711971790038 -0.56561760925144311 -0.35665709404091006 0.55379964398493731 -0.22468425059142791 -0.64057883192410436 1.007277825051492 0.41559987292733236 0.27414007511491179;-0.7275208097080903 -1.5921794959567916 -0.35850906543605859 -0.91951747831956165 -1.7947959986847595 -0.66742211839361731 2.3827867568285392 0.3762611220225936 -1.4255286999060031 -0.67958181676770313 0.34770459829384764 0.55477041636984414 0.17981210669763215 -0.34148623996625843 -0.12562088828540607;-0.35932224802343543 -0.83262219953111749 0.93821196319346489 0.77460362713042985 0.13351232470775559 0.96155897323247286 -0.22270608140742196 -0.06276467214907179 0.51886147090473322 -1.6385126316954797 1.2956609253662448 -0.12099907199245932 -1.1039293786650157 -0.27393100085178218 0.51561610419214254;-0.50966061476699087 0.0053716369992271723 0.4521903829922973 -0.40661310835571418 -0.66119941768793788 0.75334062368315458 0.39237198664881545 -0.62039393340549531 0.085352278607693913 0.24811568384210353 -0.15166684086009058 0.6052317039620918 0.7873060523615828 0.3477758218226924 -0.93329617009480892;-0.68987050638903358 0.060452349170493608 0.067316761561558122 -0.8570168328388017 -0.9031427259082806 0.2086272175884078 0.55433682563767461 -0.17659915559857642 -0.60286380905869263 -0.9199725031845325 -0.46093534289727489 0.18820817659451158 -0.36915820027071139 0.011498392154935307 0.56557264423609543;-0.12965945290790196 0.17646829225201102 0.39239531334990241 0.47503546695947896 0.038931506417957319 0.45824488652251255 0.37739480378111151 0.080698004925306627 -0.11360974370066086 0.31853097974981603 0.47127006666796589 -0.36692720540149598 -0.87868544189949627 -0.66163065765996998 0.5232471330921783;-0.04718313117976021 0.45878998415148653 0.60127738411041121 0.099810910483291923 0.72312850395441708 0.13577414367769575 -0.80194733353022207 -0.057328458405745505 -0.41720764809217581 0.65754088078324058 -0.20340830357129172 -0.53814990351208125 0.51880437939523505 0.30885705889767323 0.24818307339576881;-0.56102232006936303 0.015517430863893553 -0.54268928230501001 0.19004341492467833 -0.15976188258976662 -0.94083988935374396 2.3861187058567328 0.3750827373216174 -0.69977670293732752 -0.37620237940650503 0.55050421629220103 1.1129212161555824 -0.037226061552087769 -0.40120605891650152 -0.17551760453042198;-0.54403088769832753 -0.082569875209644178 0.36030908378295928 -0.47909583196409672 -0.6938611675572427 0.67803351625372987 -0.17623446287924743 0.5181991141696064 0.21964072912595661 0.17077311472874107 -0.08356254360383307 0.00057459294176120251 -1.4284228813169013 0.016608804479752826 0.47266057600448497;-0.67132414668774776 0.31194853249810695 -0.1739629541083052 -0.33248303092120363 0.646789798326319 0.67837746505035712 0.11159667571504525 0.22721084309380146 -0.1196216041377153 0.28495407010312657 0.55153115748398651 -0.36719425278370305 -0.47716624631605431 0.318214281292099 0.14240646062927764];

% Layer 3
b3 = -0.35779548564407465;
LW3_2 = [-0.6992237618514846 0.54348243416074815 -0.12325397525839459 -0.89611877715867128 1.2696066242567452 -1.8131749499702992 1.9348068741086515 -2.0410806598516174 -1.3637255981761298 0.88713421263533132 -0.21296719076256262 1.0116940147173159 -1.8861493961377513 -1.2133244945428934 0.75833169561995284];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
