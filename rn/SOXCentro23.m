function [Y,Xf,Af] = SOXCentro23(X,~,~)
%SOXCENTRO23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:30.
% 
% [Y] = SOXCentro23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.8963426078943675;-0.43198168077493587;-0.61321904468370569;-6.1895814889278506;-0.60703850961102446;2.5792406014099569;9.0209293003840809;-0.096774931779227941;4.7242714706283415;-3.0061059935899053;-3.8081507755008563;-0.90383958860253322;-0.047485879078542161;-4.5695051146932251];
IW1_1 = [-0.53413135631102904 2.1323520642001159 0.80559739789890017 -0.77951760738519582 1.8907990642354358 -0.90152449936755741 -0.75604670404960861 -0.27541303018895846 0.48972221071735939 2.1781434512944471 0.063782435755251138;-0.43291769567296567 -0.34260688629236441 -0.34457366480454765 0.055570220711360488 -0.31024635802179323 0.45100308536972034 -0.099298867212017722 0.11731466179563467 0.64184125589756014 -0.66921396078972761 0.56506162419129469;5.2208097651761243 0.16017602572109507 -2.1878985355248157 -0.4207181595038117 -0.35067779558188761 0.37956215378615993 2.9179882050838111 -0.066517977857926569 0.73139959102160768 0.6818115867495087 0.31478274239184134;-2.3321719004601476 0.0052861991275279102 -0.59652959872955558 -0.35482408912561125 -1.0450342161132897 -0.84239987867876798 -0.34794100711781684 -0.21928810820891317 -0.27857582235760087 -2.7327842607281903 1.4425521943118942;2.7430471614519734 -0.016791596612146312 -0.75737788934383676 -0.52088936776719053 0.11248629274409613 -1.0420772182895495 1.8633391634091139 0.24121885682621613 -0.87900297586606924 2.2752223427736822 -1.4062547555287348;2.075794287904916 -0.031318824169037453 -0.58718712063430467 -1.0000024004802173 0.011984778733650697 -0.91503532648956087 0.46022454219965825 0.26797949949238487 -0.034004625036615235 3.2541865633858191 -0.40205931279282942;-9.7568013481641014 -0.50955774372607876 1.8926558109444813 -0.79628287859522739 1.9498232166013931 -3.3021382268105541 2.4431367120254937 1.9393919811984952 0.39402161064404367 7.5375845200486458 -2.5169392621715105;-2.849107095197819 -0.19984614675688525 -0.52673986401042439 -0.1333229156932022 -0.047737102214273262 -0.64034961815820601 -0.18492208945825142 -0.36702933001774468 -0.61662901283849136 2.5033158972053973 -1.5877538372309987;5.539587297085939 -0.094415529076505716 1.4163675740570649 -0.5076446355986447 -1.8445697671271375 0.90558448448380535 3.3204417499201733 0.081996235314110558 0.20419082633403829 6.4878073588085181 -1.6109885441928926;0.87293473745392491 -0.12635791873759714 -0.064141907352845862 -0.66321258618804513 0.17405619777704201 -0.84141238065182411 -6.6743469726300955 0.14551450909304317 0.012376514631984765 3.3322906041770164 -0.1459045413212442;0.44862942511895426 0.032671174396150526 -0.037815978721099174 -0.051773905372716887 -0.015451924547277771 -0.0095936640454819672 -3.9825039605232502 0.014212877644855125 -0.002935899116080195 0.1926556255137481 0.2101171907763473;-1.6232056196443199 -0.0025479319253856464 -0.57223474719326217 -0.442047745249883 -0.8666051557412634 -0.7712743424910139 0.66044219223423872 -0.044447860484949323 -0.27665741752056855 0.52935068349518621 1.6859713139161137;0.11468799799578888 -0.35507658718130281 -0.46266366896269856 -0.62419888834277715 -0.73656068934610963 -1.0200366263205616 1.7870242552371223 0.47583972506270938 -1.3013683807901255 -0.84228078857151312 1.641461136923033;-0.26194548508248111 -0.033319901578446567 -0.5915849457226513 0.57175650777091136 -0.53837589483120663 0.10897246146115629 -1.4144015893714681 -0.44516666304289537 -1.1673210195950174 -1.3791657709051184 0.49856943486065342];

% Layer 2
b2 = [-3.7910102820334814;1.6642689815343117;-0.64963341889326931;-0.96961598931502824;-1.4626518085719615;-0.085483336841132532;0.30774342236510716;0.58153786326433887;0.79218710363660172;-1.8478700871901617;-0.32939836670620265;2.1099670668241335;1.2118486121135599;-3.2743760784770184];
LW2_1 = [0.12968604145093646 0.16921799714164287 1.2130436750604245 0.22920917063642909 0.32071662116712046 -0.35236484265423634 -0.11127696749313862 -0.41252012352353129 -1.47695672410214 3.1836326574914642 -1.2726996013871255 0.59474767690662234 -0.09001300868223526 0.29394681818499951;-0.070533786926770869 -0.37942420419957112 -0.327485577990412 0.8711073557258977 -0.83259540556038902 -0.48740539228142088 -1.2253211754698143 -0.41304220928119256 1.7478402018261949 0.50828651656599522 -1.4674821046557074 0.19498680595589918 0.2981119534858267 -0.96403115025991548;-0.19350228138033312 -0.64870227570182115 0.023376886839286057 1.7650465214560005 -0.71348812453358679 -0.27513813415821137 -1.1153425956494321 0.35023139969414896 0.35855351722350448 -0.1825638759885633 0.20112552683803156 -0.59956158929858205 0.36913370507341803 -1.6575872737132413;-0.051855960445433585 0.48696583371044649 -0.59448904551814152 1.7629142808030009 1.380110363205187 1.453558510115313 -0.74992215896354353 0.020768047262556391 -0.32084643519615891 -1.0012964762017411 1.9078634120122846 -1.8176086545521286 -0.70064882745582902 1.199307893991179;0.09286917536270152 0.7027224285757816 -0.44220682920455506 1.3631443353541042 1.3362033312514676 2.9860285864514546 -0.44668617052411064 -1.5919468923329572 -0.11506227985033296 0.1031650299044316 -0.0609584243365267 0.74657407489145955 -0.79300372924839424 2.1431230274117179;0.037992598987374074 0.22364971736855668 -0.45066921656572195 0.2041584734697324 0.22517867934660607 0.51781497160741263 -1.3163353544274186 0.36850355943647511 2.0436373559521761 -0.1054800296572132 -1.3835897826892005 0.75601979184242463 -0.17679810698643372 0.79328855375638452;0.040645385959877968 -0.048395404244965939 -0.15978310311108621 -0.26919713649770155 -0.13918675417846973 -0.27150202019415165 -0.19648657455234847 0.041216621990151983 0.95934820059580161 0.56401827639666768 -1.1831574799167195 0.55105120297605203 0.10178044974218864 0.24953759479701612;-0.10473270570145708 -0.2505503273362592 -0.50649043745665989 0.95563719323877783 0.02631333828694634 0.088070586092754102 -0.27765507545596441 -0.20763271427765423 0.22095316642871549 -0.32766608792788204 0.41362774605637093 -0.7952542523296815 0.085861870143224356 -0.85664353426324946;-0.073022234311239942 -0.50992842946639771 0.066480203312789921 0.055647702733451404 0.37231507923224733 0.16604938874140343 1.7669725657639737 0.61121577079195499 0.89999164565136425 -0.71822924517074294 1.715502510395942 0.099368266140714021 0.0081824578488843627 -0.33106661910084734;-0.22053308718512776 -0.59960221841300232 0.51786040251599852 3.0100714851929147 -0.98167132668907964 0.029561017848679337 -1.1867349950034494 0.74644019228029612 -1.2913426629283122 -0.89710868870713434 1.5347670799875017 -1.8956163045297236 0.46287001723983795 -2.1687089599579106;-0.28472944493148211 -0.64581227233072591 0.56212278611909272 1.3165966602405164 -0.29783323154402025 -0.089777047939881935 -0.42916256468626374 -0.22476139133340317 -1.0009821588413399 -0.92449491636980319 2.0070687590528489 0.10806125304072059 0.0045004417257299388 -1.9524581108352403;0.18147965868020541 -0.085878795288003781 0.047547380279698626 -0.96818327297603923 -1.3921616298146118 -0.16467003779957723 -3.7047373347059929 0.65277461419202432 -2.5246379296267754 -0.92421686736364694 1.7153511566586428 -1.2858328756665061 0.48954918184000823 0.97567673966653645;-0.11636637271454112 -0.3512436044436692 0.3091704406893776 1.1022110848934079 -1.7922466622214874 -0.22825865253716612 -0.82888745383429607 -0.57979792024426835 0.4814302798669472 -0.5954989404786849 0.38882286426344143 0.2366370425521841 0.12210765589862466 -1.3849016530851814;0.12553419627603188 0.64714699052631963 0.16482192013916844 -1.2806883635748092 -0.83536482069437124 0.061733176666994953 0.19126026694947887 1.3002715483394223 -1.0349358237863087 -0.31472263349647633 3.2996912863575458 0.58067188001771619 -0.0926099304835305 0.63422180457168043];

% Layer 3
b3 = 0.016997296482916348;
LW3_2 = [2.1390828454966897 -2.234822399188773 -2.9574706593860931 1.8036877620322598 -2.3828571466148256 -0.43225436543579754 4.6990756579480832 3.6006680092340888 -0.43810801632201773 1.5951557329676078 1.1177230667179097 0.96901782823075933 0.84353189477732882 1.680936349695368];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
