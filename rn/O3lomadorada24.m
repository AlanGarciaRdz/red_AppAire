function [Y,Xf,Af] = O3lomadorada24(X,~,~)
%O3LOMADORADA24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:41.
% 
% [Y] = O3lomadorada24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;17.6991150442478];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.7505869713510327;-2.7429455193195569;0.97762962663375808;-1.5418426178489197;-1.6329616501679844;1.4368150336199881;1.5727454785107307;-0.7171819470974713;-0.22814100045990138;-1.0408740477577849;1.4544705643930516];
  IW1_1 = [2.4433189860964704 -0.8992265987395518 -0.0091076096373585574 -0.14719313361950548 -0.24219983545645327 -0.17328969182591342 -0.073350664754525799;1.4947437377470942 -1.981704855316978 -1.6745285350502435 1.2698327595034289 -1.620912500244855 1.7572762226264285 -0.7125170377786485;0.18778768963768411 0.60432388396415437 0.20304286645809161 0.30572421194221155 0.24704424852761703 -0.15449250328678438 0.69839475379443505;2.1554511747954241 -0.46385818877179014 1.7625036827070517 -2.2451101988668429 -0.40846704074532747 0.039691713115949198 -1.6579294879595392;0.12473884772989996 -1.9454579085275643 -0.73774048861724328 0.26354322998807972 0.35629174146811876 -1.7123962943881428 2.1203086997849381;0.19800570064035838 0.32815363162440547 -0.52904255445693593 -0.43118124991128803 -0.3310231631034995 1.9218084256105132 -2.2435189014705821;1.0654893505985363 0.016970903330255492 -1.1394426637045973 -0.13123021980052429 2.7352852965637697 1.252567431896531 0.048188029692232529;-0.63181261905606323 -0.85049070312601927 -0.72249177222509042 -1.232596949995348 -0.024847109266817796 0.43199954288359343 -0.64740163896975067;2.7476020751196035 -0.13094161264648588 0.8766581014805781 -1.1206187374748438 -0.19966602162673436 -0.12735970873386054 -0.39232939782711529;-0.83926123423491183 0.73312124362764708 -0.66785969721178262 -0.97503047819210364 0.54225225699334056 0.61837720622767511 -0.48324972097623725;0.10305516953880604 0.73685275507318182 0.20996779135503188 1.9206189729560694 -1.9109482818202854 0.2372615477701327 -1.4464304191523616];
  
  % Layer 2
  b2 = [-1.5946450649700492;-1.3075509480605525;-1.2138045262138124;-0.62459350493728849;-0.39105674006571822;1.0807053696965274;-0.73715964780466858;0.84978379920494773;-1.1396815136226597;-1.5157299254202652;0.024809048354504232];
  LW2_1 = [-0.092150168607907257 0.060415838789998157 0.86482766718842918 -0.31355717686414936 0.16143771436914406 -1.6491429751673492 -0.5585593813651345 -0.58614396337575292 0.48020275566319287 -0.22029559616846656 1.5783814611783684;-0.14130356716907475 -0.17822830032641185 -1.7205455658548374 0.18462403082344292 -0.10401741291476929 -0.009320394059476135 -1.1603707466323636 0.017355662718130816 0.67059629888109473 -0.29064389588957917 -1.2461725316736183;1.1176638365844402 0.074205048169793092 -0.22130911014025328 0.64027154023757826 -0.031975114699958222 -0.11951856564132632 -1.3191669797754808 -0.13797487504831107 -1.2253565284511554 -0.49541611698247767 -0.35544348838921991;0.89900361536503182 -1.0185272663614611 -0.11418274791302729 -0.057164577396990476 -0.82195890908909308 0.98535827258237518 0.84836540887256318 0.19679616886417867 -0.1496078780539781 -1.2656444495956722 -0.68852964604774991;-0.035090031266266725 -0.39709742109725832 0.39243158484889262 0.15238528386150238 0.18472722738131842 0.51670273480450124 -0.5004498990558246 0.82924051262445853 -0.55735710770566049 0.31137009227385481 -0.23719931302971828;1.3621078912393907 0.15827337511849562 -0.28362106942540444 0.54512486692977746 -0.16054956695638048 1.1390346804682565 0.3372090536901991 -1.4701432621061259 -0.35555566457897825 1.4805990979975763 -0.11150441824438026;-0.15722990013346128 0.38680955075101042 -0.97411565094536079 0.11260796964329428 0.41703715533210595 0.69308158568335376 -1.3800935881331891 -0.37822654503324021 0.28567378120904313 0.56152490694707569 -0.85266797333483091;-0.43717329863201421 0.53184884524083476 -2.191390457092135 0.61991547186877427 -0.09188203607197061 0.051301329590985746 0.33936644686971279 -1.7437504470666569 -0.059827097131612453 -0.132241533102568 -0.55584637353228761;-1.8341045182480396 0.24500707756399345 -1.1087804164272583 0.94609364161021825 -0.0974170738172178 -0.59746436316896978 0.20266215878593161 0.028903903337116232 -0.75533821386248012 0.94564698195459429 -0.62223722680950355;0.39200627653740355 -0.49585159357290093 0.8789328973726962 0.48459617035470998 0.47632649712675162 1.6455198160735489 -0.93478972655946146 -0.26243605746626858 -0.26654400902472503 -0.054550087406518455 -0.8135279835661483;-0.7219180550025055 0.73871400932862663 -1.6466323784447512 -0.76220793282554988 -0.59128596583625059 0.23871823508450241 1.100244207691468 -0.12391463915507003 0.48109156206897935 -0.30112362849310625 0.19344369677476214];
  
  % Layer 3
  b3 = 0.12222285951632381;
  LW3_2 = [-0.96686432644484321 0.86270143418413725 0.82598829969788479 -1.2371192269149034 -1.6968831192698113 -0.63264967964551555 -1.9270154588751152 -0.85121091171509367 0.65867393976937449 1.6615583659644033 0.99141363297810947];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 17.6991150442478;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
