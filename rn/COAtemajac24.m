function [Y,Xf,Af] = COAtemajac24(X,~,~)
%COATEMAJAC24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:28.
% 
% [Y] = COAtemajac24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.6892089645416628;2.1330909278996426;1.359567498584892;-2.2628763876292908;0.17641461166168179;-0.051130741102155666;-1.4876806820835058;0.24858774235453918;-0.09246836186732961;2.2953688320898094;-2.4982465420495124];
IW1_1 = [-0.088432489483520713 3.0826244692593505 -0.018870169122991956 -0.70509681623659937 -0.2540234978516272 -0.0050076928159747541 0.43969632426450322 -0.015987218206128015 0.034308867090963598 -0.10120223753584286;-1.357760530639514 -1.2041978840567045 0.82435955210490142 -0.48929585855392776 -0.028157653578536446 -0.11247598108613931 -0.9623543419568289 -1.5040409988572245 -0.067963544212249385 0.31727867680434618;-0.24830337683138032 -1.5715376530833041 0.9038421460916447 0.43553754717139759 -0.083493151800675375 0.11553754074447219 -0.55070876889554032 -0.49141786973732948 -0.11406971944303805 -0.61150714292844532;-0.20736785700794227 -4.8778812742652606 0.21446528618086497 -0.24876190087392541 0.028489646125021639 0.22724572805951226 -0.053934981348327776 -0.14747807713615746 0.12141534050904405 0.03025883085334936;-0.022367361718116555 -0.32279793468586371 -0.11721817839152086 0.71596660164295789 -0.39987643281140928 -0.33105795155874396 -0.68870217206023054 1.4641877416517322 -1.0727525759611292 -0.28316727695435112;-1.3965200847481625 -0.068496267731178534 -0.076522171332820077 -0.43601238172237289 0.38908410715765751 0.10247961545829752 -0.53243232831477871 1.3978367638623901 -0.20504782470823674 0.46642548470309247;1.970162565324773 -0.017961057274811114 0.94134209977432159 -0.21496051122856896 1.1659326072385998 -0.78785170694473183 -0.22547133449251933 1.5916559731805247 -0.7131599573866837 -0.21335619364566993;0.17108369941473583 -0.65210652572691719 -0.17289033024222186 1.4886472656231708 0.86526780025413219 -1.0880080288397127 -0.27220448832392907 -1.1246011189315408 0.02707803956422028 0.05169446484098205;0.11455143525850446 1.4285812791553381 -0.29835366574116201 0.041837587655087487 -0.082119100764223671 0.043863144087352514 0.043321647207108196 0.30254461861006721 -0.10538555494397843 -0.060991542886709674;2.0358822464050048 -0.96693545136322767 -1.4324325767303716 -0.82700527447472394 0.06048412947086948 0.66911223446578083 0.50541636733483619 0.1341097310375968 -0.4978858567243008 -0.0083832151021611678;-2.2271484244421611 -0.41181082664253443 -0.22617209389764023 -0.36359398536164328 0.43159729672867647 0.065081677251910774 0.46883904489199679 0.36225732168386582 -0.48259584403723521 -0.15430604196177383];

% Layer 2
b2 = [1.6884579435257803;2.0547211808555281;1.3443696602591293;-0.59908736744300406;-0.81564950025137162;-0.5054837908413834;-0.2610718018886598;-0.92135354266582248;1.1206992239649802;-1.3443705916200015;1.6593906169945603];
LW2_1 = [-1.3681290052891633 -0.17678884535490569 0.19407631758170651 -0.33668394334949914 -0.041068223652618197 0.51712928651463252 0.22871726246785737 -0.17234511877541511 -0.87268967966131783 0.89134636471919193 0.13237350601768125;-1.3354792187854552 0.92596637296087592 -1.0661895277794102 1.0103273478121064 0.057431758931263246 -0.2440375053068255 0.2517310777569125 0.79078522917726546 1.6513457007773991 -0.35827689957659736 0.021564154807703656;-0.76315791685184742 0.7891672508850931 -0.1200294068680499 -0.81117140752873362 0.063608092866409532 -0.090185326637757302 -0.27760365369516238 -0.65003612733878913 0.8051461328078019 0.72405112960196205 0.48834976101836308;-0.46116163885786376 0.47385935958785669 -0.61384226186542856 -0.57027305625978986 1.2869167108409389 -0.63591072130516546 0.41124939071973104 0.64567777076706756 0.9940750325004476 0.59858628575516737 0.7471962617541057;0.86296492232933497 1.1243158731426113 -0.80491662729903912 -0.35678770999311921 0.44572684351135683 -1.2119920056060156 0.24652883349938676 -0.50030392476414809 -0.44477573565437095 -0.82363653243293711 1.4346593381254469;1.3173433484157557 -1.2340231872165257 -0.49586695491171978 1.6007690367661318 0.22258732038785742 -1.1504990308356924 0.63504119040841611 0.12435534513738278 -0.65168222702493783 -0.53450990498222173 0.02010744206572708;0.32358231349714695 -0.042881714522909897 0.73631666630147241 0.85336098757560064 0.92695668665412911 -0.35584005097379556 0.64087299944826215 0.0053703337678608657 0.68090958138937663 -0.69628855829026737 0.85119617518158019;-0.62201060546160103 0.32158972418311738 0.1069022988895012 -0.10875607077775502 -0.4957345164965869 -0.020414479638579161 1.1500408321863713 -1.2559383786278617 -0.87288343909431709 0.11215762183434502 0.67923687308466985;-0.48936617538143423 0.031230623735781435 0.2264359812980101 0.31280552061043732 0.21158549565456419 -0.19822601019280367 -0.96539289282136553 1.5372914575482515 0.53503582567421115 -0.059675851035027039 -1.2858119823243592;-0.84816504790070468 -0.14430330647958367 0.26741084805754922 0.55893431552288364 0.32251775283329298 0.22068425186981394 -0.66825428706509427 0.66384024092742022 1.6524529568901942 0.74291961164156128 -0.88518690592880012;0.40305683077072468 0.4156393066546446 -1.0066415717808084 0.16260971215945569 -0.86339388265125105 0.044572875157343976 -1.0061012677155663 -0.88152350212425357 0.82341784836127585 0.80472447899045341 -0.38207780935256797];

% Layer 3
b3 = 0.30664379910046513;
LW3_2 = [1.0618075784160439 -0.77957147901070756 -0.84737139344792911 0.066557621678047588 0.99558400566318972 0.79034561759012345 0.23062469509023409 -0.22733150235371377 1.4005930826553561 -0.65776907322291045 0.34153402939746913];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
