function [Y,Xf,Af] = NOXCentro24(X,~,~)
%NOXCENTRO24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:22.
% 
% [Y] = NOXCentro24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.3192278534103314;1.5283599117152702;4.1420150565219842;-1.4571529234585552;-0.051928597742201758;-0.63785793497272258;-0.083088723845736068;-0.68269094123614527;1.504863580115503;-1.2394327242211518;-0.14146442741667137;-1.616278830269182;-2.4055812777204975];
IW1_1 = [-0.86799199723697251 -0.83267642254343843 -0.96580218385891048 -0.19284691100529316 -0.71999685317411455 -0.68341049905674378 -0.26644069590972763 -1.420373257157918;-1.5711473023934139 1.3384991043836292 1.2207637253305805 -0.39046691431648684 0.62077180612626781 0.27691486245065894 -0.026976263298119661 0.075211384934544517;-3.5336880687524883 0.8011837706704652 -0.2676820820762863 0.72500628411044477 -0.36313652893307391 -0.14741891651699154 -0.099905378556415667 -0.13984261262311379;1.4804583291816424 2.7304452841199827 0.52061331633723507 0.79872583298777111 0.76659786544808639 -0.7693517514623629 0.061143582738946205 0.39318841981036379;1.2031808852094692 -0.30921140922541063 2.9303051102216826 0.053825528687945698 -1.4074979441684783 -0.44492359212877247 0.41878534814536833 -0.11962260745677258;0.33105191825260144 -0.043418680302526415 0.53979404784236806 0.079605175437908765 0.11006214977170928 0.7272247739945561 -0.17815968402515908 -0.044511850486384383;-1.4439943778713729 2.0075525962818466 0.28444744943485584 0.67383024061586094 -0.71057730923212892 0.29661629833459857 0.21602450611318316 0.0035474978655543063;0.036203336496441994 -3.4078716407052498 0.45590864356739669 0.56151051955677822 -0.40967734655006488 0.19311809706486929 0.036943809653448956 -0.1813067256637752;0.6540053126504155 3.7400572086977979 0.18048636493586248 -0.12476805841642599 0.26079485697280735 -0.09337877212766714 -0.022347830902639511 0.23728252039320036;0.27407526041892438 1.8260364935870497 -0.52175121324809148 0.48195811999832794 1.6577049497142142 -1.1432255706985788 -0.038076471584237534 0.94766017920739465;0.9106550384220703 -0.32459388957513219 -0.24420344341720157 -0.13462489471166589 0.95961241643055695 0.32999811876846624 -0.30714135943166415 0.014646179894562485;-0.86474660565377126 -1.0228086036649007 1.3325676753086302 0.028983817854952278 -0.54493138584713585 2.2071212547920438 -0.30547709129880196 -0.71819586908053556;-2.4197334154738153 2.5463547862728171 2.4651343575965874 -0.15788438590656295 -0.52031685392997662 -0.17224229033902982 -0.21696403943583822 -0.080745620025767781];

% Layer 2
b2 = [2.1363034256138307;0.47382421722832768;-0.81126721033092286;1.5443851548906453;0.47256103507930308;-0.18322589232341871;0.9846375358911531;-1.5847146206503919;-0.89829057253324451;-0.61109910011286805;-1.6402782867539816;1.9392395208438653;-2.0822567013901829];
LW2_1 = [-1.391948659279264 0.3011782900419136 -0.80576828537669754 -2.0413176093002847 0.069330126770845754 0.18963347401590969 0.75778297086447965 -0.71946518480317079 0.060710695171958109 0.72425135685389375 0.13669371056255888 -0.11035514464923508 -0.42825471857351494;-1.0778815150312122 0.29139452482817502 -1.6149063742405183 -0.8383965922466603 -0.38134196848989982 0.2439242385711502 -0.32733525393741641 1.019645455185878 -0.1365007710353052 -0.24073279919422585 -0.37319362498055475 -0.18301222865128547 -0.40202158250251596;0.52693773384445242 -0.48156555664364492 0.86623889009146704 -1.1383013322990845 0.8323574651215313 2.8553917173787813 -0.72527008179098296 0.51697924287170771 -1.3543835630179832 0.098263863729327203 -0.46774302504245474 -0.43263094464108859 1.3276054258767127;0.12950573882899261 0.61005168729458903 1.4805730999259772 1.9220843758493593 -0.15832583163713845 1.5155180281441214 -1.3779781636560462 -3.3936567661554862 -2.732127843008032 0.0013823096654175353 -1.3497324324270683 -0.053042792510730068 -0.72960268274834272;-0.66865451040332213 1.0306804341788471 -0.25567164719791213 -0.40274271136818918 0.0070007485246384882 -0.0046843021137091892 -0.85863298289429724 0.08479192458382051 -0.85455355397912014 0.058214274855725376 -0.40680624644072483 0.12923259792240263 0.39694356490168142;0.27425325524873517 1.3607448080438869 0.1850896236331073 0.34364871984822398 0.45253441610312639 0.16855992563495176 -0.93041258203054977 -0.51133898469515826 -1.4899289351781824 -0.10958839081330622 -0.39953001994384851 0.072437784177407427 0.088102507486654227;-0.11343581946734514 0.72984977595045608 0.2882363410523448 1.1832444288225521 0.51112376987585095 -0.088345195499413928 1.0028322191474497 -0.39472893843472301 -1.0416135649129905 -0.44784202887128871 0.1752394170660683 0.050430387379930872 0.6654933977379125;-0.99157621094659731 0.4853056227618307 2.1173457595061174 -1.062082769468945 0.20245483299385494 -0.97880061809508234 -0.072070096241116738 0.03084432445274864 -0.36812230553841646 0.17746192164295876 0.34732131948859946 0.52530067365376287 0.85341904307109617;-1.4524868035934309 0.12605699754743707 -0.56993634605814425 0.96730274158931584 0.12598730029619393 0.13880585297563863 0.8725670834193181 -1.0820189706361727 -0.40148804498886254 0.74825093021978129 1.0813892847271922 -0.09080917066980701 0.14841935080917176;0.12319154337708611 -0.42714409474651044 -0.22001737359963844 1.8161175986929161 -0.28262658535449892 -0.43387773717652012 -0.65676165859585023 0.33655695953016485 -0.0687096345606798 -1.0470666471127514 -0.19380625735396811 0.089834858079417629 1.0056254331672441;-0.66474727147957335 0.047904054325254852 0.11525353266860691 1.99058314400602 0.72599892401808974 -0.60269655816618184 0.28759398809928316 0.57833951047772514 0.72504531330457211 0.19069295866130498 -0.16280923476214371 0.090760462803119418 1.4435279228387339;1.1582728434447302 1.3494614044753412 0.43609668037768262 0.75631669208809493 -0.33108117886318345 -0.11473620883647463 1.6772050083039884 0.41178853818003158 0.50662837007798334 -0.90279664045437991 0.62956866828175528 -0.038282342024461784 -0.2826474791989938;0.080639971182780018 0.086646751126422408 -0.38840380182091161 1.7404881549092213 -1.6202282475231058 1.2311241862219604 1.2944618139501847 0.87500555372953026 1.2771260834684233 -0.47439120556321424 -0.78248050218803111 -0.71486637392868835 -0.1978441702237321];

% Layer 3
b3 = 0.38932745594977197;
LW3_2 = [-2.8714469564937972 -1.1766982351716895 -0.67846594476611999 -0.85150436474858193 2.8647817273331126 -1.5988368597479983 0.6198888079202759 -1.1105824437367515 -0.73401533035297217 -4.2620289450846691 2.2725759006708866 -1.6355541325547278 -0.48986098382256543];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
