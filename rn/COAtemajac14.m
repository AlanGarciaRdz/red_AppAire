function [Y,Xf,Af] = COAtemajac14(X,~,~)
%COATEMAJAC14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:25.
% 
% [Y] = COAtemajac14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.513839284626597;2.5155479406963646;1.1267986935361121;0.26870121987325446;-1.9448407040585283;-0.51715278062271952;0.99432158596397402;-1.4833078852576793;2.1482199470867687;-0.90403734360877419;0.60589769679361882;1.1046407029184953;-1.3969833308700752;-0.079725076412801549];
IW1_1 = [0.23179235395681053 -0.017737902147605317 0.67623235788824698 -0.74238981802797921 0.3088748958516247 0.12349055757672686 -0.60323262059962202 0.49763941579890897 -0.18031537203490561 0.23343786888449009;0.056038854299543389 -0.45704356028658999 0.078112874912253855 1.7469670629544651 -0.53049968090628874 -0.29691226440002444 -0.5849090078789273 4.0137590997446866 0.18738233355973935 0.21530525967078307;-1.5327955441123027 0.52477202395317613 -2.2335607247272278 -1.6988544215137598 -0.69269490682549517 -0.034778423276635148 3.5028087941044261 0.38020179388987352 0.093730945972168619 -1.6377065915337936;-0.27527232077533981 1.4167792791574498 0.3367833423008626 -0.017583053148380861 -0.11412359898735781 0.068168095095985204 -0.2593054846802833 0.1439159796385627 -0.10689399707689974 0.15227325714239326;1.8310676686044494 -0.45507357725653719 1.7169104364543868 0.45085841183996012 -0.22324917088917379 -1.4381309468734633 -1.6049404130161664 -2.1100459789833397 -0.28916552200389189 -0.8562081442328664;-0.034763726435608808 2.2897145449801637 0.76916654127093353 -0.30565898066601238 0.014667010652539208 -0.35028871150072188 -0.16640817460758078 -0.11976270246091465 -0.023229161846739069 0.12047983979507683;-2.0108019927288883 -2.2466121090553131 1.2407702916367744 0.34629907638835183 0.28263271133755041 -0.94769803640059624 0.065136420467632905 0.021123588265269125 0.21996544050706388 -0.1049540604582806;0.20282528797279059 2.599625322345116 1.7725031167682184 -0.90920182470866817 -0.39092971649015312 -0.69179044416903623 -1.2285674537195186 0.40251505223167677 -0.42733252631789903 1.1063830258992546;2.6144624793119604 -1.6921867477022352 -0.29607014768797679 -0.33625548214575107 0.52446439188849303 0.3804584938420047 0.22874122201459759 -0.52394358954064635 -0.10969112953392697 -0.23443038338559422;-0.84623772427593824 0.94524897565781563 0.63575975068756052 -0.49321704780611492 0.64484601402988095 -0.0091329540991144063 -0.091990014810279089 0.14352609774144828 0.0093247069426577543 0.018146930451942274;0.21253263871653744 1.3768469926510958 0.28604144190430414 0.12615173895467061 -0.56438832749245726 0.43851397160549255 -0.069304790752883233 0.22259396444360594 0.035014362903791292 0.3479247879635245;-0.038140130538825458 -2.1337340050173306 1.8313155075883596 0.38779791440325223 -0.43448780424111111 1.4290796238050201 -1.1457653508221624 0.90964171242586922 -0.29447201472200707 1.1580984123392226;-2.2321060794570369 -0.3066480920544099 0.94382296978598468 1.8796724421991107 -0.067924588877104439 -0.25670999037436748 0.2067945851631651 -0.38958610618676115 0.34319255638464397 0.2131215366564983;0.11294717695152916 2.4064107441291887 -0.34774402058033149 0.83914489697993833 0.96865909301961395 0.12445166623738202 0.72171971212543062 -0.55061220937559907 0.026029996869425268 -0.67202904722829515];

% Layer 2
b2 = [-0.62575996215071417;-2.9598318768687708;-0.83593660814439341;0.99117255223436396;-0.67473817794589552;-0.096348761598717247;-0.97374917849300213;-0.47885659219918819;-0.10434776786681946;0.49275984184137944;-1.352934123584957;-2.4100218303250984;-1.9834843162069509;2.0871675338177464];
LW2_1 = [0.44660077861374731 0.031692739821873296 0.55309611338123266 -0.43970861751839968 0.5102299225973167 -0.76732391474402095 0.45905764556027634 0.19790389410769466 0.25105913464676632 -0.15090094481409319 0.89498735670208451 0.029528651386612627 0.0041230411884174666 0.56420941963238858;-0.56105237186304191 0.081866138806667363 1.4711434511805961 0.42827998750964608 -0.27657004004477598 1.9962572091913744 -1.3823984180865576 0.18955821260968705 -0.22669779653617764 1.2569183603615581 1.5914241868300383 0.26002355041444791 -0.069741063659157707 0.70383933662178144;0.60694144246252757 0.060604861474994762 0.58453802915966913 -0.75114446174369265 0.80382994560031573 0.35883481595981298 0.30032718539843883 -0.3419037443298929 0.18546792696556275 -0.042768140024836768 1.0235166534208835 -0.20494880811178284 0.13649420430680698 -0.037204849575360924;-0.5477169639267685 0.5168110628027156 -0.26064790168400104 1.122956998300745 0.0077946236033919012 -1.2102267926250962 0.57203473320528198 0.55815829337449718 0.18135089837766122 -0.50306717865456396 0.35865064876708441 1.0758097297214515 1.3517271414312788 0.3139955836830689;0.10218900327660961 -0.48121388469334864 0.14941759347416605 0.50999433418625051 0.93586195577465359 -0.011437613270521207 0.51482659822416066 -0.39185660873282324 0.53379697152050165 0.29007595136564607 1.3269539254577187 -0.24157558601780157 -0.31022562133971648 -0.35787065737706125;-0.47052670005670538 0.86441311670126197 -0.28661990170205554 -2.1440530431776539 -2.0209549237571953 -1.0148398694484686 0.18510441689427823 0.32527451589203715 0.9467837772527552 2.0206729170799411 2.1103329035064378 0.10012818224331102 -0.23373993083316802 0.38758607516006094;0.66345027647693544 -0.084874956073456048 1.279946311503974 -0.95939881805809391 0.15979017829795331 -0.43156516035802145 0.79348928112615813 -0.081790762055362093 -0.29055280183678861 -0.54890505266185508 1.5007485603911508 0.36969741827546421 0.6068370383141326 0.4988075014357411;-0.16090383210049627 0.23701212370832642 -0.25436157761105382 -2.765951240978564 1.0292525666030483 0.020546737846896507 -0.73416306063324333 1.4469463085706376 -0.25078331752710192 -0.22626654423436962 -1.6994357227672714 0.68114839599976595 -0.052059301979899587 -0.45020495370219854;-0.58122405321231074 -0.60952836184881265 -0.41410411054341412 1.4615139112954374 1.0623277864069902 -1.3652347397351938 0.42646808320069679 0.4242852930905176 0.77571617285096139 0.36214976308493663 0.48660420849742425 0.01167579173880667 -1.1642912143656647 0.37095595055561198;-0.71965407212395904 0.032663972782506719 -0.72636899371050079 1.7809537572767911 -0.66342045444237607 -1.5422407131186284 0.32636220248948711 0.74020124894751405 0.22738316388292784 -0.42139686528231302 -0.3040649281111561 0.90106097146405517 0.39150635640058862 0.25128964474899185;1.1088094244441609 2.8223671304937956 1.437981910419672 -1.8799471635615379 0.85462678274773829 0.030283291276653742 1.6680749805537516 -0.82974341045996536 0.3583689628011788 -0.69885609114239167 0.21591042175640388 -0.16038345589029654 1.1706576888449522 -0.69959658613846532;-0.3123200229275952 -1.8199545812704283 -2.6384976236378752 0.75673080689008232 -1.7414060442414985 0.97631682954669241 1.2087372834198795 -0.39510070884824577 -2.056329837603895 -2.1207353604487866 -0.56516842194004302 1.2656019069314659 -1.1603017614510729 0.50075434226401627;-1.3537010392613347 1.0242784878921674 -0.6412356277074408 -0.35509062965810206 -0.41667897507858304 -1.5713350685572698 -0.46119868978107165 -2.051658777559533 -1.4577225922532107 1.3868498747853277 -2.6094876202730322 1.3992275365831366 -0.066661537140459637 0.91153259230335126;0.61531543325540761 0.11429223344553298 0.31297336020043903 1.4041228555417218 -0.22983973478376979 2.5983082635012544 0.52924414700213385 1.5916307030621999 1.5476483409819355 1.067589322033889 2.2055584233372669 -1.1529577676774765 -1.0189390403736465 -1.703022745957806];

% Layer 3
b3 = 1.1470832514413341;
LW3_2 = [-2.0318314040861001 0.34688267032617176 2.4151347586059213 -1.0111642245989219 -1.4366825904433373 0.24668442645914285 0.84028524401670635 0.23247797928067832 1.1596679109971542 1.1682245715695256 0.3664443841080342 1.4701155506757591 0.41370092724847179 0.51570379180355985];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
