function [Y,Xf,Af] = COCentro15(X,~,~)
%COCENTRO15 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:32.
% 
% [Y] = COCentro15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [-4.381582401214053;0.77266610343166864;-2.4873985016636109;-1.8385338409191008;-0.7949331497124611;0.44349860384294848;1.4436109706265514;-2.4390380697991132;1.4162880025172528;-0.603860462819785;-0.86999370482139948;-2.2934207556450166;-3.0836182136343613];
IW1_1 = [2.7167354521855276 -0.25220284311597829 -1.0529161725277223 -0.13849628516449988 0.60984314343310864 0.19580180530218455 -0.83938191247990257 -0.66954525334548609 0.065709306914450788 -0.1083413553407172;-0.18068711747250887 0.35356455800849856 -0.67566260229964847 0.06650611357446358 0.76911723677708621 -0.71762249030842895 -0.34358279029204636 -0.054208669735977641 -0.16846688019814102 -0.0078318616716172643;-0.079456416977882444 3.9926491657094041 0.095091779602013746 0.11727446274255084 -0.19277288464359935 -0.03409657134611873 -0.04890255951082368 0.1663385232445537 -0.92846136610786656 0.48782619627177071;1.2498161537329322 0.34816020787012214 0.94766475203343348 0.27387363027034223 -0.17005271745937164 0.92500585812291092 0.054572649945094878 0.82310647625084754 0.039504596276921301 -1.0992812803504384;0.1438529085234192 4.696169516737366 -0.21249220409976022 -0.20523394547103879 0.12795145217609008 -0.46510965627117029 0.11409696128531821 0.3148592379879579 2.8567367793443665 -0.32405702015641757;-0.38196018885094163 -1.5339222375737771 0.64659366856401679 -0.44094468497814726 -0.4205575775277961 -0.09366611811623049 0.66844449175357112 0.35983908222190297 -0.20052458319492569 -0.29824749420385105;0.10322478532936749 -0.12588999928692307 1.2092601653019597 0.83296095854934638 -0.23089400047994446 0.19401113252081603 1.1487854278843794 -0.30307232621744001 -0.038635381827299219 0.21856613238201006;-0.17435434511908207 -2.6521392411181286 0.13439612059075973 -0.76166950835702874 -0.39464605782708423 -0.11488372509756338 0.080273244199651497 0.14316632113168185 -0.32155559690940011 -0.081524567245414556;-0.3325247221972889 1.1283508998966816 0.16646543512745096 -0.21833096083371667 0.10406277469723015 0.070519360168544237 -0.092327516435002074 0.059335017070142541 1.9981687114292082 -0.03113296342842058;-0.51934026091304553 0.43871843624241386 -0.0960472301989264 1.0547032911120533 -0.18803369178441615 1.2459649918516611 0.33731265138707195 -0.73851833065600259 -0.67007236222854405 -0.080442891324337892;0.015885589973733846 0.21604222077100116 0.51404090180145623 -0.23666386634669381 -0.50661249892410531 0.58493298579142372 0.0052719466462333303 0.16158869120730845 -1.1729547950016652 0.10979208660881842;-3.2787563558196884 -0.028550364839287575 -0.46185799482219819 0.61323995830100753 -0.36404150129301721 -0.065853428608643502 0.22831912838541105 -0.38885714364817858 0.24028457208311355 0.18079115116837272;-0.40577607480357286 0.23457486157622848 -0.80648458674441315 0.14843194049174857 0.40076050084515136 -0.86749873421003421 -0.024371876944464986 -0.093598670278474169 -1.370698494933094 -0.21637623906884651];

% Layer 2
b2 = [-1.3682688806624828;1.7132335462708523;2.8907030610802491;3.1498836123301377;-2.1985459398360434;0.18117322034014607;-0.58407636107846828;2.4897128778785502;0.62756470643464857;2.0205720526935567;-0.73133371147051451;2.3644338526714423;2.0071746549630367];
LW2_1 = [-0.04374766594202581 0.29166612799956765 0.65552903468057755 0.19720191526745062 -0.68739535426601339 0.19899207917609876 -0.029582422647837656 0.85460037643486775 0.097011728471136982 0.2097526286173218 0.14696201997726688 -0.40698934975806639 -0.39984716838703172;0.67644947589629123 -0.71042667350700861 -0.25435245596968653 -0.60398169848460881 1.1727700607503493 0.82041789196283932 0.21296443823190445 0.048424009161403762 0.48005417521702165 -0.48602216235275997 -0.99144932535979946 0.31241790121664781 -1.1234737194127626;0.43771720533332942 1.4493113519323517 0.52678703719315467 0.032116222275637235 -0.78864487301638853 -0.0096836420435608972 2.4401383831542311 0.24204532105638382 -1.4006314772299429 -0.26362867385706551 -0.9583654843325029 -1.2733994089678364 0.093656568449551808;-1.0935548651148048 0.47295638317987015 -0.35903071023930078 1.2231777321196269 0.47657128460606546 0.13803177061116328 0.30952569067210789 1.091388027272296 0.89872522685698863 -0.095537767658857006 1.0533475561461685 0.9122085902462056 1.1231584060407243;-1.0004870002409221 -0.84840772148507626 -0.31046515349428166 -0.14244231930935092 -0.15328832168735115 -0.36579283410251451 -0.226277000892394 -1.8600983475843753 -1.0077658479567626 -0.63214255571632905 0.78367496084587773 1.4338105592680517 -0.38121394188158297;0.37405719787032282 -0.084559278313059469 -0.38219775605358208 0.52610490473736982 -0.13661190184819039 0.17232784626757669 -0.2295967343045682 1.2335564531563792 0.18063229973225731 0.31300421032611381 -0.24644631586159355 -0.36406982946593308 -0.52720485842855813;-0.29212203069459103 0.36105593579274198 1.424820737232964 -0.21260601994936168 -0.48790758249561744 -0.26736939790479602 -0.094700391767993539 0.46158152185538448 -0.36799752444025785 0.15287278528846127 0.39111207185413649 -0.34928708810824227 -1.2225844896007825;2.5838508530990754 -0.84197936832223697 1.5416722459272361 -0.6380225178396226 -0.98812308287351402 0.46254270176731299 0.2880511410613581 -0.41088787455549047 -0.1370610104399001 -0.15048855825276231 0.16981179422207604 0.42237333004546951 1.264770165056752;0.35355192767655091 -0.65401328609724163 2.966736225616748 1.0603654881296798 -2.4388503201240308 0.51434926837577433 -0.42008982851883453 0.23499052181349736 -0.58646634040431012 0.70614675116647607 0.091953763150835255 -0.2160303481694274 1.9074956490218611;0.28886728661291206 0.26923275461712159 1.310247555323891 0.69447276821878789 -0.12563699878384474 -0.050426548901935001 -0.066311198094277837 1.5015432838610803 0.63945101567430762 0.48353313141242288 -0.27878363694417568 -0.53680772639943197 0.19928308270495193;-0.24548042313679388 0.75052876860679918 0.99048661481672517 -0.14336129107650275 0.075761242098885864 -0.47540217972538545 0.26301091599505311 -0.31168387219994359 0.23028463604781854 0.084796608776561117 0.80423191663653304 -0.243784916517648 0.28321003035532949;1.8438466362155814 -1.0496453522160463 -2.2948803364056345 -1.0413699776071867 1.9084610644364761 -0.052663400605067051 -0.13771949091156116 -0.46519428150046055 1.5017927377894116 -0.30750783245753377 -2.7524122416515144 0.20130897794597755 -2.9937050691947338;0.95722644074303886 -0.39265630326650236 -0.32450544869929343 -0.61941156542696851 -0.19141867247157413 -0.588818874430873 -0.93564750184255807 0.25154953794119528 0.11145686211073114 -0.0079147748087190703 1.1022351142500397 0.31383643619174478 -0.75054150253274377];

% Layer 3
b3 = -0.12146807922195044;
LW3_2 = [1.4366052426237277 0.70965603081744377 0.21105101139381011 -0.46662133078860268 0.39022341014648482 1.3631859920692597 -0.93552343832941431 -0.36229115585233923 2.5540590720989504 -1.156317655818923 2.3435869526186299 4.001422330077669 -0.20030395312054206];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
