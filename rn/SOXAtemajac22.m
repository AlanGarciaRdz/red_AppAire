function [Y,Xf,Af] = SOXAtemajac22(X,~,~)
%SOXATEMAJAC22 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:25.
% 
% [Y] = SOXAtemajac22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.48589004326109453;-2.4245042199769649;-0.59205490257153426;-2.1353856947663279;1.1734397672923982;-0.64226092807812774;0.31126176257940458;-0.97701182970760858;-0.79097547398907597;0.24478594336848736;0.67723368361889869;1.0162473132683227;1.4584242605131181;-1.2566096478489348;2.4099314879246747];
IW1_1 = [-0.26343864818967161 -4.3597582312071763 0.23736759508965849 0.017289719973425231 -0.19610532214868626 0.085628326723499945 0.3110660774247464 0.3576725185484233 -0.14825118407520368 0.0046001181486652939 -0.051381016956417426 0.30347801249676959;0.466363099801892 1.0760851290737456 -1.2729218724423508 1.0632137928746084 0.20963968424394833 -0.43401915862184143 -0.32948176729530465 -0.42427557665386584 0.27224316985764185 0.14864081809241603 -1.5131221466191054 0.48261818883456098;0.8187526713627481 -0.36181898047385652 0.86368039521484985 -0.5622188834052706 -0.37785599969917166 0.58932858359611373 -0.18720279951579447 -1.5864668554617767 -0.10968069320329807 0.01303891402600222 0.75407585618548778 0.30648240608885202;0.39859088287125016 -0.15035365096519826 0.12841414598055922 -1.8138086331719365 0.40098341674725779 -0.073357170382086237 0.58936733200643787 1.0827631510312574 -0.45411511504839175 -0.39770113514031802 -0.30663040294193267 -0.98839520840627582;-0.10699207280622217 -0.156681462167297 -1.5131194668788523 0.10094941168135964 -0.85613110521910862 0.43332061263856314 0.11500805906459881 0.44020924390519922 -0.31208836389607997 0.13974130900695014 -0.85829049576761673 -0.9314050862604859;1.1483102368993359 -0.37783189979343379 0.31242134858375475 -0.024178246917380457 0.87522380664063926 0.30864618267173127 0.3569099108662222 -0.21882478335435776 -1.4319114460328002 -0.21315010598252321 0.1682773832419665 0.22375082324870715;-0.058531080127832362 -1.5813012380818474 0.86744984558682625 0.018647634185146506 -0.014519390200585403 0.39569408600591266 -0.019675045806347394 -1.8831558953529588 0.58035973248321104 0.11695850024320352 -0.94150102148721493 -1.1161024352967819;0.34404136021900494 0.65469549052063425 0.29819694402580471 -1.2524244216603135 -0.74039017696496168 0.69003842020661865 0.017840979762907688 -1.6793154291484753 0.36658114457879848 0.029180645348809091 0.94525251757351991 0.084351851253179622;-2.4529356714274466 0.34378867947142566 0.22610975629906099 -0.14270965447203493 0.023488412762642887 0.20828590458790011 0.29501005739993108 0.26409087882324989 0.35413530648593378 -0.20645570430344146 0.050501376134950482 0.26628684744670489;0.45075591755901134 -0.21453857998444753 1.3751534916327037 -1.2004169823613164 -0.26467491578872682 0.34790278696807087 -0.78947486106218723 -1.9572031130864966 -0.16732816724675453 0.0067219899565028208 -0.029752732107602726 -0.47924045558817152;0.8160516836081404 0.62359153503146691 0.77637429421006166 0.36747082978991358 -0.010305625800897927 0.75197918659214436 -1.2678529717751883 -0.93048014958514991 -0.10308416214337787 0.22247518036743708 0.12071597878075534 -0.45128481200876691;0.93292678609145174 0.054082817499773096 1.0745577514987654 -0.052298906346331782 0.56923539294525682 0.77290000381605517 -0.2736661243418006 -1.0100657917586 -0.072255427836111857 -0.26716200121715777 0.27293058354331357 0.22191349747800818;0.15510211023534176 0.25934064408316315 -0.19749527309377896 -0.75911541199699473 -0.52156996025819191 -0.84251688475178899 -0.43454041029487123 -0.73777173108981953 -0.35360127758377691 -0.20704542471623663 -0.53574199338704342 -0.64048704311215465;-0.86102398639435052 -0.14743325057608053 -0.49920577387959791 0.96352403488713811 0.70724714970662705 -0.52251346798671316 0.035838702928095587 -0.99716783714466661 -0.48480740303133663 -0.32174963376527987 -1.2860172976761479 0.056203135700800141;0.47376223535782014 0.028159739252373139 -0.5055347655846858 0.88409263421945905 0.69370134199102806 0.37652123672915627 -0.9784721154097884 0.92080184623961703 -0.8920177046137292 0.12362093835179763 1.0121075349648385 0.37526510036397975];

% Layer 2
b2 = [1.933306480771849;-1.0470110806490998;1.2627195367030757;1.0134843122963586;1.2215564519023798;0.23809407565321622;-0.11721164944638369;-0.017650116058749193;-0.43642829197216443;-0.42071435247611638;-0.61231882213464006;-1.2969852933585519;-0.61705183292620203;-1.6214649942373951;-1.8893081028880929];
LW2_1 = [-0.78305510252528931 0.44785266540174801 0.99437341360918763 0.067067211146174005 -0.21726599974528643 -0.13604930648790789 0.23330697827552485 -0.35849946920814157 0.019793365798342948 -0.16688755622423365 -0.34208662256918387 -1.1344577114109415 -0.43603935241508024 -0.84573476775124479 0.53179670508622645;-0.18084180862436494 -0.89772571545776947 0.12125580227863619 0.44942815714766277 1.0325619429509267 -0.54400128845150608 0.081456262494591244 -0.2637993061736737 -1.5725862583878794 0.7338700254638495 -0.24324101081033417 0.65652277548710514 0.89387306442931469 -0.84261398578280577 0.3911406012980973;-0.63477562410296628 -0.28140747642967767 1.3542714041687371 -0.70713305432135121 0.60100860535108602 0.87371741447822737 0.54515897283644033 0.64718996602774082 -0.27110080430559413 -0.95898886153212293 -0.64319859674095625 0.29577648427510811 0.063434778010021314 1.0726855551251495 -0.43535805076305623;-0.28410153200385868 0.46161224343623602 0.41472173984836475 0.46134614690494957 -0.14608982282392641 0.57076370917615749 0.44262996000251553 -0.14707688224218382 0.02419593732191256 0.4737480132536554 0.23765462267743231 -0.4017247179607128 0.57013003830868514 0.21792872709814701 -0.46464760106710606;-0.059664473328398963 0.070097325542511038 0.96422844851464196 -1.1651630121145218 0.42692711151752283 -0.95678551113887611 -0.54143578608916931 -0.74427291119459915 1.4729957505038622 0.71367682292457135 -0.091852046755149269 -0.76647893720467364 0.12356001303521438 0.96155460848616414 -0.48128220322959692;-0.20708098405294875 -0.25555293140315399 0.84651899684944187 0.0020329109427377188 -0.92645376353034115 0.35268001648901381 0.0044743924812937026 0.53761480936880546 -0.17980177791808025 0.35677035801327328 0.66959859332007299 -0.00093560585846434036 -0.19594339317815079 0.59072164680190054 0.052021006883384721;-1.7911818325430016 -1.0326591525385653 0.2387382755171843 -0.15427743692754214 -0.62838799274078494 -0.11494789597189953 0.97830820699707988 0.092319356968687261 -0.91851280868774954 -0.80445199553371327 -0.6016934620339357 -0.12452433606091043 -0.52392732705905942 -0.095844322599076159 -0.20265506396556177;0.25908356017559575 -0.25809599510677017 -0.52005987059173087 -1.661200286739035 0.14343966288041665 -1.2013961090704099 -0.079169587315828904 -0.19898206677691882 1.1311593895192564 0.48243635069135882 -0.33704503785719692 -0.016888212838513106 -0.19590106533692311 1.3788578413662451 -0.81481757923179499;-0.18636912512525949 0.41381974088713286 -0.28226779447184058 0.82047562666928819 0.2274273859931987 -0.88448814366551154 -0.055290245770431345 -0.083997044170003823 -1.0161692314972812 1.065346953440486 0.063367528707003351 -0.41470031639988042 0.26616666907930298 -0.22474859189202223 -0.10668667967021174;-1.4635868344142344 -0.48643600575924539 -0.31061057656758884 -0.37603992695771687 0.70904070465782643 -0.36167718732490189 0.41277878499690801 -0.39992300175569695 0.2352232181188196 -0.28615263672038249 -0.69910119206167121 0.59307979206521089 0.02599628373726209 -0.12872347557785302 0.027301999991223132;0.25409056252576634 -0.17388915685504935 -0.11827172578971901 0.21979855851190411 -0.12532652589395876 -0.344973574163426 -0.74014546616855426 -0.4467460267595314 -0.12456376185987252 0.46003669863021801 -0.63367431619178172 0.85909386936848875 -0.26993209693788878 0.21424092084165522 0.20547596413664598;-0.17705181333668202 -0.24214718292187165 0.47126951721282362 0.56902512620758483 -1.0889331242816958 -0.36834552034860868 0.0069388340265979266 -0.42651034467976795 0.10393422713695513 0.90048580197258798 -0.18946018844216814 -1.9878200533320034 -0.77198955870538699 -0.26074286998112628 0.60804992142472014;-0.52655322931097959 0.56912513635248207 0.62429757449982537 -0.016261007927026876 0.81085144987494273 -0.087064270359602791 0.31045507603733402 -0.5835415984217257 0.39356721382342474 0.41115013551484536 -0.75001300552034578 -0.62107713276771981 0.29531005995262494 -0.22983856671252778 0.0072598153753868841;-0.076449979206533847 -0.58494556809056752 0.16517011140051599 -0.0065397450059917206 -0.24600104539110693 0.27773140698763321 -0.081936441692689738 -1.0820746205175349 0.40802070862252787 0.24731636694576856 -0.35029689694970223 -0.18261024648949778 0.34442819218322052 -0.05141309793803947 -0.39336720445564999;-0.14426405442542339 -0.48424480553114352 -0.12509432574135662 -0.51540000721121759 -0.51319340880348008 0.04849984032552003 -1.4486779785497892 0.31375717976551265 0.10183905880972445 -0.23231160629861608 0.69983251407032621 -1.0015775951345094 -0.22636268481448857 1.4339835102779555 -0.76588830611427527];

% Layer 3
b3 = 0.45047041078999051;
LW3_2 = [0.63038623882320832 0.43943189788623299 0.34274733198713597 1.093380834667256 0.72510674473430625 -0.82075454288869154 -0.49658954279669076 -0.61683302457882938 -0.96404441558166643 0.66917998316387473 0.62633824056982779 1.139327510503483 -1.0433120758629417 -0.26787393357281319 1.3186003371082256];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
