function [Y,Xf,Af] = SOXAguilas10(X,~,~)
%SOXAGUILAS10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:19.
% 
% [Y] = SOXAguilas10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.448430493273543;14.4927536231884;11.7647058823529;0.00666000666000666;0.02;35.0877192982456;0.0561797752808989;0.00588581518540318;0.125;95.2380952380952;90.9090909090909];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.8492735641262932;2.6933924168577259;0.0075953493320374283;-0.47073926044553704;0.84552325419160468;0.42905237520172979;-1.4995669225438881;0.37713104936011094;3.9606550998262411;1.1906320760158746;1.6260298885059727;1.5038509451704996];
IW1_1 = [1.4902503273901562 -0.21387894202938626 0.14789619374604246 0.14251389387795332 0.41950817149140657 0.021486747328957379 -1.2016456823402419 -0.25778150699142777 0.27412724544327216 0.085163633107703002 0.11850240672649529 1.3278126655727762 -0.77544229007056764;-3.5003356890630251 0.2078581825005093 0.30365708408586267 -1.0935703011910987 -0.66758003084904083 0.21800178334958228 -0.019730198070762893 1.2545797478127232 0.24366620566961086 0.18882943969419347 0.31882190208471312 -0.19137857311918668 -0.72506502374562587;1.1991895512120698 -1.8069404127825976 0.61748009291557315 -0.79840526148091584 0.7901284826363888 0.8991639627825474 0.40088304764246768 -2.3569562566435156 0.098055171607144248 -0.57973815009314111 0.095922738473429567 -1.135512775823081 0.51140371173082166;-3.4243316820041403 -1.8547329540285202 0.72651467667828962 -0.26144316681587154 -0.5600668483465977 -0.029047127294671467 -0.094188907582748838 -2.4753596721597404 1.1569029841704326 -0.37497243529336466 0.50489409903038951 1.5746949659328762 -1.0382185899656964;0.23942835031172807 0.94673710357095109 0.040321121522682128 -0.089996683241296546 -0.7675734940566119 0.64447884986396731 0.20648562448634206 0.073843143977956049 -0.64702810317878456 0.090908408831153503 0.04967010930932346 0.55972503801666518 -0.1687152950621052;-1.1595758729547616 1.1768680499898603 0.0061670096606393776 0.64224661884716605 -0.32916603330583211 -0.69481545591794036 0.42564479772877778 0.34568662442401532 0.4286109920016497 -0.074592059116072792 -0.026052399694554695 0.46061009409509401 0.29909866617380659;-0.0042377719688475972 -0.38855780906355197 0.36959581473323216 -0.95655541181800519 -0.13794829262716349 1.5640838824237473 -1.8395104123878787 -3.890953674414714 -0.73956495742615158 0.038795898771663548 -0.75529672284402849 -2.5910258550348799 1.780547120474792;0.23085808342161979 2.6037630503418816 -0.21802146737207154 0.89703922844163919 0.28464035146960914 -0.54530115546695423 0.094125849232300302 -0.0044239017799339152 -0.30151528973424907 0.3006652682066504 -0.0054627490996285305 0.68707871190412506 0.10523806290441523;-0.0090063448159348001 -0.028998421582659105 -0.026423824600642264 0.011389966303477498 0.022448594919268983 -0.023130672570147112 -0.0085687675647901015 4.2285328661651898 0.032509454771514644 -0.0033724333470963588 -0.0088459774288262814 -0.0031366364219698947 0.011476806836226639;0.087686929689938839 -0.14279134230756196 -0.16647189459220751 -0.5237672341748697 0.50858393270321012 0.17761679347382345 -2.1030943866305747 -1.7742098023943058 -2.3221172644882895 -1.9718221552602269 -0.38279292334671505 -4.1592932591632445 2.6337871076127479;0.51306508717435417 0.42870344026833646 2.0471575420178914 -0.75941525888751826 -0.28712334134635081 -0.99353313571721169 0.10704931786417424 0.65859983917372666 -0.34987714550744242 0.12034334963993162 0.30384360948260208 0.58002912234296833 0.10029580515816285;0.85844569379772939 0.13066051118264713 -0.14773076675272981 0.62979432561989701 -0.54442903393851871 0.018674261302182887 -0.48369015684507077 -0.9233012111280432 0.12602412915299513 0.61127769951599131 -0.35758199475822305 -0.063635399711403057 0.2464032418898166];

% Layer 2
b2 = [-1.7913636129697559;1.9330756732735748;1.0342997251656831;-2.1196093384312085;-0.51471918831327024;0.11224877428323086;-0.27442027760680748;0.76432440540555002;-1.4932778039734287;-0.37800831733458629;1.5009588722414002;1.7587514004111846];
LW2_1 = [1.1643285973791961 -0.1018940527926325 -0.60199841857984759 1.5119408813732274 -0.35426234051741134 0.57969915264843153 1.3037869614207627 0.39793369085486485 1.0767414638369219 -2.4794874559200246 -0.89931697366263275 -0.1846326010226633;-0.92460661846251813 -2.0519379832585454 -0.26296054215242876 0.51178931077062395 -0.2835364492827338 -0.93772018144760139 -0.08916133449310687 0.42687890335972922 -0.10178238057797254 -0.22746996768207906 0.85208206917209128 0.096376899380124212;-0.6017013105375264 0.72482707340251029 0.81885217546914091 0.7120911866003552 1.0263129659369499 0.12262047180111516 0.27902211472410171 -0.35783737146703198 -0.036528830241091659 0.49191099177031772 -0.39725428269006874 0.64125791090326134;1.6094551976207512 1.3746933729136095 -3.4468787453190641 -2.5290883596950713 -1.0325323069770473 0.58208769067943267 0.66475763546410127 -4.1447117860360692 -0.41126601850611449 0.88192607211988627 1.1010870871909653 -1.7622602067130855;0.36438486409339249 -0.78901138427276085 0.21456574192654065 0.39302168460550319 -0.44251046236125441 -0.24168260610994288 -0.40231816378690949 0.47758421218820696 1.0124175077116326 0.0040815305755679196 -0.34669287488224021 -0.35593381110272132;-0.14189645041023202 0.37166566168772086 -0.13915274702826663 0.62331229878258654 1.138625719831269 -0.10753837849703986 0.36757549205013501 -0.58763134114888327 -1.7085524723138372 -0.15534075146969861 -0.59337463990939165 0.57368580453982709;0.40883326116237151 -0.29594562303136684 -0.60742822295306287 -0.011171911011169551 -0.30004652364549361 -0.08612468727353946 -1.5740464437086994 -0.98141744031683165 -0.66370953557560886 -0.64434209013342381 0.079059363624571319 -0.042680602893202108;-0.66763034809206978 0.26043137941175676 0.5924490759883867 0.42400782277849708 -0.20133681069265924 0.313427799064664 -0.064057738460395142 0.22882063526105775 2.8998545495951995 -0.62857911673625899 0.34222828929934906 0.79321454791785939;-0.76073218141407783 -0.54603270386980574 -0.43255337686340739 1.1920759742129119 0.042494408364941144 -1.4737416851141205 -0.52191723495119202 1.1644396160267496 -0.59496661703304654 -2.0224480781838521 -0.6803975408714773 0.32934629516937414;-0.83805091518729358 -0.95677744512696861 -0.30430744913993912 0.74337052913425017 -0.41844907653832458 -1.1955829991606133 0.017278773160467314 0.5597278749250657 -0.51509115834386332 -0.2575794643106975 1.1743903066081784 1.180490524024302;0.030639976251010042 0.39387524987337663 0.52056064779543576 -0.22006538218548588 -0.0023978210466916589 0.52497022181822406 -0.89425728890552669 -0.67423869975004169 -0.12624688509917595 -0.1917890101793682 0.66810275350070925 0.76675536001721523;0.23701649766722241 0.40048447446266466 0.24300086251958666 -0.60142998517951396 0.13292480735564974 0.87187150117669332 0.56910539227234169 -0.80277095922820885 4.7561749555658874 0.72513435878299426 0.47184504750319023 0.15273743989261435];

% Layer 3
b3 = 0.42029454527976756;
LW3_2 = [-1.4082768848452412 0.52035135024448675 -1.3255511919380238 1.8434483297063537 0.55399110481384639 0.12184477409553024 -1.2957316006995869 0.16157085314914571 1.8322118505253597 -0.39214923964371851 -0.30669683044350377 1.4143972978184127];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
