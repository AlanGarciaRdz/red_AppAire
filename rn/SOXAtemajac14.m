function [Y,Xf,Af] = SOXAtemajac14(X,~,~)
%SOXATEMAJAC14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:24.
% 
% [Y] = SOXAtemajac14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.8698654758849664;2.7211414554912894;-0.83209097542471921;1.5216301884869889;0.89382440753281978;0.781578156712466;-0.46497643500222902;2.0062156759581731;-0.95274924522155635;-1.0606817401045068;2.2320004916161467;2.2792189973322881;-1.8916517480676682;2.2853314956116102;2.3840290509986719];
IW1_1 = [-0.12160482162957656 2.6736288015042624 -0.3309725741295671 -0.71515574825785233 1.3402727622547059 0.098719261733562769 1.1660252852015187 0.0040024848362796572 0.58200231826050286 -0.045924235633538743 1.1567647507204453 -0.33466518074222229;0.075373061478725939 0.26242084745492938 -0.28453882158880839 0.13945746366769202 0.47172252437819284 0.0064035842427816805 -0.047572125744253894 1.9750192903281165 0.029622082548055775 -0.27242815881776483 1.6191488570098538 0.19979692203027488;0.18826763279540287 0.024423656142561461 0.014295030300055798 0.17654043621302953 -0.012302779294772694 -0.017418354858039359 -0.1700582467591443 -1.2197560886950949 -0.084914589623191344 -0.080316023045839596 0.59334073288725908 -0.3561711597569141;-0.36802505153344722 -0.46914429082116627 0.49906492463146401 1.1944232195372788 -0.72001600325785831 -0.72109983108444609 -0.078737791586182673 -1.1199720452853024 -1.1969651831150203 -0.17577344808954498 0.91124669088474319 -0.41346951986278374;0.31062438050141622 0.054615506563953031 0.48910901268473217 0.83670249175466993 -0.99550317582459502 -0.057337568889701485 -1.3226231455377222 -1.5591671742493105 -0.30204613617456422 0.023816344721556217 -0.71946728864456688 1.1213704275910465;-0.95570468372363726 -0.056889290518880926 1.8792221277896772 -0.21739967136282518 -0.79681626916332859 -0.74298637880152407 0.20283930686478119 -1.2353483215914258 -2.1349756138941784 -0.47107848630006804 1.0217808494385368 -1.2108402090192132;-0.63186008285828077 -3.9740379779146009 -0.19430597317193876 -0.36057023757402429 0.51319154530142408 0.007490932537635997 -0.94837464051002485 -0.926011158564509 0.14057836564186815 0.046752708382526445 0.31771141024347577 -0.81224963534786621;-1.6083968767344907 -2.0783363023222958 1.0945344470877385 -0.21971559121584697 0.79536479269592708 0.57543107969432261 0.46121130787786813 -1.9801318666921193 0.90515295990014866 0.24724321755033873 -0.022981048557389822 1.3284409899759151;-0.075774205730837874 -1.2839781197179796 -0.14082217463347316 -0.0087367783166602715 -0.083996363341322711 -0.15704879078683326 -0.14455853264928226 0.260619394628754 -0.027028613478580071 0.14625425152407645 -0.28546331086770838 -0.84901596316522843;0.84501848022241222 -0.32417820192375818 1.097758556256007 0.92884855949144174 0.29190729319071285 -0.31124390914640226 0.52832484916856015 0.19317108908455066 0.62226627297547299 0.75587127054534831 1.545528695743656 1.1151540411499683;-0.1468864133971936 -0.35109163926214415 0.8828975137463323 0.0015178007725107773 -0.33230264173278845 -0.31972794978440611 -0.29613609643539368 -1.1088831270703476 2.2857855754753245 0.059358170684840526 0.34739835641383171 1.5873106080461876;1.4559404252504717 0.32281018315331361 -0.070015341088200428 -0.015365970673690416 0.77746984077508297 1.2124983405384571 -0.46946061839115866 0.40793438751279359 0.38433277103589591 0.11299609354781613 1.4288501920747911 0.29449589800009979;-0.10364266467562701 -0.24131052682488252 0.061186663543652681 -0.84072320146426649 1.5087807505068016 1.2965179593759038 0.09281705792316812 -1.8549214362919946 -0.81437398853944354 -0.8132491168701812 0.41563080890949516 -0.45892871196865753;0.78294421225763433 2.3963136643368124 1.1442057918149104 0.39013579480135979 0.33794142034579067 -0.15726350054318916 -2.1683348150389206 -0.75819756622842971 -1.4335197919604135 -0.51850419252183166 3.4134892207900633 -0.41605647179972111;1.3954831785782904 -0.91848334222168559 0.34441441469506634 0.18924457419847196 -0.7684948641075583 -0.036868951462648542 1.7971532752487607 -0.86570656980803673 -0.11491834408252095 0.18128234982360444 -0.72005123067524346 0.28855191235004185];

% Layer 2
b2 = [1.7299430987920104;-0.70419778065194916;0.79116766822910134;-1.1464040704838072;-1.7497659183004022;-0.54329614717335117;-0.092354886246000301;-0.233294200110049;-0.082870911641751532;-1.1451054842966875;-0.58176441593780204;-1.1037989842191052;-1.3012979894737238;-1.0931267242804623;-1.4863406486062667];
LW2_1 = [-0.20621335914865793 0.15660273069312963 -0.30364337809920833 0.23321625698727372 0.18127737365727498 0.69907838984516335 -0.60651057375035178 0.27855756295215606 -0.16285954607028003 -0.22412164755318784 0.27044148938014523 -0.54180827479494209 -0.82599995815144367 0.0096875638623644695 0.36905504834838498;0.31432393783059792 0.34644226762787811 -0.60011206269572337 -1.0585426815368846 -0.11730504182075986 0.8607760337962288 -0.037411143239968719 1.1973094923132193 -0.53784010239467162 -1.0547846209571528 0.85866256901404114 -0.092852086901094477 -1.7444563436923908 -0.4332200247791072 -0.089645548564700125;-0.13203839709510992 -0.3330074534716278 -0.3637038899881434 -0.039555752227889929 -0.13613776438345293 -0.402667351189895 -0.27918233690785671 0.23525178815570155 -0.31130561296717463 0.58608909810880661 0.14506261395201053 -0.029381710669502958 -0.24473359132140038 0.12627033307569757 0.7889680648924895;-0.37818845503439658 -1.3691401780123 0.1176145662927905 -0.62260651002384448 -0.20275914948181339 -0.20828536717704227 0.30399588028269464 -0.27967717316818536 0.16807579793322167 -0.44683572185679993 -0.38830618955839652 -0.42497347386614376 0.20567999995808153 0.15621365219276137 -0.75664860581642313;0.47130548679358458 -0.23179271716706676 -0.6726575879000517 -0.43875721054357358 1.1019473821655525 0.08580017720712145 -1.149301743595444 1.0073171138308015 1.5079119292198409 0.13078306316586849 -0.38043925481160507 0.036814421054614743 -0.051959050019932979 0.55624017837164752 -0.81706800072774699;0.15454144420083218 0.96899433022944581 0.3613162231352357 0.8610523234566001 -1.1108636895805115 -0.83460815873763372 0.26669525929134813 -0.42307513950175429 -0.027140508181415151 -0.18167342512612494 0.83470812930881055 -1.7760600817851584 -1.2884026456720692 0.55498064372588152 -0.46096520103857314;-0.3417479475615417 -1.1435877256857758 0.19598883821639457 0.50367589242723487 -1.6432746162306848 -1.3643914000366628 -0.081100590636940195 -0.74174449006381071 -0.72995037542283048 0.078430504425698086 0.95664913102350202 -0.2845887050486573 -0.87173136172501553 0.81952567701261791 1.2621042385666332;-0.68471488585227924 0.049404556538845415 -0.80335940997976485 -0.22556311027193846 0.52750637602881023 0.037069691507198216 -0.033099920892694902 0.24450333782318526 -0.99306772118592601 0.27139884917162183 0.62151651644051265 -0.30124579854367817 0.71030102312967092 -0.25704376508377691 1.4642923739634184;-0.46002225567554406 -0.4980084182959304 0.68097550290151687 0.45281095559965623 -1.4511704017669771 -0.45330050144978268 0.81323861120955332 -1.1657059659745186 -0.45856749172892586 0.27833836109275117 -0.64242562512627188 0.73237210313855305 0.42765166506330932 0.26073356566151529 0.91052743989283658;-1.1972262073812618 0.82048383900134425 0.81900444399360528 -2.5569239605079184 -2.4731570639622231 1.2107118775905661 0.85695582079656885 -1.1229106900205534 -1.0305121529269359 1.0520186055069722 1.6692113802408122 -0.33698724126400648 -0.14855480714339631 0.37211080006967179 0.72838550658601053;-0.26940296597131125 1.806177857265252 -2.7611316903142344 0.57733378087602072 0.6593248327148733 -0.38750591663627842 0.37194872240677923 -0.52957247548429587 -0.19946766369902702 -0.50545285194872247 0.8593884611473428 -0.5991959676661196 -0.44862592172973409 -0.079481241357579641 0.57237547096967056;0.0027786734808903342 -0.52461850318821268 0.36543229369780794 0.6308661749596971 -2.2101115111708598 -0.26430061740737593 0.06371449806805754 -0.72739069915512256 0.57256455385037908 0.45037252897026175 0.092756465851956987 0.95150288164439056 -0.37188229187614397 0.4767089165484939 1.3245512748153654;-0.43404377788217263 -0.43818825086910557 -0.96742608671706631 0.39961225463430744 -0.72997335667395802 -0.33148799586082578 0.02652225357772884 -0.1707748001671813 1.495856113687682 -0.21992318509358652 2.6147867022573141 0.18144415514374426 0.62185607541091781 -0.06293295064674391 -0.54882957461708515;-0.30828158851833615 -0.090836745049112572 -0.91455964075544205 -0.16439868164980675 -0.65236175680544795 -0.13183086970982691 0.67451732061358449 -0.074856466281334105 0.50692673960739854 -0.17128419331347675 0.47681114082345932 -0.30005902543880858 -0.061987139735171268 -0.15439376228643883 0.10654568976061354;-1.2250562527511601 -0.71918979527951843 -1.2063194219026576 -0.58119223223605287 1.8490544558826618 -0.29128874984563996 -2.1679789752104721 1.4207790126195965 0.42644810171431596 0.15220623505008476 -0.56628947397114016 -0.047382086513046678 0.29773808833197191 0.73129448006344511 -1.4449526781056021];

% Layer 3
b3 = 1.3337138176786691;
LW3_2 = [-0.18737355839360972 -1.736429027735396 -1.133804277235422 -1.0716013897921235 2.4270774450405725 -0.27786787257094225 0.23591487744120371 0.42938537475176797 -0.96844015529108163 0.95963727620995043 1.0692360890408248 0.55883162343232373 -0.33379709947359637 0.40716673398538539 -1.2892186846821951];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
