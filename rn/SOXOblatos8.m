function [Y,Xf,Af] = SOXOblatos8(X,~,~)
%SOXOBLATOS8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:40.
% 
% [Y] = SOXOblatos8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.0335458924526657;2.3572817889713678;-1.7553099809452521;0.16418566810074242;-1.1636143922442665;0.0081822142936981146;-0.032147526220739339;0.16730047469004802;1.0331661961583489;2.3458500995390046;2.7651647774135801;0.80037327393444835;1.8673319284970415];
IW1_1 = [-0.25638529036169289 -0.65105256195188221 -0.48185339782889969 0.50127877543246369 -0.51866179424485481 -0.61768401128901285 -0.18605472241506338 0.28074170305753554 -0.83090171012488034 -0.72886062985385414 -0.91465629755450473;-1.8811531854439469 0.039690823617901383 0.53979521287670262 0.69935627745030504 -0.28918257542047454 0.49679206774450246 -0.059751242970667216 -0.2568287630414251 -0.094031324193084603 -0.039394814590570711 1.2843049277422165;4.1349950028005216 -0.0057647950431875816 1.9667696151545651 1.3198351148382081 -1.3801351697701822 0.57123389141954828 -0.35411994545861913 0.22121965033657587 0.49640263127949824 -0.29280606379528962 -3.8904232132675332;-2.5316417955579378 0.62181881847659148 0.096049407760483818 -1.0046467586084593 0.10993189940836873 1.7146288587006899 1.103511965674288 -0.23316854961607442 0.81137874116755915 -0.031568584487711715 -2.0036378247988189;1.8959980689221716 -2.1220518926263674 1.1162917265957928 1.6219175914859807 -1.4887636893018916 0.92170855876764579 -0.64515790469041545 -2.2343477874050164 0.7194016853708548 0.57311226249066072 -0.65913018490288033;-0.42035877730368715 -0.65308081529952322 -0.02313458570763223 -0.52434503730338144 1.1479309918322582 0.94671119903771928 -0.97004499621770679 0.16521966789764683 0.21676194954741024 1.0196630164707061 0.46127404696295121;1.6613309140529231 0.85964246767920893 -0.18184403506390961 2.616491100315788 0.56645282218475346 1.5723329149474905 -0.27715578265525243 -2.3461493236718201 1.2301605174670911 -0.71077697728796552 -0.88195270284752314;0.61514219000630521 0.7204162190433987 0.65905840834992702 -0.33450804982008758 0.050176256338007361 -1.1767916213333662 0.072984245326617667 -0.48556666813562588 -1.9743880548447499 -2.1443687502220099 -2.6769117985266946;0.58026844084426887 -2.1219995920768691 -2.3055374548389542 2.6922941404339777 -0.69571847685238075 -1.6506660149970125 -0.20147327994740211 -1.4510702040168471 -0.23042251955922582 -1.8652135416677775 1.7153593496774677;1.7505687496651399 0.046603677748745874 1.1701510855846406 1.2838238140397222 -0.33427298205233713 -0.49810835819770194 0.14680814098467534 -0.51035868196490841 -0.35815549251984796 -0.92557436425501916 -0.7386540689175648;-1.4513058732210862 -1.3618469680494703 -0.67315481978877933 -1.1730573540207254 3.039531768239617 -1.5080030211707443 0.8475023196669158 0.67035784861729253 -0.36849188798820709 -0.20627337199310503 0.13532816791860985;1.2198064118525491 0.30696264792821704 -0.38047575684477003 0.29523360123047615 -0.18743903872446407 1.0864767896688621 -0.32735322269732897 0.71290617156339342 -1.1206816930328816 -0.96794631384036289 0.18818047926816744;0.27222925296612599 -0.3632596796979416 0.65857578587167587 -1.1286015927501307 0.23175129478261566 -1.0472794197554058 -0.20449240083828085 0.41915514540702759 0.36780534942529586 0.18397721525586772 -0.15254183810367558];

% Layer 2
b2 = [2.1818162644670047;1.4371801427248923;-0.080019302269614789;1.0753550796445539;-0.5044680985214467;-0.46350163642915021;-0.46147782071778443;-2.3797082709321522;-0.78517590226119793;-0.63781241582879811;-1.0778771195327692;-1.4425809665313301;1.7651198611427776];
LW2_1 = [-0.098505932314146338 -0.45046901522835475 -0.14167205197572885 -0.35447392932586552 0.19054126371660898 -0.15416103995294833 -0.0045796649472735901 -0.027948872687784298 0.019485619973705223 0.018463142938844108 -0.17049628101296138 -0.07637518797905006 -0.50921077333198139;-0.49035478430452861 -0.59053092433873622 -0.86628965783804468 0.61452451821473764 -0.76034759362786486 -0.57975655572680695 -0.11124284913933603 -0.26346640191297488 0.48567691593025536 -0.57110148575082842 0.42929784619298222 -0.19239045701667723 0.021979192875924057;-1.1495820337701292 -0.91942459498603835 -0.79432391053985174 1.1849123868770357 0.085654199178562374 0.088832723844800232 -0.78821409500340234 0.26690505238635409 0.82759309720416152 -1.0938141613597632 -1.4365779209937179 0.51296047091304442 -1.2274965530748929;-0.13646065311068395 0.54303784544725353 -0.43570252986589064 0.12049217442039578 0.30890547417357661 -0.36127483253624471 -0.23150873548047168 0.013652107023530397 0.54115872636683626 0.77913526710430359 -0.34431554722582314 -0.014954750224625196 1.0118979267723867;-1.5460908172825887 -0.27956056721106204 -1.2719484267419121 0.98400166597718641 0.074819385922346895 0.169466526384045 -0.91144840146351691 0.10628461987165111 0.96105550465145773 -0.8951073933442254 -1.6723549493738392 0.67298689621472807 -1.0468160043328432;0.35321364250609122 -0.24684124105199606 -0.035820731122013116 -0.45317130308267001 0.22401457612399842 -0.095053674471126171 0.62799375165421401 -0.39561643070462371 -0.69199534003738283 -0.51441455061242003 -0.46813041625818835 -0.5883813737107525 0.35393246545179413;-0.88872215755255457 -0.0615267712586786 0.19810747990600128 1.0066265934078591 -0.78733084868123249 0.40736003231458179 -0.0044459755913625332 -0.065765359419601488 0.11437120352365397 -0.94591371623536025 0.3962584823962757 0.89949634447871041 -0.73306641195080879;-2.6612805827739998 -2.3465862319594479 -3.5843719185384608 3.2599411419982713 1.9554060209788604 -3.2697209614748672 -3.2601246854671633 -1.9081819567459499 2.8953873019627916 -0.95369884751065914 -4.9007697398258649 1.1781931392836296 -2.6309516396904908;-0.70077585791839059 -0.67167565449423594 0.43521744734804702 0.74383213343206678 -0.1314618244899336 0.28295283076068672 -0.14647696290532727 0.16111635267042732 0.44501913620047845 -0.055952531970027697 -0.27934502961580854 -0.46958007304149652 -0.78621665543221364;-0.73543078896567016 -0.040564043231782948 1.3091974615637525 -0.3223507622500239 -0.57956089917738152 0.40632143822722688 -0.20459877418421585 0.076612996525532037 0.28307872305905302 -0.22164764963573355 -0.6690920315503408 0.42406279196000035 -0.63666096321813592;0.25359083146935191 -0.046247088901183286 -0.0094169582542098576 0.60443891439013553 -0.12425305956194563 0.3126506591632659 -0.085774310993818978 0.28357564656442891 0.023098512267225216 0.50469765756143925 0.24088737284636752 -0.28473893748998097 0.77070545530752499;-0.38801338968242249 0.45541532591837708 0.064580508569965167 -0.39776193385403558 0.20791730229012911 -0.455764922060926 0.086061796594637113 -0.62321659707687604 -0.10702188780023494 0.72490459086261461 0.048069480503582951 0.94671382392438252 -0.090503952256103901;0.53725504261631352 0.19479238473115512 -0.17214232583475589 -0.38463980277072884 0.5391302337988324 -0.16173347468483459 0.23850261378046145 -0.09914364529518388 -0.11831406959224666 0.16653430755904247 0.043409686177826201 -0.5578420174690415 0.57887839224448867];

% Layer 3
b3 = 0.52768134452963988;
LW3_2 = [0.88883877596913985 -0.018357902499704655 0.94371036377577655 0.95865349009003198 -0.72386178154481073 0.074022750414417332 0.28621054217609215 4.4227913629077422 -0.78174428644228655 0.10896082907853004 0.37966974000891163 0.20432216032439621 1.157754675010445];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
