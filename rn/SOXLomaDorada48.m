function [Y,Xf,Af] = SOXLomaDorada48(X,~,~)
%SOXLOMADORADA48 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:34.
% 
% [Y] = SOXLomaDorada48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.9383939399795573;-0.79944235629423976;-2.9694354113663568;-1.3973654012075498;0.29865436307394333;0.63139069344347432;0.41289614842932931;0.43121826642802935;-0.1478524838603501;-0.2853439290018831;-1.2080004525648083;-1.6334562765199299;2.327114260766344;-1.6095470569724835;2.9956359526862077];
IW1_1 = [-3.4465558197592365 0.065120801846944035 -0.54365136634130584 0.67124717870464012 1.0747941301405812 -0.64079823957379911 0.83035855243924228 -1.4644846430025182 0.33319034451279639 -5.4669923217883127 0.27825745771073707;-0.32846287231553351 2.3279538173990928 -1.5579599686572725 0.35026433856731937 -0.66632805116473692 0.68347056034613607 2.7667200333244981 3.0182292716029937 0.023075861737909473 -0.43300399522802563 1.4259202728102394;4.9779265434122877 0.047786902797502376 0.073265417200594124 -0.6093768582764012 -1.215333546780039 0.68008281044304786 2.4684481868274588 1.1473022231311822 -0.36974917457266981 -0.23948449217138712 -1.1836760553258243;2.633346138140805 -0.28959060187538593 -0.88474963815200536 -0.082584157066180996 1.1805087285022169 -1.0557127002842606 0.18620671214756068 -3.192053422874972 -0.19139522354964544 -2.3442743874934759 -0.2051784273815172;0.046501065437795565 0.63259615744007014 -0.88076165002641216 -1.2754747503883077 -0.33361428796912063 1.2753173690631974 0.1730252858107979 2.167704429593885 -1.2589386045979722 -1.1162546414665337 -1.1616810675832459;0.38153425359186133 0.55905098188139635 -0.14830624695217348 0.4008815876235281 0.048589022818171519 0.61084876986983372 -1.4540311906179686 -0.6745938611861404 -0.41612297041621066 -0.5966123750780854 -1.0227372624082958;-0.31775201889113824 -0.038757180335515513 -0.21344892176581143 0.31165707869242032 0.31546665859878364 0.67326670521081278 -0.86225392723032257 0.59899826997791927 -0.56287933469913332 -0.43394415654764718 0.14985600740737895;3.2909555739075795 0.016350204270852924 -0.7872327464805795 -1.3443166495468872 -0.72929778292232739 -0.71093478535979926 4.4421882247494962 1.2002765649882456 0.20036258602938806 0.65356743989499599 -2.2134768881252649;0.54887823762921595 -0.39989493063047088 -4.547028683161713 -0.19649220461609068 2.3124494672915641 1.2993300659261999 0.72817977785169563 -0.32473748359427984 -0.12702706147094284 -2.1154448889099124 1.7069147053111846;1.1470269847961443 0.3877109010265723 -1.0770894592999471 -0.14077953573823224 0.23348607227701018 -1.3942790141713768 -1.7907664958366958 -2.1360843284810396 0.71859512059242026 0.81169069881995748 -0.6284436021185632;-1.5168066416427137 -0.034424759156211841 1.0446766098799851 0.64572790222295029 -0.03113033033846873 0.88023693084117793 -0.89922700054301341 0.42065830859532216 -0.42489408746931295 -0.52632858243525504 0.18372519010405383;-0.57977854152343178 0.27125390109336134 1.4709571868004234 -1.2427741274087569 -0.16289579466273968 1.2873274780512027 0.9783179479659796 -0.12888735160495801 0.37510724808455909 0.2003201497298073 0.79096458805223679;1.8024368942143427 0.37060554854434186 0.2623207026906873 -0.14144631786340958 -0.55154283360870526 0.31107815409974687 -0.92396582357127188 0.68617186728581436 0.16771170979155853 1.6901207444155193 1.054361332930787;-1.6474153918450569 0.57756844531237461 -0.22400463058478956 -0.25545444842307552 -0.50854655357184209 -0.1808618392555793 1.155334308576869 0.49088486898204547 0.61299448790767752 -0.85546325626825537 -0.12153489319447419;-2.0855720015074786 -0.097259093330677338 -0.0083337564160707103 0.31280308444835137 1.7010982935580807 -3.1011794834116637 -2.2715104380321329 -3.3591208414892035 0.76970196143065739 -1.8382382963704404 2.1160033525570352];

% Layer 2
b2 = [1.8963838622627347;-4.9273033721168344;-0.97098575158811362;-1.77318378965532;1.0049856421692613;0.34576082474842512;0.54528975353869169;-0.72603730400575783;0.37988463525263771;0.66507179526567051;-1.6248273362730725;1.8764514071509482;1.8629010508337662;-1.5955965062018926;2.1345810142971215];
LW2_1 = [0.073105468099932569 -0.055941433332211937 -0.29781650543657545 0.033592555134010098 0.70847354719370093 0.20753996146924419 0.75754552977126688 0.60929874608835422 -0.54408104669956403 0.79858488567690189 -0.32226876221148842 0.093629562186165582 -0.35594477174787487 -0.13480612942963335 0.48944764659046874;5.2819741470547008 -1.4568188430356841 -5.7633332357763871 -2.6573533481192708 -3.7807276923061641 -1.516670966577059 -0.57715030540258327 1.4979833946620429 -0.70601160690976927 0.58119878892281596 0.099224797977090745 1.0362063850401591 -2.4617249948062274 1.2825106065285479 -3.3814443314576659;-0.10092196769528237 0.50723423539470869 -0.55740130928973797 0.21068255686846546 -0.087336322853564463 0.7598817917905778 0.37213741802589834 0.023172673721241745 -0.62256292634738719 0.13869356395316476 -0.068517842818663785 -0.46652740376872992 0.23723062984466448 0.094634151567943636 0.0074145337019264719;0.87133756310939992 -1.4121328452025288 0.02016392840829774 -2.6240724214351352 -0.46975659135077763 -0.09101139123563394 -0.60019102452584583 1.4032250962062882 -0.73841155552361848 0.23162178829430941 -0.7697432679848587 1.992426534395406 -0.076395633687568895 0.79349585848635118 -3.2010713546059524;-0.012753730924505415 0.51789433961555265 -0.97066015104140091 0.54050824454768687 -0.25682031026815916 -0.98228086972643669 0.52635901903949089 0.0069846416004244426 -0.51957253498678668 0.46737980283785613 0.29242377814556519 -0.15168302302071726 0.29901211023213914 0.22033985807257869 -0.15591288559262698;0.70327856747892581 -1.1492354730190673 -0.27694581144208696 -0.95489247823452106 -0.51000349740416306 0.88203920116188228 -0.36985526697645527 0.31766915277030822 0.756398866105778 0.083557501962118808 0.32965187973053561 -0.79320420328874908 -0.11543559943105308 0.77878573280145313 -0.22226183447311215;-0.1097158859460057 0.14037875764870428 1.326270739953769 -0.73791248381068675 0.13110016752936482 0.67086477330543648 -0.17559310149059915 -0.25665515993524135 -0.42358524877482773 -1.0464186952562464 -1.197241431821273 -0.27895107814137721 0.011562078880152853 -0.065975787589676302 0.65298565024431077;-0.52791656080239768 -0.91550167749059108 0.81600391301435682 -1.7606461530987727 -0.15231759144639168 -1.2110724748627166 -0.30393717861392111 1.4600120055416528 -0.59341345558196201 -0.95397421787951864 0.41363495938612288 1.3336498718794301 -0.52979559465167814 0.66557708077688205 -1.1516067271887873;0.81992934658257077 -1.4386171557942251 0.059231908495850825 -2.615735012983361 0.59312818048244875 -1.4826163818092633 -0.63548409654084026 1.4924217531839095 -0.70299961181222492 0.5769628753662166 0.10347364306708107 0.61429904083366094 -2.4115920510788471 1.2534366193358086 -3.132502604565941;0.5326108861769745 -1.0108682020117077 0.014216699892684374 -1.0417389320516679 0.77564817993745383 0.18099098459161375 -0.51216828004744663 0.29974513630306904 0.68026803252662427 0.37222523018330622 0.11977862302619026 -0.24892507158831806 -1.1446453117043538 0.37534712583551882 -0.14505530455135018;0.1077676277030224 0.13666034505633182 3.1622450759931353 -1.0118494623954346 -0.85343325367357037 -0.86213714480782699 0.96946811606960304 -1.77491554808735 -0.10250220678810439 -0.58279106643232059 -0.8855681786000501 0.28262736832972685 -0.50583042174355919 -0.4606310489612172 0.74430054484219033;-0.70693121422512151 0.59967488628534815 -4.7128014228661828 4.4917205981728037 1.3600657679004908 1.5724581107429545 -1.415577601010231 -0.0082745581622811412 -1.3200299784589127 1.4911853397580446 -0.20384080744641403 -1.1330848760308336 -1.6335703152172925 -1.1641515350019622 -1.5323897257561745;-1.1374929376999179 -0.22087168224728879 -0.59387936605657587 2.7783400337093411 0.11601026036052176 0.97651981345074945 1.2765133215593651 -0.45022581790965888 -0.95264122068500712 0.37034219795297391 -0.74092156658734132 -1.2074659239527195 -0.53731843314751704 0.99502128050816718 0.63031500369391935;-0.59048506532897271 0.69318749870042395 0.22832324074777008 0.14667083602490358 0.38644766801072755 -0.74727273096332103 -0.68080476352124808 -0.84432187782862134 0.22577636065202039 -0.54643789468331527 0.18036296824121492 -0.19537825263117636 -0.26039122943039439 -0.074125953418157101 -0.097656904318855334;0.48596172503695539 0.85494855554550031 -0.82520616107273315 1.8031089737594641 0.50456788371395189 0.59268242624620304 -0.24963988618317623 -0.92030672914392686 0.89272180476224405 -1.5771395771761949 -0.81172043871414568 -0.16391227937747294 2.5351501779517736 -0.90543177093780924 1.3184409962001868];

% Layer 3
b3 = 1.1721651467881871;
LW3_2 = [-0.017802732193309745 3.3858416730611403 0.58889241754123256 3.51349742025524 -0.60674603678379158 0.62372380064942978 -0.22344338449778192 -1.8269213788145748 -3.5457360925187413 -0.56838255409194749 -2.7398291922159546 -2.3882317805289111 1.4041998662329751 0.62334585997814906 -1.5792456678868005];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
