function [Y,Xf,Af] = SOXCentro14(X,~,~)
%SOXCENTRO14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:28.
% 
% [Y] = SOXCentro14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1135967719793394;0.59887579389181822;2.1093240890517713;-1.4804012447098289;2.9190144434581451;1.3789644531618164;-0.12243151649838172;0.29261477136017805;1.4207471129284774;-0.18783707798766447;3.666357297726706;1.8745583240375205;1.431119318729634];
IW1_1 = [-0.00036654888831363312 0.13037632990005041 0.0041396180138218545 -0.73508011828283315 -0.58299177103790767 -0.34718801352655548 -0.54831538609976271 0.53549273587422375 -0.92372739826126127 -1.0494073675869715 -0.33129102231251328;-1.8438989092659963 0.70023616330618843 -0.021667673715893544 -0.61385549661372296 0.343521297552627 -0.53388534152263378 -1.1535586111707739 -0.13463208966432855 0.041766270936853742 -0.56897378802052911 0.3555898413936901;-5.5119609865738743 0.11456187946011817 -0.065005654141465127 -0.97298455378109128 -0.3860208025304232 0.27862390746687776 0.5551183280541705 -1.0357003249185504 -0.27586978326913375 -0.41088565164956464 1.0563208477353916;6.0265408923002868 1.935064991548149 0.27547127522435894 1.036047034018416 1.3256411493682465 -1.152129100495529 -4.8131809976809645 0.034002741888811597 0.0040338405456001522 1.064087217196565 1.0322669557157846;-1.2798643449077114 0.063236021713276261 1.1193770503083851 -0.62913104447487178 -0.85629531242238488 0.047692272710232964 1.6536975477132836 -0.47062586727143202 -0.29943633712503992 -0.030751486935826078 -0.45497501757537695;-2.3690162878689689 -0.061072121056556433 1.518868092386592 -0.2880684358320687 -0.10607301154585699 0.33086880928302076 -0.57493217894051185 -0.96606396220185264 0.78849846996283746 -0.20243874379786767 -2.098304273135438;-5.2951171219208106 -0.36679829994675878 0.62032487637879352 0.58098760134944161 0.48469848388031228 -1.8323316207911433 -0.415284828338636 0.92592305484082071 -0.033254922905628523 -0.61316619132023975 -0.27131762447900448;-0.45982585920844959 0.68788252723287768 -0.51684153910583341 -0.42227193846559485 -0.21574948761136281 -0.27369198564639374 0.60274848586864882 -0.4388664623223828 -0.12102525234998326 -1.1294201499065919 0.44054618009077795;-0.78533050201283028 0.40678888049931977 -0.70619506395284903 -0.43230809922429708 -0.62121855137338367 -0.38758113728920957 0.74740713570810258 -0.42747748098789989 -0.83109605715843937 0.42191468817008543 -0.19536595058900824;2.7719659637922511 0.5017766900177677 -0.12602206729647178 0.08697054656889068 -0.85598213678223489 1.3406860062496784 -0.7042486187352105 0.073906707617163309 0.20881824786237912 -0.3111052736469247 0.39994777472444987;0.84323102592180765 0.033690014310616877 -2.5392521188699693 0.15667425407767596 -0.0010826322985921684 -0.46518209467746408 6.3008884644874845 1.5642643203483415 0.95525969948951717 0.56428998895182703 -0.41525766703015765;1.7276360043822669 0.31105913507600197 1.0703234279569598 0.40226734805331837 -0.62372393829304462 1.0075374324897735 1.8517862110183319 -0.1596023262635558 0.26568888819676278 -1.618308510171973 1.0328463064533309;2.0632830881614503 -0.15477723430118956 -0.13147022563434344 -0.02191418714483824 0.52527139245052945 -0.44474668578089538 -0.97821547223603877 -0.056477775407891721 -0.32478146202868408 1.0098341883103881 0.17114622347645031];

% Layer 2
b2 = [2.1892345361095757;-1.1129431125208598;0.95587193656988179;-1.3369445667747024;-0.17022533652618105;0.1109259609574909;-0.37623270819152882;0.64004561705085528;-1.0314626774615814;0.1319297695911209;-1.2888821963916175;-0.52759687943378586;-4.2909614665874702];
LW2_1 = [0.27069751931832747 -1.0540861347922466 1.1812960006329638 0.4352809145772002 -0.47007151610801146 -0.080752684783276199 -1.1400863360059748 -1.2317329243102315 1.2770895700377756 -0.58247963316265661 0.55805950025192541 0.13206927813985792 -0.58121114747471392;0.84952216809853454 0.18140203601764884 -0.05366618760318892 0.61184193218986782 0.055826997562168884 -0.58338702904684203 0.3936307751284609 0.056589339735101385 -0.099854554040376825 -0.016517816577450533 -0.29444595156592818 -1.0075871540139947 -1.0883179591789429;-0.86060951989097623 0.91668563012510518 -0.15947480081652179 -1.8629538399487162 0.39591777503404302 0.011636753785231657 0.43138154790056416 1.899702029534873 -0.75365779863421223 0.74473583768094753 -0.50063249266088927 -0.62343994069411457 -0.58573818080527928;0.29150808758848168 0.66908218107851669 0.23269737694710785 0.14889957148622743 -2.011835506418902 -0.35044118259769386 1.4937742315488487 0.76828840094269979 -1.2862270517046235 1.8488029053990644 -0.84164251413495905 -1.6391545638793559 0.060918829823663839;-1.064176997601308 -1.0260280555793932 -0.49362534849189393 -0.54567612018803024 0.2215636224544503 -0.31152646886789542 0.17965294501231405 0.083454164111545409 0.37997419768973856 -0.77247195373450184 -0.10927824991020509 0.34736330533381427 0.14487112488600384;0.72492329250835652 -1.350747865689826 -0.52149666415782003 0.14039629656650154 -0.12389266701231841 -0.025393083823855522 0.35818021994277671 0.36679921491248058 -0.0095741893193943446 0.026867395061978529 -0.18297368892460697 -0.77162219069929783 -0.60119295841054288;0.33546825638635369 0.5973849600781026 0.11740571088180149 -0.26944096278922375 0.035897355144169779 -0.60210902359185037 -0.29887801679009951 1.261430690192348 -0.5807663366550333 -0.049083349553892812 -0.1923419770364504 0.91897593593189242 0.18301593019937604;0.50995501902943308 -1.1296708711224246 0.0050402743362023758 -1.2606191779580145 -0.2770966646612571 -0.031001138833163931 0.10329766774268773 -1.5066226719372173 0.32924076415315673 -0.58922731599669687 0.12119593733434442 -0.15028767398234716 -0.6281368458415908;-0.55385042891980873 1.1648849927109788 -0.31379865949495184 -0.26279990953050703 -0.62937839638492055 -0.008465372081042085 -0.23663340351717616 0.43676006109086912 -0.39526340493198625 -1.1299280707547914 -0.59120357652290656 0.69463467058218031 0.4189331400079101;-0.2322025643689892 0.46901858621608761 -0.13097012527189697 1.2557304777587859 0.83456268006380174 -0.29663831100249027 -0.23562723804202912 -0.91388107647336214 -1.1053489751297918 -0.61977470763954867 0.35840507296675672 0.23162442950562856 0.3414102810318192;-0.86100271581369614 -1.8752815271243459 -0.63589236998011678 1.1002460862300036 -0.014375796037032401 -0.15257265233494322 0.084796244825616138 0.56278575761891703 -0.43647880357359337 2.0447480652258467 -0.17456753384795431 -1.0521532230301325 -0.17490115839716069;0.22005538649369022 -0.48098240055559016 0.092058239888556617 -0.99071901084197855 1.2881632591279728 -0.50712419115290963 0.29715040473285298 -1.6405250386086589 -0.10716240937594562 -0.44074252228823035 0.20279798695438631 0.24423942905859364 0.026026662682372716;-3.2513826848981924 0.093444391746376698 3.5870986126486937 -0.059880822031071146 -1.5199211993178106 -0.91001140225252553 -3.8555631784242981 0.66566218951562217 -2.9327205208438385 2.3670345140334539 2.7030332962488486 -4.6303343423616345 2.7992738313566106];

% Layer 3
b3 = -0.17960202263446157;
LW3_2 = [0.66849376697182794 -1.2340190975786745 0.49193058122159211 0.29399235080085551 -1.8872603541117834 2.2593400943656659 0.48339830381472199 -0.52988643571816785 0.40567537406716025 0.60185753170649414 -1.2097311686622021 0.7661313403464598 3.1007755242775623];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
