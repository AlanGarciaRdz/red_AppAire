function [Y,Xf,Af] = COAtemajac16(X,~,~)
%COATEMAJAC16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:26.
% 
% [Y] = COAtemajac16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.8755504984355067;0.59066539251164674;4.2116896937238817;-1.2266036023031226;1.03711877522963;2.7875282237831795;2.500218297107986;2.407743273545901;0.72402201048704407;-0.08412084882507033;2.4111224064935834;-1.0920766946573925;-0.34285359285246481;-1.8188655744278213;3.0639353576986061];
IW1_1 = [-1.0153674875100125 0.96114387190838801 0.49925640819190981 1.2093861118671505 -0.17599837674269475 0.63622116711425558 -0.14896323537306289 6.4745467463639024 0.24545564404155132 -0.058139821835811983;-0.47458104597112394 -0.26603383788196322 -2.8542712330758886 -3.1427541810515915 0.5202512181018738 2.8182736457239512 -0.19368680464826038 1.9890553381232963 -0.041233125624931304 -1.1347100119319646;-3.2786024078110687 -0.14704086744185291 2.2620596564366791 -0.075914477853932266 -2.3854466340439915 2.3939482611357041 -0.42153140793461141 0.27475227467999791 -0.33550446844354115 -0.83828430156856815;0.18324952958953697 4.3984918745569415 1.7424304781020448 -0.41886461204639541 -0.21974629871082269 -1.0000355092534072 -0.58866248943395927 -0.17821138368087647 -0.0018818568291067289 0.59495632146932065;-1.0203353608332044 0.73683035289806975 -0.26064048750248575 -0.094693601112472353 0.17514138576967947 0.074557238323556221 0.72522273055880981 1.6615473800595912 0.41015941660434591 0.041568311473993938;-2.1346861856673147 -0.21514782002716137 -0.12251744414230227 -0.18960651661049352 -0.98277218036190861 1.9185478957889712 0.31822227318417928 -1.5815308980839937 -0.065397489259402738 -0.32760762256097342;-0.012134966708352559 -0.81854462210224666 1.0767281302508824 -0.20775598980117138 -0.029542451244685422 0.24717675883485885 -1.1180556095864391 0.76570177096442971 0.7164185819159542 1.7339867717344473;0.2596777616763738 3.7950924035333222 0.31144886101566505 -0.20866979784855719 -0.032001154076510469 -0.062564298761777049 -0.23015532443907613 -0.38931490414833331 -0.064489142379748038 -0.13233592527457422;1.0806691356859484 2.6172263133893678 1.072700185785695 -0.025569554201109693 0.27788983812879303 -0.04565943488148809 0.57717475576782518 -0.62004995731559842 -0.20583592162712547 0.75809119878555209;0.67943572816695297 2.9282917707952536 -0.18047065204837162 0.071651435476461758 0.13216825698667356 1.0352824911848653 -0.0053666562823471015 -0.022885066629648634 -0.014654243388316057 -0.28443078664870558;2.6626213903260467 2.0752059700454888 0.51870410379783516 0.094184176059426569 -0.23620769226866922 0.8763420340394622 -1.0802194112998376 0.94595064971690679 0.64463859296959714 2.1509570448055966;4.1610459229476371 1.3893314787796285 1.7637314518137961 1.5518464271878789 -0.37992891395086797 -0.24133365597370973 0.96844036994738536 0.12132103315788484 0.3532816717883106 -0.12393300948676648;2.6271867778550013 0.3874506444452287 1.2669156501294625 0.55148538456761542 1.0872434938271689 -0.37702491440334929 -0.91389698050069101 0.37344675225595436 -1.2677533627329047 0.12403943042705765;-2.3296354866836166 1.725822380186615 -0.14378240725807681 0.70901132899766939 0.75285191337880519 0.33053343753367531 0.19086981245443235 0.10604644785464898 0.28574605262148561 -1.0880886956416023;1.0534148391166467 -0.086033226620066752 -0.086532206804014508 -0.081638029069563176 -0.076807714237756244 1.9506500632945019 0.43315493085842316 -0.030954065192127025 -0.17038287483054762 -0.29509801305988403];

% Layer 2
b2 = [0.17155165350795898;-2.1356423358533272;0.3744196397666662;-1.0396554858334857;0.98137652842207768;-1.4412338067513828;-0.23160346948450022;0.12220404166445131;0.04179341041440178;1.9034936345521276;-0.82433644708423648;1.3130552496479964;-0.64363908345913923;-1.0274228570251185;2.541712662164326];
LW2_1 = [0.98383729259861297 0.28572574711842513 0.044672758682704858 0.14739314171961679 -1.9233932400663838 -1.8517726768455927 -0.0019074937957005711 -1.2921756680597023 -0.46721522057236087 -0.085282595387748031 -0.55895662398275758 -0.77477461601708353 0.50988307536597932 -1.095648084364953 -0.5332094077003503;0.58548720084538353 -1.9702224676412805 -1.5546917893213708 -0.62686779017401384 -0.56154654560704242 -0.074876890512839411 0.047809992210576302 0.43096057757795986 -0.33264334043021238 -0.080221882789630494 0.66936814785311349 -1.1425672397558972 -0.30373080869888236 0.46957598153414348 -0.29917213047564417;-0.84581725761304638 -0.68505035948629778 0.45063076814376779 -2.0522388767626616 -0.34422742022702679 -2.20064610569773 0.6729445883383478 -1.2948002731064152 0.5458093496742642 2.0502238488974642 0.27402157394008009 -0.62872701066428416 0.25949874794072969 1.1321297535211992 -0.58469329237842016;-0.66424153742608505 0.72879687843383067 0.013584456448765513 0.53770632350483416 -0.55811448448713841 -1.475783985764108 0.9608217557704386 0.45802776304125858 -1.3395259926546244 0.28198856040206244 0.017695776947829422 0.60971745938966915 0.56174383401539363 -0.023719453884007511 -0.27961198063078052;-0.38957395590735905 -0.43371030746382261 -0.32174045988076255 1.025695255585874 0.52330528700622236 0.43726910709513656 -0.842707744020603 -0.95239149291270753 0.023566553670884123 1.6000452611120117 0.030503587526956488 -0.45118940472279562 -0.0014979766148292446 -0.15122472348702176 -0.12238612339676447;0.71850329821233383 0.28583183520435429 0.056682635051186578 -1.0822671080365138 -0.79601183130383268 -0.16896127092429181 0.67857216130104547 0.64083968338163688 -0.1023334473617008 -1.5723734273607037 -0.059121121748152872 0.29000600932974813 -0.01381325628489033 -0.19145041244728153 0.52836846015147876;0.7424993159174158 -0.86155091162607056 -0.77576269627228422 -0.83345368776977491 0.86914690220191793 -0.78916888063895041 -0.73173208484424446 0.06953271935557058 -0.90845099805773821 0.46025752903609107 1.5188055657976958 0.57788711447737118 0.79090700875547126 1.138362718317405 -0.0061361923818118447;-0.25580453465249603 0.10522633020974553 -1.2381364728570492 -0.60943348372374073 -1.6887651668270505 1.3793640972720094 -0.12439237592579033 0.072656295714589661 -0.60306592502379197 -0.25744480965135491 -0.62021236860141316 -0.62395334416882153 -1.3311734957159436 0.99247933046589965 -1.5774181496262969;0.41834752631883071 -0.49507149704199899 -0.79602888433935948 -0.59406290109566251 -0.6198662551854377 0.35208259794577956 -0.041986577103532652 -1.7360085806706682 -0.16948187809909354 1.0543684743663806 -0.21337384237194887 0.033036970329150865 0.1507305742626629 -1.5003647410308243 -0.57768392497632337;0.076965403627010889 -0.27912407448933291 -0.30515715760781553 0.85423060183440735 0.14660911565763349 0.60113322637117061 0.36738102564314529 1.5244480172603059 0.73747303203325343 -0.35137788036869722 -0.042069858777572064 -0.28203990786278293 -0.13079068603004565 0.45905861778280183 -0.76176866469232729;-0.1318946200364933 -1.0747110642096893 1.7464940146703865 0.19712446445713833 1.7440388712473638 0.074530831876920958 -0.044361317013604608 -0.66803786441354551 1.5163546890611466 -2.1485733004054999 1.5646994807396433 -0.33024133756375279 -0.79119370728467808 0.6101206788946576 1.0683877738861647;-0.53772640417547946 0.77424296239639678 1.2582309004153756 0.038370782935069847 -0.034405926676966583 -0.44521494898092129 -1.1294037809156507 0.14280370832738801 0.066344025395436282 0.54634301379827244 0.32899200573340615 0.035837497740562191 -0.1284702326906649 0.6647699188560281 1.5249833031949098;-0.59654074847099148 -0.19096180225691148 -1.0522552155374651 -1.5559451580411632 -0.0036866094062477928 1.1265924377260588 0.079779922937501552 -0.25175276158651239 -0.39407012347171466 -0.25811040254474216 -0.37622557552880309 -0.29051832195978883 0.070158867077886655 0.41694267779168709 -0.66369469609027876;-0.20630582507926143 -0.36492585855994802 0.86186230479144599 -0.62564983806495289 0.0048399853177862745 -1.2112520078134779 -0.73823036220653904 -1.3776051373530955 -0.66988965404784484 0.12214922588133242 0.13220800567048582 0.13647288712474165 0.10937075851671663 -0.10178104255138636 1.2681216650926541;-0.74071872403226124 0.66371481913485875 0.55601571541208605 -0.51967602855060069 -0.52639921004558066 0.32471897464093935 -0.61118225320561259 0.20833064201605445 0.24210899172852973 0.61690540516398629 -0.33850618127290283 -0.49460668127952001 -0.19127608272465105 1.1907244213066868 0.61882089290740516];

% Layer 3
b3 = -1.2383583507929827;
LW3_2 = [-0.24566574835555247 -0.82287440858456606 -0.37186829125546056 0.55209235193501283 -0.97913218775940647 -0.99537387200742744 -0.11422677842661445 0.19986963205157904 1.0772491188254356 3.8004087173558943 0.1923217018294435 -1.2211371688681141 -0.21811327928703628 3.0843452198432928 0.66357452523191551];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
