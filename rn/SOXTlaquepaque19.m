function [Y,Xf,Af] = SOXTlaquepaque19(X,~,~)
%SOXTLAQUEPAQUE19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:30:01.
% 
% [Y] = SOXTlaquepaque19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;3.03490136570561;14.7058823529412;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;35.0877192982456;117.647058823529;27.7777777777778;5.12820512820513];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.9607221281747946;-2.0492693993334532;1.5985072427452967;-0.98577863142656474;0.70744694700625721;-0.42585466950057788;0.39368895564341411;0.69036735343113409;-0.36251037263534031;0.82839884453887735;0.16305715972926535;-0.29266842114587654;2.3010931578458602;-1.8097967997517295];
IW1_1 = [0.58656692312572412 -0.36559709833488091 -1.1468108076572536 -0.33243893325628704 -0.37241004226150376 0.94003653347293392 -0.59196856800133979 0.19099294388066884 -0.13655205721426955 0.33535160457013174 0.036739329453377302 -1.2886821696359652 -0.13298061582100668 0.28913090681667752 -0.0046813007949476071;0.15602945889357497 0.21281063971435452 0.2811279976194071 -0.40106312036420766 -0.49630654895182519 -0.15016244427940106 -0.48391607965632827 0.58045483978679013 0.12818195076308764 0.20944480533751836 0.25029017924022462 -1.5331071724680303 0.12720758864025711 0.17575555945149163 -0.33733192468171191;-0.049468072826913255 -0.49063702252929919 -0.74718448406475557 0.23485287967210705 -0.0095489337745661984 0.67760135113561537 -0.096005703451452221 -0.32445726585506046 1.2399557313756366 -0.083318153129571956 -0.23110248538992634 -0.32802140762429327 -0.35125629350257087 0.21534625003078761 0.20283677124175042;2.6980471472368737 -0.14047890038793703 0.34424555054961514 0.74291100429960399 0.65752942723268315 -0.58941133386295352 0.55695895821110653 -0.56652149567030796 -0.34318213593641222 -1.1387689190432955 -0.99524638641835517 1.5850612657389502 0.048564104566430448 -0.10138573350740325 -0.78858722554106997;-1.2088261959444784 0.10027831231108321 0.61929953951158734 -0.22095684913532074 0.53825017673205022 2.0255678291372838 -0.3850277373377804 -1.5098404424905323 -1.9233552300803538 -0.52601212905661898 -0.093093550751718712 0.22397821574567289 0.10675102776850356 -1.3598648958287647 -0.22137959931786502;-1.8869561286578493 0.042737440141971186 0.077118709093492832 -0.15027358625751827 -0.16902802652001422 0.050117064577427928 -0.63998474836869579 -0.14457979574958585 1.7111929160275288 -0.5862911838332886 -0.083407574914023147 -0.31801063371505151 -0.39969680388875034 -1.1350759786805424 0.16237551784101437;0.44477073607089035 0.92555664986998454 -0.14600863515387275 0.57921152337585136 -0.5054139402249469 -1.6264722022172116 0.40455561268058071 0.48926909161686982 0.54068933590159507 0.38310936298116005 0.18203045413640789 1.5290857938353777 0.20015347975141295 0.38068790537152053 -0.048079622580866177;0.0026421750993786547 -0.88291273310714136 0.047015592088920803 -0.5731237094499908 0.20133843334265195 1.2531349007952701 -0.57932911184656533 0.40175118668757936 -0.22925470508718207 -0.08859221606717152 -0.02619116999997299 -1.2473860192573101 -0.04104198710148118 -0.33495756645318425 -0.19479766628312709;0.22091708713443675 -0.36399952574885119 -0.67372321614073483 0.68211276010690669 -0.018567858883374623 -0.014269490396961376 -0.071367690020334468 -0.0031716619106616495 -0.15767901193100892 0.75582940340110605 0.52463583416769466 0.5692778557329442 -0.42208108830413965 0.66011847960071257 0.34524587802013695;0.52191266300795769 -0.302400510104608 -0.94503952534625635 1.0135033860970226 -0.096492276890358747 0.72891125141359669 -1.6618901342409647 -0.30770931422711628 -1.4589489894576917 0.3158547917074277 0.26903585719368561 -0.29070073732114926 -0.19590743268900096 -0.21857339182309937 -0.37835607207758837;0.2489224827951626 0.0058767393191219708 0.12847118241881822 -0.19357552047179449 0.83467410975813416 -1.6792072486822454 -2.0153823565330398 -0.11633838619340173 1.0888343629931061 -0.90626202568715708 0.88767951507892828 0.77675617150971554 -0.10422924484928454 -0.28672103081629707 0.28073771770325517;-0.43642618892947566 -0.2588085540292086 -1.3311404058141243 -0.70235158232289951 -0.52596917910690943 0.76348746872675088 -0.53234669006267699 0.60533513828243968 0.16095121279981439 0.18571667135020553 -0.057438776116036108 1.1454501260953522 -0.33078795151044343 0.48551397931233031 -0.22551489277587886;1.0419112801610155 0.0057342480086816638 0.55227397435240533 0.37202331164504121 0.16026639553197453 0.058769517572048055 0.1232829179651819 0.064165910411072141 -0.34759790335668006 0.0729929484616261 0.13696720687119329 1.106924215195751 0.41362986050956829 -0.60936865270428386 0.1321199574302086;-0.49754094333380072 -0.34893437772771874 0.25905926806728924 -0.28575719099986407 0.17934645919059544 0.25659179615655436 0.59853475270597434 0.27841662004045126 -0.54745269277128172 -0.44468842330678759 -0.44460574055357549 0.57789175142592741 0.53151494512024033 0.50044672208383623 0.50647495680336097];

% Layer 2
b2 = [-1.7579740605034102;1.22932665545158;2.0857005900675394;0.29604188742782223;-0.32462027401992927;0.81182834782204494;-0.28906950295550315;-0.30262485365950065;-0.32453405859782769;-0.56834847869819749;0.79627327518747526;1.2503916103437895;-1.5988038225300238;1.0386044391375158];
LW2_1 = [-0.69938775143582421 0.75904364806109981 0.47301447220590376 -0.5286084595408107 -0.048888226592067936 -0.1781863203420368 -0.80612667597551446 -0.81109945159443142 -0.30469823579644961 0.53459295270685636 -0.048965314007934024 -0.45969226508721295 -1.2501178754954259 -0.59998214404184769;-0.53894032821634108 -0.99857269328310161 -0.53462437213367475 0.14192554720118017 0.82373249788094882 0.27754288008059302 0.88679001906784216 -0.43344645544871802 0.20060902561937707 1.0230774072224242 -0.14592108457960101 0.90742922483015986 0.87521120625120019 0.65681654537866929;-0.63046559952688475 -1.7341576671497889 0.51237742807466191 -1.5068610120378634 2.1948776837188086 -2.3377458579226609 -1.0012490622034311 0.21069265758987321 -0.99730918568676508 -1.5233926164536447 3.1685425546267543 -2.322040631562456 0.21597357238195064 -0.94138821473917011;0.37629469231919288 -0.92933861854864153 -0.33675110631684196 -0.3295101310084933 0.022372650971688113 -0.13329638919679324 0.53810171570263099 0.51089055323543564 0.4849800815790693 -0.57787503790780981 -0.10916363785812154 -0.34306676415419274 -0.68778803013025325 0.66071578752793159;0.85519616661819431 0.018920595537476922 -0.1701983736203381 0.45272496361980819 0.80323489689275684 -1.0267342699606543 0.18079099920133312 0.93752868958464219 -0.37152405940118222 -0.22448933304382609 -0.21434966875540723 -0.22423504158789373 0.09846073717161001 -0.5901847510544026;-0.52374653743275923 -0.069450863733664672 0.28646859539429387 0.57010125051876248 -0.043689498867330756 0.88764213214014287 -0.13164944977964296 0.60451894555277663 0.14623158536418207 0.85310087437168192 0.21894605479243609 -0.57389536529513052 0.06517248847622277 -0.24740317651916049;0.43279215499212315 -0.52035830252328408 0.92066187675325317 -0.38679024649993682 0.15152107825810951 -0.79127537051898278 0.2430229691301509 -0.48474844328801597 0.26235907103675266 -0.63795776598653853 -0.4053545510199883 -0.38273058994626336 -1.4180968844604493 0.14899028559801303;-0.38417830779589468 0.69159524448415621 0.51166945503098671 0.14836794353056404 0.15075448679054074 -0.58544414066260853 -0.50586507371272826 -0.40166623231268472 -0.37272538178276948 0.32198205131069785 -0.11172746421217811 0.18339564611160541 -0.015626283767608651 -0.48131112911017881;-0.95583878495119035 -0.071218820420257636 -0.14110672743634303 -0.74273019142503105 -0.36629823378024523 -0.096001188683550065 -0.3956080715985939 -0.59766999991434233 0.78239024172276361 -0.17010767548823164 -0.073879507902635255 0.4886646412165615 0.5787577229635964 0.1589313278427453;0.083188798120945873 0.20710459918276455 0.76359425698175065 0.42513523950709065 1.2067646132064342 0.61318479526239955 1.0375828314900917 1.2159038158532935 -0.33228604956369862 0.2011805892475276 -0.81926865292068207 0.12992100112002475 -0.1109129914154801 0.51649495122378031;-0.029950093949402332 -0.027466528398480988 -0.49103081618005562 -0.35599121062663092 -0.61163082003764146 1.3329245709076059 -0.56089441783816518 -1.016073221910772 -0.2392013947355299 -0.23311753380640393 -0.12246673261579738 0.51848712360114679 0.99184957633731075 0.047223377273024128;0.061553274135621464 -0.11595795868245007 0.58168922252388333 -0.5831387185843131 -0.3604620516530751 -0.20555334899781044 -0.29129158228951529 0.10841351413862974 -0.75538549547314859 0.75368951681402674 0.1385456226706489 -0.40912238750221985 0.10814034620339913 -0.73788220877798749;0.47677426925879812 0.20581432725547133 0.12732731102281628 0.078042079836813175 -0.40203112193225493 0.21763963384548152 -0.97869114268134061 -0.49299562404250291 0.25755806454796182 -0.6432827568634204 -1.0474327438002338 0.93094220901371816 -0.58714049594627382 0.53151503606482509;0.46440972113960244 -0.1206442525583005 -0.35400547433345347 0.7366842183337986 0.59917967385035642 -0.62998652716461012 -0.86540295885154839 -0.73299627925476152 0.38863557406073845 -0.57971982015584544 -0.31399230225227159 1.341952856884675 -1.1167060957975876 0.90744712661100624];

% Layer 3
b3 = 0.11759370608389524;
LW3_2 = [-0.28431103888125009 0.21355821332405692 -2.5264149705064529 1.0820342865534138 -0.33701266310843347 0.13084973473170636 -0.29527628042469589 1.1724343844687193 -0.554116166448265 -0.23392288850302267 0.29878333247782779 0.3747577637293561 -0.54540811829430458 0.12566753545655457];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
