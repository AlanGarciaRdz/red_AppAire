function [Y,Xf,Af] = PM10Atemajac14(X,~,~)
%PM10ATEMAJAC14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:19:57.
% 
% [Y] = PM10Atemajac14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00968992248062015;166.666666666667;0.0561797752808989;0.00614628149969269];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.7302014166970756;4.6619430608905637;-1.7001921693879112;-2.0686683738007452;0.79920088228513109;0.43573839007494736;0.36132597565314428;-0.23880624363628708;-0.038817751416217114;-1.358902782004787;1.9377438376510427;2.2903752455697282;4.2040965200423939;0.042972064868413033];
IW1_1 = [0.88885093947159377 -0.14094162677685329 1.1426444578924972 1.3374179559443287 0.51488274080534213 -0.45512394835597508;-0.35127553803520034 -0.29680940702883379 4.9295456984703128 -0.12494134495459912 0.62790591122464112 -0.18372556463160558;-0.74016214389702417 -0.85954212567937172 0.6784078629601713 -0.85551809686807234 3.1252608436942833 1.4649776464688029;1.395758141291058 -2.7290413435599015 0.46220564559129229 -1.1021379027776737 -0.50138135118350213 -0.43357035504770031;-1.4786768480507617 -0.44839380965300107 1.276139157446452 -1.2426852799046542 -0.65203698563179524 1.0644384895050307;-1.6107437694013891 0.93218029017941928 0.64850984430592773 0.76831846269042825 0.49647317559453008 -0.66990113597873024;0.067828177070927545 -1.4653899562011254 -0.10539406506725307 0.10763676771679904 0.80589599623061425 -0.091928013358435992;0.84530874936935096 -2.2915305621958875 1.0220642834756248 0.35121296453836776 -0.15953884308663221 0.41251197882979551;-0.61349997365912334 -0.68655083886356316 0.12831115703807638 -0.81184335328678092 -1.0220176622777426 0.1456194159753883;-3.2640024022649592 -0.26378100397203957 0.54772616625962378 0.50442497350674587 0.60285451569157267 -0.089570367334936007;-0.19109335762064278 -1.8869486584067912 0.88080105418320775 -0.093669266984246644 0.48441897909147524 0.14797682124820338;0.58969377943857582 5.2124429127495304 -0.78275267100553758 -1.0995429781556683 -0.45834122451955572 0.057430802124387455;1.2965078544212154 -3.1106030846404882 -0.39017120253567955 0.21771871121767605 -1.3930347622668136 -0.10181716130008411;-1.7937219643101201 -0.91709712157981793 1.0374270294102574 0.10509304724073915 -0.14217440399777476 0.19645122051436259];

% Layer 2
b2 = [-1.5092955186660486;-0.70724143272017781;2.8702882257190092;-0.30993455775782619;-0.89309267945864257;3.2327660420010949;0.39436651719844784;-1.1267372846075305;-0.36470461521274444;0.14886586036596516;-1.4122159723655028;-0.51269226526636436;-1.667712915296174;2.5000254130160271];
LW2_1 = [0.99990605145210032 1.6595358491465064 -0.42519634288715596 1.6747190561715277 -0.10712902502794994 1.2915495419040572 -1.4691858887271083 0.48220305941032998 1.3536509160941148 -0.19812716027311844 0.88539078940191407 -0.38330386566234498 0.16440394460918553 -0.72131567599274415;-0.55860589983048969 -1.2951865697448888 -0.53158740920846848 0.17186754426092155 0.60704592093875964 0.01532125109034882 0.022184042385961694 -0.38837517140912792 -1.4208324930952894 -1.905635302427036 -0.99406211069454598 -0.31012384639605239 1.3728281396093849 0.18195697748412296;-1.5364212992169402 -1.7971931255094278 0.61158371320922322 0.57456838319823067 -0.16403762337062844 0.32153936550775164 -1.3725235216065412 -1.0599353839011765 -1.8813146178376909 -0.3201300081662739 0.034785951322946873 -1.2698588034361309 2.1544327618838066 -0.38764190124511555;0.26967254071740487 -2.1125634277475385 -0.87446550447380156 -0.54233839491463687 1.2321253094929545 -0.49837225999706969 0.60827798071413819 0.77548956770270161 -0.091724227704562927 -0.64322886571343107 0.036457779788085141 -0.22308349884713913 0.50434403251514937 -2.4981946794152825;1.4618155364895407 -0.42780235379750547 -1.6341342062745416 -2.2234982116293742 -0.58835361972235156 0.66164944683946758 -0.076690335146445882 0.067402423932104688 0.24110263422168104 0.57040178213479986 -0.19106536167768878 1.2495652891090143 0.53812267952084158 -1.1979610633768607;-2.3690285282555275 -0.69641270106899045 1.9007104121603309 0.79640646695346096 -0.28189243018253135 2.4333737890432219 1.5200113762766312 -1.0077546125122101 1.6980397653257173 -1.3202019607314748 -1.4347188093072221 -0.3708788586062815 -0.091610672009483335 -0.19541633077156378;-2.2570132727884245 -0.65257669416695918 -0.14713344762012431 0.9518864817467515 0.076387867425245004 0.079890007697469803 0.92932242515903174 -0.52244073140196778 0.65067795602274314 -0.78712377160037261 -0.19685154443559288 -1.8823731183389603 -0.08515905312680995 0.2700278892998183;0.64932047019123962 0.80626822838420509 0.16425226772361112 1.2018850382177144 -1.3955107831795543 0.37197555957965323 -1.8250028095319679 -0.451779911974583 2.1436186797729517 1.4598814376968727 0.23799506956533664 -0.36078427914843247 0.73148447057342225 -0.073517625370071255;0.30028116886000378 1.4222690966892775 -0.028150946210274943 -0.42483924286072566 -0.10875577667155199 -0.24761203443550292 -1.1953270893814445 0.45748107388686743 -0.094431717823436734 0.20634886263870489 1.0161571634425488 0.078390521833478138 0.45304615621958022 -0.15818137003558502;-1.0390973753695638 1.6466296277446189 0.11483684675328419 0.40492677551068457 0.3085950018259524 -0.063939402617669699 0.013257598381564345 -0.16816852727692044 -1.4823495724426958 -0.38328579513632699 0.27211131778918102 0.3844652738264524 0.52446230344056588 0.40160526703754235;0.23381383313471019 0.96546029619810303 0.23654714246879802 2.1763645083139709 -0.29739230144133394 0.14311527543775979 -3.3403467188224369 -1.8711220217342626 -1.046542779254769 0.063638216695531491 0.93787498959584936 0.36530155227812833 -0.45398072976230885 -0.88512368803099828;-0.49226554593460947 0.31262066835062208 0.054533272860039381 -0.55161507827359124 -0.25922037049614205 0.23413214178596772 -0.14865633141101264 -0.6918722176223312 2.551661371187631 -1.0240588313244487 -0.2797304728455195 -2.069470823258869 0.36382437966113768 -1.2441140659512855;0.13848646084286609 0.62180600950908815 0.17581260286736031 1.2935341601350825 -0.16448825677452442 0.44216512544848885 -1.2823075953061869 -0.46548136339329482 0.88473751624997066 1.2987986526900224 0.43212514839807048 -0.26093659454026868 0.79575881927349756 -0.77977573795500432;0.45539259041147639 -1.3888722832033826 0.39730766632210379 1.7141461234571091 0.63075793126508883 -1.4971429119342379 -1.4726074824889022 0.11617388882905533 2.0264484684959383 -0.050808210686126648 0.12369661844871427 1.6284320953971365 1.579927658699239 -0.16253412018033936];

% Layer 3
b3 = 1.730063818435791;
LW3_2 = [-0.13531200364572271 0.2658686914254792 -1.4994932103940128 -0.1762060715800208 -0.045237921757308598 -0.65964872797148866 0.6243307468341015 -1.0681650499161608 0.417460325570781 -0.43867606529359182 0.3152758226859525 -0.1838109759036031 1.5829229087552348 0.072028198246495825];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00968992248062015;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
