function [Y,Xf,Af] = NOXLomaDorada5(X,~,~)
%NOXLOMADORADA5 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:23.
% 
% [Y] = NOXLomaDorada5(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.00280033604032484;0.0179856115107914;0.0558659217877095];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.6778416005527914;-0.46978865707398615;6.0967459723220383;4.9157875461535934;-0.61790469625694755;-0.22369837780951238;0.9753433037180399;4.3725459089716807;-1.2675707952178024;-0.62386384665700989;-0.65525687660749032;0.37121716401507004;4.6715396641804379;-4.6824052448657962;-2.8120196862140627];
IW1_1 = [1.5540979523999348 1.2371780580609799 0.0019213693823107655 -0.48913882019764199 0.42550633477229016 -0.74651340188233206 -0.86041822395625922;0.25872938734148909 0.95591672434503072 -0.17965963561787454 1.1710982044239577 0.36718828125685499 0.43636684713008173 -0.20653664836520083;-7.7734127544165039 -0.24855723982236511 -1.4152218814259132 -0.16342455709771797 0.38529736354663424 -0.1704004172805163 -1.2837559419085216;-1.9976305169770645 2.9749975286644865 3.1771369180838174 2.0789063590258365 -1.1852479830716713 -0.76895063746940762 -2.9737748825683239;-0.50992511847616351 0.30022709493979566 0.5458831187251586 -1.0279947280574431 -0.34134554302512804 -0.79735144953532533 -0.97078600523626579;0.24101048816771736 -0.99194180232899465 0.96528042976569695 0.42941749005526975 0.20043609337192783 -1.5445791738124379 -0.58039600592902052;-0.51173894594790337 2.2904656775060306 -0.27040824588058593 -0.85513300852107255 -0.72101617497366333 -0.69050749273861323 -0.11627757226666835;-2.719605240187744 2.4175865512009809 0.61044583956700615 1.435826968498473 0.47232086607619733 2.1724128477162008 -0.97417097936027308;-0.11808642688248802 4.069413229297262 1.131766305680137 0.28591430662245099 -0.94254060843249832 -0.85660738047863005 -0.093082307216362126;-1.1305964846542025 -1.7337064035973508 0.034233056073743003 -0.54834951614323191 0.33165129559075024 -0.62810753080239123 -0.98251518752868139;-0.66352301401087777 -1.522026904294254 1.1186518715285403 0.56838509339690491 -0.53893778556483807 -1.7307226913636258 0.015015137452542876;-0.76026830526209921 -2.2804686043634863 -1.4611462110356519 1.5849902951924382 0.38893173221523303 2.8273118673214435 2.536596569268891;0.25415762473814751 -2.3772484675431271 2.0365535971492497 0.88339028760061977 0.011165198655642902 1.3658148320363919 1.3725312937300409;-0.53748173153411016 -4.9505332131946984 -0.1800027505400526 -0.40507514529687549 -0.18305381766621309 0.21339052025631047 -0.47026508494999619;-0.92110937437424589 0.57601980246530116 -0.6518001996196231 1.7216238344060866 -2.2618150845746987 0.94854513122634732 -0.94043184143309067];

% Layer 2
b2 = [-1.3462736218838083;0.073880541894388682;2.2466260957426609;0.060271075616988162;-0.7203806039468259;0.8252941943890445;1.7521432302127935;-1.1550719321830327;0.64352881609391832;-1.4436202685370012;2.3438277193939165;-1.4695364864864064;-2.6313841195212482;1.907910663990243;0.68772998159141641];
LW2_1 = [-1.0865319307955392 -0.7209143912358329 1.046595409199903 1.5859295939207561 -0.21576803781624815 1.2908656589055263 -1.0387071738297515 -0.72279960963247625 -0.55801966737530473 0.3866062731106974 0.85687405751000811 1.6048139639801675 0.15868745794856898 1.0024498707161036 0.33958344919934458;1.016388285037757 -0.29836304820925613 0.33188967129995306 -0.32421124865669343 -0.74766135317872739 -1.1549650408075098 -0.36022218783546339 0.21264038739499314 0.88985971542914699 0.86353526300540284 0.56745498924543492 -0.40049405755441914 -0.30412177475731333 1.003446345942663 0.54735648389644931;0.53953552021456808 0.49730358299993549 0.60031593583260068 0.2266180096475407 -0.034266428137835592 -0.13899530540229976 -0.43802340523168193 -1.1743528074116409 -0.93670742273937135 0.33123781657597101 0.21988487931847497 -0.8302892262929138 -0.87089831202906332 -0.29713423824204771 -0.66443123689733308;-0.26455373702086721 0.24404632967933329 0.28638188549482246 -0.63452659415267165 0.17315467626236708 0.32730849883909813 0.54311817083028457 0.34482247064822164 -0.35576420316640422 -0.1686845548653729 -1.3037658358189679 0.094398772090700439 -0.02482741132496134 -0.16898755198295151 0.43331868560114456;-0.66709020544316822 0.12806710616127293 1.4665170805212357 1.1281791486396686 -0.026186961158700679 0.6748720280816608 -1.3027114395720794 -0.68387779019257233 -0.067036849583554478 0.3932231905664646 1.1615245248877277 1.2677984956497004 -0.11553720612073091 0.85234317524267866 0.16044277952096933;0.10776851389421649 -1.3954431891832904 0.062887481921904353 0.65192180864929683 -1.630638246494988 1.1427935531646043 0.76108479186079392 0.8954932789717549 0.98386341263928756 0.79065366100368806 0.38630990194054821 0.75753287148422888 1.0823307530052033 1.4366488418213759 1.8763087652119075;0.24211434846557456 -0.66589007382188914 -3.1891920410076704 -0.10674617433170699 -0.27948742957705758 1.5371461940159765 1.6618810472104533 0.91179343139813274 -0.17173609600790204 -0.86767308447224711 -1.3593340440433535 0.23377471908757616 0.49833733925863882 1.202868175481266 -0.64672673969746464;1.1240556852421577 -0.083882558764099821 0.035640850102417472 0.39440711737785339 0.15712269708514254 0.4842989164436392 -0.78206867530970614 0.32350532380141045 0.65379205099852489 0.048649922653156361 1.2349685122875524 0.49895661485280146 -0.2691861617271884 -0.065118395936642148 -1.4889608748317888;-0.20348657463624478 -0.73245345602112133 -1.7009885620925338 0.16639238535339743 -0.44505034005378358 1.3718848810267212 1.706771720334566 0.66375889330882609 -0.38820552377819145 -0.88343178929868238 -1.13229614086089 0.11710686320171133 0.48738304170850333 1.2197631512080609 -0.54945181513586283;-0.72642050174393813 0.50024665677979896 -1.0262076868321568 -0.80963696076032865 0.36160727824331418 1.1883319993843 0.73759079713942854 1.5172325928119836 0.32728325456903351 -1.8515047657910062 0.52850732881547913 -0.4076341596308149 -0.67529788206453722 0.48916599291677687 -1.2221224519362399;0.61026739069129088 -0.22838664565025016 -2.4811025624395144 -0.56631065207613596 0.50473779907446525 -0.04560430694571288 -1.023705213455836 -0.13561202425058344 -0.39202380915244284 0.26675533282619673 -0.46424768011000128 0.00030540360991890281 -1.560849103366168 -0.26907623598366209 0.43043558600015541;-1.5165367294444945 -1.0144353160222346 0.59687805591793752 -0.38778939878830659 -0.72788576548477479 -0.25074837442438586 0.96233709354546371 -0.13825369020971454 0.17370197780983448 1.4619493854990486 -1.3354088397198507 0.34104900553471346 -0.14953505353830562 -0.51152655332258357 -1.0996065065009653;-2.2900954458670353 0.22454039037966661 1.574158655954488 0.093334048098771522 0.77665282467313057 -0.36952416064517096 -0.13098225501023006 -0.14690533856032648 -1.0277588468537802 -0.47399279030059183 -0.042458500344482092 0.040377383417290698 0.59099420042649564 -1.9277558370329633 -0.54292064347420843;-0.14164620803038919 0.73872777286112579 0.27362446234995752 0.35785040791444389 0.62081841244010927 -0.76277800531408346 -0.6126376412262623 -0.82588848631139944 -1.4443473052111497 -0.58500647864277244 0.18664466924695267 -0.73285343017719928 -0.74528698167117391 -0.13685788701409132 -0.99305170526524145;-0.79269914545463016 -1.9522820703293393 -0.79158156116635903 0.65581707386529942 -2.1359732728216452 1.5130044399423292 2.0653132057473713 -0.26140568434602762 0.65038399815431391 1.0022392131463518 -0.23733734601279885 0.20388192288616819 1.0696582713481086 0.12593020568204774 2.3185136071180024];

% Layer 3
b3 = -0.58859883194882368;
LW3_2 = [1.1746447452592599 -1.1043064953273829 1.6739922257287239 -1.7905553077578491 -1.4337059636643201 0.36912493731430712 2.9938216938253364 -1.1258868244798745 -3.5143226738577167 0.72247066782268388 -0.4776048527596195 0.50112462651082534 -0.83206213121114281 -1.5451546135104555 -0.44403201962589756];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
