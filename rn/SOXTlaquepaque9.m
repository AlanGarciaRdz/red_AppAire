function [Y,Xf,Af] = SOXTlaquepaque9(X,~,~)
%SOXTLAQUEPAQUE9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:58.
% 
% [Y] = SOXTlaquepaque9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;3.03490136570561;14.7058823529412;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;35.0877192982456;117.647058823529;27.7777777777778;5.12820512820513];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.8005576168245148;1.4523836347352836;-2.0512504647541236;-1.0998426132284311;-0.47571788913772117;0.95371418048079692;-0.013532197272536406;-0.17717613686983857;0.97537659271374011;1.6600646623001603;1.5967965793397314;1.464720411918486;1.6906302871140961];
IW1_1 = [0.034206646299528284 0.11871396247610977 -0.7418215421187413 -0.80605421217012041 -0.6012539864796077 -0.19136078630244441 0.10460846726735792 0.28081844984624649 0.17780316387464457 0.30341874101649058 -0.15474083273697187 -0.21761034681987362 0.43888849460763585 0.15770563554271433 -0.69003273776807084;-0.22666352987012989 -0.28886480709304274 -0.76761532285683209 -0.58164941117025304 -0.35015145720401275 0.11874028310663221 0.43910650007834351 -0.61737724568565489 0.38746569214303156 -0.22778411169591115 0.24879924172745171 -0.6752525855338104 -0.46272628688082668 0.27581909674637745 0.41874450408693253;-1.0229084242955437 0.20437960771235475 1.840372171908816 -1.080341562672364 0.46829222598609144 0.11646870807001329 0.79920724581909663 -0.93559837099691678 -0.76787827124336172 -0.38210153586697643 -0.0042078977160544886 -1.309038319380752 -0.51071355414904707 -0.27869309138059417 -0.44034348586014743;-0.97082673852232648 1.0605609391436488 -0.29131304235817795 0.19828481039776646 0.13491753591870395 0.63952491095975894 -0.41954895884977356 -0.47173648809420193 0.28936110577445073 0.50889921477251587 0.0052345528285714232 1.6159381692453747 0.37242224385442546 1.1047326878648513 -0.29275277305611991;0.084629712271790697 -0.041636791840012094 -0.22952064535896166 -0.10185899182229925 -0.069543800739419348 0.17810857292896626 0.1549115769646226 1.0184221463220464 0.75606562647306452 0.013479522750418443 -0.15784413611025533 -1.2822345575608296 -0.33440717394404929 -0.28553517463552108 0.39233345693303856;-1.4967142512732317 -3.0643165101685512 0.49696331814244588 0.79866967307964887 0.088202835835351406 -0.020268791173239112 -2.5584088204717936 -0.95648550807092247 0.54160128467380597 0.73311333254642674 -0.18480329789109393 -1.4759364321592199 -0.6671851598566314 1.1238989717129828 1.1146606596953115;-1.6283913683252818 -0.23917285164711075 0.52592566620148928 0.50449240369568715 -0.43493592904599754 -2.3927201986701965 -0.10823318896833607 0.18784284052999434 0.92984165876800706 -0.33967360924510948 0.14574704252184026 -0.7746953671247031 -1.1706509323424454 2.4012050070522175 -0.44234611434337212;-2.8696775587463055 0.039249105972916754 0.95593187964563131 -0.7615205658044526 0.81293143507569032 0.86043561114981248 0.80314678933105021 -0.99324457227907215 -1.2860750153325462 -0.15964934950842707 -0.26971252323813227 -1.4149433420647712 -0.22978385949324223 -0.73627920219579412 0.088336866093535721;-0.70305579707904053 2.3023250755301139 -0.061260087844761363 -0.74487591671082121 -0.61813076771231434 2.4001339915958986 -0.097245985528917112 0.11071074372473322 0.5384506242295124 0.45263509146233838 -0.065884211230022222 -1.690329522145934 0.033971941856719423 -0.19095407167952935 0.40734872288190399;-0.12901854843100341 0.10578961248487379 -0.0051506509553240348 -0.35011444148532789 -0.077133124774606668 0.23032785514327123 0.4414753501108169 0.83975806025857569 0.84794086318938455 -0.066768474328735838 -0.24318057576561841 1.5449608405381632 -0.44947645938501796 -0.35044525204468607 0.32669377079653855;1.0611256047507125 0.046072472745400467 1.1321590596557791 -0.21532408720685256 0.96149546294977861 -1.6142941825021344 -0.53213850328930856 -1.0758032463605935 0.20994467603471761 -1.6023471266535079 0.020151919844865598 1.1859149890906897 0.43094461864068512 -1.01499178389583 0.58064068791061807;0.70422790501532495 -0.059823319689525284 -0.37700154186615359 0.30910537213336109 0.057450937246791095 -0.35520117924230582 0.43794266453749209 -0.6335032896762588 0.64136062487193113 0.099305202842002421 -0.37730839844272213 -0.69995718086224235 0.363727707444024 0.19274413294185386 0.347082097021497;0.37178308313857072 -0.0042155044715733664 0.5628129672976272 -0.69069301576436293 -0.37976708855015218 -0.41270183427127044 -0.40034505840710316 -0.55467198857761357 -0.096063165051709171 -0.34763844932842963 -0.580443474908794 -0.31160840906412773 -0.017105085167799301 -0.63962957341308835 -0.0011451585484482801];

% Layer 2
b2 = [2.2212374036343041;-1.1371534335294893;-0.72575003404699234;1.7029398338793769;-0.32923692132432625;0.055148986502614253;-0.2900376465131993;0.057931854589619587;0.79100301365500947;-1.0258484122327847;1.1709744885188611;1.5488875814779388;-2.4014395099270787];
LW2_1 = [0.17718432992830441 0.85374149323945003 1.6808486710500241 0.58637221200143441 0.24394366865341316 1.3567395934924031 -0.94999966923088475 0.80285857795565818 -0.34646684518461135 -0.22316918671127564 0.23473768414460916 0.16518199469100919 1.0538254295876561;0.44175050753855738 -0.16951545206345459 0.91212245665871805 0.33937867225274509 1.064899948892535 0.29026245067901457 0.79030509941460025 -1.3868704861124006 0.12665600744638097 -1.6071016147390385 0.065284610896978207 0.91973994444955298 0.53109162026138246;1.0794241586886368 0.31105973352222038 2.7215534420508796 -0.25631077255490664 -1.7694816684799382 1.9949672455806848 -0.9261779703693569 -0.31331912313873711 1.5538104719164048 0.71474556258985589 1.3826381169975022 0.0072326446581135323 1.130578005802741;0.37835659688282985 0.82583782575196441 0.52071892179975365 0.29908118223122609 0.12257758165733409 1.2252573290262407 -0.73439263682712075 1.7330362282067826 -0.52247820505342779 -0.28066713719960223 0.093407101704610085 1.0808987516738546 0.33926673615595826;0.4439240461870152 -0.17081493790688804 -0.83737403664125676 1.0951675259834008 -0.0085709782217776032 -0.3721116483378214 -0.83340927480884552 1.4323034813939066 0.0083134413493568399 0.77313916455592713 -0.13824543771554881 0.8979821812926958 -0.19040913018361755;-0.63926502551210485 0.20185312482082921 -0.49726605916371391 -0.06756823992687519 0.87492092932319743 0.15493403778821013 -0.29558891906312479 0.0093424883106890746 -0.28334567950230877 -0.15400893853357911 -0.73287261345144483 -0.42959051115879365 -1.0703514312644162;-0.33779723157532232 -0.24906717924023336 -0.77234236111815235 -0.30089920900423139 0.49191857273253736 -0.85489822696613427 0.28131283884456082 -0.6643844532373937 -1.0925925055810439 0.65651058513125848 -1.0880938639631759 -0.58648609818690867 -0.57214312509762377;-0.06990197119181274 0.5797542491060208 0.87082177454322895 -0.64909276813791061 -1.3437912633975255 1.3260352450186244 -0.85692445612870127 1.5759246967809188 0.9813959144318527 0.35865419290645001 1.0659867727716061 0.56819373760603376 0.7578017075392629;1.0245543322650241 0.69309833213156391 0.12665832326724594 -0.73443620782331476 -0.054220054364876827 0.21972416088249141 -0.6499595978803242 -0.50832021984470466 0.43177543227558801 -1.4058712270635563 0.092607680242847601 0.14732832655931227 -0.017287093726759482;-0.10015911768924028 -0.65252601670556387 -2.0233964077194195 -0.019955265224742971 1.2729742927017773 -1.5314611651503216 0.8270031419520758 -0.10855767955447021 -1.2078795603274202 -0.35661074943834292 -1.118744233621829 -0.80537593294625787 0.47358356458223544;0.4538754504408069 0.46940423996516423 0.040986331592325051 -0.31033940088782941 0.95707911642207921 -0.58712522604486295 -0.50705467869091347 -0.54486221872824481 -0.15274986161577186 -0.73634054719935393 0.38531393934541874 0.45891688608247416 0.7185165293389989;0.58191948802345095 -0.15065782601097938 -1.2541145281422248 -0.16208942234788803 -0.51744915068224107 -0.59137496258371691 -0.81132111886305336 0.035739112858779488 0.70622185404338111 0.42896455857007076 -0.47264532607537307 -0.33160883260069518 -0.38230877368595839;-1.3803679103935709 -0.1063289944889543 -1.024317339895509 -0.46257793748280313 -0.30906764472242526 -1.7210679337991162 -0.60962380151563256 -1.3486466904410308 -1.3885936017652967 0.60187588817978177 -0.11870212143869391 -0.62022555971127236 -1.1297643732434561];

% Layer 3
b3 = -0.041396251496119058;
LW3_2 = [1.4473464029294489 -0.33439064844499583 1.0667345708020195 -1.4305099917584001 -0.29929648631425076 0.15277524400054568 -1.4575656759676106 1.4713065598922592 0.58752005867819646 3.4545426677639237 -0.28052626920233509 0.017513992814885013 1.646088109541521];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
