function [Y,Xf,Af] = NOXAguilas13(X,~,~)
%NOXAGUILAS13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:13.
% 
% [Y] = NOXAguilas13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.448430493273543;5.42005420054201;17.8571428571429;0.00666000666000666;0.02;0.0561797752808989;0.00588581518540318;0.125;4.5045045045045;2.48447204968944];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.3553427376855196;-1.0052598015740326;-0.53696426685142307;1.4870722821709959;-2.2270949503091284;-0.82843494549767849;-0.21717569368758577;-0.16476041363170232;0.091532597037208521;0.1940188818538589;0.42598961639619337;0.92536122284672651;-2.0085352309967921;-2.003597266610174];
IW1_1 = [0.14804415472683918 0.11506298841131263 -0.38248994167535277 -3.2493550510706459 -0.0051990519953876999 -0.19860445895398357 -0.11956058852624195 -0.21077508989574972 0.12471174065599114 0.8252182446527403 0.15488265832190073 0.22755416200646186;1.6628981159566498 0.52853091531307028 0.41152620061002693 0.36151017749917513 0.47867224260042968 0.36939508871657983 -0.29858719793371152 -0.53406226320397521 -0.08917137687905366 0.8069263246065731 -0.24643454724611463 -0.30335373969230667;1.228539445845569 -1.1887378863952618 0.019259394807304021 -0.46413849873638774 -0.79574213070198796 0.6391484476680197 -0.53413722489545035 0.042275935634473599 0.51652291395466243 -0.22980522291043998 0.072983889555811005 -0.051088264370179035;0.40253426345675103 -0.42590594313752733 0.47974713810803654 -0.81574273474398695 -0.27584593836023347 0.054901559050172223 -0.51057809226745932 0.27766934626998896 -1.0998202376180803 -0.22471050634771877 -0.73055905702115065 -0.17415799694939521;0.02614154534277003 3.3375681945407725 0.13542344965926684 -0.018426841379047109 -0.047321017220460664 -0.099138064297159628 -0.29794720628948757 -0.12159724577925672 0.14341123535557093 0.18441844469072802 0.52343784708242902 -0.14004423702613597;-0.27061991212574132 1.278258025692105 0.3922472667141591 0.47931201617595659 -0.24091546536026498 -0.15309024541623792 -0.054721300293411303 0.70604004181828861 0.14048255727946096 0.020256177720238577 0.0034192037732209898 0.12637111890343639;-0.61278899271506959 -1.9232739066918019 0.36478919740138482 -0.92418840557484272 -0.46238241769358235 0.0030666561220366938 -0.43844102888700703 -0.084190607387629207 0.29467519955368732 -0.057413891265391259 -0.41071134563613149 0.15334750150543938;-0.81159291297422598 0.057524488612650596 -0.1714389981052459 -0.59568054198784959 0.82342745964899822 0.73329927602675415 1.3184401402027262 0.18488118895624023 -0.37635470755369849 -0.49782565841259269 -0.76266187416978282 0.63194451217527725;0.50658358005534798 1.8446299976528957 -0.84141669101973504 0.49681380461516811 0.64755837028960173 0.11304718984785567 -0.10620158530682471 -0.60276716517659223 0.07846343422349665 0.40909166126336577 0.53270870327494635 -0.33570609099876442;0.043229768278043139 -0.59170000907476827 -0.242410605194327 0.80332266567408273 -1.1408185196732319 -0.81914002498767824 -0.81892911084192621 -0.35516458610077822 0.5513482828081786 -0.0082963484125232381 -0.2101983005870359 0.38162542038897096;0.42427825458407159 0.049873387997568519 0.23916260627651834 -0.25433062795929851 -0.1156220750574567 -0.54086764479482885 -0.2469170087517808 1.1543939410325552 0.40259896277959517 -0.46098241067687284 -0.040226624878816897 -0.25656902134572207;0.56376138063841663 0.230396321555626 -0.32858864960883338 -0.15865573489582818 -0.61007262539351703 -0.64894550107709159 -0.58348419719053168 -0.78521723365299645 0.54529326985944815 0.34595747946032934 0.18157990739708865 -0.040472929985024914;-0.55569155644140344 0.93058284191533036 0.37694332935341512 -1.6368688381857859 -0.097588876073893563 0.58724152724637668 0.28793662488226257 -0.37735364371501579 0.038405701353259949 -1.3469840083257805 -0.26800036692948248 -0.2041094069699935;0.9289531745249191 0.209890615569399 0.22256244032478895 0.15730213438824298 0.36278807933721546 -1.1850941670444222 0.21070881511067771 -1.0837593982776079 -0.71762400585806341 -0.36939297472344951 -0.60417309407431363 0.34133805820129132];

% Layer 2
b2 = [-1.4465919105402771;-1.2681233284319924;1.298949366383042;-0.92772848588537282;0.55204874345148292;0.56249035504500156;0.26607056601853712;-0.098145660370819704;-0.14062466607172244;-0.43553223129391588;-0.92664048977146907;1.3823555532150058;1.4761444075338952;1.5767711882006383];
LW2_1 = [-0.61499754788833549 -1.1795911503901901 0.051503091356711869 -0.43927585678617892 -0.39996355054520377 0.39501156132949972 -0.4604560336784605 0.28978511691299874 0.63566942825952433 0.34377742074052564 -0.34158868551469346 0.70948160580607877 -0.27454741734946081 0.59300086888569714;-0.6208511089031763 -0.92591459909314711 0.24754342180162742 0.2480451824143188 -0.96884012574717637 -0.42790174683901205 -1.0058085203803548 0.35383932847558763 0.92586228425446049 1.0543002972192168 0.18855814427978168 -0.50309320528917423 -0.97489709416769432 0.29163971788602472;0.893743843851179 -0.061494113586790418 0.081933230896765546 0.39318157123360981 0.32771511725225994 -0.27977779900134464 0.29415511570151404 -0.0064258445864123857 -0.49869681250360909 -0.29492442853727185 -0.55335257272122451 0.024195797763800382 0.93848101771494508 -0.10447117986916502;0.26793077409285831 -0.24629982126341496 -0.78213485997470122 -0.32254149244560326 0.83574872258404043 1.1610809796892108 -0.90662678787537299 -0.85871203441248301 0.34046736152864382 -0.54239590520591074 -0.47977294579447188 -0.48647939063331203 0.47670543963701661 0.15838336788780394;0.2724559093642423 -0.45464957132916939 0.61188315071968269 -0.59883328738997077 -0.57012286348725327 -0.28600445247930628 -1.6784952465217946 0.22810953865726022 -0.34517015933164752 0.6154838448060358 0.62575038659049087 -0.77882117284028307 -0.11969397445129204 0.33510288843463648;0.23731811532752001 -0.055251187685162767 0.27874779102700686 -0.12625046961906874 -0.32958131377569855 -0.48727248136589524 -0.71025323082077685 0.27608024855342661 0.50618449622231021 0.84186128543685756 0.20250391797343512 -0.060365278719607007 0.45511308615854884 0.15567265259431942;-0.79591270720160534 -0.71176259681833709 0.66273123337692297 0.19081203452638601 -0.37305160143698546 -0.41531563627411283 0.84442766814949211 0.74896885510984734 0.26275671233845255 0.11974813400363674 0.31974570742732095 -0.27463403288223398 -0.89558748981695557 0.075279236978719161;-0.58233879273007239 0.74892440537954974 -0.80185855842620624 0.52262953155471203 0.14694809421903043 -0.85281335564253213 0.94686962518662887 -0.47399425785632732 -0.44369011292711197 0.17349856975855099 0.24022881310889044 -0.029854400981214758 0.011130633948262849 -0.59039174836853003;-0.54003246996219478 -0.60002300068976655 0.13843891256222701 0.62101852293585025 -0.20375985145212874 0.29212266780733182 1.389612544947805 -0.22073081378122955 0.43917918888897195 -0.71388522425917333 -0.84153969677249152 -0.16875876597720513 -0.052976539988686351 0.43094361584236246;-1.3158720972909799 0.042342802378513018 -0.15310310738729163 -0.19284579439017716 1.2201337882497512 0.45472361698685432 0.10223259795995929 0.78609075600440426 1.3961731210598252 0.80878439336724062 -0.074476078271460924 1.1393503054139245 -0.43047352721561943 0.8124441328851485;-0.45805053437294546 0.20118014775627843 -0.31935932021849145 -0.38146443866263552 -0.678028370754587 -0.045229308510311414 -0.024112225617248038 0.29435461798066986 0.94083848313754559 0.81631971173570961 -0.13196546956764832 0.83151866218208481 -0.29432248492772534 0.10760538828218116;0.25402445881931857 -0.22944083264311932 -0.49210827603579999 -0.26772157088805149 0.56315018941855977 0.4353869760071204 0.77379657736654306 0.15611832271549661 0.39986447099461825 0.45637462964075215 0.34747011347195333 0.72481952931315652 0.097932462066873796 0.70928294659540925;0.1743531565166434 0.68470372782903777 0.15302468461471413 -0.33488489777456687 -0.98887021657566632 -0.12229160472697818 0.28753756772696737 0.17018279377277287 -0.095593071358793774 0.2506581718297346 -0.119937410803129 -0.61478613911959734 0.20443489203185161 0.22903890680748185;0.76127119487925565 0.43274036532994659 -0.23481064731752896 0.17931780000369904 0.51392098078827708 -0.012667216348196363 1.8283235063993091 0.14377608903357658 0.6550384747752992 -0.52572454282727443 0.26297685442754165 0.56820503536048395 -0.10178750293486258 -0.68365001574741913];

% Layer 3
b3 = -0.1862148395668991;
LW3_2 = [-1.2452689932279513 -0.85027626290294334 0.87355946079488878 0.88015292895497166 1.5298606651083864 -1.1944724145664041 1.3657355878148516 0.49787864101864915 0.81853061116333392 0.41178619404249028 1.7443414426457284 -0.38901788665694531 -1.2462810486384515 -0.77850913740801964];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 5.42005420054201;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
