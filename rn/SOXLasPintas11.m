function [Y,Xf,Af] = SOXLasPintas11(X,~,~)
%SOXLASPINTAS11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:45.
% 
% [Y] = SOXLasPintas11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1577207719145157;-0.35323746991364591;-1.0789355846985835;1.0563756613406396;0.24287164885624782;0.21426005965584966;-3.4709557902883015;1.6282089876390928;-0.97407120782174361;2.0295336653353648;3.4861046920422178];
IW1_1 = [-1.9071182712014301 0.025182985625536475 0.11343039119661386 -0.32940139791544087 1.0852727442817782 0.1556512185291869 2.0529750245663467 -0.15488967444373727 -0.19414244741141068 -0.52637697531757399 -0.73217366638447234 0.53071641975467299 3.2256745919383349;-1.9510699190668894 0.21564109166805165 0.38585098454601796 -0.26221986637746025 0.31103051318893393 -0.22117116101700399 1.3324857955621323 -0.13790113221010283 0.42499871814929785 0.2463604854956947 -1.4044910134505579 -0.14537300400553749 1.3809399959138575;0.84800689220186798 -0.32233606872041176 -0.10252651883225972 0.71290982203947018 0.6686982475146791 1.0071499112250342 -0.32866572469914102 -0.44230988271636396 0.12733990947576479 -0.080907640831501926 0.69000888612965705 -0.66635135361660758 0.44558296752726434;5.1294313184996021 0.30663384951975786 -2.2595139694866697 1.6086995454818356 2.9647899516252658 3.4383962057078752 -1.1789865458040365 1.6121826324367912 -0.45188663733571272 0.34870600099564186 0.71764073272463591 -0.84042511356416794 1.5965830705289976;1.3964793944244009 0.025500598937439375 -0.27506908601484475 -0.55273328835525604 -0.26503108032484068 0.81918380760172282 0.33813278334227648 -0.10748053939073536 -0.38437855822016892 -0.65275156067702278 -1.6769433695961897 0.40214974856955343 2.1520797195649091;0.71197186686919145 0.28547290800902847 -0.36742225340566798 -0.27096884043731206 -0.27291111838081611 0.52117076603883794 0.7120925037828465 -0.034643114108290331 0.26960705403559238 0.33192976527719276 -1.1387067919490736 0.26724865418016019 0.63047124701233703;5.7436476218360308 0.30635180015550195 0.8812346577599488 0.45684151815656315 0.58084983024888392 -2.2487670413994425 -0.42673712945056225 0.52930558235879899 0.06235612794506195 0.99714596734705996 -0.71492906016872093 -1.7158326694161692 -1.6875284572311438;0.91910015168456427 0.91969970357381525 0.86405716497770302 0.16953587845656792 0.4084828693418685 -0.74619975094966207 -0.17914267862562572 -0.39792499802899683 1.2711705069143231 0.0076428387219899252 0.52817682227561535 0.40123585163855402 -1.0596022387322985;-1.3780751616188411 -0.13982759310410797 -0.089203146965698366 0.42905972286605132 -0.53464273054124478 0.11572367976212009 0.10648995568329445 0.190046257281314 0.20177403447620862 0.69952348853022706 -0.081120951640903896 -0.23722972074524254 1.142509909847891;0.8896925258342917 -0.97038020668207214 0.063005942654792438 -1.8545963126274316 -0.97088667654957495 -1.8195955852956027 0.98059781008098057 1.5981033590510307 2.6311282179407289 -0.0059434165818615034 0.00037878937448626235 0.010663671087355595 -0.21446842726239645;1.6800951285160208 -0.47360931691480113 0.38115625420473598 0.31288384202245928 -0.59635819310886373 -2.7002536693266284 0.32244526826890701 0.77516114907416422 0.57293700218974142 1.250218895571195 0.43059290100011405 1.7150986190843178 0.1451737722407892];

% Layer 2
b2 = [-1.6780882645487452;0.30667621385952482;-1.1470844962375131;1.2343761854489081;-0.70452850659130239;-2.6700144604743441;-0.85507156363535386;-0.91894531974310167;1.9836033948426866;1.7718574085668946;1.6958731939703766];
LW2_1 = [-0.71223546639131741 0.34198996776130502 1.53714439932331 1.8857158301612751 0.042098789129089889 1.3257687018904964 -0.15423946139250372 -0.67265774450585802 -0.2730614262260832 0.16354376856410946 0.13803697010227098;-1.3260804263502814 2.3177204840270837 -0.55118677418926354 1.2002163175779719 1.7332096286657017 -1.118740590289097 0.43193931408084929 0.7031961363818835 1.4568946657131869 -0.189803051350865 -0.90700272715430708;0.44038349010220268 0.12761856418795564 0.33303829404659341 0.31306238103685913 0.17244064523852615 0.48270969434268124 -0.24482912262548362 -0.64579866726648649 0.0066001235019847622 -1.0519886500389437 -0.91866606822484465;-0.25324854214313031 -0.97403526693755038 -0.2351417421177569 -0.16239124826446608 1.3488832026357427 0.38084158260503098 0.83660501560296507 -0.20900484255922325 0.10892239019322635 0.17673665617478276 0.18440172444037445;0.049525840255813296 0.96267069085247636 -0.35795346863152017 -0.37886106453077928 -1.0995347665987449 -0.56463223017520014 0.038061666125506766 0.066968490060782995 0.98630480809879473 0.20575705363287566 -0.42307702139933501;2.8889206182775498 -2.8726474554059602 2.59445991781427 4.5974102745580891 2.4347081195558617 0.20759622428964555 -6.2977835022556015 3.4712995234470103 1.9045219899304584 -4.0691739944764613 4.0196293925798665;-1.1608245989250385 1.3502635745737475 -0.2802797668012913 1.4086385358780356 0.42938285948743998 0.083615753023397035 -0.81304623835336365 -0.079667166746145879 0.30157059599384445 -0.50399922487543325 0.29488676560170179;-0.90001203918112016 1.3053278556215453 1.0332599079531097 1.3730889899860226 1.6604753705672892 -0.38067371365313379 0.53345911951875458 0.57380866275367937 0.19280414338942461 0.41205436871422851 -1.1167299811723472;1.1918957019313283 -1.1201078056196749 -1.2089966845483013 0.70268237955394175 2.028760157949701 -0.61635992908680359 -0.29434392059128606 0.44243612543756172 0.024271308083941429 -1.0232315081810701 0.50821974272485149;1.0863401766538809 -0.7070983783832353 -0.28352240418343488 -1.1416736627876549 -0.77333790411635839 0.46836171787117531 -1.063390903193 0.40433660780163161 -0.52692370892362295 0.89970732086708205 0.9272086672793094;-0.17936518829042727 -0.79236459386589597 -0.59696931116615159 -0.47495869756371101 -0.47830471154965037 -0.05366280788321999 0.5449992119940692 -0.33538462132831037 -0.59252582877444815 -0.21590978159707649 0.79678026944385993];

% Layer 3
b3 = 0.66968839031558269;
LW3_2 = [1.0866202958664866 1.7745510649735232 0.13707974516561744 -0.20314029285269403 -0.2708216980156728 4.7843749688173363 -1.86202675606905 -1.4125721525281212 -0.27573589858283215 1.8423070708078177 1.2717267216284875];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
