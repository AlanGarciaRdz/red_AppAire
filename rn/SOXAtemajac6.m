function [Y,Xf,Af] = SOXAtemajac6(X,~,~)
%SOXATEMAJAC6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:22.
% 
% [Y] = SOXAtemajac6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-7.9516855993748559;-4.2679555138086673;-0.1657018993919068;3.5062109234846663;-1.8691007811952614;3.0054578544068744;4.1244967341765166;0.90321542049528303;0.91931788761109234;0.18251301462805547;1.0258357201126085;1.5024098085725888];
IW1_1 = [-0.36027233486898391 -0.30508512319069986 0.15203403627135839 -0.30197404634327407 0.076225171692232779 -0.282931907695253 0.33392893676296265 -7.0149461586363788 1.7655424898736336 0.24830513709824689 -0.91926004447189724 0.72027968865940073;1.7575043543205084 -0.87329088979723568 -1.5684778051486945 -0.74261118004165194 0.18457728537499546 -0.41716411439549489 -1.0418725561380773 0.42052456491472062 1.154485321769491 0.54282635065339091 -1.2433388552798719 0.25241383530732353;-0.18464378913886464 -0.7964340044228041 -0.38517060374922829 -0.22825174141367963 -0.10395500279115998 -0.16487299905834152 0.51735570524644636 0.12530842202425502 1.0891381207842359 0.082666368597388462 0.049912681509585083 0.39545703598718018;-3.6496607945687929 -0.24351869743864044 0.16232119313108537 4.1367377009669042 -0.10728260777899751 -1.3223044571673839 1.2723503138166059 -0.96545312602219691 2.2617637582055474 0.10745963625218027 -0.27693446556150492 0.91365575924989462;-0.1986622347257351 -3.4970898572327069 -0.89598687851451708 -0.069180262534035392 -0.56880911262298006 0.15992662839531169 0.041076937153196685 0.7244832126307621 -0.1208785137690909 0.091458676999460836 -0.075082285689098804 1.3766102375687792;1.6258937792357804 0.13086004382695585 0.89172767014182974 0.83367429744531041 -0.086593244177281967 0.039907033661644387 0.76222853785075007 -0.99609936495832785 0.63964336602838723 0.29979108686850459 0.091284311419435216 1.2302613364255073;1.7836821260407787 2.640803075254841 -0.39036155978304232 0.21969826135048295 -0.26674305724855873 -0.26452317226723532 0.80369092464499703 0.80803180766645 -0.78350232196173042 -0.45659991069177513 0.9318209642380435 0.080181284172175724;-0.2682282942274874 0.69849684769571363 0.27216874954612308 0.085985638797788519 0.24906898556551874 -0.37888773680774718 -0.32585945539294553 1.0838762037404313 -0.97271261186364355 -0.10632331593789827 0.15346970225644316 -0.67371505051200786;-0.34616622875732544 -0.18422207181918984 0.37228090750630211 1.3180050017252001 0.66850313815797857 -0.18604542144170305 0.33762377160324814 -0.75945845153246094 1.3228743621939576 0.39599592092725883 -0.80992436177769866 1.0047977625148055;0.80272211734786136 0.049134327516312318 0.40590550706978484 -0.16189768185405129 -0.60438311892085117 0.31773009949816489 -0.14356309796183245 -0.13449160320236164 -1.1788266702339165 -0.13202906863158101 0.77350552987437959 -0.4556594108808325;-1.4948465596325955 0.45758268570651062 -0.64812522043385412 1.3669073584891185 -0.27907624704139511 -0.23116719903617822 0.98399687026591487 -0.13014659775521295 -0.17191864821557146 -1.2642167520779906 0.68656862112303552 -2.4645201445907889;0.36337081751158645 1.9353447158416008 0.37178057262325936 -0.088787994760519878 -0.13239086672394754 0.10988647298399339 0.16765790085345691 -0.59636761039284858 0.32130953718488459 0.035397694919860494 0.22346666614205798 0.036625822508352418];

% Layer 2
b2 = [0.45432673128438555;-3.6209000033030727;0.78471873785055157;-2.1606352486885445;0.61457716869504875;-0.37919403559896292;-1.9640838611266234;-3.2347912374497239;0.40605986729009713;-0.72825675448290894;-1.6618821692886501;0.79711196368315207];
LW2_1 = [-1.0530907763860298 -0.14658198600773778 0.64140612696250721 0.16730757219978035 -0.9692262229114077 0.90618338387994468 -0.21812359670005899 0.30797954544713446 0.88158881890831553 -0.62912363441179331 0.035070322962602221 -0.76688154656063912;1.4190589870972712 -0.28798724626328281 3.0252582714903551 -0.1848516005843891 1.0612369477872878 -0.23903525242873647 -0.18657524174609738 -0.58204132941345399 -0.58315187480572828 2.4674743776094865 -0.43428290879098086 -1.5555337807197869;0.10125182684330725 -0.35133698721034101 1.8078846038472192 0.88285293776355123 -1.409551677104339 1.7714598495660361 -0.18327657558602359 2.9704234587958029 2.0840139068216934 3.1863961578194888 0.14284110764927829 -1.2714050132472843;-0.33947957457877698 1.7277317763913751 -1.4727639028154813 -0.80732102118303284 4.5644528506297588 -2.8125705562562513 0.44890159763038151 2.7069869680723952 1.9035819258378261 1.2879761747143073 1.6514108466124027 4.3128970156022532;0.61668222070539613 -0.45750024839463721 -0.19831596450826783 -0.98481615218400087 -0.52740281751800533 1.278737232760933 1.2088842009180369 -0.42367852570286502 -0.28241512880877745 -0.99409711979766802 0.027079666542788108 -0.80736416669109023;0.31692801447432728 -0.47817777423759217 0.28446123348242958 0.019758510341026353 0.76271260730217938 0.47791483830225256 1.048016758646457 -0.50184133226395855 0.55484395893165284 -0.60756386335321 0.17217347786830844 -0.2387150388842342;-0.84227148983202615 0.47271609171163137 -0.027418560520575744 0.012220712009854539 0.62342183890724967 -0.68030370903673798 -0.27901482178104109 0.58168122156137669 -0.48730588047856138 0.37639810000466667 1.2414471556588438 1.1172213504810382;-1.4444395457804342 0.093185397469602013 2.5344561526946943 -0.45573387740531085 0.00093141257999119521 0.52703097990723768 -1.8090420567402117 0.27703022246289416 1.0412843402616561 2.3775291002232883 0.50048473993677955 -1.1462753277721289;-0.2837625231759448 -0.44452849815982454 1.3988226350560811 0.86133477301446548 -1.1232655701748231 1.4640571779810476 0.15237380451576801 2.2327727657825878 1.7569808953300059 2.5237267475007021 -0.050320530425865956 -1.4082884806438807;-0.57590183418039742 0.36654474389557512 0.25529272666194841 1.4174450042966058 0.81919461943160377 -1.3400026010306771 -1.1330101766018208 0.53095393133741242 0.10947930183783466 0.80305986928655604 -0.50614797532393208 1.252886125907877;-0.32905829725876801 0.23943200332629244 -4.0509453016691239 -1.7036203519213322 0.10063733549621733 -1.6906405813013785 -2.030140378738325 0.92772342194124846 0.05397914618628144 -2.2008489367418989 1.3674528739545559 -0.16037328302664791;1.6746630683050108 0.30412936491334636 -0.12915318634923234 0.66477676149888576 -0.78792445157494351 -0.32795505414117415 1.2194716389858715 -0.056145173588475768 -0.75461455682015544 -0.92165038659580589 1.0488104607667952 -0.15267773643647706];

% Layer 3
b3 = -0.86712781822166463;
LW3_2 = [1.5072752664134619 0.46884129958916365 2.291918670300757 0.47680723434496436 -2.0346444433503574 0.43850132555880472 0.80719389854421963 -0.97555520048221955 -2.7811469527821231 -1.8953732368354703 -0.37355265372751939 -0.89324602526438723];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
