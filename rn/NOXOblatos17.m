function [Y,Xf,Af] = NOXOblatos17(X,~,~)
%NOXOBLATOS17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:34.
% 
% [Y] = NOXOblatos17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;-10;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;4.05679513184584;0.195790504160548;0.00618238021638331;117.647058823529;0.141843971631206];
x1_step1_ymin = -1;

% Layer 1
b1 = [5.6520699624037025;-2.3914532099585148;1.2509550604465907;-2.2243674347112439;1.6218693195392508;-0.25172566140984692;-0.86363132854439018;0.64445875804285568;-1.0188378287016042;0.43755432555554546;1.0941517861939247;-0.20159645945018925;1.532737107547762;2.6523660659443471;-1.90720537515948];
IW1_1 = [-0.88535246588032135 -0.36686465077510633 1.8360742458111785 0.64797116521155884 -0.56328261774752908 1.1258450038781267 1.9986208458628687 0.84541768496609637;0.29997194304426955 -3.6531859944223202 -1.4157068913327948 -3.1396123764218697 0.079309546491810518 0.15772157922123384 0.22426952391146873 0.27928519938920937;-3.9453375216519482 0.82524243626687954 -0.31783042175693255 -0.3612480288702844 -0.00434435254581058 -0.35011118887930004 -0.72508956681212844 -1.0064044251833528;3.609904971027722 -0.15696159987198152 1.4183409948489702 0.18768818247468952 -0.80501046711730839 -0.55070371719097411 1.0975819122179342 -1.1467372047001037;-2.2546767071877212 -1.0267826448254997 1.2726647204621169 0.40042174350991072 1.1519205176931668 -0.37902406223440699 2.2507591564344436 1.3162999368796235;0.69210428596317497 1.6663717287801811 0.39639722150246431 -1.6916929670404954 -0.62334212017835777 -0.87431727774316415 0.55374330777427305 0.098950204818652368;-0.40706085840044798 -4.5146300479791872 -1.8240511325566839 1.7015786351604842 2.2808980200741895 0.10170049636951231 -0.43934865361386033 -0.46499899893855184;1.7256083501635386 0.76636244300249134 -1.5655002543155143 -1.9785623423432679 -0.28153888534724125 0.85903142696820423 -1.0773706856106273 0.58950602050238621;2.3881706568399146 -0.023544221300280225 -1.6745559425030725 1.5207249449135822 -0.31106221580362381 0.78169983338882754 0.46357060890815066 0.24250969140189688;2.234671092831797 0.27657010453583292 -1.873902008810062 -0.49069360507857407 1.3648370623879722 0.18267767537056473 0.24506319504632484 -1.1173211885716907;1.7708989273104716 0.3073875074744824 0.68353766491541834 0.3271298995077847 0.83140329382085265 0.072248958617900386 0.22129196735693071 -0.24498179793584826;-0.035880923745480499 1.9191062159500487 -0.48243531142032403 -0.28916905294595702 0.49292728524642354 0.23827450894083241 -0.023744388369930737 0.28546760100523938;0.0015389399041659084 -0.60224707466995842 -1.1994483082770588 0.68965887973298556 0.45081706556129553 -0.37788613308112634 -1.4980133320984541 0.21206465654133208;0.57724450957919482 1.9191292285579509 0.7277919034903475 -0.36440654489997221 1.2830852444596401 0.13734332799229387 1.2156172296111596 0.44476231806087796;-0.77843305454700751 1.9864639454521404 0.78128376469626271 -0.47829785073851339 -0.97048748943454333 -1.2242298236779843 -0.68248499789750472 -0.23044215786738492];

% Layer 2
b2 = [1.1951818474256071;-1.9624464840836608;1.5506590487266743;-1.2520584048599495;0.82245181913344712;-0.44424038718884373;0.2337176686303111;0.69000848356474409;-0.48582955237354475;-1.0976900168736596;-0.98889484798452953;1.6191412299377856;1.2843338254306063;-2.3191413135845083;1.5189950945536128];
LW2_1 = [-0.20139204428954405 1.0718037251220245 0.079407279458087399 1.4374634147083831 0.86193886628109417 -1.1712734339249948 1.609446603059447 -0.57854457738918985 -0.7558184227971767 -0.29106607438959514 1.1971231829693603 -1.1906145991476469 -0.59130135377257498 1.2986912750398956 0.32814930163302902;0.70119739072560583 0.97859694430354716 -0.96679069820977692 1.8821082163099681 -0.77024194302929183 0.42282467850720834 0.51024097164841353 -0.80102031699688658 -1.4553926799454824 2.214416210434639 -1.4880638798220294 0.12444647125841939 0.18840979616204034 1.3397027386033178 1.1630955273795542;0.69162064021086633 -2.2769084416174525 -0.19487284060831467 1.1552870525043286 0.42874164155959293 0.38597484076047056 1.2552589564485688 0.44113643955418247 -1.8875853018887105 1.0039305894890242 1.3256869342188145 0.84332708955759228 1.0656387637280984 -1.726312047900523 0.94319288847673455;0.11037900036294927 -0.48401723223071902 -0.26543045679815558 -0.55740986074200971 0.052880837407009919 0.62082379552896061 -0.95898740567790552 0.54830415440396219 0.45805089800392118 -0.059710223244829164 0.17008515241868738 0.12098826313551876 -0.094377656469161519 0.28553362936300763 0.30390289764534822;0.22823332789540776 -0.98825381009850333 -0.980598789259298 -0.52560966012277244 -0.40007613745314635 0.22977263168945561 -1.1482022209841194 -0.41752077309805335 -1.2572574988787737 1.2709315139306234 -1.4491455910853761 0.15764774870230783 -0.0055058615206777829 -0.71097897556909295 -0.6773110003677757;-0.56631585041759358 0.064674968645031153 -0.23850578922965565 0.050158922764947413 0.47984239413916591 0.15370445926169013 0.72376606658506137 -0.74205685147371425 -0.28497968524661277 -0.20212991550970294 0.79328577611532258 0.14462650650004163 -0.28680030504869425 -0.92741860070049253 -0.59688462201909598;-0.1118565992363162 1.0014807095945775 -0.17687317032672439 -0.17150311279394131 0.25541728724840435 0.26472362717538439 0.10333720608777307 0.55453773106011495 0.0014565708513705616 0.48315606164986274 0.7794540062599753 1.2425060728383497 -0.25048433969564432 0.79942188736974451 1.2063578409109292;0.18872918075255329 -1.5347488451790892 -0.61385928529338707 -0.36732442059175868 -0.41095568101186197 0.22060479134325245 -1.1012049242529802 0.59730828341636699 0.2108098814359857 0.27824023950448434 -1.304220138637419 -0.14983872114604257 1.2570466180687561 0.57637390026811486 -0.50069075225064097;-0.030292262560135289 1.282496868089734 -0.15105402050240929 -0.91076025884381928 -0.48914266450140875 0.70001557388705793 -2.0658997178791161 1.0245524125718721 0.022090784520410023 0.60166064518454643 0.1732774878064009 -0.14572252500932997 -0.47380715366001164 0.27122339916377375 -0.4254252933780846;-4.0388684260777854 0.80147231183083001 -2.9545693662583803 1.7654015863357695 -1.1467611986402715 -0.87304891602350965 1.9134963415183759 -0.49940341158719159 3.8166572970287791 -0.97665270351310562 -0.48680678207758088 1.84092746652906 -0.73295168470603955 0.70229620790613734 1.7272913008612156;-0.20826343667934166 0.3379571085166545 -0.072873465597789233 -0.62526890378634969 0.12944105535635239 0.12549352252852053 0.012192879863554405 -0.34115714286970111 1.392171988952053 -0.33490209663041692 -1.1746432464997214 -1.9148196097047272 -0.90259730842843178 -0.035303296199997197 -0.76232066735274495;-0.42843986184270461 -0.65186983805099019 -0.24624395846264013 0.65838431334620551 0.031265127964150374 0.40967326224354672 -0.57405933580101332 0.28621085030522109 1.6961400867033298 0.66690379734005845 0.210773258584285 -0.090769738650418819 1.0683692822741577 -0.70709508067575333 0.16163888276640576;0.50148306796670905 -0.047793527174524369 -0.85188682398221727 0.24143995725970419 -0.59980348560679775 0.57090057175533893 -0.12803720364074142 -0.70329824575841149 -0.19267420093914925 -0.43520252180668872 -1.2843570297401004 -0.77989113349849892 -0.92724671000295933 0.85081261601251412 0.59452751943061299;0.27434793612980896 -0.96075468632625816 0.051712528971051788 -0.050464225096810728 0.71904424821402246 -1.0867884931709451 1.6482816735485204 -0.19014943699204545 0.0073429519476467288 -0.16515971336187724 -0.54158980348489583 -0.47910281208575739 -0.8742057870710046 1.2472102185034082 1.3981503988567201;-0.11747097485892732 0.65683778893774691 0.17401533472152939 0.42811816539645997 -0.65747857636935547 0.45760388404182706 1.2746420375087626 -0.68260233963598882 -0.65443524432313294 -0.69767095017446967 -0.40225829220038722 -0.38525860967796965 -0.35185385303939737 -0.16518096613663769 -0.41469233334684413];

% Layer 3
b3 = -0.75175506582710849;
LW3_2 = [-1.0179904890026246 0.4721198304781663 -1.1590494029533365 1.1079544789998024 -1.685841041810302 1.9893711608661986 -1.2912043522415391 2.1369534925627542 -0.65863587531229029 -0.51168550226528231 -1.5493154894715169 -1.0887757235193543 -0.53777470533662919 -1.8335722304024207 0.49125530681112412];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
