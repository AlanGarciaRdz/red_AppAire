function [Y,Xf,Af] = O3centro3(X,~,~)
%O3CENTRO3 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:37.
% 
% [Y] = O3centro3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.1210400162338421;-3.4554423457620924;0.081344505221538743;-1.2903565410530431;1.209962257505091;0.79958478270972;0.91709185293349016;0.14536285460186188;-1.5305969606944561;-1.2898949654363159;1.8633327579146939;1.8284781628520814;-1.5547180023388087;1.8972307433109548;-2.1938178400756239];
  IW1_1 = [0.12095754682495063 -1.2314244346257817 0.53328235636463284 -1.4289603114633154 0.1570107108033531 1.8846313265752939;1.2730754067124335 -2.3034704639117209 -1.3593944150177539 -0.22670576110157437 0.26618322652602999 -0.29394154948980411;-0.6999863142686733 1.0894794176202032 -0.99209885734208081 0.38944107427466912 -0.26530426491708442 1.2616270177768913;0.019507916827537858 0.693688928874446 0.38114613120631902 1.1972008043436093 0.40579312405336193 1.530718119115736;-1.9221833693167434 -0.34693001899050641 0.42236493188983315 0.32160571012954819 -0.052830563000081279 1.0828654666298845;-0.25925276180462187 1.9256719091268899 1.2857323331508712 -0.11981532372761855 -0.31233619095597859 -0.91280319710774371;-0.77193575899279965 2.3210338923234382 -1.0062416099973008 0.58217687980363009 -1.3533218949142918 -0.70846760492147753;-4.0753303121160203 0.098161645101606174 0.48084255896563366 -1.7965038019316115 0.35687945527856457 0.93531199589053282;-2.8255619233524034 -1.5814664639574978 -0.24639812505783318 0.61010625118956385 0.056730536972336237 0.26889621245004264;-2.3479039096834677 -0.00086945199749712855 -0.30691378436158157 0.28621358066288483 -0.25455862939487262 -0.15777918769282978;0.5223690114852203 -1.2449741203351428 0.68275960893218546 -0.21970544243204909 0.23265908457921106 0.66756305002318317;1.8331549840655323 1.1792676678346166 1.6569900671542273 0.57159855667267367 0.12836184043706622 1.0922047342904306;-0.78083531355750868 0.58093131888447669 1.28942328512814 -2.1641900029248973 0.63723088205056411 1.4531486036464614;0.33675898366796636 1.1282339470662071 0.657452414381267 -0.75790529169666543 -0.64437657772640422 -1.0859661183808196;0.46213977860862737 -1.277432138223868 0.67382684544937821 -0.7131770319377696 0.53212485811497212 -1.4369175453733154];
  
  % Layer 2
  b2 = [-1.9957896982111909;1.645908951333797;1.568757366043779;1.0247334007254403;-0.36354808353102391;0.58201365196255472;-0.25087260175149217;-0.32813992136949266;0.3397061895505421;0.89038058461938285;-0.76737034105615243;0.047187791514072222;1.4596773258715383;1.3630678121157689;1.6014323312331751];
  LW2_1 = [0.74006002479524324 0.34549757284890437 0.25024287576720533 0.38661091473995229 2.4910853987870607 1.1770257355301097 -0.16210236686339985 0.54223098584515972 0.060128546416023089 -0.77172155805195197 0.028644424790718506 0.37460674498499186 0.072546987329653381 -0.10867918415078531 0.29632770926663016;0.56868576016982531 -0.65557805612237297 1.1775838086881509 -0.33688526264125263 -1.8946950526541892 0.18060795347303735 -0.18406729267707339 0.046249187650551471 1.1882764999511082 1.9419346638589143 1.1101290408196163 0.43565394163113569 -0.39281192705133139 0.23027573558945838 1.068943384023747;-0.21573238072761236 0.23612679344977594 0.4237163860594973 -0.062070656248038591 1.7630448771904712 0.80697479702115293 -0.62706031483416413 -1.2760199590872416 1.0839026522997754 0.47098543537210569 -0.031634463876919885 -0.28032672072328901 -0.54936061054776197 -0.22821200874670916 -0.68298894915942487;0.12913920161347808 -1.3931981284592545 -0.032819477969905808 -0.28414156650988426 -0.65735024461005975 -0.22981495726611978 -0.37625284539452963 1.2623471368283896 0.560539785057666 0.36632602509551504 -0.29508269454289732 -1.2788572654792389 -0.39705379632525367 0.18971560244527536 0.098749832274377627;0.075927326565920855 -0.5491087629539565 0.26912321360444269 0.012733191016201531 -0.10747592707708126 -0.063926814954316208 0.69875434059098451 -1.4887006699094947 -0.49659262407259169 1.6012913241800941 0.53401859043889954 0.51796873656959441 0.25357755503624713 -0.024747245845238838 1.1923592970670767;0.061744557070656493 -1.3699446909890722 0.89272443016369407 0.93478659393715502 -0.92980745616534644 -1.2927260766504571 0.17765938685662483 -0.56036036108892173 -0.52310795078620687 0.57177926947154434 -0.29272903372746711 -0.93174935002376114 0.61659889533031276 0.64420825858838837 0.85444405382204636;-0.51238188876883684 -0.42463790135643453 1.3027059748091565 1.1431123121641176 -1.2374825290154712 0.93662255315528653 1.2241322386213351 0.92782553213896035 -0.4620682457459917 -0.8753972037055292 0.48946248572932566 0.55526430979612984 0.77287155936210439 -0.20767311191757176 -0.26379830424131401;-1.0706892089933209 0.8332681706575561 -0.77919312526097928 0.13629143574246771 1.0073227684538402 1.090132623110271 -0.5432210428044888 0.46490349218364624 0.42859595664915917 -0.60708676784757987 0.59735635768023176 0.68016394186416074 0.098643836162557064 -0.31388426860429947 -1.0442716319909326;1.0331851002742789 -1.1111514709760411 0.56287683736647842 0.6777384692505608 0.16214928277653939 -0.83248754428357985 -0.60160262575846701 -1.2305031392529961 -0.55884614619625039 0.45339499512679882 0.31107275099370685 -0.58814275680864181 0.81052552952508361 -0.059206153572347875 -0.45295599363635569;0.36817251162216147 -0.13518512500441465 0.29062646852499324 -0.23827269935790962 2.738118970788189 0.94677924472490216 -0.36578864841856329 -1.6779257756116617 0.055944532780717482 0.36145086346299649 -0.37231021607983461 -1.0236356724460329 -0.46826669236913171 0.69161216357354838 -0.050201697986136946;-0.84560997055722154 -1.5067903506292373 0.18329206137999449 -0.44040861379591684 -1.3564709947392659 -0.10161538434766217 -0.16015304941877503 0.067342330716157639 -0.64449849204739895 -0.7717976289808266 0.3498487807491325 -0.33367098684680979 1.31103087909586 0.22932260048225922 -0.5923137006224225;-0.29191962785573378 -0.93123002845587577 -0.29549852008405753 0.34915293335940212 -0.16250298900082144 -0.90732339815401175 0.32845048472602523 0.23045948843395053 -0.41899902391558741 -0.89105559496118225 -0.58302747848791137 0.37788788040741828 -0.57855296422212465 -0.44232698537059889 -0.11454488150937384;0.063880859976982632 -0.44418348418216602 0.53192122013027088 -0.10080251017675854 -0.37536775979713394 -0.60754841002750171 0.84412508031034039 -0.31335452750169146 -0.78555636055912326 -0.19506594271457706 0.12487606652228453 -0.23867797494191745 0.15165522438807938 0.49841533280340494 -0.80924931106275411;0.97598975082024308 -1.2322028561562792 0.26829426198053452 0.73187987390512799 -1.0520544945561439 -1.0569123435650647 0.204757561222351 0.12382961305898864 0.43012090218900101 -0.69788030581044147 -0.026484176517411209 0.0042565188620563021 -0.47956417244268212 -0.42218147439053477 0.078158619350935973;1.2848434538434725 0.2467074431073577 0.20681199029860439 -0.52593234316855275 1.2528441061522666 0.050413449498443133 -0.53805087543013408 0.17355208055853677 0.04692126408355602 -0.38856216651805769 0.34200100132421535 -0.33138263658272582 -0.32909897012909828 -0.082107845059452955 -0.14345359434568677];
  
  % Layer 3
  b3 = -1.1920757330836673;
  LW3_2 = [1.3090586319899347 -0.5084127093293862 1.3798114842799958 0.90760061022277227 0.99979526195218293 -1.5083244626440648 0.30929797388518471 -1.5704681112806405 -0.87279391179550259 -1.465064537743731 0.73408217515955931 -1.3900876692983091 0.73441304760740655 1.6563195039399015 1.5329289547651255];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
