function [Y,Xf,Af] = COLomaDorada14(X,~,~)
%COLOMADORADA14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:38.
% 
% [Y] = COLomaDorada14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.290275761973875;17.6991150442478;0.00572573718866304;0.0175284837861525;0.0546448087431694];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.0979572504134274;-1.7803606019878098;-3.5268174760192608;0.53828138623054544;1.3144262076563311;3.0497322673393192;0.85859871430984402;-1.0791808839355854;-0.83534485101400691;-0.81570569469362109;-1.757509762013636;0.51699644087258645;-1.1126537432648411;-2.4623575952223304;1.4807148213897185];
IW1_1 = [-0.91931707439226007 0.091457682929049572 0.98637002428674891 0.033943273926515319 1.3211894172807122 0.92660309478636671 0.0044920680985020712;2.3705435572330518 -1.5342484921953454 0.53835381556882977 0.55256062556120611 0.83446312868870298 -0.16278303989648804 -1.6215678618913592;1.6529503118574509 0.79764858914733505 -0.96782440072822562 0.5504814657308551 -2.7323014002806194 -1.3878793312907944 -0.99294942781768858;0.033012004476866086 -1.255113583354253 -0.2133612743386688 0.17553622938393224 0.37732507007481897 -0.69035363602025979 0.51247397569800834;0.80335147912236671 0.3961270406617326 -1.3102795218398713 -1.8172871955294412 0.099527034794593724 1.9885445964256985 -0.7039327387111759;0.11437710612462222 -5.2263719980558854 -0.12101834807413202 -0.23785441766851245 0.52184562591206807 0.086041882138918238 0.067290377112949579;2.7466985114523492 0.55095841562471015 -0.6439067114522915 0.28428742320636996 0.096864577484682385 -0.070195598528639519 -0.093587533211561394;0.65259764691135125 -1.3213713894508474 0.072892756539373674 -0.46724545223135838 -0.4568217895895057 0.60358627466743542 0.2920643452714663;-0.099774549866482098 -2.8460657195001304 -0.21115909669569308 -0.5081896697097209 -0.11639987821983541 -0.02001668991817411 0.30722791196924321;-0.80200285599135912 1.1349312192542225 -0.27587975758162037 -0.25478884151283215 -0.34442958249628391 0.66228848428609532 -1.1725303273388041;-0.97803599946815889 0.13296723927956733 -0.052218599909511991 1.2226917992393513 0.60906311492860021 -2.2463131979599198 -1.6454379603427849;0.030554121195375091 -0.97438748670617603 0.035301452273986796 0.28986378930207463 -1.369412055809061 1.3998361424177292 -0.11358035166062697;-1.4151296105616777 -0.80172510790484597 0.046005799258687259 0.047303272446276849 0.12668497906611367 0.30495358181794396 -0.50269591315368733;-3.1248627313831618 -0.35940450018390918 -1.001814414730825 -1.4510983301906772 0.58106501078097061 -0.4483700034006764 0.44493459122866402;1.2394436107370297 -0.077978357609421844 -0.046431453055639414 -0.39270138473263938 -1.3229404577449044 -1.0023416945204306 1.0962604143240375];

% Layer 2
b2 = [-0.72736188066650431;1.6429619272677536;-1.1816227975438989;1.2043164703636007;-1.0662958539072165;0.34128706675142412;-0.52994763549745527;0.13938043157050753;1.4503275195798346;-0.82146336409558351;0.80330629940884746;-0.99326591715717127;1.3726154669966579;1.5065513859387605;-2.6689428033825724];
LW2_1 = [1.7170690950664589 0.78681089169969209 1.3436888102379074 -1.2020993129822735 1.1818792210622813 -0.5667269731144009 1.1164336415758656 -0.84292339414850825 1.6717490834081912 0.10319272709323826 -0.10831656659837006 -0.51801590418025012 0.48257421217659602 -0.1124848728206681 1.2642169915797976;-0.11003219274576279 0.81076519396067681 0.05749160730910384 0.67371903972303193 0.33856234837950244 -0.14378045820956037 -0.1125335215453295 0.32954126761000047 -0.33081857120192676 0.23962836159117645 1.2961880329193156 -0.26760550911536618 -1.059947937580302 0.12163177033896977 -0.63596448339717049;1.187999948445758 -0.54136796195059045 0.21254301668213074 -1.6252275903394868 0.35636841004047154 0.08330982795999603 1.3395601918133775 -1.1619226861776566 0.70942878789461383 -0.99479136817658487 -0.032776298191540765 -0.48793920347905484 -0.29711501430862258 1.1985833167740707 0.2564054404706681;-0.69690164823949818 1.2229136863137264 -0.49850123526153112 -0.94209050591882371 -0.56193435479901943 0.57533771164997682 0.4043635330509911 -0.25900383161082019 0.093387503752900655 -0.74549798178308146 -0.085160568987328669 -0.25923265438984855 -0.058381263970198639 0.38568469042952969 0.8372832692349369;-0.035754233364747104 0.64723295573124418 -0.1275511930811099 1.4152577259861505 -1.3953853298090624 -0.85914293661923291 -0.78938380089637927 -1.5544285797789428 1.7191537273936877 1.7998667511412691 -0.74289755772732946 -0.13174364574268144 -1.1802614038716499 -0.4410276146148156 -1.1465812875700447;0.68502791480033065 0.087748839129403733 0.8587836961044798 -2.2658881366273604 -0.042901361685385143 0.34235385637857535 1.8043624384603896 -1.325283202824636 1.1559990979204564 -1.5677629905849879 0.054908573527586824 -0.4223465943485506 -0.14831835345823757 1.2402473663865909 0.54439676821552641;0.79904778669305532 -0.38711951554021967 0.20273263008071823 -0.76496974165810816 -0.27673385765353298 -0.26372442296617443 2.5559094391844246 0.13346384894163205 0.45585787484744911 -0.049645230066492858 0.61265946689156281 0.53705806252862398 1.1436459651541129 1.5295473133692217 -1.321256736694024;-0.4961580915296645 0.0002645651157439019 0.13806323999193282 -0.34428392889277687 -0.06065165818225491 -0.04387908974859249 -0.51707460069818212 0.10018586453643032 -0.011240160012526403 -0.55338145904771685 -0.57393711632438627 -0.37993531701547684 -1.1106812711774117 0.37633485732729988 -0.67382937525977904;-0.51154009902487396 0.97825558103866495 -0.15476430357554 0.39327617424346067 -0.74863073426563853 0.77362355447577213 0.073861982998336823 0.31570335960900969 -0.54772169600987719 0.051448625893244428 0.29334204430431265 0.4860867559925528 -0.12401850818381244 0.34786157983284594 0.21404130667353552;-0.39247755483132546 -0.40410492858701186 -0.71881132756674293 -0.30122850481195718 0.18468454100545201 0.1470315420336428 -0.019659068987289606 -0.24971369992237274 0.1569381458775575 -0.29926124080245747 0.96544650658755937 -0.56229467921289089 -0.52616865626304532 -0.14029357708776555 0.38050631057997447;0.16402901226130293 0.057357122155037792 0.33522034619470337 0.23363557593091627 0.94369556876172567 -0.30725568656250851 1.020357050737386 0.18282247743052288 0.012882574363682989 -0.84714424996842286 -0.3409790664059193 0.10479501330907093 -0.48732409439633839 -0.014985389813439966 0.40841043094582236;0.31475747681894617 0.20510168484918423 -0.64705651953486865 -1.0087409795169133 -0.2091949281207639 0.10137084027885081 -0.24427833482904943 -0.51773663225640443 0.38314352315667399 -0.8832279772338818 -0.74444536909079317 -0.90057004267296603 -1.1948997082113899 0.47612404710436368 0.95276173601011915;0.060130445044268413 0.6104951901171628 -1.1645053938448173 0.6344973320596452 0.046371128403824985 0.79222082858848109 0.8895339130177905 -1.7138578092159218 -0.47882676872419688 -1.372159276408186 -0.64106565240132141 0.046692345571789133 -0.40240158469380216 -1.2512775746617701 0.48676825643154592;0.3870360533633822 0.38292329324071489 -1.553366156942785 1.5418229414395335 0.51347499763090065 -0.37131884372840301 0.48194506279411886 -1.1190089770066105 0.56729306545365288 -0.16454510992511401 -0.054116388116623754 0.18051794783829608 0.22155175021263041 -0.0029447178158715261 0.61151270348769127;-0.38032427470141777 -1.7397103530099267 -0.099864031761602981 -0.35565669007178907 -0.61305977546816015 0.47260040942433312 -0.2660286929044498 0.12647473893036473 0.8306433624156907 -0.45502605735218227 -0.93744425144603094 -0.61300983493084849 -1.621729580412802 0.27548327239914439 -0.34988785286366658];

% Layer 3
b3 = -0.91577651962813567;
LW3_2 = [-0.48760734761325425 1.2927466494218776 1.3161961052147826 2.4336217481678855 1.8923796174300671 -1.1859848594667795 -2.0362853883492282 -1.4280385973682155 -1.8552306679148742 -1.6149011134656341 0.55607687257571337 -1.1635244564678862 -0.94977006301147759 0.71413506007207794 0.78549403754635927];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
