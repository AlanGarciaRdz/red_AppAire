function [Y,Xf,Af] = SOXOblatos24(X,~,~)
%SOXOBLATOS24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:43.
% 
% [Y] = SOXOblatos24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [4.6881707955616019;-4.1723676151390485;1.3284033386358229;2.8261306782044819;3.590110135423219;-0.12901190250182326;2.6085894921789929;-4.4656885162242315;3.4131231704109162;1.2382455458912704];
IW1_1 = [-1.1127614356376974 0.086454884456682229 -0.23992390618433487 -0.5795247384456188 5.3682834887189514 0.68164376246869374 -0.97106853670596516 0.55885270944026488 -0.24756095272962755 -0.29027403078867781 -0.3008351093234955;2.4641614975657102 1.596575618406495 -0.93716803123236969 3.6165350771512519 -1.2808526120648966 4.1467265658252916 -0.66300374440246324 1.4345462595336185 0.4311327164575004 0.66250210571823687 -3.7079231865354942;-1.9186717441426302 0.13113063078648618 1.0373385599931475 -0.17511087921854238 -1.5532354992505977 2.1629001005788222 0.59269034745784788 2.4614580786374263 -0.013714630909590204 -0.2734889556234385 0.42469651799803526;-4.3521591416813408 1.1320106912700172 -0.67437776080988732 0.20550550672468848 4.4684206142069449 -1.2891804471384514 -1.0080896724770865 -5.0659392316901783 -0.94846131675704604 -0.30940487469004646 -7.6984808708371526;1.0068432910360674 -0.16596955233460242 2.6702293351401254 1.2819154827800545 -0.81830956616183237 -1.1347494612744793 0.92129196513118461 -0.017656804742500268 0.26150223618607621 0.047590793747970969 -0.55066349720360352;1.8507642764170384 0.00023640404194980036 -1.4690091031053218 -0.35483363587439398 -0.32973786919183057 -0.25271034094238776 0.52653232347524315 0.60339602255212932 -0.20807670190703695 -0.1691911449833208 0.025701850839238621;2.9816438362364366 0.24682318785204671 2.6768504923428136 1.3346262070301687 -0.29558334273340098 1.0385800823148674 0.83237519795964865 -0.52972664994731522 0.29884732994015439 0.16712285122362078 -0.34143198846705647;-1.83197005555366 0.16548147961994605 0.56908773967647652 -0.89801675866076791 0.3695377299250211 -0.013330606656648578 -1.5066027578740981 -0.33180284465118393 -0.07249429303601862 0.30767798247158951 1.0201356144033735;3.102385373763819 -1.7616469331291404 6.2258939628256522 -1.094931701445168 0.12498976306403047 1.2424061925001091 -0.27642258534193881 2.2341489208890701 0.77111023531333478 0.69846158491164145 2.725862563080411;-2.5213946389767194 -0.051525097618596659 0.83560253112221528 1.6068775962000734 -0.70194519016769663 -0.61262308389723052 2.632467770825166 0.44336724637979258 0.6463768544360079 0.58660927050191081 -2.907414503746899];

% Layer 2
b2 = [1.412218976257569;0.65433166355184436;-2.0326878892607376;3.7933360582347997;-1.7763990968906227;-2.5293175130239467;0.10279983216254387;3.7160168296396536;-1.3051137394782943;-2.8940204107883751];
LW2_1 = [1.581428357709588 0.067188006199528194 -0.052128982071824773 -1.5417792594301534 -0.068246091196554573 2.6381016378388429 3.8282029047129433 -1.1868183860955155 1.1724694805890705 -0.37112194128008325;0.14956187326792292 -0.41997603829297941 -0.51490739541097708 -0.94908047805426876 0.25560794573061879 0.84649847950288071 -1.0993022802864474 0.81108907965973398 -0.19316176568687052 0.59328187575998392;-1.6718581633707628 -1.7133966516370889 1.0895348340730733 -5.8221537757310831 -1.4089250642896411 0.26463275926059121 -3.9602978440413241 0.24126598645110531 -5.1765731988768779 1.3224063242505526;1.6394489828920755 1.6027720157610659 -1.0593424745752753 -0.93649731191779972 1.3825350202167555 -0.23303186963373432 3.8757058687058872 -4.740683704982489 4.7762900188084334 -1.307835644310297;0.19128680986298729 0.24773847408815047 -0.041393480084185051 1.2705138660297588 -0.1933899142295912 -0.18482845209626381 -3.1864238580316231 3.2805480040554476 0.65417521213945717 0.084765527627913645;-0.28833088047785571 2.9623769013176902 1.073122155836026 0.33230257189573026 1.0898291256521935 -2.474649516938455 0.13412840133802745 2.360324239690724 0.14264334590307959 -0.7058487852671147;0.0092837645742516323 -0.2012731644791339 -0.45809205854599011 -0.52411093896279892 0.047964955989430152 0.099813869949099077 -0.66966651620494977 -0.21119248263491541 -0.081501230121964807 0.37121291699059855;8.7212878213053564 -2.529343369144827 -4.4771488395153209 -1.4650899935841859 -2.204544305959375 1.7132536268185552 1.6061179090130542 -2.5681447331881353 1.4387863407601402 3.2901263978390194;1.4452981762810977 -0.033058669617289899 -0.077798908255864524 1.7488713031953673 -0.2088596607954904 2.7252484863253494 3.8950673372104618 -0.46034622559322763 0.87685976006624777 -0.23075696772690266;-0.54940447970802564 -1.7229765663121812 0.040961963215921632 -3.0724894692109381 0.76535229621189682 0.16844908360019703 -2.5375373529704679 1.2346111093139156 -0.054818906227843356 1.140570954509913];

% Layer 3
b3 = 2.7618211729759587;
LW3_2 = [-1.8332869173465332 0.22260787572678722 1.6463046537771155 1.7823064628486884 1.7372874051320408 -1.4772132001053282 -0.35396030445606691 -2.8183886298795393 1.8041593300385761 0.7843373479585708];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
