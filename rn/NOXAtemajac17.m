function [Y,Xf,Af] = NOXAtemajac17(X,~,~)
%NOXATEMAJAC17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:16.
% 
% [Y] = NOXAtemajac17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.04040404040404;16.1290322580645;0.0210748155953635;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.1811051536317825;-3.3383253811782478;-0.79457456796203851;-1.3739369837292441;-2.2304458567150003;-1.3547816467231013;0.63452785053365346;0.84073850278729723;-0.27129139939251717;2.6120851709931205;0.66457527553946705;0.19251549126687517;-1.4735758067306786;2.3067474585330996;1.1756276448005185];
IW1_1 = [-1.1725117316017228 0.69467377137502784 -0.52437013539811927 1.5311245399924138 0.52780818443529798 -0.42233649963003583 -0.00067211163815390947 1.5377833375952474;0.18609497892038035 -0.7537239766500291 -2.6733222000537 -0.34687731722847781 0.099288182944220635 -0.38005121390151564 0.26185181821575199 -0.9292656210186182;0.92374624931757321 -0.82603181420347582 0.18170952033119778 0.038020246238742346 -0.11561915226084274 0.66554948391974866 -0.072320164583464797 -0.1032785243404967;-0.1528529112181149 0.057253870480413763 -2.308016705719067 0.84289778584546737 -0.43962530284918577 0.84550489786240701 -0.4605993145590716 1.309365736537945;0.099764485238573647 -4.9258454289116633 1.4268185282677142 0.76933694181427903 0.3917091468746367 -0.14164670604280438 -0.4155295770175928 0.12592326795613759;0.39883823036169352 4.1712661074574413 -1.432810127658062 -0.49585879892609835 -0.31400799599989621 -0.0297476959108256 -0.15239359459543256 0.8677391392121;-0.093253516476508633 0.3436444318461932 -0.82599274442776738 1.4793588354398406 0.56677013477785776 1.9704190016144858 0.41220839248033331 0.073024077272126731;-0.61297248458208531 0.38566537232936349 -0.28399591474022695 0.32974711403030788 0.33047044648783824 0.98164549838817339 -0.093910443197799634 2.1100949269346767;1.0595407646947859 1.6741791521477565 0.66541787669604202 0.875141852318706 -0.26672996084618494 0.18555097782538493 -0.082041301795017438 0.084449720965922986;1.1709667395591024 -3.4218300170090949 0.092315880779127946 -0.69202572601997348 0.056538448378558655 0.0019739821839244581 -0.0013664676718048753 0.33443103808685859;0.69599659484211684 -1.464917888513384 1.2726174466188258 0.1272520995029349 -0.19810960193787869 -0.40704374397680099 0.13993449779112013 -1.6558417022473719;0.081692686234177997 1.5823964771165777 0.39001685147581749 -0.72063622497089574 0.6603292289146635 0.6254363608900303 -0.2801786614741949 0.77331087214075489;0.90227722814180733 1.8230964803307446 -0.87134085542374562 -1.6648974149448443 -0.081871385982569544 -0.27838635738559048 0.3862958698574141 2.1580672672257912;1.6106068626972438 -0.82165744331480761 -0.23180226622846967 0.65850864998988434 0.91859821241213424 0.039764621912689341 -0.038002364071310635 -0.92254278245473387;1.0536733857777367 0.19763972025994359 0.53212462522195347 -0.17222367306825204 -0.67233016230004239 -0.19967210575528319 -0.082954033204114069 0.11908096340398755];

% Layer 2
b2 = [4.135091804647657;-1.5410601062282767;4.0031101756472687;-0.96489244057951939;-0.13312698739219278;-1.3567876309179909;0.69592033998762248;0.062578310279500199;-0.52288741114591497;0.0018195595269163839;-1.1718927589955801;2.1945753475278842;-1.6398672560831795;-0.60339193176780803;-1.2339669306211229];
LW2_1 = [-0.99934448325949299 0.7075383498562704 -1.7261547801844739 0.1824353668883138 -0.4325306448865065 -2.9838571276439207 -0.75081003658354528 0.45414115837221425 1.3462472351583352 -1.4863453544318346 -0.71740035156010129 1.1227747275025801 0.19668788416419541 0.81132603209764431 1.7116354291120663;-0.53832036159388941 0.027231985260336621 2.5292146900339199 0.87474572841666309 -1.4147872073210659 0.50864060489602081 0.11694738764467971 0.99673845056066124 -1.6592547630783447 -1.0100529834436054 0.78521527187827211 -0.46911101289659207 0.11620135066100722 0.49088331747255176 0.95347017121674127;-1.2272575161770827 -3.2439453776404297 0.21989724696600393 -2.0911380541032365 -0.40591718560651968 -2.8463334855571247 -0.66110018382219893 1.0915088262032726 0.39927598486685911 -0.42973463632439357 1.1540184131856552 1.4741904341345606 -0.18091892470439547 0.53638400135627473 1.0614957885425027;-0.067428224391258701 -0.66250436583993644 2.3288346157344804 0.28411249255447291 -1.3319227421769504 0.26041087382237149 0.0051886608083402883 -0.78048729613166012 -0.39818970753667621 0.37604324687215318 -0.70987045088558676 -1.3474410834774766 -0.68675581265446106 -1.9263889465787072 -0.49844405865247171;0.84176631447156214 0.85492680178589542 -2.017986224385345 -0.63927489820340322 1.3493374416850763 -0.33681596575087758 -0.15379900716173558 1.1934032854976793 0.080474788208074299 -0.70925537630713109 0.83506278454398264 1.4420906917770355 0.62346041792377216 2.1114363715036686 0.89248526090930713;-0.61220519809832097 -0.27199435560064456 2.5201350185570228 0.69017071139069341 -1.4421300125645016 0.71370120096030631 0.029505545420453673 0.9739980630713051 -1.5649872620594403 -0.86515228493606722 0.8148887511541042 -0.82789585952340361 0.15624547225853519 0.44083082993386041 0.81623502632669376;0.090982344586146874 2.46643645201859 -0.52148880313536283 1.0680978485050838 0.61090456390323411 -0.064563177686904089 0.095706457743869128 0.15121555418208246 1.2893674749406288 0.83940372638215399 -0.019538675833135344 1.0524588107969726 0.02552065687011076 0.94351796868922222 1.5343815011091755;-1.8315664477333256 -0.72980024191263948 0.039436614999710407 0.015515338955278235 -1.0247714259854237 0.78593089846059383 0.097495452713741285 -0.26333878761738561 -1.1590925043478482 -0.061654658616936017 -0.8909748469218095 -1.5268851283921452 -0.41538071751785721 -1.1228491754286849 0.56602003823444735;-2.0430515448884252 0.088558656779238756 2.7136272409253928 1.3578745509962822 -0.70726801559800734 1.3803951979548739 0.14597744869676674 0.35974386407742259 -0.0029999794372560645 -0.080898944222490665 -0.56551652525033025 0.0059968578556342383 -1.1445284372906717 -1.3127847199726199 -0.29543198802600568;0.87383554303222899 -1.0258451228323515 -0.14268635513907246 -1.0673349834441224 0.77728446604774781 -0.62025963495995751 -0.47881125023829368 -0.7993169182837544 0.77267748626666866 -1.5535245493545997 -1.8012629203734201 1.6883648410940182 0.1319754831562773 1.3026356347928096 1.3710463307372622;-0.02905379606285087 -2.4771352709431569 0.27347725679811841 -1.1483577369741507 -0.52046765097056602 0.078730120169333867 -0.17336696513217439 0.016538774879165309 -1.532541385827956 -0.92851255242715014 0.33220336867071731 -0.88679453685098786 0.069984731756843346 -0.77737419539947972 -1.4620129240810231;-0.73732155965191049 -0.29311283186688714 -2.5660583900138674 1.03842096621933 0.90610720367615405 -0.61257078687078459 3.0519020444627345 -0.27185443399024778 -0.52240455182719947 0.16658306802764383 0.76279149987411765 2.2495263583124894 -0.65102297843388579 0.36414414554037172 2.0835265880063196;-1.623606966955573 0.46335238421357955 -0.001754213731525997 0.49385102400171527 -0.66141758285776331 -0.20763108388370577 -0.18600716387367369 -1.0923248752244168 -0.13669549960166485 -0.095511838072969049 0.26677982491618762 0.049627399249874832 -0.074803227568909975 -0.44086798736913563 -0.93522552483672106;-1.039107422528494 1.049352001410371 0.15850888387377426 0.88722179964540659 -0.75005563598962499 0.59369634416987072 0.46253473208746654 0.98599390901365802 -0.72440609863831884 2.1412441431357503 1.6600045674991184 -1.6608914968896844 -0.1820345794448992 -1.0797649576765056 -1.3843137301097777;-0.45385797452279841 0.98799262415779343 0.80871683822469098 0.07800282954568688 -0.42757715475515123 0.6918151672305719 -0.97663570399540489 0.47031553598069215 -0.044227155460467432 -0.5332451867942003 -0.74375630770434742 -1.6005445795267979 0.29080169723586785 -0.18874360813362434 -0.70890372553848269];

% Layer 3
b3 = 0.80530562387459792;
LW3_2 = [-2.6447453714256284 -1.151651521164275 2.7257490935496884 1.710799541102519 1.0636865295166684 1.1686760511795795 -1.1974458036980959 -0.076741610265721447 1.2312850266180244 -1.2450795412593632 -1.1562613752443784 -1.4884365750059887 0.72440837731757601 -1.2731717628200858 -2.2559286862330832];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
