function [Y,Xf,Af] = SOXOblatos11(X,~,~)
%SOXOBLATOS11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:40.
% 
% [Y] = SOXOblatos11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.4324987261948694;2.2161726157494819;-2.1335140814795568;1.0282672852618833;1.8690723832578562;-0.40390791723960262;-0.99291881451232;-0.80689060353561504;-0.078253416813076682;-3.259214762795752;1.3049481673597996;2.3478290536017581;-1.6294731990782865];
IW1_1 = [-1.0835622291935356 -0.60521444553392045 -0.36222995172578304 0.081553030394836787 0.29448420480482956 -1.4488418303144406 0.50214263960962713 0.41695150212269749 0.0013192289027633853 0.29516180769698208 -0.67232884718332797;0.34739321916239219 0.2299062461912158 -1.230533857825165 -0.96125121374201461 0.12763750796586673 -2.2463362268994143 1.2921491499254711 -0.50385497439435967 0.22304967465168782 0.23854677809847585 -1.4207012915187096;1.5063155575118166 0.4235628437209582 1.5283677382687852 1.0945938039990288 -2.20099482877457 0.37294760450940828 -0.66956490406882418 -0.8971421711470654 -0.10560198617327682 -0.51457676681069697 -0.70648322744003822;-7.4762436376404366 -1.8333383291984495 -0.53462362817090348 0.0040797556131989335 0.073411520982437348 0.89299568900416837 -1.255277735767917 3.811198760721894 -0.013332905901756099 -0.9590627176127704 8.3223806294196425;1.3333994182216635 0.63695252864367291 0.53844862253181935 0.14692873533823025 0.78812395523544698 -1.6083230420156429 0.1092164022275514 -0.35283017441490622 0.12040143918798354 -0.11631163682739049 -0.5436294263803938;0.019431861542237319 -1.0987223857088195 -0.37630192617119107 0.2416364002809254 0.39876300747132432 -1.500361095163093 -0.35181923145794519 1.3563782770438728 -0.085032887264975543 0.17626566682985778 0.71071591725474326;-0.83371640120537394 0.72929322155889353 -2.151246961952908 -0.2033185754539428 0.34393576536701043 1.3950734713985766 0.61814878653109295 -0.43551869054717363 -0.21965629578604651 -0.17827153029208581 -0.16998225788749896;0.79973403810666444 0.69010503943439039 -0.38920534059181733 -1.2976927488107592 -0.38871472506036925 -0.65972361650355904 -0.39454361734148036 -0.066809956055227215 0.04275176227829975 -0.61544129388255486 0.74489409231732595;-1.6776577398270578 0.52949728161624932 0.32924213021378906 0.55634057189040675 1.1550153728112149 -3.4024152349017491 0.57177922530775382 -1.0976375290397293 0.14787715671772131 0.10181948618880945 -0.48810526619727151;6.7421614279461517 1.1485739831887207 -1.0265512847907636 -2.5032364450564355 -1.3303865451610104 0.58418454025913358 -0.63016507379603626 0.47573798790032873 0.66414107646501275 2.30171426008833 2.9378794840258236;-0.58881322938880709 -0.43598259681586632 -1.636821944418335 -0.65055967454428032 1.7540446614920291 -0.40265654343656299 0.75056720622600115 0.27145862451611075 0.15153673595894845 0.56073366396995872 0.56008277687734709;0.37916834799961557 -0.81778712794363817 -0.048294826774435563 -1.787549518419673 0.92750975564099525 -2.8670850694106274 0.81858795573153187 1.640960487639582 0.88389868735574106 0.34476988144296677 -3.1245075145899408;-0.41928253653987546 -1.1711853060348381 0.22575500214324062 -0.65917806262845902 0.29204784517682042 3.574858841165875 1.5446538665922154 1.49867990744938 -0.054256154367871255 -1.3038540155584404 2.5771333571224755];

% Layer 2
b2 = [1.5059975016959437;-1.4813965830865632;1.103686803677502;-1.3566449872623947;-0.6577768357017687;0.40449136984975526;0.70424485570168938;0.6234479776065005;-0.87249567758133761;-0.95052711955460689;3.4952013375592581;-0.41218221058895066;1.3560533811374844];
LW2_1 = [0.14786349535397988 0.22902330368412899 1.0484495464699473 -0.41591163822495392 -0.25555781459962107 1.0540012632077274 1.2221197354332489 0.37510235286988924 -0.20842704235111661 0.28440530794937469 0.65024988481121204 0.15046464582162167 1.5418943013776465;-0.43268833858738431 -0.11679917444355643 -1.8725026823783664 -1.0640989817851638 -0.9892380200632287 0.56912151313998016 0.79380526679139518 0.35677832278722771 -0.048805419660370691 -0.63721366924441214 -1.3985357368465106 0.35760238416330747 1.5909112767573645;-1.2066146021203161 0.71189681029496465 -1.5371622061417605 -2.6408864495907944 0.80368160266883015 -0.95502915465297966 -1.3798924432907067 -1.1638795596208904 0.032270526713556548 -2.5868914603959339 -0.25210832359051383 2.1491793196221929 1.2669898780614579;-0.42289715715250337 -0.33285376742613981 0.24866353450468559 -0.24050262399218014 -1.3333423779071674 0.12191395657093103 0.30343584510962546 1.0646992093948833 0.58112590848864665 1.0872384726287549 1.0882298951640683 0.97646396330210705 -0.62877677416075306;-0.75323009183382061 -0.59289270252453674 0.08222607013175065 -0.89989461705169016 0.39886381156825335 -0.25940516135359976 -0.025896975955797989 -0.26224023323641621 0.19595405779747602 1.2363394294741801 1.796934170819384 -0.70131669233181015 0.30862558356145953;0.04483195323906411 0.30443410200202259 -0.85994232706117679 -0.66895398977646381 1.5651341230589395 0.50431908960259886 -0.39421040851891609 -0.84695981274471088 -1.0904419577899287 -0.2541082122786078 -0.61126007194589471 1.1636476171954724 1.2504542827806464;0.86697753635500441 -0.1998543341049715 0.34837360917886545 0.44468282078312549 0.90819561140546834 -0.12577351281510876 -0.14084032714485728 -0.45497236592838541 -0.61092935544531513 -1.1480428652438057 -0.47547386996792035 -0.1313957957255516 0.27527852188029872;-0.11480006170396242 0.20734231012603244 -0.42425743786273579 0.20208925438003814 -0.2682392153962681 0.3247099098049766 0.23216899033387692 -0.060227990949406889 -0.48927171762339605 -0.85407860248290279 -0.59420795041146335 0.46120482455077261 -0.46018006341696699;-0.25695872539582754 1.0336233447615679 -0.83589278796812128 -0.058451193062910835 1.5525572702659802 0.39902013867215469 -0.055964552628154619 -0.87014852786563179 -0.94584203215028495 -1.1899801229382923 -1.0173442089456901 0.41310923050737969 0.81302588455882296;-0.2045071269568548 -0.7517225518649514 0.25080863192815983 0.011989570325228065 0.43773987238723922 -0.68735128256986355 -0.92332106729949237 -0.057354124934707151 0.42692647740974687 0.17863537624457804 0.66628673191233856 0.69617863168305183 0.82340016585755427;-0.82725383084564141 2.9071257962813166 -1.0266053740832759 -6.5257893396795987 -1.248095388836284 1.2851014169266215 -0.93219761550099767 -0.32684593250742972 0.92723784346695037 -5.2511059727236233 0.19170520148404399 1.6237472687905132 2.7148939457684018;-0.27763123012013791 -0.43089307352913181 -0.53209422806017315 0.083852252878600139 1.2827728128374241 0.40303707332257788 0.11938672848591153 -0.52205743058119147 -0.86762295614407914 -1.1951768181037037 -0.67149664915836604 1.4429478493574879 0.50699422227824498;1.2564691413551805 0.29594320818337372 0.65388598553765553 0.49941920332940826 -0.032854016028834185 -0.19058051986657637 -0.17126389354904098 -0.29364321088647005 -0.78084639574504322 -1.0922080999007231 0.22835383695821992 -1.3114981993893211 -0.34734972023781485];

% Layer 3
b3 = -0.32556830438880674;
LW3_2 = [0.1198657889535619 -0.059589284090560635 1.5390569227898439 1.4497002439951183 0.53332187601021697 -0.49915028834705633 2.8428182209237431 2.1275052433414809 2.1663749548861975 0.64335908760856586 -1.78355751070849 -3.0975340031492919 -1.379109625823032];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
