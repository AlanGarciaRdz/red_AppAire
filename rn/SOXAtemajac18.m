function [Y,Xf,Af] = SOXAtemajac18(X,~,~)
%SOXATEMAJAC18 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:25.
% 
% [Y] = SOXAtemajac18(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.3618538382886807;-1.1293796698625709;2.0304544155921929;0.46283755848655411;-0.52059186109678579;1.5986673585451714;0.99385363227222001;-0.8578967286898157;-1.3389750098842672;1.699235920973422;-0.79188988283605022;1.5271296736286037;-0.80045702499406191;-1.3495980199593358];
IW1_1 = [-0.099521080130529987 2.7733717491300731 0.089400451385291665 -0.018532144707468941 -0.17916756655814345 0.1070554317361128 0.13982212001008124 0.49428500408704673 0.42938729224406585 -0.079253167154875598 -0.011589609347375927 -0.11594807842074348;-0.83692640372692595 -3.0811228333690392 -0.45775635026526024 1.9797459249100635 3.4739495515417418 -1.7112417266633637 1.1078355144707361 0.9084362027162719 -1.7826067007665409 -0.026981889625461331 0.40084768515553204 -2.1630955840416037;0.4630645613498221 -0.23691660446893076 1.8753051172759434 0.36041289067253418 -0.34949416095663682 -0.47958129811955258 1.2703991828402919 -1.2714417649227516 0.48069641209093716 -0.57861664479044084 1.0733103674263189 -0.33223945024721141;-0.35186302430704075 -0.92414979172751921 -0.12502447277696271 1.0552414930014282 -1.1196410031819743 1.2557670387501605 -1.5671667042651285 0.62039020959850733 -2.1388588057390598 0.17973408129294077 -0.41489765153088132 0.59988891802749245;-0.85845337774851005 -0.19476783382473406 0.22866021028592654 0.5942311194426052 -0.20111056583123499 -0.25532244817487626 -0.30833117232905538 -0.84463584425095084 -0.40326283255892093 0.096648544215936397 -0.78749796766353697 -0.010399044352280101;0.26146560127406931 0.12591030151483487 -0.008528306514638144 -0.67640338122762678 0.71324424184267166 0.85808316415833363 -1.7568252631733801 -0.53010490857356485 -2.3675338433658717 0.25910623032238195 0.49954106147636246 0.53416282699391204;0.71580008416047824 0.44204592714461943 -1.3869871855850873 0.19262999599916744 1.1766466164353122 0.55064563783868126 -0.62039652921243205 0.78572886596112335 -0.47530189214440138 -0.063874858481869259 1.385012548877371 0.73377132757764829;1.6717649661329417 -0.92078840409729934 -0.18208244222963438 -0.33641229744912332 0.22936920238343281 0.15840940493771813 -0.60316276468251173 0.065187486456828758 -1.0470254265366528 -0.014168263100689013 0.15004104393536097 0.64597775907717858;0.2014836074683331 5.9863505926615019 0.16519436623114458 -0.044409330932899033 0.39962675378221707 -0.25212574988101671 -0.016161096143478527 0.99739906808349432 0.44992391415372118 -0.12523499316622269 0.031878358438009659 -0.46053008439870202;-0.038416586545449938 -0.10193181519879893 -0.08847478221729986 1.0688637400444201 -1.4562062334051256 -0.05720218270541258 0.88216988452931755 -0.62762150084947388 -1.9915794719340425 -0.067546485764443193 0.63390337455412715 0.21371831430001537;0.059598777021145952 0.52042539636967255 0.29036162467917687 -1.5104531316069871 0.35198188096555072 0.050232294027798441 -0.17915536983279798 -1.3272084551870122 -0.86073000241304998 0.010656238747345285 0.8535490778768785 0.080747484655877069;0.65391801310976239 -0.44013005518569598 0.47229172330277414 -0.27131021618828827 0.80157403974412522 -0.34322755297864815 -0.94751477730384404 0.68370904354839146 0.10199737310751636 -0.34129118340109632 -0.75920338210915683 -0.94132691174331928;-0.65450152637907533 0.10120985268934085 -0.95867038784812919 -0.40967058964384145 0.1323648408461981 0.050975636631140686 0.19891050978801222 0.4710447596114698 -0.13144675021077831 0.028362047630193669 0.29282159903024108 0.15993102901446032;-0.066143691460480103 -0.03121323846501986 1.8405443349592643 -0.23976993582284389 1.1165707898669615 -1.1771120234000019 -1.5524664660494449 -0.7622858550312146 -0.2044967756349885 -0.16952842096632337 1.248709231808931 -1.2985823688255955];

% Layer 2
b2 = [1.4144476809184936;-1.2502646680966156;-0.05253198674041111;1.9483884217751395;-1.1623424203496238;-0.31522033292877;0.42091965799223446;0.93300409669682605;0.22528734365117178;1.110508742218689;1.006404339851193;2.9138568660410313;-2.4806490057687882;3.3696106748369656];
LW2_1 = [1.6822455020776439 0.26435852940357468 2.1792799207733493 1.7083341579032103 -0.38783803567579839 -0.67885078602396209 -0.99611391213618694 -1.0919307912028882 0.31775371278190978 -0.5944774991224111 2.0451338371413428 -0.064164483851970461 -0.94448300692015064 -0.055301341250480279;0.78348116690444281 -0.21831673710374702 0.56811302091576799 -0.87337664992024766 0.36474684882805175 1.6949123546319562 -1.046824142970104 1.7794602179324723 -0.35938505934463894 -0.4192844143711294 -1.418021773132891 -0.6338659995563487 2.1188959192742307 0.62541738308781158;0.74353998450551972 0.050353501005277433 0.68985756028973233 0.40925188791461931 1.1015820936937191 -0.89034319061236822 0.26938739509343007 -0.20572702186567443 -0.034977643323866769 -0.36355634824799893 1.209150613661488 -0.16161331673248924 -0.8448234511139433 0.0045614079298638907;0.26853072310350201 0.14300707509442084 0.0032775860696971706 0.73900639281683245 3.1517235435632998 -0.80351265779136771 1.3214958905915557 0.17867759559131813 0.2777318716901625 1.2246073632875947 -0.0042118881690812321 1.2048158876646922 -2.4529434513182133 -0.37593524059209493;0.68238146064366778 0.13325292520964646 0.60311931774404381 0.63307342764253083 0.56806293095755456 0.055854466783492568 0.23137814750757585 0.51435815874606827 0.18193908702125941 -0.61401971173249525 -0.37959481489788366 0.30030242618906555 1.7314243150476822 0.41283442988849839;-1.3154252981556183 0.23346289440500612 1.2285191469635017 0.30036554631062268 0.87516022096921775 0.12807667522954086 -0.79771310547109375 1.3219082928957406 1.6552211879317356 -0.45251465487990972 0.95416418502512768 0.20050390511457469 -0.59945883849780346 -1.2138555141448655;-1.9116340178332241 -1.0258803226917821 -0.6640614092050523 -0.80431665742152159 0.32268766572636187 0.58949182119208798 0.71856053202976722 -1.1311626176052758 1.8108306874451781 0.9441142588795326 0.28777158827394544 1.1311856960848945 0.006179644112210593 1.2481713267975234;0.59654670963607026 -0.016567882498951504 0.50577693721686356 0.28419361082549238 0.90577631643720447 -0.98222251189866017 0.25039970897426589 -0.44317361319843668 -0.058535645026143814 -0.53407667411720494 0.75456025982563291 -0.50282765559064724 -0.0087293186877601958 0.36470616870572276;-0.19983554732668188 -0.043233689156838839 -0.95932995836005652 -0.47759977955813004 -0.047884169803206506 0.1427118064552563 -0.63646161324388417 -1.117423795949263 -0.094659510618426812 0.62341767030599382 -0.44294422831679564 0.23266477662364246 -0.048724632567588549 0.053485197797065086;-0.38640607325716064 0.36372736746875689 -0.5743420865594292 0.91730036211661659 -0.2733586950562179 -1.6762971635553865 0.89069275419727179 -1.686585865951828 0.91834544681883523 0.41314915509871714 1.308302778112526 1.2104743390218264 -1.6673842200627327 -0.42536699278964119;0.25847694374292507 2.4051314391890748 2.0212232153232081 0.49459796599331712 -1.8810675382757127 1.4264667828725663 -1.9140297462316485 -3.195911916858714 0.45030915114633208 0.038971243484695134 1.1662416464600311 0.0023874149947023665 -0.63142003628726029 0.61955749615308187;-0.13534202395083178 -0.60361117362592764 -0.45233715595633656 0.11002421531059833 0.22830715556191938 -1.1802175755785278 0.29723776307459304 0.3445307472515281 0.29045825856354412 0.91993379663459418 0.12767931556238826 1.4224624603519602 1.28703215209177 2.0752253568673074;-0.16633416991871622 0.22222710934233092 -0.22013530116051994 -0.053514308216871934 0.0592413810182877 1.0141664870650502 0.057382495688894669 -0.19339577198706021 -0.15235764203454413 0.34650356715113489 0.4927616899733902 0.0092999337996338555 -2.2618868690556493 -0.89252939718563018;-0.31492762354044268 0.22055217800728011 -1.4688519395338102 0.64165700345419419 -0.9248081729977492 -1.3413078759250328 0.54545693638733894 1.3478689225877969 0.22565374087697596 1.0748451883213297 0.67813755635975614 0.51494950520969729 -2.1405540554889742 -0.98808800392703333];

% Layer 3
b3 = 1.4603854138390457;
LW3_2 = [1.3993338449798309 1.6869633169861704 1.223630972871983 -1.264486311720272 0.99915933703243631 -0.2420916317722083 0.23163299654684136 -1.4383602266974369 0.29032307499869237 1.2954985737557498 -0.65292615421362643 -1.4868771463646564 -0.48590021457042998 0.56863648502446174];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
