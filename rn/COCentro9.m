function [Y,Xf,Af] = COCentro9(X,~,~)
%COCENTRO9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:31.
% 
% [Y] = COCentro9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.0897534211967463;-2.618177501252307;-0.69535023570210241;1.7945440224677747;-0.4602041534131216;-0.25542010277261568;-2.6210922539862782;-2.0073286216356676;0.16713248222625315;-1.0383926870486386;-0.2249310411891112;2.1481567044528567;-0.99749113969434033;-1.5117457512419838];
IW1_1 = [0.63873063958259857 0.73555018148592488 -0.24291946855455129 0.39742308327363995 -0.81211364275132691 0.20036728231438566 -0.15501503841623715 0.018337404724467158 -2.0876424900531463 -1.2423105056886659;0.027393586518189163 2.3864107385283089 0.0026564792688332541 0.39419384110033007 -0.088445473946387007 -0.22925779918508726 -0.10418136234449708 -0.27084459621380985 -0.091363285341717768 0.14452964415608535;0.61996521478846334 0.14539056521616872 0.97866431396025588 -0.28308042276246825 -1.1186416598287992 0.19765646305601126 -0.31757410667869601 0.96869690024570598 0.7214121534046869 -0.98358506171905735;-0.75858874341310023 1.6059326423233478 0.86276335741941679 2.7603147104848311 -0.52981281047947659 0.12367214182317662 -0.12720536519431322 0.0071827598657745496 -3.7483743815137189 -0.8835389278113408;-0.57251091822510702 -2.312111555710628 1.012168181011885 0.98511792228569817 -0.27250495542806469 0.44262342107489666 -0.32574605657740607 -0.22742032924951 -2.5368186084551456 -1.2076876177470082;-0.53204684054768558 2.7192360299949718 0.32704633498613622 -0.26200045779494863 0.53807777519771582 0.022473116909196275 -0.44535068433524744 0.57905651622692422 0.48188951408825242 -0.40329881468821011;-0.20250458499393192 -2.300860990442247 0.48286529970365544 0.20737515791869657 0.2697033983192974 -0.13576361264239797 0.053687526788786043 -0.22640710299251313 -1.1591237268670005 0.098874912386147276;-0.45304327844391989 0.48020189203160485 0.71406304734246495 0.070137027054224005 -0.81669162657667049 -0.17485457114499695 0.12090146854493387 0.085259667684880969 -1.6318320419822685 0.054771806582578672;1.1138373864871693 0.052093797807042985 0.86086635674821499 0.49280601034459115 -0.83034789473085169 0.41355549064140562 0.20781077226193156 -0.0091791215764136166 -0.22768822533579047 -0.30561924956721143;-4.0634151718961151 0.47832701422475526 0.95574878707310718 -0.22689816371191029 -0.66698683631830114 -0.19804072415587556 -0.081438203269893261 0.59878847700507987 0.81542217176832843 0.4007538627312508;0.14606362376771781 -0.18904192024879218 1.3637520249876214 -0.096152708843849952 -0.091885515366093976 0.19642661435822867 0.21262784989784139 0.39089381403986834 -1.9884836696704766 0.57039121871696374;-1.2429379106234573 0.23653954195319077 0.56544056220705363 -1.1870348779395201 0.10672047982545149 0.33912688953085962 1.3747113089353644 -0.11120380077002739 0.23226584710306494 0.5807288145574202;0.32279174517803988 -0.26889193018302848 -0.064759861885614139 -0.44061968273573943 1.3668949448852683 -0.99614305093687638 0.2228044901715571 0.34502865301512275 -0.26124827346517643 0.012371860477489999;-0.15547650191658827 -0.37401667689240303 0.42003489312573389 -0.0047969598486873113 -1.2418200244576025 -0.21358664595197843 0.071253399762517322 0.24371259446151111 -0.66525242904826754 -0.09469757080108393];

% Layer 2
b2 = [2.1564558017900288;1.5781497930508448;0.12025314112801973;-1.3671844131252842;-1.1272576574029556;0.018388873120795769;1.4123263468068969;0.17517735599388351;-0.41002835863756754;-0.072012396559662253;1.0590448357151956;1.7092143387362528;1.7502519304174589;-1.5582357170462215];
LW2_1 = [0.37989407073457221 0.17970466212503478 0.36106472071589951 -0.51829273275486787 -0.46065446565884172 2.256250240402391 -0.78676882573309281 0.51310820765148735 -0.01342880452847979 -0.87354621014654787 0.71599052642847971 0.16674046221491601 -1.1165625064287061 1.6491152407838108;-2.5745823010694764 -1.431035404533731 0.73417176294939501 -0.15798670774899129 -0.4180894705256078 0.07620652278965899 -2.8409848316663431 -1.1338030280271991 1.7408518143453753 0.038736950270295341 -0.63962847671408596 -2.2235920283462547 0.62178961323492588 -0.73327341898470277;1.720333808089316 0.78014655628312279 -0.61201610364568493 -1.0554549243956257 0.11825108681187496 -0.15606668846060162 1.73756780001602 0.45129480294769891 -1.0765486042323884 -0.022298593507873422 0.85222829383988064 0.58917634660975915 -0.60080970461500716 0.31211816063956327;-0.16144101545258291 0.1451203500698669 0.11565659103599513 0.51720437248407602 0.72104469687469297 0.2000730673409179 1.3404281960675992 -1.3604990168256303 -0.16874420788924088 0.89860344078474874 -0.20384119030174172 0.080015561935185206 0.7482096961399437 0.45971218699401695;-0.47636340284758505 1.4685915339314195 -0.17592569475019976 0.999901785256751 -0.58226309389291109 -1.3082624545862045 2.2447036865031498 -1.1217975903866548 0.56655780304084447 -1.2004726269073711 -0.61324945880677162 0.19191742190695024 0.43562092029252891 -0.72262859905414234;-0.60576043859754769 0.75630073847329926 -0.13225634288656435 0.81153320342447433 0.68258599232500428 -0.7349380739432454 0.79912933914919859 0.03120919008717369 -0.57248721764814425 -0.66196820707918402 0.13364322195214104 0.57031369896345874 -0.27520151488358735 0.1720851792897953;-0.6433227664629666 -2.0187283581230901 -0.35416826380706828 0.3164547620377004 1.3234249850850268 -2.243065720105534 -2.5611527930194278 -1.0780114609791187 -0.56532162766045424 -0.60961688204285769 0.029316294554279157 -0.84356264633453748 -1.0256757394013665 2.1727109443982995;-1.2533237113803886 -0.065106970846502049 -0.71399917848953565 0.4124142538960564 0.36513386003389781 0.014201034747413702 0.023470107729943776 -1.4715174812223861 0.12213137831841403 0.32322301591355873 -0.45958230980469422 0.08894095000133885 0.17147640631724331 1.8355539593044645;0.29436339477903556 -0.09326763518268788 1.4140970200261296 1.561563639312082 0.41933811316247871 -0.79418825332606102 0.07402503772057345 -0.61382680859913641 -1.2593606181738914 -0.43473278285443562 -0.40060852408675851 0.27185936165315921 0.64661294857726492 -0.74121008662754984;-0.68745394819170713 -1.08978789452022 -0.98730444018663321 -0.80316112088443758 0.49484418108859868 1.7948680539508253 0.20259946244720933 0.53836894682029379 0.36658056865249267 -1.4354398434475975 0.47848673610687426 1.216194853464444 -1.6706984882277358 0.34631762858887655;-0.27237103058308765 -0.11746052711313129 -1.1752919903466288 -0.8848372277184563 -0.06766960867355365 1.6127092079804251 -0.49021687086525045 1.0618251091697606 0.55942921636483645 -1.50000556442769 0.34733374732999184 1.5305505638644867 -1.2896659353767443 0.28192070938911518;0.71350891280450501 -1.2289151419254301 0.10657804493901868 0.18368456201952058 0.42876642831567174 1.8301130495907041 0.99823362789922954 -0.3038022988253925 -0.71455695956017296 -0.0877376745895075 -0.38200253628906805 0.06301055830092947 -0.87250073564729425 -0.67150118060296782;0.60996283836795628 -0.8592439214770542 0.42044069300687192 -0.7808386756970308 -0.69457046498871666 0.78470719894839669 0.78943912559617968 -0.040272177885208212 0.50054082800218858 0.72780215027601058 -0.38422974254566028 -0.6164218077163589 0.55608379559412224 -0.27614978674912088;-0.25596796106085679 0.39171896426661279 0.10916041917647321 0.69008678015705771 1.0840620655379805 0.73279653220717289 0.022048560684328422 0.56035609059678371 -0.44699721551627691 -0.71735678398950997 1.1437407351833739 -0.45584286118429168 1.2257607572925417 -0.83113914196235128];

% Layer 3
b3 = -0.082573706529083815;
LW3_2 = [0.15527249846504759 -0.66511661091920138 -1.7570581211500054 0.97654291646068969 0.22460578187832092 1.1896307945945828 -1.7617220913963085 -0.18976614922644816 -0.26821241305223537 -1.1409634717574584 1.1470858303452542 0.82439612695203301 0.93104524581971682 -0.44158184786311189];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
