function [Y,Xf,Af] = NOXAtemajac23(X,~,~)
%NOXATEMAJAC23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:17.
% 
% [Y] = NOXAtemajac23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.04040404040404;16.1290322580645;0.0210748155953635;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.1933878768139086;-1.488212002499923;2.3277375957624522;-0.46498089198330134;-0.54062203985015411;1.1852122187070726;0.04395844669199464;0.65971117831593695;0.75996029136340704;0.47506863718174525;0.2144007977103608;1.4389566082008816;-1.7641222182765548;2.2946819917870531;-2.2983027375702032];
IW1_1 = [0.84889562645912675 -0.29114555032874007 1.0230595134608615 -0.41204040653026253 -0.50970643112063119 -0.30369897477303565 0.10213475198314012 0.16900063325813519;0.39243017382286322 1.9475604398803039 0.226806691759114 -0.1778040548279603 0.61269875118982531 -0.028536784103712146 -0.18713975723272716 -0.37535146084026139;0.046132233374286048 0.02790503551555933 2.0167350759921936 -0.68373161484719269 0.41681178246950185 -0.77826459594557407 -0.24106413731785037 0.72982199552551741;1.5376173415642063 0.43860149402736176 0.2213424223167848 -0.16725338310083707 -0.76715150657491926 0.46924624105171414 -0.62805383663934233 0.21080068511058628;-0.020726240343514425 0.08286020340783648 0.80338537681497013 0.25178683931252288 -0.4652312139418166 1.6259692005340642 0.022219402984283675 -1.1846269358957546;-0.10801906394584848 -0.13774131314048976 -1.1670927750763027 0.39548903893260628 0.36448829135625532 1.1112112667258391 0.15729758269597227 1.5191833054920973;0.27353252704465014 0.99124389198850216 -1.4093034685639747 -0.0068865771488322361 2.0729686518565962 1.5188945903918256 0.44848654698663054 0.32964782826017303;-0.12181425870303722 0.73923638400585512 0.49447898124641076 -0.39702846031583161 1.1043617230481784 1.4162043937151612 0.34591074391814514 0.16656889724692006;0.69046333218811751 -0.51629572261849122 -1.0491809908836986 -0.8588847025555697 -1.2901849850136158 0.070323894529493003 0.87946930754212793 -1.6876757256166004;-0.24166842715502396 0.86130969572621108 -0.80699209337331967 -0.38018977131394877 0.31962660549256594 0.6014576826412158 0.45693003156038514 0.58927871983603775;-0.5750689689353804 0.3085246497231473 0.26496836117322453 1.2951075972481849 -0.054575898025293931 -0.11709022251522685 0.44107944933314669 -0.17809321302095027;0.85087487673945428 -0.058501979042664382 -1.3956064547080584 -0.42930611919185779 0.97917859919423256 0.18751573559762524 0.46569425466570202 1.5226004411733824;0.27660280976962298 0.57129598569950257 -0.3763894420894151 -0.94523091162621953 0.073154415997820771 1.4012149610129643 -0.50076466261236241 -1.3505306912188133;0.36184888411650573 5.3410750501289801 0.48550451240605191 0.5995529237398719 0.22259452111944056 0.076840014400854736 -0.07449431903804403 0.055488530393564953;0.28353464442326881 -0.50281264559691441 1.1599985239931991 0.20624416847466964 -0.97948838494423829 -1.9702450568707495 -1.4987284207396536 -0.81234561353979795];

% Layer 2
b2 = [-0.86954831583387315;-1.6312924115474223;1.5841287515486517;1.0248394181006386;-0.59685761312351593;-0.23625931542165221;-0.43326749982657475;0.071298778580805175;-0.074163990869287613;0.60220771400600215;0.38487322674709107;-1.2918826163739932;1.4323292241382726;-1.369301485894163;2.013198224058153];
LW2_1 = [0.66875833742845292 0.87441745531159842 -0.003127533117297715 -0.31168858474097322 0.40337519563912472 -0.97638450483282835 0.55041663524364282 0.18009702639440575 0.32762598825067002 -0.890555774827826 -0.59275751080152639 -0.27798159279287471 0.13940369518122786 0.2288608865928442 0.38949145992543133;0.59589256934916279 0.74692142955697749 -0.4836717327323512 0.35885450634978333 -0.86717178288437191 0.74315299489968489 -0.29772987359189113 -1.1931522464884794 0.45816858869864535 1.6539823225280341 0.34494520918718335 0.36023341915252077 -0.15151028934742533 0.45545956685066308 0.50008477752800273;0.023775849538204746 1.3752391948009774 0.54423748420809648 -0.54247590926226319 0.53663455363537949 0.06989793981177829 -0.34390933385264616 -0.97680965490665883 -0.92738807514502197 0.6313636828591328 0.096680281968500065 1.0970742100653859 -0.15457340025485788 0.4085558120693662 0.82539369455646305;-0.87569009100674411 0.1619117271494499 -0.98456133261536061 -0.14421377032855182 -0.46254958565354859 -0.38828730965496572 0.21199809957576665 0.0046479145880620951 -0.33811083703163719 -0.40774391897084544 -0.62046742357414109 -0.41147440883200037 -0.26999036826578393 -0.42524808770637246 -0.64019834248073626;-1.4741917243691562 -1.1578246717238518 -1.2939885631425172 -0.079497765138179327 -0.84148575869308928 -1.3140021858272253 1.0265827905651546 -0.49286316639922634 0.31771130465208491 -0.027669080060068942 -0.34702259714175832 -0.63136549144524601 -0.038512256837309522 0.70002345158290469 0.2563528611029447;0.27643403761757845 0.16859178485880791 0.23783632835818672 -0.31679816759685908 0.69923593182860866 -1.6091939313908419 0.53961291865448879 0.18956985623331016 0.21197556028064263 -0.14199180651190335 0.27033962308329007 0.51913122762491359 0.01140542466916715 -0.35630911805546284 -0.85763606183485508;-0.10452331184169192 -0.46591805510780482 0.29531564076881534 0.33069641241248471 -0.32208646038260907 1.7825635707609511 -0.042229621470654753 -0.22004161190512248 -0.56361038986108025 0.28870057367257196 0.099659532703585296 -0.68522571506084018 0.2139067461694063 0.37338463311916881 0.36518269085193789;1.4224727146468745 -0.024516227116752574 0.56279311391976872 0.024615883175277652 0.22979030229587166 0.37914055473969688 -0.56384847483817946 0.24676902713286264 0.08063669049249117 1.2956075448081557 -0.59925746182247608 -0.8939115298564575 -0.40749987490911432 -1.0118292264282274 1.2390182355871644;-0.79507648191574198 -1.0481445942276399 -0.47174029823400293 0.16521019782236451 -0.023492296134478841 -1.2061079330375424 0.37988599002133283 0.030389933589400151 0.23283629277588089 0.44015993705499257 -0.39204276741407024 -0.41527167415372301 -0.2618287296350213 -0.56142930483643805 0.41035758387247373;-0.15189638095350755 1.3289952666247944 0.27598755553201409 -0.13173912385962225 0.6091457611590223 0.15587316304408402 0.53346036124146157 0.45183150235620689 1.1402446190086193 -1.6088632843238966 -0.35819777179814805 -0.25797031713825874 -0.58286468315831697 -0.99195316259013422 -0.9338249521463502;0.64744951795711758 -0.42492021031855509 0.50058049244340763 -0.14444320840061636 0.30334516535294509 -0.13622291890164376 -0.18054032469742015 -0.692056500964215 -0.6749141461607302 1.0469475510681308 0.33447596583509481 0.56443309624833315 0.16122212159034677 0.62434766527770802 0.67155666646393508;-0.2924478689374877 0.61031370004374486 0.35384596022175485 -0.26702157776312418 0.54852741328620547 1.0403103405652885 0.24768993331171904 -0.33449402731944583 -0.96061525128943792 0.58858833147775125 0.12603506099471837 0.35964395102559482 0.06464317490456388 -0.22305542116149829 0.52877142514074005;-0.053629769630846896 -0.57247920234738103 -0.58538017076628068 0.94014662465031773 -0.96032498933221588 0.63338472670418489 0.43438928069713961 0.19222276356728105 0.73670744947962219 -0.077145125795821029 0.10866225573665017 -1.4667277147263811 -1.2380558900605707 0.016820785776757722 -0.8066736199769996;-0.78342570256713651 0.97502691562379895 -0.17778907048439468 -0.44268406565090629 0.028302739277312514 0.31771074276086048 -0.10058131949217261 -0.25720432192342252 -0.62251960297008946 -0.58810293192679708 0.097422967586087733 0.73710871162992087 -0.12646143434675666 0.7798685737864951 -0.25883512956611626;-0.025614168617996442 -0.026814748158221942 -0.46655332505442926 0.11689777929863869 0.4028683369336945 -0.012411846095866 0.23727188514421407 -0.0093980140555650297 0.37939021382867089 -0.07906431327423534 1.2154231533544158 0.99551915990417672 1.0292444972298698 1.0623250841684932 0.013596626072032027];

% Layer 3
b3 = -1.4345145206058425;
LW3_2 = [1.6614718546406129 0.32603337990835152 -1.9227647589493757 3.1134690242048739 -0.61300783165994788 -1.1648948308185063 -1.9106076583315716 -1.0937364202072672 -1.7969849374557156 1.4613686993537685 3.686436817564255 1.0309253022727016 0.87760037833080373 -1.0555074212157685 -0.76203892421654051];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
