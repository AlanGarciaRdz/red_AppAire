function [Y,Xf,Af] = O3centro11(X,~,~)
%O3CENTRO11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.5924112279677072;2.2729405764725503;-0.23979573805557983;-0.91571334679467842;-3.8290263474761508;1.5116376685435322;0.1121931970451689;-1.0263704412165648;0.20270935756036212;-2.2108825962843683;2.0146670532407787];
  IW1_1 = [0.76371121397569275 2.1323026789611328 -0.54217147265797605 -2.2578746784961496 0.44870539256815839 -0.75264438282851587;0.42433268126919277 2.729033247293001 0.27815592695692332 -0.18968404666286229 -0.14899342235934496 -0.11788611334668163;0.6581227359432763 -0.48143746182210673 -0.11139344567758895 -0.0099627299149708318 0.12425149499883295 0.023013931365501755;-1.2187427683798813 -0.0092754450693592529 0.1794395981896276 -0.6485613051127016 -0.45003908889407557 0.50940546913665374;0.34339861400667032 5.4931562588649925 0.19617473173369232 -0.36577963801033969 -1.0612626850875166 -0.44832070188154682;0.50618260993435094 0.26363070860419741 -0.02796389323457911 1.2431623105362999 -0.80718130130594812 -0.48196349513202719;1.4912931657565389 0.20603320649355109 0.039920287509020658 0.14591858147220557 0.12767853714065699 -0.24906004740706586;-0.85602625418220057 -0.64725964921033796 0.12140188091694479 -0.35448810124779184 -0.044795337132306164 0.086724952426304416;-0.97548357703831967 1.1367739761906803 0.10641305473745377 -0.80516512406735719 -0.1669187929145628 -0.15130714138897453;-1.896586028269384 -0.076124966156651833 -0.021535765989268242 0.071111121361754237 -0.022951784320352664 -0.24940192488772506;-0.07222190376522776 1.2634191613711117 -0.64834226218372371 0.1347805689504675 0.17165849366434485 -0.20304755433065674];
  
  % Layer 2
  b2 = [-5.3175475443284723;1.1444500893266041;-2.7035111323468901;-0.97012730835580252;-1.9174499723042073;-2.858404760649869;0.60816194144673452;-2.5614117857045366;-1.4228801836191634;-0.35284706965975327;-1.9568115346904733];
  LW2_1 = [0.53254583433508296 1.8372051390468218 3.4564309300992537 -2.0478001101321386 0.29778501317074746 0.80678735739129481 -3.8609288250508169 -0.37763727722226731 -0.57841445424133175 -3.0110910050224144 -1.0949359075673271;-0.012328233739236659 -1.9612775965515046 -0.11498184384135361 0.67186141466352656 -0.30651386745811082 0.021148449158149042 0.29428480333657697 -0.87985323451501185 0.024858242045602386 0.86925365136574084 0.27466444367081161;3.4130593816455521 1.9066176325939845 0.63784534344907928 -1.8522909549308724 -0.13746764339702588 1.1964957953137474 -1.9671998883237576 9.708340182009076 -2.5040572995964077 -3.6925289469323137 1.3001938543318934;0.033046474190031629 3.3850317787253101 1.7598800157442098 0.073559661293182865 2.2329697601399796 0.78617446285569981 -1.4191090071446639 3.3565722026121905 -1.8937158774102218 -1.6803437010534412 -0.63923204031946101;-0.059969192852737802 0.90003481202637425 0.67533335631202474 -1.1699574793694503 0.67294356827274582 0.19330957780609209 -3.3161693676426864 0.35680384293409861 0.59487436919387149 0.94769008917277275 0.46489530482194319;-0.27603017595646917 1.2704691183586807 -2.0490696653237372 0.38796288554752467 -2.5135394440132952 -0.25902678176115235 1.0989629719537242 -3.2086969516083625 1.7637771700757774 -0.10272798144621285 -1.3682301727966759;0.98547829215175864 0.49029746539804753 -2.556399000520571 2.4306216056461443 -0.62681900243946387 1.9436477621430437 1.9910044965498628 -2.1368108643673964 -0.040584273789276551 0.96680454013187889 -2.2250287904010624;0.064961740087335976 0.18207782924769944 -0.6125742604508676 -1.4375581125509937 0.25595712757543088 0.21124241500543162 -3.2156232162187632 0.61860048778286381 0.58529438878698692 -0.6937569470835715 -0.55384778499933096;0.21204790627839618 -0.27854013512642894 1.0905420919836177 -0.97635510422385952 -0.072674222589180534 1.1639717048982605 -1.2829328766860424 -0.3432322997573557 0.082734800034404254 1.2559156411160073 1.4782508310248017;-0.016888481137548594 0.5609816231539706 4.870074000029474 -2.4805423438248111 -1.9868495262764609 -0.82287447711016481 -3.2080867315469561 3.2065685068458976 -0.38775414700776056 -0.40432764363858126 -0.93590671873291342;0.32912234895706416 -0.077931319418547487 1.5667621838995938 -1.6011363466500075 -0.072636608853139092 1.653399834630557 -1.6155970449110755 -0.044409268662696719 0.43636342319407628 1.3925143661930801 1.7522352358649922];
  
  % Layer 3
  b3 = 2.3263407376076284;
  LW3_2 = [3.1161223918828171 2.766963951395855 -1.2444047667242466 1.0187342318373085 -1.8449437665277313 0.84012589039428631 -1.0472028302065144 3.2844984291630506 -4.3711553862752348 -1.5038344045970042 2.9191203819523688];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
