function [Y,Xf,Af] = SOXCentro1(X,~,~)
%SOXCENTRO1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:26.
% 
% [Y] = SOXCentro1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.2938772360318138;4.9480752985612426;2.1608225168220696;2.1100328782333078;8.0967104540133352;1.0618546610221165;-0.45938361013391416;1.7540749314792485;1.9762369797221719;-0.67024320381852764;1.1161462902000576;-1.828448036193993;-1.3775319920113958;-4.1400798803939525];
IW1_1 = [6.2227725916546959 0.13606146755949974 -0.80968539669271566 0.51260212261216709 2.7410284970765129 -0.64131298732384434 -1.269717376561081 -0.69898697642587371 -0.82056706501775445 2.0996874376925554 0.058185325863005705;-3.1937273204580063 -1.4786251914775972 0.69587718007588306 -0.50649275548335104 2.8800753410974544 -0.72761655925350166 0.86484883358952569 0.074400556526037512 -1.1475030171588936 4.9490710932680955 -4.0065792643394493;0.17472796153508288 -0.53610190459421336 0.033186060343179315 -0.31850757313121958 0.18464895981868051 -0.27257865027547357 0.4882280139648561 1.062647254790511 0.62439333130928398 -0.2000412530938972 -0.8785357310581714;3.2176796585128162 -0.07175446593844105 -0.39488462116522671 -0.4618507251925511 1.1443654468372635 -0.7759320971538558 5.034801224966726 -0.057765369171467212 -0.23118341459054154 -3.5724501599678793 -0.76721095497364011;-3.6376139294415988 -0.53110151400063454 -0.21402640025270839 -0.56917923524371239 1.8792543675959221 -0.76521034561193757 7.869400103973625 0.22809072836242444 0.21057264481214474 2.4572591376985393 -1.7311209479006124;-1.1920963347699138 -0.25583249815423476 -1.0602599498075578 0.029920673882755371 0.027313923860048897 -0.52807682772215336 1.4926610630207038 0.27675823186168524 -0.33806104928461883 1.7028616556403835 -1.5010271715505694;0.32682421960433333 0.29535139422146511 0.55596218681856902 0.50493515344559869 0.60286724295617855 0.46390753984167027 2.1337246852096996 0.47347086995955601 -0.7120787010763705 -1.499681656249815 -0.82522034784437315;-3.0983171919020993 -0.14559802202090744 -0.91585801502964315 -0.074656927087185854 -0.13721718282196621 0.054039854446269263 1.4674617911051226 -0.090081535501983501 -0.018625611016065597 1.7916098817680872 0.0099618758048720477;-2.0332167805466184 -1.4263910595436415 -1.0490049220831548 -1.4012913957324127 4.0218911769079755 -1.8557918108682934 0.61449784523738371 0.050145046545039679 -0.86552414006884226 1.8905307276861327 -2.2210184814750811;3.2155216697996392 -1.090612024846658 0.4990333347653978 -0.31650618700659983 -0.50601314217046744 0.77910495849830186 0.78267670825069868 0.66742171197662625 -0.26312932900157132 2.4771232352696364 -1.1962398978952233;0.72379750006675769 0.98623098141988164 -0.082341887792141952 -2.0267359632934734 -2.1973598276535746 -2.6160511318272772 4.1768681427960628 1.8944962712764182 -0.10621894929090094 1.9809009595426517 -1.8199406970062775;0.31420251966289681 0.28577398184594116 -0.19102127548876432 0.93943093545873457 -0.0013599442654349016 0.87327315096510838 0.42524448652670943 0.30084072310748611 -0.50064039659953952 0.039866840272376705 0.71627337266060354;-1.2637967762866462 -0.2579710522248464 -0.68053473175125778 -1.243064325139438 -0.073221754589638255 0.20622099617734824 2.1870633461268523 -0.16225372089852369 0.99117088540305665 -0.077396899508202777 -1.5483250926911307;-1.4948062716817048 0.25273279734928439 0.19873730309304621 0.23713021860299288 0.33017951424080971 -0.080658725495508718 0.93363051575988409 -0.075651251090999044 -0.43615482267575156 -3.5003331616170983 0.24560006738219264];

% Layer 2
b2 = [-1.2343695346844421;-1.5570135715555351;-1.044970497578408;0.61862018644842887;2.62092024245394;-0.79874802108949994;2.7489043799683506;-0.013150780515789258;0.018433105812265912;0.64445020017930732;2.9666682204831352;-0.35285540330347664;-1.6299389780224516;-1.6637779014579714];
LW2_1 = [-0.29579699581455687 -0.1200186916541969 1.5435020957243757 -0.19613720870540913 0.8417880974001638 -0.63956002946739243 -0.71081754029797783 -0.85505715980801456 0.091519752960657841 1.6713144790049912 -0.27688054153234165 -0.6482072784833961 -0.45379384955222912 0.39629899468447605;-1.286974334930433 1.1206174944555929 -0.46211984674268752 -1.4881109501656913 -1.6436535723436134 0.90791351088443994 0.31605486750214795 -0.94580150912795757 -0.55286983014743163 -0.43372744548127357 0.21105891659360684 0.52953148816866358 0.16316391313275391 0.51182998461129703;0.54617652773743419 0.15139764566532626 -0.55108895928356749 0.3045896113572884 -1.1398910448387825 0.62799505852351056 0.28971907234470418 0.22081102143931003 -0.0091736828088610674 0.040990091189490388 -0.048659790481638446 0.42590307391991239 0.41162981990501618 -0.53757256793686192;0.046927198614369309 0.32608204041462446 0.060821340814391459 -0.22310235891211183 -0.74720682353199463 0.93679015724707859 0.3745736428899662 -0.071034196458206258 -0.17203325922346024 -1.6212458889638788 0.1841778630191365 0.49327660924979932 0.42528639475898511 1.5091236483067652;-4.3974018649459943 -4.6422667678271781 2.1070814588528579 -0.76686128535193498 5.534736013668498 -0.44787010069465888 1.5970297336530108 0.74771168878336836 5.6571292317214592 0.093533524671194621 -1.5090604832594074 -1.332654305470544 -3.1926057867670394 -3.2825945793045492;0.87167639594806734 -0.34544949566145611 -0.9553998695981083 -0.75608331205442547 -0.065846292220994335 -1.7153963091684892 0.61176800785270802 -0.15365265203452921 -0.17725675523335815 -0.44835160694666909 -0.036733788702743631 0.38992623320603598 0.75719995633026571 -0.17042704212565316;-4.5052160684650975 -4.7547988218302502 2.1366993209217102 -4.599540239637439 5.5091212987086262 -0.42011049487966312 1.6774553991508705 -3.3234954608067064 5.7698224300854459 0.095023557937557568 -1.5471126438241714 -3.2193221497657931 -3.0339795154812412 -1.3178000482351986;0.30760475136751653 0.55127627926411449 -0.16575997058181127 -0.77354013317267212 -0.21636357086045011 -0.62097402850777761 0.041826049848393228 -0.61699101548070012 -0.014084503599453624 0.65654171212844825 0.34724956181558736 0.83627019405470859 0.53664832833157528 0.84247202037403035;-0.6225867385613757 -0.8037060718782898 0.16539761033710118 0.25828601815251545 0.49405064372096313 -0.34205532769718511 -0.50441715757948835 0.78900768677573141 1.3116537756610829 -0.77191207422240482 0.4490143935720019 -0.97421602537775465 -0.58816993863895739 -0.70717074927493906;-0.41810964600232498 0.18178020414480167 1.2706296580288396 -0.41672642572688712 0.69886330380185047 -0.14583585938391597 -0.8503912977311392 -1.4864751220980277 -0.11411653395816888 1.6056645321818497 -0.25370990650386782 0.36262810405135748 -0.34201290589215538 1.240158251868539;-0.79913867723155352 0.32597805956554782 1.2456524737808576 0.63438822606864853 1.1290394233398171 -0.88470520874017144 0.075444915736752577 -0.25257660187377778 -0.4652373972448316 2.1500624266639279 0.0029615215164512758 -1.8940263104171278 -0.41984453882573003 2.0263363397905612;0.19793150705649609 0.062267449964309607 0.36878791104752107 -0.03683135061717218 0.4679000883670642 -0.26639244247765131 -0.65697049429512322 -0.74237327797883457 -0.056519543535305507 2.0345352486467201 -0.17364870166585913 -1.2355717049731827 -0.31124765636547891 -0.74106399831982428;0.64686732891786036 0.44715398734322348 1.5328030464557179 -0.063684804415117563 -1.3713975157428184 0.63448734568168241 0.25765265665769194 0.23747991117395151 -0.076636855657808117 -0.31025510983135723 0.15910550425813308 0.86097518568230402 0.28301982382484281 -0.28689583068460561;-0.36788007409971479 -0.44908513422276947 -0.65281739558871876 0.36335827511552099 0.34208864799343619 -0.5409605298860688 0.45272780743286178 0.83973315673239457 -0.42324556150886644 0.27280807396338935 0.36099120844201105 0.61221379113398389 -0.24587874241197419 0.91609958754700394];

% Layer 3
b3 = -0.20217062117242424;
LW3_2 = [-1.1579011531401566 -0.15447004135692366 -0.85894046121574641 -0.84367109490844239 5.0584595159759722 0.35682520913152788 -4.958522191499231 -0.28767221637313239 -0.11748877063836566 0.990227379980267 -1.7348845801523956 -0.59110518841450543 0.42541968507466105 -0.42900862539819989];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
