function [Y,Xf,Af] = PM10LomaDorada10(X,~,~)
%PM10LOMADORADA10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:11.
% 
% [Y] = PM10LomaDorada10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;0.00462534690101758];
x1_step1_ymin = -1;

% Layer 1
b1 = [-6.2710306283871686;0.32544665009526397;1.7920181955485155;0.61879480807013865;-3.2805020358603629;-5.2530570680287205;0.31795694150994414;0.018100814099296265;0.069061259618926313;-1.3245813414384606;5.8414094264278962;-1.5292126483449937;-1.539287311537346;0.25571293289939945];
IW1_1 = [4.508751329954003 0.84604150259041067 3.6180540099797178 -1.2124261628742037 -3.1492603049642076 -0.72041575798901347 -0.5625418051523684;-1.7040616362671093 2.0307231848135894 2.3690924330605467 -2.5357439982046794 0.27361356142913451 -1.2016520174042635 1.6603253643934694;1.3565824992680644 1.1515754312184756 -0.56805699457103853 3.6045286096686842 1.4269136341996094 -2.789691732716201 0.032949976409753827;-1.0072488475461534 0.7374767095488749 -0.005001247271148021 -0.7287010547262035 0.22461170541819192 1.2111703925298456 -0.29631526809054448;5.6871541496014411 -1.6879087470344387 0.55750912947970221 -0.90286022554871848 -0.078781346032019903 -1.473343244732721 -0.77086926352572716;-3.0048738558874346 -0.53915176036151824 -2.9398171874719274 4.2019652025402667 -0.11072745247484174 -5.8849064342806496 0.95732382679441186;-0.31164203132260049 3.3018989717978222 -6.8008144781383928 -6.43441825590231 0.066583755603566608 -5.5053908835039396 1.3553485004812753;0.1448628963495435 0.84928319247239636 0.024988063527705738 0.130358753362775 -0.0054745233102983602 0.28596478435973449 0.16548126799190641;1.8120363043933012 -0.95530013710665496 -0.96849316081579295 2.0456602357823246 -0.27110249784012719 0.046802609830794643 0.17659135082485566;0.54801509615530675 1.3270725480112064 -0.29997188105218614 -1.7615183947046369 0.38590677272119667 -0.37230158458661711 -0.72855777104252162;4.7567200207225788 0.87872424612194378 2.279644565831644 -3.9312151769662269 -0.010936928528533828 10.384332446363789 -5.0459464027963978;-6.2119391783436706 3.4030263031090699 1.8905922550500593 -1.0055111428861589 3.20566335887061 0.16868830808860849 0.06060461456833699;0.18869037160753077 -1.9364258712397531 2.4448437758718344 -8.4514377947987995 2.4470024243701065 3.1133511942789189 1.4963890458423079;-0.17436661615707461 -1.3040517516537509 -0.63201066475219658 -0.072037037515822994 0.13984036427891638 2.0519182490193284 0.72284753169492499];

% Layer 2
b2 = [-5.3246503713809981;-8.0979762642058652;1.3669703051989555;-7.8299544722709591;-5.4356117148151961;-0.89714523909498245;-6.4860152406479772;-1.4911529808887503;-1.3583475060315102;4.2813895726978739;0.10513077117531505;3.5055258569636956;-6.997746977414784;-3.2722072128872801];
LW2_1 = [4.742174358602516 -1.0283116568042583 6.2110337313140311 -5.4657094985294412 -6.2019220681811218 5.4088105739938914 -1.8023430976926107 -7.7252553001875057 -0.97774779244080123 4.7295423939125039 4.418646113473585 -6.966347348568017 3.364126813034682 -0.049483394962435964;-0.012828254624973301 -0.19099091310222932 -0.32538065069539668 -0.87371060707312054 0.2242641400078445 -0.62468840815857885 3.1553345052987614 1.2602349814039153 -0.44314123971403829 0.99671019930941074 0.20158508261472571 0.49897820068926868 -5.0945321138791373 3.2625808655299764;2.6510898484336773 1.2203549418166084 -3.1365204808341542 5.0815720276212453 3.3005566098220984 -3.8958386423564355 -2.1470715728942094 0.9015839891669345 2.7503940430637321 -2.4779014190804625 -2.2201264296513976 1.51527307963645 1.7152452549186572 -7.3030071913277137;-5.9130359753820398 5.5229994347505071 -3.0647992348817779 -7.6743068895227191 0.24772618450943357 -2.5213806683567559 2.9720462840729769 4.193715374304996 1.4067923420792781 -6.1963390543473729 2.352546356425421 0.53584902598515483 -4.1063329951902858 -0.58845623497642108;5.3519382677860525 2.5572888084257812 2.1589972756098605 8.0321069727988448 10.39040918657912 2.8620822010311544 -6.8468519900553657 -14.584757234017944 2.7202584811516193 -1.4728473384228413 4.4773181337759809 3.50558422536864 -2.8156130412946618 -3.065015251825888;0.73714285987355022 1.4992151299840724 0.044168338101234869 3.9056666007364078 0.99676999565870772 -2.5640350031821981 -0.066164005277408053 -7.2380820324871449 4.2359660789112352 -1.1944550931591329 0.35888119818905406 -0.064280636441198649 1.0069579712437038 0.12738764016744419;-1.0400182225444194 2.8790021487399362 0.7932211420558013 0.28902701650663615 -0.55728075867122095 -2.5299077965763077 -1.0375230467680978 -0.49220298218301139 1.3618546541567178 2.6028537118887369 -0.091962255563139569 -0.95164754872282942 -1.711328927605555 0.90243779552027525;-1.0450448415235216 2.7293146181269377 -1.2114405284874312 2.0617458029441291 9.2721795997589496 3.4374636402524557 0.53502691410706915 4.5715947450107102 3.1064482040590473 -5.8248503652793762 6.4140831864685897 1.2070794089213757 -0.028218558025715962 0.94993868993071173;0.95302547320877629 0.021054131364437567 -0.89052865736663911 2.6315826452839421 -0.460494116786548 0.89772384371451375 6.266496502335972 -8.8730375298788946 -2.2021323297592064 -0.61687453614608634 -0.20785310089460338 -5.3607893306342476 -1.8789939825956412 0.58864147152005841;-3.9997814755585899 -0.78941163871769249 0.62646211715289957 5.4003879462233026 -4.2178818048161135 1.117837616236222 -3.6976437545364131 5.7370410962742229 5.8600913151838379 5.2448351111981628 -0.1462957185189899 -7.1784840101907594 0.97302913640584265 3.4206962176761353;3.8906254498109671 3.2510815157398714 6.9911900884853742 -2.3603877748857265 -3.2792621889246902 1.5648792768796853 2.2912473502716892 -14.216400312565854 4.9839179408986833 4.0872224079156627 1.3563695836942098 -0.051065822994471224 4.416234687057953 0.51200814543998341;1.2871366022745592 -0.16944747103347024 -0.89929577611178257 -8.9669081916592965 -4.2727333778889083 6.6938724784781005 2.2195981239720801 -7.1982077974653604 7.993934348115765 2.6810440874698949 -3.8634932237660751 -1.4669955827640087 -0.62392133884474565 1.1413097727724162;-1.7803473886693209 -8.4593422569613033 3.1686949508703659 3.3808114563030052 -7.861868668606804 -6.4637346739629784 -1.3830845135325278 10.051382910557832 7.8522529866178745 6.8140193479716267 -11.318377154801265 -8.5621525424828313 -2.5438603088268841 7.5059512493350242;-0.25132954708191491 2.4027806375505993 -1.4620946817986411 -1.985700488092242 -7.123186046809125 -6.2342843554936174 5.397677466528866 2.018287648329216 8.7479912845337253 -1.2848302601201778 -4.3071696923461866 0.96449861293440753 -0.51158129254192886 1.9479706745535994];

% Layer 3
b3 = 1.8311473331337367;
LW3_2 = [0.037746739907228342 2.4280265751592944 -0.062545224015560799 -0.047619951694203272 -0.089777223192650982 0.11548629975164681 0.077258959817793654 0.053706213590018065 -0.14318291188245838 -0.037410652343189174 -0.022221064058848303 0.020228264595167633 0.10324593480971671 0.068159441743083179];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
