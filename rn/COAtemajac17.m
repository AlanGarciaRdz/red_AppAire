function [Y,Xf,Af] = COAtemajac17(X,~,~)
%COATEMAJAC17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:26.
% 
% [Y] = COAtemajac17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.3212554618720573;-4.6616612452874335;-0.81768661602884884;3.269833933207321;1.5017778802623627;-0.31422524698457288;-1.3774636151639243;0.70341323995057903;1.5907001129559526;-1.9988858848516724;1.6412444459431967;3.1213992188787683];
IW1_1 = [-3.3810433703597025 0.86831537604686782 -1.5680734039269915 -1.0415313285850401 0.48675392179637783 1.2567987390337516 1.1255380038197287 -0.10811479240288013 0.090826244366149528 -0.32680807283627955;-0.44605142365394346 8.1454798065251879 -0.41528923394694495 0.20764428711588037 -0.37825841866537735 -1.3377783355284445 -0.049002930225138373 0.2801752493162557 -0.43436398639055918 -0.085332101240779445;2.0697597802103873 1.0095577992339266 0.8485760683507807 -0.27520611653029109 -0.084419833606716899 0.57776624539171617 -0.013638669298283427 -1.6424715004458821 0.12921137358633542 0.29580001631992253;-3.1574045774532866 -0.026195880530695711 4.1717185284252398 -0.99085460578728823 -1.8306592870666818 4.1525194447574876 -3.0775355704705238 -2.290687733947304 -1.2646889392341252 -2.5615831435221939;-0.92615469979165344 3.0759357192253454 -0.22061738700911718 0.11854443521620656 0.052907625289402009 -0.65076181256982812 0.069327472304924032 -0.62213815558022478 -0.16648294925036447 -0.21710209723535218;-2.7702530699750545 -0.35885867034409341 -2.2269065989662264 -0.9063829063890122 1.0432717794170545 -1.3035419406384345 1.1207637971701216 -1.1858815599815697 0.16963742307507385 -0.22868862096407339;-0.8361951422010051 1.6395766396067615 -0.49341001322736272 0.092498700871118972 -0.17753870423294874 -1.389600186970559 0.077201690223091396 -0.23574288724123177 -0.066063186027006393 -0.80386183849445036;0.91516807842114323 2.2225341974607042 0.16396516220622709 -0.22418587257513961 0.18226748541106255 0.63512442396838531 0.010341124480762914 -0.13490609506156473 0.086688201282805827 0.48198287961377567;0.41249944829539731 1.3970137759460082 0.061889537316428538 -0.93527777928599176 1.7993549380646026 1.2020804571804529 0.32881629262337503 -0.57520554394477741 0.32651205919169168 0.71206495187322794;0.14309181365888823 0.59815239067532078 1.9065505140852599 1.5723681122756343 -2.027558844781137 -2.0282718184925885 -0.47350672810286976 -1.2824328875307731 0.13249504076000151 -0.38999436372986357;1.3361812056567031 0.2305233429614352 0.11782108399271998 -0.22204965078711589 -0.02842161526777006 0.95666657581361725 -0.0059457240221526264 -0.12179629575220395 0.11215935647656554 0.55997652959362121;2.9960673290330502 2.3177291829550901 0.44525982425025029 -0.37827405991382457 -1.1776992439307234 1.0186867818067704 -0.35026195490991752 3.757706964068519 0.079723133103802357 -0.2963944433659258];

% Layer 2
b2 = [-2.6452994423977159;0.27786682690059705;3.2493252953656135;-0.11666190049933556;0.020173194608881374;-3.937392681822506;-1.0517105654553722;-0.61044738075156724;0.090312051880652902;0.6739371676479895;-1.9763235875888738;3.1332372425461972];
LW2_1 = [-0.34274283568389002 -0.71133255654958161 -1.0763368196413221 0.1258568123946302 -1.9137575638684119 -0.48030016239033269 -0.76705575492658451 1.9013688572903373 0.3313527151178694 -0.88117571571645514 -1.6169674461887205 -0.25831586672253248;-0.99807591223366687 -1.4261626721374208 0.63616455368111402 -0.024402266279609442 -0.10148308082198308 -1.1322309760253428 1.3061308983039992 -1.7151059246315228 1.1152696254932817 0.5165098379122397 1.5373530606473649 -0.29091562297787571;-0.48016959026354866 3.1490277080787417 1.0762973138320027 1.6623512855161067 2.3934865290951626 2.1324860984800744 0.22882568104775994 0.17110901788007871 -0.21173813603822422 -3.363296305852709 1.5424242818712226 0.74232064791712171;1.0692255579426251 1.4553985698281047 -0.23686415601372626 -0.35879127898380242 1.4543610395991808 -0.61848384281667346 -1.0329887328638974 -0.2455953670846571 0.3285789170817866 0.5260669933857931 0.2437251500947738 0.41267871818471652;-0.026553752078803193 -0.69452073883585486 0.59285431634914632 0.15154453072088717 0.50000902222432542 0.51097395126325951 -0.90733476122601298 -1.6620670841010019 0.014336605862774458 -0.32082706936096406 1.0609843838389068 -0.20914141249262769;-0.35045649916102395 1.139430138254192 2.0910517962933262 -0.30901151402969573 0.42988080117583355 -0.65340710016674153 -3.1636855498148413 -4.6966399680899533 0.5006400321562523 -1.5927203514339583 -1.5546072141476159 -0.011066833125943715;0.2748104149587216 -0.63222543525664798 0.51824109740858337 0.2251608186868444 1.6445832125472737 0.52418373031239518 -1.1651113596587293 -1.6782480493404903 0.055304175052139193 -0.3406360536772064 0.43964455906789185 -0.012095153945093095;0.14542336280522772 -0.84109217774571265 0.77595108697936599 0.073954652183935154 0.23008443796101397 0.61581951670358914 -0.72144244275043523 0.10826518416018964 -0.37753820682009021 -0.27262264590077651 -0.042001032262825484 0.31201177302989513;-6.7976508695387938 -2.2664273202903193 -0.38514696308471547 0.85767534521885913 -0.089860060655467588 -4.0878118046759182 2.3971784425371223 -1.1262174277132861 -0.27137407480531323 -2.8551650911608979 0.36469795733028304 -0.44130266481882569;0.77001966014872347 0.93974321370110236 0.07909522890413577 -0.42311757441448195 1.3598061255290383 -0.69982692919691203 -0.9355433789994958 -0.18635093629187058 0.32336947788479192 0.41750481655919119 0.13371707892575152 -0.083155069127177642;-4.3741688267593002 0.56727861042304151 3.5353317236896111 -0.18694506911893718 -0.9338122830716844 0.40856377309263869 3.3451014435063455 -0.27167514842952079 -2.3286399500281107 -3.0775385801601445 -1.6310568075627028 1.5642396976034605;0.76073793861609662 2.0856645084999101 -0.98522857746844561 -2.9932231980737156 0.74279531944486166 1.2470272796751722 -1.3107213576346686 -2.1362707208703569 0.30140122851503182 -0.89915792759731317 -0.17025594289526447 0.54399276165947186];

% Layer 3
b3 = 1.2440056904522179;
LW3_2 = [1.011595919405162 0.22218325328971059 -1.9547965920018788 -1.3606111054189505 -2.7892331106502137 -0.43238473898048979 1.5891174945867461 1.228565877061282 0.10614897241769611 1.3164561205440788 -0.58392907932129456 0.21921490428211807];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
