function [Y,Xf,Af] = COLasPintas14(X,~,~)
%COLASPINTAS14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:01.
% 
% [Y] = COLasPintas14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.241545893719807;14.7058823529412;0.0179856115107914;0.0558659217877095;0.00576368876080692;0.212765957446809];
x1_step1_ymin = -1;

% Layer 1
b1 = [4.9457496476207332;9.2034277003517371;1.928004820394785;-2.9080926004919996;-0.96776039295031979;-0.79090158982025738;0.3702322964259297;-1.5782556094968998;0.54735643556372082;-5.8373922521869623;-1.2285810458835971];
IW1_1 = [-1.8373847953908176 -0.072889856579936491 1.4481869415792712 0.61389612566418483 -2.77819723334397 -2.2871015250036595 -0.10343099385385808 0.14834772728192644;-0.77543748260379985 0.0083575287218101701 9.5055849018234184 0.64293220748609625 -0.45752352453630951 -0.33387612786254717 -1.9551378604536749 1.1467907160754733;-0.51688620395815954 0.092152558960277214 -1.1935205271406528 1.6290345400385922 0.50398575781041111 -1.0550756782399668 0.48616349964736993 -0.77818788429361818;1.1368411711855837 -2.4403395637073686 -1.7976574519480946 -0.65174292610909812 -0.07129671102059322 -0.23987759041971765 -0.2063224650199364 0.013878235164199188;1.7758558256630002 1.1480117463911959 -0.18596459775513269 -0.32566877239693043 0.0835680661586235 -0.93527643841528341 -0.23433388321388174 -0.13185090352263026;-0.18911579951386379 1.7597408381909141 0.25760060341194374 -0.060567628230388915 0.062389242035908531 0.19570510136724362 0.2456667162666579 -0.022903446507543758;0.41602087311535441 -0.27524762970597821 0.016834636672912191 0.011223180054067444 -0.025127630651972595 -0.098120976984280128 0.04806364704523354 -0.054805223919408605;0.43189753080150556 -2.1132750997194782 0.59415209180527195 -0.45130193316605099 -0.13206941140787415 1.478377341049685 0.50463728124221563 -0.97645261605195288;1.7475175149456146 5.4659104549864308 1.0963758713600982 0.31985939142698711 0.32383463510906257 -1.0390429793308067 0.24816009917804233 0.22211837092574596;-7.5294780898799338 0.25942562046267559 -0.49310787222821933 -0.049638865211673336 0.08146934039790113 -0.13149552992501728 0.013168355968129878 -0.42667213626829753;-0.45940576837691871 0.82537381864332648 -0.50284647321814768 0.017147912770282936 -0.42726280559853058 0.3742585542143968 -1.5790934173302182 0.53772467583918859];

% Layer 2
b2 = [-5.1740951795016397;2.3462353573710364;-0.41653650930196262;2.9198557370299616;0.45159533347349673;-7.1382077754511375;-0.16408786406358061;-2.4537046150600279;-4.5834286135499989;-4.6576832426084041;-2.9587538000922855];
LW2_1 = [2.880896654153883 0.689426390899195 3.8396309000513988 1.6659344521035355 0.66274354973649507 2.0465117532144337 3.5527637927630074 0.45820883429893056 -0.71139927793600344 -0.014730885737686938 -1.0307689015348611;0.24133411368939373 0.10288310230013081 -0.61170774573090814 1.9023204992712361 -0.75041345839345108 -2.2188995417005239 -0.56262136654681805 -0.27408493363460629 -0.35801859136212916 -0.41746191508474639 -0.8107739372929661;-0.51752545399807959 -0.061823516431474934 1.1718905884097022 0.92463960503212439 0.53286541689464462 3.022959904575437 1.2152683037424099 -0.40191658252113399 -0.30463978950607662 0.29755643954496597 1.0794273351466519;-2.6295439231458806 0.25255358792837418 0.56592182195701468 0.11999486410080762 0.37020751906069288 1.0381289106621838 2.7879414760228141 -0.021236095560536575 -0.57888034006130973 0.17986266681869487 -0.018537871762675264;-0.86828399515457677 0.042437059750127099 -1.1176511227662944 -0.85952350241712905 1.0445024682873325 0.98540078199933312 -0.035230858237959302 -0.2997722253347242 -0.22718527997949292 -0.71423294961572159 -0.013432918055908752;0.61917819465644997 -0.57452646024599119 -2.396941914951404 -0.089702387497896122 -8.5853787178882772 0.62817839266395681 1.944811219091463 -0.18910474628441282 0.46152241451177345 0.4597260779560311 1.067663286567708;0.98729240605683266 -0.42847429979269946 0.65953592205597578 0.14680174678026592 -1.0107503497827273 -2.5332237065089944 -2.1876392312749942 0.38865366974246079 0.63800114104157979 1.6158770106886897 -0.43271190550222816;-2.4104665837642769 -0.084100182375932531 2.3777802378282296 0.28330824605897664 -0.67351289087419886 -0.5262536685182021 1.9140179505480388 -0.79140404055472846 0.62458672004942928 -3.0740209421885836 0.056979648081917092;-0.40312062225487705 0.73061931552202175 2.9942099122636647 4.1307242421494639 1.897749444778891 -0.47134426785780353 -4.1784044131434293 1.7833900373353979 3.2353216344580389 -0.79657712936252445 -1.4204057298401209;-1.2992940129092729 0.18945307076282999 2.7208334316598686 -0.34675377569566873 1.9755608122765231 -1.3368455972245665 0.70117965358746281 -1.4850137430733656 0.15445775503224268 1.3253452517996034 -0.67832127726885494;-1.5305810661929331 0.10407386079212058 2.0543863628120058 0.38058836717495242 -0.37461743049409774 -0.18501560595701216 1.9980118604948733 -0.51155866798107907 -0.47069789633868248 -2.1298589520300464 0.17748361586724684];

% Layer 3
b3 = -0.66554485955764608;
LW3_2 = [-0.1448874000810878 -1.7158220528495076 -1.4349036514249554 1.0315688830259726 -0.96039175610059591 1.0015552817929434 -0.25561676064637084 0.54712210640981029 -0.20019701280888572 0.50278362473831528 -0.55143186599116256];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
