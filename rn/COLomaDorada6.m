function [Y,Xf,Af] = COLomaDorada6(X,~,~)
%COLOMADORADA6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:37.
% 
% [Y] = COLomaDorada6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.290275761973875;17.6991150442478;0.00572573718866304;0.0175284837861525;0.0546448087431694];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.8870445131307467;2.310302605746112;-1.8939306931863915;2.0629925816333574;-0.90750930229903803;0.035893290979209361;-5.1360839416335553;-1.0290140519459741;0.94399073395256616;1.6512379153767316;2.4072264797544007;-1.8279817119439352;2.312866380216136;-3.2337197305092591];
IW1_1 = [0.080932037164305332 4.2262667429118732 -1.3313491985849495 0.18246970450809433 0.63339690511544289 -0.099277361289258431 -0.30934204799904241;0.32946269800306366 -1.2313940432362585 -0.73432493833524182 -0.73352971375729814 0.33505751556799301 0.90468564681628627 -1.3541110023535707;1.7077307878736967 0.32324735014080286 0.54755530338142688 1.2039227265796126 -0.65115894463334512 -2.2917952660286711 -0.83928456843065402;-3.3369719036599239 0.22879710282316762 0.36047804710204079 0.80365443523622471 -2.5952627932562589 -0.67209131347480966 -0.64753567260112455;-0.023329072393001655 0.23029111834206656 -0.19108351080825756 0.60667908986647712 -0.64219397329897365 -0.062497728862222948 0.46669644867014415;-0.46300263809421494 -1.6337530843741268 -0.48116489264554946 0.82088046170734752 0.41835741707303986 -0.7834020329688669 0.065671230322057961;-8.7430377793901801 0.59370432857878686 0.32034883208252285 -0.11630003364231621 0.35440862193358336 0.11828318602938666 -0.15502022655558551;-0.66896854088562563 0.71479391681578641 -2.2404584792469646 0.048568130685606101 1.7575699895057912 -0.76923418899784735 0.1496880534104022;-0.87780718610256092 -1.0060085717627836 0.2537942548000387 0.080147420849920686 0.2362496278538021 -1.7235253608053227 -1.0955846318154734;-0.36884370540766986 -0.21036352421055285 -1.5668486374188417 0.081729189593522017 -0.16875486157015071 1.0572867738473581 -1.3625171042603375;2.5417182975072015 1.4851119075642714 -0.25337383337313968 0.50855340683530836 -1.2579489802828145 1.0485262758959897 -0.38348075176340313;-0.34475021465070205 -2.8135066155862227 -1.147799067736605 -0.043804354020848042 1.4401488369458941 0.01035419458671762 0.45505994063496391;2.0015218037643221 -1.1563060939330654 -1.5122501920718436 0.12059596017254029 -0.56367986172686702 0.17813437954034428 0.11007892141879258;0.36535917308684834 -3.6483212559376641 0.83934334257072785 0.25315552752214421 -1.4793424455936672 -0.35990805299171857 0.088562908114994288];

% Layer 2
b2 = [-1.3922761714816692;2.0265882577754044;0.81556002810036055;-0.94517470257861735;0.50314811278685911;-0.90856001119811847;-0.7300211693365537;-0.12817333064833356;0.5007023327251594;-1.1546502505958074;-0.40690705559355772;-1.6471316237279874;-1.6231838914385588;1.7448961140302035];
LW2_1 = [0.24519932003204203 -0.16335207292264595 -0.095060767885240247 -0.91953089766620177 1.2150635304481938 -0.17724195035223567 0.59448317163543585 -0.054315152197881821 -1.0254592227083117 -0.345164653590675 -0.75000951068962374 -0.51304516681999868 0.11998949416644054 -1.0868624487990362;-0.58797395444498657 -0.20985867862005156 -0.099243293319704079 -0.50382761170516432 -0.29661344090351227 -1.044200776379812 0.21930511058712521 0.063751445350988228 0.30781524790309661 -1.1131677783814111 -1.1278943867648914 0.27240572484744602 1.0943471492610546 -0.64890122697698849;-0.74929785636829438 -0.54348863437073403 -0.096253426673465231 -0.14046072994518219 1.1838110469518714 -1.62106494650477 0.1756059004495453 0.74284096064333938 0.81062308765686397 -0.094210107263401163 0.98863871273232717 0.43537945610392287 0.68633871117922651 0.61351687946006739;0.53400234797952773 0.56635417981367198 0.11949272416734834 0.20248894901322601 0.36739982214675443 0.70682743136888726 0.021590070901631241 -0.59617020733309434 -0.060964773981030819 0.11503931416962401 0.8329942224928516 -0.8898458512985552 -0.59797992029456026 1.0272111980051828;0.5735011095225323 -0.43727220318302129 0.25882388258879863 0.37536729303252558 1.4412600262015678 0.10691782709840447 -0.028641990719734341 -0.27925365316835643 0.048082374039682851 -0.036917166401196438 0.28756911977168625 -0.75028106316055132 0.35589095282791017 -1.1464746628400415;-0.35564355858191199 -0.43570654018658567 -0.85362915338377887 1.0006615764827713 -0.19205387183968289 -0.73783209544553008 -0.1471923362644357 0.79513775963475841 0.63816184377811158 0.43591522051203724 -1.49837805481037 0.79355427555318414 1.2203241486075913 0.16919651231361732;-0.20262716363122457 0.86225126662674845 -0.7085750399890155 1.0132634880485811 0.95077442360442377 -0.89309572874806198 0.63365388874770934 0.43011816181253437 1.003995369387948 -2.0357597018830718 1.6374892580306009 0.12195561424490559 0.76300816035991104 0.99412674228174813;-0.94928040877157094 -0.66695354441993127 0.71864450499713972 1.5873280594467047 -0.084739848174722604 0.15367832362025569 1.796491949324089 -0.06233700983008536 -0.029518916671185537 -0.84305149555792913 1.1929437027013166 2.3972706293837542 -0.76297398624605828 -0.97286070637918121;0.98892047631522095 0.55211051455080784 0.059938342498625605 0.60687222735845392 -1.9326744534045588 -0.17964714494307965 0.083595193492953496 -0.47512682766221026 -0.66352302513006423 -0.96436466021933798 -0.034581922780198698 0.80331532129546812 -0.90978373003537438 1.6635356394365997;-0.5702277192625772 -0.40800018019786832 0.090654016978404028 -0.1344851541203089 -0.1074180050156229 0.48576341157399183 2.1044971953707532 -0.10736320353302387 0.55115699715936639 0.0081967733071693586 0.65411243008471742 1.1253575704106553 -0.10438807290836481 0.06271125382623971;-1.5781395170647101 0.17401563001111034 0.52878850318786497 -0.56039355608434993 0.38947252293694057 -0.733585976656289 0.42008575976272405 -0.028880149303242959 -0.030994041647744115 0.15231898129383797 -0.21659575055621286 0.031608279008124601 -0.14428611811212991 1.0608666015821249;0.068547120441214943 -0.14923844310202539 1.046141440868156 -0.19612337292954166 0.51457969434753714 -0.31772793797843141 -0.14939906109871687 -1.1433553637837288 -0.2229827104867961 1.3328305753282959 1.312630784794808 -0.2683123302335424 -0.2934468237986454 1.681824795074524;-0.25017800058864414 -0.26960395932998799 -0.19924769277658966 -0.18364193939417597 -0.57828138730849865 -0.74215292313342307 0.16489636155800766 -0.19165739770451345 0.18492405258491046 0.65458566128828444 -0.62578050865468249 -0.478142456881819 0.24751871714930607 1.5798312150677192;0.033264548766655244 0.81892981554250632 0.52413051899870111 0.055034399734546852 1.3352977723411639 -1.2644855510820658 -1.137973235272685 0.12278324680128197 0.43717617265624958 -0.35437603322564359 0.12965061294967262 0.14501388308455987 -0.40555189526134444 -0.35597187376852241];

% Layer 3
b3 = -0.98345231831303259;
LW3_2 = [-1.0274566214088741 -1.1187549090595541 -1.2195801900579808 -2.0742692639121927 -1.0037241300377364 -1.1795575549710582 1.1800302860730096 -0.71516255073968837 -0.47590559031931484 1.4498285407554827 -1.6924154338684114 0.78992961909865811 1.1553152554085562 1.0947998088046964];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
