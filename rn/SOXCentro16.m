function [Y,Xf,Af] = SOXCentro16(X,~,~)
%SOXCENTRO16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:29.
% 
% [Y] = SOXCentro16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.1767922698613404;-4.6748940447820209;5.9081918307057837;5.838021693532192;-2.9948887940978204;-2.1208597755354139;-3.4796246809706584;3.2025154274254741;0.41038282714484625;1.253372056453564;-2.2621561662721597;1.4582761929160815;-0.95593837852476615];
IW1_1 = [-4.1021152556574947 -0.090968009464952287 -0.25520781375846963 -0.193443616321887 -0.19610524338457203 -0.24420982570678806 -2.2890219914580374 0.28417376828729801 -0.22627777260032289 -1.0799194825695113 0.92390689718746577;2.3806473042078009 0.39653121090780591 -4.1252172196591435 -0.55246486626612745 -1.1485024699834956 0.067901842072873378 -3.5991299356221407 -0.24665977431380479 -0.011414629988819728 2.0757845632401528 2.019075199431279;-4.8218148329515058 -0.82948635501943502 0.25356315929549095 -1.1441778706317849 0.85425669755907552 -2.0191269092087087 1.8039606644648425 0.8707728725810997 -0.23402585020439248 3.9008137970371797 -0.24897237986667647;-0.031956735623054858 0.3046103858610425 -0.64283508227742259 -0.31164296948684894 -0.35991683258967172 0.13194988203949592 9.5144595540741665 -0.2402138497276459 0.050104483825720157 -2.7982446986856426 -0.056129947229569793;3.1531458264804999 -0.12965571755344146 0.21343182154725862 -0.13747550004003581 0.28699038897193119 -0.03386154880107714 -2.4565763787225801 -0.0060446047712990249 -0.54435615027774686 1.8680521007496311 0.067534325592663466;0.68066284448398995 -2.6459757005732571 -1.2260224320162456 -0.24469225275708992 -1.1678321483437009 -0.098268720115458313 5.0245462461839221 0.039719332842154162 -0.85185228754723119 0.34245132549656765 -1.5242470086685627;-0.21547703191708331 -0.98071365986486536 1.6964729093058935 -1.4146676318136444 -8.480602717364512 4.6141671086955389 2.0649479656225176 4.9942802789152907 5.0467398897114162 11.450076996484645 -1.0062006648004163;2.8673655953958983 0.048514279658200342 0.8485991733636985 0.19453218382832979 -1.0039867329101417 0.81693689160478278 0.42106842887492141 -0.0308939160455395 0.40645673846962527 2.6214198513815772 0.73973334107389577;-0.21327288095691727 0.97293146424476562 0.20462408246813407 -0.011975422097714912 -0.64832605111560992 0.70606920213770752 0.25797814506907357 -0.34716860287616513 0.2066580236679727 4.2812279283377368 -1.4951299910468596;-3.7560759521660918 0.24356645010206546 -0.61209685481627907 0.3504129507987031 -0.74593147611691557 1.3347225078006419 2.6405969635684929 -0.39465181979154146 0.57047584735572698 5.4865456508584973 -3.5662714945248122;-0.6412826934903445 -0.66844200028827627 1.0318315089842924 0.38000401435320103 0.18257722503123408 -0.2521808933134424 -5.3792592544957758 0.17155955263634567 0.011824249495165206 0.91669490023984013 0.37903443360732991;-1.973302074923305 -0.89732947508944472 -0.28506419650251014 -0.27777449240600105 -2.0746662946915966 0.11810070633230249 -3.286795345562564 -0.026644665660671273 0.38430698266330859 2.777904311257485 1.4401406168579034;-1.1739281521821099 0.24707377975253481 0.3766893952114595 -0.70296787488484147 0.016815717426776934 -1.2562265618164541 -2.869485475061829 0.43004658637991561 -0.47257051849087184 2.7801574370814555 0.080756643147856397];

% Layer 2
b2 = [4.3836174349653128;-3.4113665981206416;-2.3500867926548259;-1.0128015100734906;0.40110439122914487;-1.5946494731455827;2.6584017328224676;1.903327199834542;0.26876667765965856;-2.8029485243854206;1.1871948064848019;1.6228678490717596;-2.0980055679688636];
LW2_1 = [1.0137592197398613 -2.1617398882074812 -2.8778603236930049 -0.10889005798501694 -0.10392580159098533 -0.30310599156353318 0.727480304694613 3.4984133855435329 -0.89841517586787201 -0.27253852734154377 -0.90401046982045197 -0.1614827164354396 0.92451063912573872;0.58393412416753243 -3.0848651627945713 -1.9243095976934739 -0.12782087655348939 -2.6518879456315383 0.05634634753598345 0.037234665977166292 2.1467373772992167 1.5637892940663698 -2.2160266643633997 -1.5511050628786931 1.9219854196070596 -0.95467007064173326;0.069131677333256134 3.9772786619583358 1.031691479425431 1.320782425027508 -1.3162311678747598 1.6803183707881204 2.8883312965637975 -0.3515937598754435 -0.080329580738885811 -1.9795350300427481 2.5803613094893438 -1.1803421471659641 0.53252330681053284;0.96815469272330246 0.81350089742167508 1.2929711215095943 0.09333603176044189 1.4247101756409959 -0.10364118944045933 -0.71793018674609921 -0.088687031649788001 0.64870359555896018 -0.25595649056379477 -0.10369277547489206 -0.41976350246987892 -0.14655229167470563;-1.4721155493820159 0.27701075689145815 1.9329316595883328 2.3463364110157667 3.9340962812743885 -1.4565504432934722 -0.34154461641919925 1.4098699629532143 1.1814530016743316 -1.6700210106423339 1.4032365121799013 -0.47835221968065678 -0.62349504247219467;0.29163322263489866 1.013610576685418 -0.41944487676022113 -0.80190992290332697 -0.75498700395852325 -0.22356793088124222 0.50190491915954694 0.32558832030843005 -0.28826094337340991 0.38193320895116267 -1.0703149348269272 0.17544483928638044 0.87143722859501582;-0.079848024961866687 -0.96550687621561648 0.78434562969728183 1.2965688677178473 1.0889975847104811 0.26786030375854419 -0.62042789351161343 -0.25567522180834767 1.6334962006995855 -0.57443834338346988 1.445993144525348 -0.27722147690666404 -0.96746474368349589;1.9028804349629018 -0.69720217523558259 -1.4737530218815229 -1.5555129043716078 -3.4807245278593419 1.0498491901082181 4.4476041686504644 -0.91388302976952318 -2.0358298232988008 1.4496862771977947 -0.89097595092392212 0.1377969543728714 0.5936164103250281;1.4515119693411804 -0.54418910326479297 -1.8804023833258146 -2.1642626338191535 -3.8718921410150333 1.3252367799491644 2.33707243341384 -1.1943616624460343 -2.2356676219346223 1.7257438344385276 -1.3334624652721296 0.43607353943641008 0.68548638929854944;-2.4503554495980837 0.75703402384636342 0.95618401884797632 0.4387214333799791 3.1397047680936105 -1.0371464381081754 -3.8177929923719418 0.57747795442955274 0.019623387090609054 -1.0564656069056138 -0.092316911524354381 0.36605599901158675 -0.74159433792325669;1.8395420101970181 -0.18777002233521384 -1.8786302740974339 -2.160926024165144 -3.8804011860472727 1.440302754051322 1.176892804632065 -1.529860535499499 -0.034537197923336843 1.4062170710804356 -1.2147905003009056 0.36453598896058326 0.50373570730311534;1.0411684541551869 -0.13258734796123309 0.17404437480558055 0.42764617168889857 -0.45345452651296986 -0.32296614665352602 0.044247086613848824 0.78460539720137601 -0.79529274545804018 0.042513116090494872 -1.0595149926187963 0.63943923090147758 -1.2296580880525825;-0.45389613771342685 -0.060223154103768939 0.52791887173083407 0.55769040581808582 -0.55602175382489161 -0.29057827809873282 0.36704469103383602 0.48075971180069266 1.2044915776191381 0.45932343121004898 0.38133288151368894 0.83914615252724534 0.51059436291042903];

% Layer 3
b3 = 0.3719003253010596;
LW3_2 = [-0.15813920713766705 0.061503759560350847 -0.1603482633946138 0.17625466340166224 4.7041956783620282 -1.1029428016713645 -1.0501655822180844 -3.8594422112058764 4.4864761073931012 -1.2801027603615653 2.8008522106937899 -0.65461607709229686 0.64234179932688207];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
