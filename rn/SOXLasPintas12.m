function [Y,Xf,Af] = SOXLasPintas12(X,~,~)
%SOXLASPINTAS12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:45.
% 
% [Y] = SOXLasPintas12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.82318452363388095;1.4480147398459329;-0.84463666999322051;-1.1577601556549229;0.67894307326814285;0.13805154329924807;0.29832742228972431;1.0549789766759996;-1.3081424715418322;0.8238095691794145;1.6430326354911831;1.374804820530908];
IW1_1 = [-2.3439651680538152 -1.3264347126514067 0.57673850180440234 -0.28065083671839708 -1.9007599562881221 0.41398310968130941 0.58668276287889864 1.9483945719149474 -0.74769569239462375 -1.0696772845631055 -0.8656097462808815 0.87930106602839797 0.43817346775040156;-0.68455747275292289 0.53075965081741416 -0.097596947213644203 -0.48160854559804167 -0.16778365148562646 -0.37997949981961088 -0.34414880416803284 -0.35420586918141811 0.70171782626551815 -0.57059933920715211 -0.26394723014859522 -0.59649446436869813 -0.55423424267312182;-2.1822898074142931 -1.5361777305655364 1.6681394390087012 -1.599257077446502 -1.7599665051322615 -2.0920401241042588 0.24804728161066802 0.46310762920466864 0.54527186837516761 0.11931536796286193 -1.0267788169988528 -0.19360515643362014 -0.79058494954241743;2.3612561600164348 -0.20370608058045966 0.048651781284390468 0.62437035997320789 0.059668583532202307 0.53952979915565957 -1.3783740088331222 0.1197202968250137 -0.2226839774923707 0.37258521527099869 -0.43616900023886523 -0.3213246449770481 -0.77539994525695388;-1.0243180026578376 -0.45991191290576472 -0.69037621553714257 -0.89490780153498872 -0.68040001812687889 3.8942638118753408 -0.5382990614208969 -0.50985372634007597 0.67337670781606618 0.20235107721744738 -1.5122951952018093 -0.20190648246860796 0.50673337064464785;0.26540520706472537 0.069339748389531469 0.20280346279922376 -0.20673115129773947 0.14567214188096966 -0.23549260281623272 -0.13671526941163173 0.45273831763735661 0.024356201153831414 -0.4085185160369908 -0.39100375376320118 -0.261762450337508 -0.93733188332783879;2.5171822450574632 0.24735307093189926 -0.60853632037043881 -0.06496829037728992 0.077139006163751925 -0.32319906691127392 0.48298772325096173 0.4815044907138325 0.012653602335705474 0.50899378597591038 0.3798232369635407 0.072359885739163757 -0.13277417781299597;0.41704492635774459 -0.28573152940764357 0.31184950190929933 -0.14262360598250468 1.1739321988016083 -0.083294934906232354 1.2217131371087577 0.22956559020904482 0.088425283799582269 -0.75801970141303143 -0.26801457955211749 -1.3230130191465308 1.9054317766580176;-0.81923535768304589 -1.0280345465066547 0.13943223044521907 -0.36018264397800759 0.7938465190060231 1.7901517247421945 0.60550810098190533 -0.10894954238129899 0.49403958442124635 0.69775620560408946 -1.1142365218558077 0.22717860560151681 -1.3460639749104419;1.0283565011111757 0.82630339467596536 -0.31573861691124488 -0.25219036655999877 -1.3608214711771787 0.81387502286792024 0.41720127320427219 0.019274341950208329 -0.26254556257547801 -0.31095881037981615 0.25018803919445359 -0.44842262509695369 -0.12612557393913321;1.1829547918770829 -0.24886789586139585 0.37688813857962705 -0.26990528604393843 0.32813547180891589 -0.21322989540240528 0.75424886895834897 0.82671957372733618 -0.2611055769538424 0.2147563868794545 -0.23456820206417409 -0.33117588691745314 -0.53461019672752264;1.212153553750092 0.067846273097617538 -0.079968615094856685 -0.26407221163778655 -1.2239006762184106 0.22613993596801316 -0.48637298239981203 0.37342003010870684 0.06653839222524989 0.44789043629258135 -0.42814886715135603 0.76795469628785251 0.98515484184985491];

% Layer 2
b2 = [-1.9811193137944345;1.5807365613245816;2.0752956981187474;-0.74432374767904774;0.21752126127702745;0.064142351870139377;0.0087223792661483557;-0.66128579157709266;-1.3467383802756718;0.8213546482404116;-1.2879884663364967;-1.9328528716276141];
LW2_1 = [0.11438952114191688 -0.44319640681302896 0.31670331747978758 -0.94787916577198927 -0.4882564614376923 -0.43062383702947687 0.70645700839445824 -0.093862233050286514 0.74277931732229541 0.42956600729458255 -0.85960033839246175 -0.54073023665442421;-0.26218564605262756 -0.56863613059076201 -0.33209263070232076 0.69699084530612587 0.4012483475464122 -0.38541323930905841 1.5625465163954506 -0.85152115197339362 0.26378490435141999 -0.10392044182633239 0.50983166743252784 -0.090221125971281277;-3.4985590826258495 1.2960707252261952 3.3666947274634142 1.1446809255970403 -3.6358387912889678 1.3609417594823834 -1.118027297031013 -1.2633776821859088 0.44882053862699162 0.91737415552733936 1.9035630326523019 -0.053198094863309425;0.55041756475481729 -0.49060634804651759 -0.24327151566386998 -0.77008797502250681 -0.38790323067597643 0.65772797847425779 0.15050091323858683 -0.0917768732268152 -0.67896893596081864 -0.68965008778369841 0.20337468600096839 1.2943942952641019;0.11763978452099122 -0.53522066013843783 0.88310814077963673 0.02973447331619674 -0.29268872613618635 -0.46222696638514482 0.58454545747274389 0.4344482538948638 0.88353782106051648 -0.440001938162699 -0.094097560352897236 -0.50884765956168099;0.072315393841658041 1.2331647171530942 -0.53606298463683533 -0.46299061563915689 0.16209038094185538 0.19575986973277354 -0.021483474447082714 -0.3103395058427536 0.40229493573779845 -0.081232220972505459 0.57144865091268415 0.21047083795210203;-0.084678771793204238 0.6900592969722984 0.40754501770765983 -0.96613079973607396 0.19255663894994648 0.53009593356206919 -0.11314646904981622 0.94888737789090238 0.28091991656511867 0.84357704390169264 0.5993856712884208 -0.064276954821238796;0.032222023125744084 -1.7385654061644951 1.4979667855385619 1.8694351692325333 -0.14899138745649504 -1.5699901896036916 0.36344501428169712 -0.092686131347781892 -1.5060146973780502 0.47690128419068278 -1.2463840032910083 -1.6032205826948698;-1.2054443479587575 -1.4072858999789697 -2.3498937100348241 -0.21463533050756681 1.1744155731827279 -0.74891007470730608 -1.9050592775989903 0.12612459629025943 -0.044599278640330788 0.17453159755970371 -0.60410623670065489 -1.5938806941018644;0.0044330316951510622 -0.32826780546120077 0.4118941229231261 -0.12627571778949143 0.077470201285866319 0.13891051285195133 0.79002374036661338 0.40350416451572357 1.0243808369937357 0.2647534453710676 -0.63701452029002703 -0.45995230929891462;-0.10091511110547005 0.65185739910146689 -0.11668584850783181 0.33177169973658244 -0.16088295674075978 0.9432378498324423 -0.75071807768247079 -0.4667886394967396 -0.86549720641948313 0.21125766896533113 -0.21986267501637016 0.18955811416307439;-0.58362454839794875 -0.81296246096851155 -0.065700909229094009 -0.25463326490969534 -0.22472829501166219 0.24698815011886249 0.31546428454730291 -0.054942316857336512 0.62486182061242224 0.50957099388094995 -0.67127866020670268 -0.57225923035796755];

% Layer 3
b3 = 0.70793080057915503;
LW3_2 = [-1.3699280443673345 0.12781978971124586 -2.9258737084698985 0.067153873450089024 0.30878720172153162 1.4414884800240229 0.74419745232071099 1.3312464326655857 1.3987780251083901 0.6959145314545111 0.90557761263622494 -0.59610828870316512];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
