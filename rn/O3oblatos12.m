function [Y,Xf,Af] = O3oblatos12(X,~,~)
%O3OBLATOS12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:45.
% 
% [Y] = O3oblatos12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [3.4366644459476285;-2.645467214030202;3.3728598445159736;3.0469504057514056;0.18569667304182266;1.2969782166917667;3.5563066674861257;-0.22865884785503365;2.526263079852868;0.1469186627340377;-0.41630295093021108;3.2233232188980852;-2.0351316996216191;-0.65642949956503627;-3.0780588368808237];
  IW1_1 = [-0.99600858420768534 5.8753725989740868 -1.040460993427015 0.10239201767491718 0.18048073955442503 0.9167217887144522;-2.4484491963439825 0.13359436590506568 -1.5728325482126422 -0.81582304839191477 -1.5358151647103164 3.680585500635098;-3.1501215597140222 0.66961057994691742 0.35992659792383364 -0.15949203208570698 -0.40621327263980039 -0.16653845557206112;-1.6118704272502491 -7.369440088968771 -2.3470451583894021 0.05879613047609792 0.96666730496986508 0.3078185626496609;2.995269688250926 -0.13010796724377566 -1.920643737896933 -0.37282069132241918 0.020188945103194297 0.5637641280834863;-1.2172899343091819 1.0687031140886492 1.5346015609819841 -0.3177027227965899 0.46687349886682383 0.23973158467698452;-0.21889939341898493 2.1881065875726908 2.2047815729285767 -1.4455345200961185 0.66705331936104129 2.4102862678259545;1.9846055073323392 -2.2993213681303937 -1.1442359712052579 0.19986206097932754 0.00048145059194850716 -1.827218467545537;1.9935652897459801 -0.21851499823760198 1.2352934437588856 -0.3885655211529026 -1.0362759367652175 1.0526156625715011;1.85435495344427 1.5735187631801058 0.72430854253242127 -0.31131965463184064 -1.1306221758143387 0.51443570268039385;2.1683910691104216 -2.2009405601488439 -1.1219343610314796 0.28446540972578771 -0.030964133858939966 -1.940197522669828;0.23329868078745097 -4.2368764652305382 -0.72067178233752394 -0.26581115616856699 0.25892186634250475 1.2811441557676553;-0.53639372540279551 1.0676920482982781 1.1712895935806698 1.5154313565354012 -0.046448409390284148 1.2678898273438959;-1.4370396371281988 -2.1901464244914273 -0.51464833952416111 -0.45078782355245772 0.43619733392312465 0.36230857904463432;-2.8777914569098559 3.4327631017030247 -0.87870632972866392 -0.076189382368006334 -0.71176168504617265 -0.60847553436876156];
  
  % Layer 2
  b2 = [1.6983316568167171;0.96397594761675065;-0.54807376536292496;1.4174366650294097;-1.7091154862596452;1.7107630591853205;-0.89506442529848096;-0.4659594973570067;0.27256602758692838;3.155009722198705;0.36034054746310812;0.074928473782634647;-1.239541958200169;1.9413142812213764;2.978308443633551];
  LW2_1 = [-0.17806290448083156 0.47728720416233461 0.11438764701182545 0.23599202272032876 -0.62894199095997472 -0.58756024345659863 0.57722842964447496 0.08988352500217818 -0.16459421217840942 0.73874422128454675 0.15371907197313034 2.4866613963898487 0.1515707012997409 -1.7905686587963106 0.98580758678507863;-0.95994752859221832 -0.16828673450998366 -0.18349266044018861 -0.18297645237907129 0.65300218596847359 -0.025979784615633002 0.83794124135575487 -0.61603668869679373 -0.15463877541944093 -0.10989308359935779 -0.45010846897145507 -0.92059126050872031 -0.086441700105011662 -0.83891241735813538 -0.34256251991760411;0.44334499362406621 -0.54373348746884487 0.019583623025349248 -0.45276134679293839 0.63986098269409142 -0.22453379111696659 -0.56657596863941884 2.2041201281682623 -1.6199059923912935 0.14320546486339036 -2.8592512050564176 0.84147560164590374 -0.34246758616163786 0.78552646947292037 0.015739636603374026;-0.96685881568138909 -0.18448487962693452 -0.58409320922872832 0.6134462512834401 -0.54634614577172591 -0.39312698637759264 0.54879252399336487 -2.7571946369707225 0.15945574413165686 0.03264039823376029 0.75600428594938052 0.053546718811810064 0.25647764218857261 -0.036225248661040127 -0.7099564766933415;-0.18710781059403875 -0.68745300448365831 -1.0035357543611654 0.75379838597981608 2.9066667831104831 1.9875167349181784 -1.0387773571838579 -1.7286310469885771 -4.1217159479897001 2.7606497492513431 0.20113060722542686 3.1916772923031811 1.5943183909993883 0.70794985986599157 0.097592297631742653;-0.31225438630093127 0.40042713785837991 -1.3481270551894542 -0.66344461033747337 0.9650097834527297 0.046784261210873292 -0.26638463118754407 -1.2879114948048607 -0.22912968015761484 0.90173302428008217 0.2218561606881555 3.823961320076803 -1.1429105708866536 -2.489857030376653 0.78713286029762297;-1.0017619634898518 -0.91244842233713619 -0.64341348230852557 -0.4865260262144821 -0.17994064507341115 -1.2434747236195605 1.0687875776422013 0.064331613968578824 -0.025503528818590124 -0.46838838808264793 -0.14814114022483474 0.77444206269807292 1.0095658866877237 -1.6975908213373569 0.8735004347822215;-0.035905481395111877 -0.22800773735510638 0.20001762817774627 0.70709653284204965 -0.96465757719754397 0.76835473748954086 -0.42561393365046962 1.7573384886166616 0.44652381784881046 -0.49971992139966009 -0.59660961681272184 -3.145374565756673 0.66126180758376896 1.9031802882695963 -0.45954701649805446;-0.34327108685190999 -0.23145406462544191 -0.00011764826697667138 -0.21497072992579835 0.62436950797538326 0.0027228954862360891 -0.12537282610809652 0.4576619019481708 -0.60628256178947249 0.23531439411437013 -0.3905649511466926 -0.75095131759925327 -0.7276391584800983 0.34763610450504595 -0.26422264046137711;0.14721465121310262 0.48198241594757546 -0.21130285954391237 -0.52495286732210178 0.25129125033641125 1.2360880292811185 0.037728788744665342 0.60951219347512064 -3.2694932669641803 -1.2190566099818554 0.098140835800506115 -1.7190984066856125 -2.2775828230113735 -0.68464283885666755 -0.73423808191342343;0.50222870905760386 -0.18978904991695961 0.3663742671631498 -0.22098616995993919 0.67190416143664655 0.020140094880970891 -0.73914670976104357 -0.11815840259405871 -0.39560328656357691 0.32463458474340495 0.83967895581227303 -0.43610301355459968 0.047864451766449261 0.98303242892570941 0.14597033901747813;-1.4811395107637955 -0.4741659927231629 0.2846504016974486 1.2336706812284426 -0.71667429848045816 1.0377084089907722 -1.3698332443905161 -0.57510172151453343 0.22636197943658201 0.51780676808478754 -2.3801165509647482 -0.070198975897193025 0.87567644203100847 -0.19063665263190768 0.10294038558024117;-0.92048301194974369 -0.39053004901423127 -0.64903362299990619 0.54829735290292236 0.39582741829743978 -0.8576688638687614 0.752271613753561 -1.2158240428463996 -0.24445861098039146 0.17398500643888207 -0.92567944264803947 0.77376160495272528 -1.0123270612593969 -0.035756407996343456 -0.34682065369300069;0.85554482532061571 0.80163469857566105 0.087471379663168106 0.49961294065175227 -0.39355754783675118 1.5154407662761964 -0.88041573170054011 -1.5642336812975886 0.65325050068987234 0.19561603919289289 1.3589947387099199 -1.0323547366629211 -0.30236769918658535 1.3905762001287678 -1.1380003127121154;-0.51937905987745847 0.86158994942950595 -1.3762894885221122 1.3797305257270247 -1.3486368340435599 0.3811662594880616 -0.36420140384676508 1.5781619153256372 0.10775134917378767 1.5852810317035495 -0.15129408817694251 2.9460121276806142 -0.68304907030379824 -2.8797624540281035 1.5689338493277649];
  
  % Layer 3
  b3 = 0.022342737849896349;
  LW3_2 = [-2.5069826801506792 1.7988059090278776 0.96503555437225563 2.3377217145735547 0.54064567182747547 -2.3160194912044663 1.8968250986100259 -2.784656020903765 -3.259883733065692 -0.6351565402744882 2.6564017523493906 -0.96671378911274752 -1.9812743388311118 1.5494158497027053 1.6452819938029906];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
