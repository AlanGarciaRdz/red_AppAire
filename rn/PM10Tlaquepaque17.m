function [Y,Xf,Af] = PM10Tlaquepaque17(X,~,~)
%PM10TLAQUEPAQUE17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:41.
% 
% [Y] = PM10Tlaquepaque17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.8815117509723533;4.7262243636489742;-2.2807317028578558;-3.8128618728556249;-2.4247245895890717;0.38263625169713372;0.19857051610744145;-2.1225079726621878;-0.15449995528635857;3.0855279087869834;6.291019463226486;1.5235846281149692;-1.0825129053264055;-1.1771028313522907];
IW1_1 = [0.14032105938964798 0.37993680760729703 -0.010263892347015455 -1.0790435925053634 0.5515722987838243 -0.35969829219247296 -0.12226647485332505 -0.14664926479181803 0.44338214164308509 -1.0941875094620239 -1.0701577560086193;1.3518747063103078 -2.5034876397141033 0.49940074628446113 3.494642072101632 -5.4594757989620373 -2.4597232768226553 0.36398871222585927 -0.48185162217043448 2.2616187152742753 0.527570868207213 0.28675260527781848;0.3113236946782505 -2.1360089329866163 0.20074758351110955 0.095717325750448667 -0.21891651474499796 1.2226623034266366 -0.059574061890863943 0.0078613919878609325 0.27582103455670548 -1.2254820421899317 0.37193275470503723;3.9776601602563222 -2.4387995200022075 -0.41604729074674812 -1.5720932422788392 0.19177383627516831 -0.0468510142586301 1.0499407365187083 0.61474985998305665 1.8095645364802262 0.043401774384813574 -1.8924370084631992;1.190238048746648 1.3537600169654014 -0.57514520943449043 0.7971632260209055 -1.6142332574245539 1.0724236523008741 -0.19443763088158031 -0.33581380863731919 1.4627904022205338 -0.23459079000445598 -0.11543711765512159;-1.6626315569367058 0.020366399381997247 -0.50355559735349309 -0.57152585730409466 1.9297903263032805 -1.6146313297129185 -0.35249485909818168 -0.22698850590253519 0.45778783438754583 -0.047649568758284411 -0.69757509346711988;-0.12190552778840555 1.3260058646848616 -0.1253154200603589 0.75225786613766399 0.2599860721108686 0.31106797968692329 0.162354611828956 0.16329062041725959 -0.34348273945165336 0.021601934060479389 0.018379470621972996;0.36499077056986412 1.9181921171024743 0.65758952839793294 -1.3720318146763419 -0.833100508532305 -0.49789563049431645 -0.97565439287668343 0.090029894914637601 -0.044423583605038022 -0.4477332056911224 -1.0002430769838646;-1.0578063187495983 -1.2248141323888457 -0.4759151653151501 1.068264535004952 0.62822914546987929 -1.0358159315001352 0.18245296340628503 0.32228185553030791 -1.3097272049774409 1.2895711914334469 0.12478113063044112;1.3675700366061028 -1.3093277846162463 -0.020683835231793114 -0.20316470387373747 2.2470330490936785 0.59892199039815242 0.3798086146311902 -0.76565603151777084 -1.3130640269304612 0.21711938525783808 -0.65254566458328156;3.0679925567907733 -0.48667925562677183 -0.9045799590526572 0.21324942479918377 1.2685062080066183 0.32398967014619839 0.27714142614614473 -0.079376560396006532 4.2735494216105643 0.0603350124540196 0.31344606262129643;0.59658557573371851 0.76211024519151171 -0.57031392121486235 1.0375939690294722 1.7320102053338131 -0.74637284823408667 -0.13684060795082575 -0.23102173204910126 -1.6257340422822251 0.64544922082433076 0.51037152977714917;-1.2102148044662631 -0.49671125799277194 -0.094942231259801044 -0.40383582919654787 1.5021615236386783 -1.710484823459413 -0.19215516979346539 -0.22802277598000467 0.22505715401046603 0.43541353751556505 -0.39572408732546449;-0.0096772739412274728 2.9804742885915925 0.95042384551098491 -2.0465529515196557 0.082647506930981371 -0.49809564271465451 0.42849682764419994 0.054183719463960618 -0.66143060174938828 -0.02965880809956805 1.6040436825295359];

% Layer 2
b2 = [4.21452581648769;1.8024672676754028;1.7968383151130147;-5.761303128647862;-4.0279447870547891;0.40655780864938718;3.134374724055256;2.1195119478201403;-3.3972887095791173;-0.075487046871045016;0.60216984032880705;-1.7881306384638889;-4.5280748312120442;2.1581280689626121];
LW2_1 = [-3.1999949242584917 -1.254092133126276 -1.8070886157709241 -2.3678047748315079 -0.07115432200786799 -0.52326068413710414 -3.1645309891777336 -1.7898610940249948 -0.33034160364988646 -0.69184393878369532 -0.19143665092537224 -0.49167700670334608 2.3671395709357967 -2.3535371587309046;-3.649407624996067 -0.27648454925809907 0.13170325767217006 0.49425529249245603 -0.73667791340487843 1.0166942731695461 -3.094688147343378 -0.60505433118514518 -0.88109572914211731 -2.2785975169627699 0.8555135582656912 0.30507536890277454 0.38062029898840549 -0.51223197995306691;1.3325316720966665 1.6973008619082046 0.30002049432638817 -0.28944678771021765 1.1875814840619181 1.0812552254224181 0.51685939047555007 -1.1006975388468261 0.86201669426564265 1.6443337705658918 -0.68364478389355687 -0.041517095228931933 0.19791785320846797 0.93595576918892198;0.39775814748678107 2.923089277354427 -2.2859859059838836 0.0062468435486884022 -0.26483303264903341 1.86443254313769 0.518637118860517 -1.3732762675528778 1.276034861955474 -1.3140163800601961 -0.62056479173911916 -2.7931372230827045 -4.0031835573362518 1.3664832597871073;-0.060012156912363196 0.63790100575898345 -2.9160087870024731 0.99576423589740504 -0.37335434037053272 0.33345664054242724 1.4958708293298135 0.50434351388075438 0.092409752070228432 0.44269331717884791 0.83277955422930794 -0.085041756949159802 -0.30120668231650433 0.80841629644874269;1.8868716468383784 1.3328916380918583 -0.27167337924035356 0.26671549325602967 0.8132119823060775 -0.98901129246151964 -1.5851675596243782 0.52335960227335621 0.53371230845896478 -0.099418287618982248 -1.64114369303959 -0.1032318036163183 -1.1948075855976044 0.52783493484401323;1.1945269536251018 -0.3300839649191693 2.0206082590298071 0.98847692685432931 0.72327565270195371 0.98763985380975261 0.69868188073603099 -0.52109169958559043 1.055033198374582 0.99010449648432719 -0.16612626172947165 -1.4038029095093563 -1.6325612175038413 0.27305964226159468;-0.5330882692333454 0.58035771404226566 3.0131069477675445 -0.79598271331335335 0.60392948602162577 -0.42121346811246707 -0.01425105402164004 0.19903338209748025 0.37764603525898677 1.0908636092712789 -0.33619598548156482 -0.14382185977949982 1.0825270372699227 0.25001510741464833;0.8976146937877213 -1.7715988195991106 -0.80860128027686329 0.53020310006110249 -0.31000057418993537 -0.9796619714669258 -1.8837324968989393 0.50861716649490385 -0.35461859036661519 -1.8541177875653851 3.3869816640355705 0.088131866699443978 -2.2537654380012491 -0.2328241290882703;1.5856480760222897 2.4448298736140899 0.97300724339332889 0.392693516615016 0.33997355398433099 -1.0821120072270742 -0.20611187664665437 0.21638293166269076 0.27909339958265122 0.22840799314640303 -1.0199355340310436 0.60628755046856686 0.45156056269798489 0.062397781158732506;0.25916951339686567 -0.33677948927884815 0.17933138964739276 0.38153688058607865 -0.56993141345691423 1.0113315468547242 1.5232121429401364 -1.1454983062328552 -0.62388395835644495 -0.47382225940025757 1.6057551415660918 0.52717954428292157 0.15210912939205012 -0.58511549131643492;0.0096444793678100368 -0.20022272359760715 -1.9865920151926153 -0.22048739809644313 -0.92870573052534855 -0.51591456253731738 -0.8988606758729315 0.26883649848824465 -0.59756664801574377 -1.4156511060544743 0.0036957708240694231 0.59501436453033274 0.32346834121880802 -0.6746216331162922;1.4626264964807747 2.300496768723074 1.661541893059485 1.8668601536259168 -0.011551399878631408 3.1604138781863962 1.6410412094785058 -2.1382893098529991 0.65046385462093848 4.1457223190082848 -0.5254245681011912 -0.069560910860551786 -2.6801944967180189 2.2234309419831964;0.51469416707532833 -2.0420174526239223 -1.1665875105163002 -0.41299894894045897 0.43691264585962897 0.38672664713254407 -0.22942914595533806 -0.38211158272787155 -0.10319476240059892 -0.85781466183187549 0.16132823181808509 -0.72138736772605005 -1.2611510292736328 0.11970585420803004];

% Layer 3
b3 = -0.64552016034323678;
LW3_2 = [-0.22474433511898773 0.24399747990667264 0.34041592176018948 -0.13867458397608007 0.39752651142642437 -0.8744799000766168 0.35994936573064612 0.40347730970329243 0.47873179252263176 0.6029366961360787 -0.50457516533071367 0.60241480532580127 0.083028270199702048 0.6749103584273668];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
