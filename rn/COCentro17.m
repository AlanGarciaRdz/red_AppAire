function [Y,Xf,Af] = COCentro17(X,~,~)
%COCENTRO17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:33.
% 
% [Y] = COCentro17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.099971740493754221;1.5034971521356277;0.6173551608995399;3.6562574109291699;-0.35037131073635053;-2.4302849299526388;-2.2844065535672304;0.30228414767720163;2.1523008765885883;8.1911964700822235;1.4345935769894047;-1.8928679375599564];
IW1_1 = [-1.1100076296928614 0.13800572626315122 -0.052341266714345067 0.69934809445210011 -0.51231591127753739 -0.54089878115804035 0.19369710402505369 -0.76753171502297723 -0.33876855107848652 1.228072277911938;-0.2058054347737161 -1.2292537839513797 -0.48541158267528201 -0.51259994934214947 -0.31790777458912778 1.1718470105612668 0.9197083824670893 -0.10707515337618524 0.016051569125468856 -0.0019357970713239359;0.2250948705403453 -2.9786915639751457 0.59696480248830497 -0.10282698417239765 0.16983560406962403 -0.12993795150928894 0.074752254710048857 -0.25840616680186207 -0.35555379790515845 -0.59556925615154799;-0.038841507730060142 -3.0578154256168162 0.1747657795235128 -0.21692161066292012 -0.015191315995825199 0.95117124493567118 0.0093919005698231556 0.09711663128338098 3.1524122951523732 -0.31328052020186448;0.14134508542734037 -1.0844967848512095 -0.06337465756907748 0.11305149673390061 0.1285295867239212 -0.33830847885754334 0.079487659323472154 -0.16639703975337061 0.3032314598292129 0.1153381229919235;0.50937565049989286 -0.68901026368364759 1.8284422132561839 0.91494112321151766 -2.4549019248855579 0.956457274494659 0.41159385995572406 -0.26525924345597368 -2.2207571054740187 -0.44877609373538829;-0.62759508738531811 1.6704115829627599 -1.2500012618225778 -0.044726472347167694 -0.03988949121190738 0.64557524755530571 0.63918927436258033 0.88667786433163309 2.0957516404458825 -1.6702615241388434;0.11909321523932676 1.9669009552268295 0.12836585070521145 0.37207442676305302 -0.384502689293796 -0.03556628189679456 0.015272121055254115 -0.16355168307542664 -0.49652317476045799 0.18610891466805626;-0.41485460755843812 -0.06694049368464533 -0.3817515264836 -0.4306421104751858 -0.11225272227443525 -0.4332485200560886 1.6922803990357596 0.46037047768653383 -0.07674049842291164 0.1510972709984307;-0.14207431137680515 0.14518385999941169 -1.3682102262088522 -0.70364276942195636 1.3450157202426789 -0.27234104715496366 -0.26857408554086365 -0.21275314020458666 7.6556662536696232 0.51089366003668457;-0.077489669047359058 1.5504550830929986 0.59505752668136447 -0.52876881270072984 1.4455873490068663 -0.32995475852468426 -0.11221607412915416 -0.3123600904537866 0.73393195888421425 0.2699384921706538;-1.6969885843849299 0.54194468897292492 0.25462128556659103 0.41661668345310093 -0.14067678753264379 -1.0415222493195795 -0.38249223610850525 0.2157749171055614 0.45437754155502197 0.075829539964608575];

% Layer 2
b2 = [2.4403596096145859;-0.50525759008393956;-0.98366687284321197;0.36776362767572185;0.81573157463536139;-1.9019588863726467;-0.68073516084968211;1.3455741103543704;-0.47274743172120842;2.0271175720277008;-0.090155282421715499;-2.1897415013215626];
LW2_1 = [-0.94528134430641908 -0.6179424450679063 0.061895195947204745 0.29318375411048209 2.1011401771485314 0.30265850360969571 0.47893623859192114 1.8463098872634043 0.15789300337288487 -0.090953790257041117 0.25230303842082591 -0.76133062755080361;0.057332405221988493 -0.14696887486389729 -1.6264420100760228 -0.18182310177040797 -1.5183250972701352 -1.2765453983455723 0.44454300972503474 0.6950247194607303 -0.21860066140758028 -2.6757936810642966 -0.20256903311861715 1.7167481782862024;0.35557565474869257 -0.58778519981730137 -1.2519953966154611 1.9149472186894949 -2.496375970282612 0.18310208584132232 0.65094516225653176 -0.50209223238958278 1.2339807546004238 -2.254166040010892 -0.48425779965798144 -3.7853003346429395;0.11258245964906942 1.2424537776955131 2.5505408761287587 -0.49757623417722652 -0.39331433049100412 0.047138617900145806 0.64502111818254271 1.2614719483911914 0.25192830655100718 -0.45786731252188423 0.33674148967289957 1.8241228080715155;-0.45065448076417136 -1.082162843487338 1.2218741313394872 -0.42029948404790657 0.55087384604159917 -0.41694952013268849 -0.18905776321381923 0.64943150791780635 0.20982689846680969 1.1664269041518645 0.82987893478571406 -0.65596866208368021;0.75507693956813859 0.41508032702138081 0.022086040290256501 -0.14383193478397266 -1.6790168645005887 -0.46668213527230973 -0.77257470708141385 -1.6572781722329728 -0.3902370974568154 -0.93323467849875175 -0.37043390709353918 -0.057654982277277028;-0.23942975718695308 -0.93475374794482458 -2.1248500793476541 -0.34949450765581913 0.29180256038907104 0.76111003991190829 0.10407257871470335 -0.087241614810937229 0.74127801855793007 1.3282720831616208 0.34493434152824887 -0.68092159050204215;0.14790810219130093 -1.7991023608642009 0.25487570332326276 -0.029679689333841765 -0.87500102592973183 -0.63000476089139801 -0.25681889531211349 -0.83705664820873693 -0.15201398044708683 0.33776900819886252 0.28880578159537623 -1.9640091651551637;0.032952632222350169 0.34196622639942181 -0.61522853763938956 0.6055814441804066 -1.3651244602956478 -0.010121964839923378 -1.0007885340091371 -3.3236949722454701 0.46522211562240151 0.39524479770182241 -0.13552635914424832 -1.8569129971884371;0.23297794119725393 0.78404613006868462 -0.30274512867315917 2.0265762076420444 1.0615046340961709 -0.32845418699598844 0.087080813658097542 0.56490628833366807 0.65745659886317021 -1.0475083226499864 2.5616557382305807 -0.80791182911997927;-0.019042024725751901 -1.1387116435510745 -2.1768550765689652 0.24959477968458324 0.090910102911407734 0.11862653462929559 -0.31551000500812892 -1.0239198285965556 -0.083370458775166037 0.29516733626154951 -0.19870315210815159 -1.5025422025312514;0.22311413877784614 -0.60721690238012294 0.29209534686223632 -1.4345950943205112 -1.1714646638799449 -0.25620929351076999 -0.14220121952871922 0.77565093450297951 -1.5244798445171599 0.025042169413560918 -2.1551937377327817 0.37081848211351059];

% Layer 3
b3 = -2.4461645225171673;
LW3_2 = [-1.4231449470779507 -0.48772525330026878 0.33437899748101674 -1.7492247739830751 -1.2183276799277427 -1.2696012436261506 0.96099170588843996 2.6548228409561321 -0.81695471768596029 -1.8404173781392481 -2.7594017356994076 -2.2933571998169322];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
