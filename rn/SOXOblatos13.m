function [Y,Xf,Af] = SOXOblatos13(X,~,~)
%SOXOBLATOS13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:41.
% 
% [Y] = SOXOblatos13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1929332104982286;0.64845050591022513;-2.1281091499390858;-1.5785062275850927;1.7983282729793542;-0.80886740449458805;-0.55744459743440189;-0.7385328044179128;1.2333103556815366;1.1974821514852871;2.1962830686074897;-4.5744711514467307;-1.8928594397081397];
IW1_1 = [-1.4259904067830131 -0.64288244685518581 -0.90601724846079512 0.58565651958117371 1.9335009519091828 0.86293940160350435 0.86672396341982882 -3.4976642578854182 0.38652475630141075 -0.73902191670950679 -1.8220770367837651;-3.6935630545565665 -1.0311578186003929 -0.66335605847083934 -1.6887163922405199 0.63294664974753034 -0.88623838086093187 0.30856626162817824 1.3269408089742047 -0.55943525282624706 0.24282527640119184 -0.082278482935629338;1.3411875981617964 -2.8615753381797537 0.96295647986154942 0.26567942063132605 0.75851405139077566 3.0173747732568836 0.38463226306470266 0.20942746048804817 0.28095582375552131 0.54244857484364983 1.1048522579678441;0.99542559962778565 -0.011463382608720983 -1.776019036274564 -0.31459655904108297 -0.031287638383550823 -0.26427560453709897 0.088428191414435683 0.16342892924894398 -0.17069064318837587 0.049021061327990868 0.083044141243788866;0.42406438031492399 0.20235957700361776 0.51156660156179246 0.5944885359603046 2.034995429724284 -0.24169978094975386 0.44112529555975727 0.37911931997869319 -0.12986010226315992 -1.6221675503388657 -2.4823615834106967;0.10089099338448224 -0.34678540661432206 0.81044494183523907 -0.52295046950855184 0.034016584708344663 -1.2750109786919404 0.37803140554435238 0.2069401178822573 -0.20948575142094236 0.045763182435049676 -0.31304770636686774;-0.10304616775023258 0.18066351432353817 1.0873779245908664 0.62915306419119799 -0.068536102020792966 0.017608809424188201 -0.15721411084984618 0.34218820799698901 0.020058974814052458 0.015425469862977853 0.4314212611000261;0.7063812789266064 -2.1250893791514014 1.4560511836049315 -1.2517361283906672 0.83153845931839687 0.20450117963964445 -0.43327680120105888 0.53443713318225206 -1.4797270818897277 -0.13806581386852051 0.86627651148592077;-1.8414631436351607 0.61066982263044944 0.5565534748223534 1.0339803884309027 -0.61349597927067523 -0.93184836456580966 0.18131053331745275 -0.70381640121766231 0.98137593155695835 1.8344308647366214 -0.070832726950659536;0.91808314320244189 0.040732593935586245 1.1910571678819397 0.41002391958954454 -0.60112270647185317 -0.18650743868476033 -0.46042101597919977 0.29602981812285617 0.036629153012711017 0.36528326538507522 0.55676378176851449;-0.13219221858029986 -0.80927659895233517 -0.88830274626916983 -0.47155762364175857 0.92768035167428042 -0.67069899138970834 0.34136733126339402 3.5454650603058964 2.4442068764609322 0.73158444729318906 0.58096423761740301;1.3661984151073099 -0.7901012638985867 1.2056366457565213 0.16781739029379855 -2.8726138313704279 0.60166460975340386 0.1004972076762615 -0.095824072887315759 0.093574448018643688 -0.23147290887711022 -0.7757311757852855;-0.96984806549614 1.6416771025491805 -0.37224107777403603 -2.5876129012635443 -0.34563373520130125 -1.4822162977981508 0.56417418206171499 1.7471348079207674 -4.0300284743171897 2.8668015556688045 -0.75615160879914756];

% Layer 2
b2 = [-1.1651488631085583;1.9266580002717111;1.4746483508056458;-1.0190742737051146;-0.45656886013330195;0.022296143675979679;-0.70684062342830012;-0.81631908923496199;0.34363823061186682;0.82871506933792694;-3.0715758009664649;-1.5019118919739189;-1.7488446367418913];
LW2_1 = [-0.081613621068868408 -0.024399272790376108 0.11079455400404864 -0.96876433777810145 -0.14533467640811337 0.75487366450709836 -1.3144532795624597 0.57493808487014231 -0.02239825252478651 0.13341747155776246 -0.046405103847392673 -1.3048470561635312 0.022287657116850844;0.1769528068081162 -0.61434400554613033 0.48541689479802391 -0.10835914490870929 0.59141909665657078 -0.18582182414447435 0.40457457757028181 -0.084152386521238687 0.039842423799986537 -1.0847823135057437 -0.27322776232759338 0.86911528431329177 0.04962716370948192;-0.14052055542764147 0.31238654010969624 -0.23478664957704393 0.24367841216127364 0.60389565607810936 0.7956713570039774 -0.16170335907954697 0.077986581775424543 -0.62936126388891489 1.4325711022794561 -0.94078309467017218 -1.2935787351865489 0.074558173837418543;-0.47203209924481143 -1.4522622596430148 0.046705952689119354 0.69183052329970818 -0.40056471272513922 -0.12326852667235698 -0.66029261377514681 0.65129776446146892 -0.096019514193424069 0.14753469726576851 0.41060679974259395 1.2467425093859379 0.53340222012836058;0.1009151969372009 -0.37189339562612217 0.59144002804856288 -0.6190358267303111 0.060964566207968432 0.6015645237741285 -0.48235130736511406 0.071180642993010801 0.40806077140336028 -0.4589560839169482 0.11219398205072721 -1.7999300669840292 0.039122603472055095;-0.13666879074816229 -0.96572135598581965 0.015354224920822515 0.35563887734973748 -0.17239330527637753 0.23463969701533743 0.64369509771695599 0.28916026494644526 -0.11191822357178964 0.61161046517035467 0.17424834543994541 0.74162312034937894 0.20938219219202614;0.2396752254996683 -0.65859144722427931 0.41023158349883665 -0.77810374658051218 -0.56974143718946413 -0.80601865377913651 0.57252743100708703 0.19183456195188608 0.67063010336997209 -1.3628259925625157 0.49618903722680585 0.66408247609836635 -0.019875538255889589;-0.098098039417319177 0.18497877784105971 -0.40747849031127437 1.4704433706701701 -0.24972652195404507 -1.0662090208405886 0.67056536975282888 0.1359988910308019 -0.27317617490387142 -0.580964840664005 0.24187690497374675 0.14760558383092368 0.027819640061585538;-0.0015745489562004021 -0.43873315545084601 -0.28784429524862359 0.089464928358771317 -0.3881906465934129 -0.32507014335936169 0.21353745036220259 -1.35519727045251e-05 -0.036839499371021989 -1.8041349556450426 -0.48526667205426061 -0.33172665961533576 0.041124424203771728;0.041611478971026947 -0.016654223386070338 0.28901091148748437 0.46516118927095063 -0.16681658144373002 0.099151284006477797 0.83686340122250757 -0.017684779044142809 0.3879711355136653 -1.202054393942839 0.3284492046641187 -1.0767794909516315 0.048775856419078112;-4.2921580174160461 3.7520769924691777 -2.3206685994920142 0.48981262254219621 -5.8008726090152196 0.67197700763672774 2.2482651677522179 -2.9348309315902141 -3.0322621129309058 0.87151765936964543 -3.9723488564514957 0.993519931458553 -3.6259560832518671;-0.15796054901118406 -0.49795509968115581 -0.18725936669176482 0.4044516848233628 -0.34123312191068766 -0.54830607727314273 0.047018905383188592 -0.77068663166536089 0.18841659356493953 -0.58992674041959503 0.20371350927371851 2.4907323105403023 -0.32037037332637569;0.23022068375518479 -0.4955245371489343 0.60672969044909808 -0.2452714266057002 0.53847031267601952 -0.410784508149109 -0.21422388334858522 0.0010705835657369087 0.040422264221173621 0.39723538655139706 0.091613362916690616 -1.3445869595265232 0.030049983603694583];

% Layer 3
b3 = 1.0122294708858479;
LW3_2 = [-0.28868021934889582 0.22204381414984206 1.1245540662886417 0.22467146448957223 1.1751479494358146 -0.51242929321164488 0.99091298636832981 0.58152087350525394 -0.19958914088275845 -0.9314522708651527 1.1933741016263539 1.1082549506486226 -0.53692495107837412];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
