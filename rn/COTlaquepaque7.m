function [Y,Xf,Af] = COTlaquepaque7(X,~,~)
%COTLAQUEPAQUE7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:13.
% 
% [Y] = COTlaquepaque7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.0624068040629737;0.29098378768441402;0.5059862962373709;-1.7469881883262508;-1.8608991190216311;4.3552838006091603;-1.2232035261973058;-0.42322338134648313;-0.5443467764208072;0.4263594095711678;1.3536203183767503;-2.5190888018131545;3.5433129280960021;0.73972033655859271;2.4996756437183278];
IW1_1 = [-0.67091969565602405 0.0013545307829906368 0.91905741220001158 -1.3977115925302952 -1.2138434830919562 1.2082303758891686 1.4943009917593975 0.52347086900870132 -0.83314621348432727 -0.31391510740607109;1.5919097548331556 -0.038791202000099861 0.039086458405421715 -0.31444607076337666 -0.30397825928657191 1.2674948792218559 1.4482979155167983 0.47515565355689432 -0.35010038342734945 -0.4087033212106605;-2.1506383738410864 1.1812371047985526 -0.87875373998660555 -1.711834066056896 -0.44959396958800663 0.58220652472836421 1.4717548598381556 0.68925595534109418 -0.72226891788078174 -0.7432968132906379;2.0533429369869851 -0.443574568593888 1.312498510239432 -0.15339459364541178 -2.0526446205835569 1.1137858077010148 0.37665727999349935 -0.4900876337368828 0.14873487066748831 -0.68425927955534527;0.39619575732501833 -0.23986576033098744 -0.60876491686724243 0.23938392746752438 0.33769367145242135 -2.2546204455633894 0.29962974217009108 -0.19268936152801336 0.46757477572842615 0.31519347137757037;0.10172964157592432 -0.37450220503671688 -0.71423723044545462 -0.046527853566221973 0.1435442991955968 -1.3383886509790679 0.15938630002680501 -0.079675891631018667 0.22789621509144486 6.2489057810499178;0.53695534610090945 0.86934012347367806 -1.0110185775758063 1.9928480273671971 1.2805159501084096 1.1778998382479726 -0.50662236649212666 -0.38509206501635812 0.44114258775109227 -1.9189866793154071;0.54938920807022706 -0.26671130196629844 -0.11420121981051537 -0.43901822622689524 0.064215716763300887 1.1332557740913143 1.6995452215965003 0.38383133366584338 -0.083168034002622238 -0.46974265140885563;-0.28263793664541337 2.6220210793663501 -0.45131256254106067 0.49924934168189261 -0.52431217807043218 0.4046273046506248 0.13003657590830378 0.49451475863174404 0.18024300654657424 -0.28064509082158917;0.28287514073882519 -2.0488248635959341 0.31587167419131207 -0.28581877218192042 -0.1727649899429092 0.044511099718496566 -0.23284533430198162 -0.051015092368452211 -0.072120292000694752 -0.0022850291422293646;0.38676400001601835 -0.70241427445578375 1.8702440956126674 -0.75872826561405327 0.36090689789284747 -0.34182221148281039 -0.41618641726945826 -0.64053824779063651 0.4237574381954739 0.29520758447121415;0.12297026607883536 -2.7610213693654844 0.10116884446288035 -0.25566586951972231 -0.24562288814054459 0.6523044715830989 0.21258316287278911 0.10248274584831346 -0.37120669132014217 -0.073110965922896606;3.4865557617620841 0.23508160538758316 0.019869481194201927 0.84486131464452396 0.13892510903319824 0.46278243688856691 0.135021230566018 0.33031572952962945 -0.2347294260312652 0.18691383770889786;0.33975475968537039 -0.24090141793480382 1.1009304714658457 -0.55528203417575916 -0.6712565807447185 0.17769857755161886 -0.5847445630806376 -0.11927533499422208 -0.65887719767097708 -0.41015025752973799;2.1539970862715312 0.54437324479464178 -0.11704537237714163 -0.00019614549600495412 -0.033758726508890766 -0.43780234811426355 0.90506023557552528 -0.03059171660250468 -0.25926070458727873 0.22837256743880513];

% Layer 2
b2 = [0.41218122774199339;1.7350082094156078;1.9573426784285661;0.99422054914659552;-1.3713017076554375;-0.68685658397585403;0.52500124273572346;-0.24129727471716322;0.8729762395100723;-1.312936788261013;-1.0652863508242301;1.0830056418410376;-0.98560013289219628;-0.94209669901743598;1.1741962778840649];
LW2_1 = [-0.83687003924806957 0.67455790299077811 0.60626672513930246 1.2130822028182704 -1.1963255018756835 1.2494576344997768 -0.1746727873047855 -0.4505719342405814 -0.12553248177293197 0.079259142744041639 0.19602252257749178 -1.8593820696046293 0.024226585642422471 -0.41425297426885904 0.25440267518729021;1.0688317466862753 -1.2873350791568905 -1.042720063715449 0.4366499523605335 0.27900219860586406 -0.12988766929771595 0.89948211498405839 0.48380350499207209 1.0082931684466583 0.41280873754566982 0.38603604359380783 -0.61201590381824755 0.55216283916696907 -0.046733011096110159 -0.029354326885428376;0.61000294118024123 1.4536931362981607 -0.42092768825666727 -0.21282871375356044 1.7968239360607539 0.40840210632450735 -1.0057804993095472 -0.39843861311666862 0.0033889811140800103 -1.3154063595987311 0.23157932761817251 0.47093014374124159 1.2587248133809601 0.82983920206198281 -0.44392099297423421;-0.78480686651524711 0.28910063815998432 0.69712378358573657 0.45805357928820173 -0.84415698713150888 1.3870521471190083 -0.30116899512315592 -0.25849376354299408 0.45211441138104369 0.87713642778233858 0.29963362784865438 1.3993802407801299 0.46478338135404634 -0.46829727413707972 -0.59770213952477824;0.90885438587024592 -0.34801005245280914 -0.69049056268157905 -0.20686408077944299 -0.095113342769040377 -0.031890052626417115 0.0033979354065925352 0.13310888679594268 0.37401755135928938 0.10657528559935137 0.26306795684333573 -0.3620676749096684 0.12953626373226215 0.035237251610099343 0.40520170871910527;-1.2880533635975182 0.37313697441546156 0.10941054387198032 -0.059368292365102278 0.49272024990556862 0.08281624180074762 -0.83997880732732 -0.75019307898545462 0.81354839794441758 -1.3441963505212378 0.55616985867184832 0.26478252847649403 -0.052896433017983635 0.30926715000012189 0.30499379548816158;0.92156238154174985 0.47902528512786829 0.450905695977107 0.86602606430283491 -0.10017052878348606 -0.13675517484207605 0.85991885626179598 0.3142055426597552 1.5553369513427067 2.7121926832588583 -0.48035997003863479 0.28649823596657348 0.32348749471236482 -0.50760338308770936 -0.36778052607484757;-0.80152181952399593 0.029165613173032727 -0.070353213522114141 -0.18585334493132777 0.35275231290531472 -0.032900157640254543 -0.4475854843642752 -0.25539058004496662 0.73562780360838109 -1.2581435153838947 0.45975870750927506 0.25885151184948052 0.17604545134886249 0.33868433170302387 -0.31657482028041306;-0.1061579246008621 -0.6114428765340888 -0.94648636843198342 0.9659997562048509 -0.14567662404711931 -0.027723717321186604 -0.77277278157072593 -0.17471693286982415 -1.4199003513973132 -2.5044447682942721 0.79195676346808364 0.16390618361166193 -0.47382015027747959 0.22731297630550157 1.5242374811016202;-0.43664197219644735 0.0047277879849972337 0.77358773490583954 -0.41835909279572842 0.86693368687549333 -0.095872254690759606 0.55458819163913986 -0.30274959520944406 -1.1392881439571529 -0.87459665371180884 -0.63375596657868016 -0.7730778275503799 0.00468170521365344 0.35392129024218549 -0.036866744813020158;-0.82670061990215438 -0.66693663174834439 0.99978166721446571 0.39592445333946125 0.1563987098529197 0.73204272799203673 0.63011082930892859 1.1571723371179456 -0.9526170700106571 -0.5134967160271694 -0.72549487121531842 0.26455622181062693 0.69187253337347765 0.07018419332451506 -0.68167005676439185;0.10586416956789717 0.072983936926385148 -0.6491061890016131 -0.84844344977551767 0.5443854772954827 -1.4891247184070484 -0.0061060021618991184 0.055986469817438551 -0.15831354361695671 -0.98858157180941475 -0.091699126901790148 0.38035276250057926 -0.57503539587391161 0.30768551006504158 0.52069083431965291;-0.5820111203264362 1.1642968402379705 -0.5986325797905061 0.60277174035199521 -0.52499316108732885 -0.040472903964511038 -0.89777617343229732 -0.31934065674330181 -1.8098764926032358 -0.84726442578961536 -0.33249090323077379 0.35173494137030392 -1.0340566356407586 0.46490802583209284 0.53680405636002981;0.38416848139181536 -0.14531823694541354 -0.81899482513211463 -0.60910509330582552 0.53521213496784981 -1.1017350316584376 -0.067201366500890508 0.56605957582799005 0.67938983803802588 -0.79240423553447026 -0.05938898754028854 -0.1164621486222561 -0.1469242680695749 0.56068179655036843 -0.17927328248497934;-0.015089912019722068 0.18711604710821472 -0.41342896548978869 1.4512665677917609 -1.51111126874105 -0.49843709148829457 -0.77904574883676292 0.6775588997295966 -0.35756745119732181 -0.99385360012565505 0.47892061330732844 -2.3235784122838732 0.76425161093078675 -1.0529953279076103 0.78479585599019264];

% Layer 3
b3 = 0.20014087161412888;
LW3_2 = [1.5394100480776058 -0.68145796891412624 -0.5624646626466665 1.560275349200388 1.730578637314844 1.709560642429407 1.0292275483464921 -2.291722802229029 0.90646848520629619 0.94629347465816716 1.0555828950766519 1.4104570403053018 -0.69654143328615659 0.74139440400910694 -0.532093284873703];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
