function [Y,Xf,Af] = NOXCentro22(X,~,~)
%NOXCENTRO22 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:21.
% 
% [Y] = NOXCentro22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.59827559237048211;1.3674181829538239;-3.7132761456687988;1.2728880609524784;0.40194399028502137;-4.8284306816987899;-0.54868719321803017;0.65528923027028729;4.308156909821375;1.1605857966120687;2.4366285315687257;-1.2832974263269465;-1.4879588800218453];
IW1_1 = [-0.75047345425033818 0.28606054701743117 -0.068039340414567578 0.63248141198428254 -0.8742133173874761 0.012235319418338959 0.15093782013480009 0.34766634726958229;0.29428843010003519 -1.2683507280393449 -0.84632096522229838 -0.32218248120999793 -1.0600865497161904 0.49418416796115566 2.1908442720201506 -0.25458130284919733;0.75985844115189916 -2.1654238630473097 -0.10930414211364818 0.68493226912188054 -0.37756632592591333 -3.7623177181049727 1.3233094769888971 -1.9967354729727429;-2.8560615247459271 3.1639526182702622 -0.74069950398170536 -0.56266671155689663 -2.0860247843013835 2.5042283298348735 0.036763755071368184 -2.7002384934233929;0.53785966198019031 -0.30489360554944767 -0.54115659017951112 1.1981225427249436 -1.9689476490240434 0.082488096093888963 -0.26168555549854811 0.49077612494588491;3.082644424377079 0.059945464674824263 0.24615524870828076 -2.1295809537696027 -0.09777856198596635 0.92563301428317624 0.0675309165350374 0.26971176406677261;0.18468806328238679 1.0978589524199622 0.0023977299509644057 0.12636869504601048 -0.30047020467455993 0.37355070424904058 -0.024185131964156635 0.10988776875889199;0.31365406382522304 5.0004907369945473 -0.33246222686180971 0.40719815320912889 0.51454138137620509 0.12119450553015536 -0.093832995559342242 0.63722165424504518;-5.5815055991854718 -0.47425423755726415 0.12418596421931677 0.67055544752275531 -0.56109763410937408 -0.33717861664488774 0.059163379847284994 0.028952378238429763;2.2593273370805171 -4.088731955016625 -0.18208743504577812 0.50165723152205843 -0.25652848254474753 0.39322566745570026 -0.43675230402258081 0.01213858224117742;4.2430746815492926 -0.053017275894584437 -0.18767978821806927 -0.80592114310925911 0.49654783345182391 1.1716826585950486 -0.11618161952725303 -0.34759356307017042;0.29684380255246356 0.027054966665732774 0.25852408860985038 0.3031791442423164 -0.55498106603311481 0.0990106629563961 0.0075361087462410626 0.27465296504126119;0.10361219018972008 -2.3599760434924617 -0.059797477871436064 -0.35787385441662634 -0.36789312778975064 0.020949766573350008 -0.016676191968006335 0.1619310899079012];

% Layer 2
b2 = [3.3777190296718724;-0.13942616104900998;-0.93669357376263052;0.84847671615911779;0.62425393492646397;-1.7879669891146683;0.027499695714742717;-0.48999249225141484;-2.1084055361133922;1.8034195400958177;0.27142171042971774;-0.58563630839336323;1.3672572843116384];
LW2_1 = [-1.1960555121035117 1.6247065640001708 0.51948661209470792 1.6864351479718669 -1.5280262087796381 0.78873108738887177 2.7912417482687366 2.1584583752971964 2.1718978800335407 1.5475118926087075 -1.5666819133942058 0.089109803250087508 2.97576378726423;0.74022928407324207 0.4216205917190704 -0.53843603046946598 -0.63121437125227509 -0.25525652263306664 1.5193225337062695 -0.82823929575542177 -0.064891387761301905 0.22418584719753437 0.023342359448161494 -0.37607807885261618 -1.1973133673545988 -0.08174771620654761;0.54142749497524767 1.8208217375166911 0.30937790990128189 0.37481087657525713 -1.1760228586544277 -3.2858872700309636 -0.48804210211678739 -1.4586672555432652 -0.78931330107286213 1.887761614387738 -1.840776854564582 3.7035202308249513 -0.054203774324511442;-0.17556359895882523 0.58262825660384354 0.45469294770285273 -1.9540831740479385 -0.56269750720101275 -0.068253556845063151 1.114239073877745 -0.64112831694149508 -0.45694995121295601 -0.97763970889351992 -0.17069766484417778 0.66478574507274157 -2.1907780532860048;0.99327282167493225 0.71773151031856464 1.6995943633178847 -0.095448350090900844 -0.27268393930785273 -1.2528950197327604 -3.134074110339669 0.38725853077637351 -0.46947119592601949 -1.017418325079757 1.1235255161626756 -1.4303982431359017 -1.6284117194793497;-0.51920322281538522 0.40334498285794851 0.39669212445591334 -1.2225196819511648 -0.039307584182757066 -2.1300059572549275 0.89874113680358092 0.4544491546415601 -0.33485073753735473 -0.64731432821372814 -0.34952365977729366 0.93139150178642494 -0.38899298361919743;0.53446680053173723 0.49986595500391051 -0.29830914400115088 -0.18271057683695921 -0.27801475450700619 1.0862701025492378 -0.50399831432520492 -0.29454879972115572 -0.12217226207006801 -0.19702749578792506 -0.37317880836620787 -0.79429655624422868 -0.023134761516779158;0.86297677047863219 -1.2011664804698734 0.6230451094678674 -0.43903276399818181 0.35355595740215923 -0.040270419541901442 1.3206705869432778 0.26292962167980238 -1.3383668627025616 -0.41408241932622647 0.15650361577820496 0.39402723241909898 -0.1321420142395732;-1.4721188533884171 -0.65159937653560562 -0.95351729018896569 2.1023164291018119 0.27754682341151299 1.0410051816063917 2.4911463205683844 -0.17597353210869049 0.56244262518569743 0.45605045536606942 -1.3753280836514887 1.1623362743390522 1.2215904158073094;-0.3158051227925312 1.2964269788913996 0.53956797975072779 1.6908845129099905 -1.0334124332977437 1.3890349801927817 1.4086672894677663 2.557320343654403 1.9901936526345401 1.5399856954124014 -1.3627167420576201 -1.7343195551502135 2.9606490517631392;-0.67124698407131511 0.31682033214779004 1.0498116364440737 1.2622697780188719 0.20555267616901629 -0.83029408666291693 1.1056601873693939 -0.30525852535546849 -0.097234122522512872 -0.46199664286792314 -0.09507897118364389 0.74600588258360345 -0.33067704165411738;-0.40508690555489829 0.87255320411779536 -1.6002500455311659 -1.8326805286137129 -0.10531440542411681 0.81974357214219717 -1.3933012061690526 0.47824685195519323 -0.72760417204799399 0.21980286433517823 0.016684953826859979 -0.29469760951086049 1.0906054159572618;-1.1828609327714685 1.2350185810938441 -0.001327581575465012 -0.5690697334942203 0.78389770997130026 1.6934510906438272 0.19750972705180261 1.6667477421305554 0.79189216576556865 -1.1187208719459181 0.17051362411164334 0.30781865796010888 -0.078507181030156525];

% Layer 3
b3 = -0.71851941957301624;
LW3_2 = [2.6046225223627548 -1.8443787607118474 0.53178638556938562 -0.34561667770491988 1.5288837487475764 0.59446998624718972 1.9135374569174268 -0.92792375091100987 2.1849854293870177 -2.6042739359977358 -0.91335363396443525 -0.30256049999213763 0.84959408203323439];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
