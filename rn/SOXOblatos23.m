function [Y,Xf,Af] = SOXOblatos23(X,~,~)
%SOXOBLATOS23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:43.
% 
% [Y] = SOXOblatos23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.5530807874073993;-2.5571948760293686;1.1166092214510548;0.83799894434629207;2.7197239697059072;0.053720280399179449;-0.10968947096344639;3.7180533036938184;0.33676711390685088;3.2792256121218442;0.35690951228985757];
IW1_1 = [1.7483616438879499 0.023611314836216021 0.96762465264702646 0.70486827566932553 2.9761755918070945 -1.1641511703878609 -1.6018599907941866 -2.8201154404737765 -0.012751070946572667 -1.264020948866748 1.9097163826627159;-0.09017688897768085 1.779968526783553 -2.4794196185793691 0.14732859986883992 0.11468415801048459 -0.41415253599617041 -0.42310877663081725 0.026005791648588843 -1.7553891347814716 -0.81102024066028178 2.0848020103333322;1.3762847342825206 1.8903657489420582 0.011318499634677976 2.7664468182859197 -0.078001330240636879 2.4449706230200512 0.67073760721587727 -4.1023214915862685 0.3590488260192426 1.3334744265485325 -5.4870027259194609;-1.7952838117721361 -0.58798812479826335 -1.2240843423984962 -0.2932663941998862 2.0432561150197861 0.38312892717610852 0.090761532307073484 1.1123634408830552 0.24253510398176328 -0.063985793153497811 -0.28194162670326467;-0.27298074817318407 -2.3964367682570895 -3.0812028311012005 -0.33550635131047712 3.087336223477958 -3.0909720421742124 1.9014412286730951 0.88393405612622267 0.19841344962932758 0.86157281428693677 0.78986724135905939;7.8806414392093309 -0.5424508590818089 2.2952876651879719 -1.5797486553847897 -3.2017196956256568 -2.2486569361633175 -1.1215790986982084 -2.9349044785250471 -0.3156716946774808 -0.53948036006419209 4.908773322483067;-0.10023848497575492 -3.0545568935727903 2.4249275641026067 0.58203034439351486 0.31373561757697338 1.178324990148546 0.85606926658102878 2.0713459092150335 -0.85537709293350572 -0.021664178314515246 -0.61673392540352656;2.3667999369851223 -0.71287007395946256 0.27837223308561132 0.28364150757363504 -0.42753321530657845 -0.95913972965119332 1.1266073160301502 1.1010615482841637 -0.20036247274668267 -0.26489018127328234 0.10184805505734952;0.70364126107626046 0.97783716699191536 2.5717471626144235 -0.91724557939219631 1.8929724292735861 2.6669557092805372 -0.89606495152802224 0.26981213397108145 0.14032211371755252 0.21259589550676178 -2.3475239317032144;-3.4417727463577377 0.15611050794455694 3.8587624450284408 1.1290996895901186 -0.5302818611012079 0.62496296562630804 -0.92590582939638966 -0.56435966470862997 0.26124695432445239 0.028008398021655535 1.5477214866670925;-0.76490370467866087 -0.47548560416542501 0.21562900813563571 2.1034759716071427 0.39859485265301253 1.480176515642684 -0.82967753416203727 2.4025500011497725 1.1192618486799688 1.2690116205165547 1.615594741948353];

% Layer 2
b2 = [1.7587467633666767;-1.7427266350496855;2.757179463527569;1.0646305611480025;-0.41375902619246685;1.5050520471436004;-2.7741918094486677;-0.72681152950812089;1.3321119708811267;1.9148906182482579;-5.8134699431609098];
LW2_1 = [0.24588319860496546 0.66197046301775231 0.4788509641539363 0.3703641675699253 -1.4242263377307134 -0.26079063746499387 -0.91002368851181381 -0.088286068655251071 -0.16485481941420699 -0.93564331906681264 0.97232632733323143;0.45076061056823186 -0.15305632029749391 0.017243246658674681 -1.7160653412457729 -0.27977014207846446 0.75904309561182604 0.41876977748406319 0.43700979105280069 -0.32251051643905271 -0.30589401279051714 1.3742499194458127;0.33156101471503968 -1.1676708212229381 0.53073638226915842 -0.055007972861155732 -1.2368784769242607 0.95084959550471793 0.71489583718021399 0.32281742269073166 -0.80674609895211891 0.8381817833150581 -0.32733521107174091;0.022590573739606393 0.02087881286739952 -0.22710402679528613 1.2718274920445563 0.84931591778655624 0.43450189718022253 -0.35776601579165884 0.37917471400868602 0.80526328189516105 1.74271465711042 -0.54413715610661328;0.015433513405406031 -0.042196688357832676 -0.083828584820679147 -0.099747491384545361 0.42377203198148816 0.4619410850931292 1.4614353822096628 -0.8906691884319915 -0.68520999121898851 0.94472041019150421 0.06290370666046978;0.36904744141104578 -0.49653880865015909 0.48328438004188923 -0.64188965750331173 -0.37614782951143028 0.37554489815186554 0.61687548442240703 1.432670955284195 -0.13439979910419964 1.2423998421105371 0.037036837382554907;-0.42090795150504817 0.32194675340164175 -0.49494353818062992 0.93167137543906253 -0.092773399865077821 0.034071744565567302 -0.63060179846020825 -0.079727662529772911 -0.25786842758377476 -1.259107308144465 0.0070482135336432904;-1.2760448498374883 0.68297075970104359 0.57289037116622521 -0.96084597905327063 0.79854786112780574 1.4484383189947121 -0.84039782819417397 0.79825802283655678 0.8378768758695303 -1.0355228585672041 -0.020463607139842105;0.025016103773242079 -0.046019654186623814 0.08792516295748172 0.11996360867213141 -0.23556063072813352 -0.52097427855079048 -1.7535971610721566 -0.13482281432907506 0.73340669640638156 -1.1202719615307664 -0.23052092823239098;0.80520499981611693 -0.69972620111678641 -1.0565665052028255 0.53505615956133512 -0.47259800963373105 1.0519256825081622 0.40112968607791083 1.052432285337906 -0.34285952650227886 0.87927409352358066 -0.19535493294500386;-5.2797375537841891 -1.7024194930407994 -4.2155445017917028 -1.2416575622441792 -5.7994265801097296 8.6254949458816448 -3.8829047094753468 -4.0773883665143273 -5.4696994692900054 0.96342455976553198 4.5401493360314822];

% Layer 3
b3 = -0.20210621915357191;
LW3_2 = [0.018272053197283759 -0.1647700699952323 0.23732507841441106 -0.082185007738135543 0.23798815098764245 -0.70145206730048271 -0.52952602855106301 0.045938613460153578 0.23093948945361958 0.10436302985971319 1.0176076432626782];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
