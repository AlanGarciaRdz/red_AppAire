function [Y,Xf,Af] = NOXTlaquepaque19(X,~,~)
%NOXTLAQUEPAQUE19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:16:23.
% 
% [Y] = NOXTlaquepaque19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.03490136570561;19.6078431372549;0.0212539851222104;0.0523560209424084;0.00632111251580278;0.294117647058824];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.85036387985936723;0.80805706167139513;-3.7862863471271342;-1.8297078135258584;1.8816906761945345;1.9737865477299343;-0.51608675305321072;1.3692710356492854;1.4574824496999139;-1.2598829422659312;0.20558126925989001;-2.5255708667662002;-1.4385920921698387;-4.2050860848358509;2.59218131848889];
IW1_1 = [0.37470863691004558 -0.87452410751872356 -1.2030256077976169 1.4777715859813367 1.4281909768577767 2.8017816538965787 -0.14685484503793109 -0.61968215686129746;-1.1258815061437006 2.4879409952085676 0.49547022723728129 -0.72096423297877199 -0.60246656248956598 -1.772407754244115 0.95080449845022741 0.058173056062459282;-1.532938152622038 -1.7886547737884666 0.53172841625950795 2.432359722952655 -0.61980927075060022 -5.7219430457991507 -1.1703674373782444 -0.84602255000270243;-1.7951407454155008 0.10207967537359396 -0.89172225232269386 0.28342822267112777 0.52058163452919537 -1.0233573651758447 0.022584689778711031 0.18397551285725561;-1.058648113283607 0.29616179186415259 1.7013994396857395 -0.95565742732616021 -0.5436276334908362 -0.2995975719604006 0.13409148100321322 -0.83715120681266153;0.19884804004224038 0.94070725775395125 1.1937773077423732 -0.49935271190963509 1.5224186972110623 0.4811186388206985 0.10335797407960877 0.078170979076670241;0.8677925585034153 -0.46050325737832898 0.33131265861851378 -0.8291089187919739 1.2508424599796697 -0.77786733755878767 -0.032443512489031795 0.29247601548342461;-0.50293157876128891 -0.12916323826280091 0.66986225162502033 0.27175909046695346 -0.73733947891482188 0.85855034334430236 0.120352563681321 -0.57276864839095987;-2.2869999310403117 0.45058437346417024 -0.036713438195436238 -1.2508998495489998 1.4488200866414223 0.38466053349966389 0.29189236187866979 0.22363871369450555;0.5566524476942839 -2.9958778543732212 0.74996939089784231 0.75432146372473108 1.4356601065532155 1.8726937095241769 0.045917208925437693 -0.26698172340649323;-0.20057598979451471 -6.5841907247406013 -0.61971120702395066 -0.082544484471304705 0.030818676173005585 0.42691290585573932 0.086840818319667834 -0.12159730242114095;-0.063965939754101725 2.7058219907150396 0.69589294462703633 0.0097093186143758017 -0.33945449774175918 -1.1332362628810988 -0.31607812890504366 1.2502417197326885;-0.19554555821505665 -2.138807563111282 -0.27321475417908303 0.5866005208268612 -1.7036933536219214 -0.38900270016730487 -0.073355277736199154 -0.056650334832771237;-1.9086314568836014 -0.19990439394750187 -1.3060885012797487 0.782379499676086 -2.8218887226726053 0.93217669456870578 -0.22675130971133389 0.56341974450184218;2.0136847814502827 -0.71900713047475728 -0.58516664619546865 -1.345914509139065 1.5859894986719056 -2.0332231719741514 0.43348685693246997 -0.87431426384151723];

% Layer 2
b2 = [1.0390668971792218;0.55403717848791467;-2.6638110031646987;-0.42805643798992093;1.6509303442037697;-0.92919067728983662;1.7097140257411385;0.035726555605811984;-0.35369044943275513;-1.0487329043564808;1.0081413403608663;-0.088127122916124956;1.6706678519225981;2.0886384644935578;1.8145961353464748];
LW2_1 = [-0.21204654164864384 0.21235540744044326 0.29414584953669598 0.64783973946683748 -0.048449917077913789 -0.067610878352968182 -0.12941445379536018 0.27855320435411229 -0.2101185127520972 0.29307874113008237 -1.0091386619374694 0.010343894503383126 -0.924056233899754 0.74270298563672066 0.087320330728196172;0.0014165997674367194 0.25923195621809059 0.90956184527779793 0.029123220156672885 0.83508676277606519 -0.19298709735633002 -0.50105184669610336 -0.63307096926368689 -0.10425040072062915 -0.10249246817769937 -0.38018755436923712 0.63911817522504022 -0.40345429047468795 -1.5733381785023997 -0.95194155132122704;2.083167161721962 0.7744897813114362 -0.61384110129350167 -1.1574239446675114 -0.32539540265879491 -2.0981488798751911 1.5489546373170719 -0.21926529053619287 -0.48968155968989158 -2.3667527380486741 -0.39938168680041725 2.0679171658166253 1.0216552026577925 1.0120405065422209 1.4972534335865482;-0.33207567312834768 0.004570212767326034 1.0198237152789245 -0.29355313557588258 -0.012151594982807306 -0.61460137551136917 0.024140436715123333 0.24109432083892565 0.48514866069252088 -0.17233204644166236 0.014651269730318425 -0.19417103546841441 -1.2485011936389689 0.61941865471112634 0.89148666554676514;0.13522923548393984 0.30525310451583099 -0.4330374674984121 -0.4676154175349575 0.57572412764239 -1.1471592557091697 -0.52011053056584022 -1.051111385352602 -0.11802758690702719 -0.080325402480921362 0.69399357280159701 0.0018269409133617291 0.44506939420536068 0.98108228425048227 0.66962387727066153;0.27243835004800898 -0.74668481453361579 -1.2024877447328719 0.39104901850877449 -1.5206235969614088 0.34975296105525966 0.65226701030004719 1.5981580075755619 -0.38844062710506638 -0.43038825121159247 -0.43539817793856456 2.3532317625605139 -0.39622196239243079 -1.2840080385633652 0.24758219549625726;-0.24272541517562429 -0.13206575452049796 -1.0253781370676045 1.0890634901914888 0.25204456996721436 1.8421734826604224 0.052549414228474464 0.13905619597198882 -1.0765129060581637 -0.00045921343442324042 1.0680842466436091 -0.058042945118576189 2.5464505754628761 0.77939999594842546 0.95272763518318315;0.096877201102924956 -0.17784583708422019 0.069528377187218604 0.47111175564949626 -0.76819088859276952 0.55307793786777493 0.42262021010072875 0.96031939624762386 1.1565729142568721 -0.35446507395887089 -0.66215784249380982 1.0469308500547603 0.4366056058996074 -0.26027030883465574 -0.65200100346270218;-0.27311976494402673 -0.63340629067079379 -0.94517819876707032 1.1341195016700294 -0.48671226287180952 1.9332810986992142 0.43858186274768174 0.77972578362072487 -1.6254187988453603 -1.3011286523889938 -0.23842833858732976 -0.28030033997072862 0.70049092563838766 1.2063463357345188 0.0015585585893101994;-0.17673688814830149 -0.079654387565335605 -0.01886413354438881 -0.094031652723038289 -0.58709058694300109 -0.38240064791695472 0.038159355704060892 0.51138656480340272 1.1146462247075162 -0.37024631151993803 0.02805888464703353 0.53235880879260722 -0.8449084916146411 0.71677533124293225 0.42460794421437814;0.39154523848065592 0.1930724595972178 -0.98057811765632996 -1.0204534657574114 -0.033297318028903913 2.3863169058577656 0.82644016222878469 -0.75133261772027216 -1.6132910102507256 0.39539214692624175 -0.33480052077687322 -0.6749201261663238 2.2819634736772114 -0.81866989564935444 -0.21101074212129861;0.28693164349980843 0.54536990896609483 0.56675498502447119 -0.9349351516939961 0.57996539461284469 -1.6824879837378117 -0.68302469111684405 -1.0356748701485878 1.3786160026731824 1.2795688976029156 0.23700609107746551 0.231844934839008 -0.64569877913902129 -0.79011217550209678 0.62843527647122488;-0.24164517280450054 -0.33936860294906412 0.73050056375386785 0.025069769292996875 -0.07410436994837051 0.078885715166606446 0.63248598032735892 0.10464756868748437 -0.81520218502012831 0.43329094058209738 0.080838360118936123 -1.2414186795455804 -0.027851934632334374 0.98207748498025926 0.27747687854883257;0.25029061069913727 0.16304892038139193 -0.43573543136908982 0.46696176474550549 0.48679512608175857 0.38478527232364451 -0.052839799359419709 -0.25858742450339678 -1.0229634105709637 0.45720381956746703 0.081603014490128564 0.033750316997442312 1.2315402831287638 -0.35605441240875774 -0.19431841396088548;0.46828342191516259 0.59300148905978034 -0.47932643025950145 0.95073513244182828 1.1954379433972069 -0.22654349855015149 -1.0984560340740732 -1.1765705880872672 0.39588424242759485 0.82232752820031385 -0.33647718447345193 0.20878118613015395 2.218971047456928 -1.9524066282485313 0.25111785088367639];

% Layer 3
b3 = 0.6760409002751615;
LW3_2 = [1.0092986521389582 -1.8825540220118595 2.0611777801088742 1.7164672692243446 1.4176181684524525 0.36382615399631385 1.0228581503276879 1.1654220640421014 -2.1429840875477915 -4.5662556228150315 -0.39323715412907617 -2.4540409103786338 -1.3474020036139998 -3.242605819877836 0.914515114354014];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
