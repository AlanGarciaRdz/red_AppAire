function [Y,Xf,Af] = PM10LomaDorada24(X,~,~)
%PM10LOMADORADA24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:14.
% 
% [Y] = PM10LomaDorada24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;0.00462534690101758];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.5840453155847474;1.8280247549667976;-2.4352237001483794;-0.74667394314577029;-1.7659311910270108;1.1440016727560727;1.2296230222921813;0.87542190589213797;-0.12040234287884938;-1.5172203053592259;-1.2708826999979017;0.27562384162784659;-1.3540521146298314;-2.0422395949307273];
IW1_1 = [0.28634197805352429 0.46726633030954068 2.82787029206871 -0.88116651537889379 1.6705285907972784 -1.1976185601827158 -0.52941944952936426;-0.19238451332132581 0.36803095912262473 -1.1780704188711972 0.18994275839099012 -0.059209424242834444 0.92787907864174524 0.32826994507453894;1.1841675383908696 -0.17169745846830586 1.6894168635663103 -1.2401836870500997 -0.9757773447017587 -0.44434568725495799 -1.4807374799620934;2.1437523464981116 -0.16700079847142676 -0.44051578654519297 -0.33567758871406733 -0.23519704120362117 0.52442923112637707 -1.0814765070426142;2.9036791831489701 -0.53142259437948214 1.459065634686763 -1.435523583054465 -0.53198143698477784 1.8009505379273882 -0.3150853729043771;0.388847642787227 3.2751427953060586 -0.3891804655793808 0.27372077040359788 0.3410917471203998 0.10042761517528076 -0.59820557902896465;-0.87062996192072717 -0.48339016541806751 -1.3688063697046804 0.34722663916914176 1.8169173276091484 1.3008051679926167 -0.94541602735306318;0.21185626164766158 -0.78150824932668095 0.35673270767684367 -0.66806317102154289 0.92454365062678889 1.7439907706984796 0.58014385382156664;0.091336995231375645 -1.9120975471642143 -0.73585546211439412 -0.80946905785217582 -0.53088865923980355 0.98775312027663487 1.0493449830086714;-1.1623759890105148 -0.03037211493096827 0.28624210164518532 -0.23488432530378717 -0.97664218867690422 -1.6078054257648873 -0.044081561927245709;-0.54526700859021549 -0.82976470169793948 1.7177948640099985 0.1671751702257751 1.6307556379992807 -1.4241143376251129 -1.1899820077558505;1.6716347406685084 0.15077036610925665 -1.5200100381931161 1.8288924795131762 0.36416060811280931 -2.8309748686714209 0.46764322534479158;1.2439356288447576 -1.5961383763631651 -0.48856364752142678 -0.15932305949064876 1.0468640727026775 1.1523293851888861 -1.0170738396797776;-3.7024142952066743 0.12320313492186354 -1.4182949712649477 1.3444860874383622 0.34031964209744842 -0.83282332551161842 1.2866797335568392];

% Layer 2
b2 = [-1.3997598601757308;1.5577906201176626;1.0854502998964521;-0.19232679511101564;0.49913523171166796;-0.31526505384432268;0.37425400577465845;-0.12565048956049885;0.36873904719143208;-1.1339149139083016;-0.90104474088625253;-1.5220182488404652;-1.4877827241294714;1.6436044274632973];
LW2_1 = [0.00081547935471520082 -0.17230016500876819 -0.71641507878267152 -0.12646379779372893 1.3982354431597308 -0.2822342438579829 0.53329401468782445 -0.60671434064755403 0.41510704333142817 -0.14875116637508012 0.60054334017976607 1.3577377260455745 0.43865792889017452 0.93243353429443154;-0.73810231978727492 -0.68354408136753153 0.2267339820832539 0.28892236683744843 -0.22074434868174264 -0.93610880371935212 -1.1710423443752105 0.52641856507087392 0.19603595132822191 0.11460769490434614 -1.3689777716760307 -0.21042851339744464 0.5779725218371512 0.11056622064730527;-0.83110066459838361 0.5804391227800767 -0.63506938987323669 1.2398979903905629 -0.97480477214781447 -1.0757585391527695 -0.23218593748805286 -0.90623840224976071 -1.3459845867398024 -1.4823039940120393 -0.083184353185452448 0.044597490006624052 0.061741599734131326 0.1772416361756011;-0.87465333484481878 -0.89252707141955223 0.48284971809962057 0.48530857857808046 -0.37299531332634062 0.29836419730996511 -0.76591330901970667 0.48413203697247614 0.13030401868126246 -1.1042503303689426 -0.86280532296952117 0.4907062760652412 0.23120539034350063 1.6732942582765848;-1.2501690487823058 0.93223950171757619 0.088293751934882564 0.1404226215745146 -0.52030972651176155 -1.0071948925997951 1.0107023133259285 0.55610311732990769 -1.5133011297695556 -0.059750510340636859 0.12762504378427242 -0.81059641032431196 -0.36580593773943632 -0.2620434655004828;-0.91383860203897405 -0.55379067739406462 0.12519079123456911 1.2996541672440645 0.077819024668947967 0.25576001934425713 0.90496818278778324 -0.25800982984607818 -0.45913887099375489 1.6591871826457298 0.99929446413480727 1.8908574354486873 0.32467102195173031 1.4572869474551806;0.062358868131704423 0.83544856333662398 0.97680248551411719 -0.24884437283137925 -0.37677868149758104 -1.1943203318896523 -1.1597275481387292 0.55384424128465881 -0.30161003445800449 1.0135613462905473 -1.0869100483524521 -0.85575370881893709 0.95240952617779351 -0.40263297261299302;0.37212681274423476 0.61834326832023556 -0.50292269718854843 -0.49739971652556814 -0.98220695015432724 -0.21194178774654715 -0.8768639648738632 0.11893399993503712 0.35150464685493898 -0.48609009165982175 -0.10563343440141013 -0.075990682914056543 0.27394301414414679 0.73129257929138958;0.024121342453671174 -0.021111592399470011 -0.40869886834288854 0.41938663187813102 -1.0799706982564339 -0.12164867872713768 -0.33941245835036787 -1.0576368481623619 -0.5171401476499321 -0.98117625651159879 -0.25737997176909927 -0.3456599261144605 0.73643050601824933 -0.023763656849012299;0.56765765567155591 -0.71465358028188575 0.92879366086000859 0.75961690722259068 0.17849245651724713 0.39960041636577404 0.52930603680362409 0.19385465190478768 0.0044625979174358803 0.33957608937383033 -0.30681008977829816 -0.49846013893235785 -0.44213017325035076 -0.47850374199673323;0.16393107332194901 -0.96475740030323465 1.2298075753500597 -0.62304763028538768 0.75858798861117493 0.93609633878734266 -0.33263985362520665 0.62165528451420693 -0.0093264083175448008 -0.14421610637357232 -0.7605271790953978 0.53537923887601147 0.99937593678037495 0.2458220067644277;0.52365707287038643 0.36462902853957146 1.3447732717091387 -0.32622845885790891 -0.5293245323969068 0.61174608045003076 -0.38813345972758401 -0.92918067301217067 0.77661984267839701 -1.1444882287145051 -0.48309335910796802 -1.293871118818456 -0.6855278859372409 0.43958957956515654;-0.94457960854906453 -0.35011278868068879 0.31841456617237812 -0.52360881045819108 1.1653155504476724 0.5723806037451552 0.37616360989285325 -0.51123898241334054 0.30344213620735339 1.0332835963094489 0.76086256364016469 1.7202026065569931 0.36799498710120981 -1.9734891792273919;0.55415639906764624 0.48100111278627794 -0.54333132601722922 -0.56693184473102343 0.69310178099437592 -0.12290256409715414 0.37029975156746187 -0.67568532575823004 -0.90455613743080843 -0.37582452465802413 0.35273240349933155 0.40829538354354572 -0.37595557387202361 0.021759448189218423];

% Layer 3
b3 = 0.22491778827565159;
LW3_2 = [0.4172170306091017 0.22500770068428277 -0.68552324523222596 1.5214889126352666 0.36551871353347348 -0.28690947752156948 -0.23449344595849761 0.78048209399976198 0.83550643672963443 0.83567624766824933 -0.39870810525585482 -0.35273126116433895 0.54000018924425741 0.55353156485556743];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
