function [Y,Xf,Af] = SOXCentro2(X,~,~)
%SOXCENTRO2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:26.
% 
% [Y] = SOXCentro2(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.4752570781813121;2.5954608641749193;-5.2445005102960716;2.0996431164461131;-1.9352808685335086;-3.3484828200178334;-0.39643765265119824;1.6936389998744235;1.2590801597738723;0.053425517011648105;-0.830738348185043;-4.1598225613550248;-2.0013446374126773];
IW1_1 = [4.6894980692385317 0.3537340072427082 -0.47885421865241307 0.14826408595756246 0.77205439524948172 0.44123339093509495 -0.25990686720334194 -0.05790484260274395 -0.085393055793625661 -1.135173919781082 -1.2442954569034068;1.4089201210578093 1.4335458921628754 0.68373687094157287 -0.88346262224019156 0.12269936101802933 -0.87378629262501906 1.446592806324666 0.29167990119007731 -0.074890199301630794 -2.0414752701022274 1.5222253643601114;-0.57655989336160329 -0.16119537677010695 2.0297225321638384 1.9614278321924985 -1.0268176871980481 0.65814250097664606 -8.8013005540311067 -0.064793015112438457 -0.60369713825368509 0.45478597158027567 0.89829159148559734;-2.7451195237904948 -3.0201913974150836 1.2401276560603169 -0.52716751223729363 -1.1217419763380603 0.100982865021889 -0.72229154136224383 -0.41768376581443106 0.2143609465082302 2.7268860781664261 -0.95680525393729643;0.27913865392550086 1.4326027015779588 -0.5674367098617864 -0.43812473922674311 -0.01677576424451243 0.57329233858202344 0.57869006723034955 -0.018209061203519658 1.1325622650457592 -3.7368766428706373 2.3844823889521103;3.4580780795878798 0.039724381708242142 -0.4755556280363753 0.11142774785878994 0.13485723423891791 0.72062735249367704 -0.21638569680912245 -0.18161920436627998 -0.0044153939187263217 -2.2952655601568996 -0.89534914967702184;8.0024505116195535 -0.38943105649440984 -0.26810333799389419 -0.32691719359881599 1.2772281653620838 -1.0431050297973381 0.0021184194411514069 0.086456059484780426 0.46547248238907574 2.1020797916826348 1.076816583360146;-0.52478682905259155 -2.5800005479578232 -1.2299172664898121 -1.0537397220343856 2.3858997807826627 -1.5245062936692408 -2.3566086518943394 0.48171888128546625 -0.22826525579551693 4.9262518427743318 -1.5595590868511156;-4.0316563074025673 -3.526046874931994 -0.28338412634365195 4.2870918307742194 -0.64536496253673137 2.9043733165830141 -0.35785841238626559 -1.179236991057278 0.14717172726426325 0.99240553297420375 1.5206222171129991;0.38669878838396021 1.2565988003394173 -1.8348582415579038 0.88592356060525146 -0.13636829058208744 2.0991557322251899 -1.9887437316327721 1.7726238312183766 1.888912633480063 3.2899929344982519 -0.44472372808713806;0.17767769811942646 0.5070771793968184 -0.20941817279188002 0.62364733022416541 -0.1874921702019563 0.80509657185475425 -0.32434929457757833 -0.32786492893869046 0.5046833631972143 2.5165948577051576 -1.7927564349487008;-1.7436880710900193 1.8481572540078783 -0.155266673464934 0.80836597201088722 -4.4636867864249465 1.5762450082596804 0.094723798133232895 -0.13098800685489173 -0.37403589634070283 2.1427281911904781 -0.57521090866971702;-1.7874322814007915 0.49086410810015307 0.17588063634692905 -0.39756195920360299 0.67071340122367873 -0.56169247308181258 -1.2232302819647272 0.36661384542762421 0.69377036859385333 -2.2060558176711638 2.5575430479144452];

% Layer 2
b2 = [2.0778389358469163;-3.6715325634332729;0.94045169305203258;-1.2125286883642952;3.1853953217057587;-0.71498879197595056;1.9325744184397065;0.65069740539921483;1.5934033953185203;-0.24365412010807086;-0.14786290966112486;0.28290406959916609;-1.081602561876631];
LW2_1 = [-0.60842334663688868 -0.17531307577773886 -0.26367970861825368 0.67133765224354636 0.22967865202473026 0.94416335585510702 2.0916492173067422 -0.23191435525915327 -0.58990974356641157 0.177077634231321 -1.5680036623121576 0.58540824202664699 -0.056165840119738158;-2.3356925206087786 -1.8579358918387787 -2.3195099853512033 -2.2445455820354239 -5.1809551186207736 0.72238563669666034 4.6920430235096857 -1.7662258527179295 -0.4658385938002052 1.4464617729549099 -0.11097905326493371 3.5176027121577111 1.3274832718688794;-0.69858762508140504 -0.57337502613929237 1.4713523905545669 -0.17325075588948008 -0.9960117709420131 1.2087046046237879 -0.081454376351918767 0.40103292276400654 -0.67601986281351334 0.19987556768546083 1.1423780010578495 -1.4187512966037343 1.2545066556612936;0.74602918994231548 -0.88988038604965281 -0.43344030556854729 1.2548505681576705 -0.014211538477729171 0.085295282823898144 1.3244414013192807 0.25181264060507674 -0.56150556617892255 0.56785822504720906 0.83482487792218885 0.18802633099338417 0.79188785340466405;7.9289944319677499 5.4652149565012174 2.2922834207856924 2.3663383935617084 5.1840662280661736 -6.3592385980784059 -4.4316389426147227 1.7740526739456719 3.534388533884024 -1.4468445196034307 0.10208581980400802 -0.25194442899564229 -4.4700201172676355;0.47055686258855833 0.12476355099448666 0.29625821007403752 -0.58324476787531976 -0.15879527441009628 -0.73701995344930804 -0.78010830577463053 0.2309989722354788 0.5558063662332744 -0.1485331058141669 1.492740928472617 -0.60744451877240269 0.07906900425157759;0.030575744061790491 0.53436066456536047 0.18930138046361089 -0.9575184852225479 0.27829719236409767 -1.3414784648625484 -0.88717630458622088 -0.068142272362321121 0.5939457374601681 -0.45875285117731102 0.084330191237009355 -1.8083887865850952 0.36176444124202506;0.47901830541700996 -0.6510730217035412 -0.80418509396969995 0.28667077624871318 -0.30187739303085281 0.89559292847558081 0.24455145628256256 -0.48793903523673232 -0.17751949328728986 -0.087344617206756681 0.47673809008323331 1.2946915815337432 0.72186528664138083;0.54513975270475401 0.47023552988084261 0.46103935765653903 -0.25840759326196444 0.50675702166374348 -0.19295391926446989 0.42016742796251677 1.2155364121515244 0.22722596222864691 -0.32935952352775444 1.0332924198032412 0.21097700611700143 -0.11489530750813309;-0.98121370487299731 -0.085247277272644584 0.2730819112647444 0.19061426031590217 0.13516117247051346 -1.0218110426123734 -0.41307096038336194 0.97979049008172769 -0.69182913596246953 -0.28639989549691813 -0.46545509676302455 -1.5116856454883629 -1.3073126391677306;-0.24286524428166612 0.9918433584319829 0.68114934430123086 -0.45781482898236087 0.55917495328121825 -1.3535843425427154 -0.12401394275375283 0.79512844606836497 0.31246602570596166 -0.048823889493135826 0.048541370457239941 -1.5468371767131199 -0.80390654698697728;0.30547096467916041 0.42303680108544384 0.43600819010222941 -0.27090009689385453 0.36805564276390373 -0.27435170436442602 -0.77992505996601025 1.0929440530043346 0.38786183321504425 -0.33254890955456573 1.5082545298180599 -0.14674860508021143 0.077141488318110463;-0.85509627906216301 0.67379545509944427 -0.43696628124094478 0.28037772966465874 -0.21155407919810745 -1.0246906037460972 -0.54725843434479793 0.34684710710721245 -0.29268319610520094 -0.17484894272007759 0.077402665635823056 -1.4194200428378259 -1.2524458311721145];

% Layer 3
b3 = -1.2401793587677115;
LW3_2 = [0.97871160480888342 -4.6114145055737641 -0.065359472223853576 0.47889298943437747 -4.6325611615773914 1.0469806134217381 0.69315754124611229 -0.64971581976721504 0.32914400327370313 -0.31638170280290911 -0.61472167207117867 -0.33305255676262235 0.3731013530703256];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
