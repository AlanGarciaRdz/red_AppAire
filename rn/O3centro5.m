function [Y,Xf,Af] = O3centro5(X,~,~)
%O3CENTRO5 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro5(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.6387553449777446;-1.4043097360289378;-2.0943039272735633;0.31022801442226949;0.49550798260518991;-1.1898333445770792;0.89858358532418281;0.31505242178228687;-0.31916468142016091;0.030321409719238468;-1.8100692559609137;-1.5060764774903557;-0.76508024561708066;2.2117784303388275;-1.8628318778506014];
  IW1_1 = [-0.88744225362341878 -1.3056984508696712 -0.38287853289844903 -0.48424821020545772 0.77256036410792917 1.3690378535170171;0.64954282392607776 0.77587983975501151 -0.043403429172594127 -1.8085661218861651 -0.19419910997802795 1.0479594224542308;0.9482768994096975 1.9132327139279588 -0.51988084321121752 -1.4305396561509267 -0.9391266704553628 -0.71050058745278333;-3.0111318060894217 0.4393575794254842 -0.3484882218898348 0.64441941673825087 0.014630401233963128 -0.7138525970338494;-0.012675495521532049 0.37541405341926321 0.12383939028313901 0.60072570182670315 -0.082526081820561425 1.6177427236632278;-1.681054673527649 -1.5696086964578579 -1.296209819704977 1.4728955148014444 -0.52210733494675143 1.0274706852943283;-3.0874044173890183 1.3140162560487652 0.0059509909196193735 -0.45888854549738795 -0.39578397412803384 0.54782945997026689;-1.4413165578625406 -0.59788148929502116 -0.076901761585892431 -0.47628296624942379 1.30962540999109 0.91926531872763173;1.6742891564184479 1.3615256526763713 0.37911050030298876 0.85792515860572804 -0.46383394579588816 1.7061891454960147;1.4721809090228508 -1.4131949620041304 -0.53418041158086604 0.4006298043159171 0.93600974655928348 -1.0151760488268002;-1.8035665128003215 2.1419454894107153 0.10027957382177903 -2.1230274084006555 1.1096318728575254 -1.126889026201739;-0.80432121257562195 1.0311903375773628 0.55622495868529076 -0.32532974864380926 -1.7869717091167427 1.8621695551991322;-0.4983717323362738 -1.9240950338102729 -0.13873159057393089 -0.81702234693072007 0.58924089027449889 -0.93820101866643157;0.71390870295789255 2.1350927309592524 0.17871807673977114 -1.3297625955147647 1.1887636291225472 -1.5531755098683677;-2.4556805987550736 -0.22852116568888678 -0.10163794567353376 0.22040521510674241 -0.23011455216959564 -0.6673911057667048];
  
  % Layer 2
  b2 = [-2.1544430782796282;1.2559204969646316;-1.4177789332827013;-1.3760462285035175;-1.2249115355681859;0.73009176686211807;0.91845729190442615;-0.09061831335614362;-0.4137832699046618;0.23012975769481991;-0.66188266754099234;1.0291984982657714;1.0513160623805686;1.2370304847959683;-1.7716206031050457];
  LW2_1 = [-0.5376894398826727 -0.80357708093662761 -0.20531611771980848 0.065272739904423699 -0.11078064040171445 -0.30987068764201875 1.1306801033040312 0.049787577398555181 -1.2691314479026214 0.019390146708948366 -0.33983263962753851 1.0873547483913828 0.70175926662522592 -0.15577097294406933 -1.1697493851253977;-1.5525563504082784 0.26467794888320911 0.097288885065877406 -0.1131318114558095 0.50068339599629264 0.12051798058673446 1.3818885339807365 -0.040994331318357322 -0.55091045322374987 0.58302844763350126 -0.12575502801467581 0.35727687376543599 0.4653769684174105 1.0471492027612488 0.86991622785786149;1.0919831631304484 1.3482838074251597 0.42259570783279393 0.98285365350536946 -0.19622922982605573 -0.64445386164836616 0.53802337999302285 -0.073656855071049299 -0.083439817058532734 0.11108534308974356 -1.2866478207843011 -0.067771517168971868 -0.3725940433424948 -0.26493410401821504 -0.0085458695001521395;-0.45029018164997303 0.53431742519764325 0.11953264390068022 0.43463049656445119 -0.38336949960797778 0.044970119018689157 0.17619065068282463 0.74615213811877446 -1.2169678129298944 -0.3717917229737237 -0.51914305806914562 0.27131110163020161 0.31689883104675753 0.18181118993473044 0.55932362228919197;0.28802022183503234 -0.019845356063454979 -0.32458123356859347 0.10964117157290541 0.20580395557149461 -1.4721830613010778 -0.52855909364717801 -0.15421634331437578 0.42541936583460843 -0.59404376627266742 0.012633988026536428 0.28704612979493299 0.4720145067214187 -0.072812192751943283 -0.14756197615909566;-0.20596337907223281 1.2556287809248889 -0.10519175226370464 0.50443254109659097 0.17672640435438725 0.47133294373509005 0.02573348485614723 1.0395148811163519 0.53487841814776527 -0.10397215638261408 0.021224663324431556 0.19434757904137928 0.61548264365518479 0.72218783422473065 0.19996283428622255;-0.96296894313712944 1.1384014538090939 0.72501273001049171 -0.32318974555525681 -1.0307489609102611 0.28701151685284892 -0.44739399901011689 -0.12576563418841055 0.06001193634584958 -1.1642925199799237 0.47331375307766904 -0.44259094166428897 0.44293523329467777 -0.039470911893483979 -0.33748814135824384;-1.1626248611063257 -0.27226802334613021 -0.53998796246875613 0.23360317759415639 0.19636042840606313 -1.0070611868616985 1.2015043426750032 0.39828363741808021 -0.89677063538692103 -0.29152254317639625 0.31363320407342532 0.57299536374639426 -0.82019600974456397 -1.047714989999442 -0.52840295895393163;0.21554172721461173 0.14382271119196299 0.51508349814918386 1.4104681305734528 0.27965363346340677 0.074827724929566408 -0.1032901966078478 -0.4811390800559453 1.0129918924146937 -0.50076172165066268 -0.14803053497711391 0.60443491848058828 1.1110391233449808 0.17310503322617743 0.42211147078673827;-0.3105107137116111 -0.067714781232864063 -1.3131987179165032 -0.03501276740901807 1.0125240366443633 0.014983696592461394 0.26393740081071915 -0.27387355870558133 0.42396595320067659 0.88249622467835365 0.11094110541484362 -0.74915157666757293 0.73267778953279439 -0.14740831245430402 -1.2427177289063776;-1.0865476926215225 -0.061805413727184698 0.060431349199067626 -0.44417713451775331 1.0073707444351592 -1.0499330643075395 0.66245574551896547 0.050923993837776287 0.51200204395062265 0.89853359564486135 0.47299008971707934 -0.13165431421738569 0.83135709374151512 0.27106081134235294 -0.43255239586377736;0.16617293883856979 -0.37009018610897115 -0.47052106755938461 0.034428292432983038 -0.57096391051720319 1.3036294381359772 -0.15764958216921349 -0.17859728845863404 0.14484540461648154 -0.91442165639881823 0.14924557052526738 1.0268993557007819 1.0045328901760615 0.90823848170400701 0.35269140788256653;1.0855049096802509 -0.28227050960054156 0.40933959190451386 0.88729488278038959 0.62419016779758429 0.50580068414288182 -0.62364945140805372 -0.12515910555409993 -1.1987970395665668 -0.85951442453842797 -0.62231522860026367 -0.017082771428820018 -0.72224510921061791 -0.17746603431322475 0.80737072678723987;0.10198344922721957 -0.50952584449485983 0.23440513994523487 -1.2329776824851439 0.37570661755625817 -0.045565701145843143 0.93551373780632197 -0.65742543916483731 0.092436789610948561 0.24156553092443539 0.1845527554288442 0.42243856324898427 0.77442220403081263 0.19566561670420535 -0.97368721869204233;-0.078435093973874381 0.49439204682183197 -0.46114048471256841 -0.34063187846323806 0.21393479135045163 -0.59813193722630142 -0.69942375599225037 0.68903542258696948 -0.18966822156033525 -0.34234760589984314 -0.55728296305272862 0.071734527826109021 0.27241162037539157 0.29542287164635234 0.65021722340842381];
  
  % Layer 3
  b3 = 0.11126001890271091;
  LW3_2 = [1.1334362614495057 0.56212061377549583 -0.47768667153417249 -1.4578803193453171 0.59271913267321819 0.68357083896184467 0.49184060740612134 0.27219647355461024 0.95065072163365716 0.84576133598469483 -2.6284716987128367 -1.291225824147626 -1.0655607648955896 -1.147257905784457 -0.19137643890214881];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
