function [Y,Xf,Af] = PM10Tlaquepaque16(X,~,~)
%PM10TLAQUEPAQUE16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:41.
% 
% [Y] = PM10Tlaquepaque16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.0626837427951155;-2.2564642789972233;-1.5969481993764878;-2.0035424598322895;2.0965966468440307;2.7545118241999513;0.53102750966562029;-0.87864675572220452;-10.04375269854385;0.523050143193041;1.0092316210146166;3.4196881364471401;0.65018685175631441];
IW1_1 = [0.20804786724040258 2.236496008879711 0.52531731784079549 -1.2965928967734339 0.61033918320028291 -1.0187924020412789 0.33128582996174233 -0.18101950170953565 -0.64016532063166898 0.38670908359037265 0.021249496545374363;-0.57775155935541711 0.032322790859145141 0.38941574680744018 0.57745990259979518 1.1898367134088064 -2.7263255406409264 -0.21696419580769374 -0.65612358819385874 -0.87590034107115855 1.0010266145543201 0.50828294081886771;0.86968403653204451 0.15375665402646999 1.113816727716249 -0.82062960049890055 1.0881056778758997 -0.39219361835011823 -0.24414475525368298 -0.78155901531946381 -1.1527943210170832 0.17769891737146853 0.23366089087818465;0.69749792990410175 1.8513591773260152 -0.31862008797092339 -1.3722464782697741 0.35713730645113351 0.89197305925490444 -0.2273836678809385 0.058733677568778071 1.4364126052920496 0.47526964311181896 -1.4389979687319652;-0.63409340189498153 2.5353268640742379 -0.089321868099114132 0.39145231665776742 1.1252998970930228 -0.28485812258999338 -0.041282346806655296 -0.10477916224100572 -0.19811865989997784 0.046901680927464239 -0.058760588614118835;1.7608207906416093 -2.1541032347065672 -0.1174257862887082 -0.62025441070078169 2.3632395734328564 -1.3457916894615751 -0.30096614229106583 0.36341287892588475 0.021274685082027841 0.5326984965247874 -1.2484968647415993;-0.5221826948663586 -0.29379629887246933 -0.053601076779158582 0.61333359652546737 1.1881439176905904 0.36910029974389508 -0.15755565267084301 -0.046743097924939539 -1.3226729510101569 0.16737498936967019 0.25978229149708504;0.42619029903165884 -1.8859502841501659 0.38002348078190989 0.42368114586692485 -0.87069310015148527 0.53365447126746024 0.083700937582032453 0.70004144372026744 1.7518255309659296 -1.9670747144148804 -0.48881698259622558;-1.9714664129607204 -0.14358863015243875 1.5051023729561803 -1.2886185268934394 -6.0477499764706586 -1.735988192113566 0.043254407300641479 -0.03622225487795061 -4.7975970844356368 -0.64291599855993919 0.30359540771488408;-2.123645262241268 -0.54564460288315253 0.70838032998287592 0.82310568854082322 -0.059112298853611175 1.0578040713535877 -0.42006530684641979 0.081538958950258325 -1.4523236416162613 0.45707758778048496 0.15079265666548086;-0.27805476729194972 -0.59326970086448827 -0.10424039820314279 0.52530273034067954 0.061565108685641898 -0.056436415560853354 -0.070433052777821442 0.10137269110740253 -0.1888998287920918 -0.10915574146027228 0.23525711499963864;1.1676840509053439 -1.4683284393082439 -0.56469334150236594 -0.22782828105647251 -0.33960359655875316 1.1854565758174871 -0.45768213220444132 1.1700574896242246 -0.57669466659620983 0.092281028313182148 3.5982333211814495;0.50579037104626245 -1.3210252335590045 0.014492265470804917 1.2847757132254014 -1.4219309778487974 -0.025283498924787151 -0.10830525928783007 0.077652264387660236 -0.42774729950472756 -0.4230563306725984 0.1475298939463725];

% Layer 2
b2 = [-3.6095659527133224;6.4228773980160305;0.22913231182443891;-2.9710226949415137;-1.7207026954781313;3.5981662314531113;1.5728804051388385;-2.5136587280292506;1.7802073518617372;1.7774236961089882;-3.9819713413134767;1.9995826440547673;-0.084200439993440984];
LW2_1 = [2.4831586659111697 -0.74225702830485374 -2.634233756368451 3.1919964111812922 -1.7626568488638967 -0.24421521070430774 -0.89443535379902239 -1.3342029569328777 -0.042375268785223727 -0.063795039854273289 -2.8184497344442101 0.3994678131676046 9.4482684250732945;-3.4089852537995236 2.9422284442502815 3.7200395595904978 1.0570849888253155 -0.20667315969500594 -0.020447879077041958 -1.8331611844921185 -1.3792130497917796 0.48948779592830144 0.33673238312673454 4.0579795402687697 -0.99173634853826897 -4.6968299516587608;2.4014308722788034 -6.469799055848906 4.6734278973115995 2.3668993138513947 -2.2930330587421022 -1.5729073982974764 0.42786719723687999 -1.2317614038826907 -1.2148231277565094 -1.3989130687073008 7.6344866785834631 0.10446391874685163 -2.7806478680644702;1.9083337062406178 -1.5244584845933671 -0.35900461643561421 -6.8627287715501062 0.42592948858365171 0.60622187292049023 0.1227463702260069 -0.63122676567384384 1.8907176272308268 -1.0959066921425185 2.2977772690117564 3.4381793211376741 -7.3003009630261699;-2.6287304053499647 -0.78024368364059826 -3.4002497931612301 -2.4976470114666638 0.64280614408569514 0.43355974084826132 -2.3351198468005108 -3.6779886315384558 0.334531605738149 2.6079777755045699 -7.1714230587684877 5.660999654251861 0.032752857083481572;-3.7403075498029028 -0.49921339938618325 0.21131136600213227 -1.5517288656356996 1.8390459622047828 0.19578168204369906 1.6087698472059342 0.64106410270032832 0.76229111699913743 -0.30804276855896029 -9.1964271804399544 0.28078496039526596 -2.8997770131645262;-1.2598360952935097 1.716066077669014 -0.08121634470889677 0.73053669173109836 0.39803613147998329 -0.10215136618370778 1.0411889224618647 0.0038828351175933043 -0.91790029771742554 0.54784409163014625 -1.1238207477732196 -0.37544054927855658 0.12940057270481028;0.94113526578882345 0.64225100418160141 -0.7275962907862521 0.88162648651988695 0.14873573588613537 -0.10793917230020315 -0.55643410331474774 -0.41831633162010723 -0.50247631638001755 -0.060017165841748904 4.2294638261613589 0.018869431769827655 0.31184469028043676;-0.82746824082671977 -3.8576522731855936 -2.0805281070970256 -1.0427947714858539 -3.097889029506621 1.2860673345098741 -0.012649225672694997 0.83521991150418828 0.17647306242580588 0.20652793304555833 6.2638176718887042 -1.9758004526970785 -8.1231108503837657;0.91459581419054015 -2.8216906844686198 1.7501330234760113 2.3267190988371773 -0.11993467239151911 -0.71266267554735419 0.035193439676102778 3.4407859951660349 0.46629643675825966 1.9102675085068617 -7.3410049893352172 -1.2211915497860957 5.9187869359940253;3.0064573029299764 -0.27023733397695399 2.7834235860221024 -3.0860356598125711 0.956275592266431 0.38703378341070499 4.906054784897516 -6.3639919236204427 -3.3401657928202009 -0.2034311639375786 2.7106691837543777 -0.64786257761207766 6.6784926871734562;-2.6596844472451231 -1.1510001204659071 -1.6873019096960953 2.6630981626939039 0.26839562769725234 -5.9712568222571285 -1.2725099219648932 1.3764481195029759 2.0530357148862386 1.8862185158017613 4.4105878027595899 -0.012231858773009627 -1.2152365155638991;-0.18078660156611415 0.99896648323090342 -0.32436420978350544 0.31196511561206486 0.61351611414714025 0.10397769858119894 -0.81771674719375997 -0.099608249676613331 -0.056557334025608433 0.24756954345582774 2.2422001757764791 -0.13766108737252933 -0.83623491938983852];

% Layer 3
b3 = -1.2486616004259932;
LW3_2 = [0.092239841343637038 -0.12458040891693999 0.13895994083263163 0.052020387324975027 0.040844633362923717 -0.26865736265191847 0.24977325215924839 -0.74293033593246782 -0.067961780652844639 -0.060900817839170354 -0.055557347018922433 -0.1145568716001371 0.8124514678998056];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
