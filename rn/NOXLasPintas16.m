function [Y,Xf,Af] = NOXLasPintas16(X,~,~)
%NOXLASPINTAS16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:48.
% 
% [Y] = NOXLasPintas16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.96825396825397;18.6915887850467;0.0175284837861525;0.0546448087431694;0.00640204865556978;0.138888888888889];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.3581985835604771;0.77507488164235983;-0.26105608871743041;-1.5168179516680791;1.2611416132399551;-3.2180728483537657;-0.26212690053834331;0.26138408663085838;1.2732310219952045;0.32558794076301412;-0.16346114727967082;1.9718608612292885;-0.80573695108936194;3.0697142325546722;2.4531926421931227];
IW1_1 = [2.882418806416398 -1.1668341170638725 0.10475488605932794 -0.67584071366298959 -1.085724660611767 0.22063742497344024 0.19201899860172489 0.32331884612439071;-1.7673679609351087 -0.16254625286287497 -0.37317358007577306 -1.1943275785593666 -1.7788515857982645 -0.86805298726355518 -0.018943331653605115 0.32411614688451718;0.1165998836569173 -0.57428224370653913 0.82247339089919858 -2.8919893528732903 -0.097137964592451553 1.6126198085686128 1.3117572186278523 -0.59952804673188054;0.67771770509913998 -2.9511787236881246 -0.21933699343308677 -0.03700758324724622 0.32624681910532233 -0.14475133921698558 -0.31412523883111021 0.2758523700002633;0.66082673390178781 -6.4377174038353902 -1.2984809331720391 0.063153100576902932 -0.34501355737651657 -0.42390348906521186 0.10248576228315159 0.091108886804787112;0.90893267547269041 0.10485915624068233 -0.2761628553516719 0.58640207873083017 -3.6338454149120309 0.67305289601517426 0.5038062711958009 0.18491351198145758;-0.77496931160197013 -2.6705403895324422 -0.55661696688673945 0.072915492142042196 0.36256212625826756 1.5670172933057331 -0.33014945653490541 0.089341899039356035;0.71930454663330146 -1.5413776383042448 1.3663256145688041 -1.3954005954604536 0.44359115145385181 1.313389946494169 -0.51105610409668956 -0.23231092361163702;2.3561588362982429 2.1518525740832475 -0.46803113159296811 -1.0998917255789655 0.73943345326797938 1.4034847305227718 -0.51670743422930054 -0.5450802011449899;-0.71876166298404542 -1.6689572527116863 -0.22236084179574217 0.487127304877849 -1.8948387602561925 -0.92727415864260632 0.82847825668319997 -0.27544741521814076;-2.4399945700050822 -2.3075561783057221 0.014023652245532082 -1.1959301837984837 -0.098952230060879914 -0.97940608701047949 0.31184334936845709 -0.44668173611680945;-0.349379031906278 0.034399168330056087 0.81605561359211809 -0.85912562642720458 1.7958589730675178 0.14548177267885065 -0.008988154508106385 -0.1546209074644404;-2.7743203868892392 -0.4659781914810619 1.0776663546848442 0.76296115370541284 -0.53735114008594975 0.36243039198140148 0.78963958653900668 -0.22875353749206878;0.21255484565311036 0.044688559674355907 0.26109868860790708 -0.14740430186468798 1.2533815373893049 1.1004150386551677 1.5685696531497264 -0.44218190072909314;1.6467092304861897 0.083526623029297253 0.54442077865646143 -0.63923333979240171 0.18557243368851783 0.9767057657926721 -0.33544522605713362 -0.11796594032909753];

% Layer 2
b2 = [-1.8479019422180019;0.11246048184723925;-1.1298492414330692;1.0710599551530551;-2.0753757517810691;-0.12174648115367731;-0.1740917003021161;-0.65452685017992907;-1.1538643418566925;0.7443279519100392;1.3408114631462114;1.4307366310633673;-2.2900549559028018;0.58177540018679896;1.1738031946852598];
LW2_1 = [0.74862000766266446 -0.28313307846740754 -0.062292587816941365 0.17109606227592039 -0.74171187796046556 1.2517226728461295 1.4083944205179333 -0.35646241986091726 -0.3919015418127022 -0.37299235589640745 -0.01478286656720729 0.40277864522638951 -0.39083197751286153 2.5063470994858656 0.10322322207762513;-0.94527331756642485 0.15565798895837213 -0.51930286788053537 0.096038330083815807 -0.25195364871253623 -1.8546596331535605 0.89608604315461504 -0.71385882481155361 -1.0341766667980929 -1.2214114631457607 0.18753202283114179 1.8832465730281103 -0.3559542754453795 -1.0464086788164511 0.42250932948005337;-0.081286588625884504 0.32293674039339998 0.033823137642301278 1.3154723393746515 0.7610792935608014 -0.030288812627730755 1.3799863974751998 0.85277697403655628 -0.72601049640444637 0.24742038682312284 0.31003642681594284 -1.4492553582647978 0.1920210574530683 -0.13596726801271611 -0.50049229406202944;-0.50436362789015021 -0.24934074279767168 -0.43887797791269906 -0.13417194554438122 -0.10553624593335034 -0.35456891674092933 0.55805594123235247 0.15283454354655285 0.034877273203009276 0.095121988493320001 -0.49973844597383138 0.31014002157602349 -0.77985395020808257 0.67550746603966783 0.71404583655953624;1.6303111320239492 -0.075681255657614119 0.30363831015171927 -0.076993086006085273 -1.8620919774698985 0.45417361113616811 2.2400001597380181 -1.4098772966952948 1.7648209111337627 0.73895841136183593 2.0352158212645959 -2.6766703878414395 -1.0292519862345579 1.1504152068223275 -1.5714558760159869;-0.42018584348508248 0.49415699102173571 -0.11350478251872805 0.40319649121231299 -0.23307024393762452 0.15839028126646679 0.66535615415334948 0.27223251242902186 0.10777573033112867 -1.4586014760409962 -0.68744989141917701 1.7004481437314387 0.42027819887839835 -1.037519973372705 -0.62538577643680271;0.10912291197579513 -0.46816976803653299 -0.81671356110123461 0.67658750378660615 -1.08820392004776 0.12983015369894793 -0.53497422777584491 0.447002158916809 -0.52553581037171138 -0.15943594515598267 -0.60332072000404513 0.15471202645136181 0.86561396124645584 -0.081517398680573783 -1.1386707077488896;-0.21584010871376741 -0.44618149053647643 -0.14146475185014548 0.37650858017107519 -0.27623558559541739 -0.74547936002569082 0.72737757486427479 0.25070300704065929 0.84266515768341244 -0.96679279991102585 -0.1729464568097982 -0.090161667967098638 -0.21666874496652283 -0.041878914121523593 0.023939550298191822;-1.0183179304804864 0.17162662507359663 -0.044564786841593609 1.5240840840255758 -0.82185647682586838 0.4935665379320478 -1.7107452143843642 0.36520100122181232 0.99409658050235972 0.084694345208772254 -0.61531127371076799 0.13219481705266523 0.21812448643910581 -0.46066925050258017 -0.65380192484187705;0.52970647325712827 -0.29476502856618919 0.016231057276918863 0.3161303819139693 -1.0566440854755408 -1.1965284884471907 0.25428764491037181 -0.21001520107019364 -0.10211868947101214 -0.057134450109721013 0.30589743104633699 -0.47678025058271051 -0.46460294382135392 0.81216139224002526 0.30186842677959513;0.47234201256841507 -0.3979384805974801 0.055282729789195358 -1.3364797957082979 1.1598159091759934 0.49466441176402154 -1.7676436656889498 -0.33709583228597451 0.098182346181048014 -0.25217912946252113 -0.18572699678180321 0.29132813243677869 -0.91883728153959165 1.0707412789622746 -0.68725792796588825;0.10231141502394243 0.017233058503334592 0.38812405188511429 1.4798310464836213 1.2991464437401985 -0.76631639205121382 -1.9041297622566102 -0.8953758221196515 0.11142382635005914 -0.017104344766505908 -0.18925075475997913 -0.4560070561974256 -0.68073508311150543 0.90518005738087415 0.58490084923110075;-0.46286736102421272 0.071593338246651761 -0.028905453377482182 -1.7087084650548474 -0.74309198214274741 0.4507399814372744 -1.70960670276802 0.42688374805569668 -0.75778876821589203 0.039137414215529194 -0.61224225261427279 0.10035359842640093 0.094590415234188027 -0.36778636089599592 -0.55313974574832181;0.27741487590832925 -0.19838906108484092 -0.060493387742068569 -0.98571264944190606 -0.73206916474485972 -2.646854902916159 1.3217086028276439 -0.3281972042973576 -1.0272580942049674 -0.47820951535329298 0.28665883651571666 0.1759783591844882 -0.60717239548285029 -0.69091023235381033 -0.013813867165843527;1.4134992290975774 0.46181277722190239 0.41096489811426512 -1.0981767298785368 0.38356067012568917 -0.16848757986988597 -0.30191958023818188 0.16570188330713545 -0.71547108859713227 -0.021218664096739854 0.49123856774658003 0.70146698743360403 0.0050170746246599451 0.31332815841034234 -0.14455428007396187];

% Layer 3
b3 = 0.27491492505544485;
LW3_2 = [-0.68578799024626036 2.3224903934178172 1.5592612349221771 -0.15560382618129917 1.0492976476369642 0.26402256802643664 -0.41362420182956444 -0.4418053653468233 -1.9535152754767589 0.61654725159811152 1.8197083555458093 -1.2109125095347983 1.7855741006815511 -2.5110021217534082 -0.37073124154406351];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
