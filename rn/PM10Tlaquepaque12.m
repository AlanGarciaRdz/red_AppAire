function [Y,Xf,Af] = PM10Tlaquepaque12(X,~,~)
%PM10TLAQUEPAQUE12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:39.
% 
% [Y] = PM10Tlaquepaque12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.5803332280928686;13.585174442071956;1.3057644077004495;1.4490020134889654;0.78752812589188026;5.0042295037659006;3.7221886171597056;2.7166964049459894;2.1886686029591922;-1.2718331824516107;0.8974768515077336;1.4860171880462685;1.4489751134086191;7.7123101012503881];
IW1_1 = [-1.7230928739025426 3.747955866460507 -1.7505451881767633 -0.12704679849251638 2.8362767560345929 0.61264319967917125 0.056607339790805934 1.2108145604556815 -0.46345326290163319 -1.6465792544576732 -0.50258255113140393;2.5022147323555428 -0.09824211514369105 -1.0782830882687588 0.10869462001293123 4.5397742892656057 0.97437079653272995 -0.14417266326921785 0.39337515853026828 7.7504103094758179 -0.0086408082083525989 0.11041146513055483;-0.080219592244094057 -0.72986351452677822 0.50756917648060462 -0.21166406780969674 0.19070137608157176 0.2707599738148489 0.1773965398425465 0.22267052452115327 -0.43053936233270712 0.66707814358536899 -0.16238176744387162;0.087751928518684935 0.82920067461370306 0.73247838664589116 -0.082212524799678346 1.329315935389636 0.48695093486812097 0.30867235806910837 0.28653319654300941 -0.11085363554188686 -0.11069892048341294 -0.032560501699737579;-0.37241873325529684 -0.97813627931114511 -0.82278593867792904 0.059193031686929999 -0.33554938336809703 -0.05114711234124885 -0.44961358958686104 -0.11009930659817221 -0.34930287922277181 0.20884512609025532 2.7105729287878533;-1.2035482508179938 2.9946395089853399 -0.51895791074546649 -0.15503974456793493 3.477197976570491 -1.1831442488151236 0.014466598501072913 -0.32694338312468835 0.52263891777755489 0.70924770616813781 -1.0291676098175055;0.49866001167645363 -0.78887680605878663 -0.70582739978909159 0.32104982796190423 2.1518210457401614 1.0040615436738867 -1.5314916070390816 -0.69019428409006367 0.78663532087585641 -0.86646097101165143 1.3304933546054309;-2.3531702750300822 0.27413747583791181 -0.73748172726735872 0.11687234708076434 2.0164044242610473 -1.237206537256357 0.20476606419599158 -0.26944387866184033 -0.55500850853416572 1.3600148749936531 0.055047840370835932;0.19476061504830319 1.0363004153178319 1.253449154846096 -0.30413528362447823 2.0259800818212046 0.1955969568651923 0.57308786593139394 0.3812665473573153 0.13571090797472743 -0.2121251989828975 -0.92868537490598568;-0.32160157285154384 -0.23416705641932933 1.5776786735237391 -1.5436410299783105 -0.73925559399689567 -0.3269177790391829 -0.13023309787863385 1.3136579441739751 -0.74242721711065118 1.566500618714582 -2.1430512570391755;-0.043564990674754722 -2.2282457030283251 -0.068307380205328977 0.26323192983090343 -1.023867352573602 0.15490045525825588 -0.037393044799815818 0.099378131705694844 -0.28779229224741049 0.28840778007766849 0.012560510031057015;-4.3878799948316844 -0.58187828983341328 0.95772029216378762 -0.36215796572211945 0.010669387334340162 0.43925933593769828 0.67206517754271144 0.55377234456784796 -0.46895096654801977 0.45421661951462594 0.82864368015487455;2.0897437234708804 0.13360133780446698 -0.19523499799314767 0.39351986611843665 -0.26823720779217652 1.1163777486613542 -0.091362231396072316 0.068734037553645252 -0.0026485447271157973 -0.40384637801254208 0.1686081583197229;-1.3573282549028998 -4.8208548714205834 -2.6311671141069786 -5.0666505330012903 -0.41599753285239377 -6.7623527037556919 1.35216605651615 1.9604607109082139 -1.106658478865937 -0.2680083920912838 2.5901105927369192];

% Layer 2
b2 = [2.3532147759234707;0.23819265659983296;6.4135298133427918;-3.5057537045663056;4.7498297662057478;0.205530203041566;1.696120949919796;2.6041313077955515;0.11952468957989816;-1.2902857504103906;1.4769487097335925;-4.1348004252062109;-5.3646170097207078;-0.099910318078097499];
LW2_1 = [1.1360041471522728 -2.3574759142995547 -2.581302784469437 -4.4966334769228036 -0.023997766954461514 1.444536937650583 -2.010127761199445 3.8057481499231525 0.75969860550501944 -0.041288409965309802 0.59655251695742861 1.3978051944571026 -5.5809035747178273 -1.4299087538393898;-1.6829493083323377 0.97325321035296142 3.6588991510410716 0.71987019620411097 -0.53986654750051499 -2.2274765454954748 -1.3185833393226691 0.65608221138520262 -2.4917071414266294 -0.22560053645287836 1.8305285828354678 0.58593277605425997 -0.12903822641086202 -2.1238933553820205;-1.8909108063991922 1.2602454546776685 -4.4252564750171173 7.1404372514679908 -1.2480346202033545 -1.7455144385669197 -0.71492632485953556 1.4612329440371994 -5.8176124295838854 0.43419732315021803 3.7097770774540262 -1.1562084404676602 -6.3354744530129148 0.93894134406584917;2.4055009401338694 0.46080294741495903 -1.2544729031314834 2.620842639888473 1.7714312513445827 1.6197157428534488 0.077025450247946881 4.041720839274749 1.850723479566915 0.17904203266201463 3.9305070891856886 -0.6929602204903913 0.978816233192777 -4.160728722945394;3.7304804262373801 2.3376640698411326 -2.5946162777377468 0.73138957022798523 -2.0752044257260698 -5.0761547774618014 0.62916998207620067 4.4660576813051653 0.8484574979767473 0.14192091597163142 -2.8800389580035732 -2.2790544377175919 -6.6336940742840023 3.7707077596096203;-0.9283001132245472 -2.2298928200255945 2.0392900714298738 -1.1519866257802898 -0.4362391940094491 1.8167476814917822 -0.30999058076565567 -3.2471103777126875 1.3837433593759034 -2.7079397771922276 1.5079034207371249 1.8180343429498929 5.6204067921055572 -3.1562057478528733;1.2729128602847681 -3.7078480115751389 1.3150105668040157 -2.4101316599400988 -3.1881770184136462 1.0559857483951141 -3.4565144816570106 -1.0708882619697742 1.3440196563916791 -2.2561797164612907 2.0069589222032329 2.4144226319573017 1.3540448706629458 -0.58146627999438638;3.9559899099871809 -1.9544568081543063 -2.0965018608578161 3.7836430377764367 2.1653395722538988 -6.4697675088287623 0.18762476238313885 0.9791966529201811 0.94844811120675998 -1.5502202927832474 4.6948050642102039 0.78064452613583901 -2.2097512250840876 0.56210052026917456;0.42388316802532544 -5.4921686435107002 1.9875889211701634 1.5632136549520084 -1.1389097611681973 1.8125234420351581 -0.62691343816798961 3.2687537533945026 -1.4842330419556204 0.048124565686153496 1.3855735653679768 -4.880151020355048 2.3289014676349313 -1.4966714782727109;-1.1890111402473433 -0.93123768722814704 -1.1147576774384398 0.11115088507181317 -0.53049276478101726 0.92908846170911497 0.36537867530319218 -0.67753311758859802 -0.55854180613384941 0.87554613850932417 0.042115619734890322 -0.75099812560720869 1.2486475801266363 0.54101777875342338;1.3350996359725618 -1.7633489991566775 -1.2225274835928153 2.9580516771909791 0.4646890905976076 -0.48169553580163321 -0.92127677838667177 0.29465014088990193 -4.4668651013673761 2.3425803437641819 -1.8366744551749457 -0.97579021711563707 1.565185668645577 0.82334043942437818;0.47524671640974442 1.3797834382526621 2.1816254774808694 -3.5547505032221522 0.7534653546147736 0.86327497888483529 -0.26397094561000006 -1.0599468592731218 2.0444424921114224 -0.20585469664518397 -2.1132922010895125 0.9686620090312722 1.3490015154181647 0.56843269501357907;-0.39386419824877833 1.7489629434590546 -1.9737574684517365 2.5446135531265073 -2.5629179568212237 -1.2306336314038206 1.5628258017968455 -1.0895285426958976 -1.9637361068679171 0.67366740957404547 -0.33634333521008752 -2.2992597942794837 -0.73762438409891562 0.78449031364468891;2.1441363330802128 0.24147377230150474 -0.25208428208347305 -3.6147456293428508 -0.99606649959447213 -4.0752494611439598 -3.4794805911850939 -2.1736759210954624 -2.5942075708678245 -4.7025239215244383 -0.17447009252161083 -0.69241776477440997 2.1581692585743548 0.021699406154738081];

% Layer 3
b3 = -0.594743823650426;
LW3_2 = [-0.065807477813278017 -0.067965160985675718 0.05588231915587482 -0.056850349467213637 -0.12358713165005154 -0.082233107543923725 -0.040696945071862764 -0.055071515982906466 0.047878301101372492 -0.22607308109227606 -0.079105933370807263 0.29742593000774425 0.14381174328475524 -0.030693410832750182];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
