function [Y,Xf,Af] = PM10SantaFe24(X,~,~)
%PM10SANTAFE24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:36.
% 
% [Y] = PM10SantaFe24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;0.00341273633199099;0.00632111251580278];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.6162096747963548;-3.216171797711616;-1.657207625865821;0.082548860653721065;0.4182355413336275;0.10278581555453413;-0.71053030719686516;0.35388182532347451;0.039875475169543248;-0.19690640384623964;-2.9038516460590111;1.9302511803924831;0.51365023620599415;1.5331957235529141;1.7015858848819183];
IW1_1 = [-0.84611637929031425 -0.42934697847437853 -0.9278138731593023 -1.6607565736159469 0.57622299936338428 0.93989509231488655;3.1017413684455115 0.3408791512026676 -2.3131404366986219 1.0108504089983443 0.78214476965829283 0.16441715943727539;1.2083100527035353 -0.091044338164353214 1.3827622120036767 -0.41891453750837043 -1.3351201958083789 -1.6419584510306986;-1.4992580427551936 1.0720006229046102 -1.4151104750567798 -0.76602772328109447 2.6340899631338566 -0.11805205393141016;-2.0969794035086595 -1.5290865008081904 -2.5641153896462723 2.3097651554555472 0.86984989150898462 1.9217444118684419;0.89520534533954876 0.13287228394692371 0.55510820100056879 -0.49682269878262375 0.94367063484596636 1.3397624383248643;0.96968225265457808 0.65266455296905723 2.4022200231622319 -0.25082515324557131 0.52034000591981788 0.15593247440784216;1.2993979262326014 -1.4439613754827911 -1.1717246177092577 -0.73994746671775313 1.0512412506069109 0.060295055018051963;-0.67719712422937839 -2.0317143100551256 0.17486396900746376 0.82687789246530297 1.3647993366689832 1.0597279833229378;-0.45950658639661152 1.8018378530343981 -1.2481778395597014 -1.4087253440842777 -3.4729586757590605 -1.5441776844735262;-1.2971728380504408 1.241293635583987 2.0955903130827584 -0.20884433428659119 -0.16072420168003326 -1.5603949061301663;7.7306635676802422 0.19495508379274426 1.6217342794886693 -1.4394673550990813 -1.9595885260981871 -1.0735681306156097;0.38395524780913015 2.6982456835190791 0.52656509376191485 -0.12292489843158663 0.34528016791905974 -0.059748466527730734;1.2648496549593125 -0.33340058074648898 -1.9148858012822967 0.79860888900439042 1.7286653518926935 -1.0135093559169437;2.3592936866886536 -1.096766004308148 -0.45308337311385027 0.14725945487524389 -2.5047405101478666 -0.35561450565370939];

% Layer 2
b2 = [-1.6514462816355402;-1.3317682711814174;0.9857697331154468;-0.57964503899110276;1.3629236841655183;0.51870152939180247;-0.51108737277841643;-1.2382413002717656;0.51857760223966021;-0.53609756621496052;0.98228367047219534;-0.11754166302908581;-2.0956365755722612;2.240737857980232;2.3533925183456676];
LW2_1 = [0.59880321006889836 3.3253532603561364 1.4089706177158827 -1.0250864983416581 -2.0528965714734237 0.60547187087775534 1.319426485992959 1.0858444271949961 0.65306186308293723 -1.4481159380301283 0.39012438888862966 0.0944448968949433 -0.016734335368465653 -0.77002153909656934 1.0042999675859234;-0.12211238290008006 2.2580808335772384 2.6896445493356453 4.113078384358996 0.27553515095020226 -1.4491694125798362 0.5311907897104966 -0.13134816448467779 -0.036770776712097247 0.62885161089667529 0.49409442184418556 1.9850203099682566 -1.9770618306437082 -0.48986578354592242 -1.1805867921784505;-0.76221192795710091 -0.34704990442073952 -0.72162699774365469 0.61479065425800428 -0.64326971880784756 -0.90125020794102018 -1.3334859556192611 -1.0986713700843578 -0.13194277563127826 0.23786436867449273 0.22054361403735537 0.84419426265675135 0.68607826100410652 -0.45197603429508643 -0.67539116507085828;0.88162402549243013 0.83997775333846958 0.35539035269229236 -0.2664337786198635 -0.54327093561270701 -1.1998494408807545 -0.8928559448548935 0.027131679356111046 0.38294518338960937 -0.30012458694031496 0.013985688875882519 -0.47291830251653783 -0.018217783582844954 -0.061159397660822977 -0.73141640665933227;0.16280716150680968 -0.31747667931386181 -0.16854961028446147 -0.1295672653276406 0.42364710596615329 0.52340769762807515 1.8744879604445088 -0.49803226035193576 0.31468684381556777 0.001214851213062286 -1.117037212944912 0.28022913941860694 0.28020341968608126 -0.25364667339983954 -0.0069491857815672468;0.62708013359548298 1.0611392637041737 0.25157153663004006 -0.47120346617130143 -0.36124698555945267 -0.30754908514803464 1.6871223519941387 0.78314215347398242 1.4796422989215197 -1.1116208163062935 0.39847944486267528 1.8310831455102148 -1.2939305119852029 0.66636674332514989 0.47590944830423293;0.64378833464928875 -0.39722411276663439 0.047386651452960296 -0.1519683410994338 0.93578171913597108 1.1345827027901623 -0.70124384903524595 0.62096045079111462 -0.37284160341068801 0.23552865231681702 1.1022740894052239 0.49444134473428941 0.94841755858317756 0.23685499817729935 0.90132501386524644;0.74555382902117129 0.27280520553023535 0.0050536526348409494 0.35783092491095808 0.21692754894130914 0.58927723728232662 2.3251691669549337 -0.52234053239076994 -0.51913577043112125 2.0901601558459344 1.3063566937522031 2.8119286602470717 -0.08178770897667402 0.34999807994550602 -2.0151536933351939;-0.97708931303377444 0.60821675692559363 -1.1125464037362991 0.14111300270617508 -0.8512216570794281 -0.60047290216669857 1.7440570967693467 0.89066579027811132 -0.26184132350818629 0.46010905111481337 0.54765655866156071 -0.85673872081060676 0.11299478948240475 0.11701624632860616 0.27913806104855721;-0.54038776001422972 2.6810239689736277 1.3970881430825726 -1.1408220117644665 1.3426216447398187 0.77671842478951936 -2.0866804646086154 -0.98973425106356872 0.70287787404818192 3.291814325005284 1.4451739601920077 1.3753061085693363 -0.99773412443937148 1.3091464995583624 -0.28019857769554035;0.70567535445283713 -0.50902020301648976 -0.68876943728530016 1.3751256563768428 -0.63769406209414403 -0.82703274595045018 -0.26509834732139825 1.5767700952121282 1.0628685305388086 -2.3418589840678274 0.11692553373289304 0.22602296782622672 0.61100856911077306 -0.71842481126682289 0.37494752838118367;0.65951843603010918 -0.26177227773086498 3.8881416922120122 1.3012877969369927 -1.2990427896130978 1.910614650940029 -0.28078507834402511 -0.98210327786800111 0.55407265872349853 0.033249285281225865 -0.84594623844662631 0.77614018524392392 -0.99297366579958446 3.5346113732530244 1.4430107452772925;0.28139880767959008 0.28485000148716144 -1.2673671596503442 -1.2289037646260081 0.3667978736880616 -0.2480961421010206 0.14947617604852806 0.4430175167571071 -1.2263457283456864 2.574210764057264 -0.0012611805899110564 0.85757048005550796 2.0445919277687432 -0.15590636568092503 -1.2851140038680224;0.62355793361156286 0.42870104586248264 0.042438540275397965 0.70992319133712778 0.30493034060505059 0.55585234823236152 2.11773544574964 -0.57117774278023747 0.1283196201393513 -0.56462258308568025 0.29262271581108179 0.62681661230622787 -1.4479684352665527 0.67496266505635238 0.70427823860979055;1.2316605047512443 0.79480534012577997 1.0560641013206549 1.3958725157200096 -0.23004535099008763 0.72440393964531458 -0.96846557401298261 -0.717613937446968 -1.1920981113727576 -0.44875881990448285 -0.42218748644117882 -2.1896385048116835 -0.39856646878559099 -0.20865326190348593 0.34799907507713224];

% Layer 3
b3 = 0.21495613857452719;
LW3_2 = [-0.27391898798209852 2.1619612541279869 0.30490042826597835 0.58758229105739834 0.64092172342548748 0.13718757315678182 0.77954519907980158 -0.53701373199833535 0.44286016898151259 -0.12325718462541886 -0.14383600355977427 0.061700714621451942 -0.13612548733722818 0.29226981144437592 0.14297622707063951];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
