function [Y,Xf,Af] = NOXLasPintas8(X,~,~)
%NOXLASPINTAS8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:47.
% 
% [Y] = NOXLasPintas8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.96825396825397;18.6915887850467;0.0175284837861525;0.0546448087431694;0.00640204865556978;0.138888888888889];
x1_step1_ymin = -1;

% Layer 1
b1 = [6.3233489051639449;-1.7448250885144219;0.24416031659707541;3.2454240872728981;0.6180267366592328;-0.83867725369796586;-0.5709704762231137;0.39858433529876908;0.3198588812861668;0.85116944781481729;-0.55883998084218467;2.3966739522909526];
IW1_1 = [0.3718615699262251 11.223012083439494 -0.21170958980115082 -6.2681727060362649 -0.4745247070117356 -2.9711546678050493 0.25282328646767194 0.79657839700684629;-0.62913759729798857 2.2739511516161266 0.28511071023329709 0.21041780429105761 1.0088710154778238 0.50001047351504357 -0.4141150751264891 0.22964913108795501;-0.027960094291078902 1.0518746452044336 0.32752562213321434 0.47732401547920461 0.88787146680099871 1.1087338415005636 -0.2076621399892789 -0.18519014617252524;-2.0656598036552367 -1.0791941791927424 1.2499876638770322 0.58315884493303316 1.5529666248922367 2.222596409442843 -0.11094984879103864 0.33284549523859641;-0.11938433380240632 -0.091040630502862943 -0.14974019821552229 -0.57685224622047726 1.0550365805811237 0.35454830499577489 -0.66082718877295432 0.43558135447442431;0.81344873589206679 -0.91473470457296857 -0.031524736192656 -0.11507976466659364 1.6697488242218768 -2.3676417624276116 0.22175361211730743 -0.83087199791747302;1.1264089971667222 -1.4936406526490171 0.3259196391318 0.47369748599672018 -0.060200235632023737 -1.1664939548586346 -0.91519644801638977 0.11321945335929438;-0.080270652377681176 0.71128481842109825 -0.25901566974452722 -0.14357646610360567 -0.087550895132755588 -0.33806903212221578 -0.0030193870332516216 0.10824202000749041;-0.44919203896723137 1.2619842339965199 -0.34234678991925194 0.19072408134371766 1.3249955352506846 1.645609017191656 -0.61821270548784324 -0.65180782348417043;-3.2273324720925589 1.7540742058111214 1.7275511884943626 -0.71801054706317002 -0.26619627615677277 2.714911222656859 -1.2454742787174138 -0.18594452473534587;-2.0552399544569839 -0.38561073182612576 0.17955268905775076 0.3254210321375699 -0.53053921483716981 -1.7936147719338413 -0.2822100902124432 -0.013580688242505325;1.8105603890308455 0.21119051526637647 0.15922262292776518 0.34780853820306018 2.1098117778880146 1.5945935551497155 0.9892288925471997 0.099288639744199075];

% Layer 2
b2 = [21.571523600690657;-0.49553197045654596;-2.1207811881849494;0.43156875521196669;-4.2087803875308065;3.0549429011786411;-1.6731820347171338;0.95183940496420449;-3.5915121930060216;8.6763374653728356;3.0985877285605126;0.15383830788255493];
LW2_1 = [0.83608574830078675 2.3044652334137465 -0.57266336520739247 -4.1458213422718417 0.55112549773276942 1.1945517430591797 -1.4128894882046787 -1.5600707753183929 -1.2932792944859408 -13.078918399033268 -0.81724284296452243 0.37370614252001089;-1.5801380806176122 -6.3074009990595989 6.850650016332577 2.0615661680240032 -1.3800294923702738 -0.14963893754631058 1.775683368280762 10.067469332995543 -1.2280770771648828 2.3207092840587009 -1.4050976664472075 1.3477438287969268;0.012342553207418699 -1.031342288371502 1.8955925854587168 0.049654113436439398 -0.53477705075281834 -0.59619288662249204 -1.1421892545790162 2.689063159592374 -2.4324003114426103 -0.68801539771851039 0.40911131737186868 0.063848326285719167;-0.39605393999424376 -0.016428289969360192 0.028330843142973801 0.98279294307252341 0.21028786731084714 1.103477258989586 0.073183905230603141 -0.1704473026544743 0.84833936947530297 -0.5614840673615169 1.1784838357400329 1.0418631624141386;1.3374279735633223 -0.84910488104842985 0.35374238302908634 0.0060661627192652333 -0.74309267101025711 -0.70293690015133037 0.11911528238744626 3.7930075363563085 0.01685914383437279 -0.40198866871108996 -0.22319894838136004 -0.1725785704627999;-0.025506483528458794 2.6205375521784533 -1.4523219229407756 -1.2618959140977739 -2.4457388358175107 0.70421891937083381 0.10148347967889275 -1.658315387173511 0.87486994324355294 0.25943231539076278 -0.74143155403296057 -0.6496751852041337;-0.24549889672042505 1.998189096818052 -0.89840601272003762 -1.0614596569940993 1.3548486855192514 0.66774943805271336 0.5422588246398089 0.38131986015837316 0.1738905120055412 0.25859460916879035 0.26993757849031053 0.60965834933718099;-0.074084101439321995 0.69071678270681969 0.0099656167000887492 0.00012927853898231974 -1.6939086752455794 -1.3862331830353913 -1.3684557566860449 -3.434168333292646 0.15906298200896424 0.6212919011414455 -1.2475325702706965 -1.6593822410007208;-0.27302935305426479 -1.0666934739100189 2.9269663291818997 0.50005901279865428 0.73082038184404186 -1.0091746395099743 -2.6631788111822821 1.7638277361656247 -3.8130384034959888 -0.78873853769021829 1.0272798872560984 -0.13834143953415282;2.8915922163202725 3.3517616516279936 3.6438554793857163 2.2591560939802084 -2.0031180834116089 -1.4401639388967522 2.2249125898780222 -5.6157126437565106 -0.1110291157942233 0.328082314725687 0.59564343353222859 -0.83051019699655426;-0.84313545472614926 0.45183817619916039 -0.17082478300838758 0.61544956489453451 -0.43048632580753471 0.93035873729078233 -0.4252831549975235 -2.3036379141065928 0.42020979963078747 -0.3274988531819199 0.49986755394880733 0.51286214525074059;-0.4171129476347516 -0.27990557035425162 1.3001066124396881 2.1120194342479364 1.0972673331184575 -0.82256265671010931 1.1947000764563007 3.4986407041735736 -0.47927516958905986 0.17226272516615523 1.0661937875660348 1.1730121559135029];

% Layer 3
b3 = -0.28782263200049057;
LW3_2 = [-1.3513776477444972 -0.45406972106418458 -0.94841585897418357 -0.86054068742747836 0.87447037753183476 1.0326228993135773 -0.99189907801734989 -0.36379600659315203 0.72859553904812346 -0.34274562859182395 1.2748635476520609 1.4137593060995119];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
