function [Y,Xf,Af] = SOXMiravalle24(X,~,~)
%SOXMIRAVALLE24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:38.
% 
% [Y] = SOXMiravalle24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.0208986415882968;90.9090909090909;0.056980056980057;0.0063552589768033;166.666666666667;45.4545454545455;117.647058823529;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-4.319391542082835;-1.7802821268724967;-0.15167478999382189;-3.215815542729147;-2.772640782530102;2.6527069081348258;2.0636471971068917;-6.0459668799106101;1.514332752062014;0.41694378956464589;-3.4268626568392704;4.0803030651274081;0.95030973489618664];
IW1_1 = [-0.022169181662848113 0.10943433301226721 0.69031653426498729 -0.64411268818334799 1.449486070741892 0.30865900431117615 -1.2554122588571617 -3.1920086167307398 1.4018240363426435 1.3952356280678422;2.1011605281717043 0.68507120352340412 0.67892042485163118 -2.9240847996532255 -0.88971276086092255 -0.61602943061336546 0.97951283446740034 1.2353117073818891 1.0863859591401743 -0.66230082664156054;-1.6971173605185526 0.98477667923894163 -1.3424084082295409 -2.1222889247906935 -5.4019967913054288 2.937682148100194 7.5582025525899512 -3.9904335568647795 -4.6692599335419667 -1.0832627687287111;6.5561268967802606 0.30987831305512065 -0.82787774263091884 0.0755689976177812 -1.8301467754093281 -0.56115592931241498 -0.0049661210279552219 -0.25671494705501485 -0.15914990382515246 0.29964581355006198;-3.9325084518577409 3.8216549904669974 -0.71951590364529416 0.099913949086145579 -1.3997900487892687 1.003541007651271 -3.1782145640301511 2.0812404958585398 -2.4840956297742327 0.68255779612993772;1.3599087589069054 0.87674565665719539 -2.415679322904063 3.1116680341200458 0.28228168647269009 0.88247886750535531 -0.49775312674513295 -1.4247898773693237 0.84813918105006125 1.1384391620913683;0.74692892360079766 1.7017214673167602 -1.4873070449795964 0.42735384312160196 1.3676076882215087 -0.4222863472196709 0.028054021260891876 0.34222357528372571 2.2811612957995795 -0.17080598072837952;5.7939741925272568 0.77386257136146508 -1.5953127526891802 -1.3557125455691936 -3.7731327377272144 2.746356962576542 6.0281983076649466 -5.7185209948765827 -3.6803706912376652 1.2142770453602121;3.410102353769207 0.14690175493030094 -1.6299058190422004 6.8803895937409845 -0.42853199381945906 -0.090062073272416096 0.43742093080155864 -1.8812473762807034 -0.5069893802246821 -0.63920266629468869;-2.2156940155441545 0.20135864044639287 1.7230874208828137 -2.9584418161906254 -0.52170264428171109 -0.072799480871458266 0.41575682422786009 0.31968772541947638 1.659536771904518 -1.6559954412604376;-1.8448063510904071 -0.052712057472646207 -0.69644860069194536 -0.34979720740118669 -1.2011603859519746 -0.058686376692662155 0.38061291935167824 -0.24263311291013875 -0.49488937853089798 -0.78888439229611129;3.5303535736196889 0.66034919754755605 2.4448127945706912 -3.6392139281836711 2.4113016903964257 -0.73817734007600777 -0.063424429815811673 2.0168157003435918 0.81976091114971839 0.52662965956042695;4.042150217107995 -1.2825021191772887 -3.011415101001603 0.16945113854714308 -9.7962955149270758 -1.6274464748587023 1.2300908449745063 -0.49022133490680925 -0.80868519128657268 -0.88448000208853761];

% Layer 2
b2 = [-6.5242702853207994;-1.3562645169947549;2.3336426530071397;0.56071880140405594;4.403347461980367;0.5366128773345008;-1.9206211555951092;-1.4524745816721285;0.64226503255330414;-1.0867085565302663;-0.47462997752671804;-3.9732235019933788;-5.9411095016803159];
LW2_1 = [2.4493038140125716 -2.147698930702898 2.1069463763050926 -0.76794832601170238 -0.81127937693080976 -6.3982284163658001 2.7889549176001269 0.17344411017273009 6.1708281539725194 -0.74624362351374152 5.4163977619626458 1.5118373905599352 -5.2429179899298397;-0.10868196893704858 -1.0333242205385615 -0.072496458260438199 1.3370881726966186 -0.035491095011014606 -0.19286521311035787 0.17736832398063945 0.33445160573798965 0.48567009809095407 0.89653244905597829 0.26942675692108869 0.12245389550643701 -0.0897745296463026;-2.3938357745551238 0.13142326729187204 -2.0825263257312341 -1.2611901465628943 0.99639623577743053 0.79307069944643827 -1.9478899694833656 2.8297111274405551 -1.5660795074825455 2.0404804816550715 -3.2620313794810336 -0.66118217047697336 -0.083094199792030851;-1.0737652742033934 0.83194981497129139 0.57013638900110108 -0.60779476159217882 -0.081329294127477927 -0.37502988725176017 0.46685642734566479 -0.70294693119421836 -0.84106642369171314 -1.505774148369118 -1.076449390470305 -0.94122353628945554 0.04760531180943442;-4.0209783429617572 2.6163432045185639 -2.3745658568335299 0.97184527924624742 0.77872845804575264 6.8569073001007217 -2.9438260160759091 -0.32479555037902597 -6.5636218789625485 0.78105760880511155 -5.6555008781819893 -1.5270329105835148 3.8914546829453274;-1.2832960160964297 0.70549263837100462 0.59440152553600822 -0.58590763107658028 -0.11135929899493696 -0.3945221456490875 0.48729754562311206 -0.72565579775961386 -0.84458243974269931 -1.4931033261294722 -0.62221369440203422 -0.74702648792626436 0.070280227031168874;1.0219376047652622 -0.6004810964605849 -0.19330083308592558 -1.1808306686401153 -0.12868938400211685 -0.19446073823922805 0.093357268886750458 1.5221970524946076 0.82395800505135997 0.72874394279290933 1.7435969094423056 1.169621595527357 0.12027434861782189;-0.34388515110723994 -1.3448264545237807 0.053982401198114198 1.6125044111133755 -0.092492817786329756 -0.25880427302813996 0.26229495856434537 0.1755991490041815 0.33496687981522277 0.98465959511174517 0.72765208930319669 0.25347065899392335 -0.0050874961952577374;0.40758154214026876 -0.96389486918654887 -0.78896974619251137 2.2453052217542306 -0.27120584453703139 -0.031079619464508663 -0.26523451482376798 0.78011158254551372 1.5838630991648612 1.1489648846739156 1.8856098684120415 -1.0769005114004222 0.72277359753590775;0.39011649298883205 -1.9522907953511903 0.1550355991940239 2.4216298863396042 -0.061579521525309003 -0.32007988190060366 0.25133348156447344 0.05318424996267021 0.093997554163414709 1.5574413295649319 0.96562421744081495 0.24002520132228358 0.0032555855937212233;1.2253897414332893 -2.2238178369933319 0.17324777163382105 2.8546000351813769 -0.020337158029909062 -0.34390273121136616 0.1935452138881496 0.038352222955364397 0.040516524737939937 1.901779644855359 1.1464631535695071 0.24956051524919304 -0.018546743086950403;2.7584246802548797 0.62308308614863117 -2.8631481752080514 6.5307944339878361 7.2594909385067048 3.1683082109286649 -6.4337182355039948 0.93639180685523393 -5.4082588515157495 -2.3898488268041302 4.0599999999660357 2.421209905837884 -2.1404228911678946;1.2038993768562087 -0.29100073509146596 1.9602841433639164 1.035244465944454 -1.0859738934597265 -0.77739656027290838 2.0899510322487247 -2.6568899555258945 2.3262291062778053 -1.7913458897786922 1.5598251658196078 0.70795342417467622 0.033032745092750462];

% Layer 3
b3 = 1.8401917659009643;
LW3_2 = [-4.0456106660079527 -1.9864661686164362 2.5942879086697523 1.7409137779396606 -3.8746022940290534 -1.7959413475018842 0.20463968918274758 3.6537132369087013 -0.089072749907812554 -3.6551920920543308 2.0307354343620565 2.7833686660388861 2.5520711899196344];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
