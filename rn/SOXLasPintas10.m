function [Y,Xf,Af] = SOXLasPintas10(X,~,~)
%SOXLASPINTAS10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:45.
% 
% [Y] = SOXLasPintas10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.226384293882512;2.2196129327886025;-0.48096877332799121;-1.7235268478065404;-1.2419899397607939;0.65631668937978227;1.1762185879296381;-0.9810556997452059;-2.5931507790076092;-1.6173421953163438];
IW1_1 = [-1.3335249544191803 0.67988217095818371 -1.9255129149642165 0.49827611352163426 -0.68048052672901072 2.9598917595151053 0.21842096645777265 0.40657588369970971 -0.27499863144779246 0.38701240620803601 0.38558720175008732 0.32197041978960167 -1.1396140890002724;0.27691715235268671 -1.3970261776394601 0.087168333804986065 -0.58883917872516855 0.39439881461110482 0.51976222195674027 0.34046517551709166 -0.14623664251480006 -0.024050377962392899 -0.45737787428735499 -0.33130127074810772 -0.99117932632310968 -0.086195121228287111;0.21685530460773408 -0.065866538776918032 0.2892047439509014 -0.17534426624325575 -0.72811384171359672 0.18845582665839633 -1.0035372864532321 -0.078451734444146659 0.13877824997634935 -0.085433361065235053 -0.58334571411766312 -0.51252070592177235 -1.0729976816127555;4.1867436085774852 -1.3395193042300757 -1.8436446910017008 1.4132831240876322 -0.056235962436288922 2.6987019324930426 -0.27003122991459805 0.77642813578920122 1.393949126572142 2.8812342779034807 -0.93255826297832434 -0.031956050941668215 -3.9656600898130243;-0.53315787204694698 -0.13383984400212445 -0.32712201218636694 -0.14063764470369744 1.3226283544350603 0.1108362776957991 1.9207001946649325 -0.0038668267115494863 -0.046621311405572671 0.23373993625713321 0.41016559198743552 0.7179991296662912 -2.8592043421421143;4.3846758660215484 2.4837996122393382 -1.5924179831902372 -2.1909182264639608 -1.2279500814413906 5.5245766135544816 1.1880210744065258 0.43347961014221326 1.675066185382488 0.76992643859791055 -0.19486047451203542 0.16518789239499077 -1.8430877065003703;0.80990761871113759 -1.8605241424948771 4.4106524293327158 -2.2847899468435111 -4.0541009446476179 -5.8232367571648194 -0.81971120881438475 -0.43888528267358173 1.9114713025784045 -0.031381548646166074 -0.91756461240524756 -0.48811352449336731 -2.0225255958349022;-0.86172243278735461 -4.4924340709821173 -2.4245346024956249 -1.6116652696435296 -3.2715246380284286 5.0522693559327152 2.4987885050752197 2.2219037606824048 0.92357133366600408 -4.3410970483782725 -0.79666473070316746 1.7029792136525965 0.012226401464708499;-1.0234439733281908 -0.0068228838982197226 0.64034649371860286 0.63779149762952558 -0.37746077466495315 0.30927490237536165 -0.81594315118911009 -0.28908731030552387 0.07774212445382972 -0.27994261529562997 -0.4916235647758132 -1.5429774954522 0.53390896055934112;-3.4447695275826753 -0.1177666991613622 0.51409937137443651 -0.83288283064038127 1.1050801030294906 0.037765213382266169 1.8672878925776148 -0.77953395571945716 0.056024295327545492 -1.5122649295721304 -0.47779983123231679 -0.92584355416088415 0.93866598715403038];

% Layer 2
b2 = [-1.3062853974031736;-0.12849255720102642;1.2817365563114638;0.09476498615295427;1.0464917770064832;0.57743704366136517;1.0979920714728206;1.0138451942887849;1.108403788452839;2.0995719718574608];
LW2_1 = [1.4042647202171077 1.8338220098018605 -0.17124077496467852 -0.54592386046273056 -0.71341419478865209 -0.74315659668527767 -1.8311723371019502 -0.071849069856924533 -1.8005034859104647 -0.63527369975836101;1.1715434803403892 0.60507325866490391 -0.26247903667696643 -0.64218929729038388 -0.51766826498545404 -0.63393730263053305 -0.4840800217497942 -0.044096414827161839 -0.45354258684361598 -0.63186608382452403;0.33910097355498925 0.94412969061389507 2.0903189838935026 -1.7540075863018931 0.96380262886237378 -1.2327732475013828 -2.2131539388320292 -0.1938611825474042 -0.72041985948243326 -2.0668926777263605;1.5441646204678696 0.51924235210580305 -0.95842296226265844 0.10456737886294472 -1.3086652566158998 -1.1676004807093781 0.4902683782895762 0.55124055244666748 0.68229685613279223 1.2458785276979309;-0.71040664496744255 0.37621885564985158 1.2776019986646343 -0.32984973058530925 -0.251309849968333 -2.6672174059731137 2.4598096284029385 -0.32260521722119295 -1.4767528966765968 -0.91060631476531262;1.4670854414422971 0.074441925387789432 -1.2412318346964297 -0.69385445499419018 -0.8500146045725423 -0.46130248725900691 0.36929279152506267 -0.011642202249659915 0.3296771382158647 -0.36664554165153818;2.2884017400547925 -0.24134965494740118 -0.18360168102357902 1.3286503852955023 -0.91737243230200605 -0.47936285045828059 0.77861443017391174 -2.497916887201447 -1.3729801824128769 0.36863565386910657;0.5785722107909691 -0.21601386299794359 -0.16457939613016234 -1.4178818816261385 0.74001387589507717 0.49044276045385943 -0.054300609908395719 -0.49958221649939671 -0.80804284874696086 0.02995262333066584;1.7366558609923399 -0.48220322570722729 -0.890057010453287 0.10526931244352936 -1.3275594388902303 -1.184130695964448 -0.62649441821840079 0.54275380142396423 -0.2115047172424018 1.2574646563027232;-0.6477170241282707 0.92373588816757346 0.29228681118289968 1.9682380784621567 -1.461984006767133 -0.22047750603444916 5.0354076352084407 -2.3082743476467331 0.83332544682152798 0.7046475157118498];

% Layer 3
b3 = 0.85354351175307464;
LW3_2 = [-1.9316132607087229 2.7917302499041892 -3.6880133694693935 -2.190755310170811 3.6368579795142986 -0.69697478869561558 0.25286770202104591 0.054473326387990573 2.1837806266366955 -2.2419657618283559];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
