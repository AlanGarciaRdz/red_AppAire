function [Y,Xf,Af] = SOXLomaDorada1(X,~,~)
%SOXLOMADORADA1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:30.
% 
% [Y] = SOXLomaDorada1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.1425482621788055;0.33798912051835306;6.5348619388293079;-2.047595896230519;3.6328127833890211;-1.0969183184824287;-0.92381374323574639;0.24709929966046448;-2.8178939408711656;2.4217806313021848;1.0369028300544965;0.039296463249997526;1.8008129301431883;-2.3013149824589165];
IW1_1 = [-1.4438380665464217 -0.21556763447626051 -0.80922343749063297 -0.69572280296613587 0.41938459785589388 2.893909655539356 -1.9861504457191326 1.4842321419801121 0.1535979735217029 -0.5519734546116104 0.39420499001878445;1.8768343590715184 0.29137364184092662 -1.2644436397331678 -0.68132002318545193 -1.4757187697403094 -3.7672239744268117 2.3350009909077372 -3.8612985233794106 1.6886631173225082 -1.676408385838059 -0.93735424891800811;-11.94604151894807 0.24829505481840602 -3.0634174893010839 -0.95236630187394666 1.7639094184485589 -0.3631443904716275 -0.28335126493001173 0.37311869671234249 -0.40031534926306017 6.3355911897777011 2.0995337795107352;3.013674641455879 0.59313756333963197 -0.31374600880691472 1.047304712218994 -0.19714795762210346 0.33597235133850317 -0.2194725052505315 -0.018306500461770916 0.32250931570260244 0.04903318196065698 -0.066367665157912439;-1.5656081081159559 -0.12383997356191506 1.0560113732816092 1.1360295001135707 -0.33678306726908758 0.70985082395531207 0.67570024291795805 -0.36181938477355824 0.043590119903762978 -2.1258974745284474 1.8017213491568289;-5.8057872142557274 0.49219005910352709 -4.8523812386284337 -1.7893418910526417 2.3013436897193063 0.75450727378589388 3.8037514638322567 1.2490111648230839 -0.84951541269994768 -2.6003608121091188 1.4130784762353512;2.4271061664824858 0.29921336563536277 -1.633369395859487 -2.2574039558965993 0.64512834260560148 0.27595548010528853 -0.53886555449863982 -1.6354117074193346 -0.72569261395674223 -1.867266421208073 2.5237324383767619;-1.2387717135467362 -0.38186303040786262 -0.4389267489229513 -1.1993319969203926 -0.67219011760618175 0.19577051357182518 1.9144682559978401 2.0416644548511989 0.72906610848650821 1.4546609185406467 -0.15825074453233806;-4.1610058678574822 0.10536727957253569 -0.72991727332824108 -0.074379420420750311 0.65214154674680125 -1.500023162976807 -1.6343870532690836 -1.4322841795945167 -0.15808919668195739 -1.7831369299027551 1.5782591035177824;6.5275380670158984 0.42894573329332508 -0.37637820124868338 0.24716339043234667 1.8704101288217601 -1.2135134385632316 4.6833986756548009 -5.1825733255509148 0.34564982015915452 -0.50551971536303353 -0.77539005025882912;-3.263438601407934 -0.48023892785811201 0.53212961794384339 -1.2308026108367129 0.078659882652870133 -0.42495081540464724 -0.87941522266170857 -0.49196150824785351 -0.35945272786642135 -1.2145048048177345 0.46681534709705336;-2.7453302050453519 -0.3833703890286172 -0.24862969546938371 -1.078274053595192 -0.30116003664190982 -0.15360744226214285 1.7826853944140262 1.2653051916551037 0.23621873102128807 0.26170039662483324 0.49263359301393789;-0.87768371692077296 0.23956148469132532 -0.42002153649993257 0.14798792284832341 0.24815805514773168 -0.036817848129971555 -0.86528972302859541 -0.95468541636209892 -0.14479448156051122 -0.29363710514755476 0.58139125935222224;-0.90778946574732844 -1.1306819782534259 -1.0084812956446785 -1.3956809207044345 0.56791004559810399 -1.2580131616926353 0.11278343512550282 2.3301512741946704 -0.3257039895913566 -1.5729142841898209 1.9699840078186432];

% Layer 2
b2 = [1.9568810052785326;1.050045133498523;-2.0786266490555101;-1.8790141271949479;1.0812574565920707;0.21694308296094439;1.272925039483247;-0.42485124607305158;-0.37381561658210827;1.0658032782324951;1.7737882846299557;1.5532972337893212;-2.0967229705079671;-5.1458510887405096];
LW2_1 = [-0.28459702100254181 -0.1858549451037938 0.051314868176342718 0.5964828176488699 0.48144100940134782 -0.45722569454414175 0.53367318998480495 1.0719834446738616 1.1476754706913772 -1.044663304940876 0.70647818109664118 -0.16433527942924464 1.0996959282379657 0.29647133660081182;-1.4892705400517667 0.074323554146180984 -0.35470896271293062 -0.81005087925549657 -0.0053321647348611202 0.17788541416852247 -0.14123376408133756 -0.58306265868527607 -0.12076616356129921 0.35254645228652731 -1.0874145101789563 0.81303729818509141 -0.086611934038591215 -0.25998854972688251;-1.512114597622384 0.9004344722295764 -3.0949582186765427 2.6232969229952525 0.88083107952683137 2.6017760898169202 0.39298488316362545 0.83822066972685783 -0.5595305418982548 -1.5808163730397373 -0.32730689906395671 0.80337866059351182 -0.32472207447932938 0.4031326326536101;-0.25669951383725725 -0.038553090817045908 0.33669925462992584 0.42439203477392373 -0.07491558897836316 -0.33645365184858606 -0.15131195549154178 -0.5855585107341309 0.85878733379487293 -0.98484914528417233 -0.23831499580391019 1.2867034050715802 -1.0533953973427372 -0.25705404124974995;1.7847967371001467 0.94077698005681398 2.6824566161288961 -0.35972584959682025 1.0744039612715359 1.469213398398229 -1.9792770526269343 0.67610093416977901 -1.9881482399329742 3.6236817893106266 2.7577077342329965 -1.4444942102192617 -0.13492010366106311 -1.2078251514234619;0.69478469110139252 -0.097982878881363145 0.36830930822932406 0.25790346541879638 0.22971397879791505 -0.35704626295742736 0.26856622587882178 0.38827116006558315 0.80459958555085886 -1.0497835891651806 0.28086693881007663 -0.29012482435209491 -0.16557654758191018 0.2649057294388304;1.2518676197385903 0.12231362926995037 -0.056986831168122698 -0.6955462896184208 -0.014460459490288952 -0.14547592830165146 -0.067237783714343594 -0.19405123939505292 2.0928781633127373 -0.8974709947686661 -1.1071526625838541 1.0146604951803586 0.86958160396425543 -0.14934196836665053;0.25970125296489682 0.63585319508783222 0.28338116573803457 0.56751551515224941 0.023654614815438704 0.30500648859863611 -0.45998672726925077 0.21917837520947694 -1.9885128493337536 -1.6705235161325103 -1.0271836069650357 1.5856813690935454 -0.80790037553981531 -0.50575976406580647;-0.28851509158434102 0.065829369184351005 -0.50277750438608582 -0.24287288213193087 -0.040022450183219219 0.10859553487473947 -0.20587045648390642 -0.79888679796253503 0.16368177551233984 0.16785889160420314 -0.027133943945461599 1.3500949150147474 -0.76253618270929902 -0.37405821551806884;0.91195919367139788 0.71944934968030927 -0.33055309714123299 -0.2971303707023385 0.039319834141969615 -0.62549147999444088 -0.5078688416908318 0.01720620246798555 0.3506008018711283 0.18581347110792559 0.28068045140010062 -0.60880390172903665 1.136850713443804 -0.48919952580970644;1.462680836025982 0.032700461386807836 -0.080393772350935977 0.89326138763614726 -1.3777548403540754 -0.26951206579042025 -0.11403392279639511 0.489724970889856 1.937559728380372 0.44847720992961754 1.8452490818909744 -0.45893581343079837 0.84154319307265169 0.17812122897671143;0.21089609479671503 0.31614702047357246 1.3330928110092928 0.57681712456144973 -0.94852900361843184 -0.019094827473910329 -0.89236277381930262 -0.55812208843820732 -0.31389247469681819 -0.89549467109822678 1.033251846457276 0.73557545411002356 0.65108457818407772 -0.39448167971525294;-0.90187534068798902 -0.8966727787254688 -2.215523095417478 0.6938180030100547 -0.77543007876974435 -1.3049170465361355 2.4549639721478931 -0.62245458260639874 -0.18719034761019296 -3.6188760425929773 -2.6770130600651521 1.2554879736095601 -1.9360557413678097 1.2076842915556032;-3.0487537055096636 4.6338083644365113 -9.5797352547184254 1.4676464925146055 -2.1013152391406784 8.6784482024030947 -1.9297108509031546 -2.63121338720007 0.6955099191766364 -5.0733953946680455 -1.5375506829196666 -1.4397832518607134 -3.6893250549556478 3.1400059964002636];

% Layer 3
b3 = -0.74476531971768045;
LW3_2 = [1.1151669774415813 2.4913194677389172 -2.4668453604712983 2.0023299488533119 1.8819740085213248 0.95346021318955054 -1.1394498258803352 0.063592109679401473 -2.0837921065395961 -0.70139011467295487 0.5281569654931656 0.5367212434619264 1.8629049133923119 1.8105053679957399];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
