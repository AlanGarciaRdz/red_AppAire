function [Y,Xf,Af] = SOXOblatos14(X,~,~)
%SOXOBLATOS14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:41.
% 
% [Y] = SOXOblatos14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1794126391574173;2.1177723152003791;3.1237466504993563;-0.85145169645846452;0.42653795350084306;1.145783221493371;0.46069168490178625;0.2187616566991723;-0.85271167713002383;-0.0076981106062384286;-0.70281838651505513;2.178298590370753;1.9146165685819723;-1.7984330721645443];
IW1_1 = [-0.82972740895474839 0.2124974066684199 -0.55490233644081355 0.49134613368470215 2.8304821600386312 0.60415615305672654 0.12364192772597683 -2.1078051552218575 -0.97316099763033947 0.036541667932368543 -3.3487511641182981;-1.8557620531573544 -1.1570544227725834 -1.1570791970297569 -0.54619211805961199 1.2043216911398362 -0.75419992333230379 0.77294215617584294 -1.0091617866040632 0.76483058112014268 -0.85168305824505885 0.61577017525525091;-1.6244434588956431 0.42977465322992309 -1.4148471080430642 -0.63918929942025937 2.0886451395713324 0.19325776001963771 -0.10429622544490245 0.53309758223100046 -0.52048666266470733 0.6707467791075038 1.6918402945143443;1.9430366843335356 -0.27650498961235226 -0.52018369486443905 -0.52468044363166677 0.21697618076781369 -1.060839779088512 0.14454485502053233 -1.0524027603937418 0.24159875621042698 0.21503982135773284 1.1113773404063001;-0.5042379159395256 0.29562662602799816 0.84198542193524217 0.71919997211471531 -0.12719544991953335 0.083891916427511093 -0.43260433561459199 -0.21016086630813779 0.2297862750461416 0.4963981033396157 0.26249615231524437;-0.41569668902328683 -0.42328202376459412 1.7375774841911729 0.85657112953245951 0.61703760046767109 -0.04509812951130162 0.274829378961013 -0.99030824376528304 1.7641291558755974 -1.8588651935536831 -1.658892817857152;0.24768611824244571 1.1224862371745168 0.11644204661246743 -0.43405884180560106 -0.30678954491265181 -0.13729340069713827 -0.72448848249376352 1.3385782730532143 -1.0079321487680748 0.66723196772574389 -1.4182265169731196;0.19983978509492489 -1.3373140293755152 0.86156032798660709 -1.1807566067590722 -0.98980832185113821 -1.0375066683485317 0.2960453685901811 -1.5581260593894337 -0.77229074027172095 0.039028101065186005 -0.37308644987761419;-1.2161183584073096 -0.4338350724452798 1.0707256801998366 0.73039037592171607 -0.36692574813602125 1.6851559049651466 -0.019373557986229889 0.99569286750761077 0.085337144442238055 0.51553356452745269 0.27916730882883062;-2.594004089565439 -1.3994655341065529 1.4400602006833316 -0.74352933232426188 -0.66931986373107433 -0.17903205183265875 0.61978652346697549 1.0177496409959734 -0.87577131728047153 0.47516461353258405 0.85392262123625795;-1.1879320366062229 0.48341093476940183 0.059911594385647665 0.36137203040550181 -0.31254487247646928 -0.39269018733069283 0.15416079104762248 -0.35926367617836386 0.83699312128447612 1.2464557360431665 -1.352256434502169;-0.29824529245939807 0.89463394991611245 -0.92975443658664458 -0.18852873604817921 0.46623369359436806 1.5726752456187281 -0.20707613679857909 0.98162202173855972 -0.510719335286139 -0.10399694414814446 -0.68731033117967533;0.24015760839845385 0.55496223874281503 -0.32240589679373655 -0.61343399261511622 -0.46801111765837977 0.15848484277184699 0.16696705204795287 -0.26050121917970009 -0.48071137303189254 -0.88696507141310876 -1.0525320399549511;-1.5369391613063912 -0.45609870944082942 -0.99349147223684675 0.08063358028716372 -0.51732775923086516 1.2277836744569568 -0.50481691247685245 -1.6399941100383799 0.11899255992583824 0.95541049578085602 2.0747567942063121];

% Layer 2
b2 = [1.620003608618541;-1.5186137887487241;-0.86103108714111687;1.0920391334305164;-0.47637520685271156;-1.7020631590832358;-0.33635019288834578;-0.48289991441482882;0.49085519906817138;0.87107252284064163;-1.3373242320455017;-1.2161473438642179;1.3760616880486261;-1.9193015762318435];
LW2_1 = [0.41538067177216831 1.1890620186010372 -0.1614572691349509 0.4036624223581059 1.0478485858333277 -0.7970327112904686 0.51554682874458757 -0.14737149930144028 -0.59721626428724284 0.15509932671532564 -0.065998432414688793 -0.81719783043217586 0.60418594648223667 -0.39705257907286989;-0.57758767206724237 1.3366610084480051 -0.57034067586873394 -0.54532849923900206 -0.30397953512303133 -0.88861687211297169 0.35923647969658601 -0.32172139027222413 0.64791772794495328 -0.83159723362673055 -0.61588572605968372 -0.39876335029401927 -0.44766222594875343 0.95643831828827308;0.29552246686414385 -0.3998900081506499 0.87872259492805571 -0.49851742488988626 -0.24453347141983481 0.24939842862589168 -0.017228746575109519 -0.30779073850826488 -0.5609546440128278 -0.51792917455942289 -0.040580885945581069 0.36963286470764184 0.30843192102973355 -0.63314204562775389;-0.34774622341738798 -0.21067682609981048 1.4447990604594876 -0.77307038814060369 -0.38378207420871918 -0.11288674354303371 0.33746113470131112 0.069870504447073475 0.52883654475999864 0.56051713644099488 -0.15063150395668851 0.49831734794034865 0.00064989796932111987 -0.26948118174221214;0.8844503115132013 0.84757556649226473 0.23107207301515575 0.21742212743889738 -0.6591632965337384 0.54870331571639352 -0.22824808947537745 -0.13799981532695832 -0.54848185550608797 -0.069783756211566184 0.11773470586217066 0.76221728251244136 0.75011896277516177 0.5363486499975052;-3.7906411784415526 2.1874472208588909 -3.0455471629811344 -2.7557496199277574 1.356558189437078 -2.3541293980102109 1.3100995694650543 1.4027160012209583 -0.50069792293722815 -3.9768296840760544 -1.404231558682318 -1.518582062320855 -2.0230638553919631 2.2773753373907426;0.053469980620054293 -0.39121151475624749 -0.044578581180426055 -0.73458328274638474 0.42969398297976658 0.73163478277138938 0.021307015270790985 -0.60380836315784969 0.28563018580203881 0.61133917146703443 0.21428783705128984 -0.62144521118223062 -0.79337110010673106 0.80631240492916056;-0.023569880232488336 0.77740794438659333 -0.20225123572877132 -0.26798063359440277 -1.2097673423176465 -0.27132496862859834 0.66789589349912548 -0.2471668886097913 -0.2871290867444638 -0.35475648547363758 0.26898012338483079 -1.4127488155058854 -1.0673968914925331 1.0846537346019161;0.36304335683780053 -0.0069131845033257797 -0.28282078152973428 0.1886928092439045 0.085637527043179285 0.41202323521139012 0.50063135042311901 0.25069111194222754 0.99713877402170426 0.24166964598243951 0.32331503633521369 0.42336569021645426 0.68796366456739655 -0.73317240738421841;0.19572367648482955 0.75184549972226689 0.61737966247049592 0.033893035840989676 -0.92606699427866701 0.095279378444449656 -0.11539647061366794 0.29114083885192438 0.12039914998494847 -0.48854661936074406 0.45630862637121128 0.92213801891911595 0.58687949704031361 -0.012310936995137665;-0.78168561644165746 0.54749675520275221 0.28509071167510369 -0.21485147388954709 -0.0460035774917677 -0.1894916345200727 -0.75000241543265433 -0.047200690381328667 0.24881940076113096 -0.70088030373873023 0.48352144373407141 -0.58804870203060644 0.40124045304183276 1.0971296786695954;0.066995583458655861 -0.90549816694417951 -0.92408067783272618 0.28929300908715927 0.51916046395512683 0.49591887652477334 0.17053001911975688 -0.27866593920222299 0.38222725313082284 -0.55043458760224362 0.12023602144328958 0.26959292165587045 0.15921538765306495 -0.0047265377105671774;0.6709685227177864 0.76131623966947293 -0.30247202618070035 0.34390851361673758 -0.040979657731126405 -0.73181917509705063 -0.414583149613452 0.10888615120520158 0.11348348012367486 0.40228598518284259 -0.61009768035299361 0.66370128771637227 -0.24984123845589726 -0.38513116189166224;-0.03226848426793455 0.024500061649287863 0.26914423504320839 -1.6334093822932907 -0.51038934814754222 0.28051383185079415 -0.080661596333534535 -0.064145142089462995 0.26993510717198793 -0.3297776766846523 0.23315106259225216 -0.5342739390307234 -0.95373263478718029 0.22516380194720562];

% Layer 3
b3 = 0.58762858200564183;
LW3_2 = [-1.1935111357264052 -1.1655535218375364 0.46148522626879462 -0.14626743092637598 -0.050906833788402481 1.5265945836060559 0.26126405386901197 1.4365239229200575 -0.081991555612877742 -0.68827300659162494 -1.1813806441768484 -0.15316054883199834 -0.10333785128470642 -0.94686966859391319];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
