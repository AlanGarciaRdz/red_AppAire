function [Y,Xf,Af] = SOXSantaFe7(X,~,~)
%SOXSANTAFE7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:50.
% 
% [Y] = SOXSantaFe7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;10.752688172043;0.00341273633199099;27.7777777777778;0.00632111251580278;0.294117647058824;35.0877192982456;166.666666666667;95.2380952380952;62.5;117.647058823529;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.9439361353642091;1.2362524340955536;1.88706577812575;1.0785342241586575;0.085806092958278846;-1.6086612645128209;-1.1644253774659312;0.36925730717261945;0.49649275916109076;-1.071864016833957;0.44601309726840077;-1.0808735638376386;3.0736239904930058;1.7361783530034651;-2.3966988822215645];
IW1_1 = [0.2740254156015684 0.1512804686468659 0.5940335211612866 -0.27774412543255256 -0.031558322518871113 -0.55477237179495009 -0.60517209264704275 -0.075362421679170385 0.39353886847186403 0.97830721337192439 -0.72856044493136085 -0.59956558456237896 0.36903395760253505 -0.88605362038481061 0.24350876659640869;0.14177552678025099 0.78194524477966554 0.22411283410680738 0.5852264828419006 -0.40025916175755666 -0.26600123557309985 -0.67326736426465206 -0.39022007359969385 -0.26150128341624407 -0.64997372835933742 -0.48163584912132906 0.3913339542187142 -0.32141640417690842 0.18885445914314433 -0.29786508968588299;-2.6108647123913657 0.21803514253848147 -0.085316854132312075 -0.94994609122900864 0.97015300114192971 0.30207443412157037 -0.63625882777530385 -0.060270175015605942 0.14743641942529129 1.2580175556447712 0.69067286490212865 -1.2030148619820262 1.4361371728299197 0.51067206235102569 -1.9149281555988387;-0.14841541206937661 0.018713140341198052 0.39597819595428047 -0.48737531406701934 -0.76236854177271529 -0.29086211209438634 0.15592100331390568 -0.19053812483465565 0.33298979606495804 -1.0077866685167856 0.65770745917330764 -0.014858446300840229 -0.53177655320199058 0.61803297080048869 -0.90426474597923612;0.55733963523762897 0.18912912127457115 0.27316611858468892 -0.24744065562080986 0.19760192254004399 -0.35891445198687888 0.090106196132628699 -0.10919582638539058 0.019854836065184268 1.7496154701726596 -0.14120310986057594 -0.046133499383872741 0.1509444548376227 -0.050458761063308814 -0.74013617842135127;2.6331839850304646 2.2127101210452067 0.92074088893800687 0.7867887185676905 -1.0512945049940752 -1.0487661665606527 1.0603284400187318 0.13831752430928607 0.29738021460561226 1.5881209565782204 -1.4121991867548995 -1.0231790249444814 -0.30441916703835287 -0.93711193452498953 1.2545833332099587;-0.31410003597395231 0.87466129773301715 -0.76369133482606499 0.45522054731276429 -0.84105287552441643 -0.31694675763157071 2.2789335584774131 1.3935737705732505 -0.67834687956007933 0.60462643459925558 -1.5832233019975006 2.0762613439980693 -0.69865380607764194 0.65882363582243164 0.78550653306945384;0.36233097642098844 -2.4129071860683702 -0.16145840844095594 0.81846521666582639 0.28641995605556286 0.52332489518811676 -0.17476455528568702 -0.25901113153179167 -1.0192775000245347 -1.9570947110723638 0.1753268202497914 0.4900878286777447 -0.54884453550397438 -0.035350940066083678 1.5447981692619954;0.27297947707221293 -0.34356561581157857 -0.090486238770754512 -0.41385468141872606 -0.065684989595081955 0.4599538500864826 0.65990228620971636 1.1146725376325524 0.48147052768256071 2.8145273643212145 -0.27732753972124718 0.49579831515729761 0.017116896828065341 0.50396955190218529 -0.75325691945576945;0.022866241414786818 -0.70627346996475737 -0.047317803371954195 -0.086698052523303926 0.19424233392395379 0.11492838883438444 -0.51858278951393122 -0.15259304571074947 0.045936357415923612 0.43052698545447815 0.16728270604216949 -0.77135047428550574 0.25181663521273512 0.013868880141168535 -0.75472338311745324;0.14959919362384969 -1.0606158861277089 0.45690650461062837 0.63532275967058027 -0.60593725195980663 -0.073559531060327712 1.3662441190620416 -0.074725743846034504 -1.884610398750771 0.14022928634100229 -0.45479037554805352 2.7159929501536118 -0.93740534099026007 0.076458204277767616 -0.5032516412303748;-0.38236947956589912 0.37745876640795373 0.15267203555214007 0.082349247868065578 -0.41664913273766813 0.16094918495247232 0.40750544204931588 -0.20316004616875663 0.20933437603164939 -0.39474556360244534 -0.25916526847139976 -0.15982745208408822 0.00066121892213379715 0.80091097019727464 0.4973287227877245;-0.037385968837335373 0.20163013584856312 0.052231235348143799 0.0045644127808610706 -0.16391017109618156 -0.067770135510655791 0.044318265890739117 0.021655834514312137 0.012385516929646194 2.653277241604731 -0.041034944865875174 0.17011650393278127 -0.096078592932660148 0.057546930261247423 -0.1950268364012423;0.32582466459849407 0.036652849402654605 -0.56502479811566375 -0.49329942589032111 -0.41264058665909525 -0.57614087688290216 -0.75819794346588665 -0.10298186120360833 0.10279400027037357 -0.10463731696763126 -0.36528398559499436 0.14893434416855808 -0.37975068026384096 -0.67824523518725477 0.29125854613780811;0.84017711441469978 -1.749036542259337 -2.7795953304778265 -1.0210361013206997 -0.9069349308918635 -1.6955801736780423 2.5177577251777938 1.1761586186560948 2.782353243945352 1.3482569370245396 -0.22261161206434554 5.4138378191176448 -1.2373848610687845 0.11280614507642955 0.72978408225091906];

% Layer 2
b2 = [1.7084959427447359;1.4727919827612395;-1.0788323866639411;0.88445140113604315;-0.82775733842743138;-0.43709995293155357;0.090347553180277138;0.39892356712437749;0.20240109808242673;-0.84012652531073062;0.72117814705403716;-1.1247980661217016;1.0178845084512045;0.93051172273816929;-1.3506754689811329];
LW2_1 = [-0.89501661975004865 -0.32712645397395462 0.28876441536277475 0.20740771449622181 0.9043703088691053 0.29434228720511196 -1.4766222727772038 0.60672476794984487 0.7297971891547248 -0.04689896921586921 -0.31309797899458097 0.039700215329099675 -0.41415970845776617 -0.30686131184949034 -0.26126265920813391;-1.1363430668620447 -0.4098415945695324 -1.1171918376925496 -0.84375038720312956 -0.29599591428058891 0.6592911779845787 -1.4407276387439676 0.34770499529548138 -0.9158003414099446 0.72242479844523722 -0.71614566459529982 -0.14810786513448132 -0.14457694791018313 0.59851719812628013 0.025418788749995508;0.79903247795026855 -0.56038987427578446 0.81731968401590716 -0.23070365610853472 -0.27520345692786607 -1.2565184965509697 0.18889410993987976 0.28076424419689072 -0.54135369123093258 0.017827986806780993 0.46360642976986638 0.86378854811914285 0.37984565970742307 0.028758208113508509 -1.5082650697129778;-0.29166561761415283 -0.38452598036122743 -0.67675554469290655 -0.67064971539194795 -0.51463639337083733 -0.0087106261209200717 -0.69493769626295454 -0.16470733051793973 0.8682355687377793 0.99701604806445154 0.15462552131963989 0.31431373699197551 -0.64276587847614719 -0.3757468006986564 0.32661174623007683;0.065102898690138272 -0.053664978286852467 0.35607778896462061 -0.79363251241004062 -0.13184519804778833 0.031240024085399089 0.16725878648175646 1.6016911708081156 -0.47910182740538382 -0.3550588094314408 0.95297498047814433 0.28172845691461174 -0.79205568099866119 -0.012736759122447712 0.61593254771358341;0.14757720385137865 -0.57643916745143253 0.38024116469876301 0.38672621481160885 -0.37991999877575461 -0.62069940958660763 0.29215431215094978 -0.1934116839753148 -0.22502888211770247 0.06191675837720069 0.43580049205297988 0.24709416044424776 -1.2069968965057727 -0.012307971068343368 -0.11869659077752617;0.053821287144580794 0.10541997234360093 0.2348360895808578 -0.011069497881258676 0.57101039783620389 0.16792965670195073 0.32460708850616782 -0.54656732934477759 0.16715454171049793 0.73622984837139571 0.93165152147471209 0.4824560833944263 -0.68758930893019665 -0.62541833988112527 0.90727537518214452;-0.62742563625489167 0.92443707682236553 -0.46439246189737077 -0.045134680081435286 0.5962973870657281 1.107996300562557 -0.81787227843455768 -0.31556248943318849 0.6323944692920197 -0.68021642477039235 -0.32897840142609469 0.12171308498360033 -1.3662778308966574 0.22291624295473703 0.21062876882451365;0.40345988214878192 -0.23934757811576085 -0.10519084808626504 0.84903377836042937 0.19855096331180261 -1.2933324096717655 0.55912363166128587 -0.12074023191457428 0.8217480598860486 0.36167380268532034 0.13261972264624125 0.25020454817166765 1.1658067406220409 -0.077997403338810722 0.83453142386710177;-0.26974618702221337 -0.96982442177625716 0.24889726831713296 -0.62080298756842445 1.1137424039286858 0.72309855862595374 -0.19477458943225526 -1.2870304900770473 1.276517588710391 -0.35686658038501778 0.28825172462462151 -0.4613470384772933 -0.5347028605221994 -0.14531039905171464 0.97039898993183349;-0.099916391510375444 0.39496869569803034 -0.046881242633445126 -0.20976238489294599 -0.048298668825519829 -0.19824391125824187 1.0413219466222405 -0.18610628768337592 0.25534210472986618 1.2901982038537769 0.71307117555917277 -0.13345190126748269 0.90987791716470467 -0.19489790903265189 1.1858999612096766;-0.14571600783163097 -0.90738646203220008 -0.051516817617514477 0.30222227446353722 0.24358828201917138 -0.13544956471530742 0.74872920931693043 0.53718045805827097 -0.25686474861621461 1.1590535345816746 0.95855274697673376 0.44470001666417464 0.55786834307199684 0.32129563299509695 -0.033631721584207755;0.24816515148241186 0.03750691407780532 -0.78867364731514444 -0.88841565590814076 -1.0338490237875433 -0.24138142890625799 -0.4650057288200945 -0.35759164688290557 -1.1713719287947257 -0.41859703422758976 -1.3715800908630245 0.33466862228037569 -1.2125669679483144 0.50844938673038498 0.36265127331082997;0.12616302876159485 -1.2881466728606976 0.091744083761374148 -0.5273114724531982 0.36167063108323616 -1.230939938410913 0.61411107677569354 -0.52195914256396136 -0.0035303034677008852 0.065485991221872084 0.50361081756648096 0.86147303208782167 -0.35350354495363412 -0.20006970596119561 -1.8413946634345739;-0.097119606158794156 0.50390304397191843 -0.16562922347429287 0.73424096147435169 0.2228261694427601 -1.12827954265679 1.7444515614958167 -0.71178684283694549 -0.41865335995968911 0.7312042161449841 0.70231720106775175 0.50443453119642478 -0.050072150182543303 0.19394153419590765 -1.2687118886789197];

% Layer 3
b3 = -0.89787472917324274;
LW3_2 = [-0.95795253080065734 1.9695153138310322 -0.98058790860575318 -0.7584582317748243 0.35295861852863708 -1.1437254781586406 0.7814298031695418 -1.2174776798825613 -1.1882401309854493 1.3496246712455393 2.3433030063387821 -1.5978102342593898 0.27035807905595366 1.9049384405255056 -0.93635170419143632];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
