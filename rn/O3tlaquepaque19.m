function [Y,Xf,Af] = O3tlaquepaque19(X,~,~)
%O3TLAQUEPAQUE19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:53.
% 
% [Y] = O3tlaquepaque19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.171659085057077;3.03490136570561;14.7058823529412;15.3846153846154;10.752688172043;10.4712041884817;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;14.7058823529412];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-3.5352193925263533;-1.7895891386604301;-2.0945830779534713;2.0102774980562343;1.6562324199309453;1.7412778384856054;0.87289587730485541;0.046608696828430149;3.0528644391240949;-1.9885640991985338;-0.4802448128420948;1.1516835366430549];
  IW1_1 = [1.1560136874156934 1.1862123982950972 0.74227209247950809 -0.64575654867628796 0.4482665877046772 -1.0895749335286569 0.47133349873931069 1.8541109071391533 -0.46534383910634003 0.049258191932811821 -1.2084700535115469 -0.14761340270112142 0.043684601399888397;2.7741709224106992 -0.41341751534864507 0.89085832693005118 -0.056961369616135127 0.15119035789915192 0.1536255759804061 0.19944820361268648 0.071136180945218883 0.35110507284209513 -0.54100147434682289 0.86142270131305398 0.32605728342671186 0.21683242771745243;-0.46228397961092244 -0.90154054241373305 2.5953643356371505 0.97465932349825346 -0.17582012375336367 -0.86464139370742021 -0.27313643017642297 -0.55424513018701616 -0.16179337969863389 -4.1482965186053651 -1.1090862938544459 0.11767855032481238 1.3539755886933122;-0.28180221232490599 -0.063772483847289063 0.039320479291804385 -0.12237007043817208 0.35982785807773443 0.002288185929205119 -0.41567284270326132 0.37620969458814385 -0.25764453845483287 0.79025708811747519 0.22541665976681854 -0.021657725280627878 0.37162897574164083;-2.470278137467294 -0.14401742904448267 -0.45611756000004483 -0.47613239172951255 0.077782651046024845 -0.067716458317121142 0.5746934953345525 0.20259933326346602 1.0667419860196909 0.2109805237604491 0.54412341070813686 0.058858038259362616 -0.48901463391994737;-0.20828590343361486 4.2784175878396136 0.7785625468779187 -1.7511413433789402 0.15531415676913582 -0.12129159974662415 1.0868844016435133 -0.012940126267720412 0.34499385070641458 0.48288057737781809 0.45726282962240866 -0.44592185767513937 -0.99221310100695803;0.40186301688850279 6.2242539298369897 -1.2087528033196797 2.2646929688679491 -0.70777877703713932 1.682585954859376 2.1721240638710859 0.38276531454417051 -0.67016273663200532 -1.0631963918397207 0.014130986635156148 -0.023042064639795513 1.3954122820078185;-0.90051891833832787 0.27958174668385433 0.25473901363880369 0.15278015292610245 -0.15334458555760908 0.15094794590641084 0.33071628385922447 -0.081711268779802143 0.16594366520729634 0.022632993618033934 0.060203852890636636 0.011710029000493134 -0.07673976283274124;0.028700075009548041 1.2694770822860699 2.2740516985144184 -0.81176495504136714 -3.2418841877282172 1.5531372490407198 0.056940657562500024 0.8411213908941978 0.72280558456380362 -3.5136408698793442 -0.9490717729297562 0.0094390759843719189 4.6157253395858078;0.27028540478734281 -1.7812210007609131 1.3190553098053626 -1.504425893423579 0.077747514113288063 0.19253675836685172 -1.3319001386595399 0.24344538791399659 -0.91084270396962275 1.0571843059993113 -0.13739427708185459 0.43023791651942694 1.0283976031408546;1.4231008563372898 -1.145122726275225 -0.22357050534142808 -0.2702299251889031 0.35002244103845026 -0.74827027531923429 -0.38937320217476606 0.52258031867610311 -0.30382897934619696 0.65917588570373009 -0.83242943574508932 -0.22374845023206902 0.47341909477111294;1.2304009686060755 0.63330012662001167 1.3387354105055018 1.5973136852169054 -0.27035726567007579 0.017210578384509179 0.79837913317483056 -0.40239981222930771 0.12310684392953339 -2.2081617840686034 -0.00094501689445272707 0.11251420978334045 0.38982667217648598];
  
  % Layer 2
  b2 = [-3.1106718353601153;-3.2059164151939101;2.5002901726858622;-1.9923726615726005;2.1364359421407251;-1.6827195505461061;1.098545441712337;-1.1816147033625186;-1.0093022590467904;0.27112133231568603;2.0548887407514784;-1.4546814407108106];
  LW2_1 = [0.87380989752203064 -0.07571617438820033 0.012834993925163823 1.5709002275530697 1.2293260012318283 -0.32216036031754947 0.044217135822808978 -1.7587427140417837 0.23750317258047629 0.0076117120458679896 -0.49841066733960765 0.47074095882828715;1.3505531779718143 -0.10521081641108335 0.68687141468354962 0.33032485274181173 -1.5703135981265159 0.39832033209868878 -0.095813286593481317 -3.8665119257349523 0.23178179227305995 -1.273360645711197 -1.7167814898653064 -0.67650963107059814;-1.742885195258145 -1.1929003026988265 0.85228751487965182 0.6738779479163558 0.52629594724897588 -0.29176970564435578 -0.0077860346712333491 5.310434711507118 0.52939260556638423 2.289919818187923 -0.22428149166098252 -0.94241969212206445;0.98327371174679079 0.52552833750695227 -0.32525045994620072 -0.6319865106731094 -1.6163612852611466 0.11822143406489932 -0.086001261086018008 -3.9174695333707281 0.30084151488778449 -1.0742336764589995 -1.6169530154780989 -1.1870015694240408;-1.6271232065669663 0.50386322499327474 1.6048059526250738 -0.027963112137171203 0.39282113799277274 0.41175573540834837 -0.19709676173327728 -1.3041776798826983 -0.00075436606382902434 -0.70326041867817446 -1.4256469065660362 -3.8944327826850351;0.52480325167022002 2.8604782029028266 0.35030822035558229 -0.97076761541207612 2.8219873609401822 3.9433988257130976 0.073335015819758875 -0.41051397976078796 2.8803495789629858 2.1747763813162546 0.85641548179209159 -0.95877140468088884;-0.12713469814150491 -0.52570230278043695 -0.15083490907148167 -0.78667786621953539 2.1318465154138 -4.9827688812082949 0.042785164405250126 0.2950979019867494 -1.5248678336339729 -5.4562283719235056 1.3897253702105956 0.6522836288009678;0.060938737704066138 -0.51596626345736551 0.010915643820085771 0.6418627541118801 0.47406044350340065 0.41444827117569949 -0.20285741222938253 -1.4468671387967196 -0.091900548907109025 0.71579359905001738 -0.088786883707573719 0.41480466310064673;-1.9347630789627766 0.50171767548356716 -0.0058424695535343636 -0.039405807659176145 -0.46322871544661331 -0.60803650749037863 0.12469384539108337 0.94770971134209392 0.29506621767072466 -0.61824749734096607 -0.2091450163477597 -0.31135217249623204;1.5159137929594995 5.3115601767824492 0.67953161994519928 4.2864924942691109 -0.65559756891178433 0.18246150309181175 -0.65913047913110612 3.2167343741457222 0.136751464900735 2.8800789737750394 -4.2414187465801065 -0.80022298405427916;-1.2248478153779834 -2.1252566177765781 -0.46405383199073602 -4.7292443892627007 -1.6462718738093933 -0.96126385491288269 -0.037023650646317297 2.2195426252227737 0.77152861420167018 -0.87672955386170925 0.66962490211288683 -0.16622805721347256;-0.76518604289477343 2.6422353887180297 -2.0048557760304075 -0.75679406683705686 -2.4948871228115244 -2.4176962395234076 1.7183871781143782 -1.9321676198194915 -2.7962281573159875 -0.68335214913650699 0.71238391345827035 1.7208023593995294];
  
  % Layer 3
  b3 = -0.55969148287673787;
  LW3_2 = [-0.78899747864332348 1.1478771045947413 -0.2191387556809988 -0.45290341966315995 -0.55762935172000028 0.14855588214676962 0.66033451906713581 1.1462980921826347 1.4428003125738251 0.48531941928535122 -0.20869200012157227 -0.13175211987637217];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.7058823529412;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
