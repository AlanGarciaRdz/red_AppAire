function [Y,Xf,Af] = O3lomadorada6(X,~,~)
%O3LOMADORADA6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:40.
% 
% [Y] = O3lomadorada6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;17.6991150442478];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [3.1255748641742911;2.1854371643670856;-1.7705456173925074;-4.5572435625420695;2.0982847356953758;0.34734974945593716;-0.094708672392577478;0.76222388864211443;-0.0037783192494300101;-0.081202552824136215;-1.8106654147368531;1.7934829414241729;-0.90890721748121994;2.2731037471344844;-1.2820534778175972];
  IW1_1 = [-0.54328697562252459 2.2651456817410147 0.94032833390394066 0.94377733422289145 -0.29568730776333174 -1.1303692052077476 -0.95406509879380175;-1.6872112333880669 -0.38247838658456801 0.60293991838103611 0.30113249631543126 -1.6072407334777543 1.0738170433919891 2.0425287768317566;0.56563003102963072 -1.9130445883785276 -1.657490560924479 1.5850723315277682 0.87301793153440321 -0.0040522464286407017 -1.0344986672802177;0.33056849898437551 -0.82728233454370037 1.3197680917418368 0.13043377263496689 0.7406719873651143 0.34108179810508277 -5.2790997995565014;-0.35507681162604676 -0.083858937035114753 0.44439605923109204 2.0045165698101761 0.093056984841248372 -0.20408623467382292 -0.79146409511864968;-2.2304006688548506 2.4652465491648821 -0.27792846714761293 0.81654594617223664 -2.2918978090211701 -0.45259758005250883 -0.020753897390185086;-2.5448774998882886 -0.60841105736756362 -0.80086453383694878 0.10766313123246327 -1.1285750640265488 0.7911766102243295 -0.17540879567787496;1.6079876586193032 0.27929922791883721 1.2979413655303769 -0.75301479103628954 1.6779638997755579 -0.48579177493545755 -1.3800135967930587;-1.9743135429531493 0.092144464621458866 1.4377360145749096 -0.78258706867309313 0.50385118472883506 -0.21561086288486836 0.8145321434889492;0.46625085068432653 1.0385573765445726 1.4766767195948822 -0.40785746650974769 0.29140829260039569 0.22811994748830933 1.6034220562580326;-1.6793125891872374 2.752223640376628 -0.24400793730693049 -0.57681381485657746 -0.34308655295066648 -0.29528847056602159 -1.5109594677932026;0.56214057701657305 2.0770767469202682 -0.12747000283303103 -0.03933199918118211 1.3733223037808526 -0.32305219325549517 -1.5335501340944226;0.18608760477357195 0.32986504117001914 -1.5623210228719677 0.70412661590273606 -1.1496039219004548 0.16207331709835127 1.9731361980909368;0.80387367960705736 -1.2643231685883287 -1.7377911640502006 -0.41728144300821607 1.4776456861401093 -0.1090005789713029 0.33594191023523401;0.52545736186701575 0.43383123691980408 0.51206328561758019 -0.42778326844378028 0.50638350764936191 -0.34396464329969512 -1.2125225727633302];
  
  % Layer 2
  b2 = [1.0908158253530627;1.641298656749905;1.9158569911215948;1.7320185955322567;0.24990239711678541;1.273945403964692;-0.48604500098881176;-0.66900256191501817;0.80287752352257169;0.14677949334293827;-0.76094663264671658;-1.3571404322304095;-1.5463590341057705;-1.3482393694069306;1.0026813184106294];
  LW2_1 = [-1.3416297014103318 -1.2428529162986441 -0.43225499678464496 2.1421851219657588 -1.4996774383224041 -0.96950999364923396 1.3304633397777852 -1.1594773212697458 -2.9744805309965727 -0.72348204864690624 0.20389461576065759 1.8323412485727284 -0.014255074444172899 -1.5431385632402488 -0.42425102085592259;0.015406454183229112 0.0423067202374122 0.45419422939910087 -0.12037481443546637 0.769106757961184 0.19425110051581107 0.44399313569634741 0.89167554319164555 0.9284950951303963 -0.23657744637752473 -0.072063740200247181 -0.75250400527308214 0.035194910503968134 -0.29022289470133389 -0.49906472411728586;-0.069916316508746176 -0.82847404576545236 0.86976380028631173 -0.57259027655915551 -1.1913563099581821 0.65432618966648393 -0.56338723536728386 0.035538558988431827 1.0952595582967701 0.33483438641331575 -0.9549889546064585 0.42427322532253209 -0.83880098126018432 0.44598150685215571 -0.064733846588903077;0.56633212044628845 -1.839778598890599 -0.95209470036256616 -0.60891010126370149 -1.3766013377898028 -0.82649359128248079 1.1585495746031496 -1.2608654943601816 0.54833549468706155 -0.87607479378084852 0.64511878031741532 0.043262591293082027 0.11125422222864295 0.095350449599754472 -1.0049595772517452;-0.36301238079202242 -0.9421619485451822 0.29837047745488032 0.77856553553024488 -0.27091007330578615 1.084648340953875 -0.41565110001376354 -0.65266272736541009 -0.9518255926239334 0.013367888992140989 0.42339847128683422 0.15903957512308189 -0.31661748007896867 -0.53901279143362846 -0.70880536413278572;0.37478922443171536 -0.61164382148993068 -0.54130558015116104 0.50830479861570643 -0.28143924775316737 -0.71489490121218835 -0.59409835331155691 -0.32003369929604941 0.04526910443966204 -0.96619648589946361 0.97067358604000487 -0.47920510760548374 0.79228725155099422 -0.57611064344428753 0.66860296598214852;-1.0798009535004296 0.59873261239449893 0.27009048060850638 -0.018387416653184364 1.2522565171048969 -1.1734227497576775 -0.38271770405348754 -0.51307712613149858 -0.95455317665415773 -0.45569458878257696 0.39393758602596407 0.57107665481700165 0.082929340996338224 -0.56727879251619762 -0.22293370037117671;-0.017514769414104143 0.24890387476794229 0.1340778459304649 -0.21361502030826321 0.39426140764365947 -0.55203059053270154 -0.64563200425968392 0.34428209832576745 -0.78120403344647549 0.055701903498893354 -0.41032488553414959 -0.0021713403227238606 0.80388556724297866 -0.77725702706658106 0.63380703064624277;0.22869257136582505 0.58882022083351215 -0.52336207112276034 0.17983486254968864 -0.50283094769170977 -0.61334038327608054 0.10062356940739134 -0.86676746559082296 0.91625120270292637 -0.098600304181521992 0.77338161148025764 -0.11188270424164234 -1.1138794874033373 1.2513439550176424 -0.071154366361502505;0.27627488773240444 -0.92707698077387923 -0.64506801579894291 0.31080155108685248 -0.052874890531360852 -0.0067268856291605979 0.90633658229404057 -1.1101556094204792 2.1432281133272735 -0.90102314055971311 0.10627721795320563 0.71453584201483922 -0.544427497212988 -0.54292720090829039 -1.0037187031497001;-0.64482273907698495 0.76977450003704717 -0.078550614897301752 0.4438512755837295 -0.7848748071759335 0.80461090584475237 1.0133970892388162 -0.31438931911721324 -0.30771722877154573 0.16268286174677468 0.38612231119244411 0.13152711273309911 1.0687379266639776 -0.40358319344256477 0.66147583545303057;-0.96719593484427391 -1.1375423275963099 -1.9412751444910703 -0.15931582572968492 0.59257703288214747 0.026832058091170171 -0.34844697171085232 0.37042416475386458 -1.0737709906671018 0.087361033109653652 -1.7246731916203895 2.0635071646529544 0.71632650538124887 -0.17742273871940079 -1.7775542036044147;0.10420173705140906 -0.0024351473699272801 -0.21347038848406863 -0.18265971568048242 0.47956176274932588 -0.71062479629095865 0.5471269487848337 -0.50088640856655486 1.1466664994436946 -0.30911867210053562 -0.46942073831662778 0.28712983019377758 -0.35019691063940417 0.6186397162192262 -0.079068459415350956;-0.26018587336616161 -0.079863701566605896 -0.16906409666635902 -0.21199568864257426 -1.8384590536067205 1.011100497218137 -0.48638163376076043 -0.92505957162917318 0.24064536652981336 0.16811370817241211 -0.32858337371864471 1.0057708695296903 0.19679412598992466 0.3911926826005046 1.1927567886461063;-0.20571460764645011 -0.43318056476764732 -0.94399240174633059 -0.2347064150515997 0.075929702538692384 -0.16480218084626319 -1.1202357122525302 0.3123766536919082 -0.7188810292593909 0.075741841454515624 -0.9349717509980694 1.153373246484694 0.16185363193897148 -0.53660958608650655 0.019835272922819079];
  
  % Layer 3
  b3 = -0.61978503343954816;
  LW3_2 = [-0.41628664950791916 -2.0434609028144131 0.86867999095460746 -0.50618175342563354 -1.3088842639691873 0.60294705846861063 1.5514704569810054 -2.1958286295920577 -1.3761143918316772 1.2336233509546557 -0.58870982748907552 1.2549297951889271 -1.3661101495243306 -0.50277672759808267 -1.4546476760139553];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 17.6991150442478;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
