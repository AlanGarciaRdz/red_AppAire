function [Y,Xf,Af] = PM10SantaFe19(X,~,~)
%PM10SANTAFE19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:36.
% 
% [Y] = PM10SantaFe19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;0.00341273633199099;0.00632111251580278];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.6692268126301063;-4.1226270159972502;-2.8785687180029522;-2.4542907614648617;-1.7850633128123379;-0.39902017775049481;0.44780803819178272;-1.4715638818782748;-0.27439641667559556;0.54542645752913999;0.48064984855837745;-0.40428362725169387;2.179301419799712;-1.2142028058692922];
IW1_1 = [0.10713947135737723 -0.48465718068199631 -0.53414869879391103 1.6968261392479396 -1.2209175159641947 0.11833092496540434;1.5226448799769556 0.27983265976123312 -0.65738473637610506 -0.12446921465720923 -0.077295993424875559 -4.4766499121552936;-1.6205437268257752 1.1249186309562142 -0.43182416579419258 0.83582782140251266 -0.9549643305365052 -0.15442971931580299;0.96979020479658928 0.97617825567638039 4.1516339138084541 -2.4859213528875586 -3.469666574187809 -0.25271299016574139;3.5134668231374291 1.0494542010488404 -0.94879499872592676 0.070941882537983197 0.97763963426898381 -2.8072570601843734;-0.95234708043083327 0.25999715422260966 0.71217657016394109 -1.5094611151203208 0.92177754803943501 0.25011420308843407;-1.0372719081641386 0.95080160938329239 -1.6761136737256164 1.7990165447155304 -0.087709036611945707 -0.036727019877297179;0.5127948018088776 1.1398974426716511 2.8728430136270608 -2.4917961269610553 -1.1488114810085328 -0.49566951260503272;0.10808636528899772 0.76736754225229431 0.14385828446410126 0.064628019329364919 -0.6570480915290412 -0.14079315720811347;0.5799921004211992 -1.2027070476799173 -0.13948836231243442 -0.23132859414112089 0.99200828370881822 -0.19131389879218982;0.22255433542662803 -1.897617604299197 -0.11696794344839416 1.0459216645056015 -0.78115927009014641 -0.21703582338250402;1.7318226358764668 1.3924467370075404 -1.3080583206871474 -0.39327542451257097 -3.3162263539957388 0.23544664324743889;-1.0900739513233653 -2.3366821058874465 1.0892894980676013 -1.1521458126046011 1.2492852148746041 0.086237795494757352;-0.60161702731918942 -1.6475652700219829 -0.23192136650159695 -0.44370153584541039 -0.42115769458806074 -0.29670782604047968];

% Layer 2
b2 = [2.8262734185230531;0.96182771068084583;0.73497534769252815;-2.3270022069622938;0.38077906235834613;0.73763802597118555;0.23044423545881337;-0.067001227535643942;-1.9153151907170873;-1.6767496085154496;1.7079698034831512;1.8667929212764629;-0.64191492990172261;-2.9609505572706198];
LW2_1 = [-0.049153036102458275 0.41919875003616336 1.1569369330394672 1.0924447745421202 1.1546802779802667 0.57227649201427055 -0.67844745381748373 -0.40869292727669027 1.9556053554539328 -1.6069303257170242 0.11356579514201247 0.1851402731457733 1.0631004058463844 0.27473489115449468;0.49028828127549562 -0.15910523556030193 -1.5866134162514525 1.3656752671764767 3.1785529591439761 1.0299111671543124 0.69644965813691895 -1.9826011508603558 2.3714189802824901 0.28825512986684121 3.3977397237756297 -0.10776655340202157 0.51109647716520756 -3.0202874863358109;-1.819693934110914 -3.7384844705443814 -0.75244577551720604 -0.2307148950040081 0.042599768368953239 2.1917520859426451 3.8705564377923962 0.41139300256428252 -0.24007088276490024 -2.7738899777576385 1.6678685845222747 -3.1012605749479034 2.2814920058601151 -0.036031218923160219;2.2659574986952 -0.32767845005573931 0.51125340604150371 1.337592024556701 -2.2361609358104393 3.425851523126243 1.0254974411457412 -1.6760110883439234 1.6243645299167908 3.2776098494571602 -2.5784138205988603 1.1321914095020968 -0.95782175548181669 1.9560301062010828;0.16376133331136561 -0.50303271103672798 -1.5714833596476179 1.0859470068225345 2.3820586302847806 0.7079292192103388 1.1714264003505397 -0.89862439632134872 -0.058913454543294358 -0.23764480911597827 3.2442297346189584 0.12958335279854322 -0.30420455084146636 -2.4698770157856123;1.7594787296412517 -0.56972366322805945 0.27711132807274302 0.97033760882911935 1.0792611258920743 0.54457600350221347 0.73347409490628035 0.6977295832869076 2.2064052576130866 0.31185399888809207 -2.4146017364639185 -0.26013509051324751 1.7208642631381625 2.3740731009914726;-0.086488479715289432 0.9547025710542516 -0.64551732555828345 -0.28243025672616401 0.24978892190679727 -0.41092536812237945 -0.82909711722254475 -0.84201926383385828 0.43600773606660664 -1.2787600887280235 -0.23948643340966305 -0.4448948851524589 0.22876988402843193 0.50663479872561268;-0.92844308554732691 1.1106024883972758 -0.75557397431262108 -0.33697879420293836 0.53403186959893223 -0.27628329273192592 0.013035337332093846 -1.1550013624706252 -2.5871606947933965 -1.7264211716856281 2.8576353424559837 -0.58261991212106956 -0.75921315211096374 -1.7699597470033273;0.3553401017192378 -0.047207895681897552 1.6957174968842232 -1.653654927092973 -0.72867954168586779 1.7521234394485936 2.3885434320933743 4.408623773804087 -0.81583895178165444 1.4889562700220673 1.7080717742234013 0.96489390312806211 1.9620638187421238 -0.53309786838611506;0.57235192223557985 -0.28374859589796469 0.51370586858886791 0.88816349767490499 0.50477704972421322 0.42680420827456644 2.8226600644122541 1.3174254158850485 1.3301498584333959 2.0298063094519634 -0.74811435310611796 -0.30265177353250622 1.5187549062780257 -1.4074124253351634;-0.75876681927943956 -0.28629427549380049 1.5711743108748593 -0.66957771092161078 -0.56575078714740756 -0.62433213958099187 0.45375980558467477 1.5491732392802613 -3.7796739340275876 -0.19263651626606981 1.3456773881558042 0.70218481246331355 -0.96875353227095196 1.2875397649866465;0.33474217563463204 0.41006760959805177 0.22004667800824668 -0.3574387324738732 -0.10232337116889482 -0.44926429135153162 0.2074187637714649 0.42092251971202438 -1.0327360429968822 -0.22357102710692531 -0.62664927868592346 -0.2437463060040026 0.1147872971197658 0.6673962841554496;-0.40879825108728368 0.28392606814736104 1.68133009928361 -1.3196947753069317 -2.83348581036562 -1.1460529481244637 -0.91407923089031717 1.6758863937462161 -1.5750745456486881 -0.37191247385917336 -3.2431580712297663 -0.1041494535795251 -0.081156996920386831 2.7279759086946607;-3.0450881116491901 -0.59248779349483072 0.058491269048475583 -0.2132262364605691 0.4482278565642252 -0.88827279540222803 -2.5544668575002842 -1.9378010460761204 -0.20479143686412665 -3.6038579355835427 4.1062835880832669 -1.4018854317227349 -1.9022018111308698 -1.7720676600272889];

% Layer 3
b3 = -2.0547346202586509;
LW3_2 = [0.23203655147556976 -1.8725724029294173 -0.078360005114921624 -0.28640153904353022 -1.9807310933078519 0.3358964511303375 -0.78414132016233362 0.27798449826253524 -0.2354614141280402 -0.34159416737078502 -0.25559687819054311 1.5065562448323422 -3.7169500020782578 0.24812020824951578];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
