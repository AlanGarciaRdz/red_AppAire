function [Y,Xf,Af] = SOXTlaquepaque22(X,~,~)
%SOXTLAQUEPAQUE22 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:30:02.
% 
% [Y] = SOXTlaquepaque22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;3.03490136570561;14.7058823529412;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;35.0877192982456;117.647058823529;27.7777777777778;5.12820512820513];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.8619849562901274;1.232083899376637;1.4202256816605043;-1.2540638458388464;-1.0797087771243803;-0.53441510150433358;0.38174036475863171;1.7585381029360443;0.4222964271272881;-0.67605930363992339;-0.65183755247731234;1.7453484824082439;-0.74423353379460055;1.5386583371205329;-1.9026589172258885];
IW1_1 = [-0.015282619430202701 -0.027803205993249078 -0.71400699927418843 -0.21924038707949239 -0.7941734199243764 0.3567231484554157 -0.52377871795988151 -0.68876101542635859 -0.036326705420808056 -0.16694884526180617 0.029473148887948879 0.51952521321306622 -0.57869423521371977 -0.23563663874761803 0.34432461999399455;-0.84767617208273049 1.9695056315088681 -0.29331582486663754 0.57313993257092899 0.32150457934687116 -1.1719798920538125 0.66880851724358092 -0.42696711821958322 -0.26696011050066049 -0.36649752051101347 -0.2166572732699564 0.89906984147021096 0.17411386723930231 0.28094716836845007 0.98749418930797694;-0.7172957361730623 0.63161252062573081 -0.50424751379484622 0.16664384157347911 -0.15228127431788976 -0.17721381303718547 0.29162898302858731 -0.24010449444609369 -0.39965804195452814 0.41860883100682283 0.53250820719513903 -0.056415986442481816 0.18846100266830079 0.18306731144097421 0.072652331189619834;0.040817463439975318 -0.78545842044302983 -0.19272735992784126 0.027354741593555536 0.097164811755871591 -0.21940907172444163 0.11372685018497877 0.24630476588645911 0.61637322909939485 1.4310324082183359 0.019370075744810318 0.24415443509127005 0.16606615039100803 0.077811979678061083 0.029549437369372052;2.4113892021503256 -0.15116434360044662 -1.6269303197976954 1.400510356045654 0.48973647975099438 -0.4063608137530873 0.52867900413513813 0.50738025540814369 -0.27377348663801093 0.22857542509390644 -0.0021043224340410935 -0.97396128870882825 -1.1157464744469385 0.1825328997198119 0.058557030058892803;0.42220312299980889 0.65861850652275311 0.58627370143902124 0.4098766223152332 0.08794123109238898 -0.43193810982844599 -0.11082963529998024 -0.13377433265914032 0.19979777644224461 0.76571073270894674 0.37565636047072642 0.58494289228127871 -0.16057515825791968 0.68955563631468098 0.48050406773468063;0.35715081817510053 -0.59660519445354687 -0.38605585882439675 1.1418702913347898 0.5728887863396348 -0.026311425363411231 0.48196275323917831 -1.1023080339081417 1.2796564526169889 -0.65965922004811328 -0.72911480339088419 0.6023477551931401 0.33373165321749088 -0.59574548514795711 -0.51262884570484135;0.36983496634981095 -0.51275033281415272 1.6244782713544152 -1.0587801140915454 0.31786920321148243 0.0052974422509653313 0.006870525556380307 0.34177905278149356 -0.26912937034077522 -0.22488320484119348 0.36498183919808747 0.10676922819420945 0.17348776852184708 -0.65071170748493268 0.85935723100568917;0.87821967642573651 0.10784232138518673 0.42291507032205733 0.096129051671832971 -0.12517036035448609 -0.56267747883538533 -0.23745407635829688 0.012186195010696173 -0.5793083892474068 0.63838302748211373 0.2046825679537865 -0.93179984646741754 0.021875431577495941 -0.30878355811193697 -0.33819445460906272;-2.3543954976879107 -0.5374381671043218 1.0533371784375849 -0.39914213339483678 0.37941871021576906 -0.77644095861869855 -0.23397929561211592 -0.11836982015949325 -0.5108277550359327 0.031263420688728415 0.14036921685664938 -0.41622761802385072 -0.51733135525555562 1.3494476634656687 -0.92514435191201594;-0.88910916001513329 -1.7139207916514236 -0.19348928036464963 -1.0173840055066139 0.55470014930022682 1.618733615806095 -0.02395593017161509 0.26419163445663696 -0.12475076213873436 -0.86992698738777741 -0.26265366261301565 -0.37466698176130897 -0.7222302357702538 -0.59179799505269937 -0.55942139818022896;0.54725732788719306 -0.76220925172835308 -0.46106392652212569 0.74415285854435764 -0.61307558492712522 0.4280031326522647 -0.80856600057310524 -0.38887972337046656 -0.24829990884989345 -0.55916491706241134 0.11360232496789154 0.096964431618972391 -0.013580031945484593 0.3043196077293952 0.17847594186764798;0.33522859400209881 0.58221212382830145 -0.58702610604582928 0.91600032934168552 0.17158013322970969 -0.24216078420802301 0.55462288307653396 -0.95268248147885293 -1.444838694751919 -0.078911646381549141 0.29901845090989504 0.076919724664428049 -0.58105581390000816 -0.4466559377995914 1.7038566646306905;0.52273851331886934 -0.28323635864429914 -0.24886571973258279 0.023240059031010712 0.030837056062547864 0.33323593433996096 0.37101457749768707 -0.73697835990034166 -0.16758224191384982 -0.56631553036851912 0.16882250965925971 -0.2750140288171713 -0.71646902440007232 -0.53631032264178791 0.52238732831277557;0.67946486186268429 -0.1282797432178909 0.48838767911244618 -0.37302041218127618 0.1566943875436824 0.23153530091469726 0.10006651132158348 -0.027439569570938342 -0.22788569789496599 -0.10340904529622695 0.18908915283399425 -2.4116674289536157 0.15713650057439763 -0.70182053671619626 0.72796292538151364];

% Layer 2
b2 = [2.372581203966261;-1.4615343354462813;1.2874042270109152;-1.4397796377367034;1.0857518027665976;0.62149247100146332;-0.13577803308145608;-0.0079314308912950843;-0.18769166736354242;0.61806812809615019;-0.79160824326930224;1.1203766967416737;-1.0431197448677101;-1.2560465432724579;1.5571092067877703];
LW2_1 = [0.57588620310957717 -1.2381476717770274 0.498199567872046 -0.78959501096622264 -1.6637897324201569 0.20029751419208974 -0.25030904973941032 -0.22479405876396694 1.4771227434215415 0.10214408087963567 1.4366680472484339 -0.46861390543887615 0.6640573712266139 0.60991063692294301 0.48014742177022252;0.082740456403344306 0.1504606448345196 -0.50911654761095637 0.74135229199861741 -0.51847042621125417 0.14834641853104205 -0.42554146334056742 -0.23503756046318763 0.13010328831093571 0.088087285641968605 -0.48922781576797691 -0.83121929850250265 0.58100666828749592 -0.52412853416869631 0.28567190544692861;-0.030456377699489851 0.29937928718045909 0.6865219301825275 -0.047258635018153423 0.53968888715863106 -0.33913400169485153 0.48056313458547045 0.46919656479469585 0.21875866390774015 0.32263085991417151 -0.62310218632228276 0.50102926697740724 0.27728976117371246 0.53207354940582097 0.50568089584230913;-0.08592773385465434 0.87497379358015948 -0.44921943664910652 0.7027873629900121 1.18756843385129 0.65754821713331402 -1.7219180784876238 -2.5923221532076046 -0.25612294724623985 -1.7365805556821345 2.339583440050816 0.13633951090630594 -1.1764720464866958 -0.96646042391093756 -1.33267743458758;0.3335935133136182 0.091336106537909745 0.03510533661664475 0.41495420877322864 -0.46506545493339801 -0.29980796077018601 0.45717658716256709 0.025246306337888172 -0.26395687865069606 0.56883237418074239 -0.6447181408910363 1.0233873536107949 0.37269256872187084 0.49824386313579988 0.94214321860532613;0.0057658999239930467 0.38596854278067078 0.76058285214239785 0.54027120112219307 0.32183656130849103 -0.43889720258416498 -0.0026971225206758025 0.36232069330816608 -0.67850419295691533 -0.71958297738060972 0.18668854501232707 0.30330917900282867 0.4877247576051757 -0.4920285540455035 -2.0216067523462131;0.38499716115181881 0.24047398230842515 0.47204097332838335 -0.37760364614492958 0.60508770265847978 -0.34750182959023757 -0.12104980701884659 -0.05933714274941658 0.47321845862623096 -0.70372025510734171 -0.068007363214957858 0.62399115334809807 -0.83824875073782457 0.50363294531221758 0.72862643634015989;0.59348669856366487 0.38750538344283519 -0.33392612431901025 0.25605840935089225 0.56287322042058663 0.12439677783209281 -0.17042368352685164 -0.93185235314411985 -0.077709020295907941 -1.1454069829412077 0.20408644404355342 0.66886550631760788 -0.016236491892488391 0.21761762818835984 1.0234168931582193;-0.28526020470892144 -0.77165451064850576 -0.63373530303289971 -0.22949954156844901 -0.94196294662379376 -0.33948638026742417 -0.14450059292835232 -0.63749714989422246 -0.76318885215151455 0.17000002404048911 0.54196417360182747 -0.56651288801134081 0.62974738038369737 -0.32465246931746305 0.59610145985404051;0.15594035943193515 -0.38036843283797961 0.84682645036707993 -0.084227994326288858 -0.26575099733159674 0.22786892638040093 0.13748233944461385 0.98637657102300424 0.13856597110024946 -0.72385608819426372 -0.6847041589435463 1.180165618433433 -0.79857177731525741 0.026788323013384057 -0.37165437468550205;-0.15893631621714932 -0.2966029475874416 0.23829294863524161 0.28602174365317262 0.54611611255921144 0.46029712546065571 -0.62717368550233743 0.073313362713624056 0.68696158573563715 -0.015530662502833217 -0.081866520272903157 -0.65778971263073016 -0.079371752606261545 -0.75298633764334932 -0.39251821226164196;0.43461872807336471 0.53204033386961436 -0.40221769888391684 -0.2361759867967804 -0.52675694879651602 -0.64603706647742176 0.49041192159156421 -0.2360141708924457 0.81388965291124959 -0.42329374183443169 0.34832455708607818 -0.22468209988263643 -0.51361386484937299 0.52832703820190963 0.20177056181816883;-0.042725622362870343 -0.093838935096982407 -0.67513599585754103 -0.48047378983739164 0.16541509484497277 0.57979811133605663 -0.06851787748738998 0.49294575092040377 0.71675101781913952 0.154712480043668 0.010450379460844476 -0.40299796582354824 -0.59091694695355412 0.36015434158406778 0.99314906818302229;0.22563687240899416 -0.416652332501253 0.41097023391282578 -0.49371107123010421 -0.088691097774651451 -0.52876649231563622 -0.16085700237890693 0.45394057698686752 0.54738688041571648 -0.52352684446598174 -0.13746593555497172 -0.38564721499604943 -0.0043594146167336839 -0.0011363922432242081 -0.28893288575219273;0.62811839817824366 -0.46411857771446463 0.34942280613544047 0.42017767363808556 0.12965978427522565 0.77357341597159102 -0.47440396127140189 0.34425318023293072 -0.59418497054445862 0.18434351803470209 0.11448791709250727 -0.47985483743913715 0.76355647549042216 -0.047460402548354361 0.62533443578673498];

% Layer 3
b3 = 0.76490706211104753;
LW3_2 = [-1.3014024834989217 -0.98578228100060861 0.085186874012795247 1.8441712250246942 1.0467077468365349 0.38579111211557943 0.70052430311516856 -0.1575149403388871 0.40587999953991322 -0.51637786497533666 0.060274902953958667 -0.40975489287314565 0.36040456167546531 0.20581159572647859 -0.01573950876405155];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
