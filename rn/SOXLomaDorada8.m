function [Y,Xf,Af] = SOXLomaDorada8(X,~,~)
%SOXLOMADORADA8 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:32.
% 
% [Y] = SOXLomaDorada8(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.60558525125820695;-1.9928081070292134;1.7651920976230471;1.510810738549945;0.49413399920274625;-1.6684713546540642;2.1260587741406107;-3.2092078811375053;0.56350440285587478;-5.7717745722425118;-0.99726768925424303;-0.7324553402914048;2.6400090685843844;2.284001032548193];
IW1_1 = [-1.8238286779975812 -0.23013162353409591 1.0476345345141218 -0.095869103314967813 -0.70319899329262103 3.7532407609686262 0.49203378565194406 2.5242382755552768 -0.046871833539045102 -0.10859285763896838 0.58903580768800679;1.2082939856233326 2.1365576176359751 1.7305262141506537 1.3640648005468692 -0.52154796610950449 1.5054763226411583 0.35496409798537731 0.87863631036459477 -0.94888689047454011 -0.61071276972738109 -0.658510613407156;-0.33924512965034609 -0.50493616129233676 -0.86181885980110473 -0.89122715386584661 -0.18093718389308672 1.0054260727923254 -0.38754500747651904 1.6711458333344662 0.21773249244787615 0.63190584638231473 -0.81783720399641335;-4.7643489426516892 2.0432286624159262 1.2218684098384269 1.088892530007199 0.50247838543263046 2.9603159678328668 -2.3138603240089255 -1.0007054826379636 0.22055413389853606 -2.2750821076243466 -0.46858763560175698;-8.7450276145429662 -3.0220274715451145 -2.0555378994109366 -2.3692335575314183 -0.78543939490167403 1.5566811759918917 1.7774014399212661 -4.8816220932154692 2.2934848664886798 -2.4956310461024254 -0.96844144224741113;0.68207683978368472 -0.69364659670881601 -1.7125023587633352 0.15122182803450279 -1.172879632333752 -0.75853673750702977 0.48332178567337092 -0.85673895707123848 0.14307763012185859 -0.096731780790554195 1.049930835404399;5.8321224663252442 -4.7144489552521849 -3.3291968400371177 3.2717589839866288 0.58136918586457786 0.76263690068418843 2.7349135322323339 -0.054659840931544482 0.69830932086625763 1.4401138656438601 3.327154203446292;6.5560601332950439 3.2124966108535422 2.5896012337567074 2.5533005403274243 -2.6175742618329032 2.1534927781338893 -0.13374181811947361 -2.5054684366680924 -0.9729328120370101 -2.4993334673706507 -0.039753818411343081;3.1058936781695081 0.14753290211577291 0.063109333507812032 0.32441290657320049 0.47655378858227354 0.28390387687552576 -0.69854840361618786 0.22857547913583739 -0.65170415667131831 -0.75568895276277204 -1.4465968121243025;-1.4185490890990355 0.12869574213898399 0.13815345931787817 -0.66829117020804407 0.56124003602630279 0.3829897425394167 -0.14899852300408578 0.62350675423618607 -1.208983913182518 -4.4820764716056658 0.099762242071244095;-3.2238920315660784 0.023222292731149299 0.27716246268189892 -0.63183602046681964 -0.77233095415263309 0.56149823715643121 0.98300999319399496 1.1077764437528388 0.73921275902367434 1.7965991981516085 0.14988463617648115;-0.93649295379221342 -3.2764638972155722 -2.3740283802303086 1.2646409131144776 1.2691147561417988 2.0884754897414828 -0.34820661837177752 -0.67010296340182585 -0.20637118174832472 1.8741317002857178 -0.55787886209809778;3.6620282303725444 0.11835800335418202 -0.37608288528694378 0.14129265942284147 -0.055640592658612376 -0.31544170099865215 -0.38831776152441305 -0.22294479078506987 -0.010081460059352669 0.30241458438384772 -0.28413483142229262;0.37963821228408495 0.349054674121558 1.2958821322014624 -0.20525973804650552 0.4337813191077442 -0.7451342772346492 0.59048576664310093 0.14815610912373578 -0.1480817982600208 0.24819760168725197 0.27677357808635161];

% Layer 2
b2 = [1.5886048046611474;2.3664843755489757;-1.7132853962867631;-0.54705552062714491;-0.40261592362431908;0.24509119361603468;0.069276026394103588;-1.3775096846500643;0.46280712102358335;-0.30375574281509349;1.5944992192188754;1.0278823301741904;-0.75231451105983238;1.3995228907928805];
LW2_1 = [0.2913266876808942 -0.44584936021637422 -0.80929571021900737 -0.56325375448526671 -0.41775044680103229 -0.35476647281613677 0.11639524193434057 -1.3789196428600594 -0.19315171622566246 -0.42594446202908942 0.45537332634206579 0.21458257221345522 0.71147363552088227 -0.042548329935302186;0.31606379135610757 0.038571236843432728 0.41666220119474362 0.053124004705806312 0.8656494732618194 0.49687511210591756 0.71368128392516972 -1.1522060517826578 0.43272139383205954 0.91936907434321791 0.12382533029452379 0.29918799610964547 0.83538145988787993 0.51527061896855342;-0.38357113598070791 0.1026868203912783 -0.41079657972310285 -0.77903361539473448 -1.0575747980168111 -0.92266899782232892 -0.47294908424460019 -0.91295551662483643 1.1179986913594877 -0.39971001602488604 0.21804056414315037 -0.36754106553075622 -0.067329091737270877 -1.283722983575819;-0.0051879525318046689 0.82780328558694816 0.28042155404021063 -0.085484887912209886 1.7540210419222773 0.8119004878462307 -0.80862140813189332 -0.05151354685281602 1.3494822595819236 -0.83657278783540301 0.86997370984331257 0.30812858969003337 -2.0535768460544794 0.45393056801110782;-0.10679049517188928 -0.14856160442046157 0.6636797438111911 -0.37563882516774805 -0.59275736124733835 -0.24376154270163281 0.53704515728136704 0.90512655909567563 0.16110789871284123 0.68921552982989776 0.91706813019263733 -0.13595355851775107 -0.21641308841478316 -0.2227865883468384;-0.041103779330301196 -0.56899424417315192 1.0907812193824329 0.50126035721440865 -0.92714615200264827 -0.12903279971385295 -0.58464995752330295 -1.7052427240697581 0.95867457698051672 -0.42137477236384158 0.8062521828083643 -0.38624319933823931 0.89442468938906239 -0.60972916999870608;0.45233976297283296 -0.48103324952984611 0.74515766603549471 0.28512310005826524 -0.20465377467867912 0.019342258140160704 -0.59273643273394039 1.1668874720661775 0.50788639134093028 -1.3490014368256305 0.6945298031882583 0.18935063195058766 -1.6227364089272776 0.4542243174312382;-0.51097557382817627 -0.48564498664470562 -1.3106222305207338 0.50449837557347388 -0.68710824658254988 -0.76330367214781725 -0.56888647213658639 1.1832810243935317 1.1078987457891278 -0.88864451424133195 0.23646453785762381 -0.69699234867543181 0.44073760348403301 -1.3728584007898421;0.88592184451976408 -0.37492380290668459 1.0444706835021331 0.25946717480565962 1.0220451974312637 0.57358077962391962 -0.42131523552993344 1.2267227713889839 -1.4207729859323686 1.0643958711420929 1.0501738382072998 0.39198984074311355 3.6582940267787212 1.0943884243079383;-0.27888841008681708 -0.067130613943715833 -0.075060841718085386 -0.26701724716003367 -0.64439654158340309 -0.095878076665637108 0.52360513896031835 -0.80743731776370264 -0.56845361307706888 1.1461901443727396 -0.59219666094405099 -0.19186406776580234 1.7476154172434901 -0.3302068614451098;0.29061727227035694 0.12857935319533992 1.1811904600712015 -0.195080438482436 0.89517918488775361 0.41020058050887492 0.72724446299948742 -0.1465908468588894 -0.69554524134108198 1.0251798388280389 0.44536672046812958 0.26463266847553879 1.4772326306594161 0.37695792447471776;1.1677318091901756 -0.39909796119378971 0.2732700764668588 0.31434301338139092 0.27545346031239371 0.2711904703576532 0.84905666068745145 1.1947023945830653 0.25637879548855724 -1.0416276260596642 0.040500509937071723 0.12031670966427772 0.22296932108456902 0.79102501726093011;-1.0587041314843666 0.17669034930612285 0.28640964466797342 -0.20812368960370908 -0.37473455488274099 -0.10100620028494067 -0.38865614069894933 -0.61269281495567263 -0.13957769673752882 1.0208607296612688 0.12285088973019757 -0.10054326277709062 -0.0089524902586588465 -0.63576777755326552;-0.12693521134129651 -0.43590874572271765 -0.79597810896402099 0.41763226450870505 -1.0494762593885913 -0.13611193042872083 0.35592123510176438 1.4809695440742818 -0.11937190186633986 0.7298179999426202 0.54238443911670819 -0.42538482177378428 -0.0007947066831375776 -0.15646506476250907];

% Layer 3
b3 = -0.89237179679070799;
LW3_2 = [0.49299379558759521 -2.0126444028005923 -0.51948428485825815 0.32072460318625601 -1.6295251936988462 -0.70528920760966096 0.89930379925512871 0.19798404064423769 -0.812751094620211 1.3096296588952807 1.5993396721770359 -1.0292796857547117 -1.1504091696208136 0.58908211796007148];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
