function [Y,Xf,Af] = SOXAtemajac16(X,~,~)
%SOXATEMAJAC16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:24.
% 
% [Y] = SOXAtemajac16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.8983977907363359;-0.90045673102666268;-0.49087568341137189;1.8834809106157566;-0.84532338047729505;1.933390450362338;-0.78529750682299848;1.7946755541410664;-1.809976240481227;-3.3743846933564314;-0.038152336608416167;1.6576819171447377;2.120473114466332;2.7668582675725606];
IW1_1 = [1.1454763211968852 -0.51219366477221018 0.031967713688190846 0.42245631560537722 0.10742969463571075 0.078796604534371928 -0.43088445869844827 -0.056130769287210336 -0.37379517126971096 -0.0092028625705583185 -0.31661800819644326 -0.49285086700774478;0.4379109136980851 0.73216541555381687 0.58206903617106831 0.13031194525844905 -0.8550491373056579 0.2105734435754065 -0.31436620961855527 -0.57233393488945117 -0.65768766926987254 -0.39450184933465338 -0.19174978036591833 -0.14184428670558447;0.5781192833529506 0.051021927308178963 -0.32309835077215798 -0.10025760897963815 0.61514696082759002 0.24268526920896455 0.39374937061719045 0.80574279252101799 -1.0530267154886479 0.20106851771005677 0.6133818778536686 -0.012008759235581937;-1.5727163011199712 1.128999819330728 0.73173559281859157 2.4993378275970812 -1.4826687043901146 -1.2161106227967446 -0.059233626957015478 -0.2398919338745856 2.226407562943308 -0.012821290133630635 -1.654785124552711 1.0345585218924238;0.53434949579308366 -1.0067430570799525 -0.82580195360911302 -0.56073024834274243 0.21059553900274977 -0.010681024269913506 -0.8823695437964435 0.55545124435058812 1.1542500427297544 0.54571739745913472 -0.11342814114017492 -0.42213833424373409;3.5211672043413107 0.27312879502786713 0.82611074027359666 -0.0039358917251645382 -0.39804209409124192 0.18315780183322472 -0.54870942614026963 -0.88661848002316868 -0.5368005507425504 0.15220818983590034 0.11909587243063278 0.051995576226646689;-0.79965146421803546 -0.23686789504715303 0.10974882600142945 -0.26903507227541601 -0.61118791719344967 -1.8431476693656872 -0.21145941525090212 1.5094299397928443 -2.4977710650603102 -0.7181539269172329 -1.4259478922510374 -0.38473158852875206;-0.36957457133099508 -2.8107756023506636 0.7457202717502257 0.20229078769732028 0.39110945451570339 -0.078865987042231994 0.61243480125599514 -0.84406759052539793 0.47419154254046519 -0.0083906086413897962 -0.032314100473380965 0.31976864618127299;1.0090814203421505 1.0774060274449311 -1.7254625438347808 -0.2349932483798863 -0.19258429938754887 -0.017042679190008601 -0.69258692180314951 0.7758539775795702 0.68790193077576356 0.30907123167804967 0.39164390824797318 0.2365673281647728;-2.4500106442692315 -0.23866307491168681 -0.82948735884971325 -2.2925863233353079 0.65514932603498544 -0.22400926485830269 0.56583288363924211 1.4315816623566644 0.60715198606390541 -0.12796641337436201 -0.017892614268569366 0.10049452379337404;1.72430815922617 0.6950249195471172 0.49334854453128302 -0.56542183895037057 -0.62882240425244929 -0.74360265193297181 -2.9209280641736752 0.15299271799227981 1.6423178005608936 -1.002133232688414 0.97312983086724913 0.24304370557422109;0.33673355049971959 -0.19131063627693204 -1.1601484262555204 -0.50666595063137299 -0.37541158975514377 1.1969200029855926 -1.0172320926613705 2.4783274250567726 -0.45118592379911937 0.18729907068807683 0.12820480248997132 -0.41104526962521803;1.7526097008845398 -1.8419688040243358 0.82130885450061664 0.34435753829808174 -0.091055737042840479 -1.5485149915300291 2.2628274177200769 0.68115504266673232 0.36851043576049469 -0.93122837623963317 -0.57173392419998115 -0.21242760428278951;-0.24333673589465557 -0.17385060198200014 1.4737475824525408 0.98892865182733336 0.48450608267944761 0.19117907184007876 0.30195678183690366 0.0590433020507104 1.3424515173234515 0.025569121178881521 -0.24052835365891706 0.6394960477269902];

% Layer 2
b2 = [1.6531943874130755;-1.1526493605482822;-0.61752522569839241;0.92892396035876046;1.5466529338874635;0.18808148126908009;1.5350396803838047;1.7502671023440983;-0.65279505183523923;-0.21774579327172155;-1.0706594346277505;2.4896961970222264;2.8343293358358359;3.33947964530164];
LW2_1 = [1.8981647832503317 0.50337888649868989 -1.1707054386280618 0.34602267849904172 0.4225241600998989 -0.763027421708524 -1.3363409946214544 0.23969116473931415 -0.50744743116590241 1.4838812906242924 0.56559071148873219 -2.8110150272279424 -0.73074498357185658 -1.544622422279345;1.8469041527095009 -1.1731735065255706 -0.098429318933773047 0.461423570681124 1.2473358386263442 -0.14298046841924084 -0.41762716318164467 -2.238833919091173 -0.85683334378119613 -0.89584987579338149 0.21136781887522946 0.32005021302485875 0.7236624323436972 -0.78584198429664365;1.7492855271791121 0.57066605527619996 -0.80136583980187925 0.4525556895611092 0.31317194292061018 -0.29542165858423403 -0.44656335569920269 -0.50802659659324867 -1.2436950806337119 -0.14897144120863021 0.3383123032067113 0.53641414068777105 0.45137798668124701 -0.66259072510244599;0.87069882193957537 -1.4233038412998975 -0.39225277043375378 0.35909930167037785 -0.84606624569490241 0.4497194082354517 0.00090261198376975771 0.054831042576712383 -0.3210579051764279 0.084840727731520904 0.19604886663993298 -0.4789102064786917 -0.29687649499481494 0.28799053706018635;-0.016560875373402457 -1.0798469914850288 -0.57156382104689674 0.059759136867479135 -0.88952018571835745 -3.9193239821250914 0.15482672307920636 0.30540380177972909 -0.18974850377486066 -3.7079412790226063 0.023603080784589989 -0.92751275038545944 -0.45679905727885284 0.52904947207132247;-2.9228740582507822 1.2872739525460091 1.479488825516682 -2.5533998465651231 1.1154480281123575 -0.41126512732759757 -0.28058877100888818 -0.41010261085615973 -0.88371564125234292 2.5119188716984193 1.1614186533071928 -0.1183461563548916 -1.0037943122849347 -1.177102425804778;-0.44711259505097206 -0.074374633397201947 -1.7989192086711707 -0.54492536320879759 0.43262835617967632 0.16855835665430594 -0.24989953827649231 -2.4354363863624018 -1.2024624028963136 -0.13045850557718258 0.070166677040306658 -0.80861193074510185 0.03923551092285648 0.30176531916746124;0.013286205989219216 -1.9282319587962622 -1.8966434323092598 1.3989452090970611 -2.0609641776070395 2.6845288198030084 -0.83096256748367658 -0.73451240356528358 -1.2305661046910026 0.6195375265027897 -2.6024003364280004 1.5981710740071999 0.54886700778042041 -0.58165282446572308;1.1247487420299691 1.3588487673897458 1.1130152723863971 0.11962650093214755 -0.28054915021337912 0.64937318195370908 -0.41852193532230153 1.0149978070920667 1.5421645736348553 1.8996297724078293 -0.11750542949456319 2.0311511806720466 0.53241977483113989 -0.056089710129486686;-0.1422293621056171 0.74351202445371201 -2.1732896096185983 -0.56573515292166743 -1.0285357106161788 0.2941971513536723 0.2087597535969006 1.4051744140983811 -0.23377886573910281 0.70886915821085761 -0.015328612033008254 -0.27178082495194378 -0.49728233067393129 0.24167585555181409;-1.7002142957890416 -0.42984292290386406 1.2842442849532834 -0.73955802151734562 -0.44811983000179634 1.0456702579732002 1.447573093765143 -0.28911369857144181 0.29589876713376106 -1.4255001758641008 -0.47440733887338732 3.192977841773875 0.83321927308595567 1.7112169109367703;-0.18964525717600983 1.9132225382949777 -1.2928236833269242 0.51096759346497922 2.1599101322163672 -1.0242731603706416 -0.57023795569255586 -0.90067621968350398 -1.7929384337336927 -0.79507671374003286 0.09673820622279812 -1.5643731553677942 0.35507056794703801 -0.55727308080287585;0.50286452135565596 0.29242865134825735 -1.2164814830563284 -1.3226718118853069 -0.3227216323971358 0.17987566261323629 -0.49678532032884093 -1.8108138886617628 -0.49682878516298545 0.28433391308748268 -0.01403974287788963 -1.1970645280988979 0.51990361148554443 0.43134672836781185;0.63313241049043845 0.40443742592626697 -0.70439112515159785 -1.1355241480878995 -0.36564517325913931 0.17255699008057787 -0.52757851375850395 -1.5059279634836529 -0.29977040641041081 0.34746630471719919 0.054888714507975667 -1.265691394482173 0.61307187679006836 0.44875130090054749];

% Layer 3
b3 = -0.19272095092631936;
LW3_2 = [-1.3045062244555894 -0.59118806010887637 0.40474853017159762 0.9950479926928526 -0.95243165494447346 0.13655733723338964 -2.2220440730358932 -2.49339115873962 -0.34829099306651479 -0.58060396676672088 -1.2386711187063668 4.0611760454422834 1.970422605077037 -1.8608729581233692];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
