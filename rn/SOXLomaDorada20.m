function [Y,Xf,Af] = SOXLomaDorada20(X,~,~)
%SOXLOMADORADA20 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:34.
% 
% [Y] = SOXLomaDorada20(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-6.1820745529512973;-1.7426402088643622;-8.2052801788869303;2.2847870978796698;-1.9256880178718982;2.2600722136283418;0.59341166624429631;-0.97750264067943315;1.0670587353058463;-3.669420210120919;2.5260894802499205;0.2930674421089865;-3.9674305585800478;-3.6382713329834089];
IW1_1 = [2.1227773445817397 2.8195084022948307 -4.0154401798910087 -1.7397816944447229 -0.10229528934486726 -0.80209361862135542 -0.12875969812489635 -1.4855504703126996 -1.5795937911588513 -0.090531159885934659 -0.5533474337131955;8.4759060260601711 0.63600040737712704 3.2394446508180677 1.415410632997949 1.702526594391605 -3.8477962402676407 -4.5167321862573448 -4.5323201591396582 -1.2220712778910052 -5.2881176603900668 2.2459990299753949;0.7378495006972775 -0.066212934721706224 -2.6812418668852533 -1.9744119811264125 0.28343268751584189 0.0015614264824059844 -3.1040530393526509 3.196811677898304 -0.56059122999448252 -4.1253487348522198 3.8060301908842886;-1.1079317402559099 0.59467064402739545 0.043745260709271927 1.0923286834852504 -0.83153156185346211 0.049255505360935772 1.4513170663856807 -0.16928477492575819 -0.37204411506884982 -0.82698583869425479 0.42678268982450329;4.1108527392634562 1.7650937075945139 2.3542643140978123 1.5988326511059365 -0.34431478852598901 2.1832772737147015 0.087361576025261928 2.5355436380938037 -0.87075848631611896 1.8391573146919573 -0.72884104339137035;-0.2707309907726187 0.85406958382866416 0.54748278231246494 0.85277267721445571 2.3709448877087147 3.6895853791821418 0.51533282411139114 0.9697295303329424 -0.44371049029709764 0.42678172376987566 -0.64074316198420012;0.98751913907962918 1.1312296176694021 -0.83534255017127801 0.85553971384107386 0.21187751941264002 0.30277960166363421 0.90788065355869485 -2.2465986460347986 -0.66086869581175423 -1.5044905765664658 1.1119607293790836;3.1812275185742802 0.54088721146960173 0.26034036188543375 0.3768546088000731 0.76555452675887015 -1.4048031720356464 -2.5063181334295312 -2.8689283500736575 -0.18230050364087308 -1.3670226709093789 1.2937162153681554;3.2094946247936682 -0.23726316387519888 0.54076146920202517 0.26861102472235421 -0.06726745898952928 0.5984486765856285 1.3719692155140932 0.56775033442093537 0.057375252768644143 1.1913461968311272 -2.044524206680383;1.756088021809463 1.1402747198254617 -1.6374011775616935 0.12478361720965266 -2.2072095291391358 -3.7234492071975196 0.72023712079259306 -1.5153681426554904 -0.059851224640073274 1.448253204798724 0.19863600171200757;4.5990192407654824 -0.17217977127254436 -2.1956259009182846 -2.8494338788518534 -0.80857948219056974 0.50517806523094633 1.9162508080866199 4.3201854227736263 -0.65206519999848833 2.0230758789147716 -0.21835812679815358;3.0772983547230019 2.0112449474186582 2.4093773323474093 0.51287232171766395 -1.9788857917686853 -1.3400622618457736 -2.970500049726343 -2.668459885231893 1.3041995359871765 -0.7911076701070443 0.12966493372094687;-0.59905756990637138 5.1669160071550451 -0.10265419313553797 -0.78576076608035428 1.820039353849269 5.0021549384683599 -2.0807186375739408 6.8996379315614451 -0.47977199310550733 1.1817708225341936 1.3202437449156406;1.7240578004803364 0.7946950759939041 0.98466911773395616 0.25807695048385171 -1.821372640643582 -1.0467729215345229 -1.174445629186867 2.3051268508437652 0.32431951523976199 0.90378923579458648 0.32175470699505238];

% Layer 2
b2 = [2.3979024487413851;-1.3908857203928784;-2.6247764305290406;1.4837089227740674;-0.89152458536111368;1.4302987311103537;-0.3577321855480125;-0.91140862068017003;-2.129019635913274;1.2795058878114309;0.87734386563720745;3.5653822868362388;-2.2867216764306737;3.6518413207207598];
LW2_1 = [-0.94205504060299239 -0.63900610601693275 -1.1673407162405371 -1.2283895954528063 1.0987561843620219 0.70375134728679067 2.1611309497556435 -1.3418698314922559 -2.0556200010666488 -0.85112098998463914 2.489684304906608 2.51806677721419 -2.0193450129234276 0.91892875880629543;0.063758762435438862 -0.98807092636483207 0.31140825014095519 0.31069326424245225 -0.042916257539099778 0.25844350326571774 -0.53298070687338617 -1.0518254460021779 2.39458945813664 -0.18697063128372035 -0.42882425158417886 0.34001963972985505 0.39435379055715408 -0.49125397661405434;2.7755082761506125 1.1036058625848246 0.56788382275209248 2.0547384127829238 -0.6164388819333273 -1.0093482793644202 -1.712557974741983 -0.77707478192119239 1.6437608087285518 0.49874554969438456 -2.3862447754938851 -3.203820842674133 0.6301584728493711 1.0800083644917857;-0.59837611772860111 -2.5029580593219318 -1.4967308571728972 1.3085841830555205 -0.75948111062260359 0.090689754588211213 -0.87500693849867828 2.4588763088786552 -1.5935241261292878 -0.2635008058052935 0.011723688665024157 1.0320920219602534 -1.1756636051467115 -0.63837632066817906;0.32996452156389372 2.7775826827101273 3.0354870563521406 -1.355752514431964 0.69232944862214774 -0.45776249206848052 -0.76132784147833055 -0.54986029984400675 2.135100609840821 2.2614349366480231 -1.6207152967133291 -0.96231523392454277 2.7644960954514719 -2.1085865897863325;-0.28433896255383312 0.34487621418133624 -0.34720565025023797 2.0440679188249904 -0.39840211628383898 -0.57145935229398259 -1.6052060655582749 0.35616749586983054 -1.3360536438304855 -0.19114239843143185 0.47464719960715318 0.26615007664156748 -0.54533678804040342 -1.453744511292719;-0.052947351579368529 0.13297495739493148 -0.043918092860304583 0.68499670436828697 -0.12999040032191367 0.16970057280833678 0.50864604610380471 -1.7952346406916695 -2.9739446505144795 -0.50720533866923989 1.8335209137912236 1.119839128221894 0.38518483599621478 -0.69109194950613895;-0.0072148619046523742 2.3143628667274103 -0.1594226771512556 0.11033700689231402 -0.12576020432089338 0.4056191900693088 -0.0084599671668112997 0.027133339483638962 -4.7020467610244392 0.39394124442788825 1.0550459085982549 0.27620856716214881 -0.73845236963717353 -0.62825043654372892;0.28646399814979073 3.1759722013553011 3.0984498674319623 -1.5367652537685788 0.58193312480201043 -0.2800215374070732 -0.62679235791445376 -0.4217823631886729 2.8799527696109148 2.3412645339719869 -1.1058095175126958 -1.3602658841426227 2.7142574099424879 -2.015662663009822;-0.066174312477977684 1.0526446763947992 -0.21491174767925691 -0.51105513605119435 0.051665145138726942 -0.11939044561702948 0.47976744587278097 0.83272800190910012 -2.5471036488436973 0.2106264299474373 0.50418814338326112 -0.22448735901310513 -0.40014517678051509 0.39007803173587258;-0.91916119966367849 -1.949876178383841 -1.4887197993906085 2.2865879632003381 -1.6572429478860717 0.39110960838692255 1.5872974636946215 2.1383218331577667 -1.9851034792761195 0.66087490901231216 0.4188984717183748 0.23071302417035494 1.5944186933201812 0.32361157158953563;2.163607898401914 2.7072168777321637 -5.754083797723287 0.8399479522212544 -0.40396236342773673 -0.49029408485072856 0.2351982880572111 -0.082750970014701261 -6.5771938940780759 -0.89776116984200349 3.090712344244761 -0.70390673354921729 0.091133774235631237 -0.60433728512864815;0.076287687631324319 0.48545271526221212 0.30563296891846237 1.2283375743675293 0.23451427851700557 0.54296280183959356 -1.3183754949597866 -1.2905784105743994 1.8651791244656737 0.072378021758222388 -3.0773055931653222 -1.2782898220165471 -1.0623168691665388 1.6272466248917616;-1.7071486480782156 -0.59873238177747301 -0.076391169049754168 -1.5476449277392097 -0.12390210804958304 -0.58023676369832866 1.3978283265634655 1.3096442466362697 -1.8810399280619385 1.1646478861869936 3.1671388454813392 1.3193135597706376 1.160345905726478 -0.62179871298770495];

% Layer 3
b3 = 1.0246089159665597;
LW3_2 = [2.623383026859647 -0.67063410698293924 1.2238174954582846 1.0351966339378753 3.3752634183477577 -0.87541802633969645 -0.16849066752963401 0.17101188797058772 -3.2076662658998725 -0.87209662462287885 0.047531733578572155 -3.3141586814952078 -2.6838348966093046 -2.6485783351120711];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
