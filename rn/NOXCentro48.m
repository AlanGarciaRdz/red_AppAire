function [Y,Xf,Af] = NOXCentro48(X,~,~)
%NOXCENTRO48 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:22.
% 
% [Y] = NOXCentro48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.9587374875258328;-1.3398126999926467;-7.1044760307834736;-1.2119223503746621;0.58421401986359378;1.4405307080162795;-2.0668713868275295;-1.097419520617807;-1.9103668220524006;2.3957962757532485;-1.4324691753212044;3.0067347285197279];
IW1_1 = [-1.4152976595943829 -0.17509393217038596 -0.50467412769067121 -0.32699810983773603 1.7089573580719366 -0.4590506769753237 0.37458138113332118 1.7945641530585243;-0.50462850827204986 -0.51663925358915475 -0.47349284289275445 -0.16153224906175848 -0.29971443843003043 -0.93836981525591057 -0.20999657785597839 -0.49152044249271787;7.7398789286890564 0.35249576381378667 -1.7808224009525149 -1.1550174621057541 2.4281805049587999 0.062697744103882069 -0.21231080699397262 0.75856703259192171;-0.07121258037807654 -1.866327670959341 1.2454690341354757 -0.12004730713135384 -0.91232998407056343 1.2584253107361978 0.5420520427189206 0.66059397256765306;0.20564585749260242 2.2481407771744819 0.040867579874304019 -0.40350795066678563 0.49559760952913701 -0.041592609028186206 -0.12198322986921434 -0.21636481845850444;0.21360336660805707 5.1642593697087946 3.5949502925039867 0.68828240784734618 0.12179322691903655 0.64458160984007185 0.30234746244284261 1.070345301190476;4.6269651038392787 0.15725049377127831 -1.078777056192632 1.1593238962630865 1.2923785170913855 -1.2157829126097091 0.041724205633268618 -0.16441467917897826;-0.21575996078789894 -2.5534663966815381 0.0019902800494779188 -1.6063285330056392 1.4617846483260504 0.29301611262822624 -0.11961396707617351 -0.043333003294661984;-0.84542436363773477 -1.3283358349789429 -0.0026285847041599697 -1.0074839782775247 0.89695578110595153 -0.88927272028909687 -0.25320275833601052 -0.70681097659835668;0.73271550774563576 2.1915747754664179 -1.3437340338239636 -1.3978850759262904 -1.4596783492816223 -1.606002739157222 -0.46799431871843944 0.46131868177082952;-0.86949302205714418 1.2581071647676272 2.4877260823092149 -2.5143843260320065 -1.9491900013635255 -2.8611707676466414 -0.21770236072806176 -0.89678519883953223;4.3727104337418856 0.97035710459769375 -0.34450180827801269 0.19845810079690562 0.31100839172090694 0.27883207440197466 0.1623055523342361 0.028074254567500245];

% Layer 2
b2 = [-3.6076762723654516;-3.0592857974494398;1.3489231117604632;0.14359088287709587;0.48280578077417463;-1.0416042708571522;-0.48707591270711958;-0.69456290411806709;1.5146662673862776;-0.84751662380645199;1.0050053361546263;3.5620303199319228];
LW2_1 = [2.2213594470080626 2.1262286262155872 -0.47808789916710065 -2.0023635423637933 2.076672439322746 1.6509269047581432 2.0992685785468184 0.92487911082753449 2.2348049153296583 -1.8419752579402509 0.48543219621668832 0.3066723578037891;2.9675490236218298 1.721379517821664 -1.0640623915830638 -0.77252174578255417 -2.2273724853606174 -0.264469814637596 3.1744437136263324 0.32414506844053392 -0.87830628621603202 -1.9609086080658764 -0.9997840613494311 -1.0510963102690198;0.017698488969891069 0.79998702618210038 0.9811907619270972 0.26011649814181248 0.0018164495208034814 -1.3198925641272514 -1.8389236184551621 1.7324872860692226 -3.9686369601227223 -0.077634984093258738 -0.79010777286010336 -0.20415863910636567;-0.15463217454949563 -0.24402296591966846 -0.520879389261099 0.42031606476116889 0.29937997162460117 1.1955662294638933 0.98257149853178716 0.19119972751768549 1.1963876835138467 -0.32510515767780346 0.30411516793835625 -0.41613836356918543;-0.34273239909570086 1.118893680149694 0.079359743245251219 0.82854198221877029 -1.2450675053259692 0.60561411303169321 0.93792660832773411 1.0967623352749925 0.074639222726872081 1.5542184045881191 0.78228203489399617 -0.12161213678731822;0.56741842705151013 -0.50122447171428075 -0.25834421022106785 -0.1259294204035751 1.9133351057722316 -0.97728613672433839 0.14560962890166909 -0.90600261410403571 -0.024749469853771411 -0.35865160051226208 -0.14892860511271744 -0.17904039378128256;-1.4337114911571234 0.57463211843614426 -0.93344507668032972 -0.2417632137580647 -0.81356222356046271 1.9734986749055119 0.62054665211508264 1.333864971702408 -1.489821892484301 -1.0861100310655014 0.54331179348594982 1.0401494252704546;-1.1597433408224085 0.7343058633936872 0.74496821354901754 0.34972612293411981 2.0475262000675825 0.048877091779821448 -1.3068966343244977 2.2224997601195873 0.11099426063251847 -1.4916747190942434 0.51193652789633159 -0.35585080605232633;0.37806050537754704 2.888899103792911 -0.63770465189642966 1.2570872905631623 -1.3805838068500105 1.3002404042144966 2.1018624704972759 1.1866077827680683 -0.75807133351798606 0.44146661138596716 0.9402866743723215 0.21284739439296108;0.55546571378310605 -0.038070330294275104 0.0043261141740562788 -0.042072205421524393 1.9019205523930054 -0.596566556709754 -0.19683520662373361 -0.86283074534818427 -0.42285159944426265 -0.56434430361550747 -0.27015757204055152 -0.016117454801851581;1.4074347157297766 0.28200069999181365 -1.142577119343992 -1.4973135964923028 1.8106699101146342 -1.2167166871220787 0.3021610619362749 1.1324740659239123 -1.695643047371046 1.1745601770339298 -1.8293179608367196 -2.3449980999208009;0.74975412458146107 2.5477996901579076 -0.22674586070826191 -0.41548009559017218 -0.32605225171123564 -0.7190785842937939 0.3969899817577861 -0.71059603054766307 -0.021873842464060309 1.1374737159889403 0.72343987020622635 -0.69962876155010989];

% Layer 3
b3 = 1.375675720964898;
LW3_2 = [1.2609752228852626 0.090788645158497119 0.56039407973472388 0.82892284615796086 -0.32002214557324682 1.9723965512415147 0.11721459532243941 -0.96613379026234325 0.17775597073966415 -2.1041268953904408 -0.24204635747657249 -1.3132856607552872];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
