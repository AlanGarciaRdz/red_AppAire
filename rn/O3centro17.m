function [Y,Xf,Af] = O3centro17(X,~,~)
%O3CENTRO17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:39.
% 
% [Y] = O3centro17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.519035728451863;2.1014882080906356;3.0480439318108523;0.73282674929108038;-0.089312129924260464;0.16439449259808697;1.2514587942621362;1.3723358466168654;-1.2201804506189324;0.95009418471229012;-0.9981749441497767;-1.7477425680838021;2.5408283158070097;-4.966657286547389];
  IW1_1 = [-0.45557096316806545 1.3210508160905312 -0.7040038625614472 -1.8096946370721025 0.10833523449827953 -0.25231908377166046;-1.4756140428880402 0.23896768516827541 0.85533709366637944 0.71998743816487754 0.093835836837585992 1.0023117918414455;-1.0697965483923018 0.20654644967867858 2.9751760984060964 -1.0262328840329726 -0.95043839970058008 0.62174002161401709;-0.7332995080061514 -3.1012410409788052 -1.6322595419664632 -0.036912710235595017 -0.2790604652822794 -1.0191249100157096;-2.3355936038787508 -0.60929555471496077 -0.45033429511918333 0.062161277500903847 -0.32090880597618299 -0.7206516032008331;0.82671836883543737 -0.78764303165215588 -0.17929516239340668 1.2691985926613718 0.39625641326741673 -0.5663602238537736;-0.13551519476489046 -1.2950837911550579 0.039258410162289231 -1.5829937912406193 0.47163691177957007 1.6744649998385337;0.21697422816579609 1.5924977786442915 0.046576089860971448 1.2231879584589573 -0.65720934060423575 0.76751482424760686;-2.2246230743942057 -0.11803590563056279 0.11526263149168242 -0.10695000545411557 -0.079462581273361366 0.3333968749074982;1.056630054179617 0.73680936256569973 -0.38979089011571189 -0.72084989590686022 -0.66361263137813664 -0.03632964234469728;-0.030475765215023588 -1.1125557138272242 0.55731324508709479 -1.2140132875850549 -1.0179446380160251 0.5607819240949089;-0.083236557599860456 -0.55508376468058573 -1.1686876494008938 0.43752087182482757 0.97415278030807939 -0.6973735772013232;1.9844645094651514 1.4690066061297997 1.4030657380447782 -0.0022957530748099891 -0.095955832880400868 1.309536330227125;-0.31113744362746321 -0.13420767313043974 -2.4397591507325225 0.45953744866539981 -2.0762069782901014 -0.23196878101944335];
  
  % Layer 2
  b2 = [1.6631886087932757;-1.5302568714868554;-0.83832868814814565;1.5306111776696578;0.25813497957883513;-0.25091428514684944;0.84002827725478324;-0.73431408015325672;0.76512233072723079;-0.84558906801799871;-0.7472708320009368;1.7671617316579113;-2.2990942649772483;-2.4490663913245188];
  LW2_1 = [-1.2352151651066028 0.088806012363155759 0.80516523224364622 0.79522582653712537 -0.47246258302108834 -1.2849943866438736 0.59086398525544015 0.2835336558064066 0.86897765810192329 -0.61865579485755517 1.0708210553157753 -0.39654501349031296 -0.028245214786231258 -0.33048346900637698;0.11746166169092648 0.081764262354344086 1.3458158704806356 -0.75556512475819237 -1.1498561507675655 -1.7217931080063917 0.4667326911823923 1.9426166446176367 -1.3969317124287883 -0.92462582576301733 -1.179490827884238 -0.070631173312542594 -0.22824731429307263 -1.8063321076804044;0.20576870231066954 -0.10610085306990202 1.0955656291470803 -0.16529671480988448 -0.57923911835612196 0.89272952175852271 -0.26390451605229298 -0.79320982777326821 0.047678317736910732 0.71137421243518972 1.0778864692652892 0.87060580636935736 0.029838548713071799 -1.087357033449162;0.29511243126615866 -0.7962921963657551 0.30800777905400117 0.12766142559243818 -1.9890799986476297 -0.35770839066007459 -0.79486609114854101 -2.2316578167304053 0.17377961190662919 -1.8783300409442567 -0.48569800647657713 0.019521781643919416 -1.0322303252715244 0.11819600536437749;-0.1131714080132426 0.21547111483233614 -0.73862354457114554 0.095165731410823448 0.033489789987457677 -0.26915213495875678 -0.054583527616628588 0.086734244699333288 -0.75724267690686686 0.55124837908452629 1.6786210493142943 -0.25349014618387189 -0.46482242925743178 0.90647460469013963;-0.46373125886262984 0.95293061479669527 0.16514041836160021 -0.19259381768071784 1.3240580789046512 0.37662864660040118 1.1756103549100343 1.9974031299183244 -0.60357255009944222 0.97125203287523865 0.67222324433488179 0.36099011626711236 1.0299412963224366 0.83016781583654853;-0.56118664494991455 -1.6165774907876524 -1.4456397898323614 -1.2957556977369507 0.57006610380509004 -1.1462524129351395 0.010643741058172423 3.3586216621393818 0.79486944150374272 2.2301646323134796 -0.38647071033634639 0.52344009487262011 -1.0953129600390545 0.8901838182435502;-0.15033999487473651 0.037227227380379424 0.46613126756825135 -0.40750874430865991 0.36696193396871429 -0.085029201569011753 -0.20871563975624943 -0.072170033532022032 -0.0046622327269771544 0.71642939961486019 -0.3504476575917993 -0.17180319409648714 0.18506583399753029 -1.3904244447513536;-1.6746374520660448 0.98917738640667163 1.1123738198855684 0.063926466200501464 -1.4652742221157464 -1.6219006476834101 -0.57060860097987953 0.19361528110416654 -0.30268054724248755 0.59446865667304372 -1.0225791537260154 -1.1472846162725463 -1.9228734645331473 0.37000939977050989;-0.82017862522073826 0.83717786572350772 0.19063298772266637 0.66943577468622051 0.91952829149779303 -0.28924473969185061 0.88037148155620837 1.490615708493475 -0.33152331714896982 1.0690918622460577 -0.93274745783625934 -0.9113634202089993 -0.78382198763178312 0.75399481359727094;0.15743016627869966 -0.067755145167132366 0.84939564127129696 -0.49833215358927357 -0.30855193614311571 1.0542663838816664 -1.8562803579964888 -0.3410532720139402 -0.26650355256604275 0.5809973215047286 1.2338700026501062 1.4846604493996889 -0.45371650821958764 0.62076574848049471;-0.43507203188682703 1.1672214854671898 0.0378959365890622 -0.11157307576625705 0.84207869849222849 0.67720467799635076 1.0027749521439666 1.1043069630630513 -0.45143343384688833 0.7789125778574687 1.1690138418870837 -0.0067847115007685088 0.97483134556511486 1.2776220413859842;-1.4232787446225887 -1.5103066364003905 0.69836368643530888 0.2456894321478259 0.13794566900257541 -2.2210830039347775 0.79539506574170182 1.1488958731960757 2.8529380538286673 -1.8952342551680028 -1.4576014668886133 0.19612105919700926 -1.2026251278435218 -0.1081317754808758;0.057562576262518962 -0.81059164946514772 -0.24226365826678714 -0.40803510293769901 -0.84357081451003302 0.26260305389347088 -0.45008610494307982 -0.026247119608529899 -0.86337308521442024 0.83311959617533438 1.0332972752212 1.1596563553226469 0.88883166769496058 -0.74856824682676215];
  
  % Layer 3
  b3 = 1.3075079742843507;
  LW3_2 = [0.21237176512740916 -0.24968406113197958 -0.88895698498446696 1.6100463229777651 0.3650415082693621 1.7668677415057457 -0.31914370752320248 2.0750837413197165 -1.5060200479302392 2.2212613283188345 1.1764004260729934 -1.9908932427807855 0.46233038927877051 1.7141228473079486];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
