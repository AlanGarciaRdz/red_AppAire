function [Y,Xf,Af] = NOXSantaFe6(X,~,~)
%NOXSANTAFE6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:50.
% 
% [Y] = NOXSantaFe6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;22.7272727272727;0.00341273633199099;0.00632111251580278;0.294117647058824;5.42005420054201;4.04040404040404;3.03490136570561;3.96825396825397];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.7299048525163196;1.7795883703976427;-3.1542732965714197;-4.9330525714858329;-2.3802607825270097;1.2585699764287539;0.2230248779414889;0.55091506338526974;-3.2768852720580282;-2.6103323715135995;-3.0720957417101258;0.35580274701793602;3.4063308903324141;-1.7465385887776117];
IW1_1 = [-2.7573688687756581 1.5862866952550623 -1.8087577008291338 1.297595160497641 -0.33489565164746782 0.22161191542688308 -0.31166726754616542 0.47694856625944121 0.42172682978373749 -0.45378269050200815 -0.24842355716155209 0.076768263522399974;-1.5558573133042688 -0.076492054570944934 0.055176864765333997 0.55099494719609554 -0.89191775218006275 -0.48550810695663904 -0.95512757224392097 -1.1152396710295163 0.035260017585241929 4.228049859596215 -0.88527659086219657 1.1436385662649406;1.9564547533826526 0.060330074550712563 -0.65508705323065608 0.64913398567907088 -0.20329318691796122 0.70220010545734235 -0.36671764564321679 -0.34228979809850557 -0.74328466704184071 -0.088504202206553334 -0.31044555227987597 0.25316709882382693;-0.21676109438215077 -0.16985983240023517 0.40192874493300668 -0.16568459062474036 0.61257685622657898 0.021254584643083135 0.21809194473036869 -0.84391427926838058 -0.16940080475973418 -4.1808705395604537 0.33175271020922076 -0.027861165053687621;1.2790770780932947 -0.94643806108595807 -0.46784126340875992 1.0416669266190159 -0.830935183479103 -0.081603821514966535 -0.28201634958572508 -0.67966265434904993 -0.46642584299081774 -0.20882948462120246 -0.0028110508609582828 -0.23425425373739384;-0.66242037226503969 1.1470883897575892 0.18895549772845027 1.8662730538875152 -0.44698605928961693 -0.022192556698249228 -1.3006106964062851 -0.40519366550744979 0.052849992625309726 0.10163160054957758 -1.4375975677519823 1.0082091721846727;1.4024841163863437 -1.2597168335015643 0.35243433653316841 -0.12622452494821257 1.5266552806872702 -0.3519276859330826 0.64910110685619571 0.41271036525945098 -1.0253381108718185 0.92209969607261566 0.32792843457249415 -0.95280344356191493;-0.69363057763940961 -2.109748496883308 0.10757207706467839 -0.14320097994942477 0.1496461513211752 0.1605419316825101 -0.33427452815353942 0.062098878891291148 -0.58744074468759488 0.26288378862553979 0.045237927784955369 0.46881914007360709;3.4636983372356513 -0.61487936362968476 -1.4291696763301331 1.1226167907769677 0.6449034246625448 0.373688652018489 0.00083787663358410053 -0.78058468534410685 -0.12442278948885022 0.76066449917328882 0.068247813341223401 0.098680237748505484;0.49620134313406866 3.7567619918313002 -1.1447114027127134 0.48303077568060115 -0.15832466455662511 0.099414476241823924 -0.12100670598708428 -1.2777388713407534 0.14805756346081528 -1.0334109528684838 0.24146257482401318 0.050327672416937079;-0.43571810273923739 -1.5722356379064459 -2.1071116964239969 0.79404779610634801 0.0046299829450735762 0.26998279813831894 -1.1796594121644015 -0.94694719921410231 -1.4632022805540503 0.46616522266634974 -0.36917591417252477 0.97045760973747108;0.021427025992616276 -2.6774188116215671 -0.73805328842344187 0.040649802206019506 0.36078418037053966 -0.66635215693861238 1.0353323201538045 -0.022457891808901301 0.85638270244062187 -0.6554737425858207 -0.60554036066015893 0.62792244252308671;0.09260539654773059 4.4085564044540888 0.21722830608167656 -0.01363931327414511 0.12457243181727078 0.15394427874169631 -0.04959401590116562 -0.15482341154941698 0.23522535195318731 0.08149042883598287 -0.29911366763668779 0.20140774629188871;-0.22599657352924313 -0.88043441815877255 0.84237406106401791 -0.17036661047436849 0.49295182892833206 0.093326507684334953 0.4069160493703925 -0.067979792845656375 0.14787262657697331 -1.082031080916827 0.22355419177903596 -0.34465656350231322];

% Layer 2
b2 = [2.9071171719352131;-2.5714142569284761;-1.4571133088368231;-0.46760028341580562;-1.0863644753261248;-0.69783078595945636;-0.41755717319359975;0.4822691798940687;1.5560337137782618;1.0553215971702106;1.1943701935294082;-1.0530683468499396;-1.7470862915000918;2.1438667385887551];
LW2_1 = [0.042702037416780914 -0.62993410060704957 -0.51104667693468386 1.2848686362954453 2.2517765309765712 0.82212586339790128 -0.08093900384009084 -0.098200150244262208 1.1050890842332515 -1.0813659824226807 -0.88126986969601639 -0.31310134797879591 -0.16730730781414996 -0.69673944776178987;-0.091730375081667981 0.44296669588199161 0.78208729865037352 -1.8451746353400071 0.23620513665106982 -0.35309998679502164 -0.29341154303534545 -0.68357862142356707 -0.91212799734757621 -0.96127480686307731 0.11347634601717625 0.46017329496685389 -1.543468601636377 1.635551175178702;-0.39445397759322282 0.66982866974437849 -0.34571885855851259 1.4048726923667489 -1.9112981249700884 1.629720962049902 1.1921399631903413 -0.39844945962562472 -0.15901511284256065 1.7013956004426321 0.32694795961622647 1.486989250914831 -0.63542958625757384 0.58342291142872826;0.31297448766103958 0.37481002812490738 0.88114745527597726 -0.84118965509870103 0.39808069810123126 -0.15968484071948735 0.13622632443324287 0.74615317898310196 -0.4757242085969724 -0.87250910917833213 -0.45113382768081045 0.71152729302859119 1.7500953718044017 0.82868793041488531;0.19797603469046579 0.55372360166338053 -0.050357011398525248 1.3816109974669804 -1.7174473707583502 1.6844989486897901 1.1705628079748711 -0.37021982942499598 0.61304500520656324 1.6450451766756973 0.11254996591000618 1.4811491127060104 -0.42277568766355106 0.80631380584410661;-0.35805345053386495 0.055452833143987093 0.45807462843666852 -0.15214470584272308 -0.53063376365449877 -0.24713794899365782 0.019426438124797253 -0.89853182200995663 -0.35585935609034947 0.2279867780412696 0.58225105124610477 0.84584962490038818 -1.6815084174779562 0.22377906053486915;-0.29697273390395001 0.23641247474130847 1.527688122816929 0.20168473640225484 -0.10524043853342784 -0.44837013124294001 -0.88059010316366004 0.30840350084107587 -0.52803440937731561 0.25549732363697769 0.16150523575938239 -0.049388059057650119 -0.96991311063409791 -0.90272301522391829;-0.29019590722273386 0.09152406168555588 -0.39142643542905209 -0.32083578053884382 0.28293847199151595 -0.99303557762984473 -0.574326538992319 -1.6209992684340615 -0.57966523946996895 -2.6500156560229948 -0.52519637178219836 -0.95058852395624838 1.1851791489586649 -0.091558433570759434;1.2325756443216132 -0.55693142410509755 -0.17117517783672068 0.34429701082203884 1.8171258586950314 0.68826507883318089 0.05249174034703348 -0.25205160487268469 0.84245536131928322 -0.95549679861845627 -0.59324374293364457 -0.23714934037756233 0.16379030531215344 0.33782004455132664;-0.099508894441008508 -0.76050196921753266 0.32178775913913915 -1.2130336506502724 1.7754585422509894 0.66705110163915016 -0.19135354764699394 -0.25596286508047911 0.41720122270597748 -1.321064222614315 -0.060679223474714786 -0.36574883394350521 0.12601908130429645 0.60342015684685391;1.4718361072511454 -0.32278227760578765 -0.83769190948544248 0.56658757360038359 0.15958920116058295 0.37584147659564876 1.3269998602255282 1.0569469148453821 -0.60590151413574367 -0.21667346262017284 0.084088257657721308 -1.0995372729086743 1.5025523886496759 0.20449774654324776;-0.22472012516323375 0.62671078090212473 0.6481708164115122 0.37855178658227323 0.2689955692492505 -0.11175054587395564 -1.0445478992957604 -1.2282969652566065 0.31806545280098281 -0.69790065018370284 0.93580019062519115 -0.74438840254924876 -0.70483083677698277 -0.4699113476731937;-0.20680152525029041 0.12300937583710514 -0.087213251289607774 -0.60197611735565948 0.33790186315645337 -0.40557816157090792 -0.94292288840670824 0.21176617773025339 0.51726757554119951 0.0028736844703781093 0.069883279618840305 0.63607618913235997 -1.1347790894847793 0.16242882940826403;0.40754164633896445 0.32177516089090868 0.21205278350411597 0.026548769666087157 0.41988550532607655 -0.12006688732138596 0.13832458756483548 0.53714813428206198 0.16451444369086654 -0.97119671439105681 -0.1784911666257635 0.72491442063913292 -1.7762605797050697 -0.91900200497860274];

% Layer 3
b3 = 0.64474711910350369;
LW3_2 = [1.4172775262087849 -1.8443603093829388 -2.2249277639163254 2.2437151877910599 2.2751431871991281 1.7686676351240647 -1.6786314729603451 -0.71948975004966642 -2.2096948261674583 0.20080755365105485 1.4454188626774231 0.83361203884500712 2.5402161438797339 -2.2745047535500045];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
