function [Y,Xf,Af] = PM10Tlaquepaque6(X,~,~)
%PM10TLAQUEPAQUE6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:38.
% 
% [Y] = PM10Tlaquepaque6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.71253717334138866;1.1912224097912192;-3.7554299220381551;-2.7125847521204229;0.90832434525999073;0.49069037864092169;1.7310904227679491;-2.8133054842336005;0.24564242789633484;-3.639694378039203;-1.7152715797992482;1.4180085777126692;0.42308758562783927;8.3446462351436779];
IW1_1 = [-1.002068941131999 -1.6969995714223931 -0.018130568186533594 0.17720748885545248 0.17878198942759063 -0.12604522973246918 0.49875769213567833 -0.82789620354894644 0.11364026301513498 -0.42585532671718296 0.049028457980283019;0.22025761407273114 -0.21638803383471988 0.36794587006238466 0.075875902135746742 -0.76186547751802636 -0.96858098741280241 0.08789970938727816 0.049737217811844127 0.82462202835903309 0.10338101173882784 0.28910698322031592;0.68374434278594454 0.29706737758857932 -1.9259614930114148 0.78693763628454272 1.2117312671100393 -0.95000880041233871 0.21197348635408186 -0.41183957414914257 -2.3552633066975823 0.927175473416191 -2.0839822160825108;0.94679908021252257 1.2037021877309011 -0.26369459124265315 1.4758788985498161 -3.012896324753854 0.6219940061424053 -0.31535030942273384 0.20117270459930486 -2.039774003328211 1.2670633631584003 1.587521140120874;0.04838519789940833 -0.7747605212371077 0.49384731710976282 -0.468184606941702 -0.33637038855606904 -0.39801251771111262 -0.16029370584264552 0.19575475860539268 -0.11524038347280116 0.15920328115773413 0.64289260846650687;-1.5046300594694733 -2.1927730794850793 1.4071792002684584 -0.9576777584818299 -0.25029762350367774 -0.53215975447759001 1.8363938368962887 -2.8357687610341982 -1.2663973531852737 -0.4094468004301563 -0.051189168976418509;-0.13522323412164058 -1.453961703539669 0.26513093360275908 0.026860639763484837 0.95576221885448431 -0.38339740163434805 0.043545051960623832 -0.1258529694952549 0.94963411118307672 -0.065684274907542695 -0.043347971644715093;-1.0610450337960193 0.4845622754045083 1.0895768874072844 -0.98259035535380634 -1.4411876269020172 -2.4308522800401571 -0.22903386371480053 0.12116200313410636 -2.607792716014071 -2.1868809144974284 1.3379967138413287;1.7913502073300123 -0.083093939258189781 -0.6298801879982967 0.15217177597078074 -1.291391071305239 -1.4609642915473526 -0.0017081202423621482 -0.0050019700017472036 0.5580939028350913 0.08226173121185823 -0.034694701777081012;-0.17944068039000899 0.16366878234998777 -0.29012847487434007 -0.04854120402515967 -0.55415285646144163 0.89767446331506562 -0.25617226172143337 -0.017480055236852511 -2.2539302085277408 -0.2374074707977995 -0.65092859804360859;0.9993992475487431 -0.070651392601881247 -0.19349652101996265 0.64194201815423257 -1.6353617678087362 0.95155473939458324 0.43562498425607299 -0.42839495044943116 0.073883343011407546 -0.017349247749247731 0.062285570184428631;1.2365190876750785 0.27592068393503183 0.064338318994384969 0.099818605380583181 2.4394326550739365 1.9522864554171275 0.48670874308334428 0.011400747858768542 -0.92155484213081329 -0.16112474789253528 0.34722621709614487;-1.0269479108961115 -0.49456166955124509 0.27093651432419952 0.24622192143945781 0.74131882156228013 -0.20000312477449392 -0.18128001698591328 0.045596629371113626 0.84906141488012821 0.070961298735745582 -0.5599724192947817;0.74624214069091666 7.2889694245853685 0.14189135455318139 -0.9976098023699197 1.1660188243939753 0.50879204560947611 0.0075637194961307424 0.12591321578268519 -0.081131239972118768 0.29367430562865054 -0.28442602918269966];

% Layer 2
b2 = [-1.3283556035329005;-3.0784896874160665;-0.68828019929040718;2.4188888919001461;4.0165705378666923;3.9578226358338124;-6.8211706615453584;2.0682958013615864;3.5031325352265048;-0.92823796408011883;3.5103997478065869;-9.5861518659731431;3.3258683430715514;-7.5789394610485301];
LW2_1 = [3.6613313017194153 0.79131847274751976 1.0492179765953453 -3.2332623755391161 1.0729185069531209 0.42948026670681072 -3.8986392971017994 -2.6397884504838096 1.6567012695022953 2.5121311380088227 -3.5869403071169135 2.4318961122843117 -1.9741254077365382 -0.53095616009387037;-2.1236496313938873 2.4430098537573719 0.55316261645279319 -3.4663561303679393 3.2538884451831938 0.26660171164880098 -4.6742620417811089 -1.9744481070445865 -1.1300994411770924 2.4047545665327332 3.9252360071638073 -2.8478922739792432 1.9030509492462562 1.4171764351702851;20.523141724710328 -5.1231143291110328 2.1436526169405963 6.6772100363832401 13.882157871697588 -10.684405735225306 -15.254428024320191 6.4290513782079213 11.618539833970678 27.343194889736516 24.005318034465386 -20.52839367252075 -4.724614837259602 -5.1397420995589265;-3.5071315929680416 -8.2876058586253887 -0.9192882232445907 2.2465891193608178 6.7486885720032843 0.82384852074639225 2.5673618528725157 -1.4168759140654923 10.325810113674661 0.93071577154158347 3.0678307442297976 4.4599461297920788 3.8812861712525963 1.044744876920044;1.1963060110230954 1.4194985984069413 -0.019361128761130775 -0.58126586734560626 -0.41458736397764517 -0.31662039838878264 -3.2902140373346556 -0.91181943738027593 -2.1852256934186558 0.14605700453685311 -0.42239519857943475 0.97622172606158508 2.9559799140740708 -0.026806449385905484;4.6743082412026888 -5.2570499272544877 -1.2970448200689042 1.5297505402722289 -2.9916542068244025 -1.8580698361551229 1.701863116695626 -1.0604378447274381 2.8945975809362419 -0.68269966010418459 -1.5755747928947188 0.47741393486988953 -4.9613711449308706 -8.9430652096585614;-1.9499998070240956 -6.6148547498067396 0.166638969799694 -1.4429885152062218 3.3842401048955582 0.88918610645314833 -0.86680628883692468 0.96537002386940873 0.79630518859711819 -2.2952541857410607 2.911466450292703 -1.1252711640485309 2.4553050689382827 5.7524536266289887;-4.9442767981261584 -6.6590649242656479 2.9632212123034689 4.222005045772387 1.0737628595120656 -0.98632580054920416 -0.10171714262666215 -2.1571358598670107 -2.2689148003182225 3.8306281158929414 -3.1803328894386373 -1.4453512335832057 -0.82742134947779966 -1.2634154126593116;-3.9990973854268081 3.7584556008667178 -2.7099302094000337 -3.4098134786313774 -0.77321590858893485 -5.3713162213316341 -3.367623781948105 1.0845357397998763 -2.5088237746953403 -1.8772159318969599 2.2947878938393598 -4.6958047343746667 3.997450220789756 0.25842091138192652;2.2371590868110918 -1.1858576656197792 1.4292780039142341 -0.72866668159146719 6.8290854194648318 -0.60595718236648821 -5.8231123383167942 -0.058307917534384704 -0.20293849846429066 -1.5422708261389753 4.6477856989109378 -0.21784932245736158 4.6114899159861977 1.628835934285022;2.3902669966641428 -9.4323552983649979 0.086713023263572372 0.50516187096471377 1.1166420878747114 1.0756124336045234 -2.3645424474712788 0.88832767743610419 6.8321329505226931 -6.1472779056722748 -1.9539190739192966 3.5066548732273239 3.2228593221129715 -3.5685650132049234;0.85351334753764463 1.5630559057609308 -0.91729235415590182 -3.5687127341691349 -0.31744465038539471 6.596495853661934 5.5185599210287686 2.3108711658906445 -2.7224621248048919 -0.70686457109157241 0.19383361219430978 9.5828771733857394 2.7445428588659353 0.84029133723538529;0.28535906980468695 -4.8473922534122487 -0.80128357404008455 1.3635963969030869 -3.9398678143552006 -0.35514693596654273 1.8788415031514476 0.59943948013681636 2.1819703633318972 -2.4247587731630871 -2.8230179354819578 1.1615748213002266 0.39337209287156055 -1.1623798476751008;0.59238753539546707 7.9110416594639945 -3.3575622779618053 -1.3468235853856643 -7.171919537793257 2.8042854984426011 1.8063889389177343 1.1995495971725061 -0.77617714845899233 -5.7346985246146236 1.259400638927344 7.7316832450395534 1.133382364387143 2.1366006446241053];

% Layer 3
b3 = 2.3799491624546136;
LW3_2 = [0.030863483802569095 0.072753807711060242 -0.01967498635246382 0.046872493282968143 -0.12113539837183139 -0.049633543389074206 3.1326797523072787 0.016310584382125903 0.030899810249729511 0.086108666515759935 0.049355375126806676 0.037171094192741901 0.098895301312707157 -0.017313682078733943];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
