function [Y,Xf,Af] = COCentro5(X,~,~)
%COCENTRO5 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:30.
% 
% [Y] = COCentro5(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.8846806185893317;-3.3892679551687497;-0.50545232238125415;1.0843747027345967;-4.7314934674405356;-3.0908773143971815;0.10709440242414964;-0.1058569574832138;0.38796222279355341;-2.0318099033230119;-5.2326687286366527;2.8485297344806724;-0.52038640052723939;-2.2098048203490701];
IW1_1 = [-0.051221535393988639 -2.9942595833509675 0.41986072914270478 -0.10654334383516594 -0.0094640632904646228 0.16227543142068337 -0.11860241625746949 -0.19217289890074699 0.14473491288342905 0.24715812317550914;0.55136751243443582 -0.28172982635590621 0.60442813932930706 -1.0948544013863508 0.82398963237940981 2.5051644543107408 -0.15964728355200045 2.3081632116847426 -1.5577039195285227 0.25767555101816425;-0.033241226067034516 0.36284012482746186 -0.37584249989370555 0.091129227022601539 -0.39432374763051697 -0.31375927779264201 0.048794828087463826 0.61478538882727896 -0.23107387942854474 -0.67779319588023967;-2.0535036483377263 0.21193957100061114 0.22259861189340799 0.5917343047718735 0.17421679469942497 -1.0435742864088511 -0.0012450809964592181 -1.1269070581732752 0.43701728542687207 0.203014932403357;1.8167649375209494 0.71364812201683214 -3.4085274740108011 1.8826017537688513 -0.18437479585434624 -1.1039490656577184 -0.21625879927666131 -0.85578509332794528 2.0414346263242482 -0.95076261879577462;1.3621101471543791 -4.2207493010895778 -1.6703600712380799 0.27561651756689198 1.1006279864631172 -0.46432367771694683 0.51572633220793618 -0.74138591216055982 0.49550594263817194 -0.036241817007592381;0.4882530261750192 0.80532858582273836 0.020818706754029408 -0.33608838411345004 -0.4146388041897725 0.076444610425836418 0.24029654639598294 0.34472247605003292 0.20124335007511218 1.0216521633978755;-0.0017342111200824798 1.0561825889516712 -0.37860055507989443 -0.60334812601326271 0.063109024786119378 0.27612595128898781 0.41521673456419345 0.018609432819724728 0.20063443923463789 0.50760689368745082;-0.27822578171056683 -2.1849919275020397 -0.2766541067676509 -0.2889356081834269 -0.087295685932921252 0.047478039539723731 0.27640069425971614 -0.063458292564820135 0.078624321291674792 0.0058349801743918144;0.93066205757730458 -0.85761685998838288 -0.50645982942092127 2.487875984772435 0.74094076880707405 0.45164451228299435 -0.60396989637631304 -1.4557759663584124 -1.8374298071225166 -0.6285171734243532;0.15493136749732062 -0.17533767102735334 0.32798877205804761 -0.097012310307869845 -0.044302485231555028 0.15416638437537597 -0.049617222188347819 -0.035758039801889692 -4.5377217379125998 -0.49171705984695202;0.21639151545655813 3.3739969416052968 -0.34669036188052421 -0.08607667014755313 0.97561618408580952 0.32147385109297349 -0.11072488630922291 0.25233340479123911 0.8475159988432317 -1.1553117204428476;-1.2567302320044471 0.28439803722469281 -0.8510735980471138 0.054281088172458559 -0.20423201867359994 -0.56660093740318418 0.063019424821288347 -0.063195145469041383 -0.26221548149436769 0.36505115684296091;-1.8421814134380206 -0.45013664070389986 -0.41633641331668569 -0.33565730177056469 0.006540814045644874 -0.0885582927356066 0.14720706790283203 0.23898244269830993 0.1126634376653315 -0.52389253265525859];

% Layer 2
b2 = [-1.9624874469911457;-4.5509547556777408;-1.017581277481358;-0.060054260046373799;-1.3630203599598054;0.83100219167092637;-1.2259120353763149;-1.0535594459258608;-1.8147946916450217;-0.51826468181307617;-1.0978106846444466;2.0622799400292084;-0.25391839414812378;1.7003217856933412];
LW2_1 = [-0.73498243540351205 -0.07230979254469215 -0.15562211313980068 -0.56775545007720829 1.2894177767396195 0.39044602054235999 -0.26504184764382144 0.46677026967370588 1.0157063701758378 1.1877860552814701 -0.84793282819238347 -2.4989278085896074 2.7667809063655087 -0.38675991187711528;0.62729250718194507 1.1639973517215854 -0.47684406627051196 -1.0239544137862902 -0.78039871346068568 1.4064943594360211 -1.8508165274466715 1.852445296608092 1.0132832142880717 -0.4734428654299585 0.36263843617872826 0.76637606194712549 1.9367347724355781 -1.8896122744874126;2.7797239828219031 -0.012407351847333409 0.91393470386794995 2.4987985220896531 -0.72548582934570827 -0.57209038792810529 -0.42504838246421156 2.086508893161322 -1.6176896047906886 1.1183017841191496 -1.9257102324563118 0.92766174543651059 -0.82164332656637873 0.52337614180930991;1.155397895492327 1.2825753305807988 0.66711105424984984 0.53309640401834624 -0.55396429506537326 -0.039480788750651183 0.75882091118162798 0.20501064775366284 0.62468654435627324 0.48906482102737497 -0.095912283678797172 -0.16209379878891556 0.1820301174220027 -0.4568137205643546;0.65207483008487832 0.75854119225814876 -2.6275827019106335 -0.45781333672548585 0.69088438860985291 -1.777271086535243 0.13260697600572405 -1.1649190512678707 -2.0138068764641983 0.13844241047331513 -2.117945492430882 0.044349756646176602 2.4480721942163868 2.8690877651677487;0.084969911621404812 1.3146354300130145 0.13790604982950633 -0.40237431811473773 0.033377473472788924 -0.049568466353071466 -0.35936061055180091 0.51079707861083723 1.3411400302981642 0.50801256188236277 1.8001831381571027 -0.64747435944122211 1.0996469683761916 -0.31614111378634085;-0.28526922115199554 -0.88950395729114007 0.23836115272430072 -0.66878633984060354 0.31562988448742607 -0.05628691872618409 1.4384418213032133 -1.7576555909849017 0.2130552291490766 0.87970672862781862 -0.25616633754822338 0.21618451057338228 -0.60770616881057171 2.8640998063019811;0.21875782537719518 -0.80492899471854629 -0.044667400902736729 0.51560704924199219 -0.13308738604806442 0.084118427706016866 0.41000619611232647 -0.49556619906623672 -0.89923628517861387 -0.49172205857401829 -1.8427590058626366 0.7890828933041627 -1.1029699430910942 0.14727339258673214;1.1307531795828094 0.43801134487300558 0.34025807884603182 0.58869253827997858 -0.47084134814576295 0.50537068657114381 0.51907605864358786 -0.14148381902554183 2.6383772665548522 0.20550999172704182 -0.13205757452262321 -0.63290482815124816 -0.74912041185553435 0.64020965495192306;-0.46809255940184208 0.30865047604131601 -1.121959089605681 0.99767964332434111 -0.93321654560786937 0.68047083146763176 1.6699388366795498 -0.40614892593597085 -1.2891025436787289 0.37439094379351301 -1.5266324317384874 0.33532697005394052 1.2779697990526386 0.41258823506367837;1.418637041682175 0.46921064717181798 -1.050810130226651 0.36759929139328557 0.5434108923424148 -1.7816238693842978 -0.47512210389173509 0.071150069356205159 -0.60947007219767557 0.14587286993635024 -1.1007170513063667 0.29975564566354435 0.34785474306949921 1.2194240750339629;1.7447766198919057 -0.10650279859514028 0.81489083611003221 0.61236924560009809 -0.46039249378263658 0.43184336693254932 0.61024846832784796 0.4110837884433321 -1.4837976508613928 0.2533902225196264 0.097199773190292896 -0.34471322364114498 -0.45375414852547807 0.37184620608143121;1.1305743095006922 -0.20728053028288188 0.68438669010249065 0.63047429548968037 -0.34502307876143673 -0.46466805204216816 0.59115174938385284 0.37505549110208536 -1.6191582186199727 0.17445970028303862 -0.071710458545776748 0.5577508997434476 -0.5517623375598254 0.52293251900709825;2.852123691023797 -0.13139135574462343 0.38667782413589608 0.38601630559855354 0.21770061049696671 0.59753695512885907 -0.23991736841925279 0.12403993284602495 -0.58124415642116967 -0.20885999912310599 -1.7470151440934183 0.83211060077067156 -1.1831574369316233 -0.016687373193770547];

% Layer 3
b3 = 1.4252746885842196;
LW3_2 = [-0.28818940952543165 0.45117756774023576 -0.13766802601332478 0.83891256119289814 0.39927269359469653 -2.7981805862127893 -0.68012322576290418 -2.6908008099721754 2.7987498011282366 0.18553655613406059 -0.55010548023642325 -3.1983260499315862 3.082350460876961 0.67588851768593827];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
