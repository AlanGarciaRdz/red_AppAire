function [Y,Xf,Af] = SOXCentro24(X,~,~)
%SOXCENTRO24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:30.
% 
% [Y] = SOXCentro24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-3.5259995859485489;-2.3613548995988056;-1.5607462765863735;-0.9656154991174154;-0.63292415369139443;-1.2719675209609029;0.32672625229932739;-0.63187847940628528;0.381890271460127;1.207045289596367;1.9678293006214911;-1.3512008175546406;0.21309057515581481;1.7129744606819353;1.4785643936617034];
IW1_1 = [2.9832703106019216 0.086819216537608407 1.2244535890963373 -1.0006299432141479 -0.36399494509594232 0.61194210861063481 -1.0364698874643745 0.30845447080135946 0.37767108830840279 -2.3081131936169696 -0.4753864371753399;-2.1272954367118073 0.15870496256900624 -1.6827222803876563 -1.9276077105897698 -0.70296601987564589 -0.98274980776799337 0.70166783169843072 0.049895000342663677 0.12421293905638323 0.54056054787079699 1.8449287554992484;0.32025199046189401 0.042157558923820906 -0.59016974567135616 0.51927883232433703 0.15151348801949732 -0.17433886413925501 -0.33944483125404695 -0.73317455946961874 0.080609788500100449 0.365996634847368 -0.041636563646409525;0.15510123189031275 0.96926461647718209 1.0804879340398574 1.9177580369836451 -1.5238364814403866 0.74022721845660255 -0.82978578387509949 -0.66856219350272506 -0.29589481593105776 -0.68204094172145779 0.31482837989711282;-0.52983373966006431 -0.51042614830620314 -0.1622846774632431 3.6480984189053842 -0.14370668399404207 -0.0051496933713124915 -0.77399927209584574 -1.1745044658419428 -2.3515856983110539 -3.2087686148720049 -0.033629137427361754;-2.4062255693113759 -0.81993323739574031 -0.84560391686780367 0.20054889042281607 1.2837277890134313 0.3141916054034597 -0.78291966664370605 0.093054168189166189 -0.27998474186349309 -2.1793815513693553 -0.6309859180227253;0.027193767431208889 -0.67339864517156722 -0.87556276716791837 0.69175489891313702 0.77744819748495675 -1.1918606914575627 -0.47130413075286881 0.94700532926029679 -1.0449252781477216 -1.0123683363658804 -0.059751182497229383;0.21042858070371856 0.72184614839215655 -0.52155773413166417 0.77501476060014984 -0.036372941226670473 -0.85023811791776638 0.51726038696310617 -0.29368515311495941 0.24420546180169947 0.36132942452341854 0.36982362811089325;-0.95442296430779061 -0.28515144639106749 1.0586985788018917 -0.10366391681899687 -0.31828889849603814 0.90413127950211314 -1.2001452375937578 -0.030557957090960024 -0.16457665185226811 -0.601699499388614 -0.11092300303384561;-2.4936035177414415 -0.29653906851297451 -0.61173434233096247 1.0794163223747995 0.60852858534477727 -1.2063077948015797 0.4136272718135654 -0.17583233725200687 -0.75143614580870444 1.0412934670944622 -0.20192562229901106;1.4409468323142647 -0.60711175294897091 0.99322167565755926 0.076966710831927757 0.038826887270995827 0.33507280599607264 0.82218295376078554 0.26585550904124394 -0.49142066788081018 0.92204508647596106 0.13890174066115327;-0.30290152065658316 -0.73256235269864567 0.81060870210819314 0.6185803767887732 0.40328452702955908 -0.26775007221194264 0.91326232878992508 0.25337513704773784 -0.096717843190440217 0.99711127727237459 0.34883457286388614;-1.2551394730155288 0.15052654394386666 -0.27305401647619787 0.26288345375911659 -0.60036914888235093 -0.3083779579055772 1.7395986812896593 -0.20261970499120585 -0.049598635474999042 1.123555420627717 -0.32236730533447966;0.69154409574476328 0.11292726697751712 0.62813063812240055 -0.571650890660509 -0.61248558985270096 0.53652617882746179 0.1432831839849277 0.20578133208339894 -0.63149837453748581 -0.56217718326888833 -0.2027380681227991;0.5165161996655232 -0.52989820665868292 0.3549074295345811 -1.1095306917008738 0.47564979293593329 -0.91013676975454394 -1.1801546749625098 -0.34002494288057111 0.60425629589640395 -1.039764904818421 0.80018729798742327];

% Layer 2
b2 = [1.8671346036900203;1.5133857574497815;0.71627965720983244;1.2215510455051732;-0.69477812617751844;-0.54686037627043005;-0.14898514592929768;0.39597002922137203;-0.83533353143972167;0.62048679639667481;1.1015127070677337;0.56584753258622555;-1.1157217043867156;-1.5476183801831589;-1.2750137903795515];
LW2_1 = [-0.11208343414101135 -0.18498373896337439 -0.067082177780243724 -0.25500381187256532 0.59306419262707144 1.4197918094675341 -0.54840660623500692 -0.18875185653436136 -0.99702481273629773 1.0690897295206956 -0.68076213514970729 -0.57032480721291601 0.70528007526507319 -0.24374971691346453 -0.82063538263873592;-0.21696976026322781 -0.86972035088635669 -0.63999152788858005 0.97140386638492282 0.19791872854548193 0.02283456253318171 -0.51042298900383998 0.35388400869059572 -0.57007022488024151 1.5741853194864899 -0.31943273137892869 -0.77114214141220927 -0.42441840096762418 0.6076360630823513 0.36319050478695636;-0.36854189912740565 0.3153107603801496 0.055173565726239458 -0.3494587566946773 -0.036184467064648874 0.57955587341821468 -0.55385610264648832 1.1419517938888908 0.75332009331804739 0.077348006711948802 -0.42383381122942254 0.61009882810810512 -1.4343562992635783 -0.94241730389448786 -0.46003951503228807;-0.37845611430418152 -0.97083019038240814 -0.88860841485060971 -0.21582735594457808 -0.39236682859780281 0.25350593178502001 -0.30438641205978034 -0.68422613861513393 -0.04423768159902261 0.24248388630266698 -0.55071638861233696 -0.38307476764200549 -0.24515421255994632 -0.4205133732807867 0.31833914752681691;1.6213806524335121 -0.046644521836840126 -0.2512112649373982 0.99998911637094068 -0.10977042106422179 0.44357903644133811 -0.029023737463236103 0.015206538382867452 0.54024461552177194 1.2771446818756269 -0.95279032980455403 0.72849691030624319 -1.7937609705537469 -0.019643802956048576 0.67081970384995793;0.91249112113298103 1.12382271312008 0.13232784144050475 0.41024260821904734 -0.24904421104673777 -0.60691944392814035 0.086552857930866978 -0.050488988964423887 -0.17641644483701341 -0.90684381389470081 0.21629145764290808 -0.19372581716442297 0.016644861007472374 0.42053787623303296 -0.17877110692435413;0.24398139186747683 -1.0679878085130845 0.32509940028723799 -0.56362949883389035 -0.64064287572778578 0.036906994687025504 0.51797434960834021 0.32596593929659917 -0.62086590248725426 0.166496609397286 0.66141499747618615 0.34927115474731374 -1.3609008962060005 -0.61122929721559249 -0.71779499557003235;-1.10102059362331 0.93422292916363203 -0.13136213049827916 0.46619466990169744 -0.78701075011317179 -2.2974433098689557 1.0322347497119608 -0.7755775925516788 0.18226815582125216 -0.44594232947522267 0.94341225621587155 -0.53950941055944013 0.97329299104717892 0.46547262486144075 1.2404435446182396;0.09400632191084797 -1.6351460920031193 0.81929597648299568 -0.27801808096875991 0.13062386910622237 0.68814590532064634 -0.064444695146202893 0.41593114802497327 1.5348297780471185 -1.10098001207055 -0.33725036222632288 0.61543093679092831 0.65736077670541659 -0.13594793544539524 -1.1549909661640942;0.53835684568522824 0.38302880307441722 -0.73701476563164914 -0.60317936692340057 0.78774086166853219 0.31474565343459504 0.33697519611555282 -0.0044987501155356671 0.078558987308025283 0.12613462549188026 -0.40377498006641244 -0.14726621639227927 0.16768858999231301 0.69297689640421456 0.033699384657172968;-0.39228599770026984 -0.63769169316872498 -0.86893043426746286 0.96340990991654862 -0.93623518005070072 -0.95027792557460233 0.1383160629000503 -0.34917004676395463 1.6282644182274273 1.0285376914133195 0.92908911589692733 -0.38487464014372402 0.51184585927959869 0.28847982694774343 0.33825561467271037;2.6796012243873233 -1.081053319317012 -0.53343045190794269 0.22602163387443619 0.65642342079694893 0.6106172576038118 -0.50640123771110634 0.12782931661509289 0.1762016530841789 1.6739477288123823 -1.0481157914465116 0.88707801599146874 -0.695485730704125 -1.0953112206925875 -0.31839800311099087;-0.13525014953896575 0.12098275493344775 0.33901483876205929 -0.36968674537741464 -0.23703917122708848 -0.3828308980855798 -0.44545757645004375 -0.23806233352936587 -0.75861388230217719 -0.24947701995728835 0.50897637483537295 0.49739360871880767 0.58670291261078966 0.78242451626282883 -0.68112173105666363;-0.48909484559804861 0.034296797295704437 0.38943478733977976 -1.4981142499584013 -0.34670910329043803 0.89006916434771621 -0.42729581381756426 1.0525758856981919 0.13368717928139046 -0.28036490603807174 0.58931874506094628 -0.48356535521320876 -0.26779528560536969 -0.70650180821812003 0.02678808451594375;-0.80241906705691624 -0.15763976001030869 -0.66457370552375317 -0.39642818692799331 0.1714886237991384 -0.43039410981921106 0.41069400434477199 0.0066041130572509522 -0.16612704440721135 -0.31414757826160489 0.63371125293057096 -0.81162901431437595 0.62105079371906058 0.63778550969851144 0.99079117606624378];

% Layer 3
b3 = -0.29915993013414732;
LW3_2 = [-1.1494623349774689 1.0969565887778465 -0.46081968577301963 0.37194952856857272 0.31329206021306816 -1.1335413200422082 -0.16344583772934324 -0.48485345053186385 -0.40283724313192609 0.265858502507759 -1.907445143985226 -0.45874747866589827 0.25360073445145803 0.43607201872342344 -0.49214996163871166];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
