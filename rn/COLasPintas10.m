function [Y,Xf,Af] = COLasPintas10(X,~,~)
%COLASPINTAS10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:00.
% 
% [Y] = COLasPintas10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.241545893719807;14.7058823529412;0.0179856115107914;0.0558659217877095;0.00576368876080692;0.212765957446809];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.58531879412568177;-1.8881716510122799;0.85925073186782897;1.1040514987075292;-0.93838892662048168;-1.5619665372183389;-10.416770660431519;0.38927687157104157;2.6283972769689816;-2.0935597355114517;0.72614950491809371];
IW1_1 = [-0.10790081951312563 2.6654279816764084 0.20504108821127459 -0.86950402836443752 0.026444792597937385 1.2798876458464719 -0.079540176836895793 0.87104700528584367;-0.32416750590569904 1.6147204321660718 -0.40950843356506644 0.39048095803634969 1.9512715226777695 1.0803471884804463 -1.2438747714602847 0.36151927111007359;0.59253843483525093 -0.83810865685048441 0.18533068962767602 -0.16528436424673931 0.31721523173349281 0.10165003806040548 0.086125920552838783 0.38225647030632615;0.0089127181813666578 -1.5569080290538577 -0.22810906586488111 0.23871727441880169 -0.10016927705513529 0.18541052887277074 -0.16001817195535201 -0.45426052876965251;1.2056103181781972 -1.3904733394824274 -0.88132319359737965 1.4290743335893235 -0.18109516879424389 -2.2739167298403204 -0.92788688207588266 -0.54885319563415214;-0.20089372851408172 -1.3602776111589199 0.20285806870987405 -0.23111506439135365 -0.29755486858799085 0.18398420464345691 0.32026210009131223 -0.16552316939049846;-13.734057171140691 -0.21518402147520069 0.29283442402936721 -0.18973291809755172 -0.058930726115924571 0.40577118042919835 -0.031646111374829561 -0.5223683973176928;1.355024676226056 -0.96717030361473311 0.26081925297619146 0.28950867990372769 1.1460640908044584 0.81905814976430502 -0.15677857729378539 0.51717840182560182;-1.6180389991945319 -0.67557989360244719 0.0082007896053537949 0.53586874922133187 1.5843163901097423 -1.9782970977016843 0.23213413185012491 -0.36374027340532705;-1.117121728849549 0.75725302490585 0.226041812897601 1.1542038017210401 -0.77988956449279345 1.6190922490745778 0.27019565848402483 -1.1497997228803356;1.3554410297928516 -0.39614749797411297 0.66189115353750205 0.22723745746066065 0.17786458498190094 0.47978887180194491 0.24913560934246665 0.10969368777753011];

% Layer 2
b2 = [0.097579333575431082;-0.74095780654873578;-2.4814223838231739;-1.6310956219277757;-0.0062039375931888657;-0.94066484408408124;1.4147680340119242;-0.07084631206410022;-3.5589256905684863;1.0792335203812744;-3.7148603292480553];
LW2_1 = [-0.44271442632509256 -0.84325959824547669 0.32298949769487506 -0.19277846246704852 -0.40836505031111914 -0.6702297850776231 0.10465114774948167 -0.53389373083433933 -0.48825077885453816 0.20486826504332045 -0.33097103023655;0.10717133071872995 0.45551376218006329 -5.0660651042807316 -2.3662160504545202 -0.76997603549411398 0.1962590490108484 -0.47693718624105824 1.1861352437588102 0.034943978606793061 -0.76413458874633955 1.6284259317571486;0.59122955889622486 -1.7714387077143603 -1.1113674304508212 -0.97290112679747565 0.82609930613490301 2.3788377996873749 -2.8221897364342725 -0.50789975231891615 -0.4131275118451842 -0.047404182688031662 0.79963186370148054;0.6250449008314608 0.055650924217042132 -0.03843653259926591 -1.6124685458479247 0.32556244660046263 2.7549081602562726 0.31508400711467588 0.33914928377316256 2.4984760705473943 0.90999928260547036 -1.7635302015956567;-0.48480294452416012 2.1676533499287407 1.262965659149327 1.4528023676981472 -0.84354442250715345 -2.5119965379465521 0.33899774048745879 0.80834008076737474 0.45304743384839702 0.069560622169939398 -1.0130875347412258;0.26151154101078067 -0.58571912820453387 2.0638029764199812 0.49211938723033333 -0.25869699589458317 -0.58616193541753869 -0.11262662334358892 -1.4114353275161611 -0.53990880760121474 0.46819165915829519 -0.15867058717819563;-1.9305604899742685 0.97739857554780007 -1.2099378659917028 0.46856403654730816 0.63471464145664158 -2.0949876863415837 -0.95391868708788818 -1.5156302905027297 -0.44099107934831466 -0.83894957026622929 1.7566430662571335;-0.7811391350550656 1.2640463077609632 -0.24087328201976116 -1.6288566451153255 0.50411815561515538 0.92014513551565336 1.3837437483909842 -0.59781580659692057 2.7747889646246549 -1.3112420240029672 2.9433019652902028;-0.57986566598963418 -0.27916076761305419 -2.3841586418345506 0.83379079498101882 -0.11702559346800775 0.090522847438298096 0.010855850133968056 1.7314963461744339 1.6261418032418626 -0.71057011166823403 -0.43096996946639543;-1.2634243768601237 0.11408135368591421 -1.569300220557396 1.1371994088854138 -0.60772004324076523 -1.663498224295344 -0.97932552046328769 0.77566386258205011 -0.15693152334713281 -0.90821447217928464 2.6307465800101193;0.015108667576504212 0.75157692267636866 2.43012494708293 -1.5466932382381757 0.27063643438735657 0.47385949001882505 0.75022662421037978 -2.262548275312299 0.90219922413807274 1.2634600767393585 -2.2338607076709072];

% Layer 3
b3 = 1.3440015999493549;
LW3_2 = [-1.2114368990460573 0.56525089683480112 1.512884956426928 1.8053595773150855 1.0114858404187665 1.5195934240859441 0.79776035387068289 0.13818703472556529 2.095602497316055 -1.0133192905610047 -2.6806021765827608];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
