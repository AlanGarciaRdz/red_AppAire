function [Y,Xf,Af] = NOXAtemajac6(X,~,~)
%NOXATEMAJAC6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:15.
% 
% [Y] = NOXAtemajac6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.04040404040404;16.1290322580645;0.0210748155953635;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.5896886344736141;-7.1039309982413172;-3.458695542246093;-0.068088926936601207;-0.6153386459509913;0.23719909208762921;0.041877081724416135;-0.034009701162846982;0.65650044401534968;-2.6796550297807897;2.1866375124852535;2.437494535527958;0.40484380818320381;-2.0206305381767247;2.9049253494035341];
IW1_1 = [-1.3890193005059048 -3.1799592890831549 -0.33206062494972272 -0.13271842040755849 0.46221317561797909 2.242512926032195 0.88258620928055309 1.0018679945381919;-0.1816244576318318 1.052815105502577 -6.2866254614564827 -0.11525227079233996 -0.69381527025500445 -0.66194324532060012 0.13867326719443851 0.24983022113546602;2.0783288239798456 2.3926252623885214 0.061212772973955054 0.96020778418251307 1.1623929002739144 2.2896761111161053 -0.13183210680566543 -0.77605121195824756;1.2067891610130785 -3.5079452376553122 -2.1106820938949222 0.31467426052884639 0.46609150195497806 1.3713771192361672 0.89554018799700796 0.58421731844795033;0.52721452837011007 -0.21619776945656585 0.16800564826354419 0.38294430092900206 -0.5725424379615538 -0.71277159204527729 0.18817525298873009 -0.10221066598245303;2.1468210395605509 0.29998818990756837 0.071461187667253123 -1.7787294551491406 0.037509489705312447 -0.62966158311526299 0.096655102663243023 0.067343261638972779;-0.091163570687392101 0.31071198666696953 0.77373126447368112 -1.0981509980519644 -1.1683118487249873 -2.371834367412927 -0.19845615299800839 1.4340592658510447;-0.47392323646189194 -2.3742655358759448 0.039340324338596647 -0.71888052049148199 -1.6833307221486098 -1.8001177406628717 -1.1600616297531015 -0.38441440285790485;0.31196820101897893 -1.643462078302083 0.80489232477023687 -0.37340142964441758 0.7992815132821095 -0.15814279758998401 -0.17785460747761161 -0.10809239497205676;-1.1938217490439569 -1.9969521935259591 -0.14589324152756494 -0.78419231691839297 0.5522152059614146 2.0163499760628079 1.1295375380493626 -1.9779214865919743;-0.086648101339923081 2.4178754818580224 0.039996221544118624 0.18906052908009718 0.03078372433864323 0.10293392785943563 -0.023051405619709149 -0.1821619792618599;2.6710869790673675 0.8929523947625464 -4.0766386189950374 1.3301621903187657 1.7120117605235989 -0.69492494317691778 -0.0085893660355263537 0.70626970711665349;-0.44417983870042804 -1.2444150666947975 4.8025451936325139 -1.2952491002913613 -0.87393386085423741 1.0458199513530662 -0.63496591632037969 -5.0348466198263058;-1.1640654864475382 -0.052557790680402006 -1.1374667258216227 1.5314130402392876 0.23857624344850092 -1.2193915272745004 -1.5241972240391419 -0.67681764346168771;2.3651904461030111 -2.1485722573939712 0.56260583955750598 -1.2315423017686449 0.70878902089939155 -0.13265963334440031 -1.1569316331201165 0.91138696431330579];

% Layer 2
b2 = [2.1891266153483722;-3.1867206232956082;0.55449183746200437;1.2635686276473921;0.33879910465429186;-0.79423301791293077;0.31238692263628792;4.6542538781604366;0.42405633900264522;0.72084775425150516;1.7309559882951326;-0.47973783522982894;2.0301874223371406;-0.82359808010225721;-0.64728409989517033];
LW2_1 = [-0.76932475449229443 -0.11300330894934138 -1.5166343288251463 0.043931997113392018 -0.2113270116729721 1.1613775507924977 -2.718527344632458 -0.53625904897686028 -0.83178051295471522 -0.59601882388825422 0.30346455297136937 -1.4445609524448699 0.0075435723369617624 0.45384517015068337 0.99381969781988599;2.8790514931692193 0.21798688326643598 2.8765743834209103 -2.5282906502634503 1.7307150426582947 0.72919888991338344 -0.24364499302652709 2.8196073427181165 -1.0131091022540319 0.76730518955331162 -0.39985462358513335 1.2096946298028786 -1.0294509979612543 -0.55537569875363735 -1.384496574309398;-0.25899271240444799 1.833462833559522 0.28560281655581488 0.4003823287423845 -1.0550015748215087 0.53344176290128897 0.39708184054588003 -1.2303539865361257 0.55869169264088803 -0.67299708948445303 1.5447235876657652 0.26578388466175396 0.62620579623805395 0.22761333396453953 0.4932977878908984;0.53348152221260137 1.1947246050331544 0.74519456179897359 -0.23856119979508786 -2.2970422959872461 0.58015712586125889 0.72915674035378453 -0.31820739599540765 -1.0147723319578696 -0.086671788434448727 -1.8527627333052323 0.51165357103361642 0.44326365576727628 -0.04624472751426225 0.56667864619733543;-0.027503124904839291 1.6365248674169721 -0.93310963759435628 -0.53021134472167208 -1.5148026334954166 0.70174030297834544 0.25495234577828191 -0.88030707837402011 -0.25224375465872545 -0.19106217651243568 -0.78076945065256242 0.69307061342260978 -0.23283344362279607 0.21190726078474298 -0.35958964380164771;0.49242290353792373 1.323876679261812 -0.79523391046436065 -0.2575085850543099 -0.97670419840855738 -0.36143643437249956 0.044197259658252309 -0.3397566640497815 -0.016987143092771946 0.34365566138126852 0.15497447428670444 0.57898628239501293 -0.23908706897669024 -1.1357331332131544 -0.14628042697111143;-0.22155829839672359 -0.29647561066148598 -0.92566400800272219 -2.0006125197474622 0.064213153907533127 -0.99961125773655191 0.98426963105613541 0.16314983620960249 -0.98556364791667839 0.31014268309345389 1.3660182097253994 1.3006833359408738 0.60093929135279323 -1.4963967727901408 -0.24839377510392879;0.46457893703057218 1.4429879552762432 0.53476155384955337 -1.5461340609501204 0.16299085731410298 -2.8951275611010776 0.40576039934540592 -0.25609091556758506 1.984324088190661 0.5805204470758073 0.85015836280565882 1.017426896565317 -0.18750048413447779 -2.0912575429506783 0.24938023410395793;0.056672039047820741 -0.58664568543464068 0.3236285758181916 0.37476641862177812 2.4071310703935604 -0.79762715860607081 0.27333036339360101 -0.23735293822226486 0.98975390492275128 -0.22465220986402831 1.3534621388765551 0.20826593949796934 0.41973999922479804 0.087368388483852352 -0.76360373119956571;-0.69544512292580962 1.6060172782381235 -0.57594400972629323 1.3172803065173322 -0.26394621856867617 -0.16929853794771543 -0.52548816301288992 0.1124733640474036 0.4203109778225112 0.2590325455358094 -2.7593927019856306 -0.31688506555756407 -0.11746534911893645 0.34591148749010026 -0.32126976979013383;-0.18087413792832796 -0.054943929503589728 -0.92605176093067432 0.058026458276695739 1.4490704310152258 0.57218203841462678 -0.11729109287546553 -0.65592121827631955 0.26285109271239432 -0.14698727533922146 0.26608963330707408 0.12603155920481515 0.19611335342432462 -0.15630304669139036 0.54332893135745941;-0.29036645079127316 -1.9380532037683145 0.86810439083954949 -0.16922593192875524 0.47457896580416947 -0.70313903605505457 0.019911098222876285 0.93812105222776832 -0.5065241429440186 0.56052059388880349 -1.2226477072369735 0.17130276959383187 -0.033477924807107796 -0.54284121967984167 -0.042230457283368987;0.55023425854106023 0.63906200275127889 -1.5922208508589311 0.55596323937321501 -0.27282720242562092 -0.13623171693124286 -0.7253236502526228 0.68515498727717816 1.5092773289765058 -0.2874905391615265 0.20947925452839833 -2.2091024873279705 0.18625415271289203 -2.3286642395233565 0.38568288727026301;-0.72342028296471106 0.014785306921645432 -0.50408200779576495 0.23221129018229955 0.1093423641874498 -0.45295908341642499 -0.28791078761241684 0.2089000262687471 0.092458499395456029 0.3947163471661892 -2.6713256716571259 -0.088864909287482904 0.069877913824940865 -0.035887194777446285 1.1047483619026779;-0.43151769939845441 -1.7499435676874937 0.50136569440379286 0.26197100053735678 1.045867629662778 -0.55766454756222505 -0.19477814640624569 0.76147331820837971 0.035113889335982959 0.21084425837113341 0.50714728737933146 -0.36191557245782602 0.12757679175264819 -0.11956935031088599 0.19012641166683086];

% Layer 3
b3 = 1.7541735752294176;
LW3_2 = [-0.23048943146443207 0.39594869092804613 -0.55420003611239677 0.42505672322015364 0.8079285199156645 0.40252896715049219 -0.31095148757169677 -2.7969853234475561 0.32821829754006082 -2.0810695693948484 0.93069668971317931 -0.96130296221302425 -0.24445048620135229 2.0994315538743056 1.3798636852337542];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
