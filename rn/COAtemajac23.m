function [Y,Xf,Af] = COAtemajac23(X,~,~)
%COATEMAJAC23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:28.
% 
% [Y] = COAtemajac23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.4024787563602918;2.1309476510453078;1.9550869624895715;-1.6690316729771815;0.60040420232270286;0.35777423187239488;0.26112056970630165;-1.0505212912321773;-0.40288397898783557;0.0058481395083119087;0.11299234742259381;-1.6186134770491225;1.6180480531236054;-2.0185025629121847];
IW1_1 = [-0.36746444210475304 -2.9768704245768758 -0.25443610512781056 -0.61584476992186366 0.021390843282889691 0.25809248148936875 0.33613386916088239 -0.076504716777721582 0.023898617890740756 0.15757929090172906;-0.68298419498064933 -0.081022403106334989 0.82705192661110971 0.22937129028134204 1.7750087665408594 0.62663777384405883 -0.87967829446563595 0.95693338685518314 -0.95426769509265985 -2.6489789383730087;-0.90992969383486355 2.0576290040466345 -0.49888757323957683 -1.0920279969087645 0.12249907799575493 0.023518213537517631 0.063529671362474172 -0.32503941352270405 0.27819544104785776 -0.30217920342887133;0.39444948798089607 -1.0113393709948169 -0.7343805692634392 0.1323977216753984 0.56438072434463038 -2.074137698366409 1.1102921549389249 -2.257495251535349 -1.0061160628200361 -1.1357223740468512;-0.88609461109994114 -0.54792682616595034 -0.25260927927686139 1.1232210971241787 -1.0268156039166103 -0.076756572780552326 0.086529302996296686 0.082070281247959481 -0.14288807348123381 -0.25073923377921603;0.30726801477545412 0.75885290708662179 -0.46916792697930765 0.12813049829788992 0.030152013151404332 -0.23265392860505346 -0.36985178913381567 0.15025065674100485 -0.0076359730105889419 0.40252747427419983;0.39415703545115283 -0.10230507235676772 -0.16455251520005473 1.0964731110447239 0.57738077380281316 -0.75633254803504957 -1.603035398512322 -1.2480985578684811 -0.25156300874009069 -0.27990890193306367;1.151917650896479 -1.6426833140008559 -3.5081648533358205 -2.3708062427976659 2.0895491854417982 0.90170647388327196 0.53397893033154742 -0.93729499510371228 1.1405620527494 0.98507923099921202;-0.82486652291963725 0.57595513986803415 -1.1239293675668098 -1.0063143136789303 -0.048955266478639688 -0.1823682276491855 1.6525063042720207 -0.017534032952665625 0.034131876293755622 0.60112582617041588;0.15690941542414683 0.42971802561254246 0.21880140590049865 2.2681993341812103 0.20135588468043891 -1.0010782714117774 0.3612234829811673 0.58113342720693262 0.45993241860766054 1.1012779237236374;-0.15844913175604819 -2.156421399823012 0.10759818481297186 -0.46497387651568661 -0.36345901532116237 0.21643171284209209 0.61403256186056221 1.6061404379668975 0.083763920778751527 -0.13402276921867251;-0.18246618987322621 -0.60329220323966837 -2.6732762995112815 0.043957414525873421 -0.023951412509359237 1.1064492066262892 -0.27313911389652967 1.9410649064661714 0.019332145193845098 0.85377434780043793;2.0542512162775433 -0.48415199160161138 -0.2582652110908939 -0.056052810605172108 -0.78355953312381532 -0.86969374424072088 -0.42563773826873114 0.26425022752217164 0.26206904893949112 -1.4312272041521352;-0.91871452779648377 0.63993545999625734 0.025273912655692659 -0.93926399431931495 0.65296198188816978 -1.5144752559596728 -0.64829019850631553 -0.12833079017563701 -0.46065252623168967 0.48631941916858601];

% Layer 2
b2 = [1.6806393134603417;2.1942546477724716;-2.3560500235328314;-1.3062987908327262;-2.1642760122986537;-0.44522951807646666;-0.53262955879343532;0.60621388381857644;0.082569496208504845;-0.54963411146342622;-0.11477512403750692;1.4883918521832022;-1.1183989912830059;-1.7675093646493791];
LW2_1 = [-2.1200801254476396 0.13352706001935208 -1.0413434774659294 -0.11881488951275412 -0.023518420722971334 -0.18656058045643018 -0.27970549516197568 0.1051677592006509 0.84011226628223024 0.16070151700482729 -0.95902668708759486 0.35719929241039944 -0.61565507880908932 -0.22782032042547343;0.60919850064080228 1.4573925566494401 -0.11899650184327239 -0.60172029032049057 2.7287685695865274 1.9375285133115354 -2.643760491824465 1.9732409428790831 -2.4919617639316001 1.8510740893500426 -0.28337069684201205 0.12742119703592769 2.1735161138751997 2.2707137505608448;0.820132406156726 -0.17665657726417525 -1.415599719469117 -1.3672286286160229 2.3987806767482556 -0.84930209501467047 -0.36496911884912592 0.87023167167213644 0.085011315514045768 0.38358874153977135 -1.7455308581193296 -0.95131625105578199 -0.1836109370301045 1.243111293097853;0.10701257946312148 0.18287962053072848 1.1316942613727992 1.2399307440670293 0.63560025772429518 0.089428119047264304 -0.65159424546619782 -0.10965013080857278 0.87281647403003426 0.08807793125261329 -0.3970668610801627 1.2341591179660498 0.10276565484212641 -1.2996719436015831;-0.49031834358704585 0.2033253017549761 -0.26013602519178092 -0.2158272016354866 1.2730149713744026 -1.5525951082192948 1.0022859940796798 0.36697590089945598 1.2238780484525729 0.74011359417625655 0.98827882464905037 0.074962051182991027 -0.30229109917927277 0.80657318813881029;-0.38535330877002344 0.46572768715297791 0.40414827007180232 -0.43512635498496022 0.21036233680269631 -0.59868525868698863 0.95786940935677212 1.4123896177962936 0.89063702465855765 0.6786075059811757 0.62261491724248197 -0.26967438837512026 -0.32691358325884023 1.1723033099572699;-0.048229018096426421 0.014379023513440893 0.036311732752080425 0.60103204999463511 0.39230192125359736 -0.20829382441009173 -0.51301599592421532 -0.45760748377859434 0.45621380587609134 0.11837986273681544 -0.38444855183004722 0.86591134949660209 0.73809344875166594 -0.95854094833917303;1.7638695732392127 -0.15450056434045401 -0.023912822438890959 -0.09705522221931133 0.164118262651272 -0.43889850808718761 0.60383131552691416 0.060684477352248453 -0.45279800428085687 -0.36449125706155117 1.318842342889464 -0.63126212785896341 -0.90121956092760636 0.12938782864767817;-0.24276428652936066 0.35490722526998464 -0.07886046906643486 -0.19307071590799169 0.041895504569791069 0.31513997721053633 -0.29291693271332597 -0.82888090452086083 0.49648217968951586 0.16708305098223 0.083838780579956251 0.82463720866288381 -0.34904873847904849 -0.0075983780215933376;-0.46998663035066696 -0.088798532814635955 0.74859149045904405 0.48460053331132286 0.44775480847265575 1.0688508346276608 0.06523446593782356 -0.09324454833945317 -0.42263143612021264 -0.012079047166388739 1.0004175100296211 0.14932228735582601 1.1883778186202789 0.31301638647115337;-0.019409298127869689 -0.1603065211593345 -0.38064047928808992 -0.039410032527556274 0.14363187170607755 -0.62797822496386435 0.17121299010334642 0.56064499793591982 0.078457604858204771 -0.026538989189904601 -0.23144116148090277 -0.32846351453175132 -1.0729021169591249 -0.26426314629622161;0.26886938016884188 0.81194129463179388 1.263541005310703 -0.30679767351730675 -0.43737087279107423 1.6893579290876746 -1.138573206081225 -1.1784242085691532 0.26993734860710439 0.95387881568931887 0.082804497380023476 1.1295349788431361 0.92265521756314284 1.5829949358597355;0.26950725298228029 -0.41209330309885472 0.020880723447096104 0.67431271998942177 -1.6350863791553323 -0.26152893303680297 -0.59040120568412591 2.1131340918122739 -0.52154760316735338 -0.38036920879157404 0.79510017252537446 0.028610928163251247 -0.94376452026753643 0.15127066005073972;0.31096541272187961 0.22549510513940291 0.1460829330939136 -0.40967193306488131 0.41820995858785043 -0.37282580702897361 -0.84319206401684854 -0.24021436046301053 0.63197315479115657 -0.20283594255733312 -0.039602422552552648 2.1555364702557749 -0.36416140681620263 -1.4176034589396389];

% Layer 3
b3 = 2.3249683235664249;
LW3_2 = [0.72740860664571017 -2.1540449751242856 1.0617331422450458 -0.26515202859727111 0.56848675140080074 0.061834047468462716 0.39566064116653932 0.63425174108825821 -0.28332209983063816 -0.83286135389554961 -2.007512100275588 -0.4663813791206341 0.093464382235925528 0.075729550603743881];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
