function [Y,Xf,Af] = COTlaquepaque24(X,~,~)
%COTLAQUEPAQUE24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:18.
% 
% [Y] = COTlaquepaque24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.6397412975658749;-1.8251271950832866;-1.8783291911967537;-1.3612438127933053;-0.66479669619689385;-0.17843527724745126;-0.74213160572485859;0.259207949517686;-0.0062967428542369495;0.24040358037685455;-0.91196776677209179;1.181541830691365;-1.392012987290091;-1.7759398726267381;2.2663717092467888];
IW1_1 = [0.89149596011808552 -0.63236356011173789 0.29508177613598047 0.34105190732155094 -0.19995915969453537 -0.63220955425086911 0.28873495498627438 0.005790647902331799 -0.2878109887630258 -0.5137049644809315;0.010488675367982836 0.90264065018475004 0.55735689971534574 0.60625218051986807 0.6122764287722956 0.45551003532493495 -0.81743620031574216 0.73552101220018062 1.0865504191051607 -0.41928728352878586;1.6569820044994525 -0.083388758613422931 -0.6216500450489465 0.14820994662838005 0.47287790626292237 0.094090213852653121 0.407936718983894 -0.16505776947406023 0.29966876439181367 0.07080902512077461;0.14459013559371955 -4.2152529759667745 -0.4814842608500996 0.32736865617378447 0.10051571750744986 0.25180647410001006 0.058721202620648963 -0.21267008863866552 -0.33402993885150223 -0.43075436253635446;0.75174895798760244 -0.064615482705027386 -0.084051970972303908 0.69247334595579979 0.2350249028902372 0.52435505012246808 -0.12298088174143128 1.0739477269824507 0.3314904881115317 0.95622500591498694;0.3384496942616555 0.22803786191470124 0.38475897161396727 0.30826940731703351 -0.13643931083565983 -0.59403478650882569 -0.48406006597548429 -0.090623873796459087 0.75912966121435588 0.5202665707180002;1.4899151369093708 0.42850489456185914 -0.68242172048918892 0.31855484030303449 0.57489556260393926 0.23057884041040222 0.60301465498642493 -0.30914991979017636 -0.26512649757011386 -1.2325304685317247;-0.89590215843813914 0.17517207231542811 1.4227829982000069 0.065535798778671481 0.10639659358482378 -1.0085483791704943 -0.64258836214336679 0.33562307598874958 0.81617573057654258 -0.58670363194492836;1.1554078434399984 0.033936378586297652 0.67508743897097179 0.45673499424840119 -1.344843584237104 -0.98416917659201542 0.49529877234247804 0.6539672721881955 -0.64097038280146146 0.45959808622141979;0.64194736200464997 -0.7638773647055439 -0.83014924021841896 0.69797162093526899 -1.2421616626004113 0.20830640000162323 -0.37332096205684823 0.77991193251360891 0.21616702414349567 0.43784408708616873;0.45696026028716208 -0.83680656291398536 -0.66872361950499226 0.64501435869961488 1.0571815623975478 0.57696597599084243 -0.30266301827781644 0.51730322499952253 0.44264724408945483 1.1328501868801597;0.29609521261873978 -1.3310828885922421 -1.4327466859592293 0.01750378626249384 1.3220391334590338 -0.27209873496632492 0.7525418777047066 0.3548195925996625 0.27500132990990334 1.2537648845130951;0.018240707061665661 -1.0691185470345723 1.178852542061483 -0.83935661534073425 -0.88824947891535433 -0.52652161901238004 0.1531239376339292 0.44185353952531065 -0.54769045736393485 1.49320246307482;-2.0829292706491742 -0.14982047369090642 -0.66616808022254403 0.018123323835801612 0.51579543144052276 0.66833714661446975 -1.2235487950313659 0.02281982117253608 0.16747923524143332 0.014115212939956722;0.6098054574045233 0.22399431366177447 0.15924199231754418 -0.15911948322463459 0.072882459535500696 -0.0015656447002174996 0.045064480556409908 -0.3047247769810757 -0.33828338812742192 2.0858977443206359];

% Layer 2
b2 = [1.8060394757761999;-1.4011370060870025;-1.2775063123962545;-1.4379695004884256;-0.64878254401247726;-0.20539165090844821;0.12560574704797997;0.044693807059437797;0.21993032019046949;0.43239662459047135;0.48473520519942415;0.86800707734419724;-1.1345381038332181;1.5621581306080543;1.5561695436047447];
LW2_1 = [-0.35636581017454216 0.48245432316511877 0.53675870664776126 0.79297588142522757 0.60823376464209578 -0.73897367680401616 -0.37651447403050442 -0.68312509779160413 -0.19032712581236241 -0.15144670786317133 -0.42040480236818256 -0.20439460656657232 0.13375196181441038 -1.1793649378892479 -0.41078048452380889;0.054450372339181305 0.61014079647518993 0.13740035425403627 -0.27240802920262741 -0.07425654649759611 -0.76387247512910861 0.3101878394588462 -0.31417678304843766 0.46831052125787487 0.10499219327913775 0.50976010856696208 0.15247499905362877 0.19396149558041545 0.79601582524475101 0.74197861588631409;0.48211357121853016 0.13374696706751046 -0.85873969614375723 0.25277507124401793 0.094185769183442888 -0.032915810443856448 0.1768635942430784 0.5090212625309255 0.65406803532837654 -0.077030037283882608 -0.041583110006393142 0.18674843776830097 -0.2463645611460851 -0.60755197869421118 -0.45896250946525852;-0.09989359305755123 -0.052048259856238732 0.22408214629668291 -0.35062094072211109 0.76347229826022844 -0.70422392274457668 -0.35843952997682849 -0.071544588991983238 -0.12640066952660281 0.42856287208928356 0.3929210266470764 0.30202453357818659 -0.43579679614514583 -0.34374832429648622 1.4672795556275104;0.49822227170870753 0.27946709729698638 0.39538577028822885 0.90703791852573146 0.19191357008685817 -0.59452024190725161 0.3346854563388767 0.56147544959463136 0.60502818169081973 -0.21426735581641546 -0.24109652405598425 -0.12714856119159382 -0.30127270190874078 -0.8719656253037783 0.65462344804887884;0.52101658074686696 -0.42158353195873977 -0.14255729187464378 -0.40637840504084244 0.71987793866402794 -0.67210836202410229 0.56084536733622614 0.20874167944996097 -0.8342214839399209 0.78176479370737495 -0.24659258360332575 0.6203085976301711 0.27471918819843949 -1.0415304498300919 -0.19143295799978532;-0.12391459092135509 -0.38532494710706894 0.85226489763787139 0.51544495048427386 -0.56591537147209192 -0.45671551395985627 -0.25010787671601253 -0.61440135465069867 0.067030505430980047 -0.60068027446839889 -0.023806494787020367 -0.26360557731639411 -0.39189436436209718 -0.25230080419182055 0.51410485249723592;0.20319216293681247 -0.2106050905773649 0.98844333707072363 -0.97495596194724599 0.2137227828522214 0.0021220863130756544 -0.28027061084661559 -0.10210130018040259 0.16438582347900069 -0.57756999869662839 -0.16387685613138764 -0.43309204458948131 -0.71984763808880414 -0.37957338831899312 -1.1263746357002156;0.54495394128197894 -0.43690396148421207 -0.54382845904349941 -0.96152495590110543 0.56185143066402499 0.03163031026506169 0.16577214686394948 0.21964559292137051 -0.69348836668330438 0.96588582606657503 0.068001107062348382 0.94605343568445355 0.15484142565055978 -0.447488696613069 -0.0230606045953438;0.35718694188559919 0.079904511566471215 0.34023247924213079 -1.3118481466351148 0.05844211757808089 0.70598998862730156 -0.83454645448251907 0.40624607018528719 0.64604506252185179 -0.63371091089138298 0.87848523236727316 0.37527970675039007 -0.93178352166326173 -0.13770251515583262 -0.3442473587947289;0.89626026632182998 0.92379967262231955 0.0048437559819885442 0.20038645693267362 -0.20228453552156392 0.62485504383174173 -0.14058403658101179 -0.86162677248144881 -0.59028105062899028 -0.30483712313203615 0.36514520265365913 -0.39385947208896999 -0.41714008106001449 0.50325264213508014 -0.14084877386719571;-0.29186242283143299 0.6389240354407566 0.32773271127728071 0.44819683901319318 0.13516312719328855 0.48465334396003834 1.1129846621804584 -0.75497964639692283 -0.46740287458562307 0.017871671295828714 0.42039829146087737 -0.49248570183385265 0.61615020940602994 0.37019929009243563 -0.41639345734380279;-0.8109591616132279 -0.10544928790588495 -0.32389506180754801 1.2271102964219935 -0.064031325161338942 0.14145097717239241 0.46316506034898131 0.23171830505532182 -0.81643679855803064 0.34002569326244836 -1.1129646241488484 -0.25501081753924987 0.7943281535900355 0.015168657370905284 -0.96693409770773686;1.1164013893679177 -0.34986514545980679 -0.44224965259919041 -0.10632833395471411 -0.28960676423274306 -0.10339586226864024 -0.97751496701272178 0.75009797748030471 0.65165099573790786 -0.0053872159546940572 -0.58752483907944897 0.48347189666393647 0.082989677820459656 0.41720705031380972 0.01073020737369648;-0.16448886129854623 0.66701537145516288 -0.56410114895937702 0.52964027255690449 0.23011422186276809 0.23552640485085391 -0.50423530993395937 -0.77339864301047201 -0.077788180420835004 0.1511080594168725 -0.3959590556576334 0.9204077116678373 -0.6517187699108814 -0.94996043263964958 -0.35917964160442284];

% Layer 3
b3 = 0.61832662632938584;
LW3_2 = [0.9358019344612063 0.8333330015095517 -0.50172367066995249 -0.67443906980953172 0.46841971866027715 -0.57559832644664166 -0.43653800258818803 -0.82708908775579093 0.69307172288750418 0.4730543333062257 0.8856234797410476 -1.1315737026416892 -0.43383245176956242 -1.0676757894551214 -1.0507073576724553];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
