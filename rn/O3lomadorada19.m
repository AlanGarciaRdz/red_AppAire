function [Y,Xf,Af] = O3lomadorada19(X,~,~)
%O3LOMADORADA19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:41.
% 
% [Y] = O3lomadorada19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 7xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.290275761973875;3.96825396825397;0.00572573718866304;62.5;17.6991150442478];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.6137689617136592;2.0045780221288596;2.6498135286336533;-1.7068374741205496;-0.96408407048365963;-1.0118276197595146;1.1540993237044925;1.5673707204220595;0.43071583969332161;-2.2075287302680828;2.4418489735553583;-1.5078094122174974;-2.6259841041758643;1.6067447032394409;0.83430622079723937];
  IW1_1 = [-1.8200365208195344 0.049747402732403669 0.29401835456628489 0.42079432838831232 -1.0956654127637167 0.71278195474618322 0.01816319827480567;-1.3839456254757683 -1.2967003855593584 0.73190997852943496 -1.4991999575015729 1.4435394446784304 -0.18930597522216347 -0.81828410290249798;-2.5589041098716816 -0.42856511823083571 -0.61324170988592586 -0.21171075071491699 1.3687223591609359 0.15049228133826192 -0.077974865153897968;-0.10626796755683068 0.27041505988810338 -1.1719007230023013 -2.0702839729374451 0.027298935745728094 0.53357855396269305 2.1938161773992304;0.23229561885672736 -3.0730423869253287 2.1757319884401523 -1.5102456464061906 0.053730331736202161 0.082046935897796366 0.34141989197437972;1.5563947160172491 -0.87479424651524795 -1.1307345802491733 -0.082281888881020976 0.11853046022973052 0.052219369302541181 -0.71394856853353084;-0.83996073139810501 0.76835225439613031 0.42748198574438162 0.8845228139306236 0.22853336553224146 -1.3952980933908161 -1.202977393412868;-2.4509523496416894 -0.65049313470771419 -0.56577686435331154 -0.014682824209768838 0.070391462410223787 0.34226691887055694 -0.375852225007691;1.6438227045320233 1.6351617239852092 -0.53019182374040974 0.085674216452346047 0.47043892955120936 -0.26219225986136441 0.47408158473160517;-0.63633066215570766 0.35071101765836099 0.57424586574054048 -3.1293783716137016 -0.96992727064741313 -0.18943365623977607 -0.072835411423760654;-0.063010353887242965 -1.004326846833437 0.054003429436946769 2.3477894227091571 -0.18379199207484248 0.087476538683135929 0.5841478837855526;-1.4156341965529764 -0.84755401397647956 1.5328171913664597 -2.3188271216626797 0.021247159537435598 -0.73824982856136001 0.76721822773845461;-0.44599649997322066 -0.43745580394651579 0.71205906466777136 -1.8259724240917559 1.5897691033303434 -1.6253005945774455 0.22476541642203549;2.4557214352956733 0.22007880666726315 0.36526509254616979 -0.18563251142847567 -0.83251302547261918 0.0090489630898637416 -0.68680058974488101;1.5537940066708291 0.25017234040935321 -1.3628692557925421 0.14183618151534599 0.63751931096806314 0.075461464387974367 0.25858620698228302];
  
  % Layer 2
  b2 = [-2.3150208745654437;0.46552603337253029;-0.87114730710858612;0.83150409687266502;-0.64088841160147314;-0.08347869885333499;-0.27056609868333653;0.87695383460119025;0.60781297804276302;0.2828251889660448;-2.0184367312624016;1.0633113779783463;-1.4312285108471723;1.0664347214728369;-2.2195850598031024];
  LW2_1 = [-0.12939361271359348 0.19401167199086577 -1.3581244196746614 0.47260428234854335 -0.24649156341069001 -0.018398851188119299 0.76615536695994468 -0.71057998561978042 -2.1752534650714415 -0.060251450942650518 -1.3908768433188274 -0.82169452343790639 0.12170909933494611 0.33576555383301143 0.87512540536625927;0.45473486228065185 -0.44678898340424333 1.2286877375732193 0.16207573233433262 -0.80866279553436238 0.25667347550830566 0.20762160482906256 -1.5562925232454563 0.0079548378313298168 -0.17111859865562712 -0.2775147641080225 0.039024308991673473 0.55885238334172238 0.33948810574897526 -0.60946107545015527;0.73341946351102094 0.41948406091232171 0.50991512582605403 0.40041360555366179 -1.1117852090474674 0.54018271033035781 0.52862084109614738 -1.9192109294001307 0.41537263845570233 -0.67376923241514064 -0.31030714717882846 0.22167387183040965 0.42054644998382079 -0.085873284926050869 0.14095974053843324;-0.27818954538823315 -0.082056569131299301 0.97325270208487691 -0.85676583029620379 -0.089735887927647348 0.7664998330759053 0.47913082605335355 0.47321397337067594 -0.77506413821163789 0.44194989522249528 -0.87455323958951237 1.0938572028790094 -1.0855507565252518 -0.47373183633966076 0.12648186468166173;-0.13980446348504849 -0.6359023760651451 0.93432268118157724 -0.072296993244226782 -1.1795145987652866 0.28980697048813769 -0.093846398188550173 0.93113327310220306 -0.25887711989936257 0.028586119215750355 0.24009683029532103 0.41884782934183623 0.69671810524603861 0.48424221038186216 -0.39688796969866857;0.0044647309427973975 -0.022122354402574193 0.44166197656855805 0.22538379464787431 -0.13289884900226115 0.084666493896880093 0.34830744445420342 0.13193984906842912 -0.56484935047023876 -0.22298230644980027 -0.74758123713817515 -0.75294722502448574 -0.64952330045740847 2.1682981491519384 0.099494100703285404;-0.53534111483723956 -0.022399159574364478 0.09059100787803373 -0.16077526386760668 0.30463539875248696 0.16136846088653273 0.65036702454968021 -0.32902580238081203 -0.67557691564483191 -1.6670876990612693 0.82380993482651299 -0.67385186576370315 2.0767921644451182 1.1234863204503711 -0.64412826659245281;-0.21666148008998798 0.25893349941912558 -1.5085844327287559 -0.094414533535286116 -1.6424022418913189 -1.1884844762594351 -0.33280467624009447 1.9514982316646088 -1.9065548945251565 -1.119565550125325 -0.80592336023993383 1.2675407694479643 -1.000383358980758 0.22389302851117654 1.1871060365116557;0.59380134503761473 0.7788543128943799 -0.67500727648919867 -0.17311162313046907 -1.5950307018685936 -0.75058698704486337 -0.70632457669258919 -0.45545780068576386 -0.9136776412972254 0.82426614937116094 0.71538473014761395 -0.062572592500291846 0.070351778885619609 0.46401382532942714 0.60326777830780054;-0.87164921718526189 0.038887219810186766 0.10404889311386468 -0.095107457574109225 0.72234984851053419 -0.57196781009573217 -0.48791634503192566 -1.2516551505202791 0.12575495767045081 -0.71345828160795188 0.13333045810326666 0.012811832176964529 -0.43813686634618382 0.20978655827732207 -0.21492590856264837;-1.2004715971374715 0.2336878821337173 -1.1002484119943818 -0.5574897134779927 -1.695345235596601 -0.44749361269574228 -1.3770651565056826 -0.056532724990736846 1.9162831228491575 -0.36154478169308141 -0.88107434213534819 -0.20623127322045082 -0.54314759729632411 -0.82475003389900758 -1.9830934759985279;1.5597989529768015 -0.0027594179511241587 0.81472191469551836 0.24146486161455849 -0.38937683420329405 -0.21703813462168361 0.79072621872486448 0.15280959559803886 0.27771998362799549 0.61665415246011945 0.23643897077904252 -0.79052977920335621 0.64812093050581465 -0.38442662005495376 -0.61499272152241824;-0.50897306768532646 -0.37705114184957911 0.75718546192140368 -0.11764010906503194 1.0701063576799263 1.1543801075043809 -0.71842435078090305 -1.4911384686686933 -0.35192595695924805 -1.0353351383655969 0.3717174830336783 0.16114503832731886 -0.28000236032006348 0.25808643542585574 -0.34326502068302511;0.086694891924020148 -1.6401387850339928 -0.57611539096090314 -0.47784295541643845 -1.4366803649161688 -1.1794663861657702 -1.7237587256700884 0.16735417557818966 -1.1274317156478721 0.57965587903346161 -0.40914391261015765 -0.1488916636116476 0.65322520025750719 1.2951845874606256 0.24356901477660853;-0.61633648774915228 -1.0323171321392151 0.035872454571110074 -1.1854401878750431 -0.95226578989734867 -2.574616315786054 -0.7262779906970076 -0.047141880474122169 -0.41970797110413743 0.00045638214360466112 0.3885782858186238 1.3807280128731176 -1.1920085735589072 -1.9847623722483538 0.48111527134749787];
  
  % Layer 3
  b3 = 0.47306302115530852;
  LW3_2 = [-1.6146921671862464 -1.2749690721261939 0.92862401918387849 0.5871261055935193 0.73596587856301565 -0.26016496491227226 0.14942111060891908 -0.94110668267856035 0.77606882335419392 0.69483478306180102 2.1606162625648442 1.3604784510824541 0.82889746374489992 0.53055548864775726 0.27865314701903676];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 17.6991150442478;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
