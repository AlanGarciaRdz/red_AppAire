function [Y,Xf,Af] = PM10Atemajac19(X,~,~)
%PM10ATEMAJAC19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:19:59.
% 
% [Y] = PM10Atemajac19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00968992248062015;166.666666666667;0.0561797752808989;0.00614628149969269];
x1_step1_ymin = -1;

% Layer 1
b1 = [8.7419243071699277;-2.5649528003425504;0.32116853893720337;-2.2092469022317043;0.11569269611236939;-0.77979140523822066;-1.7038095802381301;-0.86209497557956938;-13.117335605638713;-1.1495414359155809;2.6208195258503166];
IW1_1 = [0.07879639609263285 0.56173227999044295 7.8592673796729811 0.064179205609027817 0.12203533719899737 -0.17559844113696349;-0.92689063881455525 3.6937699472182999 -0.31497125794399905 0.41558242356513114 0.11286089557606965 -0.023316440783140737;0.23816386922571453 0.80712594218169254 -0.42981640748012301 0.032771809609432934 -0.18943146780395947 -0.30105426131797386;0.96728014847559962 -0.34946268684509074 -0.38025083267013821 0.061894751275402657 1.6018425823542282 -0.047392202356564515;-0.47820102720664415 0.45797898196633136 -0.73395583730209957 0.018016413415269213 -0.75185872370075268 -0.3318967216283758;0.67536087281539714 -0.62712997600398557 -0.49640555678849035 0.021782873192985761 0.89456025401235084 -0.20456091235267132;1.0442466390243426 -1.5849685115859025 0.44776834609691568 -0.026763027157818392 -0.87780480798656235 0.10025060209427157;0.47728152094766518 2.8498597843161768 -0.2434238597289986 -0.30058018491898969 -0.30990688808715205 -0.033467184260904607;-12.832407858765604 -0.77974995244644696 -1.4687180325415965 0.38737694766712244 0.31409406464377332 -0.15728848163566961;0.67463668425861245 -2.604205569775119 0.19265255028673481 0.02736750701415646 1.3785135657041792 0.076741552044177194;-0.67191656398634536 2.4308161580646104 -0.35934695150393903 -0.0095102456059361802 1.5705783746684592 -0.16704379564447974];

% Layer 2
b2 = [4.3703560635546594;7.1532173848469478;0.93235064387711042;-0.73438633743886472;-1.0554734393431844;-2.0131385073874011;-3.1746821714731759;3.0912507182516542;-1.3682791578826827;6.3962614832192237;0.9733439520716759];
LW2_1 = [0.99661247667369857 -1.7791242344661471 -0.26752733103901571 4.5616781499353021 0.02232635547827936 -3.7857340805890023 1.698937834372058 2.4820764538056279 -0.12788740558290443 -0.077230490024366619 -2.2175752639357103;-1.8514408218488241 5.5886162113525781 -1.3422807732017827 -0.31927800986303884 1.5389537349854956 -0.4835940332773937 2.9065232863590831 1.207011813626899 -0.32703032481711436 -0.0013159587920970398 3.1173361637920909;1.533556028341017 -2.1940650737695888 0.94542505014238698 6.0937836768925164 0.55705162231473249 -4.0464574082182461 4.4823564645561973 2.3327626877380339 -0.70200194878706634 0.09500496318920526 2.7907992556446573;0.94490456815387414 -1.7512675979809409 -1.7448452620413444 3.12680798324326 3.0744935278806547 -4.2735726021605762 -3.1860375227731144 2.6394149954261774 0.13821044161906268 1.8950034040507084 -1.8400371568243101;3.2790643838626066 1.1054453349415732 -1.9926069361084002 0.53172275097200417 -1.8944172827799999 2.7090449899754288 -3.1248528142010317 1.3013266190956181 0.15963832283866589 -0.42689247106512057 -0.62405130453464752;-3.7278187957435178 1.7224879505485371 4.9557464417084711 1.3742884711150163 -2.5660928851142466 0.73431951463528622 -6.9425459849638385 -3.7656424802340811 -7.3621295978926851 -0.5630649115677604 -7.7758797194955189;4.1648103727108756 5.4737141224166495 -1.1192770857223648 2.7513824139933645 2.4694458881441235 1.3928794516278427 4.6766363786541341 -9.0405820205596612 0.77185474799122977 -4.3357137426956589 -0.26081765810534718;-2.9094729714420091 1.6096941261084339 -3.2336375680068912 -3.2238626538174926 0.442225623680088 3.3131447281054416 2.258276263887526 -1.0122655115232513 1.7440811816923707 -1.9870032631961938 2.7778258523821506;1.9550993584506409 0.95465063695080155 -1.8858650375692181 -4.3174819346939035 -1.557004869574532 3.0652502593675997 -1.0980820215702831 -0.35453661000945008 0.29613405734652265 -1.9738176057748176 -1.3650762585867822;-3.0580836032077077 3.6324934131269457 -0.15695048312726606 -1.2219508317901668 2.0197617251905444 -2.1981306006849222 2.6239475653424837 1.6524117145435715 -1.0348745140672826 0.51975121484651732 0.75237966104066378;-1.2580648050193706 -0.99077265164043349 1.4840446749757099 4.38764182943412 1.7927337894714579 -3.3583571085483723 1.4748049141555619 0.26035179084138022 -0.36618275151075175 2.0967191705235835 1.5611023172222966];

% Layer 3
b3 = -1.0468501689826115;
LW3_2 = [0.40914275933725264 0.58963123794192684 -0.65944249839329439 -0.28202884363772635 -0.15517572598248622 -0.24777170376862112 -0.16132451623239619 -0.49847359038675942 3.403593059373947 -0.44349941988698854 3.4544575848912182];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00968992248062015;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
