function [Y,Xf,Af] = COCentro18(X,~,~)
%COCENTRO18 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:33.
% 
% [Y] = COCentro18(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.7474875314618865;-1.3246016359665311;-1.739703509941857;-0.92240493331524454;-3.4951134736988907;-0.031197799108195923;4.1602576561722762;-0.40416297041260957;-5.5475779244282988;-1.7877415494566129;1.2229705954186896;1.8959507598626995;1.4692460477883915];
IW1_1 = [1.6228063296411517 -0.72295613977456386 0.27230620083445833 -1.0628706503358258 0.33025177035428843 -0.56625043548169351 -0.077860680017150283 -0.82393317986428016 0.61694951424097921 0.25446299873392181;0.96995596433603992 -0.33643409742531416 -0.12232677316875966 0.11691826366459332 -0.034352830269649574 -1.2437444476852413 -0.29511100241504001 -0.33047636280093318 -0.63863276996624452 -0.11914851416470042;0.98850323233077997 -0.18865182604146546 0.028270766665486141 0.83832620122279211 -1.2134945243180795 0.14158924053687894 -0.24546381415344287 -0.088772106951985549 -0.66932316968228067 -0.76840382050604006;-0.10704305243959575 1.2115014359631342 -0.75644183162719769 -0.029115006574211493 1.3699104824537272 -0.97318354559189668 -0.52892136386922206 0.83688512561396233 -0.28185807382407108 -0.13818842285079092;3.5841862074883859 -0.90488620395212127 -0.068533806495926733 0.43204417144554269 -0.25927181576197528 0.706112425462736 -0.17611338005260113 -0.40536107316134906 0.61930570270298591 0.19409960426843573;1.4972008304587803 1.5164056209357371 -0.06169677947916101 -0.55095453649149151 0.089536856286164146 0.34145680300332026 -0.12593078085083814 -0.49502859260110421 0.34566040684157867 0.27953607419030424;0.98449409936861776 -1.1063936647588728 1.6469214422159368 -0.27904449843981688 -0.41302074017833001 -0.42722317302717783 0.70390017913136471 -0.26534589890358912 3.8601540613896201 -0.65548697078544871;0.13997723804063988 1.6094187013816472 0.30806501811296039 -0.019599337544329465 0.14906657201539258 -0.66564570659157052 -0.070887159095634422 -0.00088521306664807523 -0.25862070933582254 0.15726264201059331;-0.96499269796507148 -1.0057630875748294 0.12715104228744542 0.091876756249932204 -0.42456773145565613 -0.25333632402294032 0.18335136346446154 0.20279016553037368 -5.2517439058182811 -0.05352678931362681;0.99780551081481983 -0.20233829624050792 1.1973252754568695 2.1213344417423761 -2.310705600261552 -0.5660714589191348 -0.47901747785002496 0.22034610189830867 -0.63980204646265382 -1.084793626046554;2.68910948381582 -0.29210540140523722 0.10782854360519892 -0.86246980798272666 0.58059173044738888 0.23738157459671086 0.16129749974551522 0.24917866633047689 -0.8143031220559882 -0.36952938026110355;1.2226911798280691 0.90682076872922668 0.61558394937619143 -0.68118426341794258 0.28859744045429836 0.40618104958528678 0.38409857026066074 0.42303287929723304 -0.70971275144269375 0.19583178124316028;0.016786856363180006 -3.4051679547598539 1.2949142567704726 -0.55296168319184169 0.6468383645467991 -0.88025449750835438 0.17008410988438477 -0.24967831923683712 0.24414797409130884 -1.2413331637842389];

% Layer 2
b2 = [-1.1567916581620408;2.841024456014551;-0.50366484007033052;-0.48728821017210938;-0.023136388285542889;0.7598833442905597;-0.019493199595756946;-0.26191717881168886;-1.2952627348078742;-0.33751331051910466;-1.8926147776742301;1.4029422372713589;-1.5529388396638129];
LW2_1 = [0.55385898100889053 0.16431180990147751 -0.067342373836905986 0.62969403982282779 0.92076691816066258 -1.1750290268249461 0.37973672747598747 0.67767284249464099 -0.17750550973463625 -0.12192145822022275 -0.75573755343124671 0.734472882123964 1.4148189223446859;-0.7333936145049702 1.7247843462797705 -0.37147865193392449 -0.81943203591747715 -1.7542283342585117 -0.42393384171105686 -2.3111147352804293 -0.63779671916165259 0.0041620054228835232 -0.93332003030428679 -0.29061437703069271 0.18590279539874685 -1.8513637884970899;1.3249643805950693 1.1226695840800154 -1.288462452431965 -0.30499920292715305 0.66890190514273362 0.27096258794106459 0.10842701221471772 1.489524776423494 0.21657151006542072 0.25302807687680523 0.6765483512298367 1.6383317334451142 1.4814591602714469;0.59957506049167064 -0.51416511726738168 0.47302104910409576 0.0041340005054747199 -0.54988642955759448 0.73066977526004628 -0.35141622721956234 1.4233124582126839 -0.9451361331349335 -0.29030785622604993 -0.1594168476594941 0.88862775870869704 -0.98873238801478958;0.11261085764171554 -0.18485185027191026 -0.26248296661702974 -0.43838609371835247 0.66018044768195094 -0.29827943355650649 -0.40082602307264364 -0.31177277692538818 0.18945778573867922 0.5004460381828123 0.41623054755288469 -0.088939610228419008 1.2951711169000617;0.09108762969470402 0.88299582714530633 0.012315921892171278 -0.38360639032312982 1.2338134089830808 -0.2073976146761112 -0.12668049956029812 0.092611809803535255 1.7871325820468724 -1.0079846911167296 -1.5556786571254706 0.29457377702907622 -0.14303374815115855;-0.062872123740842736 -0.66142180226836422 -0.29177135656256442 0.049162992830860439 -1.2467088890110172 0.74804823380797403 -0.033215283887197064 2.1251866882582422 0.16196589836565098 0.24117861512313565 -0.25788263003728557 0.33045937269521264 -1.0766085646082351;0.26550963393713645 -0.20914732481118772 0.0816827964772808 -0.35891200033247156 0.76743279641502427 -0.26447438928871247 -0.41391128061741034 -0.40436425807583137 -0.18052066042281445 0.25763867480261354 0.35670646231290187 0.16951587123624348 1.1771242751933777;-0.41063620864130651 0.3143620911746835 -0.037791237600379758 0.67341695559503023 0.68375804423547426 -0.94780490949300134 0.52329717218580651 0.39471799035174576 0.23107068174823159 -0.1606732748052157 -0.79574685395411693 0.21955254736637805 1.3033648711804677;-1.5110079285754709 -1.4920895952660209 2.5010795685482083 0.17279030745585558 -0.64842680295364463 -0.18289091968982113 0.56379258596182669 0.81324736491764404 -0.038791566424343879 0.01999465354363545 -0.075507178163234184 1.1774788251055639 -0.36417306157200324;0.48029417768020222 1.4483238374517653 -0.29938695963719125 -1.0584888266819816 1.4773964800728885 1.0685365782725489 -0.56120736671832017 -0.20452634162167788 1.5893165846248856 0.61104039276977495 1.2692930121337302 1.6392259972017984 -0.13652187132404991;1.0313807283365819 0.26675075676373927 0.40898639529357517 -0.17211351667291266 1.4369906464512947 1.3168106364825432 -0.367064537236582 0.435796792891396 2.7475173139606697 0.51605308517584303 0.03239817221099027 0.95069535819370643 0.071503624232392579;0.49302792265151207 1.3211966222228324 -0.80042871532421567 -0.48088342246966242 -1.3133305987553179 -0.041097963379469388 -0.47048866760444263 1.0104210643907723 1.3658951886275608 -2.1173208544115907 -0.49746862264072333 -0.013888689304004564 -0.38387064199468107];

% Layer 3
b3 = -0.0021874534535682166;
LW3_2 = [-1.1263275555166083 -0.44930283202281401 0.11168026118467979 -0.79335792450601916 -2.3258915522384283 0.25335377453943869 1.1002878227871298 2.587874490513542 1.1898382035914865 -0.15023172306697097 0.58226575190716867 -0.74368531315832087 -0.15410343893086953];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
