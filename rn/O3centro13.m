function [Y,Xf,Af] = O3centro13(X,~,~)
%O3CENTRO13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-2.974558984298366;-0.70691017601169748;0.29873359989945081;-0.40688023510674454;1.1748655114286413;-2.0355539761622996;0.3817769987302449;-1.9714634355456684;-0.55422065707302159;-3.327573419824589;2.1199711555054619;-2.4996521213469967];
  IW1_1 = [0.60700254572386481 1.8678713222500236 0.071787421680179042 -2.1104444123641271 -0.015432520984714126 -1.0965278220344716;0.85820293870070985 -0.49171020492200451 0.0025324411096477404 0.59478359445678852 0.43466863500716185 0.20541952949779763;-0.63247126138261711 -1.0033631120939694 -0.032215689586281952 0.55007098579360103 0.41181576211393461 -0.0076446878476592768;0.92774866108588649 -1.1050910770653546 -0.49774756229645739 -1.7096312461955832 -0.20390754104729225 -1.0383820147727612;-2.9871386802899629 2.5207943818063243 0.35975552042257003 -0.29698037456095311 -0.038307657993604895 -0.016396188534912055;3.8131512865801844 -2.1108101214625501 0.19250274244665297 1.2876996439109205 0.59227864443609901 0.34804261425976024;-1.1405405534741577 1.2939068371772275 0.54569813468506234 0.59906091718438725 -0.22288359714255446 -0.22322650143540992;-0.12086715869949002 -0.036102682166666164 1.4508197792676549 3.4503460459639896 0.66119513255467244 -5.9743810938292006;-0.57059604455678281 -1.521408636149409 -0.13911756497195338 -1.2839461723155445 0.098012684815642279 -0.53874733942889264;-1.8068775563281232 2.9076344308982098 0.54727923609158891 -0.22564420569738797 0.39189388763426192 -0.002791294636057793;3.369415056833291 0.35376255965188413 -0.21883544012567374 0.36780890208091693 -0.0032838854584707881 -0.040181724737865819;-1.4560808965394136 -1.5318011828220117 -0.12912037591952308 0.025661788528438985 0.12548447193463666 -0.010114302265570084];
  
  % Layer 2
  b2 = [-1.4402676680763939;-3.3925076903137104;1.4570895974034164;-0.45618492302015134;-1.3462226276066513;1.4943310292654171;2.2768004197427292;0.4646967884546267;-1.3640607083644725;-2.5411019462985016;-0.12691325793035274;-1.2121564901875201];
  LW2_1 = [0.79145911237097066 0.41360785573856584 -0.99846269120766062 -0.2090095401597637 1.5056524494452186 -0.86826719286303866 -2.538369506087788 0.52914703970870092 0.52922676860983398 -1.1429075170325256 0.263747350408013 -0.51535960638701861;2.3055028634919399 0.95557664790741415 -2.9486993588041108 -1.1578074554772702 0.97503916323676054 0.026106857430094554 -0.31496796157506712 0.84792178095440951 0.17499144882493231 -1.3346747580580522 -1.2160793366923577 -1.1237819697423077;0.13083006332240218 0.65334961577505568 -1.3037402925516228 1.7805506222709075 -1.0015142418346772 0.0064368213871834473 0.70277738708254867 -0.18399346842337785 -1.6909683483450788 0.070746707984096158 -0.20490959757587246 -1.381809701827889;2.1438671552798847 -1.3820362956884504 0.17154204687242502 -1.2702971423609095 0.87888297027006623 2.0052886764079174 -0.47918232744357481 0.47818907762378338 0.027495827000897685 0.90571592672696932 1.4415401002595003 -0.68585323162192446;-1.5302664917398394 -0.21657783182143164 0.50575486151876747 -0.58294430865276814 0.63665154013552838 0.59431910832865709 -0.32983520432530072 0.11437687220546093 0.27581670940702252 -0.071463812849581379 -0.03610737318916217 1.2531063715010631;3.7889317278861721 -1.9219921136833031 3.3855277316995411 -1.3712253143162187 -0.20661523544873314 5.4207314304129417 -2.3079065276351174 0.82032924134520657 -0.91069805037300178 -4.4086877880725499 -0.0029327183744316948 -3.2296275625652187;1.9527025154251845 -1.2649119518719296 1.5804417574656924 0.7861739531047649 1.0024615925073139 1.1410782196057203 -1.0794489319973799 0.15415902962542036 -1.4840561009754216 0.48983352819458559 1.7317499929558484 3.2426454014349329;0.81304596689709396 0.79152630197592322 -1.1275042285061485 0.01778413998775541 -0.27563244124227398 0.85572147552412547 -0.24784861917557596 0.17309484204956541 -0.44673280996385817 1.1642284458468846 0.14828556751636685 -0.5515174507009033;2.2166159861031978 1.9585046781840405 -4.1915056847382504 -1.0298706013783923 0.84847752691457567 -0.18938675234278729 -0.089019186259647845 0.89578143735990889 0.39554196433528666 -0.39933093356088434 -0.89012019259715569 0.68788500428078969;-1.0305937129775855 -0.36465126537453879 0.40306260038145597 0.051386306952931969 0.29896337662567418 -0.83749375163543383 0.47373251424256746 -0.19922758564487603 0.76077062135417128 0.32347400408275734 1.0830765715388555 -1.4103256384547103;1.8055085582892558 1.9484446754462903 1.3818415709314351 -1.3064125285990154 -0.0063290267333181846 -0.69465061067023726 -1.3373734816892442 0.36185081060254998 0.072404241818116319 -3.2362461463650249 -1.9120431677428325 -3.4761177994525476;-1.7500583265905667 0.27499327969876686 1.3724004856977625 -0.20786883870326978 -1.1993846646074175 0.7733724024631814 2.3098635178721767 -0.48968979535990648 -0.25776148727164516 -0.55497623956301279 -0.1392459481076404 -0.0311274690398088];
  
  % Layer 3
  b3 = 1.0067592743639344;
  LW3_2 = [-0.98168467056735709 3.4276718094263288 2.2081317863745724 -0.86203512540791372 4.6043108683094083 -0.3785058522933184 0.34377599336945264 3.3332509802767092 -2.9209659735315565 2.8409214652985892 1.275389592653011 -1.0704618485093984];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
