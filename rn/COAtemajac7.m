function [Y,Xf,Af] = COAtemajac7(X,~,~)
%COATEMAJAC7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:23.
% 
% [Y] = COAtemajac7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.3986126047215848;3.4712799127674749;3.6007320972418633;0.34633978012872962;2.3031237600670211;-0.78995096354853755;-0.64427280112678076;-0.6378769285728404;0.62221303935457406;-0.31566623094693697;2.8971164812727372;-0.24344848948146428;-2.9102112302608627;2.4713973394348208];
IW1_1 = [-2.5223142536365297 0.88085351678626644 -2.9210551794380164 -0.33023304190189301 0.11196407178000813 1.0199555363447903 1.2139039290440841 1.5049297729429987 0.29755737797480813 -0.4288948137243988;-0.56800583771606494 -2.3572084180232928 -0.77976236727078196 -0.19369961238731256 0.25427090349025289 1.8829638759262537 -1.3583934530245902 -0.089606465330236806 1.2976459204437716 2.508618972358879;-2.6479023990267692 -0.45185049371771258 -1.6342417974477308 0.19554846979488916 0.43779106943043045 0.62635125609140296 0.19443383342381512 -0.71509228405375902 0.1634224951087298 1.2881519558767605;0.95350567612187964 1.651332501788743 -0.77293608185751483 0.11210798394732649 0.015203460697945079 0.55031729377379768 0.22759249231550249 0.21584540591431414 0.48376266172579452 0.82365159129797882;-0.17438700518576272 -0.059789631311606355 0.45060919931184668 1.9605910319686903 -0.24057198204516522 -0.85533965482392726 -0.85759589801841452 -1.2996965301099088 1.1886424373385762 1.4784623851111842;-0.64982072947084379 1.2538256047226068 -0.44375332208439799 0.093351778296439147 0.060699660077378405 -0.57491776036076891 -0.71551800536135657 -0.70358160893466037 -0.15191408926772262 0.15325231122161559;0.68676807610652602 -0.49088255178779894 -1.3977739045247952 -0.12860175109708585 0.52580715705538306 -0.26928868849509413 -0.77110153026987682 -1.1549091762683126 -0.65842186520799284 0.36109663385093188;-0.12404800091886133 -1.4174135207191108 -0.14351918248012821 -0.43509292232245972 0.31482025547040571 0.12706259272114037 0.42202304940032104 -0.66274359462506482 -0.32055851235703947 -0.024068571750298959;-0.087201898468828226 1.3467638004326703 0.18696421452911918 -0.82959127154417034 -0.0887473377611388 -0.14588050949579087 0.65833923116777382 -0.30609691579922887 -0.077653579834992145 -0.28078595370920822;-0.37587908396720088 0.41670312565342149 2.5121712617298071 1.2986088010861818 -1.0875706980599555 -0.71781214242096636 -1.7327114899439142 -0.40570461861944185 -0.19773246104853423 -0.050465846475838072;-0.4087456768860272 -3.0418892274664775 -1.1763773854131252 -0.11317018247700197 0.31975789411010408 0.54321667994928835 0.82500428818318916 0.76577249662540292 0.28307241476612688 0.051037452843759469;-2.3599902513484641 -0.74428662738807361 0.65790928073134747 0.62764829894344776 -0.3105152366523507 0.57628226969135787 0.81811922236455215 -0.42983628257156098 -0.3480483323951139 0.58412755191075827;-0.25998710380655393 -5.2580332427405185 0.44602169475035114 0.24857103195517199 0.15396920863291688 0.13907109878643123 -0.029164330342318627 0.29578718972746809 0.024877272824499558 -0.12265299840858863;0.28823994198557296 0.38291589050581087 -0.026993309637216863 -0.57812554719950249 -0.58433346860907953 -0.59399261834083572 -0.15592958978017699 -0.29638953028470238 -0.023579298456502792 1.9717728861520389];

% Layer 2
b2 = [1.2949082217103607;-0.51291782212077042;0.52521802035917009;-1.2131944823611054;-0.90547921587906821;0.45757136147051131;0.30748933507402487;-1.1036451599959729;0.77157055829803178;0.2383456404522066;0.69484350203802803;0.65473398544078365;-4.0845827265921972;-3.4691941930791019];
LW2_1 = [-0.00081805976438251854 -0.38998441677415729 2.1279649341995923 0.043029597017936128 -0.7908302468224887 0.58262786153395529 -1.749295897090881 0.67747249021682965 -0.78680863435112669 1.3796826707464169 -0.69682244345031641 -0.54832110895005526 -0.47419046458353514 0.73865207910983577;-0.67222903062723272 0.91731150107236004 -1.8070961210390402 -0.0082048140763634897 0.79177709765929793 -0.57916234991677396 1.2485728596939274 -0.59696481170228877 0.92655388943970962 -0.85611270438158082 0.59758068833767264 0.42250919216290833 0.68085604639532904 -0.91465984131331635;-1.2325371067575155 -0.83728608261982673 -0.34433322852272796 0.14065308882853439 0.41755816672052626 -1.4976864965121086 1.6823364971926986 -2.4065161024730739 2.8027060137166697 0.33465076247775594 0.81347030623712624 0.85216532079300689 2.6936926865521382 -1.7956679969767646;-0.16440734280961083 0.057342027426825141 0.11789365692124462 -0.37063557962619287 0.20699230377841993 0.79881435690966773 0.57276565893736187 -2.2203733735894535 1.2138053561214512 -0.29943290969133884 0.57074197428080831 0.53081692017293158 2.4632314396181547 -0.65535555148108926;0.099956861152657867 -0.09372532655628904 0.88539419554505505 0.30339892441563693 0.45932388389089424 0.48774568121586354 -0.76302218318126624 -0.39690028039318909 -0.41597034380351872 -0.69857538567623789 -1.4514135747622601 0.060831391239690072 0.069719640217316206 0.66532795954393076;2.0427248196132135 0.66463985620668931 1.1139166292623528 -0.7529173035711022 0.76218667733563206 1.2295987608368866 -1.5478027165114963 -0.32725846983682966 -0.94134033469821454 0.10666248887799612 -0.98213908510406411 1.1642845907125574 -0.99139150917074148 1.26735133682024;0.55445129756806488 0.61682123711258252 0.47939253872435716 -1.5269010024316709 -0.061485406600709877 0.49679409607867736 -0.76594472108458134 -0.031545071416355971 -0.98648294358395583 -0.52611607426798179 -0.72063888926763919 -1.1474232599253797 -1.135957041300625 0.39620700238000106;-0.90218901822886699 1.5478885090200092 -1.4484082885430138 -0.18386539365251459 0.57220996787211231 -0.55458821839333017 0.70094848120028841 -0.56773255351718122 0.84210670846622371 -1.079852183331051 -0.046314566651145334 0.13865390397265753 0.60731757482139537 -1.1021676896550805;0.21463694348481016 -0.035848374917979486 -0.26970796226655003 1.1138729825588334 -0.44938510923607633 1.181155796076002 -0.34501893204819822 -1.1343995935632518 1.7326711099337355 1.2490207034865706 -0.30214413216828934 0.2120031575465256 -0.30422037483006442 0.071059268152913538;0.29707744365446836 -0.24467492096060978 0.36160655045808554 -1.7091054667698125 0.27941356616347907 -1.2040594836406733 1.0769548606515018 0.48359388438851181 -0.10956517415402259 -0.11023549178118967 -0.78922869161096176 -0.20855487144457693 -0.69600156126057444 -0.62401603253894555;-0.8318989729556836 0.22136185395674607 0.76234256556725233 0.35354298218558089 -0.46894711733950079 -0.10103032803071441 0.26611809819220145 3.8012320197386686 -0.42685755081485183 0.661262508106091 0.8850538165079852 -1.2649858643539591 -1.7645351444490849 0.90186806144783782;0.59347468244200952 0.49828108514917197 0.68884035768971474 0.078190798858819299 0.46365660838519523 0.27085642968778006 -0.48167222492290879 -0.73037233886102482 -0.049632646241016196 -0.70312998900889379 -0.1436160509577295 0.19325292386182505 -0.10697635688193081 -0.13530926182835146;-1.5253830841304989 0.44833384594284431 -0.52209342609078158 -1.5642395505302142 1.380614434360697 1.6439636516024667 0.49974151707873343 -2.9865875453274748 3.8287779579555892 0.27126990134823276 0.9216071274899782 0.23000101105045018 2.5409043569209491 -1.8685440545906338;0.6648466015065515 0.86833267422219373 -1.7991197695637853 -1.7439295363586766 0.08184940081959137 1.1974846608284047 0.46479432153896116 -2.9509451656925636 1.702515678884482 -2.6855691027950996 -0.57968483603509124 0.28489618807106526 2.7403186965068107 -1.4299987790714159];

% Layer 3
b3 = 0.023650359624749359;
LW3_2 = [0.7269919640466509 1.3100730375102372 0.84662239110055648 -0.27657653886285039 -0.13785184554952823 -0.27505073717641015 2.2799252143471831 -1.4773853773920824 -0.062508900766080067 -0.10034636264390241 -0.23181831390332161 1.2501960371020855 1.5904822564056675 2.6611803757489803];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
