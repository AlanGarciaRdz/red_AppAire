function [Y,Xf,Af] = O3oblatos15(X,~,~)
%O3OBLATOS15 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:45.
% 
% [Y] = O3oblatos15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-0.70237507766464491;9.9908960186218021;-1.0234682820395418;-0.91297340265197446;0.84657385070884517;-29.808391525759461;1.3907718176198296;-2.2052544249016002;-5.4595865241915336;2.1235505552435043;0.080089110511424463;-2.3394613867043117;-3.6842550188154521;3.7905175895385708;-2.1686022294590677];
  IW1_1 = [-1.7620884433242829 0.11278225265806116 -2.1295969628847478 0.22633995096968498 -0.27996901891965487 -1.0659444999712329;0.28615163543335947 0.45492737368026193 11.129603044145096 -0.055548560447616073 0.83395234819936204 -2.0123576728178261;2.4116792860742287 0.20869902422612582 -1.4920841180623443 0.11884585699180092 -0.57565139848803282 -1.256681662217239;2.2993988890927941 1.9019175018762065 0.39184975150163959 -0.17817257444489412 0.30482680621280772 0.22425879151623235;0.27992117101515579 2.7224484196565579 -2.5696259147587166 1.0720390389221484 3.0252509704992772 -3.2279012321583211;-0.22317098997755114 -0.79692291560501993 0.62017636345574323 0.11899235237907564 0.071821097673913911 -29.454907941812781;-0.94948766881277269 -0.35932674333238024 0.77299534502179856 0.17277013639766323 0.126899411993905 0.58061143256936143;0.09775141750072254 -2.8525131782577047 -4.0798921196555487 2.9569581235805784 0.22637808603244722 -0.68416564847944683;-0.07375295038089888 3.0447546569566937 -0.051291572322315321 -7.5090476079522022 0.41504682296366885 -0.49126878674731006;0.76207518843124344 1.278166634652141 1.5664027063726349 -0.99346317922810667 -0.40247799533930978 -0.80539291032653404;0.63525734730693939 -0.64482156030391202 0.67834864488335722 -0.59164203544228133 0.67828740217129435 -1.818214164315384;-1.8062541177607354 1.2759228004652727 -1.636169040076711 1.2612977498771252 -0.94711813633778341 -1.2021928719857129;-0.78733864356817806 2.7966964723240793 1.2815866239950076 -0.16547471436482539 1.4407574747115268 -2.0607645134084747;0.45253250629930619 6.3299295351271008 -2.4352946893101124 0.2521266330391384 4.3800328478510488 0.62196041065067875;0.99151493893352716 5.4858720184003253 -0.03796305420472279 0.3030537930693023 1.5136654245764065 1.2412489022970812];
  
  % Layer 2
  b2 = [8.0013643928806193;0.57200510411271488;1.6202244368702168;-1.150448991287748;-1.0095056820999635;-12.063176822245405;-0.79504642738009923;-1.3240020519715603;1.5216672541371707;-1.0656368244717178;1.5147951914506064;-2.9895055415194651;3.5907861847511904;4.5930513268678528;-2.6862742713698795];
  LW2_1 = [-0.058513041471642588 0.60474291220740184 1.499977272960582 -0.32171254310709901 1.9569103583784264 0.33494288532688288 1.6642687992347127 -1.7283141819930767 -0.40985619728257333 -1.2505551277909401 -3.0391225806549662 -0.86825962700066417 7.3049680336922718 0.36153339437264098 -0.66858147087984598;-0.42683346175594183 0.01494599871609939 -1.1811452357746695 -1.3621403230416329 1.3034552107685089 0.9458368752669295 -1.9427698679625469 0.23997896244672029 0.056616249240134482 -0.5699381654036445 0.7735033795946884 -0.24075158203619676 -0.9908192829910375 -0.21272612059765239 1.3685895639849852;-3.2614301708159847 0.34140554425586717 -1.1423475467099158 -2.80613722924359 -0.15133923574724942 0.39237135083441665 -2.0368420327515708 1.3379369414244875 2.6369361877520201 -1.0148949587429814 0.19222935071082256 -0.62251544179297869 -0.57797876620528166 -1.5380595298414967 1.6404873044463415;-0.93370580265769698 4.0146775907498071 -0.85551120988866614 -1.974818379990205 -2.2886950087179887 2.864969595655706 -6.1153310440697242 -2.6475166383668705 0.58729239096226571 -2.1830559397118035 0.16684413901351614 -1.5305144398914865 3.3547522788888897 -2.7867504289975851 5.1053861833210314;3.2345864297571993 -0.30686780612043096 1.1647162971176761 2.7312742612366141 0.16550261574465977 -0.29163641120909101 1.9758665616596414 -1.4172727594739321 -2.5837004737929661 0.51381198834280839 -0.22504499036441897 0.72813272487565073 0.6082196542607049 1.5196091136168446 -1.6718671739142585;0.52972254504148764 -1.0206527324189822 -4.0459255405970094 -1.6316146524002844 -4.132359286729149 -17.608502881125119 -4.9965324547024803 0.26983929823707675 0.091301725596029934 1.7637330045017547 -3.4088081608618586 -0.72965724159230361 2.8055146795118961 3.9248052142516965 0.015902565429629298;0.34551220773906705 0.44797211944560444 0.42004872473579913 -1.0272588588429505 -0.089006946828068936 0.61341363234246604 0.40265880034257823 -0.3347596057310519 -0.1244144972488035 -0.23865534415922984 -0.24511435159655093 -0.61726375519497723 -1.2771859241946335 -0.10683086966156162 0.67374427870941;-2.0685432775928287 -0.75178216765413641 0.31236733521114052 -0.49890056761675028 -1.3911795951772516 -2.1363725868115848 -4.2992002863043259 1.5889578413490042 0.088733499881621131 -1.0435105016026962 -0.13625898404888309 -1.6661678396890844 3.5806002291358818 2.9158741565041577 1.0978587076629058;-0.25362147228816745 -1.8912525619149965 0.78046966289164277 0.56541900018230018 0.24072114907339295 1.2414453984435383 -1.4933869945948322 -0.3464628486325067 0.048747802467765881 2.0205665130603192 0.315623687997721 1.5877064573731678 2.2645351141835826 -0.7561636434385115 0.80394062287325196;0.60197498579714903 0.27072294215211468 1.1307936832088614 -0.69671057949208204 -0.31834857293013141 0.36446962749588896 1.0012011383905424 -0.48500636704088601 -0.18719665054750625 -0.28514395398563208 -0.28510556030733808 -0.63117419802635522 -0.87095246296679563 0.077146927362388734 0.34653921946695498;1.3193919700183572 1.6024786452737758 0.71461934346499445 -0.54090567440581072 -7.374746102607924 -7.0579752701949303 2.0920560628301557 0.16017358372470261 -0.10427954347180365 -3.1020360582309063 -0.77257590163411338 -2.1012908267398802 -1.3941845701813342 -0.79096689060989689 -1.3912218984239664;0.31291809415082394 1.1442671899151871 -0.98449425745505958 -0.57661410147563652 -1.1569204086122846 0.75062454087851704 -1.3833797702850894 0.72647703463105306 0.77744636461021543 -0.94619228078662543 -0.97851712247095446 1.5073425661424531 -1.5774425174381297 1.0928914909625349 -0.2332015985169304;-0.20805293063771396 0.35507780245611714 1.2304370424375151 2.0388086334326445 -1.3748432447960026 1.1199496914793026 -2.9035337659114537 -2.4003271146735385 -1.5444463853170496 -3.7640857956628695 1.4304013230199828 3.1435071645082586 -9.1903197364565603 0.69626688263722569 3.1416653603992488;0.41958881887678373 -0.94433299687898575 -0.24476722749392993 -0.91201935057395567 -1.108616000851725 1.6152337174749469 -3.3043735854653478 -2.7105545403449978 -0.99847326037575357 -1.3107103920577459 -0.055994880789882615 2.2773017774129842 -2.1807158923921457 0.6229956270247704 -1.2794335737824998;0.14285635623829382 1.3007025017964378 -0.40819613081658784 0.76434374162593988 -0.885421614354019 0.69930693141521527 -0.11758881695779097 0.11404114574460164 0.24912414481819189 0.17743468229947801 -1.0336986937955333 0.95315637657602903 -1.2512306677670624 0.45364108508099416 -0.93135096322734723];
  
  % Layer 3
  b3 = -1.9142387930985634;
  LW3_2 = [0.41738545876466626 -0.39171086210633216 -3.5762955100841758 -0.25899973356985495 -3.532951410199161 -0.097686701207846921 1.554765063873695 0.30199272609307976 0.47225495818311852 -1.7021278275219254 0.4614189722109987 1.5313925726414817 -0.15094795763895441 0.18194140377904661 -2.5156409048703097];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
