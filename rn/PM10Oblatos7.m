function [Y,Xf,Af] = PM10Oblatos7(X,~,~)
%PM10OBLATOS7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:22.
% 
% [Y] = PM10Oblatos7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;0.00618238021638331;117.647058823529;0.0560224089635854;0.00280033604032484;0.00462534690101758];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.3573881958212213;1.2151655256640124;-3.7019369447191721;2.5297144722723761;-0.60323606673116115;-1.6086647787405024;1.9443182127134262;0.27732807875074428;0.32084987625025185;1.8282081288420189;1.0403482587300195;-0.42010866144442127;1.7327180830703373;-1.8191087321771453;-1.5536247479762699];
IW1_1 = [-0.51771120458355169 -1.6442478623920351 0.85208634392542837 0.58280446526918894 -2.4840382760448168 0.27563225837035332 0.23725292637290421 0.065117631592838454;-0.25604379429650215 -0.21121115459494771 -0.46681057803853054 0.034083505298770793 2.7275459657892958 0.20831134563773374 0.33375093627661256 0.69847186188161214;0.69654983752292965 0.26606711871658562 0.15424276150664565 -3.0669822295187528 -1.3795100369370978 0.85787897793448797 0.96848885801530382 -0.57317175193007985;-3.6360543657366549 0.082732762042200939 0.70710417327666719 0.6873835595073029 -1.4710599486511722 -0.14023832222904004 -0.39461707857409339 0.10674584418951114;-0.17294759392840453 0.18607757417383505 -0.8668078840975042 -0.33716982640265614 -0.18415026824843186 -1.5809664603000357 1.6503842897730978 2.7695001132536161;0.38854238388305284 0.16936327756168809 -1.4086601560260064 -1.6331759318928045 2.7674029847108637 -0.16005298565190779 -0.29134187378124904 -0.90645190294888867;-2.0229842141577654 0.043434843437047378 2.5221231126364265 -0.15993906725516344 -0.53352137061372185 0.027534431394207526 0.534437865369637 0.52404884735468449;0.56582474297561491 -1.0297004363212001 0.10737959204133568 0.72965332046019771 1.140271215585865 -1.3977961741636504 0.45506755775812302 0.68074715883077486;-1.2629002990344314 -1.2321646646716009 -1.566379372110198 -0.68877053087423701 3.4372035543918513 0.86729906933147771 0.41468793215737287 0.48187241622760268;-1.223736933647807 -1.3480831686527566 -0.34257198076624173 0.766219161107906 0.88405418508768951 -1.4036807689458315 -0.63350524536576136 -0.44186093568545476;-0.67440710373234769 -2.125370951682326 -0.24316711140248876 -0.75841679366606074 -2.04409789265332 1.0461506823346649 -0.66170198308906203 1.0404708318158973;-6.504947321479615 0.22016772032821286 -0.15997617654032381 0.5509800940119729 1.5367522339531114 -0.80639910782112978 0.69956183876989064 0.76042533818609936;0.8412811059040276 -1.4582550539597217 0.523032161915431 -0.39402270490939084 2.5588863195497575 0.75866782349519668 -0.10851279570496872 -0.78867935756654917;-1.8081292236093944 0.58709342575803936 1.2100205449983383 -0.071523288826233863 1.0828772202963279 -1.4010764570495917 1.5687490973059515 0.65225712264667191;-2.3419637422837365 -0.24452127235064086 -4.2688081673745026 0.23127586502142783 0.75109212216210652 -0.51209729027009776 -0.20827064781974702 -0.56719880970278935];

% Layer 2
b2 = [1.9265033636144187;0.75744873897616771;-1.7740966447006885;0.86704316006803728;-0.6411030102192623;0.18151147573285883;-1.097260385951196;0.67598386289795465;0.74212469183862384;-0.014622652423516208;0.5756993361267182;-0.37509776820908425;-1.474880157344129;-2.2906453337639232;-1.0804817929175525];
LW2_1 = [-0.21919683553922142 0.76307864717033147 1.6492481958116572 -0.37976259839230708 0.0016211145592345821 1.0590950652721842 -0.40089646717045313 -1.7166898693202119 -0.033630104569776359 0.16776062660960525 0.53596941161563083 -0.21599620807064657 0.004709199136941844 0.046272028285796754 0.17957237128105843;-2.0855493515192252 -0.17150205951053568 1.4451389266303105 -1.478267866786841 1.9905962489981091 -1.6965205166235473 1.0160690721469345 0.49749935576843174 1.4555316101875304 -1.2460156077908655 -0.6313270176723369 -0.33579321887889985 1.9013794556210459 0.74470514611529925 2.1546335138198276;1.9094144622955729 0.093009634013505843 0.0024362680692054106 -0.2620701413897486 -0.71116231103276539 1.6900809262311665 0.20847356713539777 0.14524258528665829 0.38005930318840142 1.0962514357898303 0.91386462028115811 0.52223664180998886 0.25373361266074651 0.66295337375453134 1.0802770749131825;1.0435539966061476 -0.99681801577518814 -0.52364568643451759 -0.94197109992518446 0.44685007113205077 -0.78628043115674828 -1.5003289999696063 3.3362713886881101 1.0637676684493851 -0.2511509219955057 0.63596810056036868 0.3275130816059848 -0.29170161144599605 -2.290995549405578 0.70837332620743232;0.074889865237174918 0.3672873391217979 -1.6664771400343885 2.7769098667425474 -2.0065033970137063 -2.0544391287280708 -0.86644249317284927 -0.73994932737373298 0.68623535201895847 0.076961768577543638 0.92943809275756772 0.37151493243893674 0.80502491445151125 0.6449717147908175 -0.38046873206116572;-0.26070619711434312 -1.0188015697210473 0.70724962108911682 0.33130419334367889 -0.34761931832113085 0.093309649606258871 -0.16027140400373421 0.24276464697903438 0.63473000392609369 -0.46662606104082488 0.089702370312884194 -0.55862937116288436 0.12807924251083053 0.43532142933743745 0.025502048834163196;-1.0703807598859358 -1.1566597249643664 -0.1599792532902215 0.14147124899347538 0.080637902529436714 0.3512735404221442 -2.0541435316282759 0.833492301143273 0.87618442189520596 -0.91238618492892998 -0.015539636023242959 1.3049991486764845 -0.14047406299639342 0.54453365435132439 1.7759176983640301;2.8333996297803599 -0.27363426913846262 -1.762066414843678 1.345827666962762 -1.9872669021521607 1.4901132534797052 -0.94750247312473534 -0.1155368234577781 -1.3634034320692987 0.52568019290989043 -0.18570546221657772 0.18862358054213907 -1.2759266139119019 -0.24623301658847074 -0.77275918308873071;0.28916555587836873 -1.6678351681118797 0.71770534047262124 0.35180258356651611 -0.44863729724574891 -0.041715621495586525 -1.0016841334196942 1.904564907416312 1.1001734424487768 -1.1037561273060656 -0.63110577072390195 -0.30569572898894576 -0.10226280232970375 -1.2451649378533174 0.81244005386727047;1.162296912552258 -0.50194915003263618 0.19319438982681003 -0.66589118049182794 -0.19220387135356853 -0.80952069525988479 0.97983875528157416 -0.23611864547816172 -0.87173439973215339 -0.3957028674646782 -0.72473877469102499 -1.2337251315082285 -0.014048100192886805 0.61665814799729368 1.3080473404506594;-1.1000173071186139 0.80204034291602322 -0.99262189019380342 -1.6361214754632174 -1.6243484818554201 -1.3292987959998113 0.61799950626305056 -0.31491859159664359 0.052528190313913897 -0.3911530759910965 0.67726166166859125 0.54748408496584122 -0.093273692625105653 -1.7215347133477028 -0.86345233018799727;1.0999982715467347 1.1629590538943184 -1.8692649273418902 0.24811279638345499 0.10373108892212037 -0.27736749688595219 -1.3908956731215865 1.2377952185154428 0.20217267007718753 0.44334646342702577 -0.063053423627475486 -1.4410044840263043 -1.5444572030295447 -0.1164527488549686 -1.082172942913922;-1.698605168146708 -1.1632101116884865 -0.47924452537519346 0.45877610447400791 0.12548220845613309 0.20853733060649687 2.1211361669709223 0.3614004411291365 0.16644799545718991 -0.75472054089300644 -0.080337666802976299 -1.1452472154896698 1.0821822467232662 -0.26564128816926585 -1.0571543611267891;0.51768293300328094 2.4913236685087585 0.76981763529007896 -0.7737531619692336 1.1327806788980883 -1.6623144222136963 0.26091632346519189 -4.500140988577499 0.274164358800564 2.6285645709588978 2.5529815557963089 -0.71758070947270769 0.88663386776286224 0.43981445512084849 -1.2907103867667855;0.61221894482900696 1.6808175799937157 0.53564799678773189 0.22774141546556345 -0.39730337181874953 0.8686893776543122 -0.11400311119957038 -2.1783617467016083 -0.62270209858806302 0.98705298653358786 0.69182922247993162 0.46811000386612461 -0.80345932241420648 -0.051318866131428845 -1.5546201449189507];

% Layer 3
b3 = -0.78698744305824475;
LW3_2 = [0.28932170871574514 0.35744332094839276 -0.20465364284743137 0.21233010964471771 0.065911062307167673 -0.8156432275277643 0.2736222560598543 0.31509093830918594 0.61016093167509033 0.28525831600739754 -0.22623894061190586 -0.097320729323428459 0.35035772723783587 0.15406440316308812 0.38564352259918666];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
