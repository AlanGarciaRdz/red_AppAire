function [Y,Xf,Af] = NOXAtemajac13(X,~,~)
%NOXATEMAJAC13 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:16.
% 
% [Y] = NOXAtemajac13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.04040404040404;16.1290322580645;0.0210748155953635;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.8646390253082163;-2.0487855904147132;1.3292359762247281;-2.2287852889169764;-2.071391921777666;0.88594183475055055;-0.060731427063409213;-0.87330663333734115;0.49597570097867993;0.14528601983749284;-0.68642067496809955;0.25799730311360519;-2.8705526078377739;2.8067231469692651;-2.5106562789370552];
IW1_1 = [1.9325206445108944 0.74412879263301468 0.0065316454271845681 -0.38403330881481251 -1.4608513340751847 -1.2313608458146201 -0.20275953050239148 -0.7762535793881068;0.31465335643467957 0.4357936526238449 0.90148433744511758 -0.063987918164018887 -0.12849959907574007 0.83547195934919749 0.74551665771528186 -1.084464616696988;-0.58084901555984514 1.7983270569846554 1.5389012539410312 0.01127993240390647 -0.5659364001409799 -1.1199121274148189 -0.11031155930963875 -0.31856285204167623;0.22427379556461308 1.3976510900576522 -0.072252610580637783 -0.26520935177468097 -1.8532936992896376 -0.46007237443661675 -0.66426702912203406 1.1048269942102718;0.63756908012593572 0.14566538854242039 -1.3690237447388884 0.017301866696684435 0.11534594977974441 0.14068905330358689 -0.18126949303612871 -0.50428600859738515;0.094157115395824553 -0.32093274933909322 -0.70845374112166093 -0.10098838946726371 1.5055005922284552 1.1239134300189999 -0.18219574138403835 -0.27772293991285912;-0.28202949725941179 0.040108778489906391 0.64797313185252414 0.58656534158673768 -0.99144778314554827 -0.31114047935232408 -0.64962709782717765 -1.5838465187333766;-0.412408476716565 2.2997666682676612 0.054286854252696061 -0.15849065744694829 -0.14300764245488351 -0.66213420862920513 -0.0088051261290089979 0.073136319873564129;0.7273819133637488 0.095457305582560076 0.67545093595979522 0.39237101417308728 -0.97987372688426333 -0.29019863459391004 0.11021537569540846 -0.4523044629390468;0.84954487866870798 -0.434909533546745 -1.7095435595555222 -0.53691467628752387 1.6322281435247183 -0.99695986977939988 -0.26836792557751232 -0.18656816109693192;-0.31943376280714086 2.0066231170563822 -0.23097029045229123 0.064606912515976778 -0.12820248256847699 0.7900085414120227 -0.085460420719005767 -0.62717829154434546;1.0613912418300715 2.3580799114275681 0.34954142629059715 -0.21397307492603487 0.4181669363844146 -0.27807840210208679 -0.44518497974117355 1.7517918072196637;-0.27557792394156649 2.0350514242231599 0.32265945170660626 -0.53533828067896327 -0.38303850900302516 -0.57648242415706985 -0.11084209438335244 -1.0628068295325059;0.99457268921315523 -0.31165672116040394 1.401082616033724 -0.63809915157862485 1.4431142978863205 -1.020190659608555 -0.21716393825674096 0.00058448302019036631;-0.37093268693776499 0.27899041256965101 0.46318381574721545 0.89669052734661647 -0.53975778728481971 -0.70634229839856266 -0.13496930788888675 0.47513643834683889];

% Layer 2
b2 = [-1.8946225696298804;-1.2163630450709226;-1.4155432201457798;-0.74028514498294717;-1.3478629052907596;0.64502931736272273;-0.64886399808006823;0.20648368896703459;0.23832059367719569;-0.62694529966098345;0.68885530751462576;0.72390206876615359;-0.55662443694235153;-1.4222130472806298;-1.9480566370750727];
LW2_1 = [0.5027774797530592 -0.060064679550494923 -1.1433828257841157 -0.43855518289706275 0.31386508600948781 -0.086805727349858086 0.064814314523520627 -1.3041705291467365 0.45091228476917072 0.56877430436139575 0.2015287452740841 0.60478938849789043 0.34746755888256031 -0.11881896846625455 0.079026273906909042;2.5131635941201065 -0.55927089180191414 -0.38830452215670219 0.54144876589472479 -0.25586653563411238 -0.81844225383104585 -0.1447170784984772 -1.035999069352471 -0.38502943388575089 -0.22695608037724332 -0.77280243407371596 0.746504338103821 -0.21458271621657476 -1.1705131468388295 -0.94165098891821075;0.32086920354098064 -0.68162410231366366 -0.11364370985410563 -0.66417711700376059 0.66812714952447427 -0.36603524896307305 -0.03045851997209818 1.2312770426020874 -0.19567715382424636 1.6969095417980378 -0.52706523910569314 0.10716464587161595 -0.31235217278082578 -1.3826450050539236 0.085198082637455652;0.7608835669914612 -0.42227348737561526 0.73306845625508377 -1.1697795895543242 -0.17679049399512353 0.25100787681664211 0.51613385279261037 0.53755271541011762 -0.12546089570541427 -0.27473018961948892 -0.43003831669601372 -0.13348258221428957 0.23214784946525835 0.40594165476272853 -0.60955546703251895;0.052230319558387438 -0.19789133038210144 0.66423528040195345 0.44794932369839924 0.22797390467756534 0.47093989625630256 -0.022924234987306343 0.28615526088526932 -0.55703462606033971 -0.61910953668602176 -0.32247793491047066 -0.79797330992096982 -1.3860363173408918 -0.34972156835859419 0.14175662950175352;0.15906247327351075 0.14968811942593219 0.60861473849407155 0.69481577053210974 0.48741381441106352 0.52119760837525975 -0.32844947597966245 -1.0032745952579443 0.17940995807240323 -0.33432582247597897 -0.02390106870955137 0.057397911977822784 0.054755513062309677 0.092137847552274221 -0.48829861453204854;0.1720726143085084 -0.58930904529632266 -1.0517552411268567 0.18442475152165852 0.55841869679890543 -0.23703592161344816 -0.44200462709488303 0.040568428894541944 0.42181193514975845 -0.012000934442126111 0.43437721367173138 -0.37081945549987144 -0.58959402940821481 -0.56118148716316718 0.2169683575883235;-1.4804679999114458 -0.029002425966361201 0.97076560820301361 -0.88291447661705547 -0.54581392966806552 0.2701259826026719 0.38793787353063591 1.0334587241522541 -0.18850602928013468 0.12394986813024249 -0.23863855129169878 -0.61977867828967825 -0.33716568108538936 0.21779227717923397 0.1048003168725099;0.71050396505225388 -0.09460541405521887 0.57460358429103353 -0.21900019324192202 1.1792528914099125 -0.50851430892561178 -0.18476850175099574 0.98956740551684563 -0.34270447892394895 -0.12776247120459405 -0.25768796247234316 -0.93770800221687944 -1.2506249532681908 0.34147766561664639 0.228506695558784;0.35864680195618426 -0.49339407063464014 0.055067377973673629 0.18509173755379249 -5.82716694135755e-05 0.86028015946847902 -0.27144355610670334 -0.45247501146028429 -0.20743100655113844 -0.64804506401572459 -0.52833032627573373 1.018172759966568 0.14316149163693781 -0.29987102394856058 0.78466802854522411;-0.079134682658440036 0.6788499904516172 0.027978793589654827 -1.0375039041877667 -0.6993699251013793 0.33853543900709099 0.34791540842210411 -0.1717098982144396 -0.34305685005029418 -1.152593097345908 0.035841982976320103 -0.31526357885823392 -0.25345002434989028 -0.3762278628459837 0.5095618880657653;-0.0665150406774528 0.52077776959316457 -0.077885493376679341 0.65784406834569875 0.48331406485554945 0.31131332186273392 -0.068919923216895954 1.1820745514200139 0.30268874363426529 0.052849801418457694 -0.60884923656757917 0.17763083375982106 -0.37218716810379265 0.30748501857251342 0.26315368201534234;0.21125422076423417 -0.5658382854053805 1.2723118062809313 -0.13513092010431602 0.42106524861009864 -0.57176985956843973 -0.19984875745559114 -1.6206623326710381 -0.14435758359080303 0.65068125430591028 -0.18146437777457133 0.53675407054106128 0.62554891248866906 -0.4947080312622924 -0.8226396959991662;-0.011514722726816822 -0.39171236461569603 1.2789785785184953 0.81080573988565241 0.2037383685622712 -1.17787547596116 -0.12400691181183499 -0.32233462597033347 -0.741036837491026 0.40929543297364218 -0.026742623619841144 -0.91847448606109372 -1.3665946594513048 -0.46484105740619197 -0.44883342757090161;-0.23371867088069448 -0.10572431221247364 -0.90233769750482007 0.50769828993441135 -0.57632435960683748 0.50230404689487096 -0.010080098280023458 0.31660188357463975 0.31312657352478362 -0.43491182842706716 0.52108735103789727 -0.4519770017723253 -0.1842182867159847 0.22291605823849317 -0.57492408022204233];

% Layer 3
b3 = -0.020215145888343361;
LW3_2 = [0.57019018949761913 1.0550100545371588 -1.0986444454142026 -0.54530968202542385 0.71793991143097335 -1.421692977550701 -0.63378179761651732 1.2361964265744556 0.85031519235180619 -0.55669785195670585 0.50023986071565152 1.1054913996589235 1.7581137728082319 -0.8912552826061132 1.8799456888029296];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
