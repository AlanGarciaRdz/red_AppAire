function [Y,Xf,Af] = O3centro7(X,~,~)
%O3CENTRO7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.145303259653812;-3.5721889777202711;7.7331381050717294;-1.5894471094321379;-2.6025337113089937;3.8760133135822037;-2.8487311962666118;0.34043051747117098;3.8827126292388678;-1.841494425003694;-0.54130518411312867;0.91145774577605743;-1.2694956312924577];
  IW1_1 = [-0.55386184393821558 0.25423555083823873 0.68446643425147602 -1.7034707619105731 1.4546728065265813 -1.2845518340940598;0.90872268957702096 1.3353844038046363 0.027685668756006067 1.4673510463236301 -1.0617924421742346 -2.6080637345877276;-0.40684057271480129 0.390870481779509 -1.131077109805751 6.7144740856465424 2.6067096577120248 -1.4959369345345306;0.80281780545245096 0.34881834619536506 1.7732030305988353 -2.6710660797360037 2.762191287052028 -2.1031204548427489;1.8138371449267394 -1.3342130952549927 1.1595595884298195 -3.102216354223728 3.2201365431829192 -3.3722828717380833;-3.365706008542082 -12.864385129436945 2.9137749449422237 -3.2526045680102773 -3.6798744867818818 1.5439944399405721;5.5147915178886606 0.19775709185545948 -2.992273770307472 0.39428731246032034 -1.5936378242608595 -0.0087744160061416134;0.66561613276585496 -4.3963592616927665 0.28676101790311348 0.30651652678396513 1.8473894315364898 -0.3253162890811146;-0.92643833136102693 3.7545181415904776 -1.3361720005804629 0.57227104880936741 0.6790067707857772 -1.4800254601466567;-1.2810229604733401 -2.6358853800879967 -0.20004865900155333 0.88558121779729559 -0.47669372155372303 0.42571676959570287;-3.753324785407699 -0.23289760295211942 -0.037026153017628988 -0.30333617403575874 0.04535401289516211 0.15397859800072325;1.7835891216156643 0.20133564125279241 -0.28922713185962023 -0.25123392543616335 0.61495572975929003 -0.48949907309682816;-0.83560291863109737 -0.48939024327010849 0.6428748674417516 -1.1872425897466026 1.4578616185606059 -1.0808697164624088];
  
  % Layer 2
  b2 = [5.0690901648172648;9.0444005318883178;14.917524560414819;-4.2570118811781565;1.0860515213138395;3.5733733022810061;2.2163504709984228;-3.5575798313920743;-19.09145513912669;2.6789989849959999;1.0580818127023472;-5.6226131592246062;-1.8596877055922096];
  LW2_1 = [0.69434223195840628 -1.3370844246705038 -1.5766246359352416 -0.59685855563895385 1.4563689683794323 -0.29073211418432088 -5.364035657180632 0.52925852113745941 2.7617662454104575 -0.39712409418107969 -12.591796894792294 -0.15855412192715029 -1.3307029859068298;-0.62302422491607223 0.34980970696989128 0.61116017796240474 -0.066925688040481698 1.022819987532182 1.009981887174608 0.75686791447538915 3.5133751000015945 -4.7855382581773265 0.12955427185726484 0.68146830527462987 0.52325227072608838 0.82423243057452589;-2.0435580506211091 -0.30505495292151025 0.97658324212311465 1.0742669530183426 -0.022101230730406072 0.32075045579719658 -0.70507750217601617 5.2660664695600437 9.4076042525347479 13.729204168533345 -0.90083610088734611 -5.3809795398809772 0.77897161791615299;-0.43188470584619448 -0.22931069187529673 0.26902846050125245 -2.7384289730837108 -0.75688312674998981 0.15470505446395114 -0.81697435911018013 0.61819184755771683 -0.35900709110302076 -1.5541908208872326 -0.64188296026596847 -0.7132046914846919 0.79402618398909908;-1.7647506089658005 -0.16621858836782397 1.8647280012726872 1.9108699339024751 -1.0729965507647476 0.85090660352540715 -0.84011050779734786 -0.86051087359288103 0.88492405634588833 2.0872004015136389 -1.9464095618593267 -0.77658145187469552 0.70596606152037766;-0.69366666383128472 -0.31317678023120837 -1.4081773371150859 3.055616657828629 1.3188593136817879 0.3385813860312078 0.08207200495339409 -0.19947553401007861 2.3071707775149939 0.27451628754939195 -0.97695693511801629 0.26490478257145167 -0.84501274707998464;-0.18371700221988999 0.77649947594986857 -0.10617624418659702 0.40258682881325769 0.91300321874604318 1.0696204984668205 1.2302580616358187 -0.81821191640210655 0.21517799084906478 2.2463580335668341 1.1714314414399887 1.5195799885468386 0.81287318624080862;0.86437029921823316 -0.84428670592746846 0.31729063381585798 -1.2591742056553297 -0.52225443264288673 -0.74368514191736035 0.019366025826254178 -0.69433679257470993 1.3575141920598761 1.96856613501817 -1.5329080442794225 0.7449413620850478 0.46413067723794021;0.7133216701073829 -0.065074831544348205 -1.7091368073988948 -1.7170448003648178 1.1796898172283492 16.186132864813683 1.389611013821062 0.98344999667377875 -0.89886739789200076 -1.3164621911008378 2.6547017324296478 1.9774643946778272 0.30935271440500445;2.8597652243004461 1.2838113846211354 -0.51896003989050166 -0.72262536415090073 0.7512336077145596 0.26512710630429936 0.43770390796790049 0.79706909838235651 -1.7925837303929846 -0.8232875324716401 -1.0652549594405367 -0.52606037039504716 -1.7941646070623718;4.5820420489041513 2.0048058463005836 -0.83471271519403434 -2.5270269597927135 1.3328147675064346 0.22594312849137596 0.0085480562746939777 -2.3658337610558591 0.47427270685254103 4.0555610815511045 0.37564776234416153 -0.31520194391843215 -2.873579267303874;1.803943236276299 0.55564882083939915 -0.93245896303478948 -4.3629330066311658 -1.0057340941704458 0.082997335782757906 -1.8457702368283955 0.12942996809337481 0.66303543636607332 -0.21861001513901351 -3.6982528260598571 -3.2275253761832574 -1.6776733856547508;3.8961127693785929 0.92801364179018841 0.76942312432581295 -4.1601230682002077 -3.2032714634587403 -0.6621875463714687 -3.7502121717129175 -1.207464612926638 2.2538280775161845 -1.7259542824033476 -3.1415528821727277 1.5109129649454787 -2.07252830768152];
  
  % Layer 3
  b3 = -0.73287068554113688;
  LW3_2 = [0.63412119259027022 0.90517461402584543 -1.3713701608105533 -1.72417971378267 0.66758768714339856 -1.0072649025037055 -1.210630707235522 -0.99279522019814859 0.85671217728986282 -0.4763846578152362 -0.34858885264567402 0.46951874294408535 0.14414860592350584];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
