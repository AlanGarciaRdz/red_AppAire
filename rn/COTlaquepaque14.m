function [Y,Xf,Af] = COTlaquepaque14(X,~,~)
%COTLAQUEPAQUE14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:15.
% 
% [Y] = COTlaquepaque14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.7150064605020121;-2.2228096328381564;-0.95205579470193136;-1.9707499238131907;0.43071042181303176;0.031736579845562794;1.7667424709944088;1.1715270451304163;0.26073141571682834;-1.6555729335456584;1.6679067696004726;-3.664468263629681;4.5779599000455029];
IW1_1 = [-0.93010477554102322 -0.43377494556228952 0.42370282710779295 -0.84959324449920903 -0.85979985208719867 0.066131390823530423 1.9283402407664194 -0.065068110102143167 0.98559354454017889 0.41568312370363258;0.32801215349998469 0.24568279302576532 -0.36551073828617692 -0.33807517494964029 -0.8207989120200273 -0.80672749356680495 -0.10752997993787122 0.34875629461151403 0.18284406161631481 -0.27199148063206863;1.4344661523170126 -0.41093032548766295 -0.38764748594291298 -0.083418749753998073 -0.45328895575813805 -1.0385016532047655 -0.59803090348471932 0.10577169006815543 0.10586129110552342 0.40289638480581319;0.092718107971837271 1.0894344467955333 -1.0878912341883848 -0.9274330878833329 0.54478642175211267 1.3629854431577855 -1.5847440924326579 -1.0024743292324774 1.0163567888116041 -0.18699063778314234;-0.69886540049076862 1.578305306430859 0.48809267381409738 0.20836191138731949 0.65700083137722021 -1.0195851723144687 1.2798618630841174 0.22006305372299387 0.067571616819800895 -0.16395370311097041;1.9825881289238012 0.25189701074152943 0.16303509051457829 0.91444361849195277 1.0369200243437409 -1.2459408111219266 1.4097694991801593 -0.088393690883585063 -0.34737141646198599 0.31822542352702593;0.18693026169742524 -4.1484084766832323 -0.12054033876118643 -0.075417392075015105 0.036603041509811494 -0.76516514085911491 0.12214311304608416 0.1017672874712581 0.0337592363148023 -0.053993102118907801;0.14708209128580296 -2.9196992427339059 0.16151263696905005 -0.15120659081600579 0.33635105191535308 1.1679724735825989 2.3183014742147585 0.2008996213074169 0.22140162788413939 0.25574148773186889;1.2610715486821451 0.26052134155753337 1.1421229323507405 -0.31961246740785143 -0.52595723491917412 -1.4673570162814182 -0.16960961289675711 0.32964070203908485 0.23632324719081724 -0.30593185305949755;-0.8736994357903225 0.14475478707593931 0.47015223178534815 0.021458752699650363 0.78054919528992184 -1.9596321606628124 1.1425352888228362 0.17071731962417916 0.0046694407022975573 -0.79965275437937688;0.50363128120046541 2.1330749162195959 -0.61295039347280311 1.5461116195796973 0.30460895538070615 0.39741031027465412 0.22416405494272693 -0.8385269111383471 -0.67087028101575674 -0.24277531871168775;-3.050614851786571 -0.05576270001010885 -0.41156188912242597 0.094774232654488866 -0.78257836236850464 0.55542561430260318 0.94397363778915189 0.029017153521466776 -0.14652388333049821 -0.24942477978903921;0.4279706410209369 0.12661999777870211 -0.20599135281035119 -0.11627451792857166 -0.16569095711628037 -0.81012318827517038 -0.27368597066034978 0.052173565709020667 0.049829061490860631 5.3403776165024102];

% Layer 2
b2 = [-2.2951178258440321;-0.63868596871603645;-2.8001649990686994;1.8320166188776654;-0.41297251087155334;1.0037546436616167;-0.54132882177511821;0.08594117444529574;0.81335416831198004;1.6939966435623506;-1.8932100979577746;1.4819649117438389;-1.4063593433123651];
LW2_1 = [0.5621332901314724 1.0480884668773236 -0.53476587854695989 -0.23689888518245394 -0.29635864189749483 0.8616451374430818 0.58975764081981707 -1.673717351262864 -1.1652748577829564 0.3737112703283797 -0.78136693361285448 -1.4830685437256623 0.32668665291193377;-0.2090091939130613 -0.21542719176334296 0.056610291811697189 -0.19633406705428033 -0.46479329183091228 -0.18757794127254621 1.1982448647074204 0.090502225327450128 -0.010842476693667398 0.42666062756451556 0.5426528768912886 0.22845864678699893 -0.20536684489834892;-0.32725575663331868 1.951361512407398 1.5039316445811581 0.78548261294555655 -0.0087362744237223094 0.33951662513133329 0.28130652692767094 -1.950347226794636 0.2211143406490699 2.2900281484966154 1.0253187702059612 -0.12410694168886374 -4.3626046371553109;-0.53023272208009509 -0.42841762936868016 0.76934948176011064 0.82091407635295799 0.12868510379214806 -0.77317723407530003 -0.34367873618777484 -0.61526522657475158 -0.13771961768776511 -0.14698230009458127 -0.057358751345591888 -0.045641898421769689 -0.44629835326992573;0.20560624751144757 -0.54323444857213021 0.88683648508320101 -0.046462683010536056 0.59650845557085386 -0.67236059981995844 -0.64982853996766976 -0.35659307400657642 -0.9064702390683721 0.46879069674506701 -0.091636876979673737 -0.99383965957215303 -0.53908305436040527;-0.1606323886926963 -2.0592427973557941 0.36828847554456151 0.034554153131071352 -0.54117482458337773 -0.6817685675786388 0.74542838751429719 1.8220264606197281 1.9276000251230958 -0.080625287544055402 0.42831210129259861 2.2976830028370232 0.086054771310978911;-0.049071722670006715 -1.3623956778313329 -0.40294435245722859 0.65113720214741977 0.97310831667810826 -0.62585342495532481 2.0882269964200209 1.5103034062386509 0.13693600419718788 -1.2080513633236938 0.27665074974565518 0.72368544215538122 0.7053084867866648;0.95192223214107907 -0.004317818393610881 -0.5551156365328882 1.0310805328694252 -0.1983279207244554 0.75125050801529225 -0.66332744771553775 -0.29604025596661104 0.079064175548451757 0.88345474438213889 -0.065673372934070606 -0.86686389226544402 1.1976433724370241;0.12850031935075176 0.52087717434905789 -0.78605500663076833 0.328126787992154 0.23946460479245429 0.36460443385487368 -0.62901530549575035 -0.1793993764520932 0.4736514224649383 -0.60752758521445394 -0.58734674722122659 0.18465349992216229 0.51381067130742664;-0.32358172331301743 0.20739268643567393 -0.94163914023581774 -0.51965598379816613 -0.18333356979456578 -0.32964026122058832 1.1020075323776988 0.6777698903669257 0.36138380441047213 -0.68955018809510871 0.10744350842331965 2.3840221357943836 0.51150030487052467;-2.3838443710046344 0.8294493369690028 0.24776485834484777 0.26609019110366255 1.9385543703141161 -1.2041668288111664 0.78462950652218222 0.29941907061176576 -1.2893857769765167 -1.3700491945508451 -0.27134593795713768 -0.12220765423483451 -1.2254050691398672;0.32415396647010875 0.48731329222661857 0.72555141113502053 1.1051216333747438 0.063679834674343863 0.41550902217471908 0.18240448819197475 -0.69294889640989088 -0.20969952817989054 1.0203756552083596 -0.04248572676193807 -0.80997259794646692 0.80398035445019433;-0.79988868811622116 -0.098166133000245001 0.70084716438526529 0.15212481931755745 -0.37620375614398938 -0.29405066655833523 1.686800637800945 -0.21241201886283975 0.10582623919815046 -1.2758799758502057 -0.28173563314402195 -1.3395284967083594 -0.086849369871386278];

% Layer 3
b3 = -1.1551262076997604;
LW3_2 = [0.59858594855591374 -1.3994786337918841 -2.3294568473593906 0.63299596431173766 -0.78491361616131317 0.4628603246684867 -0.40583661116704522 0.4800423436724825 -1.0685518727075025 0.57344143382394142 1.5802808039028919 -0.42206467483654553 -0.25558521049468125];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
