function [Y,Xf,Af] = SOXLomaDorada15(X,~,~)
%SOXLOMADORADA15 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:33.
% 
% [Y] = SOXLomaDorada15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;11.9760479041916;17.6991150442478;0.00572573718866304;0.0175284837861525;62.5;0.0546448087431694;0.125;90.9090909090909;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.210428017023141;1.7503066639840137;0.8666611175553891;0.89026714386524952;0.97499039109557795;0.62104958779670916;0.58957903222529451;0.2468029207967371;-0.024647063416773023;-1.196225616513485;0.65830800703552106;1.2036849024188794;-1.4913434371507568;2.2092789144193365;-1.8933270216438411];
IW1_1 = [-0.37831066770036686 0.26336639321457128 -0.39560298144791634 -0.60314831767287458 0.55143155741715011 -0.66669628251472346 -0.01694367224526391 -0.41232834760804504 -0.1854007746767522 0.84357980886122053 0.49788560536049709;-0.49094019398820998 0.69007989445312412 -0.43438173950503078 -0.8070010676631385 0.078731965923946989 -0.063805712299363548 -0.23142260641823595 0.0030857791517954094 -0.91304072849759677 0.25141659722616688 -0.82229516648024226;-1.4524615532538976 0.23975069383166903 0.17400278804630104 -0.069045261514510486 0.78161583315490235 1.172232275751615 0.089937543907354894 -0.18974178198800179 0.15373148802039233 1.4385408417763534 -0.83762418767195301;-1.9040982170353455 -2.3532368271735624 1.0397119532594992 0.3094908985257222 -0.49949855718475933 0.44123812883195529 0.66057428429518361 0.30048197161611462 -1.0335622761086545 -0.13608025124694578 1.2772800206166715;-4.1022102538279164 -0.18320271414777281 -0.024545351536549187 -0.22612025538941624 -0.49719418142596356 0.66617380549627747 0.26793807382742268 1.3904669200812052 -0.044583915448741511 0.53616438067353511 -0.9935568532569774;-2.6268309480168415 0.086695486383277398 -0.31834698000129552 -0.31555751125472781 -0.027037721489867942 0.83302292942953893 0.097725341979720992 -0.73961093129362432 0.37299653211626715 -1.4229513840479147 -0.20388489294380771;-0.73436282689463139 0.024963593940021143 -0.12568795961768203 -0.198540545976335 1.5608307542972417 -0.41395701624842984 -1.9193425152983312 0.73268541274268217 -0.51669442327231307 0.028297170221290399 1.3274859152715965;-1.6847824323422553 -0.43760857893195204 0.63912936544368171 0.75026228091365021 -0.73012397331150991 0.1801571550596435 1.1711136320675544 0.86028217498482507 0.1630054333670056 -0.22186413761677634 0.37117546129853396;-2.1026095405071881 0.0053575868539284567 -0.095471242433362427 0.075798293909630221 -0.13343323594667195 0.86945372619032868 0.022009331382184985 -0.87294928485635614 0.19774440448328773 -0.87812916032246657 -0.49888214945535858;-1.4246680332193054 -0.49588079087288833 0.76241210505347923 -0.25261654720387527 -0.22145548408994328 0.33634425795567907 0.43902646352624597 0.35559116019553427 0.021090981918160581 -0.20327619252595752 -0.4622825735135333;0.65370343648972662 -0.18949373368507813 -0.27788696056317436 -0.58789468187905025 -0.35359378079984227 0.02796854250847719 0.32582765254293639 -0.14634902425796359 -0.22140086177843038 0.70064450685021784 -0.963950534654615;0.91176562382321868 0.68056884242027949 -0.040493063456338602 0.27207034701792787 0.33626833495149955 -0.50684137617540359 -0.33711353944160816 0.36184095594461435 -0.29094927744654675 1.0019595705697415 -0.13914503251442592;-1.0421931651827578 -0.3563298395597293 0.12490582451860935 0.85012644728627085 -0.6023497816949368 -1.4314936505526725 -0.86586312654972175 -0.018901428586146761 -0.12726501842677032 -1.0997290602075929 1.3740070147468157;0.4815207912635685 1.0137930729673239 -0.2116507492294365 0.85143572045093785 0.89373878457681943 0.14356214445603971 0.10465483661291319 -2.2152644897343166 -0.18131225704457105 0.017622359916374231 0.61802322617359817;-0.43601268968880497 -0.037523235807061579 0.33490099961944642 0.79734702611650499 0.66636912005403992 0.48440211935651312 -0.51963379737926485 -1.0985124310088021 0.065499553609507002 0.41130747451944344 0.1709820429182777];

% Layer 2
b2 = [1.7226492333649506;-1.7928942948108673;1.2889794258460856;-1.0139515217000861;-1.0319581719292623;-0.6143987517585815;-0.1322614689931241;-0.41747449460524327;0.15853607624834196;0.86681860979990588;-0.80450179239142683;0.74148872653858988;-1.2821104136710753;1.2734946248977672;1.1760054207127228];
LW2_1 = [-0.36110447525914469 0.41948842432202615 -0.36526408372315688 -0.022973309811321584 0.67899350874405096 0.80537667619288145 -0.76216999580958822 -0.45149705103226523 -0.26963480965372993 0.58828164811109362 0.77172606348434791 -0.50320776354506769 -0.26324068898976166 -0.71911182999914425 -0.17820909209511723;0.74179516541509505 -0.011402070888851123 -1.0150168751143525 -0.34379361875759756 -0.3013364875681559 0.26149171832671814 0.91422847698709986 1.1030501121388465 0.003776139505387327 0.014077805238034749 0.48069691605237463 0.62013212590496503 -1.3044145391195028 -0.17702365519959698 0.58494793290601343;-0.28317308829018845 -0.41629642077795093 0.28852849841480244 -0.936764959169335 -0.268544239112739 0.41490658058612745 0.7743298802104035 0.42977600087578677 0.49715820038988645 -0.63824830196068494 0.57105127207271966 0.58411837148801438 0.42956292655211425 0.19379639845137606 -0.034954751178947044;0.4638252079920947 -0.73360768550056388 0.45168165583870612 0.68845792378338933 -0.1313489757122587 -0.15971550433083045 -0.51684877698895082 0.11383335595874017 -0.17628153570507776 0.59429979494942753 -0.53574484332730121 0.29133201529564196 -0.14582313124944182 0.079360474294468811 0.47884607873091561;0.36071361166684701 -0.5013320460970746 -0.47012860356807817 -0.65708756756504216 -0.49821143312303501 0.57631870585854927 0.78217761851224377 -0.24174039374179415 -0.80497984782717569 0.48285213168078228 0.16401585149479769 -0.92807070864730645 -0.24965355823200952 0.20064994923942112 0.16010591382284645;0.58785353954580466 0.45050010096828064 -0.2324706684269911 -0.26088048597876445 0.74564588900762152 -0.83993937834693089 -0.3572592157746794 0.52614922791603957 -0.22535390450191686 0.1477312969344399 -0.35562627490930643 -0.47739459230160652 -0.45537749916329939 -0.045445362865296844 -0.45879831223069095;0.42051881114561973 0.28329994884068072 -0.1837699638065782 -0.41594678350090392 0.4415614563862546 0.76512169229958726 -0.043308212339882218 -0.15123867584622896 -0.019926154916048919 -0.97630168689395613 0.64043353388887381 -0.14591262006037084 -0.15192853983653717 0.75515754459193596 -0.69722694827294196;0.94941661244615461 -0.72821630544973825 -0.23068356752376484 0.50413550264062201 1.7312297728051691 0.59465887646225246 -0.74761015592304558 0.22838009473443904 -1.3537215218163094 -0.45903331476769887 -0.94049379088606322 0.34993914959689465 -0.32672238908713047 -1.0894746093030134 0.25016867465827519;0.70016827823329564 0.51594208241621853 -1.0627571463175594 0.43740264272735913 1.1994091780003602 -0.080448923297543315 -0.2145867525976603 -0.0051597788522419015 1.2810851076467384 -0.94749733767082356 -0.36114917770559413 0.50675103002584465 -1.1094335913688376 -0.27665211804428108 0.48072898066110709;0.033220872237593249 0.87056637310879814 0.63153643975541873 0.31385700777959258 -2.0652112120400519 0.28465228153437211 0.59507512481323666 0.59147096258788967 0.5890727421120262 -1.1480498558303827 0.71444476635783505 0.84135410818375989 0.69468326660930835 -0.41949323791811077 -0.53634880422499265;-0.052764395707288261 0.4437804990810359 1.0276929183832406 0.086828665693079565 0.53526933019739642 -0.54990301509379191 -0.53714947341204644 0.19815661423423028 0.25220233058823432 -0.3834102667773166 0.095680851725613345 -1.1414947262382142 0.67337758545617343 0.36541645975487669 -0.234617463646971;0.50746409056884723 -0.24404365081732182 0.98302580435161879 -0.1538963321830121 -1.3938988900346112 -0.17261120156052301 0.071964983195729429 -0.11909898769262883 -0.51171161282874411 0.66686726272567443 -0.53476037759485473 0.47818254591795506 0.67362140923966296 -0.26440509049351735 -0.38200804885484524;0.061438739531843201 -0.63031071729417787 -0.99878610835307979 0.0072850317891983637 0.28699080653274134 -0.16156550993900554 0.60908101284468763 0.095453756506377968 0.62891319454245853 0.34653398581948858 0.51773754435279362 0.6949971438420246 -0.59560591573380406 0.073652770854654784 -0.094613855240927663;0.23430255820926965 -0.48528060975270032 -0.57140723588850295 0.29077142380450011 -0.40095489307064353 -0.44426302825996472 -0.0042072619185742084 0.89322926329036212 -0.29891270880739296 0.22144263446278387 -0.76934086751444486 0.58234138467112906 0.72448355894409977 -0.22417425084454079 0.54650589656079118;0.83799188047733342 -0.047051447532144963 -0.30432562071891395 0.36189724153471492 0.70415653231091047 -0.82503012512744056 -0.61707573437375263 0.43418439920683694 -0.48381130979361808 0.31204441491714813 -0.90687348892526809 0.052489036541998824 -0.46295755205532751 -0.56716631844335219 0.06957322984413622];

% Layer 3
b3 = -0.31910186772649246;
LW3_2 = [-0.67626688345268948 0.82829544856394455 0.54466514709107094 0.85785547785042549 -1.0933449132222293 -0.90510276356284769 0.61386932606843025 -0.48787490569421904 -0.98853049661574777 -1.2856451298044318 -0.16290226621004167 -1.101525406142404 -0.21378055911602808 -0.032632089930911927 0.90765145258207403];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
