function [Y,Xf,Af] = NOXAtemajac11(X,~,~)
%NOXATEMAJAC11 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:15.
% 
% [Y] = NOXAtemajac11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.04040404040404;16.1290322580645;0.0210748155953635;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [5.7549094760769508;1.8613339768848278;2.2318587590898051;-0.74367373687302651;0.78157413021016875;-0.7255789993804882;0.32928633406186691;1.1580003792215137;2.4321738900611249;1.033955908414687;-1.8123871417694928;2.047484255954886];
IW1_1 = [0.010125194932201036 -0.5613716782398136 6.0033193654465462 -0.67331393649428284 0.60179726537945788 1.366701554096722 0.20928901377912126 0.060627752896655993;-1.073334841246196 0.31359511376357951 -0.97954844899630522 -1.5859569534980098 0.36796197667050373 -0.9340364526206788 -0.35434858468799429 3.1501511026834437;-1.1662139611785762 -0.85586850347738863 -0.49416761784898899 0.57473447384254039 0.76699281203928193 0.75269641783549379 0.36285904459074408 -0.27082131498707335;0.47698607402460019 -2.1038960838468097 0.22035266356279282 -0.23692353604907501 -0.038693254582240863 0.07059506388664348 -0.061770212272153263 -0.17623052943191259;-1.5501971203254361 -2.919040001186846 0.28578881971927411 0.37099800999822741 0.11936697724189875 1.1306104422635619 0.7171099835013478 -0.29121329242331762;-0.51171459143389653 -1.602233465809517 -0.26034400679742697 -0.32318406580348025 0.047940880307537327 0.95265853603079187 0.4554404218904104 -0.52660724089446576;0.72593968363704631 1.1418779673427664 -0.21082395248984365 0.10638116523999995 0.44225417025778657 -0.22646252783618684 -0.62195887281353135 0.76892016486614023;0.49946657884746137 1.3608036328679569 0.018899483230893535 0.95667464489104748 -0.23011812810399179 2.0485506320994435 0.34040609471681149 0.062042154321059584;-0.29669519305361619 -2.6400291231298327 -0.66645399481060719 -0.65686093885861907 -0.16997061499800675 -0.03673075837976323 0.32395148472507818 -0.39618114225135709;-0.55695583627231449 -1.8279678922044897 0.83216545622725302 -0.5023189963481699 0.20810124264629068 0.14549575047226473 -0.67071306703311351 0.014695770737823445;-1.0671180990123539 -0.7776733510935212 -0.083178522140786817 -1.244666163458557 0.082846496708815304 0.42284301937457131 0.26436075571665951 -0.23425919207187257;0.13213775723750756 -2.0696161180117576 -0.50544446097437967 -0.82732850470056585 -0.22154612122966319 0.088583493977792735 0.45811505891990251 -0.27270447897242356];

% Layer 2
b2 = [1.4493833511772543;1.5274303317895581;1.9569295651107972;0.76629277073239233;-0.19554877066932783;-1.0108137073346994;-0.41871817517608306;-0.848859445982868;0.71991855096033286;1.3699114411381523;1.2905660739472211;2.1177982432813316];
LW2_1 = [-0.99324065168242914 -0.01933849510933433 -0.3645042937865926 -1.8749984132519768 1.7230348718441513 0.70291015156282322 0.39118606279271012 -0.53748389947762409 0.89322500441787278 0.45537478466229497 -0.91699783800618495 0.13015096515394395;-0.62837520083535137 0.25725085902618733 1.2624838879219937 -1.3426611440506253 -0.53933462798920107 1.9756509290870619 -1.4645098792015283 -0.47903598298346783 -0.61022582102254774 1.3673801835630082 -0.6635810520228036 0.66143831186273294;-0.98265769793725044 0.43751106030685355 -2.8771353604547549 -1.0121358972904912 -1.0761199225652436 1.0995484992302245 0.30849532203317637 -0.55440197038820371 -0.1607499119574361 -0.18690347438246099 -0.038531519582632935 0.76824080380886062;-0.28457959121104737 0.025701724661441348 0.77345791916607765 0.97996522305441203 0.65871134727082825 0.59880923828477572 0.80890303735929991 0.82319322399991646 0.29379189048627108 -0.18952039938577192 0.11990286088668735 -1.0753290866819047;0.32578971078285712 -0.75610005862781504 0.095345006872794152 -0.7580694194472688 -1.2081615503523127 -0.3302232964922317 -1.0195945818945731 0.26495255416436109 0.55888355263151035 0.91723010796386695 0.68724331781025527 -0.31581417725697447;0.73534568398012823 -0.22439175834238181 1.855834041743692 0.71427188302874689 1.0713438849990871 -0.35405393806971025 0.16597550224873864 0.365306218765169 0.65840339960977146 0.084320843408187296 -0.21636231058257793 -1.5296370324850057;-0.53517208497215052 -0.73909139687265768 2.3969666864331285 -0.47279211216232103 -1.1624737586923597 0.42538723762209174 -0.27980323567199822 0.48092776286208283 -1.3446915312537702 0.69895440430568234 0.99026677301036048 -0.014987488143841534;-0.001824518026111323 -1.2685921161957026 -0.3865477035200876 -1.4928945329121504 1.4864487721528343 -2.5828517738201366 -1.3071379933658795 -0.26343503400033674 -0.29889508213589927 1.0658786947831449 1.6394956153798386 -1.2634285002163912;-0.68722960469359684 0.099659040305902682 0.25899034570016949 -1.5412610209164208 2.4053432370211487 1.8489600441519922 2.2338635057786305 -0.47531743890143247 -0.16082150577512047 -0.0047196301288427297 -0.83230415201676855 0.15837708233511993;-0.30987891306045634 -0.19759433951832187 1.7724957026880765 0.72052923407657876 0.31394027517347289 0.9747917498741272 1.2926308273033669 1.6035302378752201 0.03998642817518603 1.4490786962533571 -0.095463090394040356 -0.51683161220210394;0.24076905262531748 -0.17532556129256813 -0.9037346403037041 1.6152865422726075 0.83359473833538622 -0.6670998938099153 0.18381332523055238 1.2315217497529318 0.20227120676677304 -0.31065074631658007 0.63833912749878596 0.42505007058011268;-0.11749794514645337 -0.062988113432928858 0.53909949018226211 -0.60199334477949396 -0.59454604876935269 -0.38538050702271182 -0.24686845435435217 1.259380891394972 1.2670215363052835 0.22443402835091439 -0.5204460164824507 0.29562030393953281];

% Layer 3
b3 = 0.24114426182316992;
LW3_2 = [1.7935734740848435 -0.69598639653847882 -1.9946914798316957 1.921935753683792 0.79155065368048327 -2.3518511144861862 -0.99866719721226704 0.72233126115485313 -0.71809439793138485 -0.467238835873443 -1.0417331919458674 -1.0501109734193328];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
