function [Y,Xf,Af] = NOXCentro19(X,~,~)
%NOXCENTRO19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:21.
% 
% [Y] = NOXCentro19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1793037363216698;1.7419049382322995;-1.7864191407375913;-2.2678115756975132;0.21944204093490532;-0.26274722866567563;0.17759805544398685;-1.0199817405709242;-0.64259307997973236;0.21617099392942302;-3.0409700499725187;0.3180860988266333;2.0820216371278608;1.0020327428375981;2.3310640778731346];
IW1_1 = [-2.6036714412917772 1.2175856292483809 -0.25367145713544892 -1.6852994587485579 1.4322708933403936 0.20164302363694592 0.096985938856272005 0.17154322350151935;-1.7543675578971911 -1.6951992396329434 0.054346211170037489 1.5668202290135125 -0.81524263199244917 -0.072584917203847174 -0.082743370840510547 0.10293909037546832;0.55232755283542045 1.3398181872404809 -0.75322632461900885 0.040646763161694029 0.70577643595202477 1.1874679719832626 -0.62719628215826928 -0.77688874999877755;-0.12241255286148367 0.61245366276606039 -1.2786009567480734 -1.3229332947584038 -0.15627103537929304 -0.51682999667273422 1.3310919225865643 -0.96856213233270694;-0.011860851325342493 -1.7292188136741533 0.0024112541553649447 0.36945022297484253 -0.14568399943755045 -0.64840232108055051 0.92488167514399677 0.07236329454130698;0.84836505358014724 -0.92264026786244169 -0.16270020989908926 -0.22133538776429623 -0.50862337993982765 0.053596534869433374 -0.091316880963712016 -0.24084693831814086;-1.3564821299737615 0.26899767400170066 0.0024318111099140768 -0.28806976549162727 -0.51595195208634537 -0.44889728572193288 0.34240088334997321 0.075381627103147636;0.15012644263285477 3.8024487979439558 0.19011343435370465 -0.088653965168553492 -0.051781658761621344 -0.19360151832458716 -0.084899920341527338 0.057980124292035119;-1.0485760263898614 -0.82701064129968171 -0.58186130283409332 -1.2968653651092859 -1.9339844254674283 1.3843892407380163 -0.32591435539499708 -0.91194701072782158;0.56744667289699857 -0.66126841078310128 -0.36740052588308553 0.73758760714684646 0.038990058057189705 -0.67766698391951252 1.2429044964726446 0.14850208697316228;-2.0033160722081065 -0.50644476072677991 -1.5375033178635125 0.70930506727080245 -2.4744771229538882 -0.32270457749622333 -1.2407768786723974 -0.46343469692297262;-1.384805936549208 3.2884055305463904 -1.0263047773776954 0.083566422427098774 -0.3779728080454009 4.9141979284784396 0.21057420185371831 0.0020486892217645883;-0.69667490741397742 0.63373442011441816 1.4768162076833409 -1.7749726542491515 0.99055486363708778 -0.57177493818953917 0.41754549928110779 -0.20597604700220062;0.38862555659790493 1.6065814358891592 0.2111652864908562 0.42378644566501988 0.028166145903243969 -0.13418121764588148 0.10715884374622357 0.23831213291834832;1.7533924616226841 -2.347259022968522 -0.028131650881139354 -2.817845142825993 -0.093391358406219427 0.023388684874162652 0.33983772185690253 -0.15724229676983797];

% Layer 2
b2 = [-1.6909617330378457;-2.3750112762044324;-1.6910815885062753;1.5815970551329308;-1.1430438990303813;-0.096225048322672993;0.56889675765908698;0.36448531694067143;-0.22227739653197265;0.64843591475073692;-1.9348275843997547;2.3398072614358703;-2.7294858130502617;-3.0412941830605238;-2.8389684295663877];
LW2_1 = [0.41582713410891897 0.2361395066055868 0.41400402189459207 0.40024275044695934 0.56252393627303854 -0.32046261244428065 -0.19606493673892836 -1.3024357856448521 0.70786152914740696 0.53211130211080537 -0.058612283580571446 0.13555273650987926 -0.26050482073243086 0.096003267449196253 -0.70087037856182377;1.0509711259369237 0.14939408034110191 -0.025762791748792563 0.15171260926928612 0.22938926183238981 -0.090269797646628527 0.42557157046292027 -1.5667501527363463 -0.39709585930340319 0.92163219324691248 -0.89286307892471628 -0.14353699426883129 -0.91479373813732612 -1.0021205635801693 0.44946699057047723;-0.42477554934556466 -1.4221261300949117 -1.4483456365937601 0.52843650133318132 0.78488283470166342 -0.68487768726702969 -1.2518873123086869 -0.97890902067820074 0.83340176804974253 -1.2307155141623183 0.33925762997013631 0.26059399059515614 -0.64864042397032473 -1.3291393932268536 -1.0032717820408203;-0.95313870596305361 0.51937042446597126 -1.7186361254746867 0.16945013519726052 -1.4105506174764444 -0.10342097931245603 -0.5361942933176207 0.67623973190277065 1.0241897917323013 -0.27656969707231061 0.93335569671773222 -0.034777134416247781 0.83640657270783825 0.13074117650659603 -0.069421530239591051;0.3322366825913699 -0.73051091707246962 -0.48004055721107974 0.11480748375467441 0.89650296629715054 -0.38194858327692616 -0.1954959566978719 -2.3754513969742104 -0.85048986269166515 -0.98003186453415048 0.044822497132715328 -0.25286504369645202 -0.53966992225428434 0.24866282353202651 0.54219202862068061;-1.9436039601625341 -2.4389507250560611 0.47457320022982752 0.42991843834237153 0.43642243453138635 0.14927306210042052 -0.72124732214682707 -1.4213335113415675 -0.040937535133573726 0.013543896546408196 1.4671741052902239 -0.053334420752063683 0.25431071269769745 -0.010602728069838696 -0.22247528015079196;-1.1683814706360622 0.54085756965710563 0.69601186539567506 -0.70732494851175964 -0.88066468768255612 0.42954313243701281 0.31746492263753812 -0.15412833482000529 -1.0811163681757328 0.51275148602458465 -0.10352221658347839 0.87654342445434297 0.19975638820671499 2.0820383075630278 -0.18794147508639938;-0.95640952426350845 0.28961445519400936 0.31348771751183097 -0.35532879777171389 0.16636364629717487 0.069426170621428585 0.094755369909322457 1.1335461040418693 -0.25086322658758237 -0.36264335481785237 -0.6911727925443869 0.56361434960310075 0.19334957389029578 -0.51152666993878659 0.57729720341150981;0.13331517449124652 -0.56448731093577276 -0.71120143915846523 0.28060754963933188 1.6737055306916824 -0.79435814884871514 -0.81547074080056003 -2.0028449842876785 0.35692655389386757 -1.5005591203217745 0.0048557707642424425 -0.33482224114012249 -0.62829754563294016 0.21661291877646152 -0.40403350930266441;1.5984962177066016 0.83505703922047514 -0.72872958149881262 -0.60123538517408381 -0.90599015672119987 1.2167747196154881 1.676057215828886 2.1454455066651081 -0.65807704962701752 0.23938374009623437 -1.2226626209219167 0.51330313191512345 -1.2610963232311176 -1.7058052370460897 0.28990149552143391;0.50574631355541066 0.67322136368165708 0.62516749113091508 0.39179069461159777 -1.5693075333325661 -0.13478470264915185 0.74784413029388763 -0.38699707376796183 -0.80856213296798463 0.50173778433868299 0.71608231528344146 -0.94987766007023278 0.14790080549856766 1.1744124096552471 -0.72609536132851349;-0.078025945083699283 -0.55035824271693179 -0.54456384148936554 -0.28463331450988416 1.4609938870247861 -0.12616346577993809 -1.1064960909895478 0.88527806231811179 0.64827811064241869 -0.59787507752271163 -0.65404872648363077 0.67984836852100483 -0.3515526593529264 -1.8977827819094566 0.63876352470130271;-0.67457689050167158 0.68851090781159163 1.8126257481219903 -1.4090265855541211 0.88002083745060167 -2.4592066400723112 -3.5362125875636288 -0.31353568194596731 0.31599970658419402 2.1512161025084606 1.7849610636521682 -1.3197553788606553 1.8878810631123266 1.1849256358734721 0.85179259729207057;-1.0631136286788612 -0.74196617494507888 0.16553799493542443 -0.14730547463210367 0.86285737163853671 -0.74641876848330657 3.2690300808778963 -0.38522880120718633 0.54286954412595589 -0.3777998470017917 0.086161453898521201 0.09760451265359317 0.27228945642176489 -0.63708212408246645 -0.99778090144619691;-0.77627610185256635 -1.6274817765835232 0.37438942973794209 -0.62187068000148338 1.8340682103449795 0.99355510306068606 0.66461431516598113 0.65142251644329119 -0.07132297361605007 0.25455511460563496 -0.27320618904188348 -0.17820207055256504 0.14604276575664238 -3.7542358133113569 -1.5502542112508992];

% Layer 3
b3 = -0.19218594838538838;
LW3_2 = [-0.70159932855684581 0.30674457398588068 0.35522479822596997 -1.0828431164662859 -1.1957533182605178 -0.33096890526290496 0.10318691800802321 -0.22576461452115043 0.89601675890157817 -0.39846187440547509 0.95838098409494776 1.3241832778935676 0.71035443354561523 0.99571025434106986 -1.5532996600354743];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
