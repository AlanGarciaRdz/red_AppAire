function [Y,Xf,Af] = COTlaquepaque6(X,~,~)
%COTLAQUEPAQUE6 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:57:13.
% 
% [Y] = COTlaquepaque6(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;14.7058823529412;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.448430493273543];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.2562743795934932;0.94490486049986899;2.1771455990704198;-3.7715735062456424;9.8862173840525749;-1.3043663804491294;1.059573272030081;-0.69830016151664964;-1.0269650674169324;4.4129198445191493;-3.2038718830428889;-5.0538667465273273;-13.9592820035034];
IW1_1 = [0.28079254214197469 -3.6677562372209329 -0.84706055648516032 -0.091715004772500747 0.06946421552770321 1.3679697117879765 0.1700095144255809 -0.058757538135188948 -0.31751601370009574 -0.015971049387767541;-0.62943092080835084 -2.0686093415335476 0.28809848807330585 -0.26557661421262208 -1.7075844907192259 0.30930636724053556 0.81580307471177549 -0.044413093640325078 -0.25220901875990814 0.23698501570754216;-0.22099983321525915 2.282427432117029 -0.27075210679281264 -0.065170648298873576 0.092077530928569656 0.43037637524803385 -0.15491901462500113 -0.010683489383403355 0.070202724380781567 0.055437073471565346;3.595387516499192 1.2829205160269281 -3.739486932940149 -5.3806396424555052 -2.8208919168504023 6.6282637371887043 3.51852437126337 -0.04656085823261439 -1.8117304555954477 0.58008759785985431;-4.9384982019863761 0.58096833207148724 -4.9865136594657145 0.42129710271839704 3.3558028999723004 5.2862829456636753 1.8897928464062432 -1.814377134257394 0.088178581465899866 1.1222140203809718;-0.2130056340267652 2.8395177707435035 0.59532926411183029 0.1547908911979374 -0.060006781468521994 -0.9049969603243907 -0.17374138243782447 0.0050180209160216559 0.30898694001853827 -0.21430928134530433;0.57243075016011646 0.69094489804879622 -0.85511490448478755 -0.38634453919716311 0.2672950436390375 0.31407132449233821 1.3403907217312216 -0.11829108763843069 0.23433570077902166 0.23547141528918025;2.5314149482450099 -1.4552035501023448 -0.10425981755229495 0.81411706968658748 0.4395849817348727 -0.35176539563966042 -1.1835012400368146 -0.74935130855585019 -0.37525224612698727 0.88690610113083135;-1.1204043611704408 -0.80467164430955751 -0.65856141413047542 -0.51992524662310591 0.35920154509976049 1.2561989315367708 0.78846099964775762 -0.10349525637064097 0.16413609237278137 0.24754381533854874;0.59243536694035115 1.9351739498248957 0.26095441376480133 -1.0219729022636832 0.36924462082729131 1.7305824977608177 2.8656263708209186 0.21790387623035443 -0.31763973797341105 0.13525498894069701;-2.6813837236498648 -0.60251895890065565 -2.9232380557029813 -0.24494162040258968 -0.3235952283709565 2.3707961953975789 -0.20127566866399688 -0.56746898055032735 -0.031960796520227423 -0.16537459672733004;-0.004846647211267088 1.7102335988787853 -0.42463097542092515 -0.12883253909797981 -0.86648588328920217 -3.3773185985354428 1.2918584100159294 1.1694941496047606 -1.5982527712586858 0.29321173045561255;-0.15803769597190778 0.558006031785096 -0.1829839108103308 0.1188725171732966 -0.010919386948399159 -0.44109110579815458 -0.26052375416067403 -0.014742127768976798 -0.16451305033402427 -12.98112460635476];

% Layer 2
b2 = [-4.2304332365273218;-3.3066303325305864;-3.9144312799189236;-9.2079637847185563;-11.09863315334858;-2.9606689241809727;0.45068863202808823;-2.8597346502107732;4.1494547312821677;0.11260180317115071;10.075458864314973;2.9683057943515534;6.7736173708503289];
LW2_1 = [6.3971138804345387 -0.32830358425355471 -2.8242098949073249 -0.14114326679146511 0.17643192156349918 -0.58179446790914779 -0.44943239059939272 0.24039571962415029 0.99159806482696 0.1173771895537751 0.27638603832301883 0.60788843822243366 0.95836938657116555;5.7653892864902181 1.0247394809895323 -2.4093330152753598 -1.3040530501744974 -0.86352442946029939 5.8680581918045114 3.6408509791711796 -1.9616555626096075 -3.7820954381768415 -0.69015029267200279 -0.61032077993843592 0.60227484651086627 -0.38879121084181817;1.0440308331501158 -0.70931815366749518 -0.058312947434379585 -0.46457611320365749 -0.57501516792820728 0.72337182692423696 2.2523933414497317 -0.029634637568012972 -1.622681961158297 -0.75062707930880157 0.20759385713357381 0.012607881470392981 -1.0738598803137787;-1.2520348502123255 -1.9872189204756594 -4.3680754044440153 1.0357241086201747 8.8465615250314116 -2.3534442527505646 -0.45778310242105053 -0.97049348270246805 -3.7392862607165052 2.4723158539774732 2.4357847945930184 -0.82920418775147775 1.6910489867209602;0.74615733772815063 -2.7338993913902021 -1.1964435677122436 0.46869759220404089 -0.49288494259926235 0.90476448303157153 0.51082502583890954 0.63831047216286529 -4.9226963345691228 -1.0383548734118226 3.0539447999241833 0.061053036064030577 -6.6476352831673209;-2.763831976688254 0.46909928473579943 3.0981065040804974 -0.2871037938521499 -0.13805205835466375 -2.2538184005603163 0.83988613340634732 -0.34871808366879992 -0.69410790758074903 -0.45538972974288183 -0.75568573429851826 -1.0942694638311508 -0.20032019434550791;1.3017920773922576 -0.073032302111177338 2.5519095954579281 0.11282824753883471 0.082437966269225255 -0.66776185903526764 0.21880610556187186 0.20261298753004048 1.1180558218858259 -1.2407836395107565 -0.9166620717336853 0.0082501726682343759 0.60023668309693223;-0.90050844417415099 -0.67488192861668428 0.61182549809272979 -0.19234949326093945 -0.6664264330060683 -1.7066911213662321 1.4734545133631309 -0.32418811852861856 -0.6842017132843452 -1.1409379705950469 -0.097235298140609716 0.074726874874616669 -0.59465565280570387;2.9938541307813775 1.1038073138816795 -0.99353103136811149 -0.26493482356588199 -0.13129265603214268 2.9870361382770199 1.7878426098912652 -0.53123622092216538 0.70512573037858484 -0.3671307484231478 1.5202461384624475 0.070513985959368586 1.2263833495921133;-2.2449587710750487 0.84398258672759674 -1.3160336669628043 0.0088528928559261661 -0.59527361302371407 -3.0918567032853748 0.19567107356902336 0.9859037681325713 -0.88772483211776587 0.78294441913095225 0.27347226932737423 -0.38651344387674891 0.13731029741271553;-3.1133951944869871 0.11079412905507485 0.73234511704615146 -0.63295793883031537 0.71361506877910175 -2.9159648795810567 -0.61520696195505187 -0.79344502654209736 10.560892743512147 1.7377655070975682 1.6180427913255113 -0.32465357662990024 -0.23893689574013746;-3.4910523701373961 0.64424554669581902 3.3751220624808655 0.84922672868305304 -0.99350255219344552 -4.0024409825193574 1.1522567605630887 0.15826598627180832 -0.76347657694745596 -1.6076743019828379 0.48079611977574277 -0.13850917499275739 3.8316263068443535;2.7222333205322338 0.66003218782105666 0.42141353753144711 -0.29638731846149907 -0.12340011659771895 1.9791827162067195 0.72818635544379029 -0.86012844336507432 3.1092160538277684 0.96722264849270612 4.717610002857298 0.35115164590950104 0.43941151163846953];

% Layer 3
b3 = 5.2259422837610563;
LW3_2 = [-1.6975563910873648 -0.1344735141960916 -0.79629958686885405 -0.23244095638391707 6.0626053137778726 -1.347836365448337 -0.46677222642833671 1.6480568065166779 0.77359336864770578 0.45392048329470641 0.59672720265504575 -0.2316836394426173 -0.67282464474366732];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
