function [Y,Xf,Af] = SOXAtemajac10(X,~,~)
%SOXATEMAJAC10 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:23.
% 
% [Y] = SOXAtemajac10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;16;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.015696165153104347;1.5609851481753563;-0.34839782105997591;-1.5103601425554412;-0.91077409782543517;0.53071997896257939;-1.5177181995459037;-0.74723996128336445;-1.5312003258330404;0.68060182957813975;-1.6164725607137616;2.5215657794699715;1.0989815918825208];
IW1_1 = [1.2527141078115132 -0.82636403694176686 0.035046512941298673 0.56342489238703297 -0.51624679525157391 -0.36631450844091873 -0.14770250484011707 -0.056858049024937428 -0.9070729788616998 -0.70339125653581247 0.1703148608368707 1.4074332764838433;-0.35690734727967066 -0.37330756465892939 0.28552106574167613 -0.27917686664219232 0.31801306503086973 0.3585760921972535 -0.086996440453059681 0.70155474021734765 -0.34197996575215328 0.90156045268892615 -0.38986152656880219 0.44606746905449751;0.43899736664412969 2.2404096765260109 0.094666023649053105 -0.39860543848423197 0.0053905070066183891 0.10377136059681735 -0.34558926981564581 0.40142373399633596 -0.039835894538879757 -0.52057099336590051 -0.7171960837291329 0.84542763771865281;0.61989699492185479 -0.22042492182138135 -0.63356438131193316 0.36030046221755851 -0.30577855204987153 0.67927365150834329 -0.98554942328629636 -0.23734717861636301 -1.8421133810182262 0.1929065143524191 -2.0753372497289329 0.47682162921583215;0.016501330697979596 0.83782262659352802 -0.0071715478225020269 0.23028995503899385 -0.52084423592650864 -0.04931254287543714 -0.78109597012396048 -0.56422498887177441 -0.91925858876035893 -0.51413983904113303 0.159599228632235 0.029106536596483268;-0.037171977443855433 -2.6932874451544575 0.56750385816222115 -0.04195602701830986 -0.69749661965462506 0.28466667241891808 -0.56992069939305356 -0.62983186496305232 -0.70405001702048708 -0.25820931760786825 -0.79522758125057214 -0.14160855520392326;-0.24230976614261485 1.6517396018401505 -1.8613042653836553 0.24485347109062208 0.34145117399557329 -0.10041175333809294 -0.22355328331500318 1.2497733981987587 0.26574661689465484 -0.49418907075380741 0.71224755253425509 -1.541129697363574;0.19653088187877513 0.0013877202233580806 -0.33732412601397593 -1.169832292411136 0.39325568814574119 -0.045183810159757462 -0.43064779934956693 1.0471130456923445 -0.1788127004409934 0.24858147020212021 0.07665400345167922 0.17454314239672022;0.23299194992390113 0.00011239636589645269 1.5933825322631412 -0.65964163673592291 1.3567408310387414 0.19769224924540327 0.87217099252576247 -3.2782241295861985 -0.8700154282816559 -0.18464345697156759 0.60618176990159656 -1.080841058968248;0.57452989402191135 -0.033565904299302278 0.011189700403784107 -1.614282246703364 0.64331057139111358 -0.028259291951088159 0.76287110311106754 1.0586917006167411 0.17275122339298718 0.16450819372188114 0.2445135377889342 0.1916456727471853;-0.33071604524309295 -0.20625406164112484 -0.79969169918605598 -0.25547815010894998 0.37465434721426627 0.11120215295407783 -1.5656543058304973 0.90053163315025231 -0.29179013313477026 0.37032109958538562 -0.034065229145790646 0.29212879093507332;0.65457398608507056 1.973498668388636 -0.17590692697803145 0.21396754501399196 -0.061803809588833226 -0.0071495563944542276 0.27099948476565094 0.054513888793718865 -0.71014655472474331 -0.25473294124281287 0.33788701662157722 -0.52963168556391549;0.31051064237532416 -0.1702211632388039 0.86977361923473551 -1.4661140999254361 1.4425530569955347 0.60783535970837166 0.82551015351264911 -0.033603998371704739 -1.6937652892931263 0.077839466669868712 0.31525592038221573 -0.73518421766572772];

% Layer 2
b2 = [1.6374997642799387;1.7419093207569603;-1.2338547241705042;-1.2567295085067236;0.71007981171815648;-0.012590643650615454;-0.075188010127111266;-1.6914206638340046;-1.2605136075773506;-1.4390891368311467;0.49726696633776513;-1.6800748425105225;-2.0583851167769707];
LW2_1 = [-0.1519490155826643 -0.18611599371429022 -0.16542578123725019 0.71508155459652323 0.56724140874257079 0.45881440222386538 -0.11862524498083198 -0.11342616381584861 -0.36252240490369514 -0.19028194496568368 -1.039086484455336 0.73852613260653499 0.49741871049671771;-0.010388287563049325 -1.1776493642001016 0.33510493223926052 -0.26069416026077119 -1.4079986864787311 -0.14479168138594528 -0.89152108909485117 0.27078704376219492 0.30699952365650857 -1.0763618581239449 0.28668449261474588 1.0040888990610775 -0.26734422138016894;-0.48206442010138856 0.23635314420654821 -0.95695440729344083 0.7008590306129342 1.9130213562160456 -0.15376013185548076 -0.34786039555942455 -0.52716632940971264 -0.77017814224302195 1.1537645327610695 0.25855506827029767 -0.7639085633964342 0.084145248110720841;-0.65008119701045486 0.74366744037538046 0.049626313096079414 -0.52885955125295347 0.57989285474732521 0.47677406737458988 0.58386380678953365 2.5574822458772082 0.18929055074989459 -1.5996792854304074 -1.2379881987218682 -1.3775385523107622 0.14004770963830437;-0.37957976007317651 -1.3541653299405159 0.81871716432138619 -0.82384344740663795 -0.9689674588504622 -0.29269319259569082 -1.0775735156387662 0.36804757604988314 1.4640960118053696 -0.62053355595919701 -1.3143312332283958 1.7560808411279181 0.86387263599261988;0.76075733206189211 -1.8347844897264785 0.1864549870487045 0.14803759151339863 -1.7428956345735636 -0.76169228511983789 -0.98549434684005255 -0.91186411078287799 -0.86098702723036324 0.071581765471193909 0.39023095197763547 1.8731954721246136 0.6976377600506074;-0.77787843793118161 0.23298990015805937 1.0485827184112373 1.009928050630126 2.4650095713612168 0.96548552101349894 0.42913959992235096 1.1249898439888484 0.49189275467252014 -0.1619032101969011 -0.16430430001453852 1.0381599620154585 0.73464708433650883;1.6671731770599756 2.0405939313079542 1.2032712016803173 -0.30102761177166226 0.99453572744010499 -1.9374941280335924 0.23692552433921737 0.99832855147895261 -0.27357945765077318 -0.90443656756890412 -1.378877150770754 -1.6317032962114244 0.54835073048133109;-0.30921889100825567 0.78779250124698885 -0.87148468823617375 0.73325729301968401 1.6779326907915928 -0.14072371304129525 0.58500130421625574 -0.36822990819519308 -0.42750501190075246 1.1198354573741636 -0.62128530977848762 -1.3226555723906019 -0.056343623811472288;1.0769415713973829 1.0892595442798914 -0.77636651921111577 -0.76247795156396825 0.36583749261439691 0.9694389773660228 1.5910955280614045 -0.077647140846874269 -1.424182136407993 -0.074738065927322475 -0.36482689320436335 -0.82225242259362663 1.2463207689328151;-0.0041134378512788297 -0.01324712952739205 -1.2625375968254253 -1.3079794203011648 -0.18300891748253303 -0.71714035578225599 -0.041602754110197454 -0.3992169603515115 -2.3225622653024165 -1.3000012095318982 0.95410169825013869 0.96506613624167625 1.8732369701876479;-0.6520767196210917 -0.992298889498192 -0.28140837718805384 -0.024148204876156265 0.67322501255224554 0.23462159191183213 1.3506419925604563 -0.42593041241704233 -0.85137752504701436 -0.93933119356715666 -0.21295343862885505 -0.73780246687340312 0.72471681259976228;0.33763983749068188 -1.3061745964764764 0.74552225562027696 2.7035488538525159 -0.23252770245287385 2.2148951970988859 0.79298385398610349 1.4899389146946707 -0.56658227692465424 2.1190671000408132 0.85219172066036419 0.59056476433778848 -0.086954717257595127];

% Layer 3
b3 = 0.25592970071848242;
LW3_2 = [0.15105493428605477 2.264533452423783 -0.85913739513826293 2.4611853426636419 -0.31964929035189027 0.68032468132566015 0.2063043213734507 0.44974812334042341 1.7935997943571069 0.15121458387769179 0.33208916102206359 -0.18925201188632185 0.14870546241469187];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 166.666666666667;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
