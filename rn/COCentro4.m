function [Y,Xf,Af] = COCentro4(X,~,~)
%COCENTRO4 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:29.
% 
% [Y] = COCentro4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.6583063470810648;2.3962802984915443;-0.16818686098973512;2.0771403667987203;0.80425073500323385;-1.2499009820438252;-0.5049295081547448;0.27334527676350528;2.2847667896145154;0.35011578591610493;2.6706119335214629;-2.1157315126479657;-6.3993460575106189;2.7386091332008093];
IW1_1 = [0.92926229760110246 0.37821976314472461 0.21119324076920293 0.4233433392331542 -0.23987074144707388 1.5399657238300273 -0.77994149671129387 0.48157758706089865 -0.85827297026259974 -1.0396563997548995;-1.4468395222767132 0.24415065036811101 0.26907032912449697 1.2903352231787681 -0.6882702473944764 -0.263542436308703 -0.30537023366747573 0.12944726167806528 -0.23926540716262509 0.50724212755722098;-0.022927078595590691 -0.093720755067250958 0.5483346871588396 0.4090959505686026 0.035463907953106354 0.47108023117462478 1.4531000694901004 0.26602935988986359 -1.4547720310866221 -0.12476899927689998;0.069234779921697312 4.1764966284018339 -0.15060512945665561 -0.055429373005260199 0.044893150890883929 -0.14221600480603533 -0.089005409280995137 0.12912940545777724 -0.27137338220821977 -0.33755419604703979;-0.65534062623687017 2.3967105431176829 -0.42294342956925163 -0.42396590068047962 -1.2308506829573418 0.62479880236884977 -0.39106907268009061 1.1769610833489641 0.24110715938411545 0.15691340647905375;-0.56102341892064977 0.79529715440882165 -0.66782534866152221 0.28739398822509493 -0.47379597512922766 0.019045219119130572 -0.3464374944615603 0.70003565550557389 -0.48046622474236433 -0.97096959313851794;0.8021563873075207 0.832763989600663 0.19137378136060171 -0.3416580210724568 -0.024975860430423172 -0.14377667970167124 -0.4614674841642204 -0.29281645831903158 0.35882636876890683 0.21656441854754088;0.22604321743588485 -3.0154658013262621 -0.94365470703385146 -0.29350339365166783 0.27503287646987062 0.0083123931929917419 0.034225781744963726 -0.32261383594641585 0.13132382074425517 -0.026089182206648513;-0.36988590123442899 0.048322444091692979 -1.0637736756233735 -1.0565624124816759 1.2525596557704906 1.2659449734456691 -0.057503048702600687 -0.11777219753445109 1.3494655364180672 0.44192314508959396;0.63220520767137001 1.4720718674118853 0.061927337577710108 -0.12766348066604524 -0.26012360072757379 0.2126988917672086 -0.080776202935478339 0.32615945879046021 0.28411898128173435 0.11957103149504229;2.6075228149391143 0.82630820119539994 -1.560197172121895 -0.83981801878132312 -0.10923784325051317 0.30082526268469062 0.039469682980077331 -0.35521082600994669 0.64742888531605214 1.509005954691431;-1.7180630553382774 -1.1728367770821255 0.667410001421329 0.42601507618795309 0.045826848083674973 -0.44386155209177891 0.054091930477936742 -0.45109671491064945 -0.74090434222770596 -0.31011869369293099;0.48261808718478122 -0.36445597726040108 0.27661015107320658 0.27996357354513196 -0.59733491078515255 -0.06302116843923701 0.013171095802148588 -0.081615678510196993 -5.7220041255767242 0.17824014168226321;1.0461714674401985 -0.68007464764903525 -0.55561337223074914 0.018369662540174966 -0.20132859571787148 -0.032177926011587851 0.40844947198544385 -0.65379244759162825 0.38999521122532438 0.25492438490183067];

% Layer 2
b2 = [-1.9848288659438729;-0.29456777545462204;-1.321420036243609;1.9022715691999015;-1.0771990739501602;-0.38506118036689774;0.66486592748506768;-1.0959328295118844;0.19354604747793849;0.24174966736978376;0.19210088385162655;0.92496402666095323;0.30782190861441078;-1.8193450508282889];
LW2_1 = [0.47266978077123178 -0.37354919925971825 -0.59883656600017499 0.28684223155672856 0.9296356167450659 -0.49711250068006796 -0.93656899173755215 -0.32208980176800978 0.49131041784068852 1.0601653068967654 0.03358775017636946 1.2261319518270983 0.42828555815754876 0.39274986649945381;0.39067666848484811 -0.64560838447330626 0.022554868298911408 -1.1412123224800284 -0.0086716028360733118 0.4370292578899716 0.57678986194875526 -0.20555871476515825 0.038352612902559993 -1.1175519859362559 0.31027239523175781 0.68128879128722697 0.15176136258574327 0.64313616592678491;-0.017481329431894368 0.21237422452600418 0.30900180573291486 1.3826409451812325 -0.092406892295670978 0.46397316018739565 0.17582993365258176 -0.28838659841411918 0.62466970482543194 0.14368925328550419 0.81665154360249903 1.3811340950222908 0.60333009802628401 0.87659397762453795;-0.74536799697415879 0.71302963895939453 0.27622774645416392 0.39568865666763514 -0.021955128704184854 0.30064715855293528 0.62788617632728527 -1.401825510453838 -0.20873536974316886 1.3029261077623917 -0.011686295640469474 0.016419135541930412 0.19991523070717507 0.77150600753432874;0.25123121867771409 0.66145525645571757 -0.40100072456356406 -0.26543564603416159 0.67494319031580041 0.34951063358089918 -0.53848520361319785 -0.039367596796846191 0.12625437314969667 -0.83690127906340706 -1.043370830958396 0.39751044433040111 -0.074607145033521144 0.39589764353173473;0.22648540217457247 -0.14215921252923563 0.21332134821844917 0.68781993589758783 -0.62435219116299367 0.34686631985429994 -0.20233315428293797 -0.82764054989808788 0.73767900711264411 -0.77930914316094757 0.59713195889983217 0.5299806492933703 -0.1688158451278288 0.42192633405983998;-0.64941535089265123 -0.49875476381264611 -0.13943888150552958 1.6767010267862363 -0.34903687951687878 -0.10073216019941812 0.46429291665038658 -0.70501943126595812 0.92461698179733065 -0.20265734029637705 0.1008033256862686 0.0070429710538959245 0.3011921849663044 0.76169513130402977;0.074070622759906904 0.093808596803411665 -0.027677523133018363 0.20413258109968707 0.037572750711544062 0.24735392003810613 0.27128795361275659 0.44141852297932893 -0.37302428212780242 1.0363681090298775 0.3868119137583923 -0.187657675045588 -0.87092562479998226 -0.76861167324838275;0.26062952098840614 0.11643648875150985 -0.095883969645671419 0.98577189141495902 0.048489700549714992 -0.50771096647431047 -0.58405446135784644 0.48640710183275088 -0.18778357620235692 0.02037891738464865 -0.83894998603547311 -1.5748027809343659 0.38814221273970057 0.060711655201069741;0.96954402050172628 0.63265481447774896 -0.57046945714658481 -0.80854492967863989 1.0502387912429663 0.7093380323440851 0.3311450038402754 0.46310575744825971 -0.032302108924018205 -0.45915130908122642 -0.38268247318567106 -0.80567363119725921 -0.71101104923372493 -0.7689895661874111;0.50492784374271793 0.21445284161415981 -0.16076824648340332 -0.27296592261063674 0.33386035262191438 -0.1363913952065284 -1.1519555935101724 1.5212654004440063 -0.50328986407694509 1.1553965302683611 -0.67542391695043447 0.73014644888494029 -1.1331908748759674 -0.7004416021665808;-0.0086082821903978295 -0.074792207481767334 -0.28197163881827303 -0.16412725411242493 0.61352840187992819 0.09130053521140416 -0.32988524613379239 -0.71113199674065564 0.24449114952029194 -0.69679234494871434 0.0085138842321834801 0.43390834160073294 0.31121908859273339 -0.90382699180283188;0.25519765800577404 -0.11475763254645283 -0.43248232002209724 -2.2329127694685611 -0.027732987370403743 -0.34210124304567824 -1.0520498976216817 0.50148150002927927 -0.77856136280778732 1.1223668681581678 -0.47924536663786588 -0.9289407445123673 -2.7540879015769657 -1.0452915112080254;-0.18687420055391318 0.77866236583848614 -0.37328082029266008 -1.1613427227634292 0.38846101839153768 -0.86065593531658346 -0.45594375034647983 0.06750062944214151 -0.67921479621550729 0.49438575023983533 -0.69620433688682071 -0.90302353729848728 -0.73434172932280251 -0.39576110584958002];

% Layer 3
b3 = 0.54862394436437978;
LW3_2 = [1.5128987857161891 -2.3159130141641278 1.3595024293915365 -1.535022234381155 0.60181767267425934 -0.92749644671996734 -0.55317545124406542 -1.4493875958475042 -1.4261141414611975 0.23345960684721712 -0.77429294431667106 -1.3707363021322942 1.0934495896617253 -0.71880423938050542];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
