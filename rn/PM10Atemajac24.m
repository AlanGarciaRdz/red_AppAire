function [Y,Xf,Af] = PM10Atemajac24(X,~,~)
%PM10ATEMAJAC24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:00.
% 
% [Y] = PM10Atemajac24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00968992248062015;166.666666666667;0.0561797752808989;0.00614628149969269];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.7846547804299111;1.1239079855418979;-5.0565157793976443;-1.4252418365074884;-1.4041609899472913;1.3023796525326121;0.78687341895035279;-0.55283386095813947;0.42979799774516364;0.67194393463444502;0.21630538585721443;1.5861451660245953;-2.7075088420739437;-2.8471047295130747;3.523192395567833];
IW1_1 = [-0.22013599209853033 -0.58119903691339692 1.0527000608873216 1.9972350259555052 -0.097151760680056806 -0.18004772598125487;-0.12247632691141172 -1.4202779673547832 -1.6954324218780119 -0.18542840572006933 1.2112615391590353 -0.79093285298375571;0.10194183305742356 0.24240418783318374 -3.996052906731927 -0.15562423647751938 -0.20554861616887612 0.077164508181786592;0.66782786515894199 0.31076354848921789 -1.9312783639407689 1.5692428264697018 -0.20912619464350526 1.4077662375663771;1.263692135684116 -0.70725183276344594 1.0488490106151018 -0.93752249807420196 -0.61206527290375856 0.2954686028417241;-2.5131387388201967 -0.45894995509973013 -1.2503897367939654 -0.50150222478515527 -1.5347775542583013 0.36938265752511895;0.024338891355535658 -0.87411057704515738 0.81429088899834801 0.24208374978030323 -2.2639669844781873 1.6482038109147263;2.067460044396408 0.53286374361335598 0.2300612042816802 -0.28972962243584277 1.6102763067195376 0.263250009340327;0.19043406562957899 2.9159099882441062 -1.1972674558710059 0.20454769223353822 -1.8181171039209558 0.25509205631805465;-0.63452360382207418 2.0565197347415323 2.0509742874833412 -0.67078315184242454 -1.2285077278704988 -0.24170595366501271;0.88726744633020205 0.83120203694929795 0.44142309794870327 -0.034369606612084165 0.51042161853494294 -0.17488188673095148;1.3239678209253043 1.638896857310141 -1.5856258411624413 0.35153093154659115 -2.208341939858959 0.086695000251377496;-3.3749563025024454 0.28784502961844072 1.7187719590481232 -0.10006849974429223 -1.2720391720439681 -0.022703777747008613;-2.0232198374827037 1.4149591609321412 0.41641305939455275 -1.3945337434440215 0.4807276387535323 1.0097385397180856;2.0567661125981109 0.89217324602383219 -0.5155766622161454 -0.35007820522559185 1.64831346017369 -0.96290869824944925];

% Layer 2
b2 = [-1.6212995213064958;-2.1784853300023972;-1.5731649165982533;0.72097614010784716;0.45920979010553253;-0.34022109395489375;0.59481126332895862;-0.53362115153192147;0.11073066862345915;0.8797465884722615;-0.86619601401599378;1.5641618969662872;-1.4470203552225247;1.242316849520505;1.3050192251731765];
LW2_1 = [0.39857086944693437 -0.51664554475841706 -0.18000103089918795 0.043616215243055631 -0.17163334909225475 1.3695002357225505 0.18717155238349784 -0.30075407436099622 0.015774478099938889 -0.22659776586080868 -0.3503569747162944 0.23362175702479507 -0.53798505932577434 -0.37684006619209848 -0.46546700511274275;1.2158092310784592 0.77399724704653505 0.20783739702852053 0.036792583111395084 -1.5574093948850993 -0.9777028330049925 0.49327108154133215 1.6255580660737996 0.115293550360903 1.4147775486602978 -0.042398504225664012 -0.031675587980518546 0.84648121177867797 0.29118678489669253 -0.55867848368219664;-0.10948868740558615 0.24210647099847432 -0.33984846032024313 -0.10860466118925208 0.22441558943817871 0.5172303118011391 0.03824001778627166 -0.061021025425316872 0.2256353563052565 -0.13017568573542906 -0.64110212051235338 0.28774589065850115 0.40058087796461128 0.10503920170703167 0.057521346489531604;-0.137506383215212 0.73414916050078616 0.23883020162015625 0.41498959378526196 0.2208152242111894 0.053376998119770265 -1.0346479422485972 0.91147845880160172 0.36985218779071971 -0.88641798512075332 0.070404788307400323 -1.6318596336876239 0.70010614290354167 -0.074220510926937641 1.2341511412647275;-0.02150093547196303 0.9132295687025731 0.07600504085649816 -0.48630470431955775 -0.1637462972275317 0.62328354028282162 0.74135175759983796 0.38693759973198577 -0.96205646835896019 0.36721226105060456 -0.24206905569171841 0.042533257619862971 -0.84085726601162369 0.11221063935681531 -0.81603370737804015;-0.0033460071643394238 0.50240255116800581 1.1977178475393253 -1.2661484180985325 0.68559866659322277 -0.79917130132547298 1.0019360024831001 -0.52058474223454487 0.78940419408907025 0.68327178598219396 -0.34567706547386684 0.11724605035260699 1.8107436412158076 -1.1291757722137374 -0.62036444928028234;-0.59032004984704367 0.31790044170836673 1.2770582259769545 -0.13192104970218846 0.2277733503739319 0.44202136594052122 -0.43644148672053457 -0.05567818158696998 -0.25249522597014884 -0.67072016658347278 0.44910376838427624 -1.1165398371016839 -1.2044348316817037 0.54955796576199256 -1.233896723558906;0.77905780240455136 -0.30345057622729205 1.034111021819677 0.32363265409737507 -0.88707587008816158 -0.0034298792134608057 0.31183550244970348 -0.94894855604841799 -0.099720133752514151 0.038274382721053823 2.1082204487885363 0.13953950694039752 -1.8874087874550605 -0.90038387902280104 0.034530608661500185;0.49594269005988828 -0.41642699351841778 0.47300975297269515 -0.11533912639090103 -0.28135389072045697 -0.37281123001965549 0.33907608239806741 -0.035193322350442591 -1.1402300121111795 -1.5273072627270889 -0.01592392257196177 -1.5877149663093633 -0.00030941520219330762 -0.55724807753568362 -0.017671123629060488;0.88582513783431327 1.2088550063115622 -1.862490553059962 0.69458187736271637 -0.48885763508197944 0.20802093167637892 -0.044694984008650102 0.48164834087784464 -0.37012751135724131 -0.63837324363967174 -0.095069647375110575 -0.30739614702425216 1.5690355299799099 0.22031023209480555 -0.16418656946166885;-0.99494019279523072 0.080448832419912103 0.071766977094601836 -0.33383649444331798 0.27280215672525415 0.37666900267235931 0.36652002839391634 -0.26294169361183817 0.09490365410057626 0.66262315504192015 0.98148488006527712 1.0283726809313067 1.2611107942818389 -0.20733300851005182 -0.058893327705173013;0.11008061566478664 -0.77098148633619634 1.1498725435103492 -0.64693083099013604 1.0108256255568191 0.21885172120511387 -0.063953612369986881 -0.70936789033431935 0.92996256755128071 0.30185070266933162 0.69644031015643826 0.73103819671835435 0.29800030935316141 0.095524958273000893 -1.0866956286956779;0.23975055280617311 -0.25373715949581344 1.2307553135884577 0.1459346561970665 -1.1667780203367593 0.50367500397047638 0.32694649921594554 0.41623069331805029 -0.4537075026281146 -0.12848856603728961 -0.74421206339957691 0.90459669697116507 0.48410267391718115 -0.43145634490703338 0.4182688599591568;0.71328355139932964 -0.1762766440906737 0.27107386508723508 -0.22256621262717396 -1.1077935794485907 -0.8775530014502142 -0.60186983085505075 0.2794220718072859 -0.031220981222658664 -0.78940931901440925 0.3116095738606689 -0.78906592935345143 -0.85789511111860772 -0.48724653057206202 0.051595434189900584;0.44436987066845712 0.25670551223957394 -0.4799488092499441 -0.28026420437993871 1.0430440465169439 0.76473213832356191 1.2009650570710568 0.25912373050701876 0.67193001706442335 -0.21524187404181516 -0.67063190425656272 0.7326840702441102 0.84754213914261411 0.75191935236716201 -0.67501704427773024];

% Layer 3
b3 = -0.21899447158947447;
LW3_2 = [0.66126667693873054 1.6451174432427669 -1.5989167697825437 -0.31110681929456002 0.43597284027146149 0.49879421698250492 -0.48457729778367442 -0.43214743180034776 -0.2304390602667464 0.70099260486763548 -0.41826636575525095 0.63861730348912549 -0.53019969247806142 0.21978471884353512 -0.11342365680335957];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00968992248062015;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
