function [Y,Xf,Af] = O3laspintas19(X,~,~)
%O3LASPINTAS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:48.
% 
% [Y] = O3laspintas19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.241545893719807;4.5045045045045;0.00280033604032484;95.2380952380952;0.212765957446809;14.7058823529412];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.8510627383440341;1.6484090821175286;-1.6259054965959756;-0.28712635163619626;-0.96644901353114843;0.77019150007822834;-0.047022028095230074;0.5497581175345515;0.16468219070375317;-1.0388746725066915;0.29131119292778723;1.4569478034582068;-2.5157458211290802;-1.875526661399775];
  IW1_1 = [0.17605866302000842 1.1883188137581611 -0.22968883691734865 0.84158958001356321 0.43130643820842496 0.96526573041810271 1.0053660587837079 -0.83289675941035468;-0.4546620027921075 0.18991998513315042 -0.91955135376176222 -0.75732087459122421 0.20025762934003266 -0.010269256439328273 -0.7219143224883795 0.86614767513405866;0.74676054180071538 -1.4925328127756186 0.09874118594812438 1.1699351648641934 0.19627415417357708 -0.15360948485615958 0.74273857158410894 0.23810054345044038;0.45294417224536254 -1.9570671752279627 -1.2458446802007144 0.25171552814820436 1.6266926011023768 0.18669893101169829 0.375637535462023 -0.65406472170418251;0.011779373194662289 0.24303396414094999 -1.955762058611797 -0.52359250749807118 -0.78004328353544694 0.41734825950785681 0.021656036231049093 1.557477985580751;-0.97210799771424072 -1.0729074729074586 0.43493921189533691 0.13928895345895351 -0.29564062220957754 -0.29310010945090714 -0.059447562836259508 -0.89059916002993333;1.4290238837912015 -0.10403598871158085 0.67664933935825089 -0.19546687644531308 -0.079619299797213175 0.16238403330866541 0.075780700882072338 0.57835652610089094;-1.2830229353522826 -0.28883857741507057 0.34543523726384395 0.16801700236107223 0.21753627005172066 -0.01208808468627812 -0.081275512632375799 0.20706881508183095;1.0788771140460369 0.78054490208395078 -0.68078728212882733 1.9630437959942897 0.99790364758064176 -0.67773304730934458 -0.43269275549999953 0.61408486744685276;-0.58084596881207451 -0.90734089394529649 0.68405775757046117 0.4847928852660438 -0.085121477102216223 0.79040071134210699 0.8898375257626453 -0.32737915396448153;1.3737274506978163 2.3438892885918019 0.43467364873464071 0.073928454233609789 0.86205230106224795 0.057582220934646502 0.10418330732524582 -0.88033405203392501;2.0175513140045718 0.47325247674963039 0.81627212621325806 -0.076990772096713234 -0.5362444179425645 -0.047690595022681484 -0.022054754416524519 -0.91408295844256615;0.75676269860674894 -0.077153876856038264 0.38923538443563477 -0.1959815421648318 -0.66105378910777179 -0.10241951627671324 -0.11311202416938966 -1.7728676876721556;-0.63114989813275502 0.38617036357028006 1.3060968289098154 0.34055611966158589 -0.42068244667397836 1.1909312522176605 0.42117048702644555 0.30640750538849443];
  
  % Layer 2
  b2 = [1.4841058423214353;1.5286823446878148;-1.1518415842119385;1.0419536522194195;0.68967139316781545;-0.22481641340340763;-0.33640141696931164;0.40329188828991341;-0.45854002506796415;-0.15421709082779572;1.2339448888552245;-1.3060407150415221;-1.6285333720865369;1.7549520633240487];
  LW2_1 = [0.16326775125412818 -0.39013354726955457 0.613620275466497 -0.19892628249991837 0.2402053268189282 -0.48466602669630809 0.029355600832207198 -0.24636380022604681 -0.66675289782184022 0.48343145015024896 0.45542218664711587 -0.57683116463061357 -0.17812292518421852 0.85987536661082153;-0.15535515682118364 -0.25437515393984766 0.4165279274939821 -0.65797023681784639 -0.8042319246615024 -0.0018650205412365194 -0.95998571254853815 -0.34109611117105998 0.56176260754518492 -0.21366942536272812 -0.38476783608777892 -0.37530353861372129 0.61398072701736983 0.70097565091578717;0.33491843754327749 -0.48333138871945713 -0.57549387873181346 -0.60644753843650978 -0.55414208203867565 0.40253931804370319 -0.34418582902958034 -1.2047726243872749 -0.10005562474085174 0.59010061117474344 0.092586262681006046 -0.19934754474942992 -0.75033015075214315 -0.62164821228047562;-0.24740450160232422 -0.13724663401900203 -0.20207965238196954 0.99372134575858895 -0.81056503992883255 0.2345282090204619 -0.89054855704138192 0.033499406998266978 0.25578665724276067 -0.14494002864633951 -0.534706772056465 0.52548548820725416 0.35464060762938415 -0.66570663760245152;-0.40613577921375149 0.026415904817973686 0.14870806303316128 0.85886727383313499 -0.23199537899038672 0.58286316502618996 0.83140816188703692 -1.6471327273915799 0.20257759011712623 -1.0979393758372897 -0.074845720719676295 -0.14129733423414265 -0.51074190875179504 0.10572307785891029;-0.052676739572108396 0.35262970955099132 0.56414507546690495 -0.099515099023359102 0.28566969597375774 -0.014834258665079997 0.25275073404803922 0.33434917461288094 0.65349225466153071 -0.28347530274213328 -1.0944288466565493 0.041328731277836636 0.45099269464781588 0.085806487778236906;0.44405632644089837 -0.9926949792266635 0.8831710908713698 0.83527517059196332 0.27272227957782824 0.70373435885479674 1.0850338107144646 -0.46805870827720963 -1.1889221010400925 -0.43086474193565133 0.19015575679315638 -0.81580688906529597 -0.77482120095570517 0.53910250139635785;-0.067099161945854011 0.45824599088409279 -0.47005412430310994 0.91926049151120448 0.14230836754883988 -0.52286211963462503 0.38083228849134321 -0.5877348515026326 0.19436745268305225 -0.28623312989485961 0.17413000881743826 -0.33555267340730827 0.81662062584346196 -0.86911307144306837;-0.77035015375260496 -0.16450791528748659 -0.46367160670837793 -0.60794431500729784 0.17502418577009471 0.58805846889034763 0.72710342082230106 0.24556608181194264 -0.49694192503392193 -0.07923565148330762 0.40011643350711334 -0.65246634890074084 -0.31416953894701827 -0.48761724861782157;-0.96273845957853488 0.28168632226354096 -0.88744672726925666 0.72512039949447704 0.45324174643527632 0.73803574787893478 0.12969207945573455 -0.77408672228209863 0.47168566168528292 0.31445647830959472 0.58609288934293202 0.78172344087004786 1.394796602493924 -1.1967021600222594;0.59568425250104473 0.9841205144529005 0.19135245568467468 -0.070390606896174379 0.29215294205201275 -0.7831522021122389 -0.95743527022529074 2.5203299677259396 -0.56680342767917791 -0.23475172147686324 0.057036016174726971 0.65297803768025153 1.1829624958814182 0.19188857285311772;-0.20423645250749908 0.38713501505322961 -0.21237995728544878 0.70693898167076896 0.015168486926498609 -0.66050689630171489 1.0032937135819404 -0.63241991808123832 0.58414656476277849 0.49267706283435597 0.41581951695413311 -0.59245634917767487 1.7806278437518008 -0.089534785402099679;0.1722203714001091 0.14590710944444846 0.48519140595768134 0.13315084882095038 -0.49066502097105469 -0.60267306601733339 0.15003698440866597 0.61043096066471225 -0.32188822268572381 -0.29496794980340285 -1.2959413697305766 -1.3804536318455389 -0.80918823709833676 -0.029507236818590681;0.63284104025808097 0.2847211415432529 0.56916769730559802 -0.46290681852301319 -0.12478256074307569 0.27886406884771509 -0.02607943816308083 0.38342694065284794 -0.31299355599754014 -0.22668592349233138 1.2188884256707078 0.67407351044911878 0.21025425892810357 0.083003827372112995];
  
  % Layer 3
  b3 = -0.79637562530286754;
  LW3_2 = [0.80105179136357085 0.46717944926788157 -0.78928124358655005 0.30856248154950117 1.0439900030466875 -0.59625306861991711 -0.77424220708698532 -0.69652050881136673 0.40222592628737636 -1.440367473328019 -0.90775222749206941 -0.57073810281746185 -0.81236473755566097 -1.2939022789700503];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.7058823529412;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
