function [Y,Xf,Af] = SOXOblatos1(X,~,~)
%SOXOBLATOS1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:39.
% 
% [Y] = SOXOblatos1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.0529552121847328;-0.78999647216600977;-1.0874901720497649;-0.84314315232611181;1.0162467928634005;0.73196401218416496;-0.15854760650348654;-0.43859246339552205;1.3643157761811961;1.0224884335808584;-1.4962761364265484;1.2822344356764313;-1.8354604053725343];
IW1_1 = [-1.4148300160753371 2.2450860231351286 1.8307362539560905 1.8438825341075618 -1.0939951889342094 0.74148292913525438 -1.0444987170791529 0.21965711177568531 -1.317091421961045 -4.6738244960893196 2.2491812769468704;1.5062166943189526 -0.17171186847793357 0.29393322046187315 -1.7887745813769875 0.31827181291467099 -0.38917810595471752 1.0038723767393387 -0.28472081873696387 0.79731983126875472 0.20349617349746801 0.43156666513942121;1.2644158259304412 -1.4948848692296752 -0.52599284069876884 0.079492131277685257 -0.47228994235181221 1.564625102717871 -0.42454961069065938 -3.5483378648322965 0.34031559576572501 2.2439469817166802 -0.16578363278704;0.49563409309457901 0.29435632787088312 2.8152758627447629 0.19471055551440614 -2.6942911236565421 1.0031728902079506 -0.14006663000768282 1.149645045897191 0.0100539237883552 0.035332172522263491 0.068658277992398015;-0.83846211425746775 -0.15694543706526665 -0.18625119790090008 -1.2189126658323424 0.29894875432238743 -0.85483500609350416 -1.4335315746552235 -1.5191377912009159 -0.55867250679559799 -0.2224727987216758 0.20666039528267111;-1.219768352525967 -0.53345212135528763 0.11694846875496155 0.31178982461556942 -0.31120561377723505 0.38441651780481856 -0.16122214920021385 0.19953216645738725 -0.37119119018750335 0.69223847629373492 0.60184794377742179;-2.4967636464699456 1.0163631735528076 -2.4115544756336442 -1.7071337546292946 0.030968024608562107 -2.4805622213632419 -0.79503851914353452 -1.3923256764632561 -0.022767154336956127 -0.28519635178869618 2.9607132788327513;0.435618161291557 -1.8861213780194761 0.7401296412978744 -1.3992825340523711 -0.73949746343517719 0.79698493549082006 -1.5157114909611553 0.17743717581637403 1.0238987690169195 0.65881010066114165 0.088660047801104924;1.2083802041180252 -1.490539737672272 -1.5278737708878962 2.1158343682257845 -1.1624873872306116 -2.1399204073998139 -0.73734299273056303 -1.3380772179219362 -0.19971461778210101 1.043415698981353 2.0417000358683941;0.96736211226922908 1.2561460651839544 -0.51132088947972343 1.3355263732620051 -0.84515602171236626 1.1883685160809068 1.1861536681740987 -1.0746126070416935 1.1556753968100242 1.072714500507802 -1.963689582299301;-0.077496937757421586 0.55375532072433642 -1.0649675176933044 -1.9565184758812779 -0.61501830967978666 1.1361364045458124 2.1815183862442478 2.2170766198293319 -0.48305174498950298 -0.17698755515278225 -0.3011712645504151;1.6921851726509822 -0.3523662162587583 0.11073375441211104 0.021406688411937547 -0.017652109971253299 1.7225180036372953 -1.2805941972100612 0.37767574959957839 -0.40785514704656028 -0.68484609232943849 0.14649571307583825;0.26866309381630943 -0.36307229362168425 -0.66423444942949383 0.49080444007900481 -0.14129751395459297 1.027432433329597 1.1262479093934208 -1.3706922918958271 -0.27206423654805328 -0.24844661136756968 -0.2530272096344266];

% Layer 2
b2 = [1.4342551542430351;2.5731345478961272;1.2457591822328935;0.7907094917190296;0.445411521487732;0.47286187557189141;0.11857167650564786;2.2808444269635229;-0.34233347393595787;-1.1389798734578365;-0.77120296243435715;-1.4408454014610665;3.8298639501000351];
LW2_1 = [-0.029485493856587469 0.33165442446592064 0.033073917949976481 -0.5009816425009822 -0.476574475980513 -0.29840865206862788 0.2282438313892331 -0.26738513672817804 0.14890019396914364 0.46567880763586494 0.78529353180824368 -0.99104121163251213 0.095446708513745926;-0.13975202347917129 0.4567826562543929 -0.084209124441527089 2.015096743393618 1.4953803447850591 0.12012679042696735 -0.48354324639117086 -0.29378871526878286 -0.16380856756644899 -0.20208252993844111 -0.6610983100729505 -0.47447305994031536 -0.26037102821689917;-0.54623215423305049 -0.30201262153316177 -0.58419239636283116 -0.71264487854311742 0.25580288081234692 -0.51762965347153933 -0.61454131105472332 -0.27443323220408078 -0.12248705891023746 -0.18137665500626224 -0.036757235337002175 0.23717086715394145 -0.95924512551264463;-0.24054569747309773 -1.0885636412019395 -0.3645933713210272 -0.093494097488848682 -0.60773713100489823 -0.98622717020456974 0.21579602967927564 -0.26837381300621793 1.1993675132813446 -0.15758867016399114 0.080272385396918333 -1.1055717300105916 0.77103638761446192;-0.48585667796258053 0.93847703380973502 -0.71672147510773554 0.69770200674802041 -0.19841440995811616 0.23754499764529094 -0.053087946742551684 -0.59879088904945277 -0.33745810223041034 -0.44455437872478709 -0.36426403322506107 -0.88077254815129258 -0.47417199664320198;-0.49604268018057363 0.31741762698082709 -0.015317719896427967 -0.19454728869955304 0.35377589171125567 -1.085318276187581 -0.22523598326822303 -0.54698104333032238 0.9070749940379832 0.11231700869533601 0.64925182370381918 0.25433100873939724 -0.83111209839302203;0.0022955405692931669 0.78882719356027065 0.66429609566351533 -0.3680091934095982 0.81575113363250895 -0.32961700049256704 -0.54594505812075722 0.04489760793990466 0.45538139951310685 0.2882633543013795 0.18817299246242489 0.39692942923057017 -0.28413755300441129;-4.2067784721163966 -2.4775446062890296 -3.1168704899607573 -3.6338834906617996 2.0507284198496971 -2.0271031101161943 -4.2186509003888686 -2.6238969240593222 -3.6689267777791064 -2.5030991105783005 -2.2396823921815816 1.1706023451855829 -1.9114021883601788;0.32701078328663891 -0.0018923124260348603 0.58638955093842193 -0.080245122549646025 -0.49705784391263441 -0.07976087369915115 0.85875365354883615 0.61962615514059338 0.44375463671195714 -0.32271928450760412 0.60451889516037549 -0.39881647998171882 0.78784473018819579;0.028650944113409307 -0.72539457971836119 0.29396659121447721 1.5620513842867711 0.33707165771945957 -0.090684146532849452 -0.048033489654857556 0.26803350389338737 0.35669167554248066 -0.32512697751240077 -0.91083162823552188 0.90634436837390719 0.095754300620928462;0.12192067207752166 0.32391369275584442 0.12502894528595973 -0.75029538050441036 -0.3701035497703144 0.2062791091050572 -0.026960899251907144 0.22184132105331425 0.0016317349849020446 0.59716775839410619 0.31313442975838518 1.0048943050954697 -0.25266738173917858;0.13699892207866515 -1.0932003944748976 0.71620678843741992 0.18258159578325722 0.20464311810354233 -0.94631441469020805 0.59351981257861786 -0.11117416953869955 0.43092658617780483 0.57741178121978076 0.17605538299828999 -1.7190126350932384 -0.89632225229622875;0.42566860134858103 1.4557205383904313 0.14139618819064204 -1.6924537204433969 -0.57710844160207553 2.0171706295395526 -0.22128177017848705 -0.70362384695569202 -1.5155323540377394 -0.8981180233397561 -1.2193890201632691 1.3518522222536198 -2.4126350789943647];

% Layer 3
b3 = 1.2691384265285717;
LW3_2 = [0.17906961854752484 -0.62455684852063498 1.7654928700916304 -0.054908994465394226 -0.06014804281840494 -0.10043750898678083 0.099909863659762871 -2.0781162449336188 -0.10910485185034062 0.088968488279842509 -0.23135758529715789 -0.088402672457946391 -1.4046800150501473];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
