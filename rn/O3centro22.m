function [Y,Xf,Af] = O3centro22(X,~,~)
%O3CENTRO22 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:39.
% 
% [Y] = O3centro22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.240267996494623;2.8776710745933567;-1.6138844293178394;0.79242029516647505;0.47158582800799825;1.3243178154485311;1.5485783648842;-1.2951139358047379;0.94187631002336492;-2.5069446524464047;0.00058883455150224306;0.047159465333195011;2.1517624641086006;-1.0917641901019135;-1.9992902948131084];
  IW1_1 = [-1.637077869653919 2.0386702561128898 0.28613804958559946 0.34678773859925965 -0.59513493645128235 0.97785828551317822;-2.9580814552307824 0.34944508261563106 0.076127841201664839 -0.046666196797697665 -0.26135381749904163 1.0897499679203668;1.3245781400491718 0.38422964278685612 0.43482477959517962 0.020089617037460462 -0.18105323491511116 -1.3136876101350876;-2.19169387871582 -1.0485343913286089 -0.026180894284897432 0.15190270268159226 -0.11636631654369027 0.11345297015077721;-0.63878953113389481 0.44893294854450039 -0.17769275901564091 -0.27008987034893445 -0.066406956681336782 -0.59301055914040324;-0.75964427155545866 0.13139593829350305 2.2434667228593193 -1.4462189062520006 -0.9385349014002381 -0.44256745572386713;-0.32678006190765252 1.7939650868576964 -0.13528525952563664 0.78908652967393245 -0.19430137819338703 1.6601471371048602;-1.5653576349070704 -2.2847045878947769 0.14112701682200665 0.18064872011811325 -0.65595187692106982 0.5826664413305791;-0.11783836557665169 -1.1141574445760221 -0.56639347533113704 -0.56610830728655559 -1.1225269753802738 0.61102984549872219;0.13941968443879443 -0.31544080034666111 -2.2375607226140786 0.4433812380027623 0.033350171618843009 1.5479073278009174;-0.79272526286282952 1.5220967361708093 -0.48851865214160406 1.4753120729218425 0.12512024922662421 -0.096383021727750803;-1.7765068553380765 -0.13393397145033603 0.34676192158978913 0.34581805356300266 -0.070948939326376512 -0.90776652404049674;1.6319425615450149 3.1885112440233576 -0.23491667265628219 -0.067256790741960282 0.10081614717738863 -0.016247060763684408;-0.12611811736113929 0.98366137236794615 -0.15878587373558173 -1.1239277502434817 -0.2379244473082017 0.30279165854649448;-0.57769819062565275 0.34943340821959173 -0.61437425822648351 -1.2638057882476967 1.0317660840724532 1.4422392406603064];
  
  % Layer 2
  b2 = [-1.7553944614697461;1.4335710259680563;1.1247800811951851;-1.4571066894880675;0.53166161555743219;-0.42427719464292979;-0.24951816946605471;0.34670417351007987;-0.60690994829185163;-0.21562834650653909;0.75645327122079642;0.71338505054985146;-1.2567557554185931;0.51055603293609908;-1.7585980790658584];
  LW2_1 = [0.77007214756412312 -0.64876205285647626 -0.16878545418061766 -0.090381332844909401 0.38385633872220648 0.12073786522768876 0.10751129419840676 -1.2901433307544448 -0.47782114264303727 0.35037717594490086 -0.26691889724285156 -0.042360781872616146 -0.21694978586384775 0.50214495692993999 0.092205614489439078;0.41311519638937028 1.3104828293413295 0.49051943636120632 0.14678399141447326 -0.20546042812158233 -0.43534736553006526 0.53227564839347952 -0.48171459632602687 -0.14898444276038994 -0.58104092111716177 -0.27739264617532511 -0.14933907523783096 0.13343037922585096 1.0371681070858918 -0.042476346456501432;-1.1124577732488796 0.30886131305774139 -0.47161884190420211 -0.50331370812936937 -0.0038196510027285677 -0.23135618910564354 -0.29717905601881484 -0.46000963258503819 0.09890659331225779 -1.029604540132748 0.36115743608334583 -0.74016089944083807 -0.15550439860665413 0.17305261409449507 -0.41674860619143567;-0.12069042536673492 0.75777761770398866 1.8287745930561741 1.8535960234936828 -0.46352227978436022 -0.60642809749866 -2.8262915744191051 -0.22049687593164194 -0.70403877032648365 1.2915643192324182 -0.87347511007975021 -1.2243991420353606 1.1807548959304501 0.073736122610173344 0.63841494722930925;-0.78330782767035401 1.514903316693071 0.23055810103939317 -0.56847699703804022 0.44916953285271854 -0.014554112882137746 -0.12944280503581376 -0.21502925749387777 -0.2051567522410862 -0.11356304921232771 -0.36001653697976549 -0.15712986377332916 -0.18227489887124193 -0.95315772356774042 0.57477790596170952;0.40104849113896213 -0.60304840102238622 -0.01270076078534603 -0.87885107615770119 0.30329080262498476 0.018305053821420059 0.93485361085519436 1.036297652863621 0.0039346188420374753 -0.42099580709761686 -0.68374007940657178 1.0093841485661157 0.48559533062291177 -1.1578494548347604 0.1693686333794629;0.33775380094130364 -0.85788601776779994 -0.18964794747417676 0.4498901107413853 -0.85067191574947931 -0.48188645205227876 1.300981327240232 -0.69495537041451261 1.2133777251714699 0.54908178540245367 0.23808763258828095 -0.059535431277527931 -0.95377518659569505 -0.99887316261548365 -0.2434368178592656;0.39215058778465983 1.4655716047609624 0.5451908233406263 -1.2190169266447939 0.31933312450185525 -0.17029008416763641 -0.81269728177986855 -0.44863841147275968 -0.43600293728109962 0.69153395207764223 -0.044953172933302477 -0.66453776103499562 -0.21348328700650707 0.045497493300639666 -0.13058991250762669;0.18585596874178437 1.2819379567520579 0.15754672915852241 -1.6095018473753961 -0.71652772567941869 0.45805976907903356 0.55599028370436832 0.38639568451573036 -0.63269802499233452 1.7145231082685659 -1.1158263317071786 2.406104470879141 -0.019224229268528299 0.37914573519377459 -0.97813127224210694;1.4558973680324709 -0.54416894038159336 0.94329871431959811 0.067778306069866304 -2.3072222255175472 -0.54262370250023872 0.33290547460405068 -0.21063561558438992 0.20889822977574901 0.36174769757563607 -0.023131522482733376 -1.1902334723775612 0.75505069842195838 -2.1285456286288884 -0.4032758366019038;1.809543154305818 0.46123797340477068 0.41358137227733677 -1.2936041812210368 -0.37929835874437184 -0.10391034526715315 -1.3187911062989055 -1.0323620725348914 -0.7800701235881542 1.0874229446635071 0.31448920494916943 -1.0058606925704119 -0.74428274162592756 0.44709767689077978 -0.67384783397590664;1.2709301324743625 0.95783291060344145 -0.055499162252039352 -1.1472135239984149 0.24862328927441255 -0.98735823621120566 -1.5202952266010108 -0.13230991590621477 -0.56541298493090053 -0.61796129147127199 0.0088272355357077517 -0.061668761852894133 0.073604020168366271 -0.24964921226330367 0.021234186518779029;-0.3310325140472456 -0.072220767291690094 0.46383275012200165 -0.44661934403571935 -0.48695392682445932 -0.26955185330196285 0.81790640286423189 0.57885630223176054 -0.025920844960944753 0.05119154093071282 0.82206880879149213 0.16349197676777028 0.62111233573692881 1.134941998920781 0.41874086747754352;-0.18316508175643545 0.22368671182592334 0.054647381874568704 -0.31955526880772622 1.099585601348692 0.55413277294956731 -0.49121522105208287 -1.0662428013852092 -1.0745668346359973 1.1560327407041959 -0.071166774340744587 0.0086808413231726222 -1.0226314227515778 1.1771848793328965 -0.20543682788610851;0.20275263214393346 0.053805298938406985 0.038221225068441729 -0.14213096997127495 1.1656733939541262 -0.26500085729861794 0.65777321691317814 -0.028247000645309332 0.8366038587560779 0.95254245649364155 0.69903410594434434 -0.39534359233839089 -0.85160032883280457 -0.52683400276395553 -0.85173625312513745];
  
  % Layer 3
  b3 = -0.54084925373900516;
  LW3_2 = [2.3517137676700139 1.9440944131984708 0.74610517897575657 1.1393778888257338 1.4424497774379474 -1.1238476200140068 -1.5151018666902307 -2.5063021608092133 0.8442230281808617 0.70762411351774823 1.6407633336435998 -0.62404025559807397 -0.80148436612102525 -1.5372125594018289 1.3724094474836122];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
