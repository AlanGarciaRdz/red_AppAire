function [Y,Xf,Af] = O3centro15(X,~,~)
%O3CENTRO15 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:38.
% 
% [Y] = O3centro15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.8280562992121918;0.33821231877788072;-1.6454031267747011;-0.04805455540559176;0.46443133622738886;-0.67809073815955945;-0.66351936878707263;-0.65595799277902733;-0.32944360135258333;-2.7574277467716568;-4.0006263856693671;2.1431193278623217];
  IW1_1 = [1.2382264018576761 0.19785794222111802 -0.74023219044811872 -0.41362826128962588 0.26802195077831564 0.10709341710094314;-2.6066138124409539 1.7766082085738812 -0.19318874892961452 0.053682531337784847 -0.35024913515480588 0.70119668108768396;0.43368641617196596 1.8880277744754808 0.40096292161943692 -0.28969895092716952 -0.55513709363862596 -0.92652380498577325;0.63208994377551797 0.78044865478015102 0.022209164827493893 -0.058142641382786159 -0.128491609294931 -0.23249581179311868;1.7509835017063684 1.5387145395186843 0.37282491368724513 0.048652718398709063 0.42494379787202596 0.30254779457691633;0.50547224823783254 -1.4594259340291842 -0.58788350437120462 0.0076397565553112667 0.055828537402342539 0.38424499366885012;0.1866011908315513 -2.9644563059622033 -0.10857333540492561 -0.19514255636022623 0.66517082732455435 -0.19951667493748565;-2.5538747981394985 0.0039799147704871855 0.14369351223394033 -0.057341837391526873 0.39635312131818817 0.3786614195585587;-0.18055714234097592 1.1782318604240067 -1.031066568405083 -1.2892492688666317 1.4427813102387703 1.8437102052023129;-0.13295221508625099 -0.23953221739602515 -0.087461389907784279 -1.0602543407122786 0.5257579102050941 -2.1233662985528414;-0.020539729011879556 0.37208665866281743 -0.87964216771819193 -4.9040520671462398 0.40360640418069921 1.8917555120975762;0.44169120792972988 -1.2315114201298125 0.38334872720956081 -0.50931592506188184 -1.81498491266303 -1.0205442632062871];
  
  % Layer 2
  b2 = [2.0321170882492257;-1.6037090118471284;-0.86546284225597758;0.1806688092965345;0.34790085610576427;-0.87442396973267567;-0.89035707496539673;-1.3844525683341387;1.3260675835457603;1.3370710004054784;-1.5152673098922478;1.9763434721285107];
  LW2_1 = [-0.020071756717272266 -0.025582128844284988 0.13580515753633743 0.95323722958773427 -0.91039796060177003 -0.16350725177996206 0.60423871222639702 0.78030562964144434 0.607051013246794 0.62012095490151864 -0.26509959431256491 0.43090334704657346;0.48231773810351797 0.92661062556731022 0.82987841490183967 1.508740616104981 0.4412448841767227 -0.067910578907067087 -0.7995160751021253 -0.73019553116106428 0.3943933555827801 -0.66728614163532673 -0.68817651225300769 -0.45067822586940015;1.8545150266145467 1.816384515912131 1.6796757741081543 1.3865364949777756 1.3107268883450636 1.2896575679844366 0.79849103717763048 -0.16973844646973738 0.55867888578006386 -0.70030434246685991 -0.77868185150325397 0.14140740322736159;-1.0211915015084658 -0.38375133431458641 0.047337630695260313 -0.059012871918197138 1.2100591496909152 0.87621045749773052 -0.24946478386331092 -0.11300036947910225 -0.074201088867725279 -0.80008885422784537 -0.23074049595305451 -0.40477040259694064;-1.6157151394754676 -0.76858389609625966 -1.7742943825113857 -1.3035143646494123 -0.49730802202078939 0.80801945354818427 -0.77469314282899049 -0.701741373725562 -1.4200158043284317 1.2380806151635095 0.97611895579618957 0.19750991536608872;0.21548242001086487 -0.084490220280969461 0.070059920416229604 2.0887873855265235 0.58530969797303345 -0.86546922466146603 1.458923234151166 1.6060505340982765 -0.97601165687656788 1.0967230790657905 1.1517588435750099 -0.21871128971834361;-0.59137800731331136 0.29500370076941473 0.15417374956775795 0.8525158667907794 -1.7852842519987346 2.0784012368818781 -1.446490530930659 1.0794423768885182 0.95614413098698103 0.33111855774366727 -0.57573162289221724 -0.084016562876299911;-0.19685538456864365 -1.7556834494548321 -1.4513726340936373 -1.2610514058710591 -1.6840042975744043 -0.78560422093403615 -0.99486494961521854 -0.99608132184329667 -1.0042035261190361 0.86764047988269 0.91608100342556187 -0.35011541995183859;1.0886284009835343 0.42930130961004676 -1.1746652716390482 -1.7486296389990712 -0.12717462679135816 1.5455420244794043 1.0444398600107869 -1.0960528087482533 0.16815845143282421 -1.6480507669032578 -0.83932353987337227 1.9980200371119776;1.1172677229099983 -1.4998544964714324 -0.6524139900937681 0.71361884988650592 1.9706969865378503 -1.0609268671906227 0.33145581720763534 -1.1296182400271439 -1.0602520099000032 0.18812013978302231 0.8043051024749629 0.12449987005667829;-0.6662250864552427 -0.81540041709033872 1.0345413765225793 1.4147804814745109 1.5750994043341107 1.4880130304339869 0.89116832888654651 -0.12086730865123459 0.47218638805660673 -0.54852518456046173 -0.39760601257509437 -0.37975688542681474;0.26582869455716146 -0.55815889935419816 -1.0313591067070091 1.5824727677385957 0.24643903318733981 0.96130969048467618 -1.8585578232972355 -0.57689934744608273 -0.77424296104723878 -2.1190610503305987 -0.89550484098504401 -0.10996328264607627];
  
  % Layer 3
  b3 = 1.7627852863586999;
  LW3_2 = [-1.1365489597771414 -1.0724214615030623 1.095611646361023 -0.59742940968488545 -0.98675565245436303 -2.0310225424356312 -1.291597646386583 1.0396492358082465 -1.8208279415633764 -1.3435922993172948 0.83577651219213045 -1.4197000647399745];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
