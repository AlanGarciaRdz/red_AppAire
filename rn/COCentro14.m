function [Y,Xf,Af] = COCentro14(X,~,~)
%COCENTRO14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:32.
% 
% [Y] = COCentro14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1848940929451297;3.6106223677631162;-0.14706108472275614;-1.8471279526861197;-0.27233308551624308;0.17601135680274804;2.2434720618400616;0.16707582119192593;-0.36681597138984634;1.2373778288197155;-7.3459229308367036;-1.860222904473243;2.564264095118685;2.6442657753011649;2.2692199274461968];
IW1_1 = [-0.98299732938373507 1.2573293461756685 0.80628798778097566 0.42171241677142679 -0.45833581794676193 0.2955636735180332 1.4645237234123627 0.18623528572537529 -0.24330753186261855 -0.22547035333442714;-0.49357847038633718 -0.61602821144264386 0.30261661759250619 -2.7910274154429593 0.58101668545752827 -0.38178689308484176 0.38039916409991192 0.94515027679781016 2.4369332498436149 1.4934805311149226;0.58162448416141099 0.34046372771672784 1.1632569027477342 -0.88140249586698294 -0.92131017886149591 0.90749253743768865 -0.40209990351542074 -0.30104772976624017 1.8158244981707872 1.1674250633567576;-0.59165649914826224 1.0860044090689398 0.39640813709491174 -1.6414071623650826 -0.62772831176283472 1.3060782637063224 0.50338428988593908 -0.27415902471779874 0.34634917473429094 0.11769095445538287;1.0106005799780158 -2.247579939029809 0.077983438161599195 -0.13544848123871644 -0.30885878865158634 -0.304638075552292 0.25515895900335694 -0.20609323801342957 -0.028676295246018696 0.32126421297541163;0.0093802025754272655 -0.20148334487364716 -0.41425274294717507 0.26566397073261711 0.68702394584882787 -0.51684878480802932 -0.35041720548876382 0.49999972232464296 -0.069437181397541722 -0.90400428307766423;0.28564174300028222 -2.9960217133455913 -1.165112234249944 -0.41694643898818007 -0.34619447952389915 1.2752150105541626 0.41846920467948995 -0.15888286538649474 -0.079122756612967471 0.3719393334311446;-1.4230259395170251 0.77746100705157228 -1.2513108046027523 -0.41422462129023846 -0.74556494992141298 0.27924655467689968 -0.19380665719414591 -0.29974931899387913 0.50679887928256728 1.1133294509380891;-1.7551037031486298 -0.8282479572006598 0.49988091891470421 0.4692057511509044 0.21525641000991674 -1.2692789012680623 0.094810121212538401 0.0042841994849641823 0.071179716500592571 -0.43965375235521531;1.5135301653571376 0.098607985483392654 0.79095802686100802 0.66443973085354935 -0.78832934140567557 0.61740013578642094 0.15610626307943121 -0.091820389510484296 0.85559092279276949 0.68088034928973251;0.19994974048572484 -0.063130572536485921 0.740114031696402 0.37700623230783475 -0.6936146531464128 -0.1215564344248303 0.17964675939695957 0.097552625879795504 -7.4904843649427466 0.3621742646554722;-1.4202245779824993 1.2810028639526971 1.4384399489961899 1.9722543559785692 -0.013307407508553632 0.0385392515665402 1.6277350733455436 1.0003899932994904 0.11794909987230341 1.0354657841639947;1.0977856602016662 2.32101484243992 -0.0011380775609808646 1.2542520925740341 0.38725463013752531 -0.69315036227197091 -0.53712462103026459 -0.48612870825614263 0.090472867551374042 0.34475187580857974;0.14586787923927294 -5.2923352671858641 -0.50203244847485151 0.20851416805434766 0.0016416860170582331 0.42896910191696713 -0.053625702956452387 0.052252105523072016 0.30726786888288743 -0.37130794246294463;1.3382875759756121 1.4408135067189289 0.6324164603106216 0.69262705074247 0.074284295258438438 1.3003470507564798 0.70811725386965696 -0.2195475565757781 0.47185888859104685 -1.4299527218576995];

% Layer 2
b2 = [-1.8721696031442607;-2.0179754650354043;0.32664500713079081;1.0909557851428719;1.1675844006618288;0.57078798304938583;-0.14394274199499171;1.2976497780569574;-1.1427516648464529;-2.4649083409750419;2.0812632568975209;1.7047220716583826;-2.1010132075511234;-1.7181126301185985;-2.3206936218319432];
LW2_1 = [-1.061255878822436 0.53248016230712925 -0.72315746536002257 1.0750957487014257 -0.094206257439574753 0.78050498487096032 0.92489899195216907 -0.62214524269129101 -0.39785972091916882 1.4558191381917704 -0.95774462945442862 1.0491190345545369 -0.22106506385277058 -0.41129039613607954 -0.077918896635721449;0.87826155964488906 -0.70374587520494014 0.72431464616452934 0.42149546833545137 -1.0179264775363808 0.76994474395144286 0.82784043918151695 -1.187579569693971 1.7314244490639319 0.028844396447704809 -1.1023095207752964 0.51777304602275454 -0.44121228581236649 -1.7640054388794431 -1.2310405081401359;-0.88396025272688927 -0.85944315357054935 0.28135286105003793 -1.0666293935195428 -1.109758321115744 -1.0313545581186336 0.61198396291369195 -0.84059615632094298 0.50309178642333319 -0.38185855383554773 0.54433072225263213 0.38781883566196906 -1.5962567961415643 1.2551394099607653 -0.11306294825783249;-0.13518226889763996 0.56317033617963363 -0.27018478163885473 -0.028575047912658601 0.40208969505326198 -0.47932582691077347 -1.980330282220607 -0.20671664197276632 0.10815719481173426 1.1605664314138755 -2.3619402480631635 0.010261054124188429 1.0584945869941427 0.0022338362991623853 0.090802935733290652;-0.62706243205342393 0.22378473708261476 -0.43399114734542954 1.0085481018836702 -0.28631875630222386 1.4070974134331473 -0.17890021444289117 0.45647794397173425 0.20927782051761121 1.2467377130213646 -0.53046080462546885 0.83534095582815571 -0.84772923896162189 -1.3357712086106683 0.38960547499010467;-1.1190696597244931 -0.41087353725482523 -1.7294482770386852 -1.0441968215513797 0.40205571064160389 0.93818468995193616 1.1889427327421571 -0.22652657608297924 0.21500375678935768 0.51464018456087635 1.1908395440374204 -0.2637179340187274 -1.0050230062884997 -0.27101800948184107 0.21467832798652178;1.2365883730234839 1.1574498479885647 -0.066754142543188399 0.73468078188581298 -0.62278584055163011 0.21776082261314972 -1.5614924504674006 0.028037332704153518 -0.94123567669152286 -0.049566000429474691 -0.19566180485722215 -0.12668356729307112 0.79377068823750485 0.85894792251536489 -0.45114428409165669;-1.6903836711096731 -0.20831755852350586 0.46029177036320662 -0.19150444658782259 1.1565220367244009 -0.0049702871765176203 0.72690330246344459 -0.26115442831051078 0.042251099972590772 -1.1205501193179965 -3.4706583259834174 -1.5316741406353571 -2.1439055271034788 1.730212390829631 0.37713616749902096;-1.1984752553160576 -1.031294673882668 0.011151709492065898 -0.70222173718505598 0.77174962682213777 0.060929449251694343 2.1723691769539846 0.4006871005328328 0.95752751158524918 0.3040529351542014 0.22124021929571902 -0.21203892749085651 -0.65513439128395523 -0.98570747555734595 0.63255574131027947;-0.96826302425074218 -0.56651864343118308 0.21792065008754841 -0.56307391368241966 -1.6065429485274039 0.23187309187448865 1.9703675423581057 0.3728535100130661 0.36213422369989179 0.59393749354882741 -1.8136305638949297 1.533463668903825 -1.4466641572509993 -0.70806958555084076 -0.06014370862323952;-1.1310472252406905 -0.3870399796176715 -1.4988023337626102 1.8581476262496268 -1.2546914421299227 -2.1567281722468135 -0.48388700208151314 -1.2482948512132144 2.2705241143982047 -0.034480302967133059 0.35341052997348049 -1.5375744816008698 0.1894379596747911 1.0655103109180248 -0.58833039134456333;1.3811537447144995 0.86585556726077795 -0.31261149428820612 0.88288633058364197 -0.0071873691340787957 -0.56394362591165326 -0.6213035316765102 -1.2426767595008992 -0.8445649364001836 -0.97527469877419559 -0.052717856733664109 -0.79040627840172684 1.317130392969931 -1.8361002202849479 -1.0067813702908839;1.0581978296332659 -0.26199145805135982 0.66481876751038993 0.32084882102269546 0.23039635607504491 0.91963873711364574 0.42152302901538818 0.76323441915100743 -0.096726299824829817 -1.1273141224294878 -1.2690103713719396 2.6439840366025891 0.57964905186880233 -0.77146355611402351 -0.64402253450295655;-0.88508988285298384 0.7544369156373455 -0.54155811292910794 0.81053903147310358 -0.4789322079412669 0.73901178384593125 0.27826182897545082 -0.32794049166860045 -0.20763578472520883 1.1655030003041611 -0.038613063035458417 0.27850616577600779 -0.49387211078827764 0.12209037055046337 0.32163740432274956;-0.22312239508576523 -0.38025740105359207 0.10124913451397462 -0.95996739208433568 -1.8258551732897481 0.066440662246197157 1.052725845192592 0.63381027422430303 0.44870182066677688 0.74184236876104181 -1.2139389698127054 1.6423713220960099 -1.35372123569352 -0.083459134935503387 -0.40996993544913696];

% Layer 3
b3 = -0.89806929087997189;
LW3_2 = [0.59212096717475793 1.2474867817266853 0.43725293386377384 0.26205760200536998 0.34278821631781081 -0.043540573079079353 1.3723277893154024 0.35945926432101138 1.4891273885584586 -1.4701625463178398 -0.069616224611586147 0.358430682089805 -0.63412624048702015 -0.89498873835261772 1.1707090239261839];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
