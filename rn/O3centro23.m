function [Y,Xf,Af] = O3centro23(X,~,~)
%O3CENTRO23 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:39.
% 
% [Y] = O3centro23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.281968137600451;3.74531835205992;45.4545454545455;15.748031496063];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.2604666062035568;1.9127440871589823;2.9518464638852775;1.0432715611152759;-0.72797069423138672;1.078404876483573;-0.95832227093988265;1.0954165740209891;0.81477700586869306;-0.09939792278094553;-1.3528091383259815;1.0449100509929845;-1.4039257623772685;-3.7570542646796095];
  IW1_1 = [-1.2838064483132465 1.208795945903393 -0.52457611827439421 -1.6803556509648123 0.3585061912524713 -0.2868935018024063;-0.95404308371357383 -0.50923535625366212 -0.34829353514838851 1.645937070751776 -0.01671421449827399 -1.0506441896443381;-1.274397828377392 0.18980750382791609 0.21363322263550921 0.99751104004489854 0.34950772083052395 1.1579323882482351;-1.1384625242609689 -1.7743229531607116 0.14167473949056308 -0.51447704854544818 0.11857981901051634 0.10019780824191327;-0.415249486245438 0.028705153495542764 -0.39937641475735486 0.01823019108254504 0.021738266095199844 -1.2114622530166732;-2.349473217221238 0.11575995369233705 -0.17562467882606564 -0.77140154962547791 1.2887726360647294 -0.76005581210728912;3.5158370873944835 0.31555639884227982 0.34217501992471994 0.5963099770446556 0.98985960021711428 -0.22553671541761972;2.6451971827155631 0.45355294174114746 0.37403344669883554 0.058001463059270009 0.11766935133187081 -0.064819168113265019;0.33075104047900428 -1.7218163971327465 0.22497546058217946 2.2840838435454081 -0.79023716764447915 -0.36168832008339113;0.29753617599522353 -4.3361281585694842 -1.6639195465771262 1.372264259558986 1.3131962419252596 0.44209938976454777;-0.82865063451862997 0.76669291200607448 0.69815374452823054 -0.96075324823421526 0.3225692674609989 -0.83700509522962496;0.031725806370384087 -0.41919076546283729 0.92980473831237598 -1.4458080764783092 0.66698472560227873 -0.31154809522821175;-0.96113230143750916 1.9803513894605838 0.73424320258325337 -0.76455399745704755 0.29021826468309958 0.89862066193483148;0.30146887674691442 -0.0057380839899046875 0.57847548906266844 0.30352911034435293 -3.3394798152772069 1.3347896381038977];
  
  % Layer 2
  b2 = [-2.0589605616016087;0.73960744988189142;-1.7516930002190705;-1.6655363391186797;-1.7564118326988882;-0.0054646115590591543;-0.90294356494469541;0.60417290454154537;0.24448610251090058;-0.62428038747298109;-0.8017457009711626;-0.97479273442696235;1.6868387466144132;1.9458763575288121];
  LW2_1 = [0.050018897571230403 0.12888743290180529 0.81809624876044551 -0.16002989209813445 0.062505093070752304 -0.22926380135089347 0.30336922040404135 -1.2288617025054076 1.1575441004078884 0.54642487104933435 -0.12368212406442747 -0.12480786640487579 0.60461130898885562 0.87249916739870548;-0.45655385324876657 -0.70453108051397906 0.59729482497501096 -0.6974853890483369 -0.40107169519298219 0.45933773805285621 -0.43671882567571252 -0.0060355026200786394 0.35808860570613615 0.017966299176545332 -0.54263682300744276 0.3733878174161932 0.018581976322369256 1.2279110048114099;-0.45856393872886525 0.11369876235147298 1.0743158677357254 -0.35229119983919593 0.36643540429422095 0.27856857947755775 -0.18510665653833305 -0.89846315440049884 0.94311038181152684 -0.38262695698895327 0.19111984771639362 0.014089178198427102 -0.81162339567250497 -0.94273163450798636;0.039008027657916423 0.11572222162921536 -0.15203720421388167 0.97167496440719947 -0.80514248410681388 1.0644816535594803 -0.47270756165248884 -1.4035258800882311 -0.58007908020288657 -0.95664124951583163 -0.43254147482114402 -0.21225607537499397 0.10569238459700805 -0.44484870890900735;0.73439635208008514 -0.68591020013229775 1.1029693550137527 0.10658446496347698 0.36214831336073039 -0.37223405062410314 0.66632871327937249 -0.34938493455749309 -0.47524419866236756 0.141578677675266 -0.80948123643390502 0.65681678577691993 0.77321676257300498 -1.7683601511843081;0.50240713325407216 0.23361313299571249 -0.44328616714772484 0.2533583669661823 -0.060942568141163264 -0.20900983085419825 0.37321163780569572 -0.045668382610195506 -0.56345976105144391 0.281673276282977 0.10553055805760163 0.12069758025980941 0.56027297052632574 -0.40650153841845321;0.094857238045648995 -0.22638457584427346 -1.342054808700798 -0.51723004714845955 -0.23346109697688192 -0.21638790943815703 1.7358362917476784 -0.59691801244609244 -0.59258471938024682 -0.43814672286990902 0.097808386949813308 -0.61968333658579622 0.20732324550495015 -0.045185621184795591;0.009937670123816706 0.011951743993067905 -0.70301522092474744 -0.36019923686635757 -0.13396040639651383 -0.093879497596614514 0.12257568829667995 -1.1375617953334518 0.35512995347066656 -0.25322388820579977 0.92890018324793744 -0.2707798945810056 -1.054136456671781 -0.050215381739886385;0.28635621599754507 -0.4129497567377739 0.74814027013029671 -0.49675653222211597 -0.39748872167434607 0.65631518946294465 0.756830073486493 -0.57654611009568035 -0.12452441807510403 0.14831742064098535 0.25687443658319642 0.25781142465567397 0.60245471019120922 0.65906411331260928;-0.65824115178983988 -0.52576484681554037 -1.1655973243908895 -0.36569964936003391 0.039405370156951829 0.75911688333908323 -0.70701784330157369 0.54816539302435607 1.0365354502011499 -0.64526544388054452 -0.10713105694747195 -0.36379670685710608 -0.15300224279696378 0.30191135736002384;0.35083467338154734 -0.60599302449542758 0.43806033302417213 -0.57890699983284144 0.92875129059558437 -0.1671843442908994 0.39389389133625174 -0.8283366214304998 0.75172692117188944 -0.231453941950754 -0.12064038913312115 0.18495384083505384 -0.30970347473400262 -0.095212806060313321;-0.11539326985751988 1.0674817998060331 -0.79824319826243884 -0.17625501195790583 0.028898711640109737 -0.28711057149629338 0.028187385043870208 -0.43300679255585584 0.02421501509342968 0.39231305953584517 -0.44167590390093764 -0.0098407084736981433 0.52086917642440134 0.022927814302233646;0.41563038109366141 -0.85374485996702143 1.0908070372099239 -1.9236117742054752 -0.060501726734184601 0.65403601459861938 -1.0816529763399996 0.22299843743833436 0.82197050683296791 -0.68230776270304205 -0.51545223309550292 0.58658140053663321 -0.1312685843387163 0.0083672050328905331;0.41179136833862534 -1.6855448694280686 -0.82622276574168996 0.68760030143738493 -0.13238879246528856 0.96471662411836445 -0.55302226763081563 0.43962550192833788 0.49017193226958633 1.2011966235557097 1.7225492475140012 -1.0525237416395741 -1.0409148266765453 0.076571964124010738];
  
  % Layer 3
  b3 = -1.353899256319554;
  LW3_2 = [-0.86156429107093024 -0.98671235226161713 -1.2477216242071922 -0.31741610428788924 1.8533873020796501 -3.3249230525202895 -0.26442001941910664 1.3231349660735623 0.87814084263609915 1.0013030312092084 -1.5168133373093062 1.4381261218328718 0.76385206096592462 0.40826056981730274];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 15.748031496063;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
