function [Y,Xf,Af] = COCentro16(X,~,~)
%COCENTRO16 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:32.
% 
% [Y] = COCentro16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [3.1905332669043345;-0.51130753359622316;-0.024468086879803563;-0.63206368577327632;1.3151036215126548;0.91483921844791294;-1.9498650854874429;-0.47359376053839042;-1.5825993523981037;-1.5895070168289971;5.651377880972789;-1.3724669801404654;2.2773385833095836];
IW1_1 = [-1.6190293823119604 0.91321248603769112 -1.0992732883953238 -0.09856673040103793 -0.030778468924601562 -1.2011649226762844 -0.57262661728572128 -0.8839944174597979 1.3771315814592666 1.7971484056875551;-0.69033805350108135 0.67216107579650841 -0.74213283077504089 -1.2881709973383237 -0.075588307038185129 -0.11073262642730966 0.49718799833355948 0.10184221077139508 0.43579149945068041 -0.13334928183090711;0.96846954608520042 2.4898988740059691 0.13002711456838964 1.2359105822727445 -0.53376535161530791 1.052997630011087 -0.31806828852046642 0.31458412130425495 -0.074584490774286444 0.88350263771629112;0.89792573854846935 -2.2265227002508357 -0.11685667000106574 0.069848142172552918 0.16161691377188978 0.098384278457025992 -0.12378012056044568 0.14458610482697978 0.14650223970712767 -0.21374116333520912;-0.81029922129241705 0.15038844324156472 0.021516446899818922 0.78598747404536429 -0.55684821898632875 1.2283034000465725 -0.37046360968332298 0.16553997140829338 0.04511483824797019 0.83911398465410503;0.28297925901204868 0.12044060928193065 -1.9020724787325982 -2.3442892674056144 -0.18059215085131181 0.18527239732353104 -2.6243786857611178 0.34117053305192796 -1.002673630241955 -0.76375663894898882;2.1630007736556225 -0.15252312829977407 0.33337671622263859 -0.79027250932617976 0.29589261690325958 -0.086500865337451216 -0.25818882599858883 -0.02444711480894721 -0.15280441112584608 0.13171790267253372;-0.9851651169613389 -1.8590334408380218 -0.17296171007200023 0.12935473265947842 -0.25822575302600914 0.048709806733207975 -0.020891908975523517 -0.092284311440550756 0.095886024998381197 0.025518894759938709;-1.8913129399624573 1.4361194467160625 0.20902946831011016 0.53784404119221785 -0.49264644032731997 -0.10675101529518347 -0.059548390194830311 0.052947931904782052 -0.18368672880365269 0.29624095215708779;0.13246660169483018 3.056382180479555 -0.30394540921008151 -0.066110455827706888 -0.23931269292337409 0.23493471947383512 -0.056320277504021826 0.26688435337792599 0.15529899151365312 0.35882885949752141;0.32960065577703229 -1.1161648451937012 -0.23137494109830908 -0.45050750024976505 0.88385990046042751 -0.23041409802584756 0.12202111720541034 -0.22901615198370845 5.2933732865561502 -0.39129541887034935;0.00096080950727826797 -0.45066442176695332 0.22872810944141239 -0.16597322816444177 0.55843318997136582 -1.545377359343024 0.60001068646076072 0.36977845255084624 0.67149650752929357 -0.88292925693396485;0.52144400414440673 0.51654909555418371 -0.065839270073708878 -1.0648140017810435 -1.5964035393204479 -1.4967689765962593 -1.2377599509568586 0.75863336661400393 0.45907575694083863 -0.26345259204691224];

% Layer 2
b2 = [1.4213453485888532;0.69321801338392408;-0.70417601334648849;-1.4174759376988282;-0.79209588219714666;-0.45542218571414983;0.5543628307260281;0.58920307704052366;-0.55364051378842494;1.2769100658720993;-0.51606691439695118;-0.30970989310131619;-1.7146836053268659];
LW2_1 = [0.43659555225774954 0.017152679035454602 0.28258771470689631 -0.47132762294993957 0.44865441108426019 -0.60224172025036349 0.63730877465341429 1.0688376502874897 -1.1770370337647422 0.81888484302795084 1.7681052443966041 -0.089501575828590502 0.25590612639036386;0.011203037869819764 0.049324701532088039 0.19483598621735709 0.15090023705675415 -0.18410720320411539 -0.056523728047736498 0.081948162927804102 -0.34544828272712691 -0.19410111099437205 0.97566901320408017 0.41530919936019178 0.088890468361874517 0.13150992261048439;-0.75278687666637978 -0.36461331264445501 -0.10297439439239407 -1.3890225119756259 0.38667770253926875 0.019726462798251743 -0.2037200359221133 -0.088090047834316093 0.045789759032442735 0.51187382770033563 1.2223392128886319 0.5510494515082931 0.55863914776807511;1.1879157672112362 -1.2504867285717538 -0.45325987465777717 0.41509310921535303 -0.72834576508126991 -0.38295020448572831 1.3240588559093769 -1.4171840289828423 0.69141523882296618 -0.68616589418373342 -1.4646283221297987 -0.29460846716985944 -0.92281157413815829;1.7254409572062508 0.17936710532782885 0.11176826842862085 0.82850361389307126 1.349566105012594 0.17489856202668719 -0.49217226112151147 0.2532352101644052 -1.2995034688517146 0.83806160998821777 2.9546645642349176 -0.17521413009645662 -0.049724408990986145;0.60799026198286887 -0.14363254133143116 -0.080325497153686393 0.97651737269181993 -0.56999813677733857 0.028979128551849476 -0.56513569566545752 0.68917029808132446 1.4325283449403494 -0.91704676118491768 -0.24874198750483267 -0.66320768229183391 -0.56320188102684032;0.8629925613499918 0.24406800484477542 0.068590281020398963 1.4758380896866827 -0.46450653915459533 -1.132078774406577 0.68589057926445152 0.35902305222121844 -1.3322391207766153 -0.14262654041110706 -1.3686288300750322 -0.97298609355924393 -0.28469339401255001;0.070636943501713276 -0.015700727523372489 1.1835978598116508 0.050318466741198699 0.35619333852236656 0.48654771443541417 -0.34677571894401638 -0.69971780096337999 -0.15802517002998376 1.7022941162951186 1.3385752912242448 -0.22328038728421501 0.61306238635290189;-0.87224925950158638 -0.97647169085079799 -0.65029089534627293 -1.4701315666742116 0.13276600188043436 0.32020848094465376 -1.6596999416572797 0.63988284300506959 -0.72008238349907405 2.0630208189242931 -0.59904031759014909 -0.23003893418988611 0.020886840730648136;0.69061174139716164 0.34382158062548007 0.50572916396564938 1.0466143720680696 -0.48132315831503375 -0.36032365734820437 -0.038079399206043224 -0.26699929949192097 0.63937182108210167 0.39056187843951107 -0.044140819600525731 -0.27998317337190504 0.3891681188068114;0.36229243078557627 0.62073531310260699 0.029826327683288606 1.1937120483744104 -0.0012176883164146893 0.31585851569278589 1.6691041213591093 -0.62373209150273423 -0.31760551324176972 -1.5280837496744908 0.92820737688843569 0.016764767871372578 -0.62670465297960554;-0.51622840557768779 0.41176085221400671 0.11879533680595222 2.2663983701289139 0.49722876829690649 1.390884302844509 0.17670226494513749 2.7028422175747608 -1.4990025676871217 -2.0791839347591599 0.64790470953516088 0.73364694795045482 1.038042531817456;-0.03216829328521667 0.38241901134145595 -0.13835166529010243 0.78570777440486206 -0.30553000371774097 -1.1954497705228935 -0.93780858940020806 -1.4808989307804712 0.56185204078537576 -0.69872641841146965 -1.3641537216914283 -0.4537004103401065 0.71699251950958864];

% Layer 3
b3 = -2.1673187684197042;
LW3_2 = [-2.3074438141441638 2.0879466523703725 -1.8138964434624132 -0.56673482231811323 1.1563689030723374 0.83981781195400429 -0.95167254151307767 0.94051644128231171 -1.084586209998879 -2.2149447888259939 -0.92923734168794458 -0.36980974652667986 -2.5767366980533906];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
