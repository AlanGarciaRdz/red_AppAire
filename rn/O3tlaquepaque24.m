function [Y,Xf,Af] = O3tlaquepaque24(X,~,~)
%O3TLAQUEPAQUE24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:53.
% 
% [Y] = O3tlaquepaque24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.171659085057077;3.03490136570561;14.7058823529412;15.3846153846154;10.752688172043;10.4712041884817;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;14.7058823529412];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.7509796747152873;-0.34738474918180867;-1.1782709041435675;-1.5684242247659732;1.2303042075061095;0.081193580787026459;0.32650321968630086;-0.043786479702502275;-0.09848442771621882;0.57370023709905305;-1.9113302937312007;1.1398545672945897;-1.156671722736025;0.85872571912330464;1.2511735968264779];
  IW1_1 = [-0.076129997826937162 0.21465429554626761 0.69554005922350814 -0.21936724360626381 0.71876176129839076 -1.1326018787490242 0.11769338053869843 -0.75657514669973969 1.1566958825095199 0.023008361295724027 0.44234618269265136 -0.22480490137732922 -0.47928929683901988;-0.1631553856673833 1.4826363977624004 -0.10522724815349888 0.0041440565150442227 -0.20173558474885256 0.3010889346288067 -0.16028983786073342 -0.43853394522638922 0.35302640936962698 0.60723217496211124 0.28948153344913435 -0.041262090187072623 -0.049368001809280262;0.089467705836263858 -1.1163226974037144 0.75284484097717141 0.0055684698984816636 1.1088542758228692 0.69263027433908053 -1.0781260884115653 -0.034840963179005174 -0.71582710365762192 0.12127840587930099 -0.012210962602719665 0.80296053727463235 -0.44568858373009013;-0.0087856486789195665 -1.0024446364912134 -1.0040373857136027 -0.39215110445531043 -0.090538658068574723 1.4265630063374313 0.40565051090012666 0.24885300347578634 -0.48666781147499727 1.4763011726774802 0.46278238201641447 0.44582229704464782 0.12947884982034966;-1.3677125607987 0.11156567154182168 -0.06865599959861457 0.019299142915402356 0.77450718868754254 0.27080921180396067 0.26740985302232734 -0.15606689462433629 0.02752811029404377 -0.029607422163552652 0.011586169026428648 0.33236068201237051 0.24966565528090584;-2.7640908898290135 0.084013923902768267 -0.22636630911704206 -0.066458959302477916 0.23843817459681613 0.11246036732947574 -0.036800922464085839 0.092282580241083767 0.084983752432344711 0.58782596690009703 0.031488193813126029 0.098760312741415446 -0.23677963752016076;0.17444540350283505 -0.10484427401802765 -0.62485874092857441 -0.53689710779380528 0.76885384364441633 1.0120202422383571 1.2175983107636079 0.4330260392785043 -0.26221547393621397 0.31951803404389251 -0.72126682577681245 1.0258894205580231 0.034859691958560243;-0.097432818039540375 -0.55055764190717105 -0.29282454940552294 0.27417974564689979 -0.28806052424658751 -0.15621861016276711 -0.2198753538233012 -1.0540352484963582 -0.74044810348399093 -0.70597447491285525 -0.090456365638670558 -1.1873471676745897 -0.92666539892392175;0.23517716159094088 1.366423652117436 -0.06190976752281363 -0.012665111053003664 -0.016663150225320028 -1.3850133121926103 -0.15993575304467966 -0.17211731754043269 -0.68756105081483354 -0.42239969218465961 -1.2366134688503443 0.18612454729959549 -0.36384964842287076;-0.4255047043286399 -0.45647780735540328 0.83029920933238555 1.0273847458636718 -0.29442992187065387 -1.1101439056675779 -0.56433519126868636 -1.0162581410772202 -0.012953482789751289 -0.096075105654043966 -0.22840224744089016 0.39320699557068572 0.0070350488671154943;0.11833839825621535 1.0285176078968232 0.32188716808398582 -1.5696205821834179 0.081471785253217133 -0.01226146696828323 1.0754084264493939 1.8597878755772626 -0.71623341173307609 0.11650358394174012 0.40134309865231427 0.275003074568207 -1.378141024402;-0.20309163862191038 1.583113283251059 0.17589148302975088 -0.16521871494699367 -0.75121240087104735 0.68603737398288833 0.40771574436391683 -0.99376714243042197 -0.050576568415455492 0.55717717333049888 0.63534648632967328 1.1690778759779783 -1.1950521067057436;0.25824838951932227 -0.43205383501799405 -0.035946809978665326 0.21622197340798269 2.0821958501251174 -1.121329025404638 0.96734878220988629 -0.79919418551421229 -0.14096869383107322 -0.28922207181304349 -0.47142048933920477 0.19143392313071395 -1.0308263315537414;0.39360998026052652 1.7235681466360617 0.2481999379732471 -0.072543721289064861 0.25027401561967216 -0.050841306795001519 0.072647577854486556 -0.53360909462616057 0.22164498522270343 0.20542125351482429 0.40632923550184719 0.028373668146935364 0.21425666631717799;-0.27859336574422544 -0.51915789050835359 1.2369835885596181 -0.58233755820272071 -0.67406976689715337 0.19580905293142695 0.7915422943563557 0.44482177631803443 1.2592157670573296 -1.4435955039222987 -0.5765735900111213 0.19184512876492077 -1.3804521469483388];
  
  % Layer 2
  b2 = [1.9115288098176428;-0.94760303008346058;1.2349208863928112;1.0690830942881016;-0.22212734606919243;-0.61057639931782581;0.090090872461329852;-0.018210610840584895;0.54681703798341486;0.37267336396460571;-1.6268547956300767;0.7340343547092486;1.2997445046261848;-0.92969104388385126;-1.6455088855140045];
  LW2_1 = [-0.86884007064157209 0.7848187885609812 0.33384262308515722 -0.54823677054246667 0.14551143806269146 0.036743269577388452 0.38318085489089115 -0.2382643106385281 0.033844306631021844 -0.17645822629483321 0.92966119584060758 -0.64098021457806165 -0.11981912205662353 0.52759340805446231 1.199582441776309;-0.0033274667992600759 0.001629154418512975 -1.4534507053861117 -0.29517612686934108 1.1367915679893301 0.090747721957844557 -0.73779298237870161 1.1219250667161067 -0.45172382703932523 -1.2193292549787562 0.071330891551247319 0.36394081560431807 -0.31286319862326062 -0.2089884988873344 -0.80708523675752186;-0.90759678556223344 0.38937586913334227 0.38615540206026944 0.24994286904851887 -0.70422057334119881 -0.42600879615541443 0.72064129225987494 -0.59498424314881782 -0.23658309797541346 0.86309472888615935 -1.0988401190430006 -0.70633430020613641 -0.2575481454984121 0.43197418584873415 0.17490553144374277;0.39613354424731473 1.2979513513956489 -0.32632093841956961 0.83217037633854751 -0.31414796406734624 0.56849772253914832 0.097031180236352543 0.15258721082982135 1.6362467662410469 -1.7192105486466995 1.1883655450625399 -0.16383880862318012 0.45738347013933717 0.8930166281530455 1.2761190119581509;0.41371769347013737 -0.40154792870458694 -0.45872091351746058 0.05578782798112622 0.13815596687031481 -0.16929094299232617 0.10173757574051823 0.50339925504842697 0.19551279565229404 -0.091266032845575107 -0.12379300725838122 0.49833262908416864 0.14804721089875197 -0.23123183068306447 -1.2686729885457178;-0.65784780403548404 -0.13744411579141494 0.13590864918065299 0.65233533052341663 0.60511125554801892 0.1313162766248975 0.23195890122494051 -0.72609737778685512 -0.15043739308062659 -0.2706784475577203 0.35970628973460472 -0.13574984913783739 0.036687349270285441 -0.35330007199576224 1.2076445832535101;0.41072862542665756 -0.29368075161812068 0.19764980687561079 0.31087155957325618 -0.66824391559206897 -0.092098729606157073 -0.0041508981024139038 -0.19568173428329291 0.81026972348918491 -0.077977463576362913 0.15741614477022031 -0.34805807121130844 0.051031914048966634 0.72019611541337514 -0.20077867756025411;0.23273238442222061 -0.73108858143291056 0.679828548258819 -0.50992979189983767 0.61643041665721987 -0.88982519494359102 -0.79846595651392016 0.3186308317106219 -0.87184646140565891 0.58803155572001509 1.4273823092482418 0.31957914558718165 0.37441876957520731 0.33120630934349454 -0.92403866956527136;-0.769314347606052 -0.68866919175269525 -0.55805580791710085 0.22329971950787528 -0.17413286352773893 0.069186524504936175 0.48745666267585741 -0.32755079740701282 0.014375940833944265 -0.44218280728944515 0.38404916622876556 0.78171784162689173 -1.2923805541853461e-06 1.0851739599415038 -0.040223837993709273;0.068726434972763206 0.28021334693649708 0.61910226712246508 -0.26773980483066562 0.35373332301128324 -0.33191136243429997 0.94522069641013962 -0.53035085615982003 0.22652382576006891 0.95729620703623708 0.28787677703123515 -0.36295563790491681 0.58626521049287927 -0.27300286662827766 1.3150215106105687;-0.53792304367347665 -0.23872224721313259 -0.64303320853178492 0.61165432673509557 0.064990647008500158 -0.20112945380804756 0.35000758876664473 0.28429434869630327 0.31158524463986881 1.6522746027377069 6.0752842654207551e-05 0.71228449680803252 -0.14963734265085227 0.038911867127796609 -1.9059005675040199;0.46853335900271281 1.0706409334878098 -0.18964450143099298 -0.13974330250694084 0.46388079400865606 -1.8448232067933201 0.58736329507950547 0.52597640586645822 1.0463031185426119 -0.38276169444801539 -0.17905547679514644 -0.26344370316160387 0.12755661862594558 -1.0933995101428606 0.69408699820337705;0.19644573016146022 0.19894996480839733 0.032647914698546332 0.78721062476319414 0.27198378327624978 -0.22828240488951895 0.96319985482018833 0.55765400128724552 0.089528496884729372 0.80142166199969611 -0.031258897754090922 0.3208951951909374 0.48967182988618208 -0.42936919426536879 -0.95756342581467502;0.59333970471392716 -0.27835435674061004 0.28204422119536604 -0.14118934153050017 0.73813111657944863 -0.11979064421296212 -0.16294960897944538 -0.51446003672185669 -0.66949777982355374 0.25821490562123028 0.31893896821742473 -0.23632009909949753 -0.10773820265904184 -0.11957345344284985 0.53819801238579801;-0.11868308223299964 -0.3459950412559808 -0.74198638697950348 -0.83186018268816819 -0.54652986847383311 0.077738510063264099 0.37280403722492117 -0.52341540903202177 0.68516752227369704 -0.86296261585802991 -0.42005964321124939 0.2974146662361794 -0.2546405163920879 1.1181064977585085 -0.20687173521324392];
  
  % Layer 3
  b3 = 1.1124288946586387;
  LW3_2 = [0.94628057452989167 0.19201474970838434 0.31332476810091292 -0.4361483165638454 1.6140875763615279 0.9692945774959244 -0.74504012519861418 0.53911621389933306 -0.69089566136417946 0.69147166287357564 0.79277458343333806 -1.2250985310095983 -0.95772730632660941 -0.79284603460789072 0.86004683774037871];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 14.7058823529412;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
