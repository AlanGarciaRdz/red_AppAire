function [Y,Xf,Af] = NOXLasPintas19(X,~,~)
%NOXLASPINTAS19 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:49.
% 
% [Y] = NOXLasPintas19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.96825396825397;18.6915887850467;0.0175284837861525;0.0546448087431694;0.00640204865556978;0.138888888888889];
x1_step1_ymin = -1;

% Layer 1
b1 = [0.38928657142089634;3.7237303582264825;2.5762488033750648;0.88557873270733467;1.2955604140079318;0.88769099321310885;-0.71645977475942402;-0.56519108650293515;1.304120007271298;-0.33038477722346166;-0.075562469935890372;-1.4394022191911484;2.0272749641378978;1.862506147697701];
IW1_1 = [-0.51371284658693028 -3.2018396969439267 0.098397880881918337 0.012141256566284793 -0.23744118131645986 -0.025182342268306419 0.094754799990179522 -0.080635354410975357;-3.3052222991225499 -2.3513677049082267 0.86148304534248954 0.70539714416274191 0.6019477856286175 0.55394609122208283 -0.52895435398110058 0.39633489005456685;-0.54012838801928242 1.9066755328806055 -0.32936550695722189 1.0815161196227638 -0.37411496112358672 -0.98437198974981821 0.66310092781615448 -0.21033116369688604;-0.52794334908691043 0.40630343587688356 0.71926456094427937 0.892495811945615 0.12842477739702804 0.12981491836016848 -0.742842272829905 -0.095172134970264874;1.5755244595585345 -1.6474491459274809 -0.36612833735235928 -0.7902723474446085 0.44374769823624893 -0.78526994331179778 0.69493944613419534 -0.18791967576054883;-0.25124657643512022 1.1484669538374914 -0.57585161092135606 0.20990257201462598 0.19334931684162074 -0.27603294501796577 1.2700123765316542 0.21988880449001419;1.5064216694286261 -0.97862120646539219 -0.80296520070637722 -1.8270747887568837 0.94060497667328358 -0.5351484890035284 -0.0041636789170701009 -0.0034005454974159639;-0.82502132622090407 -2.0065994514598371 0.30392138661551649 0.67643634725205504 -0.56165510938643282 0.46416715082081855 0.052930765385410021 0.3997433154407255;-1.438610446037212 1.0416786025209597 -0.39989502955486195 -1.7388908707368618 0.83441804347728576 0.18112687876389119 0.0058641904789366525 0.72762378807544248;0.16128353611167234 4.9142676295602623 -0.035216736312336863 0.25310961781368135 -0.16406960748354374 0.5111387105833286 0.095067912762723458 -0.10267904279154984;-0.5602694046217267 -0.28389689539325785 0.3349326072933817 -0.27270088948457938 -0.87423750895522567 -2.0110797351960121 -1.108429457729698 -0.14331971695325169;-0.72428366010594158 0.3961460356366952 1.1625310489232648 1.7434866051085003 -0.61378116228856738 0.33977133852553032 2.1608993720072238 -0.0063160977866872159;-0.27640311293662023 1.2822584847528957 -0.86460630340035005 -0.69584946470238207 2.3316323487690469 -1.59492020932536 -0.1737493305305696 0.00031868540073885267;0.23515905259470779 0.3512565236964198 0.11022694913004526 0.048447680065914898 -0.27631275377920178 -0.13713677837421703 -0.7386746324932939 -1.8813671632138032];

% Layer 2
b2 = [1.8120751962803821;-1.4112224967189106;-0.7298057240399406;-0.73017115481427053;-0.69412030268808478;-0.32787268804242037;0.58703546287904007;0.11596821189142997;-0.02681174480865986;-0.81914072222456236;0.75128777296812566;-1.2746444716997842;-1.3915639512785076;-1.2916092394905447];
LW2_1 = [-2.2964795990886144 0.086567998981035343 -1.7347099623078817 -1.0825191441621533 1.3028848657798138 -0.23109871532703474 -0.89081270613566244 -1.3290517990839013 -0.96338316501216792 -1.125142558957166 -2.2642504407199948 -1.9064672590056242 1.4340674932265216 0.06767612805901406;0.66872689166145782 -0.20487258054572269 -0.72092468393552933 -0.62321631989704085 -0.19418114547803436 0.17463265769561132 -0.40049631253348345 0.32087724226285852 0.54365414768232434 1.0348257693843572 -0.15265776396417341 0.021873429864979053 0.39253217428848458 0.025632777674813024;1.2380413875203877 -0.5656795047950236 -0.38628816518229736 -0.44633692540384345 -0.50805289657627006 0.10234001638140092 -0.35545242783439718 0.58210367530770912 -0.36046780214179047 1.3270423771277431 0.054926447224602562 0.34221533604333221 1.1328050006382773 0.63868381998751034;-0.98258699000129157 0.0097442539922069013 1.0965209615640366 -0.60711140284280396 -0.48295362242299789 -0.84229288166654981 0.33425323108846661 0.37457636101625025 -0.65105972996819894 -1.1112834499654409 -0.3242616117272813 -0.11327801051582978 1.0078160185090708 0.30103818542413441;-0.87775740232175559 -0.061068209252932548 -0.52083678163711178 0.094369693188553261 0.11251068814502475 -0.099660032720147354 -0.27703683012706731 -0.020081235613223475 0.70955854596202461 -1.163935038579982 -0.073870137067715266 -0.47938719266779595 0.079580200843101787 0.38613426938996531;1.1299596703018715 -0.062072833811905176 0.89805685919163147 -0.34923120938356672 -0.33688804841442771 -0.14737158779820239 -0.2297593175877172 0.53201066050819601 -0.72098250694787613 -0.67595873182449251 -0.2493013509773464 0.68317454649977249 -0.43879889716016135 0.52324165472785189;-0.28904252089336646 0.66894249939220629 0.92500494196553495 -0.46610388965062866 -0.41060033048913519 -0.58442432184544779 0.2435316570169522 0.8570363140484405 0.52411598844504503 0.65517043135382724 -0.29691016554944843 0.14196029371034727 -1.1131348258514866 0.16439603992191346;-0.087385555272282631 0.89345978408234406 0.74390270859328378 -0.26312307266349994 -0.16955510505860028 -0.49637506116024227 0.92355694610187056 0.2570062291292064 -0.94986105161870893 0.45505773075456557 -0.12545402500121372 0.26091682476102357 0.40235509340451064 0.32781278275810544;1.3446376175253727 -0.013651546878969328 -0.97488333077365841 0.33664498043950147 0.63174286276317537 1.051258898609394 0.09620054156741098 0.31243753311872163 -0.46033364774814756 0.66434074384167485 0.25523514731009345 -0.11214874568883289 0.00766340804956301 -0.37950075725061827;-0.097691715961388759 -0.17581238474758396 1.4886458785612022 -0.61894300108112787 -0.48603525249635016 -0.57524689199668688 0.17755365876603837 -0.747374266131835 -0.70580336018789991 0.44047747161852036 -0.24009457748079593 0.40762865010955202 -0.16449232282820053 -0.40370333301015038;1.6390489178039767 -0.27947480018714804 -0.37318321172953617 -1.2054786766966892 -1.4623201921445697 -0.67736767392387742 0.56404288602345098 -1.0119299733908764 -1.2580751239594132 1.5141899437794182 -0.021099638564989601 0.73818306435081016 -0.28868345186485472 0.38124569720593887;-0.47711704500455826 -0.50611664469812112 -0.43262478032612106 -0.87670537629270073 0.29990884122869371 -0.5510408929233005 0.52537935959568693 -0.64731611493760721 -0.88885760171342798 -0.97094518193406787 -0.26530161856774115 -0.28464366415880066 -0.30806917775849713 -0.54710103068881621;-1.6460635291580965 -0.67892952925821137 -0.28739729054146101 0.53576165534374554 0.44254475342595967 0.061231971769133475 -1.0452985707481486 -0.46612515031427509 1.0639144798420883 -1.6175446296654032 0.043978893121601248 0.031355294396096314 0.17264056707776018 0.80456214472523946;1.1981702872956346 -1.1331330124147982 -0.4629160853938884 -0.37751825801745637 0.46714939075230499 -0.29411988562267044 -0.058214395720710889 -0.60682407130325666 -0.74849243340504046 -0.42351324345876734 -0.25481863278672046 -0.70949151716512548 -0.60869922209001348 1.1106299748314519];

% Layer 3
b3 = -1.0633069846950527;
LW3_2 = [-0.5916762199935317 1.2717241124391609 -1.3535969692251577 1.6670970987933924 -2.3878379641878915 -1.2419550111501962 0.7063583761907013 -1.1060071563078497 1.2413898460565187 -2.0581005248982698 1.4642080924678125 -2.2585214473917317 0.87679113445425527 0.7827974247039069];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
