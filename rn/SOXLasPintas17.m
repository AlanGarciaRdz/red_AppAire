function [Y,Xf,Af] = SOXLasPintas17(X,~,~)
%SOXLASPINTAS17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:46.
% 
% [Y] = SOXLasPintas17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;4.5045045045045;14.7058823529412;0.0179856115107914;95.2380952380952;0.0558659217877095;0.00576368876080692;0.212765957446809;166.666666666667;45.4545454545455;29.8507462686567;24.390243902439];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.1578528065599794;1.1819991163912211;-1.6465772905221041;0.4400863350181215;-1.1374372503838921;0.23669436689637785;-0.52506143239853575;-1.8624133614539689;-0.80858500911566611;2.2899467912103284;-1.7600409343898182];
IW1_1 = [1.0740880037277911 0.72373815309583078 -1.7171799697188035 0.56785479561217089 0.79169368144794627 -0.12298233720900019 -0.32518297090732878 0.027250444439247234 0.062694122378762568 0.87015016421232905 1.8086380393613584 -0.048217657547096351 -0.91028496697463324;-2.0697125205423905 0.032725654709486164 -0.62414563249997357 -1.0658649034988126 -0.78142345834061711 -1.0867962695426965 -2.2325618467611132 -0.015888771699551985 0.66156741374808337 -0.65507444409895599 0.43092693599371201 -0.24752913452866604 0.84099184395843329;2.7008628073521668 0.6911404651299109 0.2668631010973378 0.27346534538844441 0.23347813432511053 -0.92114619326194314 -0.92847134355872962 -0.11581889649559271 0.11764460677555798 -0.23484982639933785 -0.88832134727734724 -0.007205208484969694 1.2205160527808068;-4.2473056602632333 0.31850356111750822 -1.2282124932900675 0.15855622472943415 1.838845806206409 3.5257679609955543 2.8055629341769825 -0.52518390776041923 1.6358513715173977 -2.5761874756941974 1.7903980840135392 0.69517313293141803 -0.60844539205856674;0.28701968471399608 -0.6370385791169515 0.29534579264255889 0.3311037577921731 -0.56610627455595486 0.01727257923017618 -0.039647880249460067 -0.22284665799450762 0.26046538976619527 0.69364226268304108 0.51240933636641006 -0.030419720154317504 1.108746640174497;-3.4738715502169537 1.0877724713847645 2.8163169212220378 0.33715842381386585 2.7461373509877043 -3.3542821351964762 3.4607854955816584 -1.0045684254203695 0.86610334759548113 -0.62090382862057047 -0.5686156441661312 0.49260574826798725 0.33179396832700425;0.35638315921586694 -0.06982267880631815 0.21649829727627826 0.71170622725195121 0.0086656534768651955 -1.1044864407639532 -0.072231869286164457 0.0076944568406247492 -0.18391930687204924 0.73866409442571246 0.71488315537674707 0.86048646919885596 -1.4993381000135539;-1.377151691749628 -0.082984437252633408 -0.14258097895155725 0.30313659038506635 0.1279760498925718 0.82506590696187954 -0.33239460105421353 -0.25609508724360946 -0.015057080171338319 -0.57493527776662234 0.60339795214108183 -0.010526116020675531 -1.1639122201773526;-1.620960516552822 0.098875145110328674 -0.31874527538130965 0.6445482980035302 0.86404596970147296 -0.56865732699018978 0.51572144163629974 -0.27672907558544502 -0.1475182299278735 -0.023413225583963609 1.3211836643743944 0.19798922547312564 0.32685723831872388;1.0186533285781221 -0.66078956894196517 1.5405059137304153 0.25032505583238046 -2.7223448995340958 1.0214111971966118 -3.2001774733395494 0.33642522221103383 -0.012714323433818286 -0.47964997152438188 -1.4880911396444929 0.54827571198830216 0.82425846695151428;1.8396118086055904 0.071124484458617049 0.93410411635558066 -0.069782140473287624 1.0273507639677772 -0.94869251227690321 0.55655849198868101 -0.17858309666568878 0.15946129368328074 -0.29887846940348201 -1.2516915359321059 0.097384962181703741 0.1791182713589016];

% Layer 2
b2 = [-1.8157783546154211;-1.9036740086889445;1.562687007657354;-1.3792421501131074;0.14288201667494929;-0.58452734181957178;-2.1332513469015666;-1.3294034591552932;-0.88345155612676141;2.7083413263347271;1.7205670246316758];
LW2_1 = [0.27118020967849993 -0.82250878069417832 0.23813075473398632 -0.42829447899461442 0.61438215640509564 0.20107501389369589 -0.50847565565392949 0.59450107042474498 0.60926864275912374 0.27225822514046266 -0.69948257418815929;0.30697666514464544 0.19297043562033739 0.33061333659255704 0.52679883003642158 0.24906335470353685 0.43633203578751295 0.86296576539053416 -0.67665339442132466 0.83771909162152469 -1.5808019905484127 -0.33664105678254075;-0.18299389508478248 -0.94130719989685863 -1.5106047647422309 0.17812179929490465 0.21635898026897155 -0.0098009281627256407 -1.352782111097321 0.55943096121308722 0.63877392499273233 0.49333305881537409 0.50184465051793148;0.19792821112293635 0.83549033635939973 1.2640763168114562 -0.010153587752967003 0.092390465773788441 -1.2322556965408393 0.7889079252655159 1.378712266473971 -0.0039617132559664758 -0.45739565749194022 -0.64586894093801284;0.058615971704457322 0.45880742262770896 -0.78166177094154399 0.11299759681693451 1.0243906646608241 -0.017924103665535054 -0.32526860803058905 0.84822481834149654 0.54027885687850474 -0.74505169508995417 -0.99215370187529794;-0.56837879760790955 0.5581740946763849 0.33675374456194002 1.4939051076395469 0.90838492117040415 -1.2262669955271677 1.0362651220313972 0.49435984634851549 -0.18253008688896685 -0.51177314415534814 0.86110556047170062;-1.6762563352256883 -1.4366112257680774 2.2188637512410736 3.3578837830719901 1.9379392986141875 -4.4127201350067891 0.10442767871534839 -1.3072856836528863 2.0223082382565174 -3.3531081527817257 -0.96025861760880926;-0.31074269283572969 -0.00092409658478683279 0.50613309275713803 -0.27066177856785945 1.1007078636095307 -0.22260665117780101 0.35770789612451126 0.59746729357868167 0.050888740136814756 0.87111107066525439 -0.79624607510296896;-0.061531617521643558 0.6492876776154215 1.1830927342965478 0.0068164936120770339 0.19015236813527167 -0.13473996069988131 0.86123776793514051 1.3220767158205433 -1.4989569942001471 -0.46726686473234857 -0.65887060475415993;0.51922295442975874 -2.112358954489264 1.6467820118964116 -2.0779005601728295 -1.8209542915060222 2.123921288727745 -1.9985334315412542 0.6944392466526581 -1.0231979770046467 -0.093276904709046815 -2.8245575617639713;-0.030766759810395013 0.45961355517980523 0.55379406370609363 -0.056068761868285868 -0.83578719225786446 -0.26136450063060601 -0.065433065019196393 0.43068816574500268 -0.76227064574916414 -0.86038197754068335 -0.060956893503462485];

% Layer 3
b3 = 0.43035935034748757;
LW3_2 = [-1.0501857642193437 0.10845047223010823 0.26237950351260902 -1.2801534989692669 -0.13163505380971616 -0.44154507544256483 2.8435520986193299 -0.77319743673003649 1.1883310273319532 -1.8790821614354518 0.72548224963000718];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
