function [Y,Xf,Af] = PM10Tlaquepaque24(X,~,~)
%PM10TLAQUEPAQUE24 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:20:43.
% 
% [Y] = PM10Tlaquepaque24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;0.00773694390715667;0.00572573718866304;0.00618238021638331];
x1_step1_ymin = -1;

% Layer 1
b1 = [-11.299420844879737;-1.6391429971444871;-1.5482759575699354;0.53778840912372083;0.99711769013963436;1.1523004555967298;1.1212317806539167;2.4917848741023736;-0.11835132857410259;0.33495506881829185;-1.2472290762264482;0.26690459241123476;4.2728256057745364;-0.67715808860895299];
IW1_1 = [-3.786787382602125 0.16517280514871013 0.10304724508597959 -0.53662757406084671 -1.0073032640105857 -0.38051903312883378 0.14752188504158437 -0.3379483736013919 -7.9267347539605675 0.65091056164600347 0.45814825236657486;1.1811955370653444 2.0687740129954095 0.049434403817929518 -0.27445066378917415 0.16517360720365418 0.73096834962074198 0.14486591906518556 -0.071266811309687456 -0.10600428601417665 0.62426921344411612 0.1845724363317082;-1.1793508828486241 0.30677794928316354 0.63478722942847865 -0.17520639651068209 -2.1184996895975141 -0.51148230890308666 -0.073941982762752601 0.38680763140855867 -3.9989166847158308e-05 -0.67101924697602255 0.62830337609285236;-0.39724585924313077 -0.24437447054093001 0.21699344338157736 0.24414163319457435 1.8440329504586879 -1.348661594132285 0.12941219497913276 -0.34158327121333543 0.48340554850142803 0.35687526797004288 -0.71827039937818937;-1.2026553802986195 1.6057231062347721 0.9495905309354129 -0.076601254413221687 0.27104702805075442 0.84137107622613361 0.091738016259053423 -0.058891454973276108 1.1901644982419939 0.49297000959738074 -2.972371145488228;0.83551984325345219 -0.12129458984694254 -0.60589198095711316 -0.67716602068529286 2.2302455563286747 -0.18629399881243902 0.42657370434943603 -0.54365141880434287 1.0799620883718055 0.4467588022199368 -2.5019565128839245;0.39879081071739575 2.245216947849638 0.10905751034832728 0.24414606793550425 1.3112984514939094 0.10132022627360796 0.057751030028252784 0.030662021495248454 0.1027313288777429 0.021454045020921686 -1.5555177169672907;0.53473134801475941 1.6615704120563521 -0.91995089198929303 -0.42214041641727112 1.1120575449306227 0.82778200265387192 -2.4976686571187683 -0.74821542346450709 -0.97011527282852561 1.7357228469540142 2.6451082504056465;1.1944742802238209 -0.45415075247930831 -0.62743790624803808 0.051262924624604397 0.68842400371299928 0.83910490014137562 -0.086022747519155729 -0.080466398369971687 1.4163630600637751 0.75603596401565021 -2.3277788889249655;-0.85186372346694783 -1.7714871727180697 0.43672084026973557 -0.29107365271598112 0.13458591966246741 -1.2496530429018116 -0.015949054174877127 -0.021598936790445951 -0.076644129803791733 -0.75816163170751827 0.62381954432077524;0.23595814036504908 -1.2733843695475962 -0.20825414240286177 -0.15017001038046113 -0.17380591368610734 -0.46909369022976616 -0.044833615341755506 0.075625494128997231 -0.30142126481927556 0.026483161412382369 -0.79221747116882335;-0.62434298676047684 0.022108127823662706 0.080605157959622281 0.22914905860291779 -1.3381807548016833 0.2708182410875194 -0.31004454498637651 0.11854631514571881 -2.237208613158765 0.63419824752008613 4.1265666718063541;-2.4007507520683276 0.3646599648416225 -0.28618746676348905 0.91870759121001078 3.5281622159767649 -0.96769264188829474 -0.33294753815421529 0.29116736485341171 -0.23537239340065627 -0.49272952736303238 -0.75454546678209955;-1.8454579290307422 -0.42275676585646871 1.1791411489389576 0.12558912369240136 -2.7186668848286368 -0.85503692892247463 -0.24232937005264543 0.90482588924572671 0.2419901178333419 -1.6685817967655587 -1.65779227877796];

% Layer 2
b2 = [-1.0552449775781263;4.274321924404501;4.3214426295252304;3.3024366706518844;2.636294984114421;1.5686530446768849;-1.0218862921887313;-2.7275163549970927;8.6428732804899546;2.9991988112321848;3.0381790736821759;2.1321221830828501;3.6195763378248209;-0.11107653090480027];
LW2_1 = [2.698785606665318 -1.1107789846927607 3.1699483906653589 2.0056936704957384 -0.31216585069733943 -1.6268877709360436 3.8876839907140219 -1.6757965943338788 -0.86552075264431194 -0.49750522338994546 -1.0342335687057116 1.3923224220336072 1.8052166496768212 -1.7186942845046382;0.69992283453279913 7.7390146018536692 0.62887876279070198 -3.1940801135319639 3.7087432702916763 4.0740613808782058 -1.4387203684165666 1.1199820726434064 -1.180651151290333 2.7534959390966964 -2.6062626345457232 2.4185392714008547 8.1886458185237476 -2.3095097911123337;0.61842097356391035 0.015532502935932391 -1.7970821321736226 -0.71931159930898481 0.29970561999536216 -0.65902974350717836 0.36904821859843057 0.0600659558058705 0.079382318442806993 0.43495996431773609 -0.32812633902866534 0.060371171677211344 -5.1173153283983064 0.64271106566209646;-2.90578213294937 4.7239354671138765 -0.80331314153955324 0.98893972997820156 1.7076800176350051 -1.8597764109583064 -0.79483779124492548 -0.72731377305865408 -0.17288642153841322 -0.72813211482480034 2.6762181878584186 -1.0414766938305675 0.59212029390921428 -2.59771591692768;4.7188427071414063 -5.0748273520231999 3.3885590603995497 2.3626154340331946 4.5658908693560125 -0.61961870363505045 -1.1181974976317701 1.4938448231794204 2.8597093220364318 0.76652572498841531 0.33379627532660261 1.708283576116342 0.010316213942339295 -1.1197141805997899;0.73348491447211217 0.91592626310472414 1.6667025880102941 2.3712398559876222 -0.8387102573973938 1.3372212507072603 1.5643896738767398 0.25109466452439755 0.57247161224276755 0.87439722069328263 0.73863409721270801 -0.38550491273339688 -0.94666752370661189 1.8858897745871561;4.1680845143375729 -2.1741766940289615 1.7107831117016328 -2.0447290593625778 2.4613332731981186 1.7760161460492225 1.343577606462959 0.7051090096107494 -0.95728803863327638 3.1132160799775797 1.2384984968710668 -0.25609464580546837 1.9214957231961849 -0.031004242250995604;-12.006646595653157 2.1041141638606389 1.0770955824578488 -1.113210701647648 -1.0535848372271281 1.8486852851715978 1.2716857592978719 0.28195121309386179 -0.29932611514241836 0.57877838694158645 -1.887570065024559 2.1471642823785593 -3.9759712968273306 -2.8701269790499513;-1.9240097254048656 -0.61657586023617994 4.856591016905103 2.536541675292924 -0.30489422665674626 2.0085421948213349 -0.13312637723265786 -0.60730666225942942 2.8454573420677312 -0.7364684951000976 -0.020049170369899616 2.9003029846257253 1.9770177983505495 -9.9982777289585254;3.6775378586336522 -1.7718957529934301 -0.82460381605869426 0.51500814617849877 0.037874683984309654 -0.78084039694609308 0.57212056701516967 0.24810798050867178 0.093931474005225515 -0.66636028050471063 -0.6674146454236628 -1.0455107795700265 -0.23986297138871732 -0.22707176628731612;0.75300031190310235 -0.8356931374682468 -3.499178204122551 -0.997356850550014 -2.456549268241877 -1.2959138024841137 0.48173498837423667 0.34629188066347077 -0.92025389067822272 0.28173110243580513 -3.4601002450886873 -4.2007423742020755 -0.99268571061879274 -0.16527523681018416;4.5496093539594744 -2.2648536100480983 -0.4750148828505974 -0.76460053353740487 -0.60735047049875057 -0.34583503545442473 1.4480335921126808 0.15041347406925207 -0.40430379895729623 1.8246542417139222 -2.4758024990466412 -0.61808453050812029 1.4842765158726905 -2.5770522932838871;-0.14090905451888047 2.4309758973455993 -1.5538759962841446 1.6876866381359832 -0.5050482060731768 0.47257836716476365 0.48555603466630048 -0.72179339662800346 -0.48958429685977367 0.27461989889541699 -2.4783265868286128 0.26803803216581351 -2.3354718678063278 2.7390443450128683;2.8231945368347402 0.25477925254876388 -0.0027761731559526187 -0.37142853858436453 0.53309415879594091 0.69664713358079333 0.46654308481434115 0.068199872867953454 1.3551255669913538 -0.57114656511923434 -0.80386246929717675 1.2835277603264961 1.7001972706232718 1.423972519397638];

% Layer 3
b3 = -0.71936466843250213;
LW3_2 = [-0.022306989693279603 -0.09412407888424508 0.17617012207963517 0.10707099682777629 -0.022795241315190402 0.12821712238429264 0.089957790552471273 0.11353034746538546 0.1113898478989012 -0.25287741157540589 0.065018452157606571 0.1554857240831117 -0.081118002760419805 0.15728608165615332];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00666000666000666;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
