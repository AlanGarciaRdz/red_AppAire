function [Y,Xf,Af] = NOXSantaFe9(X,~,~)
%NOXSANTAFE9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:51.
% 
% [Y] = NOXSantaFe9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.172786177105832;4.16666666666667;22.7272727272727;0.00341273633199099;0.00632111251580278;0.294117647058824;5.42005420054201;4.04040404040404;3.03490136570561;3.96825396825397];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.9538033731666518;-0.91672782105932871;0.68342055671322588;1.7372475475919495;-1.1805775674394372;-5.7644695085822883;0.72072737365937334;-0.7888633173111067;2.4807204180003559;-2.0508068676777973];
IW1_1 = [-0.8069736567098198 -0.26147623623839189 0.44134270471088644 0.6727889337495192 1.146411186705431 -1.0112887074964103 0.057742133912215957 -0.013709677605403111 0.61211173193625101 0.80902901157743612 -0.31355977159467502 -0.42319611543802521;0.13480965383229229 1.5750670449790827 -0.69318785749433365 0.74922986616552389 0.38289952475601707 -0.19477350567418547 -0.23030306242136442 -0.10663419898789163 0.14246401728042185 0.32964285317538056 -0.27521616621838468 -0.1047567783479262;-1.4629620144827968 0.21116711146357731 0.80374765622924738 -0.72478389110898955 0.42118635307404145 0.42846056318697451 -0.011845786322452794 0.3340584106333892 0.014147357731386517 -0.14524228023961541 -0.24413823103934751 0.23383016254480835;2.4047234633566745 -3.0057241909097994 0.33091025613099656 0.020001024742830869 -0.96607539354457272 -0.66970744941677407 -0.17811566202222864 0.76694592664535621 0.75861819656547713 0.90540474256820425 -0.72928064889489508 -0.52512435578725258;0.56400168011078089 0.14605690161070237 0.23823270330256682 -1.8233552210524311 -1.3348522741803674 0.64548070072224484 0.020701229850948511 0.71144850626431921 -0.056196927641354949 -1.5452502758318583 2.1255135132741252 -1.0984885470368206;-0.36418598710375932 -0.13716134843381447 0.0365297156398042 0.95097126914666019 0.78123739344767584 -0.4027338968261594 -0.0064557363260383197 -0.46312198190768489 0.02553601085961979 -5.5420256030936779 -1.0784720509246479 0.47708937771157339;-0.22368490226295612 -1.1791953878944723 2.3212959298624667 -2.1983071217529959 -0.78529421201978022 -1.0034516442901151 1.383107702214647 -0.25159812121527181 -1.5642683991751158 0.21805801582302398 1.9132949567117876 1.0472226023509374;0.22043821835698862 -1.2211375448627226 -0.16162315130793026 0.45739280114934405 0.012622236711838108 -0.37268916747372682 0.0077482872398410103 -0.13792244505907889 0.18807675017940007 0.371386398637645 -0.067022785320896797 -0.12505665003492825;3.1365169568897664 0.45293157928684474 -0.58042828810604163 -0.70264358929887294 -0.8889162594073311 0.43661949489130319 0.098166701398955669 -0.0099137818653776879 -0.40244465244473271 -1.3484354569347468 1.2451184131823227 0.080857106333771397;-0.86445719234676444 1.1981320396589097 -0.6417379007527948 0.33657210076172078 1.1826297825041927 0.09747049423451605 -0.28321901214058437 -0.34273781510356244 -1.3184503999851818 0.47102737292117247 -0.12289568354027965 1.3440784911903445];

% Layer 2
b2 = [0.99471414320713525;1.9063600468104474;4.5656243456182777;-1.6511341625897531;1.7662066464534636;1.9721377047333613;0.6248994615012996;1.3182933559657737;-0.87267731206075383;4.1515084120127668];
LW2_1 = [1.206536235613469 3.3245204834085174 0.30478846529302139 0.12768409986772297 1.1042287901504557 1.2329382551906971 0.55381945301186564 3.6794671062140907 1.71140286690846 -3.616130211106749;0.63584152525165671 -1.3349782193870476 1.1757754905339031 -2.8211278965711339 0.21149978167496655 0.85250489903620208 -0.034559028823831391 -0.69442488527997526 0.36367310087123517 -3.4190882650296079;0.21886321241174098 3.6193366187516949 5.2324536083945841 0.65796203034685619 1.9940354071478994 0.071387125651479963 0.73666094829471984 5.5244023840107506 3.285043899514394 -2.5831646599486615;0.13493899285287644 -1.0835269758809518 -0.15417558577956189 -0.73852452070128949 1.1078667059577794 1.4629553634466856 -0.24492937035239737 0.42765495268845721 0.71335711794459267 -0.70073964765145957;-0.058830822652134247 0.80669143616511341 0.11844019216380525 0.52887617383412655 -0.98141207785883988 -1.3713596425736341 0.19621878925715208 -0.25202081212779037 -0.78083441574714973 0.49224251728186863;1.4602636063123127 -3.9043562603880049 -2.1827896946272167 -0.68180688683987156 0.23242112649573565 -0.31874053110498551 -0.72689895475114574 -3.7240513853533681 -2.4477714960664851 0.9177152089854882;1.6751156877601201 -4.229688580702029 -2.1430060903431301 -0.82737954572489436 -1.0504776977901396 -2.4597125184250799 -0.82529455388973372 -3.7009764447117233 -1.6406957474531623 0.66854720918437893;0.82004044723943104 3.3919593769351715 0.510606371416083 0.18614145786109465 0.97581107291963798 1.1317939632627736 0.55787272023459344 4.1582635084779982 1.8542177320802904 -3.4531225523876423;-0.11917339496634349 -0.013198981141297042 -4.1500963357871274 -1.2690352537208647 -0.30337535737298038 -1.0160915684628304 -0.027731490158730561 -1.103964580235189 -2.9678997114859889 0.55695881716630025;2.3125666310485755 1.2566416249043777 0.80303596787359621 1.3096727658412033 2.4354649555269168 -0.028105473238519328 0.20548805548544066 0.95593060490698223 1.2216646012701011 1.899733369930253];

% Layer 3
b3 = -0.13217563630599999;
LW3_2 = [1.4332378166549873 1.1572260661884564 -2.762452341565131 0.95376440411590047 1.448366178957853 -4.4676719911502962 3.2920522628204765 -1.4716246023435049 0.21824834733109971 1.7386962783839639];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
