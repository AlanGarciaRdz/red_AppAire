function [Y,Xf,Af] = NOXCentro14(X,~,~)
%NOXCENTRO14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:20.
% 
% [Y] = NOXCentro14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1065955285073499;-2.9640337436348565;-3.5244513785996947;1.4227941854052704;-1.0310379463917065;1.6313202450506565;-1.3861819644134641;0.1501924826699865;0.31697257813711854;-0.71115524105253303;0.098935192474741418;3.0008514761447782;-2.5758252581234249;1.9371178407922451;2.0807514637661302];
IW1_1 = [-1.4853607376708575 -0.26058431323979347 -1.157957584081484 0.10914290598450441 1.8104259744921145 -0.18679335676783188 2.1052020817875392 0.49357516954598252;2.2101012281238401 2.061055375891208 0.13967099279490128 -1.4717128320228605 0.21146114745021832 -0.80087651302675478 -0.33284087073849433 -0.33351197955024403;1.1826559067717337 1.6153765363694927 -1.77716419940591 -0.029034454826120895 1.6811779435258134 -1.6936992495098513 0.83429302074189948 0.89626617236428163;0.49921180550031513 -1.4085153908105204 -0.18920556310576522 0.58621943423376366 0.88119911559886455 0.57089538409452012 -0.62068897736265205 0.22771156616887198;0.57889944753649258 -2.4097565186440262 -0.047515877374021125 -0.50461574583097912 0.1239914801487574 -0.034798840442813658 -0.095293415683314231 0.12712375580259402;-2.0125329873167424 -2.7330811415011036 1.9045905237628202 -1.2645398096467992 -1.8141846907322869 3.1060233506166113 -0.20924445373551037 -0.5661909040393136;0.52687947086439324 2.6653222148962357 0.28534408480792522 -0.0079776471698281629 -0.33348781841406999 0.88634757175788514 -0.29408693149044324 0.015369099229279967;-0.2642595545605772 -2.5091676948128159 0.22515656386407054 0.078106040169059046 0.61295354437343619 0.25332163662408091 -0.46236680468797742 0.34800620672749272;-1.416542622652049 -0.46412147300249268 -0.92796893296120342 1.778698538277147 0.55598224090472181 -0.63735895745400895 0.11603917907597805 -1.2985414161360556;-0.86820513396151655 -0.26730731045665468 -1.1139957487293666 -0.53792307927709659 -0.88793318563930501 1.3561122086823636 1.0102680026436435 -0.10342397434287727;0.63013708770564048 -1.649770354597885 -1.3587138090205531 2.9307415806962132 -1.6739104692336786 -0.40701650442811538 -0.56157507545312968 0.33387536702614407;0.25055600314151738 -4.5091195401355577 -0.033137168464585573 -0.1590195610354895 -0.46086157305103381 0.66456855157852168 -0.10004289923027462 -0.13018209142283665;-0.57611771696250613 0.63712410396342356 0.3496222185429026 1.4381790352647439 0.16532466855038025 -3.9745741599083506 -0.098129820902745524 -0.17569309016222354;-0.01149258204617376 -0.90347793888209416 0.66961186083301094 1.6665212956102318 -0.18992356744524846 -1.278982596299862 0.27581262625434205 -1.0025189941910868;0.62803320208323599 3.8945670798555807 -0.014392981309756157 0.61840339649553122 -0.12931417246315521 -0.0023627039726178481 0.0011778879382110495 -0.35244000990589086];

% Layer 2
b2 = [-1.2571902226525085;-0.70918056516590355;-1.8455141248326117;-0.18909481082838653;0.12179001023635033;0.79816426206611446;0.22127681356667711;-0.81358004467580036;-0.69940328915395755;1.0394646653547213;-0.34085158973343782;0.10285786879962086;-1.506904970292487;1.3995529711326291;-1.3062375768088301];
LW2_1 = [-0.24476317110137513 -0.47673518282390581 0.90356991807089593 -0.74544528459620785 0.53465337221150722 0.368982554106562 -1.0041118341341011 -0.95819050546222528 0.35970749447110262 0.44772374624432909 0.036709643799777786 1.5103654993137958 0.77104999757735193 -0.37327062827703783 -0.82615516488848562;0.63431030802760091 -1.5812816684039481 -1.5003500557490286 1.113383812722013 -2.4073681439783314 0.62577152790111723 1.5705193289065909 -1.4924265916401678 -1.2194514565071879 1.1034950451975862 -0.30585990362835497 -0.71884651604145799 -0.65693733657308628 -0.07156083487641321 -2.2180457633655801;0.21528373600489314 0.99148560251503048 0.82068073257271745 -0.60637715982073126 1.1584994460561397 -0.3465218712089379 -0.40542699421101136 0.01585977870078599 0.11062916053566887 -0.5649732559268702 0.30125787014033567 2.1328792675334878 -0.46617139666557916 -0.18422905310459359 0.95532022562414753;0.25656725213535625 0.50912317541061636 -0.3166588213730584 -1.086273637595202 0.55403825869568402 -0.41312305946396544 -0.20053560941889439 0.2452604222708735 0.74095125451615484 -1.2239354925709143 0.63501920085270647 0.057300265236236769 -1.0432117708129218 -0.89178169730683177 0.54730876958084329;-0.33307635072059283 -0.2045295326437436 -0.43897289491574665 -0.36052035086465584 0.63158422876887654 -0.015387007287319891 0.57348650929887979 -0.22451236090867266 0.65368596145241487 0.84821539804265711 1.1128303404617841 1.0882420629937288 -1.5284903510684424 0.11042923298106186 -0.88196652678195087;-0.20618424666795376 1.2394333656534988 -0.62783034839140239 -0.11630112286284439 -0.46798370520406557 0.12480594356865687 0.38821374226654953 -0.74829468735343951 -0.18313575565595694 -0.12088737104576286 -0.17729457253843212 -0.17874398813323747 -0.65607312740603885 0.33017971250612654 0.49118628913986079;0.34043541731005955 -1.1308758129357552 -0.63086830438696517 0.81224902330402005 -1.1321846565257003 -0.16312727264472074 1.1524279259584946 0.54075284692893888 -0.69201717409865082 -0.66506213431754446 -0.10734261125773303 -0.53030779973458464 0.6399603876014387 0.86757976511916812 -0.64306417879728517;-0.24794520264817038 -0.53664590368834209 0.89478888132075851 -0.77191808312003518 -0.092423264438288619 0.557245978050528 -1.1206913400746727 -0.63274761862145057 0.27980891306897032 0.50701629220332878 0.011269763699891548 0.89325968070966655 1.0057001438185966 -0.34311602816669468 -1.140313089690622;-0.3223875703863105 -0.34765758446879874 -0.34536271046561229 -0.49527807377571043 -0.83299567665910523 0.19447361869226232 -0.24846035094024685 -0.34232535138536213 -0.53281065921008219 -0.24434452045952493 -0.31902389432535372 -0.031704653885267192 -0.37993129111653517 0.57167138974440013 0.53010007269442894;-0.19684712675638155 -0.019325394864929742 0.4846576329294125 -0.8022744285961384 -0.090605126387375515 0.40270477486219275 0.18018907844176246 0.20642815257907282 0.67711300311720679 0.15327954158354487 0.033700954801237179 0.010143364986300068 0.2813942886188972 -0.41208545062147889 -0.34422308695121717;0.11801039012424729 -0.077041715854605203 0.37064277392200801 0.95632420411108265 -1.7665840430879332 0.0055470034322015471 0.22345333805395104 0.84722764991000643 -1.1752175751706697 0.37343536537052502 -0.11120035794818645 0.098288881065151504 0.10698438819368161 0.6300265159620938 -0.31089769746571305;-0.10559307558641336 0.38013802015438197 -0.51894996088200596 1.0287556384471661 1.7332472700065054 -0.11401128537352112 -1.3194773971764726 -1.668169790028615 -0.49250561276775723 0.5082919449801947 -0.37157687674544293 -0.57316802313350701 0.15155063467320831 0.34248266932600946 -0.041639761465066469;0.09878501466276346 1.1391312843042893 0.23342446401941197 0.12033166119538746 -0.089325997580115765 -0.13482042278568682 -0.98909291938288413 0.39226362903815815 -0.25525584130137141 0.08427521472570941 -0.025734849639314071 0.8850324527093737 0.31255425746290955 -0.057864500556185056 0.33972500863366623;1.585414045476615 -1.3306754240448828 -0.70587915027451398 -0.32037123268805523 -0.052852411630083203 0.30818322965903533 0.47053179380537224 -1.8664460503549503 -0.798670062322825 0.16873504476120985 -0.11372190588639501 -0.16497306619871988 -0.1365149705342347 -0.57671834595303317 -1.3250758599035228;-0.028981543157124659 -1.3773481304067934 0.50031839792900523 -0.2006166523439615 -0.88980101228940256 0.068218833893235631 0.07943698083797418 0.54636296257411077 -0.81730546097737111 -0.48804291254507381 -0.25867093549296577 0.15352649309623628 1.0404737609852706 0.45250360769579684 -0.53693450214655924];

% Layer 3
b3 = -1.2914565668807385;
LW3_2 = [-1.9141297215802542 -0.23517197338478385 0.97494681231678904 -0.51501855341933711 -0.26834279188086069 -0.86566477606540704 -0.35713291357097066 1.830123360943295 0.67761251304825887 -0.93556875275674478 -0.49270844768299049 -0.50394021311200354 -1.2468926810612588 0.30579205953843691 -0.50722981365310782];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
