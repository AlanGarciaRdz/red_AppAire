function [Y,Xf,Af] = SOXTlaquepaque14(X,~,~)
%SOXTLAQUEPAQUE14 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:30:00.
% 
% [Y] = SOXTlaquepaque14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.171659085057077;3.03490136570561;14.7058823529412;0.00462534690101758;0.0212539851222104;29.8507462686567;0.0523560209424084;0.00624804748516089;0.185185185185185;35.0877192982456;117.647058823529;27.7777777777778;5.12820512820513];
x1_step1_ymin = -1;

% Layer 1
b1 = [-1.1620739619719795;-3.650552277084993;-2.0786744028833892;1.8780509042795817;-3.2388854175931328;-0.071598859964074321;-1.0959437729379522;2.538704288160937;-0.87257817189554243;-1.2841352187168771;1.736557837616358;-1.7173811168842397];
IW1_1 = [-0.40837870581255864 -2.5246737861105193 1.2236646827765107 0.19144936718578714 -0.53530948413806578 -1.2730433936840537 -0.47798860143861194 -0.51640768961277095 0.25265103926293847 -0.2119081513573228 -0.22229108596659369 0.71451013862743451 0.76584935249061525 -0.53006236786285232 -0.22095090856474009;0.93745286894847468 0.55056033538567206 -0.0018348667888847259 -0.78260300893331336 0.13757599889029237 -0.038518594331709372 -0.063088013430527737 0.35782263924985791 0.51651915161862938 0.030197481159192362 -0.32223533249263009 -2.3374177481451155 -0.22246274326558749 -0.099248541770444704 -0.35857010480485346;3.9677178339782095 -0.47027927501260108 -2.2005233469103378 1.5460488400881558 -0.14624968120502924 0.25440846132940942 1.029133098194922 0.300398497550801 1.7466185619553438 0.59848325090565391 -0.45532548260934524 -0.94992718741151594 -1.3901609647985773 1.4391462755650994 -0.083581379765458819;-3.8822839943742555 0.00083368560538180439 0.45352785742542168 -0.67412644786196929 0.27259270189314616 -2.2329499794752832 -0.033484642286012847 0.45693587964129773 0.20540672320876147 0.40973030915827757 -0.076938166588456119 0.85016784939184986 -0.80475412339367847 -0.48005118854751966 0.54543346389744685;-1.1039635263135363 1.3929982568238641 -1.9843120882150951 -0.48309817055415449 -0.45189734524760072 1.1377342229921783 -0.26587952314094992 -0.20554949217972424 -0.12985951470913176 -0.060359722144624463 0.0041128159428264616 -0.43982611257992682 -0.87687458276441832 -0.3623683798828285 0.11759854957649907;2.5240462664551706 1.1334714894540996 -0.22132495483028686 -1.6165212418986217 1.3228907123966711 -1.5004929275654042 0.48849911386407374 0.24287307871466066 0.41528675442738761 -0.43675958034375706 -1.0949193710150964 1.8860039587295045 -0.2714611336590016 0.17560551304109834 1.5078775430171261;-1.1570771974194638 -1.0484477468973867 -0.48255515949908467 -0.087456661070024158 -0.45864624678220112 0.21417628888930451 0.12950460155330007 1.1399784460545073 -1.1067540658056694 0.043466191514464611 0.58534189646630108 0.95811107881132962 0.27064731476121584 -0.76603258347067005 0.30942762946134728;0.8489065164273204 0.4664881579876447 0.031540354125120781 -0.68798428719214466 0.11952607539781539 -0.053119250819290233 -0.03910013977908517 0.234284248803072 0.46410179523549544 0.015776674267854503 -0.28318206024579778 3.8769082191753177 -0.16941062140858199 -0.10331079388356097 -0.34113505712038883;0.44451144128050779 -1.0282214255339857 -0.22407683511618445 -0.98796068024589145 0.13317753322506379 -0.022290695374330899 -0.023720274851607631 0.59792165586367585 -0.30741390836703542 0.091058604169017968 -0.32215650021751374 -2.5319974231997522 0.1471875363070656 -0.30421385938546625 -1.0948540257177992;-0.60167306871382875 -0.4155189271944088 0.32411447314611574 0.08694217934869454 0.56181805266334561 0.22561771600903111 -0.37102341575861392 0.30376331432548359 -0.33852417844663402 0.071059810100089299 -0.33855813351864206 0.49952765822157075 0.79352257428178641 0.96540847712291389 -0.10790081390949685;1.7468262336523279 0.76894695535396718 0.44979627387914356 -0.032364201205657819 -0.91535327599827054 0.68995517440088572 -0.21547412648591011 1.1836176708353234 -0.29593483730049175 0.24426550418044338 0.80443905862127574 0.99423348324651895 0.19456754698577303 0.18670526816588068 -1.9909335790298019;-1.834446410825449 0.70485802421241461 -0.94988577785319583 0.57642617479151581 -0.1566361406209637 -0.84724589895644409 0.51219309039745498 -0.6691464730036274 0.17366049870601141 0.37592731604632712 0.40709400890546887 0.33293770027638292 -0.95234605472643341 0.39740243082526377 1.0226851213797334];

% Layer 2
b2 = [2.2419238646617679;1.4757680789874441;3.0177996241425391;-0.58796243204466914;-1.104297075808258;1.0022341466324642;0.32094741093005619;1.0182935308447301;-0.53150750176945516;-1.8504772219738288;-2.041990342210013;1.7470229583783976];
LW2_1 = [-0.57411239733485919 0.10409447300025998 -0.23210348356365085 0.19984133754224923 -0.062176828899579872 -0.51958023623887306 0.20254289278069998 0.41269972837718194 0.22561543201628995 -1.0849802900258816 0.02339440166758891 -0.76533576171716233;-0.19720735730388028 -0.38610490337820308 0.44061707353247331 -1.2518806963828324 0.64856242280967991 0.34835158698676227 0.57753164654181843 0.30965832403245264 -0.8675923794994902 -0.14287427842692169 0.40629274823243949 0.34528694092189355;-2.1562189335999582 -0.31911020052124883 -1.8830184926654596 -2.46956232439467 -1.7354380750377716 -1.6423393440883396 -2.0039697871384159 0.53488835846063798 2.3900453488179401 -1.6541456115413178 -2.7275868082253329 2.9308733884075906;0.71900375257699523 0.63786900229354193 -1.3449296126687604 -0.5994600815204596 -0.13778063954694597 -0.42884806481080123 0.31753959943947141 1.2902501776709492 0.20370301408624508 0.021457165465594424 0.39635497108055839 0.51759204720364271;0.21476082435790533 3.4440385879426278 -0.02836134054218557 -0.13701399266872957 0.10002396154642153 -0.074258561693510639 -0.1372718609115017 -3.7056694366039178 -0.11929287932773591 0.88219901972041392 0.042961225841596659 0.077924050303417799;-1.1726794433832732 -1.476158152259285 -3.0758207326241243 -0.16861891321294481 -2.6972416318555439 2.5846417675929558 -2.100818131956808 0.055491540387557284 0.0077342997240586603 -0.8635919334599792 0.31285092821328897 -0.85818849336081082;-0.055169110312919753 0.12184051083808455 -0.0032590992118919776 -0.52807585522497158 -1.3039416600926801 -1.1044319963570413 -0.32627647825117684 -0.79355851743453376 1.1399080921455829 0.25991575657448934 -0.50974689439601228 -0.43056982029058416;0.73243495117382718 0.46519384311758671 -0.38787060463506268 -0.62277885102696096 -1.8441397169517344 -1.3037192376269924 0.14006873365101186 -0.37461265821909911 0.72634928815640987 -0.67036701718962188 -0.37051063539773454 -0.15656958218556916;-0.5160298553132584 1.0940835550133394 -1.0355257944877354 0.75467920892205176 -1.2468815807814784 -0.59478069726711347 -0.13162512539341814 -0.56456295994918948 -0.092778061862643882 -0.71421060115124035 -1.0806766674091608 0.26236337778888541;0.11084946615257878 -0.41251420362890379 0.5710066013009486 -0.64494234711665377 -0.089637130500482956 0.13793904831447712 0.75395697189687194 0.25092517230286204 -1.0480135170111473 1.5224107544997489 -0.75220025202185481 0.13900987374897997;0.91949681914715398 0.23491305591629108 1.1946139699137188 0.74906085864860306 0.95437753983987084 0.25656984654540149 3.2905501390439018 0.52387697495027352 0.94501238574716218 0.40836670284966964 0.62878244130286221 -0.94018044688234881;0.16439392055732888 0.46093140199385035 -0.25736097420701204 0.68818145341900161 -0.7111313184566378 0.25237389831604656 0.24528770021522361 0.17146086511952355 1.0164483031363964 -0.29002682261127161 0.40564425265477611 0.23905326726954762];

% Layer 3
b3 = -0.27392669486549576;
LW3_2 = [-0.13971631491738912 -0.072459572849204984 -1.1432957969881123 0.13023003576828635 -1.4688654915374293 -2.0296095390447935 0.27011633107856958 -0.2377980544499749 -0.076032974642251838 1.4793360979694818 -3.1183527861185905 -0.36639611251046555];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
