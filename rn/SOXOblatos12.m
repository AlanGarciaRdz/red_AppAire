function [Y,Xf,Af] = SOXOblatos12(X,~,~)
%SOXOBLATOS12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:41.
% 
% [Y] = SOXOblatos12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;13.1578947368421;0.00618238021638331;0.0205761316872428;117.647058823529;0.0560224089635854;0.00600600600600601;0.158730158730159;95.2380952380952];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.1571419370608922;1.4565492845615315;-1.5238884606860963;-1.2379643966608915;-1.2032066309002394;1.3536305138053579;0.001947006219101842;0.20745437893095706;0.78617113849826392;-0.34148209663359175;0.86707909524605353;1.7546586534103812;-1.7506821965416897];
IW1_1 = [-0.091464093229046584 -0.42041098310971731 -1.0269687315558098 0.067156412391291526 0.52906737807708804 0.18366287178430618 0.35359553707452018 0.59433845223403492 0.030798556787652913 -0.71721618896333783 -0.61649475920593466;0.43934733577014434 -0.13845935023546296 0.043623944790151963 -0.27231960372031477 0.5143819124274065 -0.51892494489792507 -0.41878259064856627 0.92102380246096838 0.86555242975577928 -0.035668705056229197 -1.1261751093521744;0.23133341865548676 0.023992710328128962 0.25895031767994381 1.0183294328434322 -0.51921854328304173 0.921104854791991 -0.46480442759343743 0.333014655621727 0.11384633966356153 -0.18460432252119924 0.78385266956011834;0.52369741527472924 -0.45852347783967734 -1.1600088935940709 -0.041416089385032259 0.45726005064498032 0.291391992245636 0.79884469500696442 -0.048321261243614674 -0.10482377944059058 -1.0829522957944189 1.0847046787236079;2.0340335019649158 -0.44900485878849689 -0.60008507830694691 0.34212465758921495 -1.3158878392031943 1.1333249676358967 0.19748986282108902 0.69486390471214132 -0.30503175418938239 -0.23706365528457488 1.5604356400253794;-0.38920717883515671 -0.14972093354763943 0.61027439569863628 0.8881153022203101 -0.30645177286053443 0.5399866044704934 -0.050089229711396517 -0.24679004385036538 -0.27197325066408273 -0.41542677348961848 0.0080690843458112206;-2.0663689448810518 -0.58082116500792513 -0.94214963129463347 -0.46423546272701077 0.35888137568238238 0.34665144861324526 0.43992126543609822 1.5288592624668609 -0.0064745510895363838 0.30249227952501379 0.48506415974559974;2.6843650035529181 -0.72322512200598155 -0.57750424650951548 -1.412895344541613 0.88398957586878291 -2.2541270952255381 -0.93136122540761257 0.44687688860067559 0.61826331967343462 0.87609012552026289 4.0460827636031285;2.1343579388395706 -0.16740106272990818 1.3915358391460395 0.18520390187178171 -0.23809605671406817 -0.55940080255790514 0.56121106595850023 1.5790607763050253 0.20288996167812673 -0.33882464444034477 -2.439965748597007;0.070661990970555144 -0.86433597502503279 0.71413870480626362 -0.66792157376801098 0.081262695045933198 -0.39020450448601418 -0.35152607862307556 0.025114314642603698 -0.34344352005487599 -0.42936330300678893 2.6608160503811069;0.47133988857520981 0.1632170950985509 -0.84547291509037825 0.51407434416387321 -0.043081974857408688 1.0112939561641483 0.12931425446008504 -0.45531617932786722 -0.47867980197318133 -0.83731445465723053 0.19475475350562699;0.22326409834930805 0.6596972053445227 0.18597986488400492 0.6045001753581023 0.77055507417014502 0.38080451721191516 -0.46289589373756462 -0.31799823130619259 -0.11934716621421645 0.2679901040074234 0.34424390897293689;-0.45134989982033763 -0.15558052874626155 -0.14525904770417536 0.57531532434756316 -2.1429464633469522 1.1133322038458304 -0.42879706792482697 1.391013758645101 0.21094023917096019 -0.31893824495904832 3.6413966594567841];

% Layer 2
b2 = [-1.8785387288843325;1.5674322237887388;0.5160633674288988;-1.0230211586445879;-0.51202536804804422;0.39297903235430787;0.026563485364096761;-1.0174672548752106;0.23335138898505134;0.946721191904069;1.094136868340458;1.5447083557652788;-1.7107973684246225];
LW2_1 = [0.39633923669882248 -0.48890191624058565 -0.52018261721685344 0.72287819394560504 -0.19218057268892696 -1.2446851777306793 0.99389990325137634 -0.093524098001007638 0.44167870233582307 -0.58561606502760544 0.89876275206258049 -0.048924657050238567 1.1044313877867526;-0.57916225704143076 0.40583700599810713 0.41708574545518179 -0.34527522161981306 -0.072389575583369156 0.91623811378561859 0.19025667681009037 -0.28293311661818166 -0.45271762748553224 -0.86809733831280322 -0.12788810106688336 -0.56824754997989235 -0.68812426483430866;-0.65170409880035773 -0.92879602054755905 0.84808501265225722 -0.048527524763182436 1.4117284094774594 0.18516990393165778 -0.85564696632341053 0.73209884170446504 1.0806244662404201 -0.77529527173710955 0.36093888833231014 -1.2452931737644417 0.65690294358341839;0.51783339801621719 0.18095748537965559 0.45935374000090745 0.47819617086039323 1.3736224535899364 -0.80958932450561705 -0.097044327387950546 0.6799384481224553 0.31221951064642395 -0.092147966331707507 -0.075182693340466553 -0.18466909219632549 -0.55622957101136883;0.45664482127671585 -0.354985086641813 -0.21614494913900878 0.11437173834613582 1.3670083985360502 0.10521591042868268 -0.65849084569170868 0.80325799195926362 0.74423325812958374 -0.73522042399354293 0.27395511114351145 -0.94198820814011386 1.7698402662916377;0.99418349397606476 0.29190100550098041 -1.3543626160496363 0.51184711860429011 -1.4074055226267319 0.72899598086217499 0.075493054281812522 1.9919206494784691 -1.7021105041385625 -0.72198890515393843 0.22961363872372945 0.7060347684263536 -0.82121438691364024;-0.62517739739292066 0.75729462160815519 0.1197602613221945 0.20865293394585946 1.0452232345949095 -0.34115160682539541 -0.13638940976255245 -0.60492584943531047 -0.10682228299697742 -0.50920241863171667 0.40961993573750199 0.15588533922707504 0.35961509968617428;-1.03086763239462 -1.2229023641284265 0.86231371317748695 -0.88009488375220424 2.0515447189204883 -0.31869833088928756 0.39175524311387921 0.81206865059263944 -2.5906730752947196 -2.0675196363572343 0.21587135733570928 -0.31506467359545848 0.15594594733359562;0.51759758353824725 0.17752803551884727 0.23867374704878333 0.41269080509879802 0.83404800737649065 -0.57103919170266826 0.047077550696864319 -0.26552571471750014 0.02911407332635952 -0.71654772548430745 0.52203329839918433 0.11310203469251709 0.75958527871227188;0.50642635127750701 -0.17405843608620961 0.54561529744360004 -0.083416976937761081 -0.025082460429161419 0.80797986466585936 0.44429547679656622 0.034905238238665794 -0.88778594081019935 -0.79099612282010245 0.048917414906673326 0.22813154466389432 0.15376991073963944;0.243466488871036 -0.48938773456231055 -0.39143343723354168 0.26965265586063569 -1.2030904947783905 0.76857491652350995 -0.11119468524911369 1.6973884156055814 -0.97478368806693505 -0.58434619280941968 0.16260328711203653 0.42964756027494327 -1.6841089513266019;0.79009633535169566 -0.23174653411178311 -0.68498758641283108 -0.5785977242494168 0.50758709874129027 -0.21686993126749024 -0.41178205557480901 -0.006010460804895694 0.13810620353852515 0.0553227429966721 0.37333354429478743 0.65379003258041835 0.012135637108217835;-0.60000218913253278 -0.55424447706179336 0.86563071137511982 -0.026028075765168589 -0.68744768990435101 -0.66721319615660224 0.27854917044799821 0.28545295206233628 -0.088883349574278722 -0.14788951282651275 0.47072149545310277 -0.33896147156636919 0.24889623651979487];

% Layer 3
b3 = 0.50306496315858751;
LW3_2 = [0.88584381726966954 0.42062121604699665 -1.5653130122071339 -0.36195839948011616 1.8736888009615695 -1.7784867775266999 0.39629583734512686 1.8341001085754538 -0.39405486012993518 -0.29349327252881352 2.2371078237708346 0.63913468981251664 0.022018696781000546];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
