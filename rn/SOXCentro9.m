function [Y,Xf,Af] = SOXCentro9(X,~,~)
%SOXCENTRO9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:28.
% 
% [Y] = SOXCentro9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.1292588878810261;-2.4197862064056497;-2.8484999326364897;-1.1518131536024707;1.8728481136626105;0.49444709811598353;-3.2233186106273317;-0.92484133769044941;-1.1604714369556728;-1.8605815076493148;-4.42883841274279;1.4849664454105334;-2.2712088069705496;-1.3717159740563061];
IW1_1 = [-1.2651216767812148 -0.064934945015512516 -0.22704437159219032 0.10418996896643422 -0.23970402225352352 -0.028883220481468797 -1.2933691851531384 -0.22902039938001323 -0.19468475335867547 1.1221799495671774 -0.25362424663885297;0.7846137223228784 -0.1004220444164691 -0.52644649767300022 -1.8138314011760337 0.031583519124432385 -0.59824161477570281 1.2872545881290001 -0.4299973954806216 -0.60806294497234037 0.76813832798033532 -0.47033439955581458;2.6274069746401776 -3.3978486809372264 1.5990049616630524 0.44492785745554564 -1.2190447608608792 0.33956786569859826 -0.51682834744599682 0.40803062764013664 -0.27504772677334954 -0.22833995448655603 1.3332765382480201;8.6408708087059942 0.20555428513253524 0.93023432239034931 -0.33782278308966363 0.0076766579910292551 1.2240407783465637 -2.8071179823515822 -0.4143574784062658 -0.26338958327707018 -2.2844398795034371 2.778562008354037;-4.6438057184994879 -0.12102616199513873 -1.2224690885859877 -0.041043596684301575 -0.45680090077271884 0.50587551858949331 3.4226385216008128 -1.2097421783712097 0.026419265029599633 -2.0765435138626982 0.38977421188829958;-0.80618819251580476 0.61776304590134368 0.040105993485018414 -0.15952726445289905 -0.5144551997889969 -1.1146279218069797 0.015390136717472554 -0.05578868485790682 -0.97401917431573182 -0.43962958602936525 -1.5729732642572656;3.0186543270386212 -0.043195676232298003 -0.2159412280492751 0.21665598687843304 2.25063551067114 0.18098069587085178 -0.48853734245356956 -1.28050437662554 -1.1061138615770123 -3.863628420761545 -1.252178154143053;0.72540303069473266 0.42922911409513281 -1.4158329431253629 0.51231230653700754 -0.8689254908823848 1.1215923314183833 0.84457990393447646 -0.24811342425542648 0.73721664357484185 -0.34145068337974038 0.39623347366222494;-1.72614622630229 -0.089237112016595066 -0.11829364944394784 -0.28100064663979774 -0.864094246083283 1.5374550899904855 0.52495273361228534 0.63427770221695667 0.09550106533129761 -0.27801716720712094 -0.16273381783125956;1.7441575986195297 0.63702084115458024 1.7026014233452134 -0.065237738168505505 0.75230112433996721 0.30020488740424423 -0.61115234900856175 1.3391329125108007 -0.17128907118768411 -2.2112456140158092 0.23461569836207899;-0.023896299528127458 0.013783213239138619 -0.90459320707751412 -0.057665594379396806 -0.51479651710878038 1.1585281173482149 -6.2523396918984924 -0.21259664860470809 0.75723525189219321 1.8862295625180925 1.7628127279823549;1.5367608490834237 -0.20348216005210096 0.62630820259323583 0.11392369944916331 -0.38628736478900655 0.87460963803161407 -0.2772658051211348 0.3132588090701639 0.2900951680812181 2.0804050271190317 -0.022210057873927894;-2.5283191592664314 -0.095480262815423031 0.77623236273452634 0.58004342881926607 -0.069630490001474032 0.80179039103600369 -3.3099201372361207 0.067682176209079029 -0.13058928064684597 0.91808035573707691 -1.1123254110138607;-1.24516812537604 0.037644600456482678 -0.2406921047633071 -0.41721736032359658 -1.0963943204193638 0.18724387846178459 2.2832489598809325 0.012517860935595419 0.51422960418304675 -1.1389402985946904 0.49703248167935588];

% Layer 2
b2 = [-1.2608371962901674;-1.2176333500444845;1.743908702952857;0.36668644980390919;5.6085687614627835;0.23881276663443765;-0.89525718919956732;-1.1164296945396077;0.047911779808738675;1.1450539569237905;-0.7764247147133948;-1.2402655969932161;-2.3441395256998345;-1.405244383902398];
LW2_1 = [0.45620763627767102 -0.13851487989430269 -0.41137609054392171 0.62377417190632578 0.19474431923956978 0.47379304604622036 0.50302570391914081 -0.41438141703036036 -1.0447259409463112 0.83997076283284344 0.66622369014963911 -0.019053546145060704 0.27571006189029429 0.21180494906693786;0.59301606030506038 -0.058935498357058788 0.0094473244273046049 -0.021053279136471668 0.37358618630163104 -0.5230256018945596 0.19439022690278515 -0.22931129158570784 -0.45642559825264173 0.13620692090110456 0.053911594168015081 0.019132498245336908 -1.0605832728872948 0.092865395395246658;-1.1954331079117415 0.72602216050784685 -0.51090273832480526 -0.013382582755703358 -0.72401280966005011 -0.36794547739704903 -0.30878385393537289 0.14524671284667634 0.80458455187588007 -0.70586315305549363 -0.74308931098296804 0.66786345903241795 1.8567130528070388 -0.17155670823345601;-0.33297205280044945 -1.4588352133797122 -0.35470470508186763 0.73718705348163205 1.957967394690179 -1.3444373564129559 0.19368021826904133 0.29945139463774834 -0.091741403804433769 0.48936383233399527 -0.69880068641233117 1.5380017301774827 -0.75411861394237567 0.8573130920705313;-2.1003260400941643 -0.37718204087945506 0.14786567618163687 -5.2202464954796923 -2.5154489207767647 3.3159129384894115 4.6142134703701165 0.24079122697885702 0.85125179952727292 1.62230926660456 3.5926020527720417 -0.4458698675194705 -0.20371136913663884 0.55464438409894978;-0.033337098348090524 -2.0273862168114016 -0.12093229131379092 0.2395961168079071 1.7793238600303973 -1.1395345238876418 0.17797867448898366 -0.97219024098519835 0.96248879732119197 -0.81827725792840578 -0.3473503631044853 1.6851746621179078 -1.2406178761960212 0.85834857522007513;-0.2720045593508591 -0.233682858164385 -0.51284466205739265 -1.2695989864206847 0.76271113684349767 -1.7767225335197581 -0.56304374555680459 -0.074772394356379834 -0.29483797395236366 -0.14674512215132487 -1.6809904959817688 2.0878499314931416 0.5652876357531319 0.26026774769109073;0.2839373878050383 1.2205867539444342 0.42905953272631642 -0.33995681093437197 -0.99404278179026795 1.0303263412963786 -0.3162299410379264 1.3892473190825529 -1.1538447471676152 0.20561394439509068 -1.2821389099888845 0.092658277842638831 0.59298570063446998 -0.57303704794493016;-0.05379752720232335 -1.4317859321831388 -0.24594250581335783 0.32833004140913596 1.0280942965360229 0.19426148011239261 0.29778488918678103 -1.2413776471984979 1.0957162492762742 -0.033082213280378782 1.4158917849775354 -0.30051072242603127 -0.66378485979217206 0.50872315543814028;1.5464317681249495 -1.2392495357161779 0.43853972964077342 0.32997287771574763 -1.2242400820251758 0.87740301099774998 -0.25557835646980537 -0.6216101397524576 0.12362093015943008 -0.71372274814553893 1.5056993894838142 -0.63204435586058394 -0.21850557461495893 -1.4176329246205559;0.22385018449684801 -1.3265831469597102 -0.12720859920628674 0.62546349392579903 1.7933583342488013 0.35237522329453808 0.1660782712266759 0.25237914580425957 0.076039342596146475 0.46490003434509353 -0.62905154774237282 1.1344460100545035 -0.92135385279077997 0.61276802085715232;-1.7462710911421884 1.7539109861587721 -0.2448435345301537 -1.5894604350341368 -0.40375167498099929 -0.76887396876160374 0.30486358468487418 -0.14019378709512581 0.17543937403385937 -0.20593111156293817 0.73791926388555151 0.22166243602192343 1.1564407072558605 -0.16362475647953523;-0.24152340801275282 -0.30785325621426124 -0.38713635203205593 -1.2447551833979686 0.88622905890004788 -0.33015979964115588 -0.61158658258940835 -0.09142966755494869 -0.34523624678973308 -0.20319348926975955 -1.5886314941000617 2.1183353260707216 0.49593000205258742 0.19686086994650451;-1.4140497282766242 -0.36343767806621535 -0.20833813972092563 0.55251290956587162 -0.1196178885168829 -1.1554387640470223 0.57368734018990986 -0.59376536422548709 -0.78532123153570199 0.30808513688233286 0.68114152673085715 -0.092966129490763605 -0.2132848514629278 -0.14887052464597439];

% Layer 3
b3 = 1.3445003473338113;
LW3_2 = [-0.15048212745319381 -1.6465331885667589 -0.56107022488282321 -0.90459163515405405 -3.0893839423660929 -0.17606931393714984 -1.5750618490122985 -1.6170569580360357 -1.5698887933719623 -0.091553280320462629 1.0952693290495714 0.27439570794175233 1.5348356702920161 0.18359185373520309];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
