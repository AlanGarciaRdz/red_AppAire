function [Y,Xf,Af] = COCentro22(X,~,~)
%COCENTRO22 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:34.
% 
% [Y] = COCentro22(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.281968137600451;15.748031496063;0.00773694390715667;0.0203458799593082;0.00627943485086342;0.132450331125828;0.448430493273543;0.241545893719807];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.8017372584663565;1.2495832921169325;0.75458671913568398;-2.4409471085184169;-1.0326072007017602;-1.08159925775189;-1.5715462186956128;-0.34734084758533823;0.017712919111702613;0.34563506344626771;-0.24642891391065247;0.11054559951530434;-0.84399327818561287;-5.1520563438334745;2.9282491373188044];
IW1_1 = [-1.350886931770457 -0.049619186571564909 0.56818974014116563 1.0113052707379073 -1.0471933874486852 -0.15267113724447129 0.96828534008190303 0.32137058804821572 0.49336443500669347 0.047765858649894917;-0.23988712693340258 1.5533077885593094 1.2676482826424902 0.14751738497763073 -0.51190207333591109 -0.37486988911877633 0.15966494621105184 -0.1371524895515655 -0.54946941798190663 -0.71267485341246839;0.88128586725219327 0.75001989550101711 -1.5827572465639808 -0.14767985395784941 1.0204902876576845 0.29081905124909119 0.55570198254028702 -0.31878203437207431 -0.16911288961985829 0.91640108156093514;-0.11614086549155894 -3.8295929900087886 -0.52952134850640709 0.037038517853080641 -1.4276620238949327 0.34714624030279589 0.42643579601604231 0.14553030261213895 -1.216866709724133 -0.0030373564106224056;1.8295113800940064 0.86562275138140432 -0.0058765556785162938 0.19633323194279426 1.1349650243820228 -0.65055153780273822 0.31555260164597909 0.58819333169392685 -0.035194401925388953 0.57697066688138676;0.41578900812570119 -3.70174403226352 -0.38429619027036915 -0.43804293496705593 0.70220115181803533 0.075488306918643638 -0.11376738859271929 -0.38587530960182992 0.259992848372121 -0.19477988759856202;1.4590680825417468 -1.4445354618432908 0.65561267587859551 0.57740491020440776 0.25402394771536785 1.690599754329164 -1.4097492922708728 1.3613956548891495 0.66239051359901613 0.062312137564201689;-0.44702423961586524 -1.2516383714366024 0.090649349010806332 0.68485319742297124 -0.72350028229546537 2.0232542018913917 0.64313295927426595 0.011326537145988816 -0.34708198300102494 0.25383315408294665;-1.2663887757117136 -0.21676607333047951 0.12976203753960686 -0.011917708614298417 -0.1477763575597858 0.023843288736037076 -0.28327640750407734 -0.058138559156269906 0.53310124289208716 -0.12976550236508316;0.45712735768679214 0.81940836281193352 0.86412674809709988 -0.07240516403711017 -2.3529331997564489 1.119876795855671 -0.36692930571491633 -0.72583131618952934 1.3468571190693257 -0.47131040497442012;-0.082135793612931579 2.5617733196975712 -0.039157275234922698 0.20075865043518945 -0.18493292154103447 0.081438903522002337 -0.11666402864205772 -0.12728971708396269 -0.55521297204156927 -0.54997759390832102;0.08243859100635495 0.9237762332457381 -0.15126783261941548 0.66663365784424955 0.33409697172701347 -0.038560700389073367 -0.079216845988760082 -0.49140299107041796 -0.038061121321910849 -0.31212967324518187;-1.0544917012539581 1.1263800663883712 0.062679293441804701 -0.59778768739762422 -0.26869715759054846 0.38193209425130908 -0.23197646008323092 0.039078397309787072 0.31735862598917147 -0.24154088857528147;-0.013070066893525113 0.21069011759186651 0.70690369845123324 0.51581746769615067 -0.77295414992985723 -0.031209812729970143 -0.10404289721708614 0.059436898817616192 -4.4797070158252552 -0.35085630209201585;2.8211636921940344 -0.39177765354675737 0.055264903203091735 -0.11635862156172899 1.4545113886748937 -0.36830021502800714 0.083351749016730314 -0.24792874645811361 -0.43751861424560595 -0.61071078423654912];

% Layer 2
b2 = [1.8099261615745521;-1.3788310975029827;-0.94287539154943645;-0.7028983408108983;0.1088739000614643;0.36579641488103165;-1.438084278412022;0.29011705466937443;-0.37640592540232659;-0.45109706047927245;0.28369295047745285;-1.1002520752850831;-0.84188465608197005;1.2406174827113297;2.1271734823786561];
LW2_1 = [-0.52865225162236884 0.056957516749350873 -0.27039931796312483 -1.3363192544742428 0.44051996350729333 0.99611531440632595 -0.61628375069354313 0.43851607002942317 -0.43703720943804192 0.76763028138335221 1.1255139832656207 -1.8944864446268712 -0.39296228039090708 1.2355426271068817 1.4161392028815065;0.42394681152754488 -0.2755123352547556 -0.029741476188916524 0.20508799587391879 0.89075864412281591 -0.55507641467068491 -1.0085986065766008 0.10658072174818732 0.22084917993421496 0.40999380643450484 -0.78712238730115724 -0.22567331748969724 0.41256699076966336 -0.76752367259384469 0.036735972419201825;0.49473022710087144 -0.75251113094443056 0.2928480928311607 -0.55758771427089948 0.52986039056000345 -0.19416209503253271 -0.30694762456398617 0.25361935937384894 0.60169598666201773 0.098185394850207136 1.5110671553451878 -0.28292595311747309 -0.5181542759634935 0.43148148887311866 0.36562550232596691;0.18450336276882062 -0.29100755214767604 -0.7050051384535706 0.71378660994208087 0.2522130057533275 0.36080577976169187 -0.43048134200698224 -0.09539084098392607 -0.59633727711620899 -0.24622351303309103 0.92649804926675183 -0.43851065006842332 -0.33071356004568853 0.30285145335283442 -0.005485895298662169;0.067473462420552785 -0.57536040643761088 -0.13517213360904262 -0.23742706736052163 0.053340027941945076 -0.7775153380857216 -0.11574151621048523 -0.080300280225872989 -1.1003415764127509 -0.050565527039722981 0.35951276206899596 0.8635901777768995 0.96319268887718845 -0.096006301037482353 0.4157302060404594;-0.35677685369643619 -0.20694225516193093 -0.20294941417433601 1.0597240045448519 -1.1452368304128877 0.094902047525349961 0.65105908431309656 -0.21495315385668368 0.20030371053620719 -0.095030991268530318 -1.0324594967773748 0.54978753350686405 0.55820159894156496 -1.2917275722214521 0.33338900151546691;0.81566594741360721 -0.86647607400856241 -0.070160482444606917 1.0047742193604525 0.62896005275304157 -0.17260887166358627 -1.2220624401538063 -0.36248478001663126 0.11322901812045527 0.29089270040562881 0.31689503402617009 -0.78633028715017517 -0.33158055236938982 -0.22333552780151747 -0.19855047355540548;-0.58887972776926334 0.32420252685839701 -0.2541562349859558 -0.0379765691341225 0.24188254530601555 0.31623948082706294 -0.15864284053742642 0.12316655351710915 1.0861659566928634 0.04792264318126694 -0.84759696164762166 0.51765996501697198 0.23708082425031246 0.38722492043575096 1.3360260062016156;-1.3349623573817031 -1.8276250437245938 -0.88155361168047508 0.35470342155820067 -0.0093130276469410179 0.71588157779536821 0.58375938789900017 -0.82764452771690045 0.74543424544351822 0.36439740826986039 1.7061135951315998 0.74066785658332779 0.17017649703315535 -1.8489745809015758 -0.92183072795974352;-0.45171724688222525 0.21315824506319303 0.35916804987079548 -0.5492994962540716 1.188958003744925 0.26037956311799942 -1.2545791631864025 0.37394735751282693 -0.52382830647915091 0.051820575160078042 -0.444160918477294 0.67409975339813633 1.0291118809306712 -0.79796700688302058 -0.87812049023717254;0.83346918905242073 -0.096944641683483171 -0.14275664199582949 -0.16441315437540513 1.2964681711133061 0.80765996930831607 -1.0874907400409306 0.7296408271304734 0.3892834574335986 0.39434163903005409 -0.59946787791149303 0.042223449875125274 -0.54454808118706333 0.011016099090913764 0.93037638216855889;-0.22686575283347768 -0.76975739691403688 -0.77546929131280395 0.73836708768807624 -0.1104273281165099 0.069842258159232742 2.7315824373691555 -1.9935120078720814 -0.26551737610238274 -0.29577824266279823 -0.874949725547705 -0.46422692574172575 0.59584633979272994 0.42269921881891526 -0.55858911416697676;0.47468242121800752 -0.74776963706722921 0.35521676542625558 -0.45732772102438857 -0.11340470640770579 -0.95432276334279953 0.005115887447627171 0.086961077443728024 0.22533788549284373 -0.57657783893789294 1.005650098679914 0.44059671337678197 0.31908767391039455 -0.34060582273536572 -0.68428831180552496;0.17018399337762793 -0.11384569374573815 0.62444589002470041 -0.098592270907487081 0.17473961275895461 0.78128576171391384 1.0128587397414424 -0.24061076031846551 -0.22986119626102353 -0.0024695241329987898 0.97000598716510134 0.16049873622889765 -0.61693277352463338 -1.3468322981531291 -1.4793736170712386;-0.32590829885972938 1.0379143855794108 -0.33949120114207487 -1.2781219570122893 -0.10396716161177598 0.34854632341216851 -1.1076788216126401 0.84456604229951326 0.5563357774071509 -0.16061810509009805 -0.027317818676640786 -0.7502642750558729 1.0193069547366407 0.25588392838594398 1.0602884473767282];

% Layer 3
b3 = -0.10336677194236836;
LW3_2 = [-0.38369553009866453 0.65199987470846543 -1.5712783996047541 0.61153950455557293 1.1610838763880829 -0.4036918984420137 -0.42007427576133372 0.33866472760343314 -0.31865738200546467 -0.38432273756156671 0.42528794259001346 -0.92698255978855737 0.4101670785209649 0.44096087306389842 -1.9262065410429552];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.448430493273543;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
