function [Y,Xf,Af] = O3oblatos17(X,~,~)
%O3OBLATOS17 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-May-2016 13:05:46.
% 
% [Y] = O3oblatos17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [1;1;0;0;0;0];
  x1_step1_gain = [0.0869565217391304;0.0384615384615385;0.100381449508131;117.647058823529;0.0560224089635854;13.1578947368421];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-5.9296065309499442;-2.0935944014618619;-0.21165771126948696;-0.11631272107208444;2.3741023251181317;-1.4794470431629747;-1.3997194438234122;1.1761906079512108;-0.96861383555312297;1.7406778555238458;0.42175385714024782;-1.9481799036110792;1.9727935304555013;1.5802900749952595;-1.5333827083671985];
  IW1_1 = [0.6472739718101248 -3.0124305939691194 1.8453612382108036 -0.26579588979074942 1.2924032328039949 -3.6466906286093765;0.27471448452882119 0.6599508480551165 1.301736463182404 0.68262012488319679 -1.3150192743827405 1.3184813663604478;0.28584653313517394 0.29411062644486791 1.2848380175053677 0.81574194850385484 -0.56665488387226148 -0.71052283835768426;0.36191748456692335 -1.3281127095032419 1.4092658008589594 0.34111566395102855 -1.4277070571803183 -0.5303046082783236;-0.85149478247451416 0.58563315278540695 1.7725264620936854 0.80056299857687541 -0.21071973457790127 0.89794373439267483;1.079211805922627 1.1187217286873674 -0.57112233119378808 -0.60334535866128169 1.2346656117613559 -0.14371737700863052;-0.071636521725447183 -0.87888242753072143 -1.6797529914796692 0.52204438273752263 -0.65434516187184288 -0.19110021683316658;0.98723022518739445 2.7241219908066481 -2.5126118507765178 3.4435528836234259 0.73714389790740309 -0.76479077565938236;3.8630263905106323 -0.60084474467125171 0.44298572915061774 0.52940309520922257 -0.26356051897585397 1.0137857193568689;-0.67834845243691277 4.6583630587933724 0.93238023820955274 0.72785555863281504 0.90354476875493361 1.8934313721132501;0.41266714701418261 -0.78040393080748149 -0.99300180046323305 2.1587683303975274 0.27721538396447359 0.36603007453268049;-3.2383940499238233 -0.22263662305194432 0.42279593740694699 -0.47229845951607236 1.4229108640998258 1.0327131904293434;0.27283392004027923 0.40662022756105404 0.33469887481520433 -1.2444769468752517 0.55901304427524601 2.4160877793786106;1.7610299573480976 0.82442068199152907 1.061741977661363 -1.9670666414777793 2.9212111067595008 -0.623744591229204;-1.8537952858482685 1.707078591637138 0.57210689024259076 1.2705736755763628 -1.394773075776389 1.1815166468800273];
  
  % Layer 2
  b2 = [1.9975712044307889;-1.3798379386251349;-0.92166865966206946;-0.26403997121069867;-0.69135376232904966;0.33765374720241059;1.0384046469876553;-0.33736837898096084;-0.30777387707305964;0.27597972611277272;-0.24678718524691035;-1.5572877988730451;-0.17247487417330626;1.6459063229239155;1.8864716389402676];
  LW2_1 = [-0.78541268900044703 -0.92626230051923275 0.0066806840304987625 1.2007283553552879 -0.1812270184375071 0.40061717577451028 1.0588196464307023 1.3514942032711443 0.7965140791938784 -2.2340068958616004 -0.33596344259715338 -0.17838061431625701 -0.026361991200569031 -0.13999511506761436 -0.58359345512990635;1.6454560742057276 -0.64111638205105059 0.20841552531541288 0.6211559363343836 -0.67458290903941631 -0.74613368011088077 -0.64448328520196474 -0.58131230483622598 -0.57968892678849171 -0.73882668594082335 0.54467817234915783 2.0254987586804543 -0.22064648345296572 -0.72452987493859367 0.42146244950079781;0.1780724901446965 -0.83694259430045193 0.090878900516494637 0.99023480554396082 -1.0826954990094799 -0.65242960122927163 0.34186244363551255 0.3294709396003796 0.98682737042195401 -0.52466639721617336 0.47429793026669093 -0.74619546448372753 1.0654444428705097 0.38618069601975413 -0.18940882279705129;1.8223826966793739 -0.99503982532775748 -1.1337107754930908 0.25877651675439195 0.043349111811175858 0.1455848339931145 -1.4038810179424241 -0.38221009246220322 0.097766094259339964 1.4518998100487173 -0.67690320956111538 0.41272828758142754 -0.24864437567081168 -0.72055959365734934 -0.6728995609139623;2.1104298121921676 -0.25833089525955866 -0.27966150051908689 -0.97164778856986878 -0.9983192285759469 0.11211523642304284 -0.44639863810264047 -0.10529302197414622 0.85055480125658534 0.71467377700702528 0.13194663760159286 -1.1126224782184169 -0.14189801518499168 -1.0164611739427858 -0.31670906403674209;-0.10626100114659928 -0.44813086809119573 -1.033183076249524 1.4140756326849184 -0.77360852064688057 -0.61483940329643061 -1.3798070022011595 0.34593132749093014 1.3043557431883792 0.89638191346557095 -0.62283819938044793 -0.040540753554796388 0.50464026121445149 1.0721653731656033 1.2139624455785367;0.60221385173188258 -1.4501755980220448 1.0344786527748508 0.023066772929864338 -0.86612895544868895 -1.3908244144374051 -2.9862739917768031 -0.73936653485082215 0.81067810699654075 1.6468427247170845 -0.66752916443057086 -0.66201939760875173 0.38316133241312633 -0.9729137075559755 -0.47101548847690811;0.83809969941929663 -0.13323686344513361 0.077747385395195462 -0.53412429412957518 0.64150449410590071 -0.66727114553854228 0.69061773245573432 -0.14498304234095788 0.60755947114530173 0.32063374188497218 -1.469428076474014 0.28778848821119163 0.020465911665652627 -0.77956991071817716 -1.1268992730949989;-1.3723130037388247 0.019977289326138965 -0.12948271617828044 -0.63832154667863117 0.024357539096674166 1.4294537338495192 -0.9679202910408925 -0.47166602689758585 -0.46863499709557893 -0.59912244795780345 1.2473287677454579 -0.46787682487601218 -1.1928153771289669 -2.2807685646866713 -1.0875151085498049;1.3895382857225236 -1.3701277549200477 0.61746169809169238 0.64558368442523406 -0.20225858057202187 -1.1543562906944957 -0.96991738931712201 -0.4702917937366799 -1.0981430249585149 -0.52051493373334512 1.2057528708484042 -0.071266326377584926 0.93793922044076394 0.087010923744758328 0.55322581425449269;0.62913121690414919 -0.99354318566783473 0.49118595617295219 0.73816736018157003 2.8810261866781035 1.7272445573187605 0.22074646362803546 -1.311825666433591 0.89271515126359247 0.137311228437001 0.08256825312826381 -0.20299857689959241 0.56158208781871288 2.1990728807226039 -0.17414188665927999;-0.56556390630071829 1.0328490326469528 -0.15854178770756627 0.33230008042496251 0.00076833770627181448 -0.1502584221767011 0.11568908779280346 -0.63053633818546651 -0.34939753538111101 -0.13372920999956397 0.13934727520340082 1.6315999928035028 -0.56280383333363837 -0.47835171724470005 -0.0081053124367495774;1.7164155405296206 -1.3501699604259167 -1.3187274287549517 -0.25436480200542388 0.39170909231155743 0.79882980020377492 0.030592541477182929 -0.0078964873923779641 0.30868006812725812 0.88903333919787919 -0.6505205368158169 -0.16333274220670649 -0.93253647642883675 -0.41572643647864188 0.33507933118261529;1.9221859969682762 -0.22040782092854011 0.20529648408052828 0.77439567763100225 -0.60183711768213177 -1.3205164024423202 -1.1396461391678976 -0.58383520654660148 -1.1609844141932022 -0.50721229995265615 1.5257869789122211 -0.29813516367518872 1.0897716597171667 -0.18228577752596467 0.82884889919977689;0.18435110115299094 -0.97813475558432517 -0.12012511086005322 0.87652060936659681 1.5096824178173802 0.46448895280243269 0.31792793359585891 0.55385576878216047 0.89741751561135807 -0.8456152612225436 0.013301921446060988 -0.12509135344466546 -0.14528125560879432 -1.2465553693188609 -0.91316973735086615];
  
  % Layer 3
  b3 = 0.55765782643267836;
  LW3_2 = [-1.5702454705146731 -1.5713135326468168 -0.65469444168282809 0.73129275865920984 0.95276254834814611 -0.45331105625734253 0.4503385988035043 -0.48916893414028728 -0.3223400030344476 -2.0176735951616722 -0.25346123484935018 1.5785720273093082 -1.7975423338324079 1.5817866851335733 0.6670353550261362];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 13.1578947368421;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(3,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
