function [Y,Xf,Af] = COAtemajac18(X,~,~)
%COATEMAJAC18 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 13:56:26.
% 
% [Y] = COAtemajac18(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.201288244766506;9.52380952380952;0.00968992248062015;0.0210748155953635;166.666666666667;0.0561797752808989;0.00614628149969269;0.0213447171824973];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.0237976436360283;-0.5526504842131591;1.2781165857195131;1.7050945135112221;-1.5983224159268905;1.7877834144653497;0.68585409482400206;0.85982609502936391;0.062787832938877033;-0.12007189924841045;1.5083105125258967;1.3398472695800989;2.1124680270142795;2.7160442620392886];
IW1_1 = [-1.480717902362094 0.95589391428606041 -0.051941577640731068 0.58632423789533927 0.83676104401542428 -0.63672444440275389 -0.79163443930042299 0.93427070072138474 -0.30672376441090077 0.47730333169640404;0.80607277259055787 -1.2118929554705575 3.5452435686755219 2.9548959460270909 -0.56477944475428654 -1.6592078339006688 -1.2263292833184569 0.27807771332259784 0.25165388274910455 -0.36138419873014588;-0.14638244940402959 -5.1653868009663704 0.20802961117981938 0.16383429170588293 -0.15877846315706284 0.41814519784546733 0.077545270853822332 0.2751098144028411 0.0054150609567343456 0.44492323638986242;-0.90436568177037424 0.037449074209660024 -0.8159695243642171 -0.21187658457303193 -0.6404912638640603 0.14851040037003194 -0.24778472670669935 0.60457197285802411 -0.29376641052322094 -0.30710247891157577;0.33469218375120463 1.2705257801568322 0.0072550783806751354 -0.24872432067033906 0.16443586920967948 -0.63379718213456493 -0.33880079748075592 -1.155744557809121 -0.10717743221918685 -1.7608286530791568;-0.91398062736849317 2.4733383718220234 -0.69409493182398163 0.5304860424507567 1.1937409999369859 -1.5235972095274 -1.1741601814703864 -0.36823369179586168 -0.56316841424504149 0.3276409430931066;-0.50581583622749338 -0.65542683340169172 1.2808980743988696 0.13552946703363467 0.27945313958567736 0.84460593222464941 -0.4156026186790665 -0.066450488266471125 -0.15582202040523999 -1.271403928779073;-0.13062886837253002 -2.9718714963353721 0.29659611259304536 -0.049320524849905692 0.088468237652861659 -0.035513498513408473 -0.14836380859301812 -0.45465111890864901 -0.11913139627846943 -0.93302989606953723;-0.25264090676170037 0.83797014994937757 -1.3887920540659402 -0.24250357989268145 0.59433691604579508 0.28016608215262717 0.49117870139946113 0.84553002751711026 -0.021582192326370674 0.82908212474387544;1.1804740458938521 -1.9234182360122383 -0.72506184892746806 0.57961560562125869 0.24627927689222395 0.81306984803289706 0.32904653382070237 0.51935770546585436 -0.037798605672782086 0.5706833044313353;0.44197873064019505 -0.052743648221092246 1.3491239376049209 -0.15280054228294779 -0.92721390371249679 -0.31809816417500297 0.48104792684617448 -0.7758020660030307 -0.044393022581198989 1.3073462572877004;-0.35437799515969826 -2.2054583736334767 0.82578905551569859 0.049997359199178408 -0.25268946544927579 -0.69474147327371449 -0.49968717027108028 0.61825897703033872 0.21199587123664601 0.9201185769906155;1.4443099020843857 3.4942066519790695 -0.7711426127297546 -0.49389667316098784 -0.38587005436422989 0.65367747497620676 0.41042567466888924 1.1344597212167409 0.219277911882266 0.37070994880357555;-0.36029725070017904 -0.00018973762052752058 1.3931624384120866 0.2878693054714021 -0.82238318036286018 0.48936138018258246 1.3010291650195609 -0.75744732316602703 -0.099702038962659806 1.3033135800627089];

% Layer 2
b2 = [-1.6231392255007264;-0.83904806199550075;-3.4440260541334129;-0.7285950151557623;0.81262719279356521;0.25062657245833536;1.2561227191266191;0.099115895298559575;0.43217570683022716;-0.39390373077614776;-1.0047658172593121;-1.1770392576221049;2.9893855673289211;-2.198913375810764];
LW2_1 = [-0.12581837380587027 0.29632625164476983 -1.12349525355886 1.0862644020202188 -0.1231084390695589 0.05496504562626444 -0.054819219645381528 -0.13190510515478635 -0.45884063197486241 0.43484199181454408 0.14379977613876571 -0.97268654765875984 0.24330442728651064 -0.18724486534661702;-0.29046932801102804 0.66090213383999297 -0.60217528263740283 0.87204362955029835 -0.59937681335479376 -0.17168826784631103 0.30477883845835679 0.74371428065444978 0.3158940668608326 0.091022678611176022 0.76894046499700275 1.7283920144291696 0.08859682949832226 -0.78121203074926615;0.48511010474691746 -2.1750574561366696 -1.5897095982858898 -2.4631809513347585 1.6483592969712511 0.48166125856865538 -2.0970743987033598 -0.48135626089686612 -3.0254782121552797 3.0330996422071972 -1.9880458818204709 1.6971244445316898 1.4443343241172437 1.377467371317993;0.11680498971834248 -0.56455468665407849 -0.63197398672290517 0.43881361423747689 -1.1187643072719975 -0.22944212540584547 0.13875836577728465 -0.16044461393727869 -0.99247171446221938 0.33528779781271884 0.29838363518952959 -0.53145131697949655 0.070611385530827728 -0.36817256749697436;-0.80312360664238269 -0.55838892344993662 0.60528158470100346 0.20031885251870779 -1.1421206727603994 0.19216085407715031 -0.36038871673630501 0.76784359873711161 0.8270069511574818 -0.85080219141815938 0.58437041571924342 -0.51124387860563614 -0.011920615081017537 -0.38138011312881104;-0.0022672393586940717 0.41592881478798405 0.88925154270286666 -0.06438286532628143 0.87208139564558529 0.17312095685181186 -0.34601531012343456 0.21505087565552505 0.57073783470210626 -0.36807982511168308 -0.37916796418784915 -0.13903654000234678 -0.099120414070093379 0.32584720855126958;0.39967227564977337 -0.78414036702435419 0.058356591001497163 1.4868132677992028 0.17888682952213228 0.81003810926249464 1.5377798140435173 -0.97940358037436381 -0.49460228996068256 1.8285166653833156 1.1990648487156121 0.36633602517139624 0.79078449370746884 -1.9142725002287431;0.55416875573787538 0.55312721424544831 -0.78364673999439738 0.35121961625716819 0.91280997586266333 -1.0200526665576692 -1.1718793167450823 -0.82588414558319079 0.28646601253314335 0.26657018842788555 -0.60159167346025388 -0.923064614452067 1.2116915047055525 -0.12819817942417044;0.3439011236134395 1.0673567489280955 -0.79703016470803023 -0.51576472196551459 1.1333674441964217 -0.24538914187723673 -0.46464889752264693 -1.0674694955485782 -0.86585092073813896 -0.16644202002468267 -0.17331389206089967 -1.116416722810686 0.53280366849075 0.34648516930258061;-1.0756912990290575 -0.85068136119423121 0.38570581427133049 0.27094030433687682 -0.88384680161098239 0.84683138602713792 -0.018051444770034345 0.11300908555286812 0.099681631095684814 -1.0041016560827043 0.9510181903834759 -0.43682025830676013 -0.20505575319613767 -0.70256118587653738;-1.6001066030893416 -0.28448722853042696 -0.056984368280580247 -1.0992288501697398 -1.5104118181229156 0.5336528762586239 0.69669959640503776 -0.035073997015908263 0.62306520843317847 -0.76721287262379378 -0.04012968826755825 0.49652302019146827 1.0365593154725128 0.77502061888065243;-0.49428892501029031 -0.53029908630636058 1.2725235028128228 0.37905586477452552 -0.80586210082805421 -0.69113272768007561 -0.42444448106138749 -0.65549023666226891 0.46830654130981481 0.14521119123552734 1.1518866488669337 1.2824741858874535 0.55786077757456298 -0.52707126553922812;2.0287613308088277 -0.45455400777264615 2.3659205851880456 1.0495851597731687 0.54091715117224537 -1.6642943515184037 0.49454179619396271 -2.5554523744920341 -0.58242156970984427 0.54935437904913964 1.6180097769378254 -1.8459362552985339 1.1491606311961438 -1.0484552109022365;0.091688029863421561 0.51990172834883763 0.36387578904160095 -0.27233950860169187 -0.95842493279673036 -0.11531934872516136 0.10181282201409914 -0.18379395401934912 0.23436452914460568 0.4505977073179161 -0.45842915854775274 -0.060507606071255951 -0.31885319604392226 0.54158656442214415];

% Layer 3
b3 = 2.6343259664672645;
LW3_2 = [0.4154062515589797 -0.24919161515756763 2.7916041076812967 -0.66934499376893009 0.19294420727597189 -0.75461629978601164 -0.90640805799816915 -0.23771152738603979 -0.23632007697688875 -0.20757243952498458 -0.087736606757024382 0.11539440650239162 -1.6232435917535282 -1.7980234311830823];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.201288244766506;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
