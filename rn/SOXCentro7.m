function [Y,Xf,Af] = SOXCentro7(X,~,~)
%SOXCENTRO7 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:29:27.
% 
% [Y] = SOXCentro7(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;0;0;0;0;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;3.74531835205992;15.748031496063;0.00773694390715667;0.0203458799593082;45.4545454545455;0.00627943485086342;0.132450331125828;27.7777777777778;29.8507462686567];
x1_step1_ymin = -1;

% Layer 1
b1 = [2.2852112336548962;2.8156687942388094;2.5133635074597427;-0.86240728209960582;0.43035424603799399;-1.4099900416567943;-0.53440039213417589;0.26288642451008876;0.082078438124515984;1.917050676609052;-3.333152637875171;2.1304563447554044];
IW1_1 = [0.14137106882388453 -0.24423107434221325 -0.75128692749710735 -0.32418503832227574 0.34106658530100586 0.25450334519430229 -0.81816141345889049 -0.66253966448996693 -0.0092743586752084065 -0.17945724969206112 0.26566689867048487;0.55492753530027916 0.10410647629240065 0.040009636208233591 0.18387235781505629 -0.24187476144993905 0.19398061781804235 4.2987774644323471 -0.12682176978459872 -0.035099008076879275 -0.29400777275881201 -0.88080235045205268;-6.2111148964778806 -0.08197900593586549 -0.69673611880410191 -1.150655067429065 0.60971588800751531 0.40066584439906888 0.28510688512717819 -0.11321647547144929 0.30128512840308103 -0.44099140842893481 -0.43192375512629483;-0.13159879127937069 -1.3418228514172938 0.74312255081838341 -0.30196211918660065 0.041984122601374962 -0.59562654847584118 -0.10287552217910614 0.48604210565388095 -0.39412729549803865 -0.95448112882127667 0.56326111320806849;1.0348534833234984 0.67451189305210957 -0.24702000311536937 0.65491272580591176 -0.37742931364122168 0.33238955045020446 -0.2253167882407362 0.99233020871309596 0.80180873342037795 -0.30644581399454646 -1.3232789183025071;0.97124740357112005 0.14065864056091479 0.57161306163619074 -1.1058959876853818 -3.4542514255598364 0.51819973158549193 0.57449942613175842 0.98635791310382159 0.74300581847789982 2.0839089017553762 0.94576629946448865;0.45441254741997422 -1.7331940446387784 -0.032325951467158894 -0.74412201549107071 0.173085071313612 0.089110263204634443 -0.56970342852943401 -0.072463273448319848 0.46751288810021069 -0.070713982529748809 0.16600295038120996;1.3736260451141553 0.1481066821530341 -0.42788467011858317 -0.083558122990752381 -0.21800192482128522 0.49658177912871732 3.013909109454076 -0.29089498795006247 0.19769148813913798 -2.7740638409665745 1.0781169207304904;-0.72679380102008084 0.70292479873614366 0.048520639560152255 0.41085016444289874 0.090364350181940112 -0.49162682617313858 -0.43555231987514509 0.12133371727438526 -0.14606746826954209 1.3272655027589502 -0.71281427138641429;3.3885630975085421 0.056371222403489608 0.061844600015018972 -0.21397293083359634 1.1411540443989143 0.32769886134358722 -2.8306974535184208 0.35497898460979738 0.32756348119857254 0.96950813120230794 -0.73861795858508905;0.14952588445236356 -0.26916671252787838 -2.4025021833287981 -1.0380095417903448 0.18744765066927413 -0.52505858515038795 -1.6960710844329525 -0.34009227284698967 0.076893238573923106 -0.4981814688840816 2.448100361577171;0.33457098348063058 0.060928126046862818 0.23894605538957506 -0.81082962586058649 -0.13133047720884436 -0.3393291179223642 -0.89029227177468895 -0.3788853514044756 -0.7473220008995255 -0.6947674003343699 -0.018425336454886143];

% Layer 2
b2 = [-1.8105699254742706;1.998557136809741;1.7409153982749244;-0.94034347714706634;0.18091841190292615;0.38827940768577185;0.17759072727810402;-0.53443394153261714;-1.2066130071220431;1.3087672558311767;1.741974433296879;-1.7973071132309497];
LW2_1 = [-0.075947886332189421 -0.38710104205664447 0.16038192742973853 0.36661177504211218 -0.45366571238710757 0.21667242031509332 -0.38686668531934776 -0.35461558579704366 0.96730128417353156 0.32887934160771704 0.28205136160473265 -0.77835404436173994;0.41060881605773003 -0.89894643487296177 -0.32969074358455541 0.61119938530243623 -0.4429141914629629 1.4229238698069515 -1.0800065806086321 0.73623497352731959 -0.63942513922823352 -0.045828836337338009 0.6307544216478923 0.45286558893606388;0.29309169612284014 -0.21801672953602425 0.17239895588890083 0.40631470270604531 -0.19319695287831309 1.1665969636621263 -0.72349163406919437 0.27319206864861734 -0.35784523765865256 0.30194271078472062 0.54878566065767298 0.1787786363154166;-0.041512614572792886 0.14734206954000434 -0.1998768916533521 0.92452001640538128 0.24025769410934314 0.42416320963622739 -0.74401956221552179 0.17721468359615153 0.70197829411423784 -0.052345057501266959 1.2129625240542632 0.21519247318328549;1.2033895633978735 1.3188318613017123 -1.3799274219136333 -0.29594927086594802 0.45889034322957195 0.63106604384661491 -0.12471336686482989 -1.4307650293015204 -0.91478076003789455 0.25520475173360702 0.57355053682588264 -0.028437054293369669;0.033194292992408496 1.3908724774221928 0.16737961975718271 0.18244182436873801 -0.16154028700998263 0.52295128931370138 0.086734572965760079 1.0234304336064024 0.5879579951859264 1.1471628323731677 0.88560591232419861 0.31027872158535313;0.56790532292909668 -0.5243566029501544 0.50800345786749412 0.7361542423411469 -0.38012411370616811 -0.13008283461486903 -0.2074406838180422 1.9259746896793462 -0.5532903753487729 -0.31456657738086191 -0.57863549583663476 0.20177912923995345;-0.49982499839952688 -0.40870576569913319 -1.9525890037064639 -0.30360601960724448 0.042789187910927264 -1.2858262910025593 0.75706880042072711 0.40154879533224064 0.27210954830036932 0.245150139997931 -1.9886279441114896 0.54373452400548605;-0.982283269088424 1.3390300210113362 0.72965695487447602 -0.71899471832470196 0.5700553904144986 -0.9282423413799743 0.94083197307627275 -1.2895185430528864 0.12409004881046384 0.090600449764162219 -0.48988529886707544 -0.83124566082377049;0.39154148932347566 0.063226827093554094 -1.4609290357592588 0.11030332491273391 0.053311050775024106 0.20649251312440273 -0.24445221558239966 -0.15360310322850154 -0.32678850651493757 0.2278759129115055 0.097748300844047481 -0.28493385302840679;0.59263076349363719 -0.41382006363201029 -0.28801980206344724 1.055381488293017 1.2001389053068474 -0.60539000118498099 -0.91568986532543095 -1.0752643342529549 -0.55701159783836585 -0.1608073723776087 -0.29493630016161571 0.028672693803768374;-0.52795151936543905 0.51226004957405191 -1.4518265442244247 -0.80324825167486491 -0.56393002950569193 -0.98641825568426555 0.79802621154704279 0.054532535811534916 -0.020809358342083251 -0.67535383810427296 -0.38867514044073892 0.42797674022016202];

% Layer 3
b3 = 0.38599997481655379;
LW3_2 = [0.088150782297580652 1.5783903961813888 -1.3149830335182755 -0.43442518864092655 -1.0754583829611386 0.19128485342579743 -0.10281238858517118 -0.3670836766504208 1.7158427865698371 1.7080066879278282 -0.78573409825670204 -0.21466296117019421];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 35.0877192982456;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
