function [Y,Xf,Af] = NOXOblatos12(X,~,~)
%NOXOBLATOS12 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 20-May-2016 14:08:32.
% 
% [Y] = NOXOblatos12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [1;1;0;0;-10;0;0;0];
x1_step1_gain = [0.0384615384615385;0.0869565217391304;0.100381449508131;4.05679513184584;0.195790504160548;0.00618238021638331;117.647058823529;0.141843971631206];
x1_step1_ymin = -1;

% Layer 1
b1 = [-5.202128712742395;-3.562787012882707;-1.5412808027980347;-5.3066736488451252;-0.24298461558103945;5.6838823041549063;0.48134939182364805;-0.98575781247938432;-2.842643371184892;2.6845752754733878;2.8246241668866334;1.7608672494000035;-4.5897946288340732];
IW1_1 = [0.40905674381684598 0.37224082958693344 -1.8554922317877316 -0.38545855998331324 -0.37857780578865835 -0.2587639577958098 -2.0141502630671915 0.036358455163085675;1.0871775251722273 -0.90501674093370832 -2.0503812103652166 -0.80030376633565758 -1.0020003057064915 0.88749815919505703 -1.6271299410963311 -0.084975554015705751;0.069785240860518946 0.29296284205813994 -0.4855986318640147 0.68516572643844997 1.654466617139098 0.69037192628774213 0.39873885155103383 -0.093672228320247575;0.50450916069831375 6.2495095970832901 -0.89171348345976076 -0.073303420074146169 0.060393773201105005 0.19561472124669105 -0.29464825764142677 -0.077933455187234754;-0.31598887038773515 -3.6526791452487037 1.9562131117948469 -0.42926286880017978 0.18074285577636245 0.50303249628884672 -0.93416119166902167 -0.78338374787506082;-7.8438808777438744 -0.69355020748952656 2.3393226283390582 -2.0117402398503987 0.98180750906742154 -0.57535254783622969 -0.51337894911965065 -0.51509941463473286;1.0295099478525616 -1.8430951798809638 2.4403618031125958 -3.7267149054571087 0.12108909273789814 -0.57378051639773231 0.88879114776616519 0.31051565132115999;-0.13143731040423628 -2.2917754438312068 0.33174800588137443 -0.47040579393626025 0.066720870562487489 -0.26327795874249521 -0.14508083939490488 -0.01874088356130359;2.5309290961200523 0.97670928044665317 -4.3519628932451271 3.0738433876688798 -0.6899457156055131 0.72719165370880878 0.048730149585756409 0.13470049686269028;8.2782815862690349 -0.73782284221383532 -1.1351848245560812 0.30792859779468051 1.24763157956155 -2.2477962287166986 0.33982188445454697 -0.26279281122531067;6.2346089378751115 -2.6534823424243887 -0.5332433229929211 -0.23370637786310669 0.82426812108647907 -1.681605942152131 0.87877928922581472 0.13152009895084715;4.1047780364487876 0.95280055638498995 -0.71445792796198981 -1.0935901169953393 0.2023633248651544 -0.25212163326373149 1.1804717779786047 -0.27149824026856789;-1.6788837529524199 -0.91326525873173658 0.2337557162747147 -0.55281601509531086 2.0442586268469189 -0.53943714841301904 -0.94148599835530566 0.18585778789504112];

% Layer 2
b2 = [-2.7008050187962667;1.3376595545323693;1.6103837561209511;-0.7649948695057428;1.044059864482862;1.0779043495892702;-0.90348615893866302;0.12655792883753578;-0.77780343731026669;1.3582992961724836;0.79106335297650221;1.1496232019648549;-1.6343827193421194];
LW2_1 = [-1.0804446628194637 -0.51272267986630204 -0.14227086887249887 2.3231624782352567 0.50280773790875166 1.211029900412578 0.2850471229540123 0.050147731365542056 2.1554907520297877 0.27754526923272854 -1.1663881339517501 0.65953767141953057 0.366141414659508;-0.5975417693547237 0.69533595206544507 0.66666179854221463 -0.12530783100205159 0.19866002350200979 -0.21381414286462713 -1.2724667156095304 -0.32664035628899468 0.014883030778764388 -0.68613748821219944 1.1150489793177984 0.97558891180778284 0.68153577064539628;0.25088281575993376 -0.46412870960244162 1.3380771006642977 0.81274546589328034 -0.48652750960188235 2.1151109390631313 -0.61263329959529911 -0.29957657249406139 -0.1898567682270714 0.53875243577481935 0.095840520099850945 -0.25862005809433253 -0.10459097188574906;0.56811164269649139 -0.43795867641977043 0.8094613736573224 -1.075111443736759 0.67024285826169649 -0.57963624514774947 0.15756048788925828 -3.3055583526891699 -1.3853503907461759 -0.35260983720636624 0.72405240668761095 0.93973729323123045 1.5219517159632483;-0.74339502688776005 -0.1418525551764544 0.94549564378798168 0.74776651614742984 0.2982340429101808 2.8920205681595532 -0.98617720005799037 -1.2145928306989233 0.57586737472680005 0.57770478883797594 0.085246659352097173 -0.12667862810700384 0.10710721555261424;-0.91563526036779663 -0.14356166192509737 -2.4692657064841246 0.2014347629534961 -1.1469726991399845 -3.9022868036112679 1.3587992936949893 1.6628421982334765 0.37859399749983275 0.016869608767246264 -1.0876093527025241 -0.62815114550565221 -1.0510013120660133;1.1054047779010008 1.0476519718139676 -0.38627004142922927 -0.33710216376703295 -1.416424318910023 -1.1372078307597588 -0.76235867601211782 0.90742856445234488 0.47011200389134128 -2.7762489930423251 -0.057623615295001901 1.1554679278374507 -0.85945276645949076;-2.4282033323822798 -1.3709432759231188 0.53367544124941357 -2.0681769482025318 -0.98900606621192255 1.4607298328633431 1.644443993179407 0.034349847558930273 -0.43416680757281578 3.4874633088981564 0.59784404140237557 1.6810691945474103 0.31927016745155806;-0.12225780824073537 -0.28582175503050911 0.66620301222041522 -0.95105361564095892 0.67837657548832875 -0.26746877862604651 0.21936836631444717 -3.3970544936961709 -0.70896992707723239 -0.39553298232989742 0.54608998596690062 1.0680389626569571 1.6003421430420524;-0.28963753236981721 -0.45824825510400613 -0.82991116665262687 -0.12056033120685801 0.25906026987622466 1.6286012831390151 1.3743478317005351 -0.69486058316072441 -1.6401844887804249 1.7910951236436912 2.1812850267438688 -0.3951297496199912 0.30643620443325459;-0.62827147365171476 0.73784341533706965 0.15345147900539091 -0.36702644796188932 0.1079735183039337 -0.49325389045426898 -1.0451188953131296 -0.27898767512955058 0.15531019395518947 -0.96204000506996867 1.2996410036371995 1.2675015846351421 0.76248651295781578;0.66474021889743184 -2.3304673638134874 -0.4182393505087687 0.23106829047485711 1.1940608415494998 -0.14926857515859351 0.48376456227053088 0.0041952008038399421 -1.8123046596182979 2.1398975635284017 0.68340661614741138 -0.67449212698543493 0.53084800850419511;-0.37434420833307386 0.6775849587533207 0.55238710577218553 -0.80263249398411318 0.96118325217752443 1.8971133095482378 -1.141298657130273 -1.5527975529775122 0.35058696783556215 -0.76177280041986584 1.8729675034359388 1.2566138894368779 1.1954372616649471];

% Layer 3
b3 = -1.1752970095082698;
LW3_2 = [-1.0684030787038101 1.8517828062576502 1.3396762654651964 -2.5464421432039881 -1.5289144949020175 0.63432465813066286 2.1345502818597861 0.47255980568682648 2.6026759571706801 -1.4009117337393935 -1.9226135096615919 2.2517158072003802 0.68862918763108649];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 4.04040404040404;
y1_step1_xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
